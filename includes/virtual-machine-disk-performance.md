---
title: включить файл
description: включить файл
services: virtual-machines
author: albecker1
ms.service: virtual-machines
ms.topic: include
ms.date: 09/25/2020
ms.author: albecker1
ms.custom: include file
ms.openlocfilehash: 4770ac0181c64ef800aa02ba87284c8add357e36
ms.sourcegitcommit: 59f506857abb1ed3328fda34d37800b55159c91d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2020
ms.locfileid: "92518086"
---
Эта статья поможет уточнить производительность диска и способ ее работы при объединении виртуальных машин Azure и дисков Azure. Здесь также описывается, как можно диагностировать узкие места для дисковых операций ввода-вывода и изменения, которые можно сделать для оптимизации производительности.

## <a name="how-does-disk-performance-work"></a>Как работает производительность диска?
Виртуальные машины Azure имеют ограничения на число операций ввода-вывода в секунду и пропускную способность, исходя из типа и размера виртуальной машины. Диски ОС и диски данных можно подключить к виртуальным машинам. Диски имеют собственные ограничения для операций ввода-вывода и пропускной способности.

При запросе большего числа операций ввода-вывода или пропускной способности для виртуальных машин или подключенных дисков производительность приложения становится ограниченной. При ограниченном использовании приложение работает с неоптимальной производительностью. Это может привести к отрицательным последствиям, например к увеличению задержки. Давайте рассмотрим несколько примеров, чтобы прояснить эту концепцию. Чтобы упростить эти примеры, мы рассмотрим только операции ввода-вывода. Но та же логика применяется к пропускной способности.

## <a name="disk-io-capping"></a>Ограниченное число операций ввода-вывода диска

**Установки**

- Standard_D8s_v3
  - Некэшированные операции ввода-вывода: 12 800
- Диск ОС E30
  - ОПЕРАЦИЙ ВВОДА-ВЫВОДА: 500
- Два диска данных E30 × 2
  - ОПЕРАЦИЙ ВВОДА-ВЫВОДА: 500

![Схема, демонстрирующая режим ограниченного дискового пространства.](media/vm-disk-performance/disk-level-throttling.jpg)

Приложение, работающее на виртуальной машине, выполняет запрос, который требует 10 000 операций ввода-вывода в секунду для виртуальной машины. Все, разрешенные ВИРТУАЛЬНОЙ машиной, так как виртуальная машина Standard_D8s_v3 может выполнять до 12 800 операций ввода-вывода в секунду.

Запросы 10 000 операций ввода-вывода в секунду разбиваются на три разных запроса к разным дискам:

- 1 000 операций ввода-вывода в секунду запрашиваются на диск операционной системы.
- 4 500 операций ввода-вывода в секунду на каждый диск данных.

Все подключенные диски являются E30 дисками и могут обслуживать только 500 операций ввода-вывода. Таким образом, они отвечают на 500 операций ввода-вывода в секунду. Производительность приложения ограничена подключенными дисками и может обрабатывать только 1 500 операций ввода-вывода в секунду. Приложение может работать с пиковой производительностью в 10 000 операций ввода-вывода при использовании более производительных дисков, например SSD (цен. категория "Премиум") дисков P30.

## <a name="virtual-machine-io-capping"></a>Ограниченное число операций ввода-вывода виртуальной машины

**Установки**

- Standard_D8s_v3
  - Некэшированные операции ввода-вывода: 12 800
- Диск ОС P30
  - ОПЕРАЦИЙ ВВОДА-ВЫВОДА: 5 000
- Два диска данных P30 × 2
  - ОПЕРАЦИЙ ВВОДА-ВЫВОДА: 5 000

![Схема, демонстрирующая ограниченность на уровне виртуальных машин.](media/vm-disk-performance/vm-level-throttling.jpg)

Приложение, работающее на виртуальной машине, выполняет запрос, который требует 15 000 операций ввода-вывода в секунду. К сожалению, Standard_D8s_v3ная виртуальная машина подготавливается только для обработок 12 800 операций ввода-вывода. Приложение ограничено ограничениями виртуальной машины и должно выделить выделенные 12 800 операций ввода-вывода в секунду.

Запрошенные 12 800 операций ввода-вывода в секунду разбиваются на три разных запроса к разным дискам:

- 4 267 операций ввода-вывода в секунду запрашиваются на диск операционной системы.
- 4 266 операций ввода-вывода в секунду на каждый диск данных.

Все подключенные диски — это P30 диски, которые могут обслуживать 5 000 операций ввода-вывода. Таким образом, они реагируют на свои запрошенные объемы.
