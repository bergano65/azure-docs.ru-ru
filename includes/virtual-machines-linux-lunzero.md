---
author: cynthn
ms.service: virtual-machines-linux
ms.topic: include
ms.date: 10/26/2018
ms.author: cynthn
ms.openlocfilehash: 09fa612e7e5c681da16bf19e94c626ae14a3b8a1
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "77590829"
---
При добавлении дисков данных на виртуальную машину Linux вы можете столкнуться с ошибками, если в LUN 0 не существует диска. Если вы добавляете диск вручную с помощью команды `az vm disk attach -new` и указываете LUN (`--lun`) вместо того, чтобы разрешить платформе Azure самой определить соответствующий LUN, то обратите внимание на то, что в LUN 0 уже существует или будет существовать диск. 

Рассмотрим следующий пример, демонстрирующий фрагмент выходных данных из `lsscsi`:

```bash
[5:0:0:0]    disk    Msft     Virtual Disk     1.0   /dev/sdc 
[5:0:0:1]    disk    Msft     Virtual Disk     1.0   /dev/sdd 
```

Существует два диска данных в LUN 0 и LUN 1 (первый столбец в выходных данных `lsscsi``[host:channel:target:lun]`). Оба диска должны быть доступными из виртуальной машины. Если вы вручную указали первый диск для добавления в LUN 1, а второй диск — в LUN 2, то эти диски могут не отображаться корректно из виртуальной машины.

> [!NOTE]
> В этих примерах значение `host` Azure равно 5, однако оно может меняться в зависимости от выбранного типа хранилища.
> 
> 

Такое поведение дисков имеет место не из-за проблемы в Azure, а из-за того, что ядро Linux следует спецификациям SCSI. Когда ядро Linux выполняет на шине SCSI поиск подключенных устройств, в LUN 0 должно быть какое-то устройство, чтобы система могла продолжить поиск других устройств. Учитывая вышесказанное, выполните следующие действия.

* После добавления диска данных просмотрите выходные данные `lsscsi` и убедитесь, что в LUN 0 есть диск.
* Если диск не отображается корректно из виртуальной машины, проверьте, существует ли диск в LUN 0.

