---
title: включение файла
description: включение файла
ms.custom: include file
services: azure-dev-spaces
ms.service: azure-dev-spaces
ms.subservice: azds-kubernetes
author: DrEsteban
ms.author: stevenry
ms.date: 12/17/2018
ms.topic: include
manager: yuvalm
ms.openlocfilehash: 40c1be20df845b975c023616e38cbb932c985735
ms.sourcegitcommit: 70550d278cda4355adffe9c66d920919448b0c34
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2019
ms.locfileid: "58439539"
---
# <a name="team-development-with-azure-dev-spaces"></a>Коллективная разработка с помощью Azure Dev Spaces

Из этого руководства вы узнаете, как команда разработчиков может одновременно работать в одном кластере Kubernetes с помощью сред Dev Spaces.

## <a name="learn-about-team-development"></a>Сведения о коллективной разработке
До сих пор вы выполняли код приложения, как если бы вы были единственным разработчиком, работающим над этим приложением. В этом разделе вы узнаете, как Azure Dev Spaces упрощает разработку в команде:
* По мере необходимости для работы в одной среде можно объединить команды разработчиков, которые работают в общем пространстве разработки или в различных пространствах.
* Поддерживает изолированную итерацию кода каждым разработчиком без воздействия на работу команды.
* Позволяет выполнять комплексное тестирование кода перед его фиксацией без необходимости создавать макеты или моделировать зависимости.

### <a name="challenges-with-developing-microservices"></a>Сложности при разработке микрослужб
На данный момент пример вашего приложения не очень сложный. Но в реальном мире проблемы появятся по мере увеличения количества служб и участников команды разработки. Выполнение всей разработки в локальной среде может показаться нереальным.

* На компьютере разработки может не хватить ресурсов для запуска всех необходимых служб одновременно.
* Некоторые службы могут быть общедоступными. Например, службе может потребоваться конечная точка, которая отвечает на веб-перехватчик.
* Если вы хотите запустить подмножество служб, необходимо знать полную иерархию зависимостей между всеми службами. Определить это может быть сложно, особенно по мере увеличения количества служб.
* Некоторые разработчики прибегают к моделированию или макетированию многих зависимостей служб. Этот подход может помочь, но управление этими макетами может вскоре повлиять на стоимость разработки. Кроме того, этот подход приводит к значительным отличиям вашей среды от рабочей, что может приводить к появлению незначительных ошибок.
* По этой причине выполнение любого типа интеграционного тестирования становится затруднительным. Фактически интеграционное тестирование можно выполнить только после фиксации, что означает, что вы обнаружите проблемы позже в цикле разработки.

    ![](../articles/dev-spaces/media/common/microservices-challenges.png)

### <a name="work-in-a-shared-dev-space"></a>Работа в общей среде разработки
С помощью Azure Dev Spaces можно настроить *общую среду разработки* в Azure. Каждый разработчик может сосредоточиться только на своей части приложения и может итеративно разрабатывать *код до фиксации* в среде разработки, в которой уже содержатся все другие службы и облачные ресурсы, от которых зависят сценарии. Зависимости всегда актуальны, и разработчикам следует работать также, как в рабочей среде.

### <a name="work-in-your-own-space"></a>Работа в собственном пространстве
При разработке кода для службы и перед его фиксацией он будет содержать большое количество ошибок. Вы будете итеративно корректировать, тестировать его и экспериментировать с решениями. Azure Dev Spaces предоставляет концепцию **пространства**, которое позволяет работать изолированно, не мешая работе участников вашей команды.

## <a name="use-dev-spaces-for-team-development"></a>Использование среды Dev Spaces для групп разработчиков
Продемонстрируем эти идеи на конкретном примере с помощью нашего примера приложения *webfrontend* -> *mywebapi*. Представим сценарий, в котором разработчику Василию нужно внести изменения *только* в службу *mywebapi*. *webfrontend* не нужно изменять в рамках этого обновления.

_Без_ использования сред Dev Spaces у Василия было бы несколько способов разработки и тестирования его обновления, ни один из которых не идеален.
* Запуск всех компонентов локально. Для этого требуется более мощный компьютер разработки с установленным Docker и, возможно, MiniKube.
* Запустить все компоненты в изолированном пространстве имен в кластере Kubernetes. Так как *webfrontend* не изменяется, это пустая трата ресурсов кластера.
* Запустить только *mywebapi* и вызвать REST вручную для тестирования. Это не дает возможность проверки полного сквозного потока.
* Добавить код, ориентированный на разработку, в *webfrontend*, что позволит разработчику отправлять запросы в другой экземпляр *mywebapi*. Это усложняет службу *webfrontend*.

### <a name="set-up-your-baseline"></a>Настройка базового плана
Сначала нужно развернуть базовый план служб. Это развертывание будет представлять собой "последнее работоспособное", поэтому можно легко сравнить поведение локального кода с проверяемой версией. Затем создадим дочернее пространство на основе этого базового плана, чтобы протестировать изменения в *mywebapi* в контексте большего приложения.

1. Клонируйте [пример приложения Dev Spaces](https://github.com/Azure/dev-spaces): `git clone https://github.com/Azure/dev-spaces && cd dev-spaces`
1. Проверьте удаленную ветвь *azds_updates*: `git checkout -b azds_updates origin/azds_updates`
1. Выберите среду _dev_: `azds space select --name dev`. При появлении запроса на выбор родительской среды выберите _\<none\>_.
1. Перейдите в каталог _mywebapi_ и выполните `azds up -d`
1. Перейдите в каталог _webfrontend_ и выполните `azds up -d`
1. Выполните `azds list-uris`, чтобы увидеть общедоступную конечную точку для _webfrontend_

> [!TIP]
> Описанные выше шаги позволяют вручную настроить базовый план, но мы рекомендуем командам использовать CI/CD для автоматического обновления базового плана с помощью зафиксированного кода.
>
> Ознакомьтесь с руководством [по настройке CI/CD в Azure DevOps](../articles/dev-spaces/how-to/setup-cicd.md), чтобы создать рабочий процесс, как на следующей схеме.
>
> ![Пример диаграммы CI/CD](../articles/dev-spaces/media/common/ci-cd-complex.png)

На этом этапе базовый план должен быть запущен. Выполните команду `azds list-up --all`, и вы увидите результат, аналогичный приведенному ниже:

```
$ azds list-up --all

Name                          DevSpace  Type     Updated  Status
----------------------------  --------  -------  -------  -------
mywebapi                      dev       Service  3m ago   Running
mywebapi-56c8f45d9-zs4mw      dev       Pod      3m ago   Running
webfrontend                   dev       Service  1m ago   Running
webfrontend-6b6ddbb98f-fgvnc  dev       Pod      1m ago   Running
```

Столбец DevSpace показывает, что обе службы работают в пространстве _dev_. Любой, кто открывает общедоступный URL-адрес и переходит к веб-приложению, будет вызывать вызванный путь кода, который проходит через обе службы. Предположим, теперь вы хотите продолжить разработку _mywebapi_. Как вносить изменения в код и проверять их, не мешая другим разработчикам, использующим среду разработки? Чтобы сделать это, настройте собственное пространство.

### <a name="create-a-dev-space"></a>Создание пространства разработки
Чтобы работать с собственной версией _mywebapi_ в пространстве, отличном от _dev_, можно создать собственное пространство, используя следующую команду:

```cmd
azds space select --name scott
```

При появлении запроса выберите _dev_ в качестве **родительского пространства разработки**. Это означает, что новое пространство _dev/scott_ будет производным от пространства _dev_. Скоро вы узнаете, как это может помочь при тестировании.

В соответствии с нашей вводной гипотезой мы использовали имя _scott_ для нового пространства, чтобы коллеги могли определить, кто работает в нем. Его можно назвать как угодно, независимо от значения названия, например _sprint4_ или _demo_. В любом случае _dev_ служит основой для всех разработчиков, работающих над частью этого приложения.

![](../articles/dev-spaces/media/common/ci-cd-space-setup.png)

Выполните команду `azds space list`, чтобы просмотреть список всех пространств в среде разработки. Столбец _Выбрано_ указывает, какое пространство в данный момент выбрано (true/false). В вашем случае пространство с именем _dev/scott_ было автоматически выбрано при создании. Вы можете выбрать другое пространство в любое время с помощью команды `azds space select`.

Давайте посмотрим на это в действии.