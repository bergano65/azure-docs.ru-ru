---
title: включение файла
description: включение файла
services: iot-edge
author: kgremban
ms.service: iot-edge
ms.topic: include
ms.date: 01/04/2019
ms.author: kgremban
ms.custom: include file
ms.openlocfilehash: c20a14ef2bc74d73b93ab39ee52fe1be8a5f984f
ms.sourcegitcommit: 63b996e9dc7cade181e83e13046a5006b275638d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2019
ms.locfileid: "54192163"
---
Одной из ключевых возможностей Azure IoT Edge является развертывание кода на устройствах IoT Edge из облака. **Модули IoT Edge** — это выполняемые пакеты, которые реализованы в виде контейнеров. В этом разделе будет развернут предварительно созданный модуль из раздела [Модули IoT Edge в Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/category/internet-of-things?page=1&subcategories=iot-edge-modules). 

Модуль, который будет развернут в этом разделе, имитирует поведение датчика и отправляет сгенерированные данные. Данный модуль является требуемой частью кода для начала работы с IoT Edge, так как сгенерированные данные вы можете использовать для разработки и тестирования. Если требуется увидеть полный функционал модуля, см. имитированный исходный код датчика температуры [здесь](https://github.com/Azure/iotedge/blob/027a509549a248647ed41ca7fe1dc508771c8123/edge-modules/SimulatedTemperatureSensor/src/Program.cs). 

Выполните следующие шаги, чтобы развернуть первый модуль из Azure Marketplace.

1. На [портале Azure](https://portal.azure.com) в строку поиска введите **Имитированный датчик температуры** и откройте результат поиска в Marketplace.

   ![Имитированный датчик температуры в результатах поиска на портале Azure](./media/iot-edge-deploy-module/search-for-temperature-sensor.png)

2. Выберите устройство IoT Edge, чтобы получить этот модуль. На странице **Целевые устройства для модуля IoT Edge** укажите следующие сведения:

   1. **Подписка**: выберите подписку, которая содержит используемый центр Интернета вещей.

   2. **Центр Интернета вещей**: выберите имя используемого центра Интернета вещей.

   3. **Имя устройства IoT Edge**: если ранее в этом руководстве вы использовали рекомендуемое имя устройства, введите **myEdgeDevice**. Кроме того, вы можете щелкнуть **Найти устройство**, чтобы выбрать его из списка устройств IoT Edge в центре Интернета вещей. 
   
   4. Нажмите кнопку **Создать**.

3. После выбора модуля IoT Edge из Azure Marketplace и устройства IoT Edge для получения модуля, откроется мастер, который состоит из трех шагов. Он поможет точно определить, как развернуть модуль. На этапе **Добавить модули** мастера обратите внимание, что модуль **SimulatedTemperatureSensor** заполняется автоматически. Чтобы добавить дополнительные модули в развертывание, в руководствах используется эта страница. Для этого руководства необходимо развернуть этот модуль. Выберите **Далее**, чтобы перейти к следующему шагу мастера.

4. На этапе **Укажите маршруты** мастера вы определите способ передачи сообщений между модулями и в Центр Интернета вещей. Для руководства необходимо, чтобы все сообщения со всех модулей отправлялись в Центр Интернета вещей (`$upstream`). Добавьте приведенный ниже код, если он не заполняется автоматически, а затем щелкните **Далее**.

   ```json
    {
    "routes": {
        "route": "FROM /messages/* INTO $upstream"
        }
    }
   ```

5. На этапе **Проверка развертывания** мастера можно просмотреть файл JSON, определяющий все модули, которые развернуты на устройстве IoT Edge. Обратите внимание, что модуль **SimulatedTemperatureSensor** и два дополнительных системных модуля **edgeAgent** и **edgeHub** включены. После просмотра выберите **Отправка**.

   После отправки нового развертывания на устройство IoT Edge на ваше устройство ничего оправляться не будет. Вместо этого устройство регулярно выполняет запрос к Центру Интернета вещей для получения новых сведений. Если устройство обнаруживает обновленный манифест развертывания, оно использует информацию о новом развертывании для получения образов модуля с облака с последующим локальным запуском модулей. Это может занять несколько минут. 

6. После отправки сведений о развертывании модуля мастер вернет вас на страницу **IoT Edge** центра Интернета вещей. Чтобы просмотреть сведения об устройстве, выберите его из списка устройств IoT Edge. 

7. На странице сведений об устройстве прокрутите вниз до раздела **Модули**. В этом разделе должны быть указаны три модуля: $edgeAgent, $edgeHub и SimulatedTemperatureSensor. Если один или несколько модулей указаны в списке, как указано при развертывании, но не указаны устройством, то ваше устройство IoT Edge все еще запускает их. Подождите несколько секунд, а затем в верхней части страницы выберите **Обновить**. 

   ![Просмотр SimulatedTemperatureSensor в списке развернутых модулей](./media/iot-edge-deploy-module/deployed-modules-marketplace.png)
