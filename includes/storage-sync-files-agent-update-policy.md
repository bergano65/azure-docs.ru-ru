---
author: roygara
ms.service: storage
ms.topic: include
ms.date: 12/11/2018
ms.author: rogarana
ms.openlocfilehash: 02e9553b9704c96794e0c1113ab3e06458f0f7c8
ms.sourcegitcommit: 1d0b37e2e32aad35cc012ba36200389e65b75c21
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2019
ms.locfileid: "72391770"
---
Агент службы синхронизации файлов Azure обновляется на регулярной основе. Это позволяет добавлять новые возможности и устранять ошибки. Мы рекомендуем настроить Центр обновления Майкрософт, чтобы получать обновления службы синхронизации файлов Azure по мере их выпуска.

#### <a name="major-vs-minor-agent-versions"></a>Сравнение основной и дополнительных версий агента
* Основные версии агента часто содержат новые функции, и в первой части номера версии указан возрастающий номер. Например, \*2.\*.\*\*
* Дополнительные версии агента также называются "исправлениями" и выпускаются чаще по сравнению с основными версиями. Они часто содержат исправления уязвимостей и небольшие усовершенствования, но не содержат новых функций. Например, \*\*.3.\*\*

#### <a name="upgrade-paths"></a>Варианты обновления
Существует четыре принятых и проверенных способа установки обновлений агента службы синхронизации файлов Azure. 
1. **(Рекомендуется.) Настройка в Центре обновлений Майкрософт автоматической загрузки и установки обновлений агента.**  
    Рекомендуется также устанавливать все обновления службы синхронизации файлов в Azure, чтобы гарантировать наличие у себя последних исправлений для агента сервера. Центр обновления Майкрософт упрощает этот процесс — обновления автоматически загружаются и устанавливаются на вашем компьютере.
2. **Используйте AfsUpdater.exe для скачивания и установки обновлений агента.**  
    AfsUpdater.exe находится в каталоге установки агента. Дважды щелкните исполняемый файл, чтобы скачать и установить обновления агента. 
3. **Исправлять существующий агент Синхронизация файлов Azure с помощью файла исправления Центр обновления Майкрософт или исполняемых файлов MSP. Последний пакет обновления Синхронизация файлов Azure можно скачать из [каталога центр обновления Майкрософт](https://www.catalog.update.microsoft.com/Search.aspx?q=Azure%20File%20Sync).**  
    В результате выполнения исполняемого MSP-файла происходит обновление установленной службы синхронизации файлов Azure тем же методом, что применяется автоматически в Центре обновления Майкрософт, как описано в предыдущем варианте. В случае принятия исправлений от Центра обновления Майкрософт выполняется обновление "на месте" установки службы синхронизации файлов Azure.
4. **Скачайте последнюю версию установщика агента Синхронизация файлов Azure из [центра загрузки Майкрософт](https://go.microsoft.com/fwlink/?linkid=858257).**  
    Для обновления существующей установки агента службы синхронизации файлов Azure удалите старую версию, а затем установите последнюю версию с помощью загруженного установщика. Этот установщик выполняет регистрацию сервера, настраивает группы синхронизации и все остальные параметры.

#### <a name="automatic-agent-lifecycle-management"></a>Автоматическое управление жизненным циклом агентов
При использовании агента версии 6 Группа синхронизации файлов предоставила функцию автоматического обновления агента. Можно выбрать один из двух режимов и указать период обслуживания, в котором будет предпринята попыток обновления на сервере. Эта функция призвана помочь вам в управлении жизненным циклом агента путем предоставления гуардраил, препятствующей истечению срока действия агента или разрешающей отсутствие проблем, оставайтесь в актуальном параметре.
1. При **настройке по умолчанию** будет предпринята попытка предотвратить истечение срока действия агента. В течение 21 дня после окончания срока действия агента будет предпринята попытка самостоятельного обновления. Она начнет попытки выполнить обновление раз в неделю в течение 21 дня до истечения срока действия и в выбранном периоде обслуживания. **Этот параметр не устраняет необходимость регулярного исправления Центр обновления Майкрософт.**
1. При необходимости можно выбрать, что агент будет автоматически обновлять себя сразу после того, как новая версия агента станет доступной (в настоящее время неприменима к кластеризованным серверам). Это обновление будет происходить в течение выбранного периода обслуживания и позволит серверу получить преимущества от новых функций и улучшений, как только они станут общедоступными. Это рекомендуемый параметр, обеспечивающий установку основных версий агента, а также регулярных исправлений обновлений на сервере. Каждый выпущенный агент имеет высокое качество. При выборе этого параметра Корпорация Майкрософт выдаст вам последнюю версию агента. Кластеризованные серверы исключаются. После завершения рейсов агент также станет доступен в [центре загрузки майкрософт](https://go.microsoft.com/fwlink/?linkid=858257) AKA.MS/AFS/Agent.

 ##### <a name="changing-the-auto-upgrade-setting"></a>Изменение параметра автоматического обновления

Приведенные ниже инструкции описывают, как изменить параметры после завершения работы установщика, если необходимо внести изменения.

Откройте консоль PowerShell и перейдите в каталог, где установлен агент синхронизации, а затем импортируйте Командлеты сервера. По умолчанию это выглядит примерно так:
```powershell
cd 'C:\Program Files\Azure\StorageSyncAgent'
Import-Module -Name \StorageSync.Management.ServerCmdlets.dll
```

Можно запустить `Get-StorageSyncAgentAutoUpdatePolicy`, чтобы проверить текущий параметр политики и определить, нужно ли его изменить.

Чтобы изменить текущий параметр политики на отложенную запись обновления, можно использовать:
```powershell
Set-StorageSyncAgentAutoUpdatePolicy -PolicyMode UpdateBeforeExpiration
```

Чтобы изменить текущий параметр политики на немедленное обновление, можно использовать:
```powershell
Set-StorageSyncAgentAutoUpdatePolicy -PolicyMode InstallLatest
```

#### <a name="agent-lifecycle-and-change-management-guarantees"></a>Гарантии относительно жизненного цикла агента и управления изменениями
Синхронизация файлов Azure — это облачная служба, которая постоянно вводит новые функции и усовершенствования. В частности, из этого следует, что любая конкретная версия агента службы синхронизации файлов Azure поддерживается лишь ограниченное время. Для упрощения развертывания следующие правила гарантируют наличие достаточного времени и уведомлений для обновления агента и обновлений в процессе управления изменениями:

- Основные версии агента поддерживаются по меньшей мере в течение шести месяцев с момента их появления.
- Мы гарантируем наличие по крайней мере трехмесячного перекрытия между сроками поддержки основных версий агентов. 
- На зарегистрированные серверы, использующие агент, срок поддержки которого истекает, не позже чем за три месяца отправляются соответствующие уведомления. Вы можете проверить, не использует ли зарегистрированный сервер старую версию агента в разделе зарегистрированных серверов службы синхронизации хранилища.
- Срок действия дополнительных версий агента привязан к сроку действия основной версии. Так, например, при выпуске агента версии 3.0 все версии агента 2.\* сразу обозначаются как такие, поддержка которых должна быть прекращена.

> [!Note]
> При установке версии агента с предупреждением о скором истечении срока поддержи процесс установки завершится успешно, но отобразится соответствующее предупреждение. Попытки установки или подключения с помощью простроченной версии агента не поддерживаются и блокируются.
