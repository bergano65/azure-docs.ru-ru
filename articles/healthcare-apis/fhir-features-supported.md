---
title: Поддерживаемые функции FHIR в Azure — API Azure для FHIR
description: В этой статье объясняется, какие функции спецификации FHIR реализованы в API Azure для FHIR.
services: healthcare-apis
author: matjazl
ms.service: healthcare-apis
ms.subservice: fhir
ms.topic: reference
ms.date: 02/07/2019
ms.author: cavoeg
ms.openlocfilehash: 3aea2322129c383a385168c54001464da5dae276
ms.sourcegitcommit: c95e2d89a5a3cf5e2983ffcc206f056a7992df7d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/24/2020
ms.locfileid: "95520090"
---
# <a name="features"></a>Компоненты

API Azure для FHIR обеспечивает полностью управляемое развертывание сервера Microsoft FHIR для Azure. Сервер является реализацией стандарта [FHIR](https://hl7.org/fhir) . В этом документе перечислены основные возможности сервера FHIR.

## <a name="fhir-version"></a>Версия FHIR

Последняя поддерживаемая версия: `4.0.1`

Кроме того, в настоящее время поддерживаются предыдущие версии: `3.0.2`

## <a name="rest-api"></a>REST API

| API                            | Поддерживается — PaaS | Поддерживаемые — OSS (SQL) | Поддерживаемые — OSS (Cosmos DB) | Комментировать                                             |
|--------------------------------|-----------|-----------|-----------|-----------------------------------------------------|
| чтение                           | Да       | Да       | Да       |                                                     |
| вреад                          | Да       | Да       | Да       |                                                     |
| обновить                         | Да       | Да       | Да       |                                                     |
| Обновление с оптимистичной блокировкой | Да       | Да       | Да       |                                                     |
| обновление (условное)           | Да       | Да       | Да       |                                                     |
| защиты                          | Нет        | Нет        | Нет        |                                                     |
| удалить                         | Да       | Да       | Да       |                                                     |
| Delete (условный)           | Нет        | Нет        | Нет        |                                                     |
| history                        | Да       | Да       | Да       |                                                     |
| create                         | Да       | Да       | Да       | Поддержка как POST, так и постановки                               |
| создать (условный)           | Да       | Да       | Да       | [#1382](https://github.com/microsoft/fhir-server/issues/1382) проблемы |
| search                         | Partial   | Partial   | Partial   | См. ниже                                           |
| цепочка поиска                 | Нет        | Да       | Нет        |                                           |
| обратный поиск в цепочке         | Нет        | Нет        | Нет        |                                            |
| capabilities                   | Да       | Да       | Да       |                                                     |
| пакет (1)                          | Да       | Да       | Да       |                                                     |
| transaction                    | Нет        | Да       | Нет        |                                                     |
| разбиение по страницам                         | Partial   | Partial   | Partial   | `self` и `next` поддерживаются                     |
| посредников                 | Нет        | Нет        | нет        |                                                     |

## <a name="search"></a>Поиск

Поддерживаются все типы параметров поиска. 

| Тип параметра поиска | Поддерживается — PaaS | Поддерживаемые — OSS (SQL) | Поддерживаемые — OSS (Cosmos DB) | Комментировать |
|-----------------------|-----------|-----------|-----------|---------|
| Число                | Да       | Да       | Да       |         |
| Date/DateTime         | Да       | Да       | Да       |         |
| Строка                | Да       | Да       | Да       |         |
| Токен                 | Да       | Да       | Да       |         |
| Справочник             | Да       | Да       | Да       |         |
| Составной             | Да       | Да       | Да       |         |
| Количество              | Да       | Да       | Да       |         |
| URI                   | Да       | Да       | Да       |         |
| Специальные функции               | Нет        | Нет        | Нет        |         |


| Модификаторы             | Поддерживается — PaaS | Поддерживаемые — OSS (SQL) | Поддерживаемые — OSS (Cosmos DB) | Комментарий |
|-----------------------|-----------|-----------|-----------|---------|
|`:missing`             | Да       | Да       | Да       |         |
|`:exact`               | Да       | Да       | Да       |         |
|`:contains`            | Да       | Да       | Да       |         |
|`:text`                | Да       | Да       | Да       |         |
|`:in` Лекс          | Нет        | Нет        | Нет        |         |
|`:below` Лекс       | Нет        | Нет        | Нет        |         |
|`:above` Лекс       | Нет        | Нет        | Нет        |         |
|`:not-in` Лекс      | Нет        | Нет        | Нет        |         |
|`:[type]` IsReference  | Нет        | Нет        | Нет        |         |
|`:below` URI         | Да       | Да       | Да       |         |
|`:not`                 | Нет        | Нет        | Нет        |         |
|`:above` URI         | Нет        | Нет        | Нет        | [#158](https://github.com/Microsoft/fhir-server/issues/158) проблемы |

| Общий параметр поиска | Поддерживается — PaaS | Поддерживаемые — OSS (SQL) | Поддерживаемые — OSS (Cosmos DB) | Комментарий |
|-------------------------| ----------| ----------| ----------|---------|
| `_id`                   | Да       | Да       | Да       |         |
| `_lastUpdated`          | Да       | Да       | Да       |         |
| `_tag`                  | Да       | Да       | Да       |         |
| `_profile`              | Да       | Да       | Да       |         |
| `_security`             | Да       | Да       | Да       |         |
| `_text`                 | Нет        | Нет        | Нет        |         |
| `_content`              | Нет        | Нет        | Нет        |         |
| `_list`                 | Да       | Да       | Да       |         |
| `_has`                  | Нет        | Нет        | Нет        |         |
| `_type`                 | Да       | Да       | Да       |         |
| `_query`                | Нет        | Нет        | Нет        |         |
| `_filter`               | Нет        | Нет        | Нет        |         |

| Параметры результатов поиска | Поддерживается — PaaS | Поддерживаемые — OSS (SQL) | Поддерживаемые — OSS (Cosmos DB) | Комментировать |
|-------------------------|-----------|-----------|-----------|---------|
| `_sort`                 | Partial        | Partial   | Partial        |   `_sort=_lastUpdated` поддерживается.       |
| `_count`                | Да       | Да       | Да       | `_count` длина ограничена 100 символами. Если задано значение выше 100, будет возвращено только 100, а в пакете будет возвращено предупреждение. |
| `_include`              | Да       | Да       | Да       |Количество включаемых элементов ограничено 100. Включить в PaaS и OSS на Cosmos DB не включает в себя поддержку итераций.|
| `_revinclude`           | Да       | Да       | Да       | Количество включаемых элементов ограничено 100. Включить в PaaS и OSS на Cosmos DB не включает в себя поддержку итераций.|
| `_summary`              | Partial   | Partial   | Partial   | `_summary=count` поддерживается. |
| `_total`                | Partial   | Partial   | Partial   | _total = без и _total = точность      |
| `_elements`             | Да       | Да       | Да       |         |
| `_contained`            | Нет        | Нет        | Нет        |         |
| `containedType`         | Нет        | Нет        | Нет        |         |
| `_score`                | Нет        | Нет        | Нет        |         |

## <a name="extended-operations"></a>Расширенные операции

Все поддерживаемые операции, расширяющие API RESTFUL.

| Тип параметра поиска | Поддерживается — PaaS | Поддерживаемые — OSS (SQL) | Поддерживаемые — OSS (Cosmos DB) | Комментировать |
|------------------------|-----------|-----------|-----------|---------|
| $export (вся система) | Да       | Да       | Да       |         |
| Пациент/$export        | Да       | Да       | Да       |         |
| Группа или $export          | Да       | Да       | Да       |         |

## <a name="persistence"></a>Сохраняемость

Сервер Microsoft FHIR имеет подключаемый модуль сохраняемости (см. раздел [`Microsoft.Health.Fhir.Core.Features.Persistence`](https://github.com/Microsoft/fhir-server/tree/master/src/Microsoft.Health.Fhir.Core/Features/Persistence) ).

В настоящее время код FHIR Server с открытым кодом включает реализацию для [Azure Cosmos DB](../cosmos-db/index-overview.md) и [базы данных SQL](https://azure.microsoft.com/services/sql-database/).

Cosmos DB — это глобально распределенная база данных с несколькими моделями (API SQL, API MongoDB и т. д.). Он поддерживает различные [уровни согласованности](../cosmos-db/consistency-levels.md). Шаблон развертывания по умолчанию настраивает сервер FHIR с `Strong` согласованностью, но политика согласованности может быть изменена (обычно нестрогая) для запроса с помощью `x-ms-consistency-level` заголовка запроса.

## <a name="role-based-access-control"></a>Управление доступом на основе ролей

Сервер FHIR использует [Azure Active Directory](https://azure.microsoft.com/services/active-directory/) для контроля доступа. В частности, применяется управление доступом на основе ролей (RBAC), если `FhirServer:Security:Enabled` параметру конфигурации присвоено значение `true` , а всем запросам (кроме `/metadata` ) на сервер FHIR должен быть `Authorization` задан заголовок запроса `Bearer <TOKEN>` . Токен должен содержать одну или несколько ролей, как определено в `roles` утверждении. Запрос будет разрешен, если маркер содержит роль, которая разрешает указанное действие для указанного ресурса.

В настоящее время разрешенные действия для данной роли применяются *глобально* к API.

## <a name="service-limits"></a>Ограничения службы

* [**Единицы запросов (RUs)**](https://docs.microsoft.com/azure/cosmos-db/concepts-limits) — вы можете настроить до 10 000 на портале для Azure API для FHIR. Вам потребуется как минимум 400 или 10 RUS/ГБ, в зависимости от того, что больше. Если вам требуется более 10 000 RUs, вы можете отправить запрос в службу поддержки, чтобы увеличить это. Максимальный доступный размер — 1 000 000.

* **Одновременные подключения** и **экземпляры** , дафаулт, у вас есть пять одновременных подключений к двум экземплярам в кластере (всего 10 одновременных запросов). Если вы считаете, что вам требуется больше параллельных запросов, отправьте запрос в службу поддержки с подробными сведениями о ваших нуждах.

* **Размер пакета** — каждый пакет ограничен 500 элементами.

* **Размер данных** — данные и документы должны быть немного меньше 2 МБ.

## <a name="performance-expectations"></a>Ожидания производительности

Производительность системы зависит от числа запросов на повышение, одновременных подключений и от типа выполняемых операций (размещение, публикация и т. д.). Ниже приведены некоторые общие диапазоны возможных значений, которые вы можете рассчитывать на основе настроенного экземпляра RUs. Как правило, производительность масштабируется линейно с увеличением в RUs:

| число получателей RUs | Ресурсов в секунду |
|----------|---------------|
| 400      | 5-10          |
| 1000    | 100-150       |
| 10 000   | 225-400       |
| 100 000  | 2500 – 4000   |

## <a name="next-steps"></a>Следующие шаги

В этой статье вы прочитали о поддерживаемых функциях FHIR в API Azure для FHIR. Далее разверните API Azure для FHIR.
 
>[!div class="nextstepaction"]
>[Развертывание Azure API для FHIR](fhir-paas-portal-quickstart.md)
