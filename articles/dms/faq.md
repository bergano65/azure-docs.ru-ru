---
title: Часто задаваемые вопросы — Azure Database Migration Service
description: Часто задаваемые вопросы об использовании Azure Database Migration Service для выполнения миграции баз данных.
services: database-migration
author: pochiraju
ms.author: rajpo
manager: craigg
ms.reviewer: craigg
ms.service: dms
ms.workload: data-services
ms.custom: mvc
ms.topic: troubleshooting
ms.date: 02/20/2020
ms.openlocfilehash: 200753c6458698d515b02252933e4fdf6d88df55
ms.sourcegitcommit: 42a4d0e8fa84609bec0f6c241abe1c20036b9575
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "98019097"
---
# <a name="faq-about-using-azure-database-migration-service"></a>Часто задаваемые вопросы об использовании Azure Database Migration Service

В этой статье перечислены часто задаваемые вопросы об использовании Azure Database Migration Service вместе со связанными ответами.

## <a name="overview"></a>Обзор

**Формате. Что такое Azure Database Migration Service?**
Azure Database Migration Service — это полностью управляемая служба, предназначенная для обеспечения бесперебойной миграции с нескольких источников базы данных на платформы данных Azure с минимальным временем простоя. В настоящее время служба находится в общедоступной среде, а текущие усилия по разработке посвящены:

* надежность и производительность;
* итеративное добавление пар исходного и целевого объектов;
* работа над функциями непрерывной миграции.

**Формате. Какие пары Source/Target Azure Database Migration Service в настоящее время поддерживаются?**
В настоящее время служба поддерживает различные пары исходных и целевых объектов, а также сценарии миграции. Полный список состояний всех доступных сценариев миграции см. в статье [Состояние сценариев миграции, поддерживаемых службой Azure Database Migration Service](./resource-scenario-status.md).

Другие сценарии миграции доступны в предварительной версии и для них требуется отправка предварительного утверждения через сайт DMS Preview. Полный список сценариев в предварительной версии и регистрация для участия в одном из этих предложений см. на [сайте DMS Preview](https://aka.ms/dms-preview/).

**Формате. Какие версии SQL Server поддерживает Azure Database Migration Service в качестве источника?**
При переходе с SQL Server поддерживаемыми источниками для Azure Database Migration Service являются SQL Server 2005 до SQL Server 2019.

**Вопрос. при использовании Azure Database Migration Service в чем разница между автономной и оперативной миграцией?**
Для выполнения автономных и оперативных миграций можно использовать Azure Database Migration Service. При *автономной* миграции время простоя приложения начинается при запуске миграции. При *оперативной* миграции время простоя ограничено временем, которое нужно сократить после завершения миграции. Мы рекомендуем выполнить тестирование автономной миграции, чтобы определить, допустим ли простой, и, если нет, выполнить миграцию с подключением к сети.

> [!NOTE]
> Чтобы выполнить сетевую миграцию с помощью Azure Database Migration Service, требуется создать экземпляр ценовой категории "Премиум". Дополнительные сведения см. на странице с [ценами](https://azure.microsoft.com/pricing/details/database-migration/) на Azure Database Migration Service.

**Формате. Как Azure Database Migration Service сравнить с другими средствами миграции баз данных Майкрософт, такими как Помощник по миграции базы данных (DMA) или Помощник по миграции SQL Server (SSMA)?**
Azure Database Migration Service является предпочтительным методом миграции базы данных на Microsoft Azure в масштабе. Дополнительные сведения о сравнении Azure Database Migration Service с другими средствами миграции баз данных Майкрософт и рекомендации по использованию службы в различных сценариях см. в блоге, посвященном различным [средствам и службам переноса баз данных Майкрософт](https://techcommunity.microsoft.com/t5/microsoft-data-migration/differentiating-microsoft-s-database-migration-tools-and/ba-p/368529).

**Формате. Как Azure Database Migration Service сравнить с предложением службы "миграция Azure"?**
Служба "миграция Azure" помогает выполнить миграцию локальных виртуальных машин в Azure IaaS. Оценивается пригодность для миграции, показатели производительности, на основе которых определяется требуемый размер, и расходы на работу локальных виртуальных машин в Azure. Служба "Миграция Azure" подходит для переноса рабочих нагрузок на локальных виртуальных машинах на виртуальные машины IaaS Azure методом lift-and-shift. Однако, в отличие от Azure Database Migration Service, служба "миграция Azure" не является специализированным предложением службы переноса баз данных для платформ реляционных баз данных PaaS Azure, таких как база данных SQL Azure или Azure SQL Управляемый экземпляр.

**Формате. Database Migration Service ли хранить данные клиента?**
Нет. Database Migration Service не хранит данные клиента.

## <a name="setup"></a>Настройка

**Формате. Каковы предварительные требования для использования Azure Database Migration Service?**
Для обеспечения бесперебойной работы Azure Database Migration Service при миграции базы данных необходимо выполнить несколько предварительных условий. Одни предварительные требования применяются во всех сценариях (с парами исходного и целевого объектов), поддерживаемых службой, другие уникальны и используются в определенных сценариях.

Ниже приведены предварительные требования для использования службы Azure Database Migration Service, которые применяются во всех поддерживаемых сценариях миграции.

* Создайте виртуальную сеть Microsoft Azure для Azure Database Migration Service с помощью модели развертывания Azure Resource Manager. Она обеспечивает подключение "сеть — сеть" к локальным исходным серверам через [ExpressRoute](../expressroute/expressroute-introduction.md) или [VPN](../vpn-gateway/vpn-gateway-about-vpngateways.md).
* Убедитесь, что правила группы безопасности сети виртуальной сети не блокируют следующие порты связи 443, 53, 5671-5672, 9350-9354, 445, 12000. См. дополнительные сведения о [фильтрации трафика, предназначенного для виртуальной сети, с помощью групп безопасности сети](../virtual-network/virtual-network-vnet-plan-design-arm.md).
* Если перед исходными базами данных развернуто устройство брандмауэра, вам может понадобиться добавить правила брандмауэра, чтобы позволить службе Azure Database Migration Service обращаться к исходным базам данных для выполнения миграции.

Список всех необходимых компонентов, необходимых для выполнения конкретных сценариев миграции с помощью Azure Database Migration Service, см. в соответствующих руководствах в Azure Database Migration Service [документации](./dms-overview.md) по docs.Microsoft.com.

**Формате. Разделы справки найти IP-адрес для Azure Database Migration Service, чтобы можно было создать список разрешений для правил брандмауэра, используемых для доступа к базе данных-источнику для миграции?**
Возможно, потребуется добавить правила брандмауэра, позволяющие Azure Database Migration Service доступ к базе данных источника для миграции. IP-адрес для службы является динамическим, но если вы используете ExpressRoute, этот адрес назначается частной корпоративной сетью. Самый простой способ определить соответствующий IP-адрес — найти в той же группе ресурсов, что и подготовленный Azure Database Migration Service ресурс, чтобы найти связанный с ним сетевой интерфейс. Обычно имя ресурса сетевого интерфейса начинается с префикса NIC, за которым следует уникальная последовательность знаков и символов, например, NIC-jj6tnztnmarpsskr82rbndyp. Когда вы выберете этот ресурс, отобразится IP-адрес, который необходимо добавить в список разрешений на странице обзора ресурсов на портале Azure.

Вам также может потребоваться добавить в список разрешений исходный порт, с которого SQL Server ожидает передачи данных. По умолчанию — это порт 1433, однако исходный SQL Server также можно настроить на ожидание передачи данных с других портов. В этом случае необходимо добавить эти порты в список разрешений. Определить порт, который SQL Server прослушивает, можно с помощью запроса динамического административного представления:

```sql
    SELECT DISTINCT
        local_tcp_port
    FROM sys.dm_exec_connections
    WHERE local_tcp_port IS NOT NULL
```

Вы также можете определить порт, который SQL Server прослушивает, запросив журнал ошибок SQL Server:

```sql
    USE master
    GO
    xp_readerrorlog 0, 1, N'Server is listening on'
    GO
```

**Формате. Разделы справки настроить виртуальная сеть Microsoft Azure?**
В ходе выполнения нескольких руководств Майкрософт, которые могут пошагово пройти процесс настройки виртуальной сети, в статье [Виртуальная сеть Azure](../virtual-network/virtual-networks-overview.md)будет представлена официальная документация.

## <a name="usage"></a>Использование

**Формате. В чем сводка действий, необходимых для использования Azure Database Migration Service для миграции базы данных?**
Во время обычного переноса базы данных вы:

1. Создаете целевую базу данных.
2. Оцените базы данных-источники.
    * Для однородных миграций оцените имеющиеся базы данных с помощью [DMA](https://www.microsoft.com/download/details.aspx?id=53595).
    * Для разнородных миграций (от конкурирующих источников) оцените имеющиеся базы данных с помощью [SSMA](/sql/ssma/sql-server-migration-assistant). Вы также можете использовать SSMA для преобразования объектов базы данных и переноса схемы на целевую платформу.
3. Создайте экземпляр Azure Database Migration Service.
4. Создайте проект миграции, указав базы данных-источники, целевые базы данных и таблицы для миграции.
5. Запустите полную загрузку.
6. Выбираете последующую проверку.
7. Вручную переключаете рабочую среду на использование новой облачной базы данных.

## <a name="troubleshooting-and-optimization"></a>Устранение неполадок и оптимизация

**Формате. Выполняется настройка проекта миграции в DMS, и возникают трудности при подключении к базе данных-источнику. Что мне делать?**
Если при выполнении миграции возникли проблемы с подключением к системе базы данных-источника, создайте виртуальную машину в виртуальной сети, с помощью которой вы настроили экземпляр DMS. На виртуальной машине вы сможете выполнить тест подключения, например файл UDL, чтобы проверить подключение к SQL Server или скачать 3T совместная работа для проверки подключений MongoDB. Если проверка подключения завершилась успешно, у вас не должно быть проблем с подключением к базе данных-источнику. Если проверка подключения не удалась, обратитесь к администратору сети.

**Формате. Почему Azure Database Migration Service недоступна или остановлена?**
Если пользователь явно остановлен Azure Database Migration Service (DMS) или служба неактивна в течение 24 часов, служба будет остановлена или приостановлена. В каждом случае служба будет недоступна и остановлена.  Чтобы возобновить активную миграцию, перезапустите службу.

**Формате. Существуют ли рекомендации по оптимизации производительности Azure Database Migration Service?**
Вы можете выполнить ряд действий, чтобы ускорить перенос базы данных с использованием службы:

* используйте ценовую категорию общего назначения с несколькими ЦП при создании экземпляра службы, чтобы обеспечить параллелизацию и ускоренную передачу данных благодаря использованию нескольких ЦП;
* временно увеличьте масштаб целевого экземпляра Базы данных SQL Azure до SKU уровня "Премиум" во время операции переноса данных, чтобы уменьшить регулирование количества запросов базы данных SQL Azure, которое может повлиять на действия передачи данных при использовании номеров SKU низкого уровня.

## <a name="next-steps"></a>Дальнейшие действия

Общие сведения о службе Azure Database Migration Service и доступности по регионам см. в статье [Что такое Azure Database Migration Service](dms-overview.md).
