---
title: Защита управляемого экземпляра общедоступные конечные точки - базы данных SQL управляемого экземпляра | Документация Майкрософт
description: Безопасно используйте общедоступные конечные точки в Azure с помощью управляемого экземпляра
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.topic: conceptual
author: srdan-bozovic-msft
ms.author: srbozovi
ms.reviewer: vanto, carlrab
manager: craigg
ms.date: 04/16/2019
ms.openlocfilehash: 9d5a3d18e8a7d3c5a6cb08e16e74dd4fbda9ca31
ms.sourcegitcommit: bf509e05e4b1dc5553b4483dfcc2221055fa80f2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2019
ms.locfileid: "60014535"
---
# <a name="using-azure-sql-database-managed-instance-securely-with-public-endpoint"></a>С помощью базы данных SQL управляемого экземпляра безопасно с общедоступной конечной точки

База данных SQL управляемого экземпляра может включить для обеспечения подключения пользователей через [общедоступную конечную точку](../virtual-network/virtual-network-service-endpoints-overview.md). Эта статья содержит рекомендации по повышению защищенности этой конфигурации.

## <a name="scenarios"></a>Сценарии

Управляемый экземпляр предоставляет частную конечную точку, чтобы обеспечить подключение с внутри виртуальной сети. Значение по умолчанию — для обеспечения максимальной изоляции. Однако существуют сценарии, где требуется подключение общедоступной конечной точки:

- Интеграция с несколькими клиентами только предложения PaaS.
- Пропускную способность для обмена данными в сравнении с помощью VPN.
- Политики организации запрещают PaaS внутри корпоративной сети.

## <a name="deploying-managed-instance-for-public-endpoint-access"></a>Развертывание управляемого экземпляра для общего доступа на конечную точку

Хотя это не обязательно, общей модели развертывания для управляемого экземпляра с доступом к общедоступной конечной точки является создание экземпляра в выделенной изолированной виртуальной сети. В этой конфигурации виртуальная сеть используется только для изоляции виртуальных кластеров. Это не относится, если диапазон IP-адресов управляемого экземпляра перекрывается с адресным пространством IP-адрес корпоративной сети.

## <a name="securing-data-in-motion"></a>Обеспечение безопасности данных в движения

Если драйвер клиента поддерживает шифрование, трафик данных в управляемый экземпляр всегда шифруется. Данные между управляемым экземпляром и других виртуальных машинах Azure или служб Azure никогда не покидает магистральную в Azure. Если управляемый экземпляр для подключения к локальной сети, рекомендуется использовать Express Route с пирингом Майкрософт. Express Route поможет избежать перемещения данных через общедоступный Интернет (для установки частного подключения управляемого экземпляра, только частного пиринга можно использовать).

## <a name="locking-down-inbound-and-outbound-connectivity"></a>Блокирование входящее и исходящее подключение

В примере ниже показан конфигураций безопасности.

![управляемые экземпляр vnet.png](media/sql-database-managed-instance-public-endpoint-securely/managed-instance-vnet.png)

Управляемый экземпляр имеет [выделенный адрес конечной точки с общедоступным](sql-database-managed-instance-find-management-endpoint-ip-address.md). Этот IP-адрес следует задавать в брандмауэра для исходящего трафика на стороне клиента и правила группы безопасности сети, чтобы ограничить число исходящих подключений.

Чтобы убедиться, что трафик для управляемого экземпляра, который поступает из надежных источников, рекомендуется для подключения из источников с известных IP-адресами. Ограничить доступ к управляемому экземпляру общедоступную конечную точку на порте 3342 с помощью группы безопасности сети.

Когда клиенты должны инициировать подключение из локальной сети, убедитесь, что исходный адрес преобразуется в набор известных IP-адресов. Если, не удается (например, мобильных сотрудников, которые обычно), рекомендуется использовать [точка сеть VPN подключения и частную конечную точку](sql-database-managed-instance-configure-p2s.md).

Подключения запускаются из Azure, рекомендуется что трафик поступает из хорошо известных назначенных [виртуального IP-адреса](../virtual-network/virtual-networks-reserved-public-ip.md) (например, виртуальные машины). Для облегчения управления виртуальные IP-адреса, пользователи могут воспользоваться средством [открытый префикс IP-адреса](../virtual-network/public-ip-address-prefix.md).