---
title: База данных SQL Azure — миграция с DTU на виртуальное ядро
description: Выполните миграцию из модели DTU в модель Виртуальное ядро. Переход на виртуальное ядро аналогичен обновлению или переходу на более раннюю версию уровня "Стандартный" и "Премиум".
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
ms.date: 10/08/2019
ms.openlocfilehash: 73803ed6c583b8f40daa569a75806f54f6f4be45
ms.sourcegitcommit: 609d4bdb0467fd0af40e14a86eb40b9d03669ea1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2019
ms.locfileid: "73690574"
---
# <a name="migrate-from-the-dtu-based-model-to-the-vcore-based-model"></a>Миграция из модели на основе DTU в модель на основе виртуальное ядро

## <a name="migrate-a-database"></a>Перенос базы данных

Перенос базы данных из модели приобретения на основе DTU в модель приобретения на основе виртуальное ядро аналогична обновлению или понижению уровня служб "Стандартный" и "Премиум" в модели приобретения на основе DTU.

## <a name="migrate-databases-that-use-geo-replication"></a>Перенос баз данных, использующих георепликацию

Миграция из модели на основе DTU в модель приобретения на основе виртуальное ядро аналогична обновлению или понижению отношений георепликации между базами данных на уровнях служб "Стандартный" и "Премиум". Во время миграции не нужно прекращать георепликацию, но необходимо соблюдать следующие правила виртуализации:

- При повышении сначала повысьте уровень производительности базы данных-получателя, а затем — уровень базы данных-источника.
- При понижении следует действовать в обратном порядке: сначала нужно понизить уровень производительности базы данных-источника, а после этого — базы данных-получателя.

При использовании георепликации между двумя эластичными пулами рекомендуется назначить один пул основным, а другой — сервером-получателем. В этом случае при переносе эластичных пулов следует использовать одно и то же руководство по виртуализации. Однако если у вас есть эластичные пулы, которые содержат как первичную, так и базу данных-получатель, рассматривайте пул с более высоким уровнем использования в качестве сервера-источника и следуйте соответствующим правилам.  

В следующей таблице приведены рекомендации по конкретным сценариям миграции.

|Текущий уровень служб|Целевой уровень служб|Тип перемещения|Действия пользователя|
|---|---|---|---|
|Standard|Общего назначения|Горизонтальный|Можно выполнять миграцию в любом порядке, но необходимо обеспечить соответствующий размер виртуального ядра*|
|Premium|Критически важный для бизнеса|Горизонтальный|Можно выполнять миграцию в любом порядке, но необходимо обеспечить соответствующий размер виртуального ядра*|
|Standard|Критически важный для бизнеса|Обновление|Сначала необходимо перенести базу данных-получатель|
|Критически важный для бизнеса|Standard|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Premium|Общего назначения|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Общего назначения|Premium|Обновление|Сначала необходимо перенести базу данных-получатель|
|Критически важный для бизнеса|Общего назначения|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Общего назначения|Критически важный для бизнеса|Обновление|Сначала необходимо перенести базу данных-получатель|
||||

\* каждые 100 DTU на уровне Standard требуется по крайней мере 1 Виртуальное ядро, а для каждых 125 DTU на уровне Premium требуется по крайней мере 1 Виртуальное ядро.

## <a name="migrate-failover-groups"></a>Перенос групп отработки отказа

Перемещение групп отработки отказа с несколькими базами данных требует отдельного перемещения базы данных-источника и базы данных-получателя. Во время этого процесса применяются те же рекомендации и правила последовательности. После преобразования баз данных в модель приобретения на основе виртуальное ядро группа отработки отказа останется в силе с теми же параметрами политики.

### <a name="create-a-geo-replication-secondary-database"></a>Создание базы данных-получателя георепликации

Базу данных-получатель георепликации (геовторичную реплику) можно создать только с помощью того же уровня служб, который использовался для базы данных-источника. Для баз данных с высокой частотой создания журналов рекомендуется создать геовторичный объект с тем же размером вычислений, что и у первичного.

Если вы создаете геовторичную реплику в эластичном пуле для одной базы данных-источника, убедитесь, что параметр `maxVCore` для пула соответствует размеру вычислений базы данных-источника. Если вы создаете геовторичную реплику для первичного пула в другом эластичном пуле, рекомендуется, чтобы пулы имели одинаковые параметры `maxVCore`.

## <a name="use-database-copy-to-convert-a-dtu-based-database-to-a-vcore-based-database"></a>Использование копирования базы данных для преобразования базы данных на основе DTU в базу данных на основе виртуальное ядро

Вы можете скопировать любую базу данных с объемом вычислительных ресурсов на основе DTU в базу данных с объемом вычислительных ресурсов на основе виртуальных ядер без ограничений или соблюдения специальной последовательности, если целевой объем вычислительных ресурсов поддерживает максимальный размер базы данных-источника. Копия базы данных создает моментальный снимок данных на момент начала операции копирования и не синхронизирует данные между источником и целевым объектом.

## <a name="next-steps"></a>Дальнейшие действия

- Сведения о конкретных размерах вычислений и размерах хранилища, доступных для отдельных баз данных, см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для отдельных баз](sql-database-vcore-resource-limits-single-databases.md)данных.
- Конкретные размеры вычислений и выбор размера хранилища, доступные для эластичных пулов, см. в разделе [SQL Database Виртуальное ядро Limits for эластичные пулы](sql-database-vcore-resource-limits-elastic-pools.md).
