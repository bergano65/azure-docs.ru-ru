---
title: Ограничения ресурсов управляемого экземпляра в Базе данных SQL Azure | Документация Майкрософт
description: В статье представлены общие сведения об ограничениях ресурсов Базы данных SQL Azure для управляемых экземпляров.
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: bonova
ms.author: bonova
ms.reviewer: carlrab, jovanpop, sachinp
manager: craigg
ms.date: 10/17/2018
ms.openlocfilehash: 97c141b6e0c071a8cea27f9a873f28a6c5113a18
ms.sourcegitcommit: b4a46897fa52b1e04dd31e30677023a29d9ee0d9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2018
ms.locfileid: "49394873"
---
# <a name="overview-azure-sql-database-managed-instance-resource-limits"></a>Общие сведения об ограничениях ресурсов Управляемого экземпляра Базы данных SQL Azure

В статье представлены общие сведения об ограничениях ресурсов Управляемого экземпляра Базы данных SQL Azure и сведения о том, как создать запрос на поддержку, чтобы увеличить ограничения по умолчанию для подписок по регионам. 

> [!NOTE]
> Сведения о других ограничениях Управляемого экземпляра см. в разделах [Модель покупки на основе числа виртуальных ядер](sql-database-managed-instance.md#vcore-based-purchasing-model) и [Уровни служб Управляемого экземпляра](sql-database-managed-instance.md#managed-instance-service-tiers). Различия в поддерживаемых функциях и инструкциях T-SQL см. в статьях [Сравнение функций Базы данных SQL Azure и SQL Server](sql-database-features.md) и [Различия T-SQL между Управляемым экземпляром Базы данных SQL Azure и SQL Server](sql-database-managed-instance-transact-sql-information.md).

## <a name="instance-level-resource-limits"></a>Ограничения ресурсов на уровне экземпляра

Управляемый экземпляр имеет характеристики и ограничения ресурсов, которые зависят от базовой инфраструктуры и архитектуры. Ограничения зависят от поколения оборудования и уровня службы.

### <a name="hardware-generation-characteristics"></a>Характеристики поколения оборудования

Управляемый экземпляр Базы данных SQL Azure можно развернуть на двух поколениях оборудования (4-е и 5-е поколение). У поколений оборудования разные характеристики, которые описаны в следующей таблице:

|   | **Поколение 4** | **Поколение 5** |
| --- | --- | --- |
| Оборудование | Процессоры Intel E5-2673 v3 (Haswell) с тактовой частотой 2,4 ГГц с присоединенным виртуальным ядром SSD = 1 PP (физическое ядро) | Процессоры Intel E5-2673 v4 (Broadwell) с тактовой частотой 2,3 ГГц, быстрый диск SSD eNVM, виртуальное ядро = 1 LP (технология Hyper-Threading) |
| Службы вычислений | 8, 16, 24 виртуальных ядер | 8, 16, 24, 32, 40, 64, 80 виртуальных ядер |
| Память | 7 ГБ на виртуальное ядро | 5,1 ГБ на виртуальное ядро |
| Максимальный размер хранилища ("Критически важный для бизнеса") | 1 TБ | 1 ТБ, 2 ТБ или 4 ТБ в зависимости от количества ядер |

### <a name="service-tier-characteristics"></a>Характеристики уровней служб

У Управляемого экземпляра есть два уровня служб: "Общее назначение" и "Критически важный для бизнеса". Эти уровни обеспечивают разные возможности, как описано в следующей таблице:

| **Компонент** | **Общего назначения** | **"Критически важный для бизнеса" (предварительная версия)** |
| --- | --- | --- |
| Количество виртуальных ядер\* | 4-е поколение: 8, 16, 24<br/>5-е поколение: 8, 16, 24, 32, 40, 64, 80 | 4-е поколение: 8, 16, 24, 32 <br/> 5-е поколение: 8, 16, 24, 32, 40, 64, 80 |
| Память | 4-е поколение: 56–156 ГБ<br/>5-е поколение: 44–440 ГБ<br/>\*Пропорционально количеству виртуальных ядер | 4-е поколение: 56–156 ГБ <br/> 5-е поколение: 44–440 ГБ<br/>\*Пропорционально количеству виртуальных ядер |
| Максимальный размер хранилища | 8 ТБ | 4-е поколение: 1 ТБ <br/> 5 поколение: <br/>— 1 ТБ для 8, 16 виртуальных ядер<br/>— 2 ТБ для 24 виртуальных ядер<br/>— 4 ТБ для 32, 40, 64, 80 виртуальных ядер |
| Максимальный размер хранилища на базу данных | Определяется максимальным размером хранилища каждого экземпляра | Определяется максимальным размером хранилища каждого экземпляра |
| Максимальное количество баз данных на экземпляр | 100 | 100 |
| Максимальное количество файлов базы данных на экземпляр | До 280 | Без ограничений |
| Максимальное ожидаемое число операций ввода-вывода в секунду, поддерживаемых хранилищем | 500–5000 ([зависит от размера файла данных](../virtual-machines/windows/premium-storage-performance.md#premium-storage-disk-sizes)) | Зависит от скорости базового SSD |

## <a name="supported-regions"></a>Поддерживаемые регионы

Управляемые экземпляры можно создавать только в [поддерживаемых регионах](https://azure.microsoft.com/global-infrastructure/services/?products=sql-database&regions=all). Если вы хотите создать Управляемый экземпляр в регионе, который в настоящее время не поддерживается, вы можете [отправить запрос на поддержку через портал Azure](#obtaining-a-larger-quota-for-sql-managed-instance).

## <a name="supported-subscription-types"></a>Поддерживаемые типы подписок

Сейчас развертывание Управляемого экземпляра поддерживается только в следующих подписках.

- [Соглашение Enterprise (EA)](https://azure.microsoft.com/pricing/enterprise-agreement/)
- [Оплата по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p/)
- [Поставщик облачных услуг (CSP)](https://docs.microsoft.com/partner-center/csp-documents-and-learning-resources)

> [!NOTE]
> Это ограничение является временным. Новые типы подписок будут добавлены в будущем.

## <a name="regional-resource-limitations"></a>Ограничение подписок по регионам

Поддерживаемые типы подписок могут содержать ограниченное число ресурсов на регион. В Управляемом экземпляре предусмотрено два ограничения по умолчанию на каждый регион Azure в зависимости от типа подписки.

- **Ограничение подсети**. Максимальное количество подсетей, в которых развернуты управляемые экземпляры в одном регионе.
- **Ограничение количества экземпляров**. Максимальное число экземпляров, которые можно развернуть в одном регионе.

В следующей таблице показаны ограничения по умолчанию по регионам для поддерживаемых подписок.

|Тип подписки| Максимальное число подсетей Управляемого экземпляра | Максимальное число экземпляров |Максимальное число управляемых экземпляров типа "Общее назначение" (GP)*|Максимальное число управляемых экземпляров типа "Критически важный для бизнеса" (BC)*|
| :---| :--- | :--- |:--- |:--- |
|Оплата по мере использования|1*|4*|4*|1*|
|CSP |1*|4*|4*|1*|
|EA|3**|12**|12**|3**|

\* Вы можете развернуть либо 1 экземпляр уровня "Критически важный для бизнеса", либо 4 экземпляра уровня "Общее назначение" в одной подсети так, чтобы общее количество "единиц экземпляров" в подсети не превышало 4.

** Максимальное число экземпляров на одном уровне службы применяется в случае, если экземпляры отсутствуют на другом уровне службы. Если вы планируете смешивать экземпляры уровня "Критически важный для бизнеса" и "Общее назначение" в одной подсети, используйте следующий раздел в качестве ориентира для допустимых сочетаний. Запомните простое правило: общее число подсетей не может превышать 3, а общее число единиц экземпляров — 12.

Эти ограничения можно увеличить, создав специальный [запрос на поддержку на портале Azure](#obtaining-a-larger-quota-for-sql-managed-instance), если вам нужно больше Управляемых экземпляров в текущем регионе. В качестве альтернативы можно создать Управляемые экземпляры в другом регионе Azure. В этом случае отправлять запрос на поддержку не нужно.

> [!IMPORTANT]
> При планировании развертываний учитывайте, что экземпляр уровня "Критически важный для бизнеса" (из-за дополнительной избыточности) обычно использует в четыре раза больше ресурсов, чем экземпляр уровня "Общее назначение". Итак, расчет таков: 1 экземпляр уровня "Общее назначение" = 1 единица экземпляра; 1 экземпляр уровня "Критически важный для бизнеса" = 4 единицы экземпляра. Чтобы упростить анализ потребления в соответствии с ограничениями по умолчанию, суммируйте единицы экземпляров во всех подсетях в регионе, где развернуты Управляемые экземпляры, и сравните результаты с ограничениями единиц экземпляра для вашего типа подписки.

## <a name="strategies-for-deploying-mixed-general-purpose-and-business-critical-instances"></a>Стратегии развертывания смешанных экземпляров уровней "Общее назначение" и "Критически важный для бизнеса"

Для подписки[Соглашение Enterprise (EA)](https://azure.microsoft.com/pricing/enterprise-agreement/) можно смешивать экземпляры уровней "Общее назначение" и "Критически важный для бизнеса". Однако существуют некоторые ограничения, касающиеся размещения экземпляров в подсети.

> [!Note] 
> У типов подписок [Оплата по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p/) и [Поставщик облачных служб (CSP)](https://docs.microsoft.com/partner-center/csp-documents-and-learning-resources) может быть либо один экземпляр уровня "Критически важный для бизнеса", либо до четырех экземпляров уровня "Общее назначение".

Следующие примеры охватывают варианты развертывания с заполненными подсетями и со смешанными уровнями служб "Критически важный для бизнеса" (BC) и "Общее назначение" (GP).

|Количество подсетей|Подсеть 1|Подсеть 2|Подсеть 3|
|:---|:---|:---|:---|
|1|1 BC и до 8 GP<br>2 BC и до 4 GP|Недоступно| Недоступно|
|2|0 BC и до 4 GP|1 BC и до 4 GP<br>2 BC, 0 GP|Недоступно|
|2|1 BC, 0 GP|0 BC и до 8 GP<br>1 BC и до 4 GP|Недоступно|
|2|2 BC, 0 GP|0 BC и до 4 GP|Недоступно|
|3|1 BC, 0 GP|1 BC, 0 GP|0 BC и до 4 GP|
|3|1 BC, 0 GP|0 BC и до 4 GP|0 BC и до 4 GP|

## <a name="obtaining-a-larger-quota-for-sql-managed-instance"></a>Получение увеличенной квоты для Управляемого экземпляра SQL

Если вам нужны дополнительные Управляемые экземпляры в текущих регионах, вы можете отправить запрос на поддержку, чтобы расширить квоту, с помощью портала Azure. Чтобы инициировать процесс получения увеличенной квоты, сделайте следующее:

1. Откройте вкладку **Справка и поддержка**, а затем выберите **Новый запрос на поддержку**. 

   ![Справка и поддержка](media/sql-database-managed-instance-resource-limits/help-and-support.png)
2. На вкладке "Основные сведения" сделайте следующее, чтобы создать запрос на поддержку.
   - Для поля **Тип проблемы** выберите **Ограничения службы и подписки (квоты)**.
   - В качестве **подписки** выберите свою подписку.
   - В качестве **типа квоты** выберите **Управляемый экземпляр Базы данных SQL**.
   - В поле **План поддержки** выберите свой план поддержки.

     ![Тип проблемы. Квота](media/sql-database-managed-instance-resource-limits/issue-type-quota.png)

3. Щелкните **Далее**.
4. На вкладке "Проблема" для нового запроса на поддержку сделайте следующее.
   - В поле **Серьезность** выберите степень серьезности проблемы.
   - В поле **Details** (Сведений) укажите дополнительные сведения о проблеме, включая текст сообщений об ошибках.
   - В поле **Отправка файла** вложите файл с дополнительной информацией (до 4 МБ).

     ![Сведения о проблеме](media/sql-database-managed-instance-resource-limits/problem-details.png)

     > [!IMPORTANT]
     > Допустимый запрос должен содержать:
     > - Регион, в котором необходимо увеличить ограничение подписки.
     > - Необходимое количество экземпляров на уровень службы в имеющихся подсетях после увеличения квоты (если необходимо развернуть любую из имеющихся сетей).
     > - Необходимое число новых подсетей и общее число экземпляров на уровень службы в новой подсети (если необходимо выполнить развертывание управляемых экземпляров в новые подсети).
     
5. Щелкните **Далее**.
6. На вкладке "Контактные данные" укажите предпочтительный способ связи (электронная почта или телефон) и контактные сведения для нового запроса на поддержку.
7. Нажмите кнопку **Создать**.

## <a name="next-steps"></a>Дополнительная информация

- Чтобы получить дополнительные сведения об Управляемом экземпляре, обратитесь к [этой статье](sql-database-managed-instance.md). 
- Информацию о ценах см. в разделе [Цены на управляемый экземпляр Базы данных SQL Azure](https://azure.microsoft.com/pricing/details/sql-database/managed/).
- Сведения о создании первого Управляемого экземпляра см. в [этом руководстве по началу работы](sql-database-managed-instance-get-started.md).
