---
title: Оценка локальных серверов с помощью импортированного CSV-файла и средства оценки серверов службы "Миграция Azure"
description: В этой статье описывается, как обнаружить локальные серверы для миграции в Azure с помощью импортированного CSV-файла в средстве оценки сервера в службе "Миграция Azure".
ms.topic: tutorial
ms.date: 09/14/2020
ms.openlocfilehash: 743f18ce72e3f14fe54e0bbadff254ea03fc6278
ms.sourcegitcommit: 80b9c8ef63cc75b226db5513ad81368b8ab28a28
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2020
ms.locfileid: "90604229"
---
# <a name="tutorial-assess-servers-using-an-imported-csv-file"></a>Руководство по оценке серверов с помощью импортированного CSV-файла

В процессе переноса в Azure вы обнаружите локальные данные инвентаризации и рабочие нагрузки. 

В этом учебнике показано, как оценивать локальные компьютеры с помощью средства оценки серверов службы "Миграция Azure", используя импортированный файл (CSV) со значениями, разделенными запятыми. 

Если вы используете CSV-файл, вам не нужно настраивать устройство Миграции Azure для обнаружения и оценки серверов. Вы можете управлять тем, к каким данным предоставляете совместный доступ через файл. Большая часть этих данных является необязательной. Этот метод полезен в указанных ниже случаях.

- Перед развертыванием устройства нужно быстро выполнить начальную оценку.
- Нет возможности развернуть модуль службы "Миграция Azure" в вашей организации.
- Нет возможности предоставить общий доступ к учетным данным для входа на локальные серверы.
- Ограничения безопасности не позволяют собирать и отправлять в Azure данные, которые собираются этим модулем.

> [!NOTE]
> Невозможно перенести серверы, импортированные с помощью CSV-файла.

В этом руководстве описано следующее:
> [!div class="checklist"]
> * Настройка учетной записи Azure
> * Настройка проекта службы "Миграция Azure"
> * Подготовка CSV-файла
> * Импорт файла
> * Оценка серверов

> [!NOTE]
> В учебниках показан самый быстрый способ выполнения сценария и используются параметры по умолчанию, где это возможно. 

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/pricing/free-trial/), прежде чем начинать работу.

## <a name="prerequisites"></a>Предварительные требования

- С помощью одного CSV-файла вы сможете добавить в проект Миграции Azure не более 20 000 серверов. 
- Имена операционных систем, указанные в CSV-файле, должны содержать [поддерживаемые имена](#supported-operating-system-names) и сопоставляться с ними.


## <a name="prepare-an-azure-user-account"></a>Подготовка учетной записи пользователя Azure

Чтобы создать проект службы "Миграция Azure", требуется учетная запись с:
- разрешениями участника или владельца в подписке Azure;
- разрешениями на регистрацию приложений Azure Active Directory.

Если вы создали бесплатную учетную запись Azure, вы являетесь владельцем подписки. Если вы не являетесь владельцем подписки, назначьте разрешения совместно с владельцем следующим образом:

1. На портале Azure выполните поиск по фразе "подписки" и в разделе **Службы** выберите **Подписки**.

    ![Поле для поиска подписки Azure](./media/tutorial-discover-import/search-subscription.png)

2. На странице **Подписки** выберите подписку, в которой нужно создать проект службы "Миграция Azure". 
3. На странице подписок последовательно выберите **Управление доступом (IAM)**  > **Проверить доступ**.
4. В разделе **Проверка доступа** найдите соответствующую учетную запись пользователя.
5. В разделе **Добавление назначения роли** щелкните **Добавить**.

    ![Поиск учетной записи пользователя для проверки доступа и назначения роли](./media/tutorial-discover-import/azure-account-access.png)

6. В разделе **Добавление назначения роли** выберите роль "Участник" или "Владелец", а затем — учетную запись (в нашем примере — azmigrateuser). Затем нажмите кнопку **Сохранить**.

    ![Открытие страницы "Добавить назначение ролей" для назначения роли учетной записи](./media/tutorial-discover-import/assign-role.png)

7. Найдите пользователей на портале и в разделе **Службы** выберите **Пользователи**.
8. В разделе **Параметры пользователя** проверьте, смогут ли пользователи Azure AD регистрировать приложения (по умолчанию задано значение **Да**).

    ![Проверка того, могут ли пользователи регистрировать приложения Active Directory в разделе "Параметры пользователя"](./media/tutorial-discover-import/register-apps.png)



## <a name="set-up-a-project"></a>Настройка проекта

Настройте новый проект службы "Миграция Azure", если он отсутствует.

1. На портал Azure выберите **Все службы** и найдите службу **Миграция Azure**.
2. В разделе **Службы** выберите **Миграция Azure**.
3. В разделе **Обзор** выберите **Создать проект**.
5. В разделе **Создать проект** выберите подписку Azure и группу ресурсов. Если у вас еще нет группы ресурсов, создайте ее.
6. В разделе **Сведения о проекте** укажите имя проекта и регион для создания проекта. Просмотрите список поддерживаемых регионов для [общедоступного](migrate-support-matrix.md#supported-geographies-public-cloud) облака и облака для [государственных организаций](migrate-support-matrix.md#supported-geographies-azure-government).

   ![Поля для имени и региона проекта](./media/tutorial-discover-import/new-project.png)

7. Нажмите кнопку **создания**.
8. Развертывание проекта службы "Миграция Azure" может занять несколько минут.

**Средство оценки серверов: службы "Миграция Azure"** добавляется по умолчанию в новый проект.

![Страница с изображением средства оценки серверов, добавленного по умолчанию](./media/tutorial-discover-import/added-tool.png)

## <a name="prepare-the-csv"></a>Подготовка CSV-файла

Скачайте шаблон CSV-файла и добавьте в него сведения о сервере.

### <a name="download-the-template"></a>Скачивание шаблона

1. Последовательно выберите разделы **Цели миграции** > **Серверы** > **Azure Migrate: оценка серверов** и щелкните **Обнаружить**.
2. В разделе **Обнаружение компьютеров** выберите действие **Импорт с использованием CSV-файла**.
3. Выберите **Скачать**, чтобы скачать шаблон CSV-файла. Кроме того, вы можете [скачать его напрямую](https://go.microsoft.com/fwlink/?linkid=2109031).

    ![Скачивание шаблона CSV-файла](./media/tutorial-discover-import/download-template.png)

### <a name="add-server-information"></a>Добавление информации о сервере

Соберите данные о сервере и добавьте их в CSV-файл.

- Для сбора данных можно экспортировать их из средств, которые используются для локального управления серверами, таких как VMware vSphere или база данных управления конфигурацией (CMDB).
- Чтобы ознакомиться с примерами данных, скачайте [пример файла](https://go.microsoft.com/fwlink/?linkid=2108405).

В следующей таблице перечислены поля файлов, которые необходимо заполнить:

**Имя поля** | **Обязательное** | **Сведения**
--- | --- | ---
**Имя сервера** | Да | Мы рекомендуем указать полное доменное имя сервера.
**IP-адрес** | Нет | Адрес сервера.
**Ядра** | Да | Число ядер процессора, выделенных для этого сервера.
**Память** | Да | Общий объем ОЗУ (МБ), выделенный для этого сервера.
**OS name** (Имя ОС) | Да | Операционная система сервера. <br/> При оценке распознаются имена операционных систем, совпадающие с именами или содержащие имена из [этого списка](#supported-operating-system-names).
**Версия ОС** | Нет | Версия операционной системы сервера.
**Архитектура ОС** | Нет | Архитектура ОС сервера <br/> Допустимые значения: x64, x86, AMD64, 32-или 64-разрядный.
**Количество дисков** | Нет | Не требуется, если предоставлены сведения о конкретных дисках.
**Disk 1 size** (Размер диска 1)  | Нет | Максимальный размер диска в ГБ.<br/>Вы можете добавить сведения о дополнительных дисках, [добавляя столбцы](#add-multiple-disks) в этот шаблон. В общей сложности можно добавить до восьми дисков.
**Disk 1 read ops** (Операций чтения для диска 1) | Нет | Число операций чтения с диска в секунду.
**Disk 1 write ops** (Операций записи для диска 1) | Нет | Число операций записи на диск в секунду.
**Disk 1 read throughput** (Пропускная способность при чтении для диска 1) | Нет | Скорость считывания данных с диска в МБ/с.
**Disk 1 write throughput** (Пропускная способность при записи для диска 1) | Нет | Скорость записи данных на диск в МБ/с.
**CPU utilization percentage** (Процент использования ЦП) | Нет | Процент использования ЦП.
**Memory utilization percentage** (Процент использования памяти) | Нет | Процент использования памяти.
**Total disks read ops** (Всего операций чтения с дисков) | Нет | Число операций чтения с диска в секунду.
**Total disks write ops** (Всего операций записи на диски) | Нет | Число операций записи на диск в секунду.
**Total disks read throughput** (Общая пропускная способность чтения с дисков) | Нет | Скорость чтения данных с диска в МБ/с.
**Total disks write throughput** (Общая пропускная способность записи на диски) | Нет | Скорость записи данных на диск в МБ/с.
**Network In throughput** (Пропускная способность для входящего трафика) | Нет | Объем получаемых сервером данных в МБ/с.
**Network Out throughput** (Пропускная способность для исходящего трафика) | Нет | Объем передаваемых сервером данных в МБ/с.
**Firmware type** (Тип встроенного ПО) | Нет | Встроенное ПО сервера. Допускаются значения "BIOS" и "UEFI".
**MAC address** (MAC-адрес)| Нет | MAC-адрес сервера.


### <a name="add-operating-systems"></a>Добавление операционных систем

Средство оценки распознает некоторые имена операционных систем. Указанное здесь имя должно соответствовать одной из строк в списке [поддерживаемых имен](#supported-operating-system-names).

### <a name="add-multiple-disks"></a>Добавление нескольких дисков

В шаблоне предоставлены поля по умолчанию для первого диска. Вы можете добавить аналогичные столбцы для дополнительных дисков (до восьми в общей сложности).

Например, чтобы подготовить все поля для второго диска, добавьте следующие столбцы:

- Disk 2 size (Размер диска 2)
- Disk 2 read ops (Операций чтения для диска 2)
- Disk 2 write ops (Операций записи для диска 2)
- Disk 2 read throughput (Пропускная способность при чтении для диска 2)
- Disk 2 write throughput (Пропускная способность при записи для диска 2)


## <a name="import-the-server-information"></a>Импорт сведений о сервере

После добавления сведений в шаблон CSV-файла импортируйте CSV-файл в средство оценки серверов.

1. В службе "Миграция Azure" найдите раздел **Обнаружение компьютеров** и перейдите к заполненному шаблону.
2. Выберите **Импортировать**.
3. Отобразится состояние импорта.
    - Если в этом состоянии отображаются предупреждения, вы можете исправить их или продолжить работу без устранения.
    - Чтобы повысить точность оценки, уточните информацию о сервере в соответствии с предупреждениями.
    - Чтобы просмотреть и исправить отображаемые предупреждения, выберите **Download warning details .CSV** (Скачать CSV-файл с информацией о предупреждениях). С помощью этой операции вам передается CSV-файл с добавленными предупреждениями. Просмотрите эти предупреждения и при необходимости примите меры.
    - Если в состоянии отображаются ошибки (состояние импорта имеет значение **Сбой**), их необходимо исправить перед продолжением импорта.
        1. Скачайте CSV-файл, который теперь содержит сведения об ошибке.
        1. Просмотрите эти сведения и устраните ошибки. 
        1. Снова отправьте измененный файл.
4. Если состояние импорта приняло значение **Completed** (Завершено), значит, сведения о сервере успешно импортированы. Выполните обновление, если процесс импорта не завершен.

## <a name="update-server-information"></a>Обновление сведений о сервере

Чтобы обновить сведения о сервере, повторите импорт данных с тем же значением для поля **Server name** (Имя сервера). Значение поля **Server name** (Имя сервера) нельзя изменять. В настоящее время удаление серверов не поддерживается.

## <a name="verify-servers-in-the-portal"></a>Проверка серверов на портале

Чтобы после обнаружения проверить, отображаются ли серверы на портале Azure, сделайте следующее:

1. Откройте панель мониторинга службы "Миграция Azure".
2. На странице **Azure Migrate - Servers (Миграция Azure — Серверы)**  > **Azure Migrate: Server Assessment (Миграция Azure: оценка серверов)** щелкните значок, отображающий количество **обнаруженных серверов**.
3. Щелкните вкладку **Import based** (На основе импорта).



## <a name="supported-operating-system-names"></a>Поддерживаемые имена операционных систем

Имена операционных систем, указанные в CSV-файле, должны содержать соответствующие компоненты и совпадать. В противном случае вы не сможете их оценивать. 

**A–H** | **I–R** | **S–T** | **U-Z**
--- | --- | --- | ---
Apple Mac OS X 10<br/>Asianux 3<br/>Asianux 4<br/>Asianux 5<br/>CentOS<br/>CentOS 4/5<br/>CoreOS Linux<br/>Debian GNU/Linux 4<br/>Debian GNU/Linux 5<br/>Debian GNU/Linux 6<br/>Debian GNU/Linux 7<br/>Debian GNU/Linux 8<br/>FreeBSD | IBM OS/2<br/>MS-DOS<br/>Novell NetWare 5<br/>Novell NetWare 6<br/>Oracle Linux<br/>Oracle Linux 4/5<br/>Oracle Solaris 10<br/>Oracle Solaris 11<br/>Red Hat Enterprise Linux 2<br/>Red Hat Enterprise Linux 3<br/>Red Hat Enterprise Linux 4<br/>Red Hat Enterprise Linux 5<br/>Red Hat Enterprise Linux 6<br/>Red Hat Enterprise Linux 7<br/>Red Hat Fedora | SCO OpenServer 5<br/>SCO OpenServer 6<br/>SCO UnixWare 7<br/> Serenity Systems eComStation 1<br/>Serenity Systems eComStation <br/>Sun Microsystems Solaris 8<br/>Sun Microsystems Solaris 9<br/><br/>SUSE Linux Enterprise 10<br/>SUSE Linux Enterprise 11<br/>SUSE Linux Enterprise 12<br/>SUSE Linux Enterprise 8/9<br/>SUSE Linux Enterprise 11<br/>SUSE openSUSE | Ubuntu Linux<br/>VMware ESXi 4<br/>VMware ESXi 5<br/>VMware ESXi 6<br/>Windows 10<br/>Windows 2000<br/>Windows 3<br/>Windows 7<br/>Windows 8<br/>Windows 95<br/>Windows 98<br/>Windows NT<br/>Windows Server (R) 2008<br/>Windows Server 2003<br/>Windows Server 2008<br/>Windows Server 2008 R2<br/>Windows Server 2012<br/>Windows Server 2012 R2<br/>Windows Server 2016<br/>Windows Server 2019<br/>Windows Server Threshold<br/>Windows Vista<br/>Windows Web Server 2008 R2<br/>Windows XP Professional

## <a name="next-steps"></a>Дальнейшие действия

Изучив это руководство, вы:

> [!div class="checklist"]
> * создали проект службы "Миграция Azure"; 
> * обнаружили серверы, используя импортированный CSV-файл. Теперь выполните оценку для [миграции виртуальной машины VMware в виртуальные машины Azure](tutorial-assess-vmware.md).
