---
title: Поддержка оценки VMware в службе "Миграция Azure"
description: Узнайте о поддержке оценки виртуальных машин VMware с помощью средства оценки сервера службы "Миграция Azure".
ms.topic: conceptual
ms.date: 06/08/2020
ms.openlocfilehash: 0fd884a7d95edaf6586e7eecd644400c05c15e5a
ms.sourcegitcommit: ce8eecb3e966c08ae368fafb69eaeb00e76da57e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2020
ms.locfileid: "92315797"
---
# <a name="support-matrix-for-vmware-assessment"></a>Таблица поддержки для оценки виртуальных машин VMware 

В этой статье перечислены требования к предварительным требованиям и поддержке при обнаружении и оценке виртуальных машин VMware для миграции в Azure с помощью средства " [Миграция Azure": Серверная Оценка](migrate-services-overview.md#azure-migrate-server-assessment-tool) . Чтобы оценить виртуальные машины VMware, необходимо создать проект службы "миграция Azure" и добавить в проект средство оценки сервера. После добавления средства разверните Устройство Миграции Azure. Устройство непрерывно обнаруживает локальные компьютеры и отправляет метаданные и сведения о производительности этих компьютеров в Azure. После обнаружения вы можете объединить обнаруженные компьютеры в группы и запустить оценку для любой группы. 

Если вы хотите перенести виртуальные машины VMware в Azure, изучите [таблицу поддержки миграции](migrate-support-matrix-vmware-migration.md).



## <a name="limitations"></a>Ограничения

**Поддержка** | **Сведения**
--- | ---
**Ограничения проекта** | Для одной подписки Azure можно создать несколько проектов.<br/><br/> Вы можете обнаружить и оценить до 35 000 виртуальных машин VMware в одном [проекте](migrate-support-matrix.md#azure-migrate-projects). Проект также может включать физические серверы и виртуальные машины Hyper-V в рамках ограничений оценки.
**Обнаружение** | Устройство Миграции Azure может обнаруживать до 10 000 виртуальных машин VMware в vCenter Server.
**Оценка** | В одну группу можно добавить до 35 000 компьютеров.<br/><br/> Можно оценить до 35 000 виртуальных машин в одной операции.

[Дополнительные сведения](concepts-assessment-calculation.md) об оценках.


## <a name="vmware-requirements"></a>Требования для VMware

**VMware** | **Сведения**
--- | ---
**vCenter Server** | Компьютеры, которые требуется обнаружить и оценить, должны управляться с помощью vCenter Server версии 5,5, 6,0, 6,5, 6,7 или 7,0.<br/><br/> Обнаружение виртуальных машин VMware путем предоставления сведений об узле ESXi в устройстве в настоящее время не поддерживается.
**Разрешения** | Для оценки сервера требуется vCenter Server учетную запись только для чтения для обнаружения и оценки.<br/><br/> Если вы хотите выполнить обнаружение приложений или визуализацию зависимостей, учетной записи необходимы права доступа **Virtual Machines**для  >  **гостевых операций**виртуальных машин.

## <a name="vm-requirements"></a>Требования к виртуальной машине
**VMware** | **Сведения**
--- | ---
**Виртуальные машины VMware** | Все операционные системы можно оценить для миграции. 
**Хранилище** | Поддерживаются диски, подключенные к контроллерам SCSI, IDE и SATA.


## <a name="azure-migrate-appliance-requirements"></a>Требования к устройству Миграции Azure

Служба "Миграция Azure" использует [устройство Миграции Azure](migrate-appliance.md) для обнаружения и оценки. Вы можете развернуть устройство как виртуальную машину VMware с помощью шаблона OVA, импортированного в vCenter Server или с помощью [скрипта PowerShell](deploy-appliance-script.md).

- Узнайте больше о [требованиях к устройству](migrate-appliance.md#appliance---vmware) для VMware.
- В Azure для государственных организаций необходимо развернуть устройство [с помощью скрипта](deploy-appliance-script-government.md).
- Проверьте URL-адреса, необходимые устройству для доступа в [общедоступных](migrate-appliance.md#public-cloud-urls) и [правительственных](migrate-appliance.md#government-cloud-urls) облаках.


## <a name="port-access-requirements"></a>Требования к доступу к портам

**Устройство** | **Соединение**
--- | ---
**Устройство** | Входящие подключения через TCP-порт 3389 для подключения удаленного рабочего стола к устройству.<br/><br/> Входящие подключения через порт 44368 для удаленного доступа к приложению управления устройством с помощью URL-адреса: ```https://<appliance-ip-or-name>:44368``` <br/><br/>Исходящие подключения через порт 443 (HTTPS) для отправки метаданных обнаружения и производительности в службу "Миграция Azure".
**Сервер vCenter** | Входящие подключения через TCP-порт 443, чтобы разрешить устройству получать метаданные конфигурации и производительности для оценки. <br/><br/> По умолчанию устройство подключается к vCenter через порт 443. Если vCenter Server ожидает передачи данных через другой порт, можно изменить порт при настройке обнаружения.
**Узлы ESXi** | Если вы хотите выполнить [Обнаружение](how-to-discover-applications.md)приложений или [анализ зависимостей без агента](concepts-dependency-visualization.md#agentless-analysis), устройство подключается к узлам ESXi через TCP-порт 443, чтобы обнаружить приложения и запустить визуализацию зависимостей без агента на виртуальных машинах.

## <a name="application-discovery-requirements"></a>Требования к обнаружению приложений

Помимо обнаружения компьютеров, средство оценки серверов может обнаруживать приложения, роли и функции, работающие на компьютерах. Обнаружение инвентаризации приложений позволяет определять и планировать путь миграции специально для локальных рабочих нагрузок. 

**Поддержка** | **Сведения**
--- | ---
**Поддерживаемые компьютеры** | В настоящее время обнаружение приложений поддерживается только для виртуальных машин VMware.
**Обнаружение** | Обнаружение приложений выполняется без агента. Оно использует гостевые учетные данные компьютера и удаленный доступ к компьютерам с помощью WMI и вызовов SSH.
**Поддержка виртуальных машин** | Обнаружение приложений поддерживается для виртуальных машин, работающих под управлением всех версий Windows и Linux.
**vCenter** | VCenter Server учетной записи только для чтения, используемой для оценки, требуются **Virtual Machines**права для  >  **гостевых операций**виртуальных машин, чтобы взаимодействовать с виртуальной машиной для обнаружения приложений.
**Доступ к виртуальной машине** | Для обнаружения приложения на виртуальной машине требуется локальная учетная запись пользователя для обнаружения приложений.<br/><br/> Сейчас служба "миграция Azure" поддерживает использование одного учетного данных для всех серверов Windows, а также одну учетную запись для всех серверов Linux.<br/><br/> Создайте учетную запись гостевого пользователя для виртуальных машин Windows, а также обычную учетную запись пользователя (без доступа sudo) для всех виртуальных машин Linux.
**Средства VMware** | Средства VMware должны быть установлены и запущены на виртуальных машинах, которые вы хотите обнаружить. <br/><br/> Потребуются средства VMware версии после 10.2.0.
**PowerShell** | Для виртуальных машин требуется PowerShell версии 2.0 или более поздней.
**Доступ к портам** | На узлах ESXi, на которых нужно обнаружить виртуальные машины, устройство Миграции Azure должно иметь возможность подключения к TCP-порту 443.
**Ограничения** | В рамках обнаружения приложений можно обнаружить до 10 000 виртуальных машин на каждом устройстве Миграции Azure.


## <a name="dependency-analysis-requirements-agentless"></a>Требования к анализу зависимостей (без агента)

[Анализ зависимостей](concepts-dependency-visualization.md) помогает определить зависимости между локальными компьютерами, которые вы хотите оценить и перенести в Azure. В таблице перечислены требования для настройки анализа зависимостей без агента.

**Требование** | **Сведения**
--- | --- 
**Перед развертыванием** | У вас должен быть проект "Миграция Azure" со средством оценки сервера.<br/><br/>  Визуализация зависимостей развертывается после настройки устройства миграции Azure для обнаружения локальных компьютеров VMware.<br/><br/> [Узнайте](create-manage-projects.md), как создать проект в первый раз.<br/> [Узнайте](how-to-assess.md), как добавить средство оценки в существующий проект.<br/> [Узнайте](how-to-set-up-appliance-vmware.md), как настроить устройство Миграции Azure для оценки виртуальных машин VMware.
**Поддерживаемые компьютеры** | В настоящее время поддерживается только для виртуальных машин VMware.
**Виртуальные машины Windows** | Windows Server 2016<br/> Windows Server 2012 R2<br/> Windows Server 2012<br/> Windows Server 2008 R2 (64-разрядная версия).<br/>Microsoft Windows Server 2008 (32-bit). Убедитесь, что PowerShell установлен.
**Учетные данные vCenter Server** | Для визуализации зависимостей требуется учетная запись vCenter Server с доступом только для чтения и разрешения для гостевых операций на виртуальных машинах.
**Разрешения виртуальной машины Windows** |  Для анализа зависимостей устройству Миграции Azure требуется учетная запись администратора домена или учетная запись локального администратора для доступа к виртуальным машинам Windows.
**Виртуальные машины Linux** | Red Hat Enterprise Linux 7, 6, 5<br/> Ubuntu Linux 14.04, 16.04<br/> Debian 7, 8.<br/> Oracle Linux 6, 7<br/> CentOS 5, 6, 7.<br/> SUSE Linux Enterprise Server 11 и более поздние версии
**Учетная запись Linux** | Для анализа зависимостей на компьютерах Linux устройству "миграция Azure" требуется учетная запись привилегированного пользователя<br/><br/> Или у учетной записи пользователя должны быть следующие разрешения для файлов /bin/netstat и /bin/ls: CAP_DAC_READ_SEARCH и CAP_SYS_PTRACE. Задайте эти возможности с помощью следующих команд: <br/> sudo сеткап CAP_DAC_READ_SEARCH, CAP_SYS_PTRACE = EP/бин/ЛС <br/> sudo сеткап CAP_DAC_READ_SEARCH, CAP_SYS_PTRACE = EP/бин/нетстат
**Необходимые агенты** | На компьютерах, которые вы хотите проанализировать, не требуется агент.
**Средства VMware** | Средства VMware (после версии 10.2) должны быть установлены и запущены на каждой виртуальной машине, которую необходимо проанализировать.
**PowerShell** | Для виртуальных машин Windows требуется PowerShell версии 2.0 или более поздней.
**Доступ к портам** | На узлах ESXi, на которых нужно проанализировать виртуальные машины, устройство Миграции Azure должно иметь возможность подключения к TCP-порту 443.


## <a name="dependency-analysis-requirements-agent-based"></a>Требования к анализу зависимостей (на основе агентов)

[Анализ зависимостей](concepts-dependency-visualization.md) помогает определить зависимости между локальными компьютерами, которые вы хотите оценить и перенести в Azure. В таблице перечислены требования для настройки анализа зависимостей на основе агента. 

**Требование** | **Сведения** 
--- | --- 
**Перед развертыванием** | У вас должен быть проект Миграции Azure с добавленным средством "Миграция Azure: средство оценки серверов".<br/><br/>  Визуализация зависимостей развертывается после настройки устройства Миграции Azure для обнаружения локальных компьютеров<br/><br/> [Узнайте](create-manage-projects.md), как создать проект в первый раз.<br/> [Узнайте](how-to-assess.md), как добавить средство оценки в существующий проект.<br/> Узнайте, как настроить устройство Миграции Azure для оценки [Hyper-V](how-to-set-up-appliance-hyper-v.md), [VMware](how-to-set-up-appliance-vmware.md) или физических серверов.
**Поддерживаемые компьютеры** | Поддерживается для всех компьютеров.
**Azure для государственных организаций** | Визуализация зависимостей недоступна в Azure для государственных организаций.
**Служба Log Analytics** | Служба "Миграция Azure" использует решение [Сопоставление служб](../azure-monitor/insights/service-map.md) в [журналах Azure Monitor](../azure-monitor/log-query/log-query-overview.md) для визуализации зависимостей.<br/><br/> Привяжите новую или существующую рабочую область Log Analytics к проекту Миграции Azure. Рабочую область для проекта Миграции Azure нельзя изменить после добавления. <br/><br/> Рабочая область должна находиться в той же подписке, что и проект Миграции Azure.<br/><br/> Рабочая область должна находиться в следующих регионах: Восточная часть США, Юго-Восточная Азия или Западная Европа. Рабочие области в других регионах не могут быть связаны с проектом.<br/><br/> Рабочая область должна находиться в регионе, в котором [поддерживается Сопоставление служб](../azure-monitor/insights/vminsights-configure-workspace.md#supported-regions).<br/><br/> В Log Analytics рабочая область, связанная с Миграцией Azure, помечается ключом проекта миграции и именем проекта.
**Необходимые агенты** | На каждом компьютере, который необходимо проанализировать, установите следующие агенты.<br/><br/> [Microsoft Monitoring Agent (MMA)](../azure-monitor/platform/agent-windows.md).<br/> [Агент зависимостей](../azure-monitor/platform/agents-overview.md#dependency-agent).<br/><br/> Если локальные компьютеры не подключены к Интернету, необходимо скачать и установить на них шлюз Log Analytics.<br/><br/> Узнайте больше об установке [агента зависимостей](how-to-create-group-machine-dependencies.md#install-the-dependency-agent) и [MMA](how-to-create-group-machine-dependencies.md#install-the-mma).
**Рабочая область Log Analytics** | Рабочая область должна находиться в той же подписке, что и проект Миграции Azure.<br/><br/> Миграция Azure поддерживает рабочие области в следующих регионах: Восточная часть США, Юго-Восточная Азия и Западная Европа.<br/><br/>  Рабочая область должна находиться в регионе, в котором [поддерживается Сопоставление служб](../azure-monitor/insights/vminsights-configure-workspace.md#supported-regions).<br/><br/> Рабочую область для проекта Миграции Azure нельзя изменить после добавления.
**Затраты** | Решение "Сопоставление служб" не тарифицируется первые 180 дней со дня присоединения рабочей области Log Analytics к проекту Миграции Azure.<br/><br/> По истечении 180 дней применяются стандартные тарифы Log Analytics.<br/><br/> За использование в этой рабочей области Log Analytics любого другого решения, помимо "Сопоставление служб", взимается [стандартная плата](https://azure.microsoft.com/pricing/details/log-analytics/) Log Analytics.<br/><br/> При удалении проекта "Миграция Azure" рабочая область не будет удалена. После удаления проекта за использование решения "Сопоставление служб" будет взиматься плата за каждый узел в соответствии с ценовым уровнем рабочей области Log Analytics.<br/><br/>Если у вас есть проекты, созданные до выхода общедоступной версии Миграция Azure (от 28 февраля 2018 г.), может взиматься дополнительная плата за Сопоставление служб. Чтобы не платить за службу 180 дней, рекомендуется создать новый проект, так как существующие рабочие области до общедоступной версии будут платными.
**Управление** | При регистрации агентов в рабочей области вы используете идентификатор и ключ, предоставленные проектом Миграции Azure.<br/><br/> Рабочую область Log Analytics можно использовать за пределами службы "Миграция Azure".<br/><br/> При удалении связанного проекта Миграции Azure рабочая область не удаляется автоматически. [Удалите ее вручную](../azure-monitor/platform/manage-access.md).<br/><br/> Не удаляйте рабочую область, созданную службой "Миграция Azure", если только вы не удаляете проект миграции. В противном случае функция визуализации зависимостей не будет работать должным образом.
**Подключение к Интернету** | Если компьютеры не подключены к Интернету, необходимо установить на них шлюз Log Analytics.
**Azure для государственных организаций** | Анализ зависимостей на основе агента не поддерживается.


## <a name="next-steps"></a>Дальнейшие действия

- [Просмотрите](best-practices-assessment.md) рекомендации для создания оценок.
- [Подготовьтесь к оценке VMware](./tutorial-discover-vmware.md).