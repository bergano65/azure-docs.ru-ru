---
title: Классификации хранилища данных SQL | Документация Майкрософт
description: Руководство по использованию классификации для управления параллелизмом, важность и вычислительными ресурсами для запросов в хранилище данных SQL Azure.
services: sql-data-warehouse
author: ronortloff
manager: craigg
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: workload management
ms.date: 03/13/2019
ms.author: rortloff
ms.reviewer: jrasnick
ms.openlocfilehash: bcc09095955a28bde3ed999f23180e08485543fc
ms.sourcegitcommit: 4133f375862fdbdec07b70de047d70c66ac29d50
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2019
ms.locfileid: "57994005"
---
# <a name="sql-data-warehouse-workload-classification-preview"></a>Классификации рабочей нагрузки хранилища данных SQL (Предварительная версия)

В этой статье объясняется процесс классификации рабочей нагрузки хранилища данных SQL назначения класс ресурсов и важность входящих запросов.

> [!Note]
> Классификации рабочей нагрузки можно найти в Gen2 хранилище данных SQL.

## <a name="classification"></a>классификация;

> [!Video https://www.youtube.com/embed/QcCRBAhoXpM]

Классификации управления рабочей нагрузки позволяет рабочей нагрузки позволяют применять к запросам, назначив [классы ресурсов](resource-classes-for-workload-management.md#what-are-resource-classes) и [важности](sql-data-warehouse-workload-importance.md).

Хотя существует много способов классификации рабочих нагрузок хранилищ данных, классификации простейшее и самое распространенное — нагрузочных тестов и запросов. Вы загрузка данных с помощью инструкции insert, update и инструкций delete.  Вы запрашивать данные с помощью выбирает. Решение хранилища данных часто сталкиваются политики рабочей нагрузки для действия нагрузки, например назначение более высокий класс ресурсов, с дополнительными ресурсами. Применить политику отличается от рабочей нагрузки для запросов, например нижний важность по сравнению с загрузить действий.

Можно также subclassify рабочие нагрузки и запросов. Подклассификация дает больше возможностей для управления рабочими нагрузками. Например рабочих нагрузок запросов может состоять из обновления куба, запросы информационной панели или ad-hoc-запросов. Каждый из этих рабочих нагрузок запросов с другие классы ресурсов или параметры важности можно классифицировать. Нагрузки могут получить преимущество от подклассификация. Большой преобразования могут быть назначены большие классы ресурсов. Чтобы убедиться, что основные данные о продажах — загрузчик, прежде чем данные о погоде или социальных сетей канала данных можно использовать более высокий уровень важности.

## <a name="classification-process"></a>Процесс классификации

Классификации в хранилище данных SQL уже сегодня достигается путем назначения пользователям роли, которая имеет соответствующий класс ресурсов, с применением [sp_addrolemember](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql). Благодаря этой возможности ограничено возможность характеризовать запросов входа в класс ресурсов. Более широкие метод классификации теперь входит в состав [СОЗДАНИЯ КЛАССИФИКАТОРА рабочей НАГРУЗКИ](/sql/t-sql/statements/create-workload-classifier-transact-sql) синтаксис.  Со следующим синтаксисом хранилище данных SQL пользователи могут назначать важности и класс ресурсов для запросов.  

> [!NOTE]
> Классификации вычисляется для каждого запроса. Несколько запросов в одном сеансе можно классифицировать по-разному.

## <a name="classification-precedence"></a>Приоритет классификации

В рамках процесса классификации приоритет находится в месте, чтобы определить, какой класс ресурсов назначен. Классификации на основе пользовательской базы данных имеет приоритет над членство в роли. Если вы создаете классификатор, сопоставляет пользователя UserA базы данных классом ресурсов mediumrc. Сопоставьте RoleA роли базы данных (из которых пользователь a является членом), класс ресурсов largerc. Классификатор, который сопоставляется с классом ресурсов mediumrc пользователя базы данных будет иметь приоритет над классификатор, который сопоставляет роли базы данных RoleA к классу ресурсов largerc.

Если пользователь является членом нескольких ролей с классами другому ресурсу назначены или в нескольких классификаторы, пользователь получает наивысший назначении классов ресурсов.  Такое поведение согласуется с существующим поведением назначение класса ресурсов.

## <a name="system-classifiers"></a>Классификаторы системы

Рабочая нагрузка классификации имеет классификаторы рабочей нагрузки системы. Классификаторы системы сопоставляются выделений ресурсов класса членства в роли для существующего ресурса класса с обычным уровнем важности. Не удалось удалить классификаторов системы. Чтобы просмотреть системы классификаторы, можно запустить под запросом:

```sql
SELECT * FROM sys.workload_management_workload_classifiers where classifier_id <= 12
```

## <a name="mixing-resource-class-assignments-with-classifiers"></a>Сочетание ресурсов класса назначения с помощью классификаторов

Классификаторы системы созданы от вашего имени, содержат перенести в классификации рабочей нагрузки. Использование сопоставлений роль класса ресурсов с приоритетом классификации, может привести к неправильной классификации, как вы начнете создавать новый классификаторов с важностью.

Рассмотрим следующие сценарии.

•An существующее хранилище данных содержит пользователя базы данных, которые назначены DBAUser в роль класса ресурсов largerc. Назначении классов ресурсов было выполнено с помощью sp_addrolemember.
•Нарушение хранилище данных обновляется управления рабочими нагрузками.
•Для протестировать новый синтаксис классификации, роли базы данных, DBARole (который DBAUser является членом), имеет классификатора, созданного для них сопоставление их с mediumrc и высоким уровнем важности.
•When DBAUser входит в систему и выполняет запрос, запрос будет назначаться largerc. Так как пользователь имеет приоритет над членство в роли.

Для упрощения устранения неполадок неправильной классификации, мы рекомендуем удалить сопоставления ролей класс ресурсов, при создании классификаторов рабочей нагрузки.  Приведенный ниже код возвращает существующий ресурс класса членства в роли.  Запустите [sp_droprolemember](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) имя каждого элемента, возвращаемый из соответствующего класса ресурсов.

```sql
SELECT  r.name AS [Resource Class]
,       m.name AS membername
FROM    sys.database_role_members rm
JOIN    sys.database_principals AS r ON rm.role_principal_id = r.principal_id
JOIN    sys.database_principals AS m ON rm.member_principal_id = m.principal_id
WHERE   r.name IN ('mediumrc','largerc','xlargerc','staticrc10','staticrc20','staticrc30','staticrc40','staticrc50','staticrc60','staticrc70','staticrc80');

--for each row returned run
sp_droprolemember ‘[Resource Class]’, membername
```

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о классификации рабочей нагрузки хранилища данных SQL и важность, см. в разделе [Создание рабочей нагрузки классификатора](quickstart-create-a-workload-classifier-tsql.md) и [важности хранилище данных SQL](sql-data-warehouse-workload-importance.md). См. в разделе [sys.dm_pdw_exec_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql) для просмотра запросов и уровень важности, назначенный.
