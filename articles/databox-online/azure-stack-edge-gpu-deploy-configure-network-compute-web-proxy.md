---
title: Руководство. Настройка параметров сети для устройства Azure Stack Edge Pro с GPU на портале Azure | Документация Майкрософт
description: Руководство по развертыванию Azure Stack Edge Pro с GPU поможет вам настроить параметры сети, сети вычислений и веб-прокси для физического устройства.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: tutorial
ms.date: 12/07/2020
ms.author: alkohli
Customer intent: As an IT admin, I need to understand how to connect and activate Azure Stack Edge Pro so I can use it to transfer data to Azure.
ms.openlocfilehash: 640098e118db87214d7364132a5119e35cb94c0a
ms.sourcegitcommit: 8b4b4e060c109a97d58e8f8df6f5d759f1ef12cf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2020
ms.locfileid: "96778722"
---
# <a name="tutorial-configure-network-for-azure-stack-edge-pro-with-gpu"></a>Руководство по настройке параметров сети для Azure Stack Edge Pro с GPU

В этом руководстве объясняется, как настроить сеть для устройства Azure Stack Edge Pro со встроенным GPU, используя локальный пользовательский веб-интерфейс.

Процесс подключения может занять около 20 минут.

В этом руководстве вы рассмотрите следующее:

> [!div class="checklist"]
>
> * Предварительные условия
> * настройка сети;
> * включение сети вычислений;
> * Настройка веб-прокси


## <a name="prerequisites"></a>Предварительные условия

Перед установкой и настройкой устройства Azure Stack Edge Pro с GPU проверьте следующие условия:

* Вы установили физическое устройство, как описано в статье [Установка Azure Stack Edge Pro](azure-stack-edge-gpu-deploy-install.md).
* Вы подключились к локальному пользовательскому веб-интерфейсу устройства, как описано в статье [Подключение к Azure Stack Edge Pro](azure-stack-edge-gpu-deploy-connect.md).


## <a name="configure-network"></a>Настройка сети

На странице **Начало работы** отображаются разные параметры, необходимые для настройки и регистрации физического устройства в службе Azure Stack Edge. 

Выполните описанные ниже действия, чтобы настроить сеть для устройства.

1. В локальном пользовательском веб-интерфейсе устройства откройте страницу **Начало работы**. 

2. На плитке **Сеть** выберите **Настроить**.  
    
    ![Плитка "Параметры сети" в локальном пользовательском веб-интерфейсе](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/network-1.png)

    На физическом устройстве доступно шесть сетевых интерфейсов. Порты 1 и 2 — это сетевые интерфейсы со скоростью 1 Гбит/с. Порты 3, 4, 5 и 6 — это сетевые интерфейсы со скоростью 25 Гбит/с, которые также могут работать со скоростью 10 Гбит/с. Порт 1 автоматически настроен только для управления, тогда как порты 2–6 являются портами данных. Для нового устройства страница **Параметры сети** выглядит примерно так:
    
    ![Страница "Параметры сети" в локальном веб-интерфейсе](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/network-2a.png)


   
3. Чтобы изменить параметры сети, выберите порт и в открывшейся области измените значения IP-адреса, подсети, шлюза, а также основного и дополнительного DNS-серверов. 

    - Если вы выбрали "Порт 1", он предварительно настраивается как статический. 

        !["Параметры сети", "Порт 1" в локальном пользовательском веб-интерфейсе](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/network-3.png)

    - Если вы выбрали "Порт 2", "Порт 3", "Порт 4" или "Порт 5", любой из них по умолчанию настраивается как порт DHCP.

        !["Параметры сети", "Порт 3" в локальном пользовательском веб-интерфейсе](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/network-4.png)

    При настройке параметров сети учитывайте следующее.

   * Если в среде включен DHCP, сетевые интерфейсы настраиваются автоматически. IP-адрес, подсеть, шлюз и DNS назначаются автоматически.
   * Если протокол DHCP не включен, при необходимости вы можете назначить статические IP-адреса.
   * Сетевой интерфейс можно настроить как IPv4.
   * В интерфейсах 25 Гбит/с можно указать для режима RDMA (память удаленного прямого доступа) значение iWarp или RoCE (RDMA по конвергентной сети Ethernet). Если вам важен низкий показатель задержки, а масштабируемость не имеет значения, используйте RoCE. Если в число основных требований входит не только малая задержка, но и простота использования и масштабируемость, более правильным вариантом будет iWARP.
   * Серийный номер для любого порта совпадает с серийным номером узла.

    После настройки сети для устройства эта страница обновится, как показано ниже.

    ![Страница "Параметры сети" в локальном веб-интерфейсе (2)](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/network-2.png)


     >[!NOTE]
     >
     > * Мы советуем не переключать локальный IP-адрес сетевого интерфейса со статического на DCHP при отсутствии другого IP-адреса для подключения к устройству. Если, используя один сетевой интерфейс, вы переключитесь на DHCP, вы не сможете определить адрес DHCP. Если вы хотите переключиться на адрес DHCP, дождитесь, пока устройство завершит подключение к службе, а затем измените адрес. Затем вы сможете просмотреть IP-адреса всех адаптеров в **свойствах устройства** на портале Azure для службы.


    Завершив настройку и применение параметров сети, щелкните "Далее: Вычислительная среда", чтобы настроить сеть вычислений.

## <a name="enable-compute-network"></a>Включение сети вычислений

Выполните описанные ниже действия, чтобы включить вычисление и настроить сеть вычислений. 

<!--1. Go to the **Get started** page in the local web UI of your device. On the **Network** tile, select **Compute network**.  

    ![Compute page in local UI 1](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/compute-network-1.png)-->

1. На странице **Вычисления** выберите сетевой интерфейс, который вы намерены использовать для вычислений. 

    ![Страницы "Вычисления" в локальном пользовательском веб-интерфейсе, часть 2](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/compute-network-2.png)

1. В диалоговом окне **Параметры сети** выберите элемент **Включить**. Когда вы включите вычисления, в выбранном сетевом интерфейсе устройства будет создан виртуальный коммутатор. Этот виртуальный коммутатор используется для инфраструктуры вычислений на устройстве. 
    
1. Присвойте **IP-адреса узлов Kubernetes**. Эти статические IP-адреса применяются для виртуальной машины вычислений.  

    На устройстве с *n* узлов для виртуальных машин вычисления необходимо предоставить непрерывный диапазон адресов IPv4 размером *n+1* или более, указав начальный и конечный IP-адреса этого диапазона. Так как Azure Stack Edge использует один узел, нужно предоставить не менее двух IPv4-адресов, расположенных рядом.

    > [!IMPORTANT]
    > Kubernetes в Azure Stack Edge использует подсеть 172.27.0.0/16 для группы pod и подсеть 172.28.0.0/16 для службы. Убедитесь, что они не используются в вашей сети. В противном случае эти подсети можно изменить, выполнив командлет `Set-HcsKubeClusterNetworkInfo` из интерфейса PowerShell устройства. См. раздел [Изменение подсетей для группы pod и службы Kubernetes](azure-stack-edge-gpu-connect-powershell-interface.md#change-kubernetes-pod-and-service-subnets).


1. Присвойте **IP-адреса внешних служб Kubernetes**. Они же используются как IP-адреса балансировки нагрузки. Этот непрерывный диапазон статических IP-адресов предназначен для служб, которые вы хотите предоставлять вне кластера Kubernetes, а их количество напрямую зависит от числа предоставляемых служб. 
    
    > [!IMPORTANT]
    > Мы настоятельно рекомендуем указать не менее одного IP-адреса для доступа к вычислительным модулям из службы концентратора Azure Stack Edge Pro. К нему вы можете по своему усмотрению добавить дополнительные IP-адреса для других служб или модулей IoT Edge (по одному адресу на каждую службу или модуль), к которым вам потребуется доступ извне кластера. Эти IP-адреса служб можно изменить позже. 
    
1. Нажмите кнопку **Применить**.

    ![Страница "Вычисления" в локальном пользовательском веб-интерфейсе, часть 3](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/compute-network-3.png)

1. Процесс применения конфигурации может занять несколько минут и, возможно, потребуется обновить страницу в браузере. Вы увидите, что указанный порт будет включен для вычислений. 
 
    ![Страница "Вычисления" в локальном пользовательском веб-интерфейсе, часть 4](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/compute-network-4.png)

    По завершении выберите **Next: Web proxy** (Далее: веб-прокси), чтобы настроить веб-прокси.  

  
## <a name="configure-web-proxy"></a>Настройка веб-прокси

Этот шаг настройки не является обязательным.

> [!IMPORTANT]
> * Если вы включили вычисления и используете на устройстве Azure Stack Edge Pro модуль IoT Edge, мы рекомендуем указать для параметра проверки подлинности веб-прокси значение **Нет**. NTLM не поддерживается.
>* Файлы автоматической настройки прокси-сервера (PAC-файлы) не поддерживаются. PAC-файл определяет, как веб-браузеры и другие агенты пользователей могут автоматически выбрать соответствующий прокси-сервер (метод доступа) для получения заданного URL-адреса. Прокси-серверы, пытающиеся перехватить и прочесть весь трафик (а затем повторно подписать все собственным сертификатом), не поддерживаются, так как сертификат прокси-сервера не является доверенным. Обычно прозрачные прокси-серверы без проблем работают с Azure Stack Edge Pro. Непрозрачные веб-прокси не поддерживаются.

<!--1. Go to the **Get started** page in the local web UI of your device.
2. On the **Network** tile, configure your web proxy server settings. Although web proxy configuration is optional, if you use a web proxy, you can configure it on this page only.

   ![Local web UI "Web proxy settings" page](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/web-proxy-1.png)-->

1. На странице **Параметры веб-прокси** выполните следующие действия:

    1. В поле **URL-адрес веб-прокси** введите URL-адрес в следующем формате: `http://host-IP address or FQDN:Port number`. URL-адреса HTTPS не поддерживаются.

    2. В поле **Проверка подлинности** выберите **Нет** или **NTLM**. Если вы включили вычисления и используете модуль IoT Edge на устройстве Azure Stack Edge Pro, мы рекомендуем задать для аутентификации веб-прокси значение **Нет**. **NTLM** не поддерживается.

    3. При прохождении аутентификации введите имя пользователя и пароль.

    4. Чтобы проверить и применить настроенные параметры веб-прокси, выберите **Применить**.
    
   ![Страница "Параметры веб-прокси" в локальном пользовательском веб-интерфейсе (2)](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/web-proxy-2.png)

2. Когда завершится применение параметров, щелкните **Next: Device** (Устройство IoT Workbench).


## <a name="next-steps"></a>Дальнейшие действия

Из этого учебника вы узнали, как выполнять такие задачи:

> [!div class="checklist"]
> * Предварительные условия
> * настройка сети;
> * включение сети вычислений;
> * Настройка веб-прокси


Чтобы узнать, как настроить устройство Azure Stack Edge Pro, перейдите к следующему руководству:

> [!div class="nextstepaction"]
> [Настройка параметров устройств](./azure-stack-edge-gpu-deploy-set-up-device-update-time.md)
