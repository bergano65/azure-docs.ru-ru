---
title: Установка обновления на устройстве Azure Stack с графическим процессором версии Pro | Документация Майкрософт
description: Описывает, как применять обновления с помощью портал Azure и локального веб-интерфейса для устройств с интерфейсом GPU для Azure Stack ребра и кластера Kubernetes на устройстве.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: how-to
ms.date: 12/11/2020
ms.author: alkohli
ms.openlocfilehash: 004c84387c51233542b1bbbf11d33cdff42259af
ms.sourcegitcommit: dfc4e6b57b2cb87dbcce5562945678e76d3ac7b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "97359155"
---
# <a name="update-your-azure-stack-edge-pro-gpu"></a>Обновление графического процессора Azure Stack ребра Pro 

В этой статье описываются шаги, необходимые для установки обновления на Azure Stack пограничной Pro с помощью GPU через локальный веб-интерфейс и с помощью портал Azure. Вы применяете обновления программного обеспечения или исправления, чтобы не обновлять устройство Azure Stack пограничной Pro и связанный с ним кластер Kubernetes на устройстве в актуальном состоянии. 

Процедура, описанная в этой статье, была выполнена с использованием другой версии программного обеспечения, но этот процесс остается прежним для текущей версии программного обеспечения.

> [!IMPORTANT]
> - Обновление **2012** — это текущее обновление, которое соответствует следующим параметрам:
>   - Версия программного обеспечения устройства — **2.2.1438.2470**
>   - Kubernetes Server Version- **v 1.17.3**
>   - Версия IoT Edge: **0.1.0-beta10**
>    
>    Сведения о новых возможностях этого обновления см. в [заметках о выпуске](azure-stack-edge-gpu-2012-release-notes.md).
> - Для применения обновления 2012 на устройстве должно выполняться 2010.
> - Помните, что при установке обновления или исправления происходит перезагрузка устройства. Это обновление содержит обновления программного обеспечения устройства и Kubernetes обновления. Учитывая, что Azure Stackная версия Pro является устройством с одним узлом, все выполняющиеся операции ввода-вывода прерывается, а на устройстве время простоя составляет до 1,5 часов для обновления.

Чтобы установить обновления на устройстве, сначала необходимо настроить расположение сервера обновлений. После настройки сервера обновлений можно применить обновления с помощью пользовательского интерфейса портал Azure или локального веб-интерфейса.

Каждое из этих действий описано в следующих разделах.

## <a name="configure-update-server"></a>Настройка сервера обновлений

1. В локальном веб-интерфейсе перейдите на страницу **Configuration**  >  **Update Server (Настройка сервера обновлений**). 
   
    ![Настройка обновлений 1](./media/azure-stack-edge-gpu-install-update/configure-update-server-1.png)

2. В поле **выберите тип сервера обновлений** в раскрывающемся списке выберите Центр обновления Майкрософт Server (по умолчанию) или Windows Server Update Services.  
   
    При обновлении с Windows Server Update Services укажите универсальный код ресурса (URI) сервера. Сервер с таким URI будет развертывать обновления на всех устройствах, подключенных к этому серверу.

    ![Настройка обновлений 2](./media/azure-stack-edge-gpu-install-update/configure-update-server-2.png)
    
    Сервер WSUS используется для управления обновлениями и их распространения через консоль управления. Сервер служб WSUS может также быть источником обновлений для других серверов WSUS в организации. Сервер WSUS, действующий как источник обновлений, называется вышестоящим сервером. В реализации служб WSUS хотя бы один сервер WSUS в сети должен иметь возможность подключаться к Центру обновления Майкрософт для получения информации о доступных обновлениях. Учитывая вопросы безопасности и конфигурации сети, администратор может самостоятельно определить количество дополнительных серверов, напрямую подключенных к Центру обновления Майкрософт.
    
    Дополнительные сведения см. по адресу [Windows Server Update Services (WSUS)](/windows-server/administration/windows-server-update-services/get-started/windows-server-update-services-wsus) .

## <a name="use-the-azure-portal"></a>Использование портала Azure

Рекомендуется устанавливать обновления с помощью портал Azure. Устройство автоматически сканируется на наличие обновлений раз в день. Когда обновления будут доступны, на портале отобразится уведомление. После этого обновления можно загрузить и установить. 

> [!NOTE]
> Убедитесь, что устройство работоспособно, а состояние отображается как **подключено** , прежде чем продолжать установку обновлений.

1. Когда обновления будут доступны для вашего устройства, вы увидите уведомление. Выберите уведомление или на верхней панели команд **Обновите устройство**. Это позволит применить обновления программного обеспечения устройства.

    ![Версия программного обеспечения после обновления](./media/azure-stack-edge-gpu-install-update/portal-update-1.png)

2. В колонке **обновления устройства** проверьте условия лицензии, связанные с новыми функциями в заметках о выпуске.

    Вы можете **загрузить и установить** обновления или просто **скачать** обновления. а затем установить позже.

    ![Версия программного обеспечения после обновления 2](./media/azure-stack-edge-gpu-install-update/portal-update-2a.png)    

    Если вы хотите загрузить и установить обновления, установите флажок автоматически обновлять установку после завершения загрузки.

    ![Версия программного обеспечения после обновления 3](./media/azure-stack-edge-gpu-install-update/portal-update-2b.png)

3. Начнется загрузка обновлений. Появится уведомление о том, что скачивание выполняется.

    ![Версия программного обеспечения после обновления 4](./media/azure-stack-edge-gpu-install-update/portal-update-3.png)

    Баннер уведомления также отображается в портал Azure. Это указывает на ход выполнения загрузки. 

    ![Версия программного обеспечения после обновления 5](./media/azure-stack-edge-gpu-install-update/portal-update-4.png)

    Чтобы просмотреть подробное состояние обновления, можно выбрать это уведомление или **обновить устройство** .

    ![Версия программного обеспечения после обновления 6](./media/azure-stack-edge-gpu-install-update/portal-update-5.png)   


4. По завершении загрузки баннер уведомления обновится и сообщит о завершении. Если вы решили загрузить и установить обновления, установка начнется автоматически.

    ![Версия программного обеспечения после обновления 7](./media/azure-stack-edge-gpu-install-update/portal-update-6.png)

    Если выбрана загрузка только обновлений, выберите уведомление, чтобы открыть колонку **обновления устройства** . Выберите пункт **Установить**.
  
    ![Версия программного обеспечения после обновления 8](./media/azure-stack-edge-gpu-install-update/portal-update-7.png)

5. Появится уведомление о том, что выполняется установка. 

    ![Версия программного обеспечения после обновления 9](./media/azure-stack-edge-gpu-install-update/portal-update-8.png)
 
    На портале также отображается информационное оповещение, указывающее на то, что установка выполняется. Устройство переходит в режим «вне сети» и находится в режиме обслуживания.
   
    ![Версия программного обеспечения после обновления 10](./media/azure-stack-edge-gpu-install-update/portal-update-9.png)

6. Так как это устройство с 1 узлом, устройство перезапускается после установки обновлений. Критическое оповещение во время перезапуска указывает на то, что пульс устройства потерян.

    ![Версия программного обеспечения после обновления 11](./media/azure-stack-edge-gpu-install-update/portal-update-10.png)

    Выберите оповещение, чтобы просмотреть соответствующее событие устройства.
    
    ![Версия программного обеспечения после обновления 12](./media/azure-stack-edge-gpu-install-update/portal-update-11.png)


7. После перезагрузки устройство снова помещается в режим обслуживания, и отображается информационное оповещение о том, что.

    Если выбрать **устройство обновления** на верхней панели команд, можно увидеть ход выполнения обновлений.   

8. После установки обновлений состояние устройства изменится на "в **сети** ". 

    ![Версия программного обеспечения после обновления 13](./media/azure-stack-edge-gpu-install-update/portal-update-14.png)

    На верхней панели команд выберите **обновления устройства**. Убедитесь, что обновление успешно установлено, а версия программного обеспечения устройства отражает это.

    ![Версия программного обеспечения после обновления 14](./media/azure-stack-edge-gpu-install-update/portal-update-15.png)

<!--9. You will again see a notification that updates are available. These are the Kubernetes updates. Select the notification or select **Update device** from the top command bar.

    ![Software version after update 15](./media/azure-stack-edge-gpu-install-update/portal-update-16.png)

10. Download the Kubernetes updates. You can see that the package size is different when compared to the previous update package.

    ![Software version after update 16](./media/azure-stack-edge-gpu-install-update/portal-update-17.png)

    The process of installation is identical to that of device updates. First the updates are downloaded.

    ![Software version after update 17](./media/azure-stack-edge-gpu-install-update/portal-update-18.png)    
    
11. Once the updates are downloaded, you can then install the updates. 

    ![Software version after update 18](./media/azure-stack-edge-gpu-install-update/portal-update-19.png)

    As the updates are installed, the device is put into maintenance mode. The device does not restart for the Kubernetes updates. -->

После успешной установки программного обеспечения устройства и обновления Kubernetes уведомление исчезает. На вашем устройстве теперь установлена последняя версия программного обеспечения устройства и Kubernetes.


## <a name="use-the-local-web-ui"></a>Использование локального веб-интерфейса

При использовании локального веб-интерфейса установка обновлений включает два этапа:

* Загрузка обновления или исправления
* Установка обновления или исправления

В следующих разделах каждый этап рассматривается более подробно.


### <a name="download-the-update-or-the-hotfix"></a>Загрузка обновления или исправления

Чтобы скачать обновление, выполните следующие действия. Обновление можно загрузить из расположения или каталога Центр обновления Майкрософт, предоставляемого корпорацией Майкрософт.


Чтобы скачать обновление из каталога Центр обновления Майкрософт, выполните следующие действия.

1. Запустите браузер и перейдите по адресу [https://catalog.update.microsoft.com](https://catalog.update.microsoft.com) .

    ![Поиск в каталоге](./media/azure-stack-edge-gpu-install-update/download-update-1.png)

2. В поле поиска каталога Центр обновления Майкрософт введите номер исправления или условия для обновления, которое вы хотите скачать, в базе знаний Майкрософт (KB). Например, введите **Azure Stack ребра Pro** и нажмите кнопку **Поиск**.
   
    Список обновлений отображается как **Azure Stack обновление 2012**.
   
    <!--![Search catalog 2](./media/azure-stack-edge-gpu-install-update/download-update-2b.png)-->

4. Щелкните **Скачать**. Существует два файла для загрузки с *SoftwareUpdatePackage.exe* и *Kubernetes_Package.exe* суффиксы, соответствующие обновлениям программного обеспечения устройства и обновлениям Kubernetes соответственно. Скачайте файлы в папку в локальной системе. Эту папку также можно скопировать в сетевую папку, доступную с вашего устройства.

### <a name="install-the-update-or-the-hotfix"></a>Установка обновления или исправления

Перед обновлением или установкой исправлений убедитесь, что:

 - Обновление или исправление скачано локально на вашем узле или доступно в сетевой папке.
 - Состояние устройства — работоспособное, как показано на странице **Обзор** локального веб-интерфейса.

   ![обновление устройства](./media/azure-stack-edge-gpu-install-update/local-ui-update-1.png) 

Выполнение этой процедуры займет около 20 минут. Для установки обновления или исправления выполните следующие действия.

1. В локальном веб-интерфейсе перейдите в раздел **обслуживание**  >  **Обновление программного обеспечения**. Запишите версию программного обеспечения, которое выполняется в вашей системе. 
   
   ![Обновление устройства 2](./media/azure-stack-edge-gpu-install-update/local-ui-update-2.png)

2. Укажите путь к файлу обновления. Можно также перейти к файлу установки обновления, если он размещен в общей сетевой папке. Выберите файл обновления программного обеспечения с суффиксом *SoftwareUpdatePackage.exe* .

   ![Обновление устройства 3](./media/azure-stack-edge-gpu-install-update/local-ui-update-3a.png)

3. Нажмите кнопку **Применить**. 

   ![Обновление устройства 4](./media/azure-stack-edge-gpu-install-update/local-ui-update-4.png)

4. При появлении запроса на подтверждение выберите **Да** для продолжения. Если устройство является устройством с одним узлом, после применения обновления устройство перезапускается и происходит простоя. 
   
   ![Обновление устройства 5](./media/azure-stack-edge-gpu-install-update/local-ui-update-5.png)

5. Начнется обновление. После успешного обновления устройство перезапускается. В течение этого времени локальный пользовательский интерфейс недоступен.
   
6. После перезапуска открывается страница **входа** . Чтобы убедиться, что программное обеспечение устройства Обновлено, в локальном веб-интерфейсе перейдите в раздел **обслуживание**  >  **Обновление программного обеспечения**. Для текущего выпуска отображаемая версия программного обеспечения должна быть **Azure Stack границе 2012**.

   <!--![update device 6](./media/azure-stack-edge-gpu-install-update/local-ui-update-6.png)--> 

7. Теперь вы обновите версию программного обеспечения Kubernetes. Повторите описанные выше действия. Укажите путь к файлу обновления Kubernetes с помощью суффикса *Kubernetes_Package.exe* .  

   <!--![update device](./media/azure-stack-edge-gpu-install-update/local-ui-update-7.png)--> 

8. Нажмите кнопку **Применить**. 

   ![Обновление устройства 7](./media/azure-stack-edge-gpu-install-update/local-ui-update-8.png)

9. При появлении запроса на подтверждение выберите **Да** для продолжения. 

10. После успешной установки обновления Kubernetes не будет внесено никаких изменений в отображаемое программное обеспечение в  >  **средстве обслуживания обновление программного обеспечения**. 


## <a name="next-steps"></a>Дальнейшие действия

Узнайте больше об [администрировании Azure Stack пограничных Pro](azure-stack-edge-manage-access-power-connectivity-mode.md).