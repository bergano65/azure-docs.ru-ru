---
title: Вызов API текстовой аналитики
titlesuffix: Azure Cognitive Services
description: Сведения о вызове REST API службы "Анализ текста".
services: cognitive-services
author: ashmaka
manager: cgronlun
ms.service: cognitive-services
ms.component: text-analytics
ms.topic: conceptual
ms.date: 10/01/2018
ms.author: ashmaka
ms.openlocfilehash: a70ef893019264ffc0eb3cb2982b05b15ebd0acf
ms.sourcegitcommit: 55952b90dc3935a8ea8baeaae9692dbb9bedb47f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2018
ms.locfileid: "48884374"
---
# <a name="how-to-call-the-text-analytics-rest-api"></a>Как вызвать REST API службы "Анализ текста"

К **API анализа текста** отправляются вызовы HTTP POST или GET, которые можно сформулировать на любом языке. В этой статье для демонстрации основных концепций используется REST и [Postman](https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop).

Каждый запрос должен содержать ключ доступа и конечную точку HTTP. Конечная точка определяет регион, который вы выбираете во время регистрации, URL-адрес службы и ресурс, используемый в запросе: `sentiment`, `keyphrases`, `languages` и `entities`. 

Напомним, что служба "Анализ текста" не учитывает состояние, поэтому ресурсы данных, которыми необходимо управлять, отсутствуют. Текст будет отправлен и проанализирован после получения, а результаты немедленно будут возвращены в вызывающее приложение.

> [!Tip]
> Чтобы увидеть, как работает API, вы можете отправить одноразовые запросы POST из встроенной **консоли тестирования API**, доступной на любой [странице документации по API](https://westus.dev.cognitive.microsoft.com/docs/services/TextAnalytics.V2.0/operations/56f30ceeeda5650db055a3c6). Никаких настроек выполнять не нужно. Единственные требования — вставить ключ доступа и документы JSON в запрос. 

## <a name="prerequisites"></a>Предварительные требования

Необходимо иметь [учетную запись API Cognitive Services](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account) с **API анализа текста**. 

Вам необходима [конечная точка и ключ доступа](text-analytics-how-to-access-key.md), который автоматически создается при регистрации в Cognitive Services. 

<a name="json-schema"></a>

## <a name="json-schema-definition"></a>Определение схемы JSON

Входные данные должны быть в виде необработанного неструктурированного текста в формате JSON. XML не поддерживается. Схема проста и состоит из элементов, описанных в приведенном ниже списке. 

В настоящее время можно отправить те же документы для всех операций службы "Анализ текста": определение тональности, ключевых фраз, распознавание языка и идентификация сущности. (Схема может отличаться для каждого будущего анализа.)

| Элемент | Допустимые значения | Обязательный? | Использование |
|---------|--------------|-----------|-------|
|`id` |Типом данных выступает строка, однако обычно идентификаторы документов являются целыми числами. | Обязательно | Система использует предоставленные идентификаторы, чтобы структурировать выходные данные. Коды языков, ключевые фразы и оценка тональности создаются для каждого идентификатора в запросе.|
|`text` | Неструктурированный необработанный текст, содержащий не более 5000 символов. | Обязательно | Для распознавания языка текст может быть выражен на любом языке. Для анализа тональности, извлечения ключевых фраз и идентификации сущности текст должен быть на [поддерживаемом языке](../text-analytics-supported-languages.md). |
|`language` | Двухзначный код [ISO 639-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) для [поддерживаемого языка](../text-analytics-supported-languages.md). | Varies | Требуется для анализа тональности, извлечения ключевых фраз и связывания сущностей. Необязательно для распознавания языка. Код можно исключить, и это не будет ошибкой, однако без него анализ будет менее точным. Код языка должен соответствовать предоставленному вами элементу `text`. |

Дополнительные сведения см. в разделе [Ограничения данных](../overview.md#data-limits). 

## <a name="set-up-a-request-in-postman"></a>Настройка запроса в Postman

Служба принимает запрос размером до 1 МБ. Если вы используете Postman (или другой инструмент тестирования для веб-API), настройте конечную точку так, чтобы она содержала нужный ресурс, и предоставьте ключ доступа в заголовке запроса. Каждая операция требует, чтобы вы добавляли соответствующий ресурс в конечную точку. 

1. В Postman:

   + выберите **Post** в качестве типа запроса;
   + вставьте конечную точку, скопированную со страницы портала;
   + добавьте ресурс.

  Конечные точки ресурсов имеют такой вид (ваш регион может отличаться):

   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.0/sentiment`
   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.0/keyPhrases`
   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.0/languages`
   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.1-preview/entities`

2. Задайте три заголовка запроса:

   + `Ocp-Apim-Subscription-Key` — ключ доступа, полученный с портала Azure;
   + `Content-Type` — приложение/JSON;
   + `Accept` — приложение/JSON.

  При использовании ресурса **/keyPhrases** запрос должен выглядеть, как на следующем снимке экрана.

   ![Снимок экрана запроса с конечной точкой и заголовками](../media/postman-request-keyphrase-1.png)

4. Щелкните **Текст** и выберите **Без форматирования** для формата.

   ![Снимок экрана запроса с параметрами текста](../media/postman-request-body-raw.png)

5. Вставьте несколько документов JSON в формате, который допустим для предполагаемого анализа. Дополнительные сведения о конкретном анализе см. в статьях ниже:

  + [Пример. Как определить язык с помощью Анализа текста](text-analytics-how-to-language-detection.md)  
  + [Пример. Как извлечь ключевые фразы с помощью Анализа текста](text-analytics-how-to-keyword-extraction.md)  
  + [Пример. Как определить тональность с помощью Анализа текста](text-analytics-how-to-sentiment-analysis.md)  
  + [Обнаружение связанных сущностей в службе "Анализ текста" (предварительная версия)](text-analytics-how-to-entity-linking.md)  


6. Щелкните **Отправить**, чтобы отправить запрос. Вы можете отправлять до 100 запросов в минуту. 

  В Postman ответ отображается в следующем расположенном ниже окне как один документ JSON с элементом для каждого идентификатора документа, предоставленного в запросе.

## <a name="see-also"></a>См. также 

 [Что такое API анализа текста версии 2.0?](../overview.md)  
 [Часто задаваемые вопросы](../text-analytics-resource-faq.md)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Пример. Как определить язык с помощью Анализа текста](text-analytics-how-to-language-detection.md)
