---
title: Макеты — распознаватель форм
titleSuffix: Azure Cognitive Services
description: Изучите основные понятия, связанные с анализом макета, с помощью API-интерфейса распознавателя форм и ограничений.
services: cognitive-services
author: PatrickFarley
manager: nitinme
ms.service: cognitive-services
ms.subservice: forms-recognizer
ms.topic: conceptual
ms.date: 11/18/2020
ms.author: pafarley
ms.openlocfilehash: 60ef490bbba4dca4f01b82967ad6ea8636e7bd4e
ms.sourcegitcommit: 9eda79ea41c60d58a4ceab63d424d6866b38b82d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2020
ms.locfileid: "96353703"
---
# <a name="form-recognizer-layout-service"></a>Служба макета распознавателя форм

Средство распознавания форм Azure может извлекать текст, таблицы, метки выделения и сведения о структуре из документов с помощью службы макета. API макета позволяет клиентам брать документы в различных форматах и возвращать структурированные данные и представление документа. Он сочетает в себе мощные возможности оптического [распознавания символов (OCR)](../computer-vision/concept-recognizing-text.md) с описанием моделей глубокого обучения для извлечения текста, таблиц, меток выделения и структуры документов. 

## <a name="what-does-the-layout-service-do"></a>Что делает служба макета?

API макета извлекает текст, таблицы, метки выделения и сведения о структуре из документов с высокой точностью и возвращает их в организованном структурированном ответе JSON. Документы могут быть из различных форматов и качества, включая образы, полученные от телефона, отсканированные документы и Цифровые PDF-файлы. API макета будет извлекать структурированные выходные данные из всех этих документов.

![Пример макета](./media/layout-tool-example.JPG)

## <a name="try-it-out"></a>Попробуйте сейчас

Чтобы испытать службу макета распознавателя форм, перейдите к средству "пример пользовательского интерфейса" в Интернете:

> [!div class="nextstepaction"]
> [Пример пользовательского интерфейса](https://fott-preview.azurewebsites.net/)

Вам потребуется подписка Azure ([создайте ее бесплатно](https://azure.microsoft.com/free/cognitive-services)) и конечную точку [ресурса распознавателя](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesFormRecognizer) форм и ключ, чтобы испытать API макета распознавателя форм. 

![Снимок экрана примера пользовательского интерфейса; текст, таблицы и метки выделения документа анализируются](./media/analyze-layout.png)

### <a name="input-requirements"></a>Требования к входным данным 

[!INCLUDE [input requirements](./includes/input-requirements-receipts.md)]

## <a name="the-analyze-layout-operation"></a>Операция анализа макета

Операция [анализа макета](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-2/operations/AnalyzeLayoutAsync) принимает документ (изображение, файл TIFF или PDF) в качестве входных данных и извлекает текст, таблицы, метки выделения и структуру документа. Вызов возвращает поле заголовка ответа с именем `Operation-Location` . `Operation-Location`Значение — это URL-адрес, СОДЕРЖАЩИЙ идентификатор результата, который будет использоваться на следующем шаге.

|Заголовок ответа| URL-адрес результата |
|:-----|:----|
|Operation-Location | `https://cognitiveservice/formrecognizer/v2.1-preview.2/prebuilt/layout/analyzeResults/44a436324-fc4b-4387-aa06-090cfbf0064f` |

## <a name="the-get-analyze-layout-result-operation"></a>Операция получения результата макета анализа

Второй шаг — вызов операции [получения результата формирования макета](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-2/operations/GetAnalyzeLayoutResult) . Эта операция принимает в качестве входных данных идентификатор результата, созданный операцией анализа макета. Он возвращает ответ JSON, содержащий поле **состояния** со следующими возможными значениями. 

|Поле| Тип | Возможные значения |
|:-----|:----:|:----|
|status | строка | `notStarted`: Операция анализа не началась.<br /><br />`running`: Выполняется операция анализа.<br /><br />`failed`: Произошел сбой операции анализа.<br /><br />`succeeded`: Операция анализа успешно выполнена.|

Эту операцию можно вызвать итеративно, пока она не вернет со `succeeded` значением. Используйте интервал от 3 до 5 секунд, чтобы избежать превышения скорости запросов в секунду (RPS).

Если поле **Status** имеет `succeeded` значение, ответ JSON будет содержать извлеченные результаты извлечения макета, текст, таблицы и метки выделения. Извлеченные данные содержат извлеченные текстовые строки и слова, ограничивающие прямоугольники, рукописные указания, таблицы и метки выделения текста с указанием выбранного/невыделенного текста. 

### <a name="sample-json-output"></a>Пример выходных данных JSON

Ответ на операцию получения результатов макета анализа будет структурированным представлением документа со всеми извлеченными сведениями. См. [Пример файла документа](https://github.com/Azure-Samples/cognitive-services-REST-api-samples/tree/master/curl/form-recognizer/sample-layout.pdf) и [выходные данные макета образца](https://github.com/Azure-Samples/cognitive-services-REST-api-samples/tree/master/curl/form-recognizer/sample-layout-output.json)вывода с структурированным выводом.

Выходные данные JSON имеют две части: 
* `"readResults"` узел содержит все распознанный текст и метки выделения. Текст упорядочивается по страницам, затем по строкам, а затем по отдельным словам. 
* `"pageResults"` узел содержит таблицы и ячейки, извлеченные вместе с их ограничивающими полями, достоверность и ссылка на строки и слова в "Реадресултс".

## <a name="example-output"></a>Пример выходных данных

### <a name="text"></a>Текст

Макет извлекает текст из документов (PDF, TIFF) и изображений (JPG, PNG, BMP) с различными угловыми углами, цветами, углами, фотографиями документов, факсами, печатью, рукописным (только на английском языке) и смешанными режимами. Текст извлекается со сведениями о строках, словах, ограничивающих прямоугольниках, показателях достоверности и стилем (написанном или другом). Вся текстовая информация включена в `"readResults"` раздел выходных данных JSON. 

### <a name="tables"></a>Таблицы

Макет извлекает таблицы из документов (PDF, TIFF) и изображений (JPG, PNG, BMP). Документы можно сканировать, использовать в фотографике или расставлять цифры. Таблицы могут быть сложными таблицами с объединенными ячейками или столбцами, с границами или без них, а также с нечетными углами. Извлеченные таблицы включают число столбцов и строк, диапазон строк и диапазон столбцов. Каждая ячейка извлекается вместе с ограничивающим прямоугольником и ссылкой на текст, извлеченный в `"readResults"` разделе. Сведения о таблице находятся в `"pageResults"` разделе выходных данных JSON. 

![Пример таблиц](./media/tables-example.jpg)

### <a name="selection-marks"></a>Метки выделения

Макет также извлекает метки выделения из документов. Извлеченные метки выделения включают ограничивающий прямоугольник, достоверность и состояние (выбрано/не выбрано). Сведения о метке выделения извлекаются в `"readResults"` разделе выходных данных JSON. 

## <a name="next-steps"></a>Дальнейшие действия

- Попробуйте выполнить собственный выбор макета с помощью [примера пользовательского интерфейса распознавателя форм](https://fott-preview.azurewebsites.net/) .
- Заполните [Краткое руководство по использованию клиентской библиотеки распознавателя форм](quickstarts/client-library.md) , чтобы начать извлекать макеты на любом языке.
- Или воспользуйтесь кратким руководством по [извлечению данных макета](./QuickStarts/python-layout.md) , чтобы реализовать извлечение данных макета с помощью Python и REST API.

## <a name="see-also"></a>См. также

* [Что такое Распознаватель документов?](./overview.md)
* [Справочная документация по REST API](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-2/operations/AnalyzeLayoutAsync)