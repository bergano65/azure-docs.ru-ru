---
title: Использование обратного вызова обнаружения сущности в модели Conversation Learner Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Сведения о том, как использовать обратный вызов обнаружения сущности в модели Conversation Learner.
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.component: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: a96cfcb07252dc4a9089eab2decaec9efb01a67b
ms.sourcegitcommit: 3ab534773c4decd755c1e433b89a15f7634e088a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2019
ms.locfileid: "54065001"
---
# <a name="how-to-use-entity-detection-callback"></a>Как использовать обратный вызов обнаружения сущностей

В этом руководстве объясняются обратный вызов обнаружения сущностей и стандартный метод сопоставления сущностей.

## <a name="video"></a>Видео

[![Предварительная версия учебника для обратного вызова обнаружения сущности](https://aka.ms/cl_Tutorial_v3_EntityDetection_Preview)](https://aka.ms/cl_Tutorial_v3_EntityDetection)

## <a name="requirements"></a>Требования
Для работы с этим руководством требуется запущенный бот `tutorialEntityDetectionCallback`.

    npm run tutorial-entity-detection

## <a name="details"></a>Сведения
Обратные вызовы обнаружения сущностей позволяют изменить поведение распознавания сущностей и управление сущностями с помощью кода. Мы продемонстрируем эту функцию путем разбора типичного шаблона обратного вызова обнаружения сущности. Например, мы можем разрешить "Большое яблоко" в "Нью-Йорк".

## <a name="steps"></a>Действия

### <a name="create-the-model"></a>Создание модели

1. В пользовательском веб-интерфейсе щелкните "Создать модель".
2. В поле "Имя" введите EntityDetectionCallback и нажмите клавишу ВВОД.
3. Нажмите кнопку "Создать".

В этом примере требуются три сущности, поэтому давайте создадим все три.

### <a name="create-the-custom-trained-entity"></a>Создание настраиваемой обучаемой сущности

1. На левой панели щелкните "Сущности", а затем нажмите кнопку "Создать сущность".
2. Выберите "Пользовательская обучаемая" в поле "Тип сущности".
3. В поле "Имя сущности" укажите City (Город).
4. Нажмите кнопку "Создать".

### <a name="create-the-first-programmatic-entity"></a>Создание первой программной сущности

1. Нажмите кнопку "Создать сущность".
2. Выберите "Программная" в поле "Тип сущности".
3. В поле "Имя сущности" укажите CityUnknown.
4. Нажмите кнопку "Создать".

### <a name="create-the-first-programmatic-entity"></a>Создание первой программной сущности

1. Нажмите кнопку "Создать сущность".
2. Выберите "Программная" в поле "Тип сущности".
3. В поле "Имя сущности" укажите CityResolved.
4. Нажмите кнопку "Создать".

Теперь создадим три действия.

### <a name="action-creation"></a>Создание действия

1. На левой панели щелкните "Действия", а затем нажмите кнопку "Создать действие".
2. В поле "Ответ бота..." введите Which city do you want? (Какой город вам нужен?).
3. В поле "Ожидаемая сущность в ответе пользователя..." введите City (Город).
4. В поле "Запрещенные сущности" введите City (Город).
5. Нажмите кнопку "Создать".
6. Нажмите кнопку "Создать действие".
7. В поле "Ответ бота..." введите Which city do you want? (Какой город вам нужен?).
8. В поле "Ожидаемая сущность в ответе пользователя..." введите I don't know this city (Я не знаю этого города).
9. Нажмите кнопку "Создать".
10. Нажмите кнопку "Создать действие".
11. В поле "Ответ бота..." введите $CityResolved is very nice ($CityResolved — очень хороший город).
12. Нажмите кнопку "Создать".

Ниже приведен код обратного вызова.

![](../media/tutorial10_callbackcode.PNG)

### <a name="train-the-model"></a>Обучение модели

1. На левой панели щелкните "Обучающие диалоги" и нажмите кнопку "Создать обучающий диалог".
2. На панели чата, на которой отображается надпись "Введите текст сообщения...", введите hi (привет).
3. Нажмите кнопку "Оценить действия".
4. Выберите ответ Which city do you want? (Какой город вам нужен?).
5. На панели чата, на которой отображается надпись "Введите текст сообщения...", введите текст big apple (Большое яблоко).
6. Нажмите кнопку "Оценить действия".
    - При нажатии кнопки выполняется обратный вызов обнаружения сущностей.
    - Код обратного вызова устанавливает правильное значение сущности CityResolved: new york (Нью-Йорк).
7. Выберите ответ new york is very nice (Нью-Йорк — очень хороший город).

Этот шаблон является типичным для многих сценариев ботов. Высказывания пользователей и извлеченные сущности передаются бизнес-логике, которая преобразует высказывания в каноническую форму. Эта форма затем сохраняется в программных сущностях для последующих изменений хода диалога.

![](../media/tutorial10_bigapple.PNG)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Обратные вызовы сеансов](./13-session-callbacks.md)
