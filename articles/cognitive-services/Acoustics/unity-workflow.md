---
title: Руководство по разработке Project Acoustics в Unity
titlesuffix: Azure Cognitive Services
description: В этом руководстве описывается рабочий процесс разработки Project Acoustics в Unity.
services: cognitive-services
author: kegodin
manager: nitinme
ms.service: cognitive-services
ms.subservice: acoustics
ms.topic: tutorial
ms.date: 03/14/2019
ms.author: kegodin
ms.openlocfilehash: 7f079c511a32cfcf0fa018d40abb737ad08f3821
ms.sourcegitcommit: f68b0e128f0478444740172f54e92b453df696be
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2019
ms.locfileid: "58138013"
---
# <a name="project-acoustics-unity-design-tutorial"></a>Руководство по разработке Project Acoustics в Unity
В этом руководстве описывается рабочий процесс и инструменты для разработки Project Acoustics в Unity.

Предварительные требования:
* Unity 2018.2+ для Windows;
* сцена Unity с ресурсом акустического моделирования.

В этом руководстве описано два способа получить сцену Unity с ресурсом акустического моделирования.
* [Добавьте Project Acoustics в проект Unity](unity-integration.md), затем [получите учетную запись пакетной службы Azure](create-azure-account.md), после чего [смоделируйте сцену Unity](unity-baking.md).
* Используйте [содержимое образца Project Acoustics Unity](unity-quickstart.md).

## <a name="review-design-process-concepts"></a>Проверка основных принципов процесса разработки
Project Acoustics использует общие методы обработки цифрового сигнала (DSP) аудио для обработки источников, а также позволяет вам управлять известными свойствами акустики, включая поглощение, смешивание влажности или сухости и длину реверберации (TR60). Но основная [концепция процесса разработки Project Acoustics](design-process.md) заключается в том, что вместо установки этих свойств напрямую, вы управляете оптимизацией этих свойств с помощью результатов симуляции. Параметры по умолчанию для каждого элемента управления представляют собой физически точную акустику.

## <a name="design-acoustics-for-each-source"></a>Проектирование акустики для каждого источника
Project Acoustics предоставляет ряд элементов управления проектированием акустики в зависимости от источника. Это дает возможность контролировать совокупность эффектов на сцене, делая некоторые источники более выразительными, а некоторые — менее выразительными.

### <a name="adjust-distance-based-attenuation"></a>Корректирование затухания на основе расстояния
DSP аудио, предоставляемое подключаемым модулем пространственного звука Unity в **Project Acoustics**, учитывает затухание, связанное с расстоянием к источнику, встроенное в Unity Editor. Элементы управления затуханием, связанным с расстоянием, находятся в компоненте **Audio Source** (Источник звука), который можно найти на панели источников звуков **Inspector** в разделе **3D Sound Settings** (Параметры 3D-звуков):

![Затухания на основе расстояния](media/distance-attenuation.png)

Acoustics выполняет вычисления в области моделирования, размещенной вокруг расположения игрока. Если источник звука удален от игрока, расположенного за пределами этой области моделирования, только геометрия в этой области будет влиять на распространение звука (например, вызывать окклюзию), которое работает достаточно хорошо, когда объекты, вызывающие окклюзию, находятся поблизости от игрока. Однако в случаях, когда игрок находится в открытом пространстве, но объекты, вызывающие окклюзию, находятся вблизи отдаленного источника звука, звук может стать нереалистичным (без окклюзии). В таких случаях рекомендуется уменьшить ослабление звука до 0 при расстоянии в 45 м (это стандартное горизонтальное расстояние от игрока до края области).

![SpeakerMode](media/speaker-mode.png)

### <a name="adjust-occlusion-and-transmission"></a>Корректировка окклюзии и передачи данных
Прикрепление скрипта **AcousticsAdjust** к источнику позволяет настроить параметры для этого источника. Чтобы прикрепить скрипт, щелкните **Add Component** (Добавить компонент) в нижней части панели **Inspector** и выберите **Scripts > Acoustics Adjust** (Скрипты > Настройка звука). В скрипте есть шесть элементов управления:

![AcousticsAdjust](media/acoustics-adjust.png)

* **Enable Acoustics** (Включить акустику). Контролирует, применяется ли акустика к этому источнику. Если флажок снят, источник будет проектироваться с помощью функций HRTF или прокрутки, но акустики не будет. Это означает отсутствие препятствия, окклюзии или таких параметров реверберации динамиков, как уровень и время затухания. Реверберация по-прежнему применяется с фиксированным уровнем измерения и временем затухания.
* **Occlusion** (Окклюзия). Применяет множитель к уровню окклюзии в дБ, вычисленному акустической системой. Если этот множитель больше 1, окклюзия будет преувеличена, при значении меньше 1 эффект окклюзии будет более слабым, а значение 0 отключает окклюзию.
* **Transmission (dB)** (Передача (дБ)). Устанавливает ослабление (в дБ), вызванное передачей звука через геометрию помещения. Установите этот слайдер на самый низкий уровень, чтобы отключить передачу. Acoustics пространственно распределяет исходный "сухой" звук по мере приближения к геометрии сцены (прохождение). Передача обеспечивает дополнительное "сухое" перемещение, которое проецируется в направлении прямой видимости. Обратите внимание, что также применяется кривая ослабления с увеличением расстояния от источника.

### <a name="adjust-reverberation"></a>Корректировка реверберации
* **Wetness (dB)** (Влажность (дБ)). Регулирует силу реверберации (в дБ) в зависимости от расстояния до источника. Положительные значения делают звук более реверберирующим, а отрицательные — более сухим. Щелкните элемент управления кривой (зеленая линия), чтобы открыть редактор кривой. Измените кривую, щелкнув левой кнопкой мыши, чтобы добавить точки, и перетащите эти точки для получения нужного эффекта. Ось X — это расстояние от источника, а ось Y — значение реверберации в дБ. Дополнительные сведения об изменении кривых см. в руководстве Unity [здесь](https://docs.unity3d.com/Manual/EditingCurves.html). Чтобы сбросить кривую до значений по умолчанию, щелкните правой кнопкой мыши **Wetness** (Влажность) и выберите **Reset** (Сбросить).
* **Decay Time Scale** (Шкала времени затухания). Регулирует множитель для времени затухания. Например, если результат создания определяет время затухания 750 мс, но значение этой шкалы равно 1,5, время затухания, применяемое к источнику, составляет 1,125 мс.
* **Outdoorness** (Открытое пространство). Дополнительная корректировка для оценки того, как акустическая система должна обрабатывать источник звука, чтобы имитировать наружную среду. Значение "1" приведет к тому, что источник всегда будет полностью звучать как на открытом воздухе, а при значении "–1" он будет звучать как в помещении.

Прикрепление скрипта **AcousticsAdjustExperimental** к источнику позволяет настроить дополнительные экспериментальные параметры для этого источника. Чтобы прикрепить скрипт, щелкните **Add Component** (Добавить компонент) в нижней части панели **Inspector** и выберите **Scripts > Acoustics Adjust Experimental** (Скрипты > Настройка экспериментальных параметров). В настоящее время имеется один экспериментальный элемент управления:

![AcousticsAdjustExperimental](media/acoustics-adjust-experimental.png)

* **Perceptual Distance Warp** (Ощущаемое искажение расстояния). Позволяет применить экспоненциальное искажение к расстоянию, используемое для вычисления коэффициента "сухого" и "влажного" звука. Акустическая система вычисляет уровни влажности во всем пространстве, которые плавно изменяются с расстоянием и обеспечивают признаки удаленности расстояния. Подкрутка значения больше чем на 1 увеличит этот эффект, увеличивая уровни реверберации, делая звук "удаленным". Скручивание значения меньше 1 делает изменение реверберации на основе расстояния менее заметным, звук будет более "близким".

## <a name="design-acoustics-for-all-sources"></a>Проектирование акустики для всех источников
Чтобы отрегулировать параметры для всех источников, щелкните полосу канала **Audio Mixer** (Аудиомикшер) в Unity и настройте параметры эффекта в **Project Acoustics Mixer**.

![Настройка микшера](media/mixer-parameters.png)

* **Wetness Adjust**. Корректирует мощность реверберации в базе данных во всех источниках на сцене, основываясь на расстоянии слушателя-источника. Положительные значения делают звук более реверберирующим, а отрицательные — более сухим.
* **Масштаб RT60**. Скаляр для умножения время реверберации.
* **Использование прокрутки**. Определяет аудиовыход как стереофоническую (0) или многоканальную прокрутку (1). Любое значение, отличное от 1, обозначает стереофонический аудиовыход. Стереофонический выход проектируется с помощью функции моделирования восприятия звука (HRTF) для использования с наушниками, а многоканальный выход — с помощью векторного амплитудного панорамирования (VBAP) для использования с многоканальными системами динамиков. При использовании многоканальной прокрутки не забудьте выбрать режим динамиков, который соответствует параметрам устройства, находящимся в **Параметры проекта** > **Аудио**.

## <a name="check-proper-sound-source-placement"></a>Проверка правильности размещение источника звука
Источники звука, расположенные внутри задействованных объемных пикселей, не будут обработаны. Так как объемные пиксели распространяются далее видимой геометрии сцены, возможно разместить источник внутри объемного пикселя, пока его не скроет визуальная геометрия. Вы можете просмотреть объемные пиксели Project Acoustics, установив или сняв флажок сетки объемных пикселей в меню **Gizmos** (Инструменты) в правом верхнем углу представления **Сцена**.

![Меню Gizmos (Инструменты)](media/gizmos-menu.png)  

Отображение объемных элементов может также помочь определить, применяется ли преобразование к визуальным компонентам в игре. Если это так, примените одно и то же преобразование к GameObject с помощью **Acoustics Manager**.

### <a name="bake-time-vs-run-time-voxels"></a>Объемные пиксели времени моделирования и выполнения
Объемные пиксели можно просмотреть в окне редактора во время разработки игры и в окне игры в среде выполнения. Размер объемных пикселей в этих представлениях отличается. Это обусловлено тем, что акустическая интерполяция среды выполнения использует более точную сетку объемных пикселей для более точных результатов интерполяции. Расположение источника звука необходимо проверить с помощью объемных пикселей среды выполнения.

Объемные пиксели времени разработки:

![VoxelsDesignTime](media/voxels-design-time.png)

Объемные пиксели среды выполнения:

![VoxelsRuntime](media/voxels-runtime.png)

## <a name="next-steps"></a>Дополнительная информация
* Изучите материалы с описанием принципов, лежащих в основе [процесса разработки](design-process.md)

