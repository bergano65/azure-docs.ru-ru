---
title: Отладка ошибок при выполнении приложения пользовательских команд
titleSuffix: Azure Cognitive Services
description: Из этой статьи вы узнаете, как отлаживать ошибки времени выполнения в приложении с пользовательскими командами.
services: cognitive-services
author: xiaojul
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: xiaojul
ms.openlocfilehash: 49d9b91df896646da7bf36e077d9f3c9187137dd
ms.sourcegitcommit: 10d00006fec1f4b69289ce18fdd0452c3458eca5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2020
ms.locfileid: "95021802"
---
# <a name="debug-errors-when-running-a-custom-commands-application"></a>Отладка ошибок при выполнении приложения пользовательских команд

В этой статье описывается, как выполнять отладку при возникновении ошибок при выполнении приложения пользовательских команд. 

## <a name="connection-failed"></a>Сбой подключения

Если приложение запуска настраиваемых команд из [клиентского приложения (с помощью Speech SDK)](./how-to-custom-commands-setup-speech-sdk.md) или [клиента Windows голосовой помощника](./how-to-custom-commands-developer-flow-test.md), могут возникать ошибки подключения, перечисленные ниже:

| Код ошибки | Сведения |
| ------- | -------- |
| [401](#error-401) | Аусентикатионфаилуре: сбой обновления WebSocket с ошибкой проверки подлинности |
| [1002](#error-1002)] | Сервер вернул код состояния "404", когда ожидался код состояния "101". |

### <a name="error-401"></a>ошибка 401
- Регион, указанный в клиентском приложении, не соответствует региону пользовательского командного приложения.

- Недопустимый ключ ресурса речи
    
    Проверьте правильность ключа ресурса речи.

### <a name="error-1002"></a>Ошибка 1002 
- Пользовательское командное приложение не Опубликовано
    
    Опубликуйте приложение на портале.

- Недопустимый идентификатор пользовательской команды

    Убедитесь, что идентификатор настраиваемого командного приложения указан правильно.
 пользовательское командное приложение за пределами вашего речевого ресурса

    Убедитесь, что настраиваемое командное приложение создано в вашем речевом ресурсе.

Дополнительные сведения об устранении проблем с подключением см. в [статье Устранение неполадок на клиентах Windows Voice](https://github.com/Azure-Samples/Cognitive-Services-Voice-Assistant/tree/master/clients/csharp-wpf#troubleshooting)


## <a name="dialog-is-canceled"></a>Диалоговое окно отменено

При выполнении приложения с пользовательскими командами диалоговое окно будет отменено при возникновении ошибок.

- Если вы тестируете приложение на портале, оно будет напрямую отображать описание отмены и воспроизвести ошибку еаркон. 

- Если приложение запускается с помощью [клиента Windows Voice Assistant](./how-to-custom-commands-developer-flow-test.md), будет выдаваться ошибка еаркон. В **журналах действий** можно найти **событие: канцелледдиалог** .

- Если вы используете клиентское [приложение с примером клиентского приложения (с помощью речевого пакета SDK)](./how-to-custom-commands-setup-speech-sdk.md), будет выдаваться сообщение об ошибке еаркон. Вы можете найти **событие: канцелледдиалог** в **состоянии**.

- Если вы создаете собственное клиентское приложение, вы всегда можете спроектировать нужные логики для обработки событий Канцелледдиалог.

Событие Канцелледдиалог состоит из кода отмены и описания, как показано ниже:

| Код отмены | Описание отмены |
| ------- | --------------- | ----------- |
| [макстурнсрешолдреачед](#no-progress-was-made-after-the-max-number-of-turns-allowed) | По истечении максимального разрешенного числа выполнений ход выполнения не выполнялся |
| [рекогнизеркуотаексцеедед](#recognizer-usage-quota-exceeded) | Превышена квота на использование распознавателя |
| [рекогнизерконнектионфаилед](#connection-to-the-recognizer-failed) | Сбой подключения к распознавателю |
| [рекогнизерунаусоризед](#this-application-cannot-be-accessed-with-the-current-subscription) | Доступ к этому приложению с текущей подпиской невозможен |
| [рекогнизеринпутексцеедедалловедленгс](#input-exceeds-the-maximum-supported-length) | Длина входных данных превышает максимальную поддерживаемую длину распознавателя |
| [рекогнизернотфаунд](#recognizer-not-found) | Распознаватель не найден |
| [рекогнизеринвалидкуери](#invalid-query-for-the-recognizer) | Недопустимый запрос распознавателя |
| [рекогнизереррор](#recognizer-return-an-error) | Средство распознавания возвращает ошибку |

### <a name="no-progress-was-made-after-the-max-number-of-turns-allowed"></a>По истечении максимального разрешенного числа выполнений ход выполнения не выполнялся
Диалоговое окно отменяется, когда требуемый слот не был успешно обновлен после определенного числа попыток. Максимальное число сборок — 3.

### <a name="recognizer-usage-quota-exceeded"></a>Превышена квота на использование распознавателя
Language Understanding (LUIS) имеет ограничения на использование ресурсов. Обычно "ошибка превышения квоты на использование распознавателя" может быть вызвана следующими причинами: 
- Создание LUIS превышает ограничение

    Добавьте прогнозирующий ресурс в приложение пользовательских команд: 
    1. Перейдите в раздел **Параметры**, Luis ресурс.
    1. Выберите прогнозируемый ресурс из **ресурса прогноза** или щелкните **создать ресурс** . 

- Превышено предельное значение для ресурса прогноза LUIS

    Если вы используете F0 прогнозирующий ресурс, он имеет ограничение в 10 тысяч/месяц, 5 запросов в секунду.

Дополнительные сведения об ограничениях ресурсов LUIS см. в разделе [Language Understanding использование ресурсов и ограничение](../luis/luis-limits.md#resource-usage-and-limits) .

### <a name="connection-to-the-recognizer-failed"></a>Сбой подключения к распознавателю
Обычно это означает сбой временного подключения к Language Understandingному распознавательу (LUIS). Повторите попытку, чтобы устранить проблему.

### <a name="this-application-cannot-be-accessed-with-the-current-subscription"></a>Доступ к этому приложению с текущей подпиской невозможен
Ваша подписка не имеет прав доступа к приложению LUIS. 

### <a name="input-exceeds-the-maximum-supported-length"></a>Длина входных данных превышает максимальную поддерживаемую длину
Длина введенных данных превысила 500 символов. Для входных utterance можно использовать не более 500 символов.

### <a name="invalid-query-for-the-recognizer"></a>Недопустимый запрос распознавателя
Длина введенных данных превысила 500 символов. Для входных utterance можно использовать не более 500 символов.

### <a name="recognizer-return-an-error"></a>Средство распознавания возвращает ошибку
Распознаватель LUIS вернул ошибку при попытке распознать входные данные.

### <a name="recognizer-not-found"></a>Распознаватель не найден
Не удается найти тип распознавателя, указанный в модели диалогового окна пользовательских команд. Сейчас поддерживается только [распознаватель Language Understanding (Luis)](https://www.luis.ai/).

## <a name="other-common-errors"></a>Другие распространенные ошибки
### <a name="unexpected-response"></a>Непредвиденный ответ
Непредвиденные ответы могут быть вызваны несколькими причинами. Несколько проверок для запуска:
- Да/нет целей в примерах предложений

    Так как сейчас мы не поддерживаем намерения да/нет, за исключением случаев использования с функцией подтверждения. Все намерения "Да" и "нет", определенные в примерах предложений, не будут обнаружены.

- Похожие намерения и примеры предложений между командами

    Точность распознавания LUIS может затронуть, когда две команды совместно используют похожие средства и примеры предложений. Вы можете попытаться сделать команды и примеры предложений как можно более разными.

    Рекомендации по повышению точности распознавания см. в статье [Luis](../luis/luis-concept-best-practices.md).

- Диалоговое окно отменено
    
    Проверьте причины отмены в разделе выше.

### <a name="error-while-rendering-the-template"></a>Ошибка при подготовке к просмотру шаблона
В речевом ответе используется неопределенный параметр. 

### <a name="object-reference-not-set-to-an-instance-of-an-object"></a>Ссылка на объект не задает экземпляр объекта
В полезных данных JSON, определенных в действии **Send to Client** , имеется пустой параметр.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [См. примеры на GitHub](https://aka.ms/speech/cc-samples)