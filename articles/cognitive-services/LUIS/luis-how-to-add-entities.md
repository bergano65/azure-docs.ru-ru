---
title: Добавление сущностей в приложения LUIS
titleSuffix: Azure Cognitive Services
description: Добавление сущностей (ключевые данные в предметной области приложения) в приложения LUIS.
services: cognitive-services
author: diberry
manager: cgronlun
ms.service: cognitive-services
ms.component: language-understanding
ms.topic: article
ms.date: 10/24/2018
ms.author: diberry
ms.openlocfilehash: 178f4314f9ede86444ee60fd2a64f85dc283080b
ms.sourcegitcommit: 0f54b9dbcf82346417ad69cbef266bc7804a5f0e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/26/2018
ms.locfileid: "50138537"
---
# <a name="create-entities-without-utterances"></a>Создание сущностей без высказываний

Сущность представляет подлежащее извлечению слово или фразу в высказывании. Фраза может содержать много сущностей или вообще ни одной. Сущность представляет класс, включающий коллекцию похожих объектов (мест, предметов, людей, событий или понятий). Сущности описывают информацию, относящуюся к намерению, и иногда они необходимы приложению для выполнения поставленной задачи. 

Вы можете создавать сущности до или помимо создания намерения.

Добавлять, изменять или удалять сущности в приложении LUIS можно с помощью **Списка сущностей** на странице **Сущности**. LUIS предоставляет два основных типа сущностей: [предварительно созданные сущности](luis-reference-prebuilt-entities.md) и [пользовательские сущности](luis-concept-entity-types.md#types-of-entities).

После создания сущности ее можно отметить в примере высказывания намерения на странице сведений **Намерение**. 

## <a name="add-prebuilt-entity"></a>Добавление предварительно созданной сущности

Общие предварительно созданные сущности, добавляемые в приложение: *number* и *datetimeV2*. 

1. Войдите в раздел **Сборка** и выберите на левой панели **Сущности**.
 
1. На странице **Сущности** выберите **Добавление предварительно созданной сущности**.

1. В диалоговом окне **Добавление предварительно созданной сущности** выберите предварительно созданные сущности **number** и **datetimeV2**. Затем выберите **Готово**.

    ![Снимок экрана диалогового окна "Добавление предварительно созданной сущности"](./media/add-entities/list-of-prebuilt-entities.png)

## <a name="add-simple-entities"></a>Добавление простой сущности

Простая сущность описывает одно понятие. Создайте сущность, чтобы извлекать названия отделов компаний, например *Отдел кадров* или *Производственный отдел*, с помощью следующей процедуры.   

1. В приложении выберите раздел **Сборка**, затем на левой панели нажмите **Сущности** и выберите **Создать сущность**.

1. Во всплывающем диалоговом окне введите `Location` в поле **Имя сущности**, выберите **Простое** из списка **Тип сущности**, а затем выберите **Готово**.

    Когда сущность будет создана, перейдите ко всем намерениям с примерами высказываний, содержащих сущность. В примере высказываний выделите текст и пометьте его как сущность. 

    Обычно [список фраз](luis-concept-feature.md) используют для усиления сигнала простой сущности.

## <a name="add-regular-expression-entities"></a>Добавление сущностей регулярного выражения

Сущность регулярного выражения используется для извлечения данных из выражения на основе указанного регулярного выражения. 

1. В левой области навигации приложения выберите **Сущности**, а затем выберите **Создать сущность**.

1. Во всплывающем диалоговом окне введите `Human resources form name` в поле **Имя сущности**, выберите **Регулярное выражение** в списке **Тип сущности**, введите регулярное выражение `hrf-[0-9]{6}`, а затем выберите **Готово**. 

    Эти литеральные символы регулярного выражения `hrf-`, а затем 6 цифр для обозначения номера формы для формы "Отдел кадров".

## <a name="add-hierarchical-entities"></a>Добавление иерархических сущностей

Иерархическая сущность — это категория контекстно-зависимых обученных и концептуально связанных сущностей. В следующем примере сущность содержит исходное и конечное расположения. 

В высказывании `Move John Smith from Seattle to Cairo` "Сиэтл" является исходным, а "Каир" — конечным расположением. Каждое расположение контекстуально отличается и получается на основе порядка и выбора слов в высказывании.

Чтобы добавить иерархические сущности, выполните следующие действия. 

1. В левой области навигации приложения выберите **Сущности**, а затем выберите **Создать сущность**.

1. Во всплывающем диалоговом окне введите `Location` в поле **Имя сущности**, выберите **Иерархическая** в списке **Тип сущности**.

    ![Добавление иерархической сущности](./media/add-entities/hier-location-entity-creation.png)

1. Выберите **Добавить дочерний элемент**, а затем введите `Origin` в поле **Дочерний №1**. 

1. Выберите **Добавить дочерний элемент**, а затем введите `Destination` в поле **Дочерний №2**. Нажмите кнопку **Готово**.

    >[!CAUTION]
    >Имена дочерних сущностей должны быть уникальными для всех сущностей в одном приложении. Две разные иерархические сущности не могут содержать дочерние элементы с тем же именем. 

    Когда сущность будет создана, перейдите ко всем намерениям с примерами высказываний, содержащих сущность. В примере высказываний выделите текст и пометьте его как сущность. 

## <a name="add-composite-entities"></a>Добавление составных сущностей

Создавая составные сущности, можно определить связь между различными видами сущностей. В приведенном ниже примере сущность содержит регулярные выражения, а также предварительно созданные сущности имени.  

В высказывании `Send hrf-123456 to John Smith` текст `hrf-123456` связан с [регулярным выражением](#add-regular-expression-entities) "Отдел кадров", а `John Smith` извлечено предварительно созданной сущностью personName. Каждая сущность является частью большей родительской сущности. 

1. В приложении выберите **Сборка** и в левой области навигации раздела выберите **Сущности**, а затем — **Добавить предварительно созданную сущность**.

1. Добавьте предварительно созданную сущность **PersonName**. Инструкции см. в разделе [Добавление предварительно созданных сущностей](#add-prebuilt-entity). 

1. В левой области навигации выберите **Сущности**, а затем выберите **Создать сущность**.

1. Во всплывающем диалоговом окне введите `SendHrForm` в поле **Имя сущности**, затем выберите **Составная сущность** из списка **Тип сущности**.

1. Выберите **Добавить дочерний элемент** для добавления нового дочернего элемента.

1. В **Дочерний №1** выберите сущность **number** из списка.

1. В **Дочерний №2** выберите из списка сущность **Имя формы "Отдел кадров"**. 

1. Нажмите кнопку **Готово**.

## <a name="add-patternany-entities"></a>Добавление сущностей Pattern.any

Сущности [Pattern.any](luis-concept-entity-types.md) допустимы только в [шаблонах](luis-how-to-model-intent-pattern.md), но не в намерениях. Этот вид сущности помогает службе LUIS найти конец сущностей различной длины и выбора машинного слова. Так как эта сущность используется в шаблоне, служба LUIS знает, где конец сущности в шаблоне высказывания.

Если приложение имеет намерение `FindHumanResourcesForm`, название извлеченной формы может конфликтовать с намерением прогнозирования. Чтобы уточнить, какие машинные слова находятся в названии формы, используйте Pattern.any в шаблоне. Прогнозирование LUIS начинается с высказывания. Сначала высказывание проверяется и сопоставляется сущностям при их обнаружении, а затем шаблон проверяется и сопоставляется. 

В высказывании `Where is Request relocation from employee new to the company on the server?` название формы оказывается каверзным, поскольку оно не является контекстно-зависимым и непонятно, когда заканчивается заголовок и где начинается остальная часть высказывания. В названиях порядок слов может быть любым, они могут состоять из одного слова, сложных фраз со знаками препинания и иметь бессмысленный порядок слов. Шаблон позволяет создать сущность, в которой можно извлечь полную и точную сущность. После обнаружения названия намерение `FindHumanResourcesForm` прогнозированное, потому что это намерение для шаблона.

1. В разделе **Сборка** на левой панели выберите **Сущности**, а затем — **Создать сущность**.

1. В диалоговом окне **Добавление сущности** откройте поле "Имя сущности" и выберите **Pattern.any** как **Тип сущности**.

    Чтобы использовать сущность pattern.any, добавьте шаблон на странице **Шаблоны** в разделе **Повышение производительности приложения** с помощью правильных фигурных скобок, например `Where is **{HumanResourcesFormTitle}** on the server?`.

    Если ваш шаблон, который включает сущность Pattern.any, извлекает сущности неправильно, используйте [явный список](luis-concept-patterns.md#explicit-lists), чтобы решить эту проблему. 

## <a name="add-a-role-to-pattern-based-entity"></a>Добавление роли к сущности на основе шаблонов

Роль — именованный подтип сущности на основе контекста. Ее можно сравнить с [иерархической](#add-hierarchical-entities) сущностью, но роли используются только в [шаблонах](luis-how-to-model-intent-pattern.md). 

Можно воспользоваться тем же примером, что и для иерархической сущности, содержащей исходное и конечное расположения, с разницей в том, что роль обозначена именем источника, а не иерархическим дочерним элементом. 

Синтаксис для роли — **{Entityname:Rolename}**, где имя сущности находится перед двоеточием, а имя роли за ним. Например, `Move {personName} from {LocationUsingRoles:Origin} to {LocationUsingRoles:Destination}`.

1. В разделе **Сборка** на левой панели выберите **Сущности**.

1. Нажмите кнопку **Создать сущность**. Укажите имя `LocationUsingRoles`. Выберите тип **Простой** и выберите **Готово**. 

1. На левой панели выберите **Сущности**, а затем выберите новую сущность **LocationUsingRoles**, созданную на предыдущем шаге.

1. В текстовом поле **Имя роли** введите имя роли `Origin` и нажмите клавишу ВВОД. Добавьте имя второй роли `Destination`. 

    ![Снимок экрана добавления роли отправления сущности Location](./media/add-entities/roles-enter-role-name-text.png)

## <a name="add-list-entities"></a>Добавление сущностей списка

Сущности списка — это фиксированный закрытый набор связанных машинных слов. 

В приложении "Отдел кадров" может существовать список названий всех отделов вместе с синонимами к ним. При создании сущности не нужно знать все значения. Вы можете добавить больше значений после просмотра высказываний реального пользователя с синонимами.

1. В разделе **Сборка** на левой панели выберите **Сущности**, а затем — **Создать сущность**.

1. В диалоговом окне**Добавление сущности** введите `Department` в поле **Имя сущности** и выберите **Список** как **Тип сущности**. Нажмите кнопку **Готово**.
  
1. На странице "Сущность списка" можно добавлять нормализованные имена. В текстовом поле **Значения** выберите название отдела из списка, например `HumanResources`, а затем нажмите клавишу ВВОД на клавиатуре. 

1. Справа от нормализованного значения введите синонимы, нажав на клавиатуре клавишу ВВОД после каждого элемента.

1. Если необходимо добавить нормализованные элементы в список, выберите **Рекомендуемые**, чтобы просмотреть параметры в [семантическом словаре](luis-glossary.md#semantic-dictionary).

    ![Снимок экрана добавления роли отправления сущности Location](./media/add-entities/hr-list-2.png)


1. Выберите элемент в списке "Рекомендуемые", чтобы добавить его в качестве нормализованного значения или выберите **Добавить все**, чтобы добавить все элементы. 
    Можно импортировать значения в существующую сущность списка, используя существующий формат JSON.

    ```
    [
        {
            "canonicalForm": "Blue",
            "list": [
                "navy",
                "royal",
                "baby"
            ]
        },
        {
            "canonicalForm": "Green",
            "list": [
                "kelly",
                "forest",
                "avacado"
            ]
        }
    ]  
    ```


## <a name="change-entity-type"></a>Изменение типа сущности

Интеллектуальная служба распознавания речи не позволяет изменить тип сущности, поскольку неизвестно, что добавлять или удалять для создания этой сущности. Чтобы изменить тип, лучше создать новую сущность правильного типа с незначительно отличающимся именем. После создания сущности в каждом высказывании удалите старое отмеченное имя сущности и добавьте новое. После того как все высказывания будут повторно отмечены, удалите старую сущность. 

## <a name="create-a-pattern-from-an-utterance"></a>Создание шаблона на основе высказывания

Дополнительные сведения см. в разделе [Добавление шаблона на основе существующего фрагмента речи на странице сущности или намерения](luis-how-to-model-intent-pattern.md#add-pattern-from-existing-utterance-on-intent-or-entity-page).

## <a name="train-your-app-after-changing-model-with-entities"></a>Обучение приложения после изменения модели с сущностями

После добавления, изменения и удаления сущностей выполните [обучение](luis-how-to-train.md) и [публикацию](luis-how-to-publish-app.md) приложения, чтобы применить изменения к запросам конечной точки. 

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о предварительно созданных сущностях см. в проекте [Распознаватели текста](https://github.com/Microsoft/Recognizers-Text). 

Сведения о том, как сущность отображается в ответе на запрос конечной точки JSON, см. в разделе [Извлечение данных](luis-concept-data-extraction.md).

Теперь, когда добавлены намерения, выражения и сущности, вы получаете базовое приложение LUIS. Узнайте, как [обучать](luis-how-to-train.md), [тестировать](luis-interactive-test.md) и [опубликовать](luis-how-to-publish-app.md) приложение.
 
