---
title: Миграция в ключ создания ресурсов Azure
titleSuffix: Azure Cognitive Services
description: В этой статье описывается, как перенести Language Understanding (LUIS) Создание проверки подлинности из учетной записи электронной почты в ресурс Azure.
services: cognitive-services
author: aahill
ms.author: aahi
manager: nitinme
ms.custom: seodec18, contperf-fy21q2
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: how-to
ms.date: 12/14/2020
ms.openlocfilehash: 086bc17938064571e8759ecda633fb5f87d1060f
ms.sourcegitcommit: 86acfdc2020e44d121d498f0b1013c4c3903d3f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "97616819"
---
# <a name="migrate-to-an-azure-resource-authoring-key"></a>Миграция в ключ создания ресурсов Azure

> [!IMPORTANT]
>  Начиная с 3 декабря существующие пользователи LUIS должны завершить процесс миграции, чтобы продолжить создание LUIS приложений.

Language Understanding (LUIS) создание аутентификации изменено с учетной записи электронной почты на ресурс Azure. Используйте эту статью, чтобы узнать, как перенести учетную запись, если она еще не перенесена.  


## <a name="what-is-migration"></a>Что такое миграция?

Миграция — это процесс изменения проверки подлинности с учетной записи электронной почты на ресурс Azure. После миграции ваша учетная запись будет связана с подпиской Azure и ресурсом разработки Azure.

Миграция должна быть выполнена с [портала Luis](https://www.luis.ai). Например, при создании ключей разработки с помощью интерфейса командной строки LUIS необходимо завершить процесс миграции на портале LUIS. После миграции вы по-прежнему сможете соавторам приложений, но они будут добавлены на уровне ресурсов Azure, а не на уровне приложения. Миграция учетной записи не может быть отменена.

> [!Note]
> * Если вам нужно создать ресурс среды выполнения прогнозирования, создайте [отдельный процесс](luis-how-to-azure-subscription.md#create-resources-in-the-azure-portal) .
> * Сведения о том, как будут затронуты ваши приложения и участники, см. в разделе [Примечания по миграции](#migration-notes) ниже. 
> * Разработка приложения LUIS предоставляется бесплатно, как показано на уровне F0. Дополнительные сведения [о ценовых](luis-limits.md#key-limits)категориях.

## <a name="migration-prerequisites"></a>Предварительные требования для миграции

* Действующая подписка Azure. Попросите администратора клиента добавить вас в подписку или Зарегистрируйтесь, чтобы [получить бесплатную учетную часть](https://azure.microsoft.com/free/cognitive-services).
* Ресурс для создания LUIS Azure на портале LUIS или [портал Azure](https://portal.azure.com/#create/Microsoft.CognitiveServicesLUISAllInOne). 
    * Создание ресурса-разработчика на портале LUIS является частью процесса миграции, описанного в следующем разделе.
* Если вы являетесь членом совместной работы в приложениях, приложения не будут переноситься автоматически. Вам будет предложено экспортировать эти приложения при переходе по потоку миграции. Вы также можете использовать [API экспорта](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c40). Вы можете импортировать приложение обратно в LUIS после миграции. В процессе импорта создается новое приложение с новым ИДЕНТИФИКАТОРом приложения, владельцем которого вы являетесь.        
* Если вы являетесь владельцем приложения, вам не потребуется экспортировать приложения, так как они будут перенесены автоматически. Предоставляется шаблон электронной почты со списком всех участников совместной работы для каждого приложения, поэтому они могут получать уведомления о процессе миграции.

## <a name="migration-steps"></a>Этапы миграции

1. При входе на [портал Luis](https://www.luis.ai)откроется окно миграции Azure с инструкциями по миграции. Если вы откроете его, вы не сможете продолжить разработку приложений LUIS, и только после этого будет отображаться единственное действие.

    > [!div class="mx-imgBorder"]
    > ![Введение в окно миграции](./media/migrate-authoring-key/notify-azure-migration.png)

2. Если у вас есть участники совместной работы в любом из ваших приложений, вы увидите список имен приложений, принадлежащих вам, а также область разработки и сообщения электронной почты для участников совместной работы в каждом приложении. Мы рекомендуем отправить коллегам по электронной почте уведомление о миграции, нажав кнопку **Отправить** символ в левой части имени приложения.
`*`Символ будет отображаться рядом с именем приложения, если у участника совместной работы есть назначенный приложению ресурс прогнозирования. После миграции эти приложения по-прежнему будут назначены этим ресурсам, даже если у участников совместной работы нет прав на создание приложений. Однако это назначение будет разорвано, если владелец ресурса прогнозирования [повторно создаст ключи](./luis-how-to-azure-subscription.md#regenerate-an-azure-key) из портал Azure.  

   > [!div class="mx-imgBorder"]
   > ![Уведомить участников совместной работы](./media/migrate-authoring-key/notify-azure-migration-collabs.png)


   Для каждого совместного взаимодействия и приложения приложение электронной почты по умолчанию открывается с неформатированным электронным письмом. Вы можете изменить сообщение перед его отправкой. Шаблон сообщения электронной почты содержит точный идентификатор приложения и имя приложения.

   ```html
   Dear Sir/Madam,

   I will be migrating my LUIS account to Azure. Consequently, you will no longer have access to the following app:

   App Id: <app-ID-omitted>
   App name: Human Resources

   Thank you
   ```
   > [!Note]
   > После переноса учетной записи в Azure ваши приложения больше не будут доступны для участников совместной работы.

3. Если вы являетесь членом совместной работы в любых приложениях, то список имен приложений, к которым вам предоставлен доступ, отображается вместе с областью разработки и сообщениями о владельце для каждого приложения. Рекомендуется экспортировать копию приложений, нажав кнопку Экспорт в левой части имени приложения. Эти приложения можно импортировать обратно после миграции, так как они не будут автоматически перенесены вместе с вами.
`*`Если для приложения назначен ресурс прогнозирования, рядом с именем приложения появится символ. После миграции ваш прогнозирующий ресурс будет по-прежнему назначен этим приложениям, даже если у вас больше не будет прав на создание этих приложений. Если требуется прервать назначение между вашим прогнозируемым ресурсом и приложением, необходимо перейти на портал Azure и [повторно создать ключи](./luis-how-to-azure-subscription.md#regenerate-an-azure-key).

   > [!div class="mx-imgBorder"]
   > ![Экспортируйте приложения.](./media/migrate-authoring-key/migration-export-apps.png)


4. В окне для миграции регионов вам будет предложено перенести приложения в ресурс Azure в том же регионе, в котором они были созданы. LUIS имеет три области разработки [и порталы](https://docs.microsoft.com/azure/cognitive-services/luis/luis-reference-regions#luis-authoring-regions). В окне будут показаны регионы, в которых были созданы ваши приложения. Отображаемые регионы миграции могут отличаться в зависимости от используемого регионального портала и созданных вами приложений. 

   > [!div class="mx-imgBorder"]
   > ![Миграция в нескольких регионах.](./media/migrate-authoring-key/migration-regional-flow.png)

5. Для каждого региона выберите Создание нового ресурса для создания LUIS или миграция на существующий, используя кнопки.

   > [!div class="mx-imgBorder"]
   > ![Выберите Создание или существующий ресурс для разработки](./media/migrate-authoring-key/migration-multiregional-resource.png)

   Введите следующие сведения:

   * **Имя клиента**. Клиент, с которым связана подписка Azure. По умолчанию для этого параметра используется клиент, который используется в данный момент. Вы можете переключить клиентов, закрыв это окно и выбрав аватар в правом верхнем углу экрана, где находятся инициалы. Щелкните " **Перейти в Azure** ", чтобы открыть окно повторно.
   * **Имя подписки Azure**. Подписка, которая будет связана с ресурсом. Если у вас есть несколько подписок, принадлежащих клиенту, выберите нужную подписку из раскрывающегося списка.
   * **Имя** создаваемого ресурса: настраиваемое имя. Он используется как часть URL-адреса для запросов конечной точки создания и прогнозирования. Если создается новый ресурс для создания, обратите внимание, что имя ресурса может содержать только буквенно-цифровые символы, `-` и не может начинаться или заканчиваться на `-` . Если в имя включены любые другие символы, создание ресурсов и миграция не будут выполнены.
   * **Имя группы ресурсов Azure**: имя настраиваемой группы ресурсов, которое выбирается из раскрывающегося списка. Группы ресурсов позволяют группировать ресурсы Azure для осуществления доступа и управления. Если в вашей подписке нет группы ресурсов, вы не сможете создать ее на портале LUIS. Перейдите в [портал Azure](https://ms.portal.azure.com/#create/Microsoft.ResourceGroup) , чтобы создать его, перейдите к Luis, чтобы продолжить процесс входа.

6. После успешного переноса во всех регионах нажмите кнопку Готово. Теперь у вас будет доступ к приложениям. Вы можете продолжить создание и обслуживание всех приложений во всех регионах на портале.

## <a name="migration-notes"></a>Примечания по миграции

* Перед миграцией соавторы называются _совместной работой_ на уровне приложения Luis. После миграции роль _участника_ Azure используется для тех же функций на уровне ресурсов Azure.
* Если вы выполнили вход на более чем один [региональный портал Luis](./luis-reference-regions.md#luis-authoring-regions), вам будет предложено выполнить миграцию в нескольких регионах одновременно.
* Приложения будут автоматически перенесены вместе с вами, если вы являетесь владельцем приложения. Приложения не будут переноситься вместе с вами, если вы являетесь членом программы совместной работы. Однако участники совместной работы получат запрос на экспорт необходимых приложений.
* Владельцы приложений не могут выбрать подмножество приложений для миграции, и владелец не сможет определить, перенесены ли участники совместной работы.
* Миграция не выполняет автоматическое перемещение или добавление участников совместной работы в ресурс создания Azure. Владелец приложения должен выполнить этот шаг после миграции. Для этого шага требуются [разрешения на доступ к ресурсу разработки Azure](./luis-how-to-collaborate.md).
* Когда участники будут назначены ресурсу Azure, им потребуется выполнить миграцию, чтобы они могли получить доступ к приложениям. В противном случае у них не будет доступа для создания приложений.


## <a name="using-apps-after-migration"></a>Использование приложений после миграции

После миграции все приложения LUIS, для которых вы являетесь владельцем, теперь будут назначены одному ресурсу LUIS Authoring.
В списке **Мои приложения** отображаются приложения, перенесенные в новый ресурс создания. Перед доступом к приложениям выберите **выбрать другой ресурс для разработки** , чтобы выбрать подписку и ресурс для разработки, чтобы просмотреть приложения, которые могут быть созданы.

> [!div class="mx-imgBorder"]
> ![Выбор подписки и ресурса для разработки](./media/migrate-authoring-key/select-sub-and-resource.png)


Если вы планируете изменять приложения программно, вам потребуются значения ключа разработки. Чтобы отобразить эти значения, щелкните **Управление** в верхней части экрана на портале Luis, а затем выберите **ресурсы Azure**. Они также доступны в портал Azure на странице **ключа и конечных точек** ресурса. Можно также создать дополнительные ресурсы для разработки и назначить их с одной страницы.

## <a name="adding-contributors-to-authoring-resources"></a>Добавление участников к разработке ресурсов

[!INCLUDE [Manage contributors for the Azure authoring resource for language understanding](./includes/manage-contributors-authoring-resource.md)]

Узнайте [, как добавить участников](luis-how-to-collaborate.md) в свой ресурс разработки. Участники получат доступ ко всем приложениям в этом ресурсе.

Вы можете добавить участников в ресурс разработки из портал Azure на странице **управления доступом (IAM)** для этого ресурса. Дополнительные сведения см. [в разделе Добавление участников в приложение](luis-how-to-collaborate.md).

> [!Note]
> Если владелец приложения LUIS, перенесенный и добавлен участником совместной работы в ресурсе Azure, он по-прежнему будет иметь доступ к приложению, только если он не выполняет миграцию.

## <a name="troubleshooting-the-migration-process"></a>Устранение неполадок процесса миграции

Если вы не можете найти подписку Azure в раскрывающемся списке:
* Убедитесь, что у вас есть действующая подписка Azure, которая имеет право на создание Cognitive Services ресурсов. Перейдите к [портал Azure](https://ms.portal.azure.com) и проверьте состояние подписки. Если у вас ее нет, [Создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/cognitive-services/).
* Убедитесь, что вы находитесь в соответствующем клиенте, связанном с действительной подпиской. Вы можете переключать клиентов, щелкнув аватар в правом верхнем углу экрана, где находятся инициалы.

  > [!div class="mx-imgBorder"]
  > ![Страница для переключения каталогов](./media/migrate-authoring-key/switch-directories.png)

Если у вас есть существующий ресурс, но его невозможно найти при выборе параметра **использовать существующий ресурс создания ресурсов** :
* Вероятно, ресурс был создан в регионе, отличном от региона, в котором выполняется миграция.
* Вместо этого создайте новый ресурс на портале LUIS.

Если выбран параметр **создать новый ресурс** создания и миграция завершается сбоем с сообщением об ошибке "не удалось получить сведения о пользователе Azure, повторите попытку позже":
* Ваша подписка может иметь 10 или более ресурсов разработки для каждого региона на подписку. Если это так, вы не сможете создать новый ресурс для разработки.
* Выполните миграцию, выбрав параметр **использовать существующий ресурс создания** и выбрав один из существующих ресурсов в подписке.

## <a name="create-new-support-request"></a>Создать новый запрос в службу поддержки

Если у вас возникли проблемы с миграцией, которые не были устранены в разделе Устранение неполадок, [Создайте раздел поддержки](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest) и укажите приведенные ниже сведения в следующих полях:

   * **Тип проблемы**: техническая
   * **Подписка**: выберите подписку из раскрывающегося списка.
   * **Служба**: Поиск и выбор "Cognitive Services"
   * **Ресурс**: выберите ресурс Luis, если он уже существует. В противном случае выберите общий вопрос.

## <a name="next-steps"></a>Дальнейшие действия

* Ознакомьтесь [с основными понятиями о создании ключей и ключах среды выполнения](luis-how-to-azure-subscription.md)
* Узнайте, как [назначать ключи](luis-how-to-azure-subscription.md) и [добавлять участников](luis-how-to-collaborate.md) .
