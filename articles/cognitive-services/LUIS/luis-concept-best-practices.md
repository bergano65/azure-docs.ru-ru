---
title: Рекомендации по созданию приложения LUIS
description: Ознакомьтесь с рекомендациями по получению лучших результатов из модели приложения LUIS.
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 05/17/2020
ms.openlocfilehash: a16267b0bc5d9b550c73dc4e1dafee8304ec0237
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91541827"
---
# <a name="best-practices-for-building-a-language-understanding-luis-app"></a>Рекомендации по созданию приложения для понимания языка (LUIS)
Создайте приложение LUIS с помощью процесса создания приложений:

* Языковые модели сборки (намерения и сущности)
* Добавьте несколько примеров обучения фразы продолжительностью (15-30 на намерение)
* Опубликовать в конечной точке
* Проведите тестирование из конечной точки

После [публикации](luis-how-to-publish-app.md)приложения используйте жизненный цикл разработки, чтобы добавить компоненты, опубликовать и проверить конечную точку. Не начинайте следующий цикл разработки, добавив дополнительный пример фразы продолжительностью, так как он не позволяет LUIS изучать модель в реальном мире пользователя фразы продолжительностью.

Не расширяйте фразы продолжительностью до тех пор, пока текущий набор обоих примеров и конечных точек фразы продолжительностью не вернет уверенность и высокие показатели прогнозов. Улучшите оценки с помощью [активного обучения](luis-concept-review-endpoint-utterances.md).




## <a name="do-and-dont"></a>Рекомендации и предостережения
В следующем списке приведены рекомендации для приложений LUIS:

|Рекомендуется|Не рекомендуется|
|--|--|
|[Планирование схемы](#do-plan-your-schema)|[Сборка и публикация без плана](#dont-publish-too-quickly)|
|[Определяйте четкие намерения](#do-define-distinct-intents)<br>[Добавление компонентов в способы](#do-add-features-to-intents)<br>
[Использование сущностей, занятых компьютером](#do-use-machine-learned-entities) |[Не добавляйте слишком много примеров высказываний в намерения](#dont-add-many-example-utterances-to-intents)<br>[Использование нескольких или простых сущностей](#dont-use-few-or-simple-entities) |
|[Найдите компромисс между слишком общим и слишком конкретным содержанием для каждого намерения](#do-find-sweet-spot-for-intents)|[Не используйте LUIS в качестве платформы обучения](#dont-use-luis-as-a-training-platform)|
|[Итеративная сборка приложения с помощью версий](#do-build-your-app-iteratively-with-versions)<br>[Сборка сущностей для декомпозиции модели](#do-build-for-model-decomposition)|[Не добавляйте слишком много примеров высказываний одного формата, игнорируя другие форматы](#dont-add-many-example-utterances-of-the-same-format-ignoring-other-formats)|
|[Добавление шаблонов в последующих итерациях](#do-add-patterns-in-later-iterations)|[Не смешивайте определения намерений и сущностей](#dont-mix-the-definition-of-intents-and-entities)|
|[Сбалансируйте высказывания по всем намерениям](#balance-your-utterances-across-all-intents), за исключением намерения None.<br>[Добавьте примеры речевых фрагментов в намерение None](#do-add-example-utterances-to-none-intent)|[Не создавайте списки фраз со всеми возможными значениями](#dont-create-phrase-lists-with-all-the-possible-values)|
|[Используйте функцию предложения для активного обучения](#do-leverage-the-suggest-feature-for-active-learning)|[Не добавляйте слишком много шаблонов](#dont-add-many-patterns)|
|[Мониторинг производительности приложения с помощью пакетного тестирования](#do-monitor-the-performance-of-your-app)|[Не выполняйте обучение и публикацию для каждого добавленного примера высказывания](#dont-train-and-publish-with-every-single-example-utterance)|

## <a name="do-plan-your-schema"></a>Планирование схемы

Прежде чем приступить к созданию схемы приложения, необходимо определить, где вы планируете использовать это приложение. Чем более тщательное и конкретное планирование, тем лучше приложение станет.

* Целевые пользователи исследования
* Определение сквозных пользователей для представления своего приложения-голоса, аватара, обработки проблем (упреждающий, реактивный)
* Выявление взаимодействий пользователей (текста, речи), через которые каналы, передают существующие решения или создает новое решение для этого приложения.
* Сквозное путешествие пользователей
    * Что следует рассчитывать на это приложение и не делать? * Каковы приоритеты того, что нужно сделать?
    * Каковы основные варианты использования?
* Сбор данных — [сведения](data-collection.md) о сборе и подготовке данных

## <a name="do-define-distinct-intents"></a>Определяйте четкие намерения
Убедитесь, что словарь для каждого намерения используется только для этого намерения и не перекрывается с другим намерением. Например, если вам необходимо приложение для бронирования авиабилетов и гостиниц, вы сможете сделать так, чтобы эти бронирования находились в отдельных намерениях, или поместить их в одно намерение с различными сущностями внутри высказывания для различных данных.

Если словарь для двух намерений совпадает, объедините намерения и используйте сущности.

Взгляните на следующие примеры высказываний:

|Примеры высказываний|
|--|
|Book a flight (забронировать авиабилет)|
|Book a hotel (забронировать гостиницу)|

`Book a flight` и `Book a hotel` используют тот же словарь `book a ` . Этот формат одинаков, поэтому он должен быть таким же, `flight` `hotel` как и извлеченные сущности.

## <a name="do-add-features-to-intents"></a>Добавление функций к способам

Компоненты описывают основные понятия, связанные с намерением. Функция может представлять собой список слов, существенных для этой цели, или сущность, которая является значимой для этой цели.

## <a name="do-find-sweet-spot-for-intents"></a>Найдите компромисс для каждого намерения
Чтобы определить, перекрываются ли намерения, используйте данные прогнозирования из LUIS. LUIS не может правильно обработать перекрывающиеся намерения. Результатом является то, что намерение с максимальной оценкой оказывается слишком близко к другому намерению. Поскольку LUIS не использует один и тот же путь к данным для обучения каждый раз, перекрывающееся намерение может стать первым или вторым в обучении. Необходимо сделать так, чтобы оценки высказываний для каждого намерения находились как можно дальше друг от друга, чтобы этого не произошло. Хорошее различие между намерениями приведет к тому, что вы всегда будете получать ожидаемое намерение в качестве намерения с максимальной оценкой.

## <a name="do-use-machine-learned-entities"></a>Использовать сущности, полученные от компьютера

Сущности, полученные от компьютера, адаптированы для вашего приложения, и для них требуется успешное добавление меток. Если вы не используете сущности, полученные от компьютера, возможно, вы используете неправильное средство.

Сущности, полученные от компьютера, могут использовать другие сущности в качестве функций. Эти другие сущности могут быть пользовательскими сущностями, такими как сущности регулярных выражений или список сущностей, либо можно использовать готовые сущности в качестве функций.

Сведения о [действующих сущностях, полученных с компьютера](luis-concept-entity-types.md#effective-machine-learned-entities).

<a name="#do-build-the-app-iteratively"></a>

## <a name="do-build-your-app-iteratively-with-versions"></a>Итеративная сборка приложения с помощью версий

Каждый цикл разработки должен находиться в новой [версии](luis-concept-version.md), клонированной из существующей.

## <a name="do-build-for-model-decomposition"></a>Выполнить сборку для декомпозиции модели

Декомпозиция модели имеет типичный процесс:

* Создание **намерения** на основе намерения пользователя клиентского приложения
* Добавить 15-30 пример фразы продолжительностью на основе реальных данных пользователя
* понятие концепции данных верхнего уровня в примере utterance
* Разбиение концепции данных на подсущности
* Добавление компонентов в подсущности
* Добавление компонентов в способы

После создания намерения и добавления примера фразы продолжительностью в следующем примере описывается декомпозиция сущностей.

Начните с определения полных концепций данных, которые необходимо извлечь в utterance. Это ваша сущность машинного обучения. Затем разбивает фразу на ее части. Это включает определение подсущностей и функций.

Например, если требуется извлечь адрес, можно вызвать наиболее частную сущность машинного обучения `Address` . При создании адреса необходимо указать некоторые из его подсущностей, такие как адрес улицы, город, штат и почтовый индекс.

Продолжить разложение этих элементов:
* Добавление обязательной функции почтового кода в качестве сущности регулярного выражения.
* Разбиение адреса улицы на части:
    * **Номер улицы** с обязательным компонентом предварительно созданной сущности Number.
    * **Название улицы**.
    * **Тип улицы** с обязательной функцией объекта List, включая такие слова, как "Подстановка", "круг", "дорожка" и "полоса".

API создания версии v3 позволяет декомпозицию модели.

## <a name="do-add-patterns-in-later-iterations"></a>Добавление шаблонов в последующих итерациях

Прежде чем добавлять [закономерности](luis-concept-patterns.md) , необходимо понять, как приложение ведет себя, поскольку шаблоны имеют более интенсивное взвешенное значение, чем пример фразы продолжительностью.

Когда вы понимаете, как ведет себя приложение, добавьте закономерности, применяемые к приложению. Их не нужно добавлять с каждой [итерацией](luis-concept-app-iteration.md).

В начале проектирования модели нет вреда, но проще увидеть, как каждый шаблон изменяет модель после того, как модель будет протестирована с помощью фразы продолжительностью.

<a name="balance-your-utterances-across-all-intents"></a>

## <a name="do-balance-your-utterances-across-all-intents"></a>Балансировка фразы продолжительностью для всех целей

Чтобы прогнозирование LUIS было точным, количество примеров высказываний по каждому намерению (за исключением намерения None) должно быть примерно одинаковым.

Если у вас есть намерение со 100 примерами высказываний и намерение с 20 примерами высказываний, то намерение со 100 примерами высказываний будет иметь более высокую точность прогнозирования.

## <a name="do-add-example-utterances-to-none-intent"></a>Добавьте примеры высказываний в намерение None

Эта цель является резервной и указывает на все, что находится за пределами приложения. Добавляйте по одному примеру высказывания в намерение None на каждые 10 примеров высказываний в остальной части приложения LUIS.

## <a name="do-leverage-the-suggest-feature-for-active-learning"></a>Используйте функцию предложения для активного обучения

Вместо добавления дополнительных высказываний в намерения регулярно используйте функцию **Просмотра высказываний конечной точки**[активного обучения](luis-how-to-review-endpoint-utterances.md). Так как приложение постоянно получает высказывания конечной точки, этот список растет и изменяется.

## <a name="do-monitor-the-performance-of-your-app"></a>Отслеживайте производительность своего приложения

Отслеживайте точность прогнозирования с помощью [набора тестов пакета](luis-concept-batch-test.md).

Не используйте отдельный набор фразы продолжительностью, который не используется в качестве [примера фразы продолжительностью](luis-concept-utterance.md) или конечной точки фразы продолжительностью. Продолжайте улучшать приложение для своего набора тестов. Адаптируйте набор тестов, так чтобы он отражал настоящие высказывания пользователей. Используйте набор тестов для оценки каждой итерации или версии приложения.

## <a name="dont-publish-too-quickly"></a>Не публикуйте слишком быстро

Публикация приложения слишком быстро, без [правильного планирования](#do-plan-your-schema), может привести к некоторым проблемам:

* Приложение не будет работать в реальной ситуации на приемлемом уровне производительности.
* Схема (намерения и сущности) будет неуместной, и если вы разработали логику клиентского приложения после схемы, вам может потребоваться переписать его с нуля. Это вызовет непредвиденные задержки и дополнительные затраты на проект, над которым вы работаете.
* Фразы продолжительностью, добавленные в модель, могут привести к смещению в примере набора utterance, который трудно отладить и определить. Это также затрудняет удаление неоднозначности после фиксации в определенной схеме.

## <a name="dont-add-many-example-utterances-to-intents"></a>Не добавляйте слишком много примеров высказываний в намерения

После публикации приложения в процесс жизненного цикла разработки добавляются только фразы продолжительностью из активного обучения. Если высказывания очень похожи, добавьте шаблон.

## <a name="dont-use-few-or-simple-entities"></a>Не используйте несколько или простые сущности

Объекты создаются для извлечения и прогнозирования данных. Важно, чтобы у каждой цели были сущности машинного обучения, которые описывают данные в намерениях. Это помогает LUIS предсказать намерение, даже если вашему клиентскому приложению не нужно использовать извлеченную сущность.

## <a name="dont-use-luis-as-a-training-platform"></a>Не используйте LUIS в качестве платформы обучения

LUIS относится к домену языковой модели. Он не предназначен для работы в качестве общей платформы обучения естественного языка.

## <a name="dont-add-many-example-utterances-of-the-same-format-ignoring-other-formats"></a>Не добавляйте слишком много примеров высказываний одного формата, игнорируя другие форматы

LUIS ожидает вариации в высказываниях намерения. Высказывания могут различаться с сохранением одного и того же общего смысла. Эти вариации могут относиться к длине высказывания, подбору слов и расположению слов.

|Не используйте одинаковый формат|Используйте различные форматы|
|--|--|
|Buy a ticket to Seattle (Купить билет в Сиэтл)<br>Buy a ticket to Paris (Купить билет в Париж)<br>Buy a ticket to Orlando (Купить билет в Орландо)|Buy 1 ticket to Seattle (Купить 1 билет в Сиэтл)<br>Reserve two seats on the red eye to Paris next Monday (Зарезервировать два места на ночной рейс в Париж на следующий понедельник)<br>I would like to book 3 tickets to Orlando for spring break (Я хотел бы забронировать 3 билета в Орландо на весенний отпуск)|

Во втором столбце используются разные глаголы (купить, зарезервировать, забронировать), разное количество (1, два, 3) и различный порядок слов, но намерение во всех случаях одно и то же — приобрести авиабилеты для путешествия.

## <a name="dont-mix-the-definition-of-intents-and-entities"></a>Не смешивайте определения намерений и сущностей

Создайте намерения для всех действий, которые может предпринять ваш бот. Используйте сущности в качестве параметров, которые делают возможным выполнение действия.

Для робота, который будет регистрировать авиарейсы, создайте **букфлигхт** цель. Не создавайте намерение для каждой авиакомпании или для каждого места назначения. Используйте эти фрагменты данных как [сущности](luis-concept-entity-types.md) и помечайте их в примерах высказываний.

## <a name="dont-create-phrase-lists-with-all-the-possible-values"></a>Не создавайте списки фраз со всеми возможными значениями

Укажите несколько примеров в [списках фраз](luis-concept-feature.md) , но не каждое слово или фразу. LUIS обобщает указанные примеры и учитывает контекст.

## <a name="dont-add-many-patterns"></a>Не добавляйте слишком много шаблонов

Не добавляйте слишком много [шаблонов](luis-concept-patterns.md). LUIS быстрее пройдет обучение с меньшим количеством примеров. Не перегружайте систему без необходимости.

## <a name="dont-train-and-publish-with-every-single-example-utterance"></a>Не выполняйте обучение и публикацию для каждого добавленного примера высказывания

Добавьте 10–15 высказываний перед обучением и публикацией. Это позволит оценить влияние на точность прогнозирования. Добавление одного высказывания может не оказать существенного влияния на оценку.

## <a name="next-steps"></a>Дальнейшие шаги

* Узнайте, как [спланировать свое приложение](luis-how-plan-your-app.md) LUIS.
