---
title: Настройка службы QnA Maker QnA Maker
description: Перед созданием базы знаний службы QnA Maker необходимо настроить эту службу в Azure. Настроить службу QnA Maker может любой пользователь с правами на создание ресурсов в подписке.
ms.service: cognitive-services
ms.subservice: qna-maker
ms.topic: conceptual
ms.date: 11/09/2020
ms.openlocfilehash: 5185e7d0bd60eec239f1233db7f9789cbefc2c10
ms.sourcegitcommit: 642988f1ac17cfd7a72ad38ce38ed7a5c2926b6c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/18/2020
ms.locfileid: "94873545"
---
# <a name="manage-qna-maker-resources"></a>Управление ресурсами QnA Maker

Перед созданием базы знаний службы QnA Maker необходимо настроить эту службу в Azure. Настроить службу QnA Maker может любой пользователь с правами на создание ресурсов в подписке.

Перед созданием ресурса полезно ознакомиться со следующими концепциями.

* [Ресурсы QnA Maker](../Concepts/azure-resources.md)
* [Создание и публикация ключей](../Concepts/azure-resources.md#keys-in-qna-maker)

## <a name="create-a-new-qna-maker-service"></a>Создание службы QnA Maker

# <a name="qna-maker-ga-stable-release"></a>[Общедоступная версия QnA Maker (стабильный выпуск)](#tab/v1)

Эта процедура создает ресурсы Azure, необходимые для управления содержимым базы знаний. После выполнения этих действий вы найдете ключи _подписки_ на странице **ключи** для ресурса в портал Azure.

1. Войдите в портал Azure и создайте ресурс [QnA Maker](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesQnAMaker) .

1. Выберите **создать** после прочтения условий:

    ![Создание службы QnA Maker](../media/qnamaker-how-to-setup-service/create-new-resource-button.png)

1. В **QnA Maker** выберите соответствующие уровни и регионы.

    ![Создание службы QnA Maker — ценовая категория и регионы](../media/qnamaker-how-to-setup-service/enter-qnamaker-info.png)

    * В поле **имя** введите уникальное имя для указания этой службы QnA Maker. Это имя также определяет конечную точку QnA Maker, с которой будут связаны базы знаний.
    * Выберите **подписку** , в которой будет развернут ресурс QnA Maker.
    * Выберите **ценовую категорию** для служб управления QnA Maker (API портала и управления). См. [Дополнительные сведения о ценах на SKU](https://aka.ms/qnamaker-pricing).
    * Создайте новую **группу ресурсов** (рекомендуется) или используйте существующую, чтобы развернуть этот QnA Maker ресурс. QnA Maker создает несколько ресурсов Azure. При создании группы ресурсов для хранения этих ресурсов можно легко находить эти ресурсы, управлять ими и удалять их по имени группы ресурсов.
    * Выберите **расположение группы ресурсов**.
    * Выберите **ценовую категорию поиска** для службы когнитивный Поиск Azure. Если параметр уровень Free недоступен (отображается серым цветом), это означает, что у вас уже есть бесплатная служба, развернутая через подписку. В этом случае необходимо начать с уровня "базовый". См. [сведения о ценах на когнитивный Поиск Azure](https://azure.microsoft.com/pricing/details/search/).
    * Выберите **место поиска** , в котором должны развертываться индексы когнитивный Поиск Azure. Ограничения на место хранения данных клиента помогут определить расположение, выбранное для Когнитивный поиск Azure.
    * В поле **имя приложения** введите имя экземпляра службы приложений Azure.
    * По умолчанию служба приложений по умолчанию имеет уровень Standard (S1). Вы можете изменить выбранный план после создания службы. Дополнительные сведения о [ценах на службу приложений](https://azure.microsoft.com/pricing/details/app-service/).
    * Выберите **расположение веб-сайта** , в котором будет развернута служба приложений.

        > [!NOTE]
        > **Расположение поиска** может отличаться от **расположения веб-сайта**.

    * Выберите, следует ли включить **Application Insights**. Если **Application Insights** включена, QnA Maker собирает данные телеметрии по трафику, журналам чата и ошибкам.
    * Выберите **расположение app Insights** , в котором будет развернут ресурс Application Insights.
    * Для экономии затрат вы можете [предоставить общий доступ](#configure-qna-maker-to-use-different-cognitive-search-resource) к некоторым (не всем) ресурсам Azure, созданным для QnA Maker.

1. После проверки всех полей выберите **создать**. Процесс создания может занять несколько минут.

1. После завершения развертывания вы увидите следующие ресурсы, созданные в вашей подписке:

   ![Ресурс, созданный в службе QnA Maker](../media/qnamaker-how-to-setup-service/resources-created.png)

    У ресурса с типом _Cognitive Services_ есть ключи _подписки_ .

### <a name="upgrade-qna-maker-sku"></a>Обновление SKU QnA Maker

Если вы хотите получить больше вопросов и ответов в базе знаний, помимо текущего уровня, обновите ценовую категорию службы QnA Maker.

Чтобы обновить номер SKU для управления службой QnA Maker, сделайте следующее:

1. Перейдите к ресурсу QnA Maker на портале Azure и выберите **Ценовая категория**.

    ![Ресурс QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-resource.png)

1. Определите соответствующий номер SKU и нажмите **Выбрать**.

    ![Цены на QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-pricing-page.png)

### <a name="upgrade-app-service"></a>Обновление службы приложений

 Если ваша база знаний должна обслуживать больше запросов из клиентского приложения, обновите ценовую категорию службы приложений.

Вы можете [увеличить](https://docs.microsoft.com/azure/app-service/manage-scale-up) или уменьшить масштаб службы приложений.

Перейдите к ресурсу службы приложений в портал Azure и выберите вариант **увеличения** **или уменьшения масштаба,** как требуется.

![Масштабирование службы приложений QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-appservice-scale.png)

### <a name="get-the-latest-runtime-updates"></a>Получение последних обновлений среды выполнения

Среда выполнения QnAMaker является частью экземпляра службы приложений Azure, который разворачивается при [создании службы QnAMaker](./set-up-qnamaker-service-azure.md) в портал Azure. Периодически устанавливаются обновления для этой среды выполнения. QnA Maker экземпляр службы приложений находится в режиме автоматического обновления после выпуска расширения сайта от апреля 2019 (версия 5 +). Это обновление предназначено для того, чтобы принимать во внимание время простоя при обновлении.

Текущую версию можно проверить по адресу https://www.qnamaker.ai/UserSettings . Если версия старше версии 5. x, необходимо перезапустить службу приложений, чтобы установить последние обновления:

1. Перейдите к службе QnAMaker (Группа ресурсов) в [портал Azure](https://portal.azure.com).

    > [!div class="mx-imgBorder"]
    > ![Группа ресурсов Azure для QnA Maker](../media/qnamaker-how-to-troubleshoot/qnamaker-azure-resourcegroup.png)

1. Выберите экземпляр службы приложений и откройте раздел **Обзор** .

    > [!div class="mx-imgBorder"]
    > ![Экземпляр службы приложений QnAMaker](../media/qnamaker-how-to-troubleshoot/qnamaker-azure-appservice.png)


1. Перезапустите службу приложений. Процесс обновления должен завершиться через пару секунд. Все зависимые приложения или программы-роботы, использующие эту службу QnAMaker, будут недоступны конечным пользователям в течение этого периода перезапуска.

    ![Перезапуск экземпляра службы приложений QnAMaker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-appservice-restart.png)

### <a name="configure-app-service-idle-setting-to-avoid-timeout"></a>Настройте параметр простоя службы приложений, чтобы избежать истечения времени ожидания

Служба приложений, которая обслуживает QnA Makerную среду выполнения прогнозирования для опубликованной базы знаний, имеет настройку времени ожидания простоя, которая по умолчанию автоматически истечет, если служба бездействует. Для QnA Maker это означает, что время ожидания API-интерфейса Женератеансвер среды выполнения прогнозирующих событий истекло после периодов отсутствия трафика.

Чтобы приложение прогнозной конечной точки загружалось даже при отсутствии трафика, установите для параметра Idle значение Always on.

1. Войдите на [портал Azure](https://portal.azure.com).
1. Найдите и выберите службу приложений для QnA Maker ресурса. Он будет иметь то же имя, что и ресурс QnA Maker, но будет иметь другой **тип** службы приложений.
1. Найдите **Параметры** и выберите **Конфигурация**.
1. На панели конфигурация выберите **Общие параметры**, найдите **Always on** и выберите **в** качестве значения.

    > [!div class="mx-imgBorder"]
    > ![На панели конфигурация выберите * * Общие параметры * *, затем найдите * * Always on * * и выберите в качестве значения * * on * *.](../media/qnamaker-how-to-upgrade-qnamaker/configure-app-service-idle-timeout.png)

1. Нажмите кнопку **сохранить** , чтобы сохранить конфигурацию.
1. Вам будет предложено перезапустить приложение, чтобы использовать новый параметр. Выберите **Continue** (Продолжить).

Дополнительные сведения о настройке [общих параметров](../../../app-service/configure-common.md#configure-general-settings)службы приложений.

### <a name="configure-app-service-environment-to-host-qna-maker-app-service"></a>Настройка Среда службы приложений для размещения службы приложений QnA Maker
Среда службы приложений можно использовать для размещения службы приложений QnA Maker. Если Среда службы приложений является внутренним, необходимо выполнить следующие действия.
1. Создайте службу приложений и службу поиска Azure.
2. Предоставьте доступ к службе приложений и разрешите доступность QnA Maker как:
    * Общедоступная — по умолчанию
    * Тег службы DNS: `CognitiveServicesManagement`
3. Создайте QnA Makerный экземпляр службы (Microsoft. CognitiveServices/Accounts) с помощью Azure Resource Manager, где QnA Maker конечная точка должна иметь значение Среда службы приложений.

### <a name="network-isolation-for-app-service"></a>Сетевая изоляция для службы приложений

Служба QnA Makerного использования службы использует тег службы: `CognitiveServicesManagement` . Выполните следующие действия, чтобы добавить диапазоны IP-адресов в разрешенных:

* Скачайте [диапазоны IP-адресов для всех тегов служб](https://www.microsoft.com/download/details.aspx?id=56519).
* Выберите IP-адреса для "Когнитивесервицесманажемент".
* Перейдите к разделу "сети" ресурса службы приложений и щелкните "настроить ограничение доступа", чтобы добавить IP-адреса в разрешенных.

Кроме того, у нас есть автоматизированный сценарий для того, чтобы сделать то же самое для службы приложений. Вы можете найти [сценарий PowerShell для настройки разрешенных](https://github.com/pchoudhari/QnAMakerBackupRestore/blob/master/AddRestrictedIPAzureAppService.ps1) на GitHub. Необходимо ввести идентификатор подписки, группу ресурсов и фактическое имя службы приложений в качестве параметров скрипта. При выполнении скрипта будут автоматически добавлены IP-адреса в службу приложений разрешенных.

### <a name="business-continuity-with-traffic-manager"></a>Непрерывность бизнес-процессов с помощью диспетчера трафика

Основная цель плана обеспечения непрерывности бизнес-процессов — создание отказоустойчивой конечной точки базы знаний, которая обеспечит отсутствие простоев бота или приложения, которые его используют.

> [!div class="mx-imgBorder"]
> ![План по обеспечению непрерывности бизнес-процессов для QnA Maker](../media/qnamaker-how-to-bcp-plan/qnamaker-bcp-plan.png)

В общих чертах для воплощения представленной выше концепции нужно сделать следующее:

1. Настройте две параллельные [службы QnA Maker](set-up-qnamaker-service-azure.md) в [сопряженных регионах Azure](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).

1. [Создайте резервную копию](../../../app-service/manage-backup.md) основной службы приложений QnA Maker и [восстановите](../../../app-service/web-sites-restore.md) ее во вторичной установке. Это обеспечит работу обеих настроек с одним и тем же именем узла и ключами.

1. Обеспечьте синхронизацию основного и дополнительного индексов поиска Azure. Используйте образец GitHub [здесь](https://github.com/pchoudhari/QnAMakerBackupRestore) , чтобы узнать, как выполнить резервное копирование для восстановления индексов Azure.

1. Создайте резервную копию Application Insights с помощью [непрерывного экспорта](../../../application-insights/app-insights-export-telemetry.md).

1. После настройки первичного и вторичного стеков воспользуйтесь [диспетчером трафика](../../../traffic-manager/traffic-manager-overview.md) для настройки двух конечных точек и метода маршрутизации.

1. Вам потребуется создать протокол TLS, ранее известный как SSL (SSL), сертификат для конечной точки диспетчера трафика. [Привяжите сертификат TLS/SSL](../../../app-service/configure-ssl-bindings.md) в службах приложений.

1. Наконец, используйте конечную точку диспетчера трафика в боте или приложении.

# <a name="qna-maker-managed-preview-release"></a>[Управляемая служба QnA Maker (предварительный выпуск)](#tab/v2)

Эта процедура создает ресурсы Azure, необходимые для управления содержимым базы знаний. После выполнения этих действий вы найдете ключи *подписки* на странице **ключи** для ресурса в портал Azure.

1. Войдите в портал Azure и создайте ресурс [QnA Maker](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesQnAMaker) .

1. Выберите **создать** после прочтения условий:

    ![Создание службы QnA Maker](../media/qnamaker-how-to-setup-service/create-new-resource-button.png)

1. В **QnA Maker** установите флажок управляемый (Предварительная версия) и выберите соответствующие уровни и регионы.

    ![Создание новой QnA Maker управляемой службы-ценовая категория и регионы](../media/qnamaker-how-to-setup-service/enter-qnamaker-v2-info.png)

    * Выберите **подписку** , в которой будет развернут ресурс QnA Maker.
    * Создайте новую **группу ресурсов** (рекомендуется) или используйте существующую, в которой будет развернут этот QnA Maker управляемый (предварительный) ресурс. QnA Maker управляемый (Предварительная версия) создает несколько ресурсов Azure. При создании группы ресурсов для хранения этих ресурсов можно легко находить эти ресурсы, управлять ими и удалять их по имени группы ресурсов.
    * В поле **имя** введите уникальное имя, чтобы обозначить эту QnA Maker управляемой службе (Предварительная версия). 
    * Выберите **Расположение** , в котором должна быть развернута служба QnA Maker Managed (Предварительная версия). API управления и конечная точка службы будут размещены в этом расположении. 
    * Выберите **ценовую категорию** для службы QnA Maker Managed (Предварительная версия) (бесплатная для предварительной версии). См. [Дополнительные сведения о ценах на SKU](https://aka.ms/qnamaker-pricing).
    * Выберите **место поиска** , в котором должны развертываться индексы когнитивный Поиск Azure. Ограничения на место хранения данных клиента помогут определить расположение, выбранное для Когнитивный поиск Azure.
    * Выберите **ценовую категорию поиска** для службы когнитивный Поиск Azure. Если параметр уровень Free недоступен (отображается серым цветом), это означает, что у вас уже есть бесплатная служба, развернутая через подписку. В этом случае необходимо начать с уровня "базовый". См. [сведения о ценах на когнитивный Поиск Azure](https://azure.microsoft.com/pricing/details/search/).

1. После проверки всех полей выберите **проверить и создать**. Процесс создания может занять несколько минут.

1. После завершения развертывания вы увидите следующие ресурсы, созданные в вашей подписке:

    ![Ресурс создал новую управляемую службу QnA Maker (Предварительная версия)](../media/qnamaker-how-to-setup-service/resources-created-v2.png)

    У ресурса с типом _Cognitive Services_ есть ключи _подписки_ .

---

## <a name="find-authoring-keys-in-the-azure-portal"></a>Поиск ключей разработки в портал Azure

# <a name="qna-maker-ga-stable-release"></a>[Общедоступная версия QnA Maker (стабильный выпуск)](#tab/v1)

Вы можете просматривать и сбрасывать ключи разработки из портал Azure, где был создан QnA Maker ресурс. Эти ключи могут называться ключами подписки.

1. Перейдите к ресурсу QnA Maker в портал Azure и выберите ресурс с типом _Cognitive Services_ :

    ![Список ресурсов QnA Maker](../media/qnamaker-how-to-key-management/qnamaker-resource-list.png)

2. К **ключам**:

    ![Ключ подписки](../media/qnamaker-how-to-key-management/subscription-key.PNG)

### <a name="find-query-endpoint-keys-in-the-qna-maker-portal"></a>Поиск ключей конечной точки запроса на портале QnA Maker

Конечная точка находится в том же регионе, что и ресурс, так как ключи конечной точки используются для выполнения вызова к базе знаний.

Ключами конечной точки можно управлять на [портале QnA Maker](https://qnamaker.ai).

1. Войдите на [портал QnA Maker](https://qnamaker.ai), перейдите к своему профилю и выберите **Параметры службы**:

    ![Ключ конечной точки](../media/qnamaker-how-to-key-management/Endpoint-keys.png)

2. Просмотр или сброс ключей:

    > [!div class="mx-imgBorder"]
    > ![Диспетчер ключей конечных точек](../media/qnamaker-how-to-key-management/Endpoint-keys1.png)

    >[!NOTE]
    >Обновите ключи, если считаете, что они скомпрометированы. Для этого может потребоваться внести соответствующие изменения в код клиентского приложения или бота.

# <a name="qna-maker-managed-preview-release"></a>[Управляемая служба QnA Maker (предварительный выпуск)](#tab/v2)

Вы можете просмотреть и сбросить ключи разработки из портал Azure, в которой был создан QnA Maker управляемый (предварительный) ресурс. Эти ключи могут называться ключами подписки.

1. Перейдите к ресурсу управляемый QnA Maker (Предварительная версия) в портал Azure и выберите ресурс с типом *Cognitive Services* :

    ![Список ресурсов для управляемого (предварительной версии) QnA Maker](../media/qnamaker-how-to-key-management/qnamaker-v2-resource-list.png)

2. Перейдите к **разделу ключи и конечная точка**:

    ![Ключ подписки управляемого (Предварительная версия) QnA Maker](../media/qnamaker-how-to-key-management/subscription-key-v2.png)

### <a name="update-the-resources"></a>Обновление ресурсов

Узнайте, как обновить ресурсы, используемые базой знаний. QnA Maker управляемый (Предварительная версия) предоставляется **бесплатно** в предварительной версии. 

---

## <a name="upgrade-the-azure-cognitive-search-service"></a>Обновление службы Когнитивный поиск Azure

# <a name="qna-maker-ga-stable-release"></a>[Общедоступная версия QnA Maker (стабильный выпуск)](#tab/v1)

Если вы планируете использовать множество баз знаний, обновите ценовую категорию службы Когнитивный поиск Azure.

Сейчас невозможно выполнить обновление на месте для номера SKU поиска Azure. Но можно создать новый ресурс Поиска Azure с требуемым номером SKU, восстановить туда данные, а затем привязать его к стеку QnA Maker. Для этого выполните следующие действия.

1. Создайте новый ресурс службы "Поиск Azure" в портал Azure и выберите нужный номер SKU.

    ![Ресурс Поиска Azure в QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-azuresearch-new.png)

1. Восстановите индексы из исходного ресурса Поиска Azure на новый. См. [пример кода для восстановления резервной копии](https://github.com/pchoudhari/QnAMakerBackupRestore).

1. После восстановления данных перейдите к новому ресурсу поиска Azure, выберите **ключи** и запишите **имя** и **ключ администратора**:

    ![Ключи поиска Azure в QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-azuresearch-keys.png)

1. Чтобы связать новый ресурс службы "Поиск Azure" с QnA Makerным стеком, перейдите к QnA Makerному экземпляру служб приложений.

    ![Экземпляр службы приложений QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-resource-list-appservice.png)

1. Выберите **Параметры приложения** и измените параметры в полях **азуресеарчнаме** и **азуресеарчадминкэй** из шага 3.

    ![QnA Maker параметр службы приложений](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-appservice-settings.png)

1. Перезапустите экземпляр службы приложений.

    ![Перезапуск экземпляра службы приложений QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-appservice-restart.png)

### <a name="cognitive-search-consideration"></a>Когнитивный поиск внимание

Когнитивный поиск, как отдельный ресурс, имеет несколько различных конфигураций, о которых следует знать.

### <a name="configure-qna-maker-to-use-different-cognitive-search-resource"></a>Настройка QnA Maker для использования другого Когнитивный поиск ресурса

Если вы создаете службу QnA и ее зависимости (например, поиск) на портале, служба поиска создается и связывается со службой QnA Maker. После создания этих ресурсов можно обновить параметр службы приложений, чтобы использовать ранее существующую службу поиска, и удалить только что созданную.

Ресурс **службы приложений** QnA Maker использует ресурс когнитивный Поиск. Чтобы изменить Когнитивный поиск ресурс, используемый QnA Maker, необходимо изменить параметр в портал Azure.

1. Получите **ключ администратора** и **имя** ресурса когнитивный Поиск, который QnA Maker будет использовать.

1. Войдите в [портал Azure](https://portal.azure.com) и найдите **службу приложений** , связанную с ресурсом QnA Maker. Оба с имеют одинаковое имя.

1. Выберите **Параметры**, а затем **Конфигурация**. Отобразятся все существующие параметры для службы приложений QnA Maker.

    > [!div class="mx-imgBorder"]
    > ![Снимок экрана портал Azure отображение параметров конфигурации службы приложений](../media/qnamaker-how-to-upgrade-qnamaker/change-search-service-app-service-configuration.png)

1. Измените значения для следующих ключей:

    * **азуресеарчадминкэй**
    * **азуресеарчнаме**

1. Чтобы использовать новые параметры, необходимо перезапустить службу приложений. Выберите **Обзор**, а затем щелкните **перезапустить**.

    > [!div class="mx-imgBorder"]
    > ![Снимок экрана портал Azure перезапуска службы приложений после изменения параметров конфигурации](../media/qnamaker-how-to-upgrade-qnamaker/screenshot-azure-portal-restart-app-service.png)

При создании службы QnA с помощью шаблонов Azure Resource Manager можно создать все ресурсы и управлять созданием службы приложений для использования существующей службы поиска.

Дополнительные сведения о настройке [параметров приложения](../../../app-service/configure-common.md#configure-app-settings)службы приложений.

### <a name="configuring-cognitive-search-as-a-private-endpoint-inside-a-vnet"></a>Настройка Когнитивный поиск в качестве частной конечной точки в виртуальной сети

Когда экземпляр поиска создается во время создания QnA Maker ресурса, можно принудительно Когнитивный поиск для поддержки конфигурации частной конечной точки, созданной полностью в виртуальной сети клиента.

Чтобы использовать закрытую конечную точку, все ресурсы должны быть созданы в одном регионе.

* Ресурс QnA Maker
* новый ресурс Когнитивный поиск
* новый ресурс виртуальной сети

Выполните следующие действия в [портал Azure](https://portal.azure.com).

1. Создайте [ресурс QnA Maker](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesQnAMaker).
1. Создайте новый ресурс Когнитивный поиск с подключением к конечной точке (Data), имеющим значение _частный_. Создайте ресурс в том же регионе, в котором находится ресурс QnA Maker, созданный на шаге 1. Узнайте больше о [создании когнитивный поиск ресурса](../../../search/search-create-service-portal.md), а затем используйте эту ссылку, чтобы перейти непосредственно на [страницу создания ресурса](https://ms.portal.azure.com/#create/Microsoft.Search).
1. Создайте новый [ресурс виртуальной сети](https://ms.portal.azure.com/#create/Microsoft.VirtualNetwork-ARM).
1. Настройте виртуальную сеть на ресурсе службы приложений, созданном на шаге 1 этой процедуры.
    1. Создайте новую запись DNS в виртуальной сети для нового ресурса Когнитивный поиск, созданного на шаге 2. в Когнитивный поискный IP-адрес.
1. [Свяжите службу приложений с новым когнитивный Поиск ресурсом,](#configure-qna-maker-to-use-different-cognitive-search-resource) созданным на шаге 2. Затем можно удалить исходный ресурс Когнитивный поиск, созданный на шаге 1.

На [портале QnA Maker](https://www.qnamaker.ai/)Создайте первую базу знаний.


### <a name="inactivity-policy-for-free-search-resources"></a>Политика бездействия для бесплатных поисковых ресурсов

Если вы не используете ресурс QnA Maker, удалите все ресурсы. Если вы не удалите неиспользуемые ресурсы, ваша база знаний перестанет работать, если вы создали свободный поисковый ресурс.

Бесплатные ресурсы поиска удаляются через 90 дней без получения вызова API.

# <a name="qna-maker-managed-preview-release"></a>[Управляемая служба QnA Maker (предварительный выпуск)](#tab/v2)

Если вы планируете использовать множество баз знаний, обновите ценовую категорию службы Когнитивный поиск Azure.

Сейчас невозможно выполнить обновление на месте для номера SKU поиска Azure. Но можно создать новый ресурс Поиска Azure с требуемым номером SKU, восстановить туда данные, а затем привязать его к стеку QnA Maker. Для этого выполните следующие действия.

1. Создайте новый ресурс службы "Поиск Azure" в портал Azure и выберите нужный номер SKU.

    ![Ресурс Поиска Azure в QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/qnamaker-azuresearch-new.png)

1. Восстановите индексы из исходного ресурса Поиска Azure на новый. См. [пример кода для восстановления резервной копии](https://github.com/pchoudhari/QnAMakerBackupRestore).

1. Чтобы связать новый ресурс службы поиска Azure с QnA Maker управляемой (предварительной) службой, см. раздел ниже.

### <a name="configure-qna-maker-managed-preview-service-to-use-different-cognitive-search-resource"></a>Настройка службы QnA Maker Managed (Предварительная версия) для использования другого Когнитивный поиск ресурса

Если вы создаете службу QnA, управляемую (Предварительная версия), и ее зависимости (например, поиск) на портале, служба поиска создается и связывается с QnA Maker управляемой (предварительной) службой. После создания этих ресурсов можно обновить службу поиска на вкладке **Конфигурация** .

1. Перейдите в службу QnA Maker Managed (Предварительная версия) в портал Azure.

1. Выберите **Конфигурация** и выберите службу когнитивный Поиск Azure, которую необходимо связать с вашей QnA Maker управляемой службой (Предварительная версия).

    ![Снимок экрана: страница настройки управляемого (Предварительная версия) QnA Maker](../media/qnamaker-how-to-upgrade-qnamaker/change-search-service-configuration.png)

1. Выберите команду **Сохранить**.

> [!NOTE]
> Если вы измените службу поиска Azure, связанную с QnA Maker, вы потеряли доступ ко всем уже имеющимся в ней базам знаний. Перед изменением службы поиска Azure обязательно экспортируйте существующие базы знаний.
### <a name="inactivity-policy-for-free-search-resources"></a>Политика бездействия для бесплатных поисковых ресурсов

Если вы не используете ресурс QnA Maker, удалите все ресурсы. Если вы не удалите неиспользуемые ресурсы, ваша база знаний перестанет работать, если вы создали свободный поисковый ресурс.

Бесплатные ресурсы поиска удаляются через 90 дней без получения вызова API.

---

## <a name="delete-azure-resources"></a>Удаление ресурсов Azure

Если удалить любой из ресурсов Azure, используемых для ваших баз знаний QnA Maker, базы знаний перестанут работать. Перед удалением любых ресурсов на странице **Настройки** убедитесь, что вы экспортируете свои базы знаний.

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о [службе приложений](../../../app-service/index.yml) и службе [поиска](../../../search/index.yml).

> [!div class="nextstepaction"]
> [Узнайте, как создавать другие](../how-to/collaborate-knowledge-base.md)
