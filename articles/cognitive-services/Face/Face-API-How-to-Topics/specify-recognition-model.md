---
title: Как указать модель распознавания — API распознавания лиц
titleSuffix: Azure Cognitive Services
description: В этой статье показано, как выбрать модель распознавания для использования с приложением API распознавания лиц Azure.
services: cognitive-services
author: longli0
manager: nitinme
ms.service: cognitive-services
ms.subservice: face-api
ms.topic: conceptual
ms.date: 12/03/2019
ms.author: longl
ms.openlocfilehash: 5b84e078e3b674a539b61c07c4bb4370719e4799
ms.sourcegitcommit: 6bb98654e97d213c549b23ebb161bda4468a1997
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74771025"
---
# <a name="specify-a-face-recognition-model"></a>Указание модели распознавания лиц

В этом руководство показано, как задать модель распознавания лиц для поиска лиц, идентификации и проверки сходства с помощью API распознавания лиц Azure.

API распознавания лиц использует модели машинного обучения для выполнения операций с человеческими лицами в изображениях. Мы продолжаем улучшать точность наших моделей, основываясь на отзывах клиентов и возможностях исследования, а также доставлять эти улучшения как обновления модели. Разработчики имеют возможность указать, какую версию модели распознавания лиц следует использовать. они могут выбрать модель, которая наилучшим образом соответствует их варианту использования.

Если вы являетесь новым пользователем, рекомендуем использовать последнюю модель. Ознакомьтесь со сведениями о том, как указать его в различных операциях, избегая конфликтов модели. Если вы являетесь опытным пользователем и не уверены, следует ли переключиться на последнюю модель, перейдите к разделу [Вычисление различных моделей](#evaluate-different-models) , чтобы оценить новую модель и сравнить результаты с помощью текущего набора данных.

## <a name="prerequisites"></a>Технические условия

Вы должны быть знакомы с концепциями обнаружения и идентификации AI-лиц. Если вы не видите, ознакомьтесь с этими руководствами в первую очередь:

* [Обнаружение лиц в изображении](HowtoDetectFacesinImage.md)
* [Определение лиц в изображении](HowtoIdentifyFacesinImage.md)

## <a name="detect-faces-with-specified-model"></a>Обнаружить лица с указанной моделью

Обнаружение лиц определяет наглядные ориентиры людей и находит их границы. Он также извлекает функции и сохраняет их для использования в идентификации. Все эти сведения образуют представление одной грани.

Модель распознавания используется при извлечении характеристик лиц, поэтому при выполнении операции обнаружения можно указать версию модели.

При использовании API [Обнаружение лиц] назначьте версию модели с помощью параметра `recognitionModel`. Допустимые значения:

* `recognition_01`
* `recognition_02`

При необходимости можно указать параметр _ретурнрекогнитионмодел_ (по умолчанию **false**), чтобы указать, следует ли возвращать _рекогнитионмодел_ в ответе. Таким образом, URL-адрес запроса для REST API [Обнаружение лиц] будет выглядеть следующим образом:

`https://westus.api.cognitive.microsoft.com/face/v1.0/detect[?returnFaceId][&returnFaceLandmarks][&returnFaceAttributes][&recognitionModel][&returnRecognitionModel]&subscription-key=<Subscription key>`

При использовании клиентской библиотеки можно назначить значение для `recognitionModel`, передав строку, представляющую версию.
Если оставить его неназначенным, будет использоваться версия модели по умолчанию (_recognition_01_). См. Следующий пример кода для клиентской библиотеки .NET.

```csharp
string imageUrl = "https://news.microsoft.com/ceo/assets/photos/06_web.jpg";
var faces = await faceClient.Face.DetectWithUrlAsync(imageUrl, true, true, recognitionModel: "recognition_02", returnRecognitionModel: true);
```

## <a name="identify-faces-with-specified-model"></a>Выявление лиц с указанной моделью

API распознавания лиц может извлекать данные о лицах из изображения и связывать их с объектом **Person** (например, через вызов API [добавления лиц](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b) ), и несколько объектов **Person** можно хранить вместе в **персонграуп**. Затем можно сравнить новую грань с **персонграуп** (с помощью вызова распознавания [Face — Identify] ), и вы можете идентифицировать соответствующего пользователя в этой группе.

**Персонграуп** должен иметь одну уникальную модель распознавания для всех **пользователей**, и ее можно указать с помощью параметра `recognitionModel` при создании группы ([PersonGroup — Create] или [LargePersonGroup — Create]). Если этот параметр не указан, используется исходная модель `recognition_01`. Группа всегда будет использовать модель распознавания, в которой она была создана, и новые лица будут связаны с этой моделью при их добавлении. его нельзя изменить после создания группы. Чтобы узнать, с какой моделью настроена **персонграуп** , используйте API [Персонграуп — получение] с параметром _ретурнрекогнитионмодел_ со значением **true**.

См. Следующий пример кода для клиентской библиотеки .NET.

```csharp
// Create an empty PersonGroup with "recognition_02" model
string personGroupId = "mypersongroupid";
await faceClient.PersonGroup.CreateAsync(personGroupId, "My Person Group Name", recognitionModel: "recognition_02");
```

В этом коде создается **персонграуп** с идентификатором `mypersongroupid` и настраивается использование модели _recognition_02_ для извлечения характеристик лиц.

Соответственно, необходимо указать, какую модель следует использовать при обнаружении сторон для сравнения с этим **персонграуп** (с помощью API распознавания [Обнаружение лиц] ). Используемая модель всегда должна соответствовать конфигурации **персонграуп**. в противном случае операция завершится ошибкой из-за несовместимых моделей.

В API-интерфейсе распознавания [Face — Identify] нет изменений; необходимо указать только версию модели в обнаружении.

## <a name="find-similar-faces-with-specified-model"></a>Поиск похожих лиц с указанной моделью

Можно также указать модель распознавания для поиска подобия. Версию модели можно назначить `recognitionModel` при создании списка лиц с помощью API [Фацелист — создание] или [LargeFaceList — создание]. Если этот параметр не указан, используется исходная модель `recognition_01`. В списке лиц всегда будет использоваться модель распознавания, с которой он был создан, а новые лица будут связаны с этой моделью при их добавлении в нее. его нельзя изменить после создания. Чтобы узнать, с какой моделью настроен список лиц, используйте API [Фацелист — получение] с параметром _ретурнрекогнитионмодел_ со значением **true**.

См. Следующий пример кода для клиентской библиотеки .NET.

```csharp
await faceClient.FaceList.CreateAsync(faceListId, "My face collection", recognitionModel: "recognition_02");
```

Этот код создает список лиц с именем `My face collection`, используя модель _recognition_02_ для извлечения компонентов. При поиске похожих лиц на новом обнаруженном человеке в этом списке должно быть обнаружено, что этот человек должен[Обнаружение лиц]с помощью _recognition_02ной_ модели. Как и в предыдущем разделе, модель должна быть постоянной.

Нет изменений в [Похожее лицо — Поиск похожих] API. Вы указываете только версию модели в обнаружении.

## <a name="verify-faces-with-specified-model"></a>Проверка лиц с указанной моделью

API [Лицо — проверка] проверяет, принадлежат ли два лица одному человеку. В API проверки в отношении моделей распознавания нет изменений, но можно сравнивать только те лица, которые были обнаружены в той же модели. Таким образом, два лица должны быть обнаружены с помощью `recognition_01` или `recognition_02`.

## <a name="evaluate-different-models"></a>Оценка различных моделей

Если вы хотите сравнить производительность _recognition_01_ и _recognition_02_ моделей данных, вам потребуется:

1. Создайте две **персонграуп**с _recognition_01_ и _recognition_02_ соответственно.
1. Используйте данные изображения для обнаружения лиц и их регистрации в **человеке**s для этих двух **персонграуп**s и запуска процесса обучения с помощью API [PersonGroup — Train] Training.
1. Протестируйте с помощью [Face — Identify] и **персонграуп**s и сравните результаты.

Если обычно указывается пороговое значение достоверности (от нуля до одного, которое определяет, насколько увереннее, что модель должна определять лицо), может потребоваться использовать различные пороговые значения для разных моделей. Пороговое значение для одной модели не предназначено для совместного использования с другими и не обязательно приведет к таким же результатам.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы узнали, как указать модель распознавания для использования с разными API-интерфейсами обслуживания лиц. Затем следуйте инструкциям краткого руководства, чтобы приступить к работе с обнаружением лиц.

* [Пакет SDK для .NET для лиц](../Quickstarts/csharp-sdk.md)
* [Пакет SDK для Python для лиц](../Quickstarts/python-sdk.md)

[Обнаружение лиц]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d
[Похожее лицо — Поиск похожих]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395237
[Face — Identify]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395239
[Лицо — проверка]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523a
[PersonGroup — Create]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395244
[Персонграуп — получение]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395246
[PersonGroup Person - Add Face]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b
[PersonGroup — Train]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395249
[LargePersonGroup — Create]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/599acdee6ac60f11b48b5a9d
[Фацелист — создание]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039524b
[Фацелист — получение]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039524c
[LargeFaceList — создание]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/5a157b68d2de3616c086f2cc
