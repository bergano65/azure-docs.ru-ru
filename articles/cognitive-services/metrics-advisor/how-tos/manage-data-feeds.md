---
title: Управление веб-каналами данных в помощнике по метрикам
titleSuffix: Azure Cognitive Services
description: Узнайте, как управлять веб-каналами данных, добавленными в помощник по метрикам.
services: cognitive-services
author: mrbullwinkle
manager: nitinme
ms.service: cognitive-services
ms.subservice: metrics-advisor
ms.topic: conceptual
ms.date: 08/28/2020
ms.author: mbullwin
ms.openlocfilehash: de8d5d8e9fc5ce1df05cfd4c67ef146760e2c7e9
ms.sourcegitcommit: 2e72661f4853cd42bb4f0b2ded4271b22dc10a52
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/14/2020
ms.locfileid: "92043176"
---
# <a name="how-to-manage-your-data-feeds"></a>Руководство. Управление веб-каналами данных

Узнайте, как управлять подключенными веб-каналами данных с помощью советника по метрикам. В этой статье описывается управление веб-каналами данных в мониторе метрик.

## <a name="edit-a-data-feed"></a>Изменение веб-канала данных

> [!NOTE]
> Следующие сведения невозможно изменить после создания веб-канала данных. 
> * Идентификатор веб-канала данных
> * Время создания
> * Измерение
> * Тип источника
> * Степень детализации данных

Только администратор потока данных может вносить в него изменения. 

Чтобы приостановить или повторно активировать веб-канал данных, выполните следующие действия.

1. На странице список каналов данных щелкните операцию, которую необходимо выполнить в веб-канале данных.

2. На странице сведения о веб-канале данных нажмите кнопку **состояния** .

Чтобы удалить веб-канал данных, выполните следующие действия. 

1. На странице список каналов данных нажмите кнопку **Удалить** в веб-канале данных.

2. На странице сведения о веб-канале данных нажмите кнопку **Удалить**.

При изменении времени начала необходимо снова проверить схему. Его можно изменить с помощью команды **изменить параметры**.

##  <a name="backfill-your-data-feed"></a>Обратная продача веб-канала данных

Нажмите кнопку  **обратная** , чтобы немедленно приступать к отметке времени, чтобы устранить сбой приема или переопределить существующие данные.
- Время начала — включительно.
- Время окончания — монопольное.
- Обнаружение аномалий повторно активируется только для выбранного диапазона.

:::image type="content" source="../media/datafeeds/backfill-datafeed.png" alt-text="Веб-канал данных обратной передачи":::

## <a name="manage-permission-of-a-data-feed"></a>Управление разрешением веб-канала данных

Доступ к рабочей области контролируется ресурсом Advisor метрик, который использует Azure Active Directory для проверки подлинности. К данным метрик применяется другой уровень контроля разрешений.

Помощник по метрикам позволяет предоставлять разрешения различным группам людей в разных веб-каналах данных. Существует два типа ролей. 

- Администратор: у кого есть полный набор разрешений для управления веб-каналом данных, включая изменение и удаление.
- Средство просмотра. у кого есть доступ к представлению веб-канала данных только для чтения.
 

## <a name="advanced-settings"></a>Дополнительные параметры

При создании нового веб-канала данных существует несколько дополнительных параметров, которые можно изменить на странице сведений о веб-канале данных.

### <a name="ingestion-options"></a>Параметры приема

* **Смещение времени приема**: по умолчанию данные принимаются в соответствии с указанной гранулярностью. Например, метрика с *ежедневной* меткой времени будет принята на один день после отметки времени. Можно использовать смещение, чтобы отложить время приема с *положительным* числом или переместить его в *отрицательное* число.

* **Максимальная степень параллелизма**: Установите этот параметр, если источник данных поддерживает ограниченный параллелизм. В противном случае оставьте значение параметра по умолчанию.

* **Повторить попытку после**: Если прием данных завершился неудачей, он повторит попытку автоматически в течение периода. Начало периода — это время, когда произошло первое получение данных. Длина периода определяется в соответствии с гранулярностью. При отсутствии значения по умолчанию (-1) значение будет определяться в соответствии с детализацией, как показано ниже.
    
    | Степень детализации данных       | Прерывать Повтор через           |
    | :------------ | :--------------- |
    | Ежедневно, настраиваемый (>= 1 день), еженедельно, ежемесячно, ежегодно     | 7 дней          |
    | Ежечасно, настраиваемый (< 1 день)       | 72 ч |

* **Минимальный интервал повторных попыток**: можно указать минимальный интервал при повторной попытке извлечь данные из источника. При отсутствии значения по умолчанию (-1) интервал повторных попыток определяется в соответствии со степенью детализации, как показано ниже.
    
    | Степень детализации данных       | Минимальный интервал повторных попыток           |
    | :------------ | :--------------- |
    | Ежедневно, настраиваемое (>= 1 день), еженедельно, ежемесячно     | 30 минут          |
    | Ежечасно, настраиваемый (< 1 день)      | 10 минут. |
    | Ежегодно | 1 день          |
 
### <a name="fill-gap-when-detecting"></a>Заполнять зазор при обнаружении: 

> [!NOTE]
> Этот параметр не влияет на источник данных и не влияет на диаграммы данных, отображаемые на портале. Автоматическое заполнение происходит только при обнаружении аномалий.

Некоторые временные ряды не являются непрерывными. При отсутствии точек данных помощник по метрикам будет использовать указанное значение для их заполнения перед обнаружением аномалий для повышения точности.
Доступны следующие параметры. 

* Использование значения из предыдущей фактической точки данных. Этот параметр используется по умолчанию.
* Использование определенного значения.

### <a name="action-link-template"></a>Шаблон ссылки на действие: 

Шаблоны ссылок на действия используются для предварительной настройки URL-адресов HTTP, которые содержат заполнители `%datafeed` ,, `%metric` , `%timestamp` `%detect_config` и `%tagset` . Вы можете использовать шаблон для перенаправления аномалий или инцидента на конкретный URL-адрес для детализации.

:::image type="content" source="../media/action-link-template.png" alt-text="Веб-канал данных обратной передачи" lightbox="../media/action-link-template.png":::

Когда вы заполните ссылку действие, щелкните **ссылку переход к действию** в параметре действия в списке инцидентов и контекстное меню дерева инцидентов. Замените заполнители в шаблоне ссылки на действие соответствующими значениями аномалии или инцидента.

| Заполнитель | Примеры | Комментарий |
| ---------- | -------- | ------- |
| `%datafeed` | - | Идентификатор веб-канала данных |
| `%metric` | - | ИДЕНТИФИКАТОР метрики |
| `%detect_config` | - | Определение идентификатора конфигурации |
| `%timestamp` | - | Метка времени аномалии или времени окончания постоянного инцидента |
| `%tagset` | `%tagset`, <br> `[%tagset.get("Dim1")]`, <br> `[ %tagset.get("Dim1", "filterVal")]` | Значения измерения аномалии или самой неизвестной аномалии инцидента.   <br> `filterVal`Используется для фильтрации совпадающих значений в квадратных скобках.   |

Примеров

* Если шаблон ссылки на действие имеет значение `https://action-link/metric/%metric?detectConfigId=%detect_config` ,
  * Ссылка Action (действие) `https://action-link/metric/1234?detectConfigId=2345` будет переходить на аномалии или инциденты в разделе метрика `1234` и определять конфигурацию `2345` .

* Если шаблон ссылки на действие имеет значение `https://action-link?[Dim1=%tagset.get('Dim1','')&][Dim2=%tagset.get('Dim2','')]` , 
    * Ссылка действия будет иметь `https://action-link?Dim1=Val1&Dim2=Val2` значение, если аномалией является `{ "Dim1": "Val1", "Dim2": "Val2" }` . 
    * Ссылка действия будет в `https://action-link?Dim2=Val2` случае аномалии `{ "Dim1": "", "Dim2": "Val2" } ` , так как `[Dim1=***&]` для значения измерения пустая строка пропускается. 

* Если шаблон ссылки на действие имеет значение `https://action-link?filter=[Name/Dim1 eq '%tagset.get('Dim1','')' and ][Name/Dim2 eq '%tagset.get('Dim2','')']` , 
    * Ссылка на действие будет иметь `https://action-link?filter=Name/Dim1 eq 'Val1' and Name/Dim2 eq 'Val2'` значение, если аномалией является `{ "Dim1": "Val1", "Dim2": "Val2" }` , 
    * Ссылка на действие может быть, `https://action-link?filter=Name/Dim2 eq 'Val2'` когда аномалия `{ "Dim1": "", "Dim2": "Val2" }` `[Name/Dim1 eq '***' and ]` пропускается, если значение измерения пустая строка. 
   
### <a name="data-feed-not-available-alert-settings"></a>Параметры предупреждения "поток данных недоступен"

Веб-канал данных считается недоступным, если данные не принимаются из источника в течение льготного периода, указанного с момента начала приема веб-канала данных. В этом случае срабатывает предупреждение.

Чтобы настроить оповещение, сначала необходимо [создать обработчик](alerts.md#create-a-hook) . Оповещения будут отправляться через настроенный обработчик.

* **Льготный период**. параметр льготного периода используется, чтобы определить, когда следует отправлять предупреждение, если никакие точки данных не принимаются. Контрольная точка — это время первого приема. В случае сбоя приема помощник по метрикам будет выполнять попытку через обычный интервал, заданный на уровне гранулярности. Если по истечении льготного периода он продолжит работать, будет отправлено предупреждение.

* **Автоматическая отсрочка**: Если этот параметр имеет значение 0, то каждая метка времени с *недоступными* активирует предупреждение. Если задан параметр, отличный от нуля, то непрерывные метки времени после первой метки времени с *недоступными* будут запущены в соответствии с заданным параметром.

## <a name="next-steps"></a>Дальнейшие действия
- [Настройка метрик и детальная настройка конфигурации обнаружения](configure-metrics.md)
- [Настройка обнаружения аномалий с помощью обратной связи](anomaly-feedback.md)
- [Диагностика инцидента](diagnose-incident.md).
