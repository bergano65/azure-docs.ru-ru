---
title: Шифрование неактивных данных в преобразователе
titleSuffix: Azure Cognitive Services
description: Шифрование неактивных данных в преобразователе.
author: erindormier
manager: venkyv
ms.service: cognitive-services
ms.subservice: translator-text
ms.topic: conceptual
ms.date: 05/26/2020
ms.author: egeaney
ms.openlocfilehash: 0a4a1f49735a30d7ad764e7f031610eabd09763e
ms.sourcegitcommit: fc718cc1078594819e8ed640b6ee4bef39e91f7f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2020
ms.locfileid: "83995774"
---
# <a name="translator-encryption-of-data-at-rest"></a>Шифрование неактивных данных в преобразователе

Переводчик автоматически шифрует ваши данные, которые передаются для создания настраиваемых моделей перевода, когда они сохраняются в облаке, что помогает удовлетворить требования к безопасности и соответствию вашей организации.

## <a name="about-cognitive-services-encryption"></a>Сведения о шифровании Cognitive Services

Данные шифруются и расшифровываются с помощью [fips 140-2](https://en.wikipedia.org/wiki/FIPS_140-2) , совместимого с [256-БИТНЫМ](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard) шифрованием AES. Шифрование и расшифровка прозрачны, то есть Управление шифрованием и доступом осуществляется за вас. Данные по умолчанию безопасны, и вам не нужно изменять код или приложения, чтобы воспользоваться преимуществами шифрования.

## <a name="about-encryption-key-management"></a>Сведения об управлении ключами шифрования

По умолчанию в подписке используются ключи шифрования, управляемые корпорацией Майкрософт. Если вы используете ценовую категорию, поддерживающую управляемые клиентом ключи, вы можете увидеть параметры шифрования для ресурса в разделе " **Шифрование** " [портал Azure](https://portal.azure.com), как показано на следующем рисунке.

![Просмотр параметров шифрования](../media/cognitive-services-encryption/encryptionblade.png)

Для подписок, которые поддерживают только ключи шифрования, управляемые корпорацией Майкрософт, раздел **ENCRYPTION** будет отсутствовать.

## <a name="customer-managed-keys-with-azure-key-vault"></a>Управляемые клиентом ключи с использованием Azure Key Vault

Существует также возможность управлять подпиской с помощью собственных ключей. Ключи, управляемые клиентом (CMK), также известные как собственный ключ (BYOK), обеспечивают большую гибкость при создании, повороте, отключении и отмене контроля доступа. Кроме того, можно выполнять аудит ключей шифрования, используемых для защиты данных.

> [!IMPORTANT]
> Ключи, управляемые клиентом, доступны для всех ценовых категорий службы переводчиков. Чтобы запросить возможность использования управляемых клиентом ключей, заполните и отправьте [форму запроса ключа, управляемого клиентом транслятора](https://aka.ms/cogsvc-cmk) . это займет около 3-5 рабочих дней, чтобы узнать о состоянии вашего запроса. В зависимости от спроса вы можете поместить в очередь и утвердить, как только пространство станет доступным. После утверждения для использования CMK со службой переводчика необходимо создать новый ресурс переводчика. После создания ресурса переводчика можно использовать Azure Key Vault для настройки управляемого удостоверения.

Выполните следующие действия, чтобы включить управляемые клиентом ключи для переводчика:

1. Создайте новый региональный переводчик или региональный Cognitive Services ресурс. Это не будет работать с глобальным ресурсом.
2. Включить управляемое удостоверение в портал Azure и добавить сведения о ключе, управляемом клиентом.
3. Создайте новую рабочую область в пользовательском трансляторе и свяжите эту информацию о подписке.

[!INCLUDE [cognitive-services-cmk](../../../includes/cognitive-services-cmk-regions.md)]

### <a name="enable-customer-managed-keys"></a>Включить управляемые клиентом ключи

Для хранения ключей, управляемых клиентом, необходимо использовать Azure Key Vault. Можно либо создать собственные ключи и сохранить их в хранилище ключей, либо использовать Azure Key Vault API для создания ключей. Ресурс Cognitive Services и хранилище ключей должны находиться в одном и том же регионе и в одном клиенте Azure Active Directory (Azure AD), но могут находиться в разных подписках. Дополнительные сведения о Azure Key Vault см. в разделе [что такое Azure Key Vault?](https://docs.microsoft.com/azure/key-vault/key-vault-overview).

Новый ресурс Cognitive Services всегда шифруется с помощью ключей, управляемых корпорацией Майкрософт. Невозможно включить управляемые клиентом ключи на момент создания ресурса. Ключи, управляемые клиентом, хранятся в Azure Key Vault, а хранилище ключей должно быть подготовлено с политиками доступа, которые предоставляют ключевые разрешения для управляемого удостоверения, связанного с ресурсом Cognitive Services. Управляемое удостоверение доступно сразу после создания ресурса.

Сведения об использовании управляемых клиентом ключей с Azure Key Vault для шифрования Cognitive Services см. в следующих статьях:

- [Настройте ключи, управляемые клиентом, с помощью Key Vault для Cognitive Servicesного шифрования из портал Azure](../Encryption/cognitive-services-encryption-keys-portal.md)

Включение управляемых ключей клиентов также позволит назначить управляемое системой удостоверение, компонент Azure AD. После включения управляемого удостоверения, назначенного системой, этот ресурс будет зарегистрирован в Azure Active Directory. После регистрации управляемому удостоверению будет предоставлен доступ к Key Vault, выбранному во время настройки управляемого ключа клиента. Дополнительные сведения об [управляемых удостоверениях](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview)см. здесь.

> [!IMPORTANT]
> При отключении управляемых удостоверений, назначенных системой, доступ к хранилищу ключей будет удален, а все данные, зашифрованные с помощью ключей клиента, станут недоступны. Все функции, зависящие от этих данных, перестанут работать. Все развернутые модели также будут относиться к развертыванию. Все отправленные данные будут удалены из пользовательского транслятора. Если управляемые удостоверения повторно включены, мы не будем автоматически повторно развертывать модель.

> [!IMPORTANT]
> Сейчас управляемые удостоверения не поддерживаются в сценариях работы с разными каталогами. При настройке ключей, управляемых клиентом, в портал Azure управляемое удостоверение автоматически назначается в рамках. Если впоследствии вы перемещаете подписку, группу ресурсов или ресурс из одного каталога Azure AD в другой, управляемое удостоверение, связанное с ресурсом, не передается в новый клиент, поэтому управляемые клиентом ключи могут перестать работать. Дополнительные сведения см. в статье **Передача подписки между каталогами Azure AD** в [часто задаваемых вопросах и известных проблемах с управляемыми удостоверениями для ресурсов Azure](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/known-issues#transferring-a-subscription-between-azure-ad-directories).  

### <a name="store-customer-managed-keys-in-azure-key-vault"></a>Хранение ключей, управляемых клиентом, в Azure Key Vault

Чтобы включить управляемые клиентом ключи, необходимо использовать Azure Key Vault для хранения ключей. Необходимо включить как **обратимое удаление** , так и **не очищать** свойства в хранилище ключей.

При шифровании Cognitive Services поддерживаются только ключи RSA размером 2048. Дополнительные сведения о ключах см. в разделе **Key Vault Keys** раздела [о Azure Key Vault ключах, секретах и сертификатах](https://docs.microsoft.com/azure/key-vault/about-keys-secrets-and-certificates#key-vault-keys).

> [!NOTE]
> Если все хранилище ключей удалено, данные больше не будут отображаться и все модели будут развернуты. Все отправленные данные будут удалены из пользовательского транслятора. 

### <a name="revoke-access-to-customer-managed-keys"></a>Отозвать доступ к ключам, управляемым клиентом

Чтобы отозвать доступ к ключам, управляемым клиентом, используйте PowerShell или Azure CLI. Дополнительные сведения см. в разделе [Azure Key Vault PowerShell](https://docs.microsoft.com/powershell/module/az.keyvault//) или [Azure Key Vault CLI](https://docs.microsoft.com/cli/azure/keyvault). Отзыв доступа блокирует доступ ко всем данным в Cognitive Services ресурсе, и ваши модели будут развернуты, так как ключ шифрования недоступен для Cognitive Services. Все отправленные данные также будут удалены из пользовательского транслятора.


## <a name="next-steps"></a>Дальнейшие действия

* [Дополнительные сведения о Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-overview)
