---
title: Домены событий в службе "Сетка событий Azure"
description: В этой статье описано использование Доменов событий для управления разделами в службе "Сетка событий Azure".
services: event-grid
author: banisadr
ms.service: event-grid
ms.author: babanisa
ms.topic: conceptual
ms.date: 11/01/2018
ms.openlocfilehash: b5a1e521f46da7feffd2eb556ad1662a9ccaee55
ms.sourcegitcommit: 799a4da85cf0fec54403688e88a934e6ad149001
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/02/2018
ms.locfileid: "50913842"
---
# <a name="understand-event-domains-for-managing-event-grid-topics"></a>Общие сведения о доменах событий, используемых для управления разделами службы "Сетка событий Azure"

В этой статье описывается, как использовать домены событий для управления потоком настраиваемых событий для различных бизнес-организаций, клиентов или приложений. Домены событий можно использовать для выполнения следующих задач:

* Управление мультитенантными архитектурами обработки событий в масштабе.
* Управление аутентификацией и авторизацией.
* Распределение разделов без необходимости управлять каждым из них по отдельности.
* Избежание индивидуальной публикации в каждой конечной точке раздела.

[!INCLUDE [event-grid-preview-feature-note.md](../../includes/event-grid-preview-feature-note.md)]

## <a name="event-domain-overview"></a>Обзор домена событий

Домен событий — это инструмент управления для большого количества разделов Сетки событий, связанных с одним и тем же приложением. Его можно считать метаразделом, в котором может содержаться тысячи отдельных разделов.

Благодаря доменам событий вам становится доступна архитектура, используемая в службах Azure (служба хранилища и Центр Интернета вещей), предоставляющая возможность публикации событий. Они позволяют публиковать события во множестве разделов. Домены также обеспечивают авторизацию и аутентификацию в каждом разделе, чтобы вы могли разделить свои клиенты.

### <a name="example-use-case"></a>Примеры использования

Работу доменов событий можно легко объяснить на примере. Допустим, вы запустили строительный механизм Contoso для производства тракторов, землеройного оборудования и другого тяжелого оборудования. В рамках ведения бизнеса вы отправляете клиентам сведения в режиме реального времени об обслуживании оборудования, работоспособности системы, обновлениях контрактов. Вся эта информация поступает на различные конечные точки, включая ваше приложение, конечные точки клиента и другие настроенные компоненты инфраструктуры.

Домены событий позволяют моделировать строительный механизм Contoso как единый объект событий. Каждый из ваших клиентов представляется как раздел в пределах домена. Проверка подлинности и авторизация выполняются с помощью Azure Active Directory. Каждый из этих клиентов может подписаться на свой раздел и настроить отправку событий в него. Благодаря управляемому доступу через домен событий клиенты получают доступ только к своим разделам.

Вы также получаете единую конечную точку, в которой можете публиковать все ваши клиентские события. Служба "Сетка событий" уведомляет каждый раздел о событиях клиента.

![Пример конструкции Contoso](./media/event-domains/contoso-construction-example.png)

## <a name="access-management"></a>управление доступом

Использование домена гарантирует вам точное управление авторизацией и проверкой подлинности в каждом разделе за счет применения проверки доступа на основе ролей Azure (RBAC). С помощью этих ролей вы можете ограничивать каждого клиента в приложении для использования только тех разделов, к которым вы хотите предоставить доступ.

RBAC в доменах событий работает так же, как [управляемый контроль доступа](security-authentication.md#management-access-control) в остальной части Сетки событий и Azure. Используйте RBAC для создания и применения определений настраиваемых ролей в доменах событий.

### <a name="built-in-roles"></a>Встроенные роли

В целях упрощения RBAC для работы с доменами событий в службе "Сетка событий" доступны два определения встроенных ролей. Это **Участник EventGrid EventSubscription (предварительная версия)** и **Читатель EventGrid EventSubscription (предварительная версия)**. Вы назначаете эти роли пользователям, которым необходимо подписаться на разделы в вашем домене событий. Вы ограничиваете назначение роли разделом, на который пользователям необходимо подписаться.

Сведения об этих ролях см. в разделе [Встроенные роли для службы "Сетка событий"](security-authentication.md#built-in-roles).

## <a name="subscribing-to-topics"></a>Подписка на разделы

Подписка на события в разделе в домене событий похожа на [создание подписки на события в настраиваемом разделе](./custom-event-quickstart.md) или на подписку на событие из службы Azure.

### <a name="domain-scope-subscriptions"></a>Подписки на область Домена

Домены событий также позволяют оформить подписку на область домена. В случае подписки на события в домене событий вы получаете все события, отправленные в домен, независимо от раздела, в который они отправляются. Подписки на область Домена могут быть необходимы для целей управления и аудита.

## <a name="publishing-to-an-event-domain"></a>Публикация в домене событий

При создании домена событий вам предоставляется конечная точка публикации точно так же, как при создании раздела в Сетке событий. 

Чтобы опубликовать события в любом разделе в домене событий, отправьте события в конечную точку домена [так же, как и для настраиваемого раздела](./post-to-custom-topic.md). Единственное различие заключается в том, что вы должны указать раздел, в который хотите отправить событие.

Например, при публикации следующего массива событий в раздел `foo` будет отправлено событие с `"id": "1111"`, в то время как событие с `"id": "2222"` будет отправлено в раздел `bar`:

```json
[{
  "topic": "foo",
  "id": "1111",
  "eventType": "maintenanceRequested",
  "subject": "myapp/vehicles/diggers",
  "eventTime": "2018-10-30T21:03:07+00:00",
  "data": {
    "make": "Contoso",
    "model": "Small Digger"
  },
  "dataVersion": "1.0"
},
{
  "topic": "bar",
  "id": "2222",
  "eventType": "maintenanceCompleted",
  "subject": "myapp/vehicles/tractors",
  "eventTime": "2018-10-30T21:04:12+00:00",
  "data": {
    "make": "Contoso",
    "model": "Big Tractor"
  },
  "dataVersion": "1.0"
}]
```

Домены событий выполняют публикацию в разделы автоматически. Вместо того, чтобы публиковать события в каждом управляемом вами разделе отдельно, вы можете опубликовать все свои события в конечной точке домена, а Сетка событий позаботится о том, чтобы каждое событие было отправлено в нужный раздел.

## <a name="limits-and-quotas"></a>Ограничения и квоты

### <a name="control-plane"></a>Уровень управления

На этапе предварительной версии количество разделов в доменах событий ограничено до 1000, а количество подписок на события в разделе — до 50. Количество подписок на область домена событий также ограничено до 50.

### <a name="data-plane"></a>Плоскость данных

На этапе предварительной версии пропускная способность событий для домена событий будет ограничена тем же самым количеством событий, что и настраиваемые разделы (5000 событий в секунду).

## <a name="pricing"></a>Цены

На этапе предварительной версии для доменов событий будут применятся те же [цены на операции](https://azure.microsoft.com/pricing/details/event-grid/), что и для остальных функций в Сетке событий.

Операции работают в доменах событий точно так же, как и в настраиваемых разделах. Каждое поступление события в домене событий является операцией, и каждая попытка отправки события также является операцией.

## <a name="next-steps"></a>Дополнительная информация

* Сведения о настройке доменов событий, создании разделов, оформлении подписок на события и публикации событий см. в статье [Управление разделами и публикация событий с помощью Доменов событий](./how-to-event-domains.md).