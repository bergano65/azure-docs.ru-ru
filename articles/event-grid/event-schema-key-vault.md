---
title: Azure Key Vault в качестве источника сетки событий
description: Описание свойств и схемы, предоставленных для Azure Key Vault событий с помощью службы "Сетка событий Azure"
ms.topic: conceptual
ms.date: 02/11/2021
ms.openlocfilehash: ea8821b15000b74a10f28730ccf82b538e7819e5
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100363412"
---
# <a name="azure-key-vault-as-event-grid-source"></a>Azure Key Vault в качестве источника сетки событий

В этой статье приводятся свойства и схема событий в [Azure Key Vault](../key-vault/index.yml). Общие сведения о схемах событий см. в статье [Схема событий службы "Сетка событий Azure"](event-schema.md).


## <a name="available-event-types"></a>Доступные типы событий

Учетная запись Azure Key Vault создает следующие типы событий:

| Полное имя события | Отображаемое имя события | Описание |
| ---------- | ----------- |---|
| Microsoft. KeyVault. Цертификатеневверсионкреатед | Создана новая версия сертификата | Активируется при создании нового сертификата или версии нового сертификата. |
| Microsoft. KeyVault. Цертификатенеарекспири | Срок действия сертификата приближается к истечению | Активируется, когда истекает срок действия текущей версии сертификата. (Событие активируется за 30 дней до даты окончания срока действия.) |
| Microsoft. KeyVault. Цертификатикспиред | Срок действия сертификата истек | Активируется по истечении срока действия сертификата. |
| Microsoft. KeyVault. Кэйневверсионкреатед | Создана новая версия | Активируется при создании нового ключа или новой версии ключа. |
| Microsoft. KeyVault. Кэйнеарекспири | Ключ приближается к истечению срока действия | Активируется при истечении срока действия текущей версии ключа. (Событие активируется за 30 дней до даты окончания срока действия.) |
| Microsoft. KeyVault. Кэйекспиред | Истек срок действия ключа | Активируется при истечении срока действия ключа. |
| Microsoft. KeyVault. Секретневверсионкреатед | Создана секретная новая версия | Активируется при создании новой секретной или новой версии секрета. |
| Microsoft. KeyVault. Секретнеарекспири | Срок действия секрета приближается | Активируется, когда истекает срок действия текущей версии секрета. (Событие активируется за 30 дней до даты окончания срока действия.) |
| Microsoft. KeyVault. Секретекспиред | Срок действия секрета истек | Активируется по истечении срока действия секрета. |
| Microsoft. KeyVault. Ваултакцессполицичанжед | Политика доступа к хранилищу изменена | Активируется при изменении политики доступа на Key Vault. Он включает сценарий при изменении модели разрешений Key Vault на управление доступом на основе ролей Azure.   |

## <a name="event-examples"></a>Примеры событий

# <a name="event-grid-event-schema"></a>[Схема событий службы "Сетка событий Azure"](#tab/event-grid-event-schema)

В следующем примере показана схема для **Microsoft. KeyVault. секретневверсионкреатед**:

```JSON
[
   {
      "id":"00eccf70-95a7-4e7c-8299-2eb17ee9ad64",
      "topic":"/subscriptions/{subscription-id}/resourceGroups/sample-rg/providers/Microsoft.KeyVault/vaults/sample-kv",
      "subject":"newsecret",
      "eventType":"Microsoft.KeyVault.SecretNewVersionCreated",
      "eventTime":"2019-07-25T01:08:33.1036736Z",
      "data":{
         "Id":"https://sample-kv.vault.azure.net/secrets/newsecret/ee059b2bb5bc48398a53b168c6cdcb10",
         "vaultName":"sample-kv",
         "objectType":"Secret",
         "objectName ":"newsecret",
         "version":" ee059b2bb5bc48398a53b168c6cdcb10",
         "nbf":"1559081980",
         "exp":"1559082102"
      },
      "dataVersion":"1",
      "metadataVersion":"1"
   }
]
```

# <a name="cloud-event-schema"></a>[Схема событий облака](#tab/cloud-event-schema)

В следующем примере показана схема для **Microsoft. KeyVault. секретневверсионкреатед**:

```JSON
[
   {
      "id":"00eccf70-95a7-4e7c-8299-2eb17ee9ad64",
      "source":"/subscriptions/{subscription-id}/resourceGroups/sample-rg/providers/Microsoft.KeyVault/vaults/sample-kv",
      "subject":"newsecret",
      "type":"Microsoft.KeyVault.SecretNewVersionCreated",
      "time":"2019-07-25T01:08:33.1036736Z",
      "data":{
         "Id":"https://sample-kv.vault.azure.net/secrets/newsecret/ee059b2bb5bc48398a53b168c6cdcb10",
         "vaultName":"sample-kv",
         "objectType":"Secret",
         "objectName ":"newsecret",
         "version":" ee059b2bb5bc48398a53b168c6cdcb10",
         "nbf":"1559081980",
         "exp":"1559082102"
      },
      "specversion":"1.0"
   }
]
```

---

### <a name="event-properties"></a>Свойства события

# <a name="event-grid-event-schema"></a>[Схема событий службы "Сетка событий Azure"](#tab/event-grid-event-schema)
Событие содержит следующие высокоуровневые данные:

| Свойство | Type | Описание |
| -------- | ---- | ----------- |
| `topic` | строка | Полный путь к ресурсу для источника событий. Это поле защищено от записи. Это значение предоставляет служба "Сетка событий". |
| `subject` | строка | Определенный издателем путь к субъекту событий. |
| `eventType` | строка | Один из зарегистрированных типов событий для этого источника событий. |
| `eventTime` | строка | Время создания события с учетом времени поставщика в формате UTC. |
| `id` | строка | Уникальный идентификатор события. |
| `data` | object | Данные события конфигурации приложения. |
| `dataVersion` | строка | Версия схемы для объекта данных. Версию схемы определяет издатель. |
| `metadataVersion` | строка | Версия схемы для метаданных события. Служба "Сетка событий" определяет схему свойств верхнего уровня. Это значение предоставляет служба "Сетка событий". |


# <a name="cloud-event-schema"></a>[Схема событий облака](#tab/cloud-event-schema)

Событие содержит следующие высокоуровневые данные:

| Свойство | Type | Описание |
| -------- | ---- | ----------- |
| `source` | строка | Полный путь к ресурсу для источника событий. Это поле защищено от записи. Это значение предоставляет служба "Сетка событий". |
| `subject` | строка | Определенный издателем путь к субъекту событий. |
| `type` | строка | Один из зарегистрированных типов событий для этого источника событий. |
| `time` | строка | Время создания события с учетом времени поставщика в формате UTC. |
| `id` | строка | Уникальный идентификатор события. |
| `data` | object | Данные события конфигурации приложения. |
| `specversion` | строка | Версия спецификации схемы Клаудевентс. |

---
 

Объект данных имеет следующие свойства:

| Свойство | Type | Описание |
| ---------- | ----------- |---|
| `id` | строка | Идентификатор объекта, вызвавшего это событие |
| `vaultName` | строка | Имя хранилища ключей для объекта, запустившего это событие. |
| `objectType` | строка | Тип объекта, вызвавшего это событие |
| `objectName` | строка | Имя объекта, запустившего это событие |
| `version` | строка | Версия объекта, вызвавшего это событие |
| `nbf` | число | Дата недоступности в секундах с 1970-01-01T00:00:00Z объекта, который инициировал это событие |
| `exp` | число | Дата окончания срока действия в секундах с 1970-01-01T00:00:00Z объекта, который инициировал это событие |

## <a name="tutorials-and-how-tos"></a>Руководства и инструкции
|Заголовок  |Описание  |
|---------|---------|
| [Мониторинг событий Key Vault с помощью службы "Сетка событий Azure"](../key-vault/general/event-grid-overview.md) | Общие сведения об интеграции Key Vault со службой "Сетка событий". |
| [Учебник. Создание и отслеживание событий Key Vault с помощью сетки событий](../key-vault/general/event-grid-logicapps.md) | Узнайте, как настроить уведомления в сетке событий для Key Vault. |


## <a name="next-steps"></a>Следующие шаги

* Общие сведения о службе "Сетка событий Azure" см. в статье [что такое сетка событий](overview.md).
* Дополнительные сведения о создании подписки на службу "Сетка событий Azure" см. в разделе [Схема подписки службы "Сетка событий](subscription-creation-schema.md)".
* Дополнительные сведения о Key Vault см. в разделе [что такое Azure Key Vault?](../key-vault/general/overview.md)

