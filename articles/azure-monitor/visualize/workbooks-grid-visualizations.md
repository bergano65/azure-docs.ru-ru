---
title: Azure Monitor визуализаций сетки книг
description: Сведения о всех Azure Monitor визуализациях сетки книг.
services: azure-monitor
author: lgayhardt
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 09/04/2020
ms.author: lagayhar
ms.openlocfilehash: 114245030ba2356861b83a580f103d3b84c0eae3
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100622623"
---
# <a name="grid-visualizations"></a>Визуализации сеток

Сетки или таблицы являются обычным способом представления данных пользователям. Книги позволяют пользователям по отдельности отформатировать столбцы сетки, чтобы обеспечить многофункциональный пользовательский интерфейс для своих отчетов.

В приведенном ниже примере показана сетка, объединяющая значки, тепловые карты и панели Spark для представления сложной информации. Книга также обеспечивает сортировку, поле поиска и кнопку Go to Analytics.

[![Снимок экрана: сетка на основе журнала](./media/workbooks-grid-visualizations/grid.png)](./media/workbooks-grid-visualizations/grid.png#lightbox)

## <a name="adding-a-log-based-grid"></a>Добавление сетки на основе журнала

1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов **изменить** .
2. Используйте ссылку **Добавить запрос** , чтобы добавить в книгу элемент управления "запрос журнала".
3. Выберите тип запроса в поле **Журнал**, тип ресурса (например, Application Insights) и ресурсы для целевого объекта.
4. Используйте редактор запросов, чтобы ввести ККЛ для анализа (например, виртуальные машины с памятью ниже порогового значения).
5. Задание представления в **виде сетки**
6. При необходимости задайте другие параметры, например диапазон времени, размер, палитра цветов и условные обозначения.

[![Снимок экрана запроса сетки на основе журнала](./media/workbooks-grid-visualizations/grid-query.png)](./media/workbooks-grid-visualizations/grid-query.png#lightbox)

## <a name="log-chart-parameters"></a>Параметры диаграммы журнала

| Параметр | Объяснение | Пример |
| ------------- |:-------------|:-------------|
| `Query Type` | Тип используемого запроса. | Журнал, граф ресурсов Azure и т. д. |
| `Resource Type` | Целевой тип ресурса. | Application Insights, Log Analytics или Azure — First |
| `Resources` | Набор ресурсов, из которого нужно получить значение метрик. | MyApp1 |
| `Time Range` | Окно времени для просмотра диаграммы журнала. | Последний час, последние 24 часа и т. д. |
| `Visualization` | Используемая визуализация. | Макет Grid |
| `Size` | Вертикальный размер элемента управления. | Малый, средний, крупный или полный |
| `Query` | Любой запрос ККЛ, возвращающий данные в формате, ожидаемом визуализацией диаграммы. | _запросы \| суммировать запросы = Count () по имени_ |

## <a name="simple-grid"></a>Простая сетка

Книги могут визуализировать результаты ККЛ в виде простой таблицы. В таблице ниже показано количество запросов и уникальных пользователей для каждого типа запросов в приложении.

```kusto
requests
| where name !endswith('.eot')
| summarize Requests = count(), Users = dcount(user_Id) by name
| order by Requests desc
```

[![Снимок экрана: сетка на основе журнала в режиме редактирования](./media/workbooks-grid-visualizations/log-chart-simple-grid.png)](./media/workbooks-grid-visualizations/log-chart-simple-grid.png#lightbox)

## <a name="grid-styling"></a>Стилизация сетки

Хотя в простой таблице показаны данные, трудно читать и наглядно понять, что не всегда очевидно. Стилизация сетки может облегчить чтение и интерпретацию данных.

Ниже приведена та же сетка из предыдущего раздела, в стиле тепловые карты.

[![Снимок экрана: сетка на основе журнала со столбцами, имеющими стиль тепловые карты](./media/workbooks-grid-visualizations/log-chart-grid-heatmap.png)](./media/workbooks-grid-visualizations/log-chart-grid-heatmap.png#lightbox)

Ниже показана та же сетка, что и в виде столбиков: [ ![ снимок экрана с таблицей на основе журнала со столбцами, оформленными в виде столбцов](./media/workbooks-grid-visualizations/log-chart-grid-bar.png)](./media/workbooks-grid-visualizations/log-chart-grid-bar.png#lightbox) .

### <a name="styling-a-grid-column"></a>Стилизация столбца сетки

1. Нажмите кнопку **параметр столбца** на панели инструментов элемента управления запросом.
2. В поле *изменить параметры столбца* выберите столбец для стиля.
3. Выберите визуализатор столбца (например, тепловой карты, линейчатую диаграмму, полосу ниже и т. д.) и связанные параметры для стиля столбца.

Ниже приведен пример, в котором столбец *запроса* выдается в виде строки.

[![Снимок экрана с сеткой на основе журнала с столбцом запроса, оформленным как отрезок.](./media/workbooks-grid-visualizations/log-chart-grid-column-settings-start.png)](./media/workbooks-grid-visualizations/log-chart-grid-column-settings-start.png#lightbox)

### <a name="column-renderers"></a>Модули подготовки столбцов

| Модуль подготовки столбцов | Объяснение | Дополнительные параметры |
|:------------- |:-------------|:-------------|
| `Automatic` | По умолчанию — использует наиболее подходящий модуль подготовки отчетов, основанный на типе столбца.  |  |
| `Text` | Отображает значения столбца в виде текста. | |
| `Right Aligned` | Аналогично тексту, за исключением того, что он выдается по правому краю. | |
| `Date/Time` | Визуализирует строку даты и времени для чтения. | |
| `Heatmap` | Цвета ячейки сетки основаны на значении ячейки. | Цветовая палитра и минимальное/максимальное значение, используемые для масштабирования. |
| `Bar` | Отображает отрезок рядом с ячейкой на основе значения ячейки. | Цветовая палитра и минимальное/максимальное значение, используемые для масштабирования. |
| `Bar underneath` | Отображает полосу, расположенную в нижней части ячейки, на основе значения ячейки. | Цветовая палитра и минимальное/максимальное значение, используемые для масштабирования. |
| `Composite bar` | Визуализирует составную линейчатую диаграмму, используя указанные столбцы в этой строке. Дополнительные сведения см. в разделе [составной панели](workbooks-composite-bar.md) . | Столбцы с соответствующими цветами для отрисовки панели и метки, отображаемой в верхней части полосы. |
| `Spark bars` | Отображает строку Spark в ячейке на основе значений динамического массива в ячейке. Например, столбец тенденция на снимке экрана вверху. | Цветовая палитра и минимальное/максимальное значение, используемые для масштабирования. |
| `Spark lines` | Отображает строку Spark в ячейке на основе значений динамического массива в ячейке. | Цветовая палитра и минимальное/максимальное значение, используемые для масштабирования. |
| `Icon` | Отображает значки на основе текстовых значений в ячейке. Поддерживаемыми значениями являются: `cancelled` , `critical` ,,,, `disabled` `error` `failed` `info` , `none` , `pending` , `stopped` , `question` , `success` , `unknown` , `warning` `uninitialized` , `resource` , `up` , `down` `left` `right` `trendup` `trenddown` `4` `3` `2` `1` `Sev0` `Sev1` `Sev2` `Sev3` `Sev4` `Fired` `Resolved` `Available` `Unavailable` `Degraded` `Unknown` `Blank` ,,,,,,,,,,,,,,,,,,,,,,,,,,,, и.|  |
| `Link` | Отображает ссылку, которая при нажатии или выполняет настраиваемое действие. Используйте этот параметр, если хотите, чтобы элемент был *только* ссылкой.  Любой из других типов *также* может быть ссылкой с помощью `Make this item a link` параметра. Дополнительные сведения см. в разделе [действия связи](#link-actions) ниже. |  |
| `Location` | Отображает понятное имя региона Azure на основе идентификаторов регионов. |  |
| `Resource type` | Отображает понятную строку типа ресурса на основе идентификатора типа ресурса.  |  |
| `Resource` | Отображает понятное имя ресурса и ссылку на основе идентификатора ресурса.  | Параметр для отображения значка типа ресурса  |
| `Resource group` | Отображает понятное имя группы ресурсов и ссылку на основе идентификатора группы ресурсов. Если значение ячейки не является группой ресурсов, оно будет преобразовано в одну.  | Параметр для отображения значка группы ресурсов  |
| `Subscription` | Отображает понятное имя подписки и ссылку на основе идентификатора подписки.  Если значение ячейки не является подпиской, оно будет преобразовано в одну.  | Параметр для отображения значка подписки.  |
| `Hidden` | Скрывает столбец в сетке. Полезно, когда запрос по умолчанию возвращает больше столбцов, чем требуется, но не требуется размещение проекта. |  |

### <a name="link-actions"></a>Действия связи

Если выбран модуль `Link` подготовки отчетов или установлен флажок *сделать этот элемент ссылкой* , автор может настроить действие ссылки, которое будет выполняться при выборе ячейки. Обычно пользователь переходит в другое представление с контекстом, поступающим из ячейки, или может открыть URL-адрес.

### <a name="custom-formatting"></a>Пользовательское форматирование

Книги также позволяют пользователям задавать числовые форматы значений ячеек. Это можно сделать, установив флажок *настраиваемое форматирование* , если он доступен.

| Параметр форматирования | Объяснение |
|:------------- |:-------------|
| `Units` | Единицы измерения для столбца — различные параметры для процентного соотношения, количества, времени, байта, количества/времени, байтов, времени и т. д. Например, единица измерения для значения 1234 может быть равна миллисекундам и отображена как 1,234 s. |
| `Style` | Формат для отображения в виде десятичного, денежного, процентного формата. |
| `Show group separator` | Флажок для отображения разделителей групп. Отображает 1234 как 1 234 в США. |
| `Minimum integer digits` | Минимальное число используемых целочисленных цифр (по умолчанию 1). |
| `Minimum fractional digits` | Минимальное число знаков дробной части для использования (по умолчанию 0).  |
| `Maximum fractional digits` | Максимальное используемое число цифр дробной части. |
| `Minimum significant digits` | Минимальное используемое количество значащих цифр (по умолчанию 1). |
| `Maximum significant digits` | Максимальное количество значащих цифр, которое следует использовать. |
| `Custom text for missing values` | Если у точки данных нет значения, отобразите этот пользовательский текст вместо пустого. |

### <a name="custom-date-formatting"></a>Настраиваемое форматирование даты

Когда автор указал, что для столбца задан модуль подготовки даты и времени, автор может задать настраиваемые параметры форматирования даты, используя флажок *настраиваемое форматирование даты* .

| Параметр форматирования | Объяснение |
|:------------- |:-------------|
| `Style` | Формат для отображения даты в виде коротких, длинных, полных форматов или времени в виде коротких или длинных форматов времени. |
| `Show time as` | Позволяет автору выбрать между отображением времени в местном времени (по умолчанию) или в формате UTC. В зависимости от выбранного стиля формата даты данные в формате UTC и часового пояса могут не отображаться. |

## <a name="custom-column-width-setting"></a>Настройка настраиваемой ширины столбца

Автор может настроить ширину любого столбца в сетке, используя *настраиваемое поле ширины столбца* в *параметрах столбца*.

![Снимок экрана параметров столбца с полем пользовательской ширины столбца, указанным в красном поле](./media/workbooks-grid-visualizations/custom-column-width-setting.png)

Если поле остается черным, то ширина будет автоматически определяться на основе количества символов в столбце и количества видимых столбцов. Единицей по умолчанию является "CH" (символы).

Если нажать кнопку Blue **(Текущая ширина)** в метке, текстовое поле будет заполнено текущей шириной выбранного столбца. Если в поле Настраиваемая ширина отсутствует единица измерения, будет использоваться значение по умолчанию.

Доступны следующие единицы измерения:

| Единица измерения | Определение           |
|:--------------------|:---------------------|
| ch                  | символы (по умолчанию) |
| пкс                  | пиксели               |
| fr                  | дробные единицы     |
| %                   | процент           |

Проверка входных данных. Если проверка завершается неудачно, под полем появится сообщение с красной рекомендацией, но пользователь по-прежнему может применить эту ширину. Если в входных данных содержится значение, оно будет проанализировано. Если допустимая единица измерения не найдена, будет использоваться значение по умолчанию.

Минимальная и максимальная ширина не предусмотрена, так как это остается в соответствии с назначением автора. Поле настраиваемой ширины столбца отключено для скрытых столбцов.

## <a name="examples"></a>Примеры

### <a name="spark-lines-and-bar-underneath"></a>Строки Spark и панель ниже

В следующем примере показаны количество запросов и его тренд по имени запроса.

```kusto
requests
| make-series Trend = count() default = 0 on timestamp from ago(1d) to now() step 1h by name
| project-away timestamp
| join kind = inner (requests
    | summarize Requests = count() by name
    ) on name
| project name, Requests, Trend
| order by Requests desc
```

[![Снимок экрана: сетка на основе журнала с полосой ниже и строкой Spark](./media/workbooks-grid-visualizations/log-chart-grid-spark-line.png)](./media/workbooks-grid-visualizations/log-chart-grid-spark-line.png#lightbox)

### <a name="heatmap-with-shared-scales-and-custom-formatting"></a>Тепловой карты с общими масштабами и пользовательским форматированием

В этом примере показаны различные метрики длительности запросов и их счетчики. Модуль подготовки отчетов тепловой карты использует минимальные значения, заданные в параметрах, или вычисляет минимальное и максимальное значения для столбца и назначает цвет фона из выбранной палитры для ячейки на основе значения ячейки относительно минимального и максимального значений столбца.

```
requests
| summarize Mean = avg(duration), (Median, p80, p95, p99) = percentiles(duration, 50, 80, 95, 99), Requests = count() by name
| order by Requests desc
```

[![Снимок экрана: сетка на основе журнала с тепловой карты с общим масштабом по столбцам](./media/workbooks-grid-visualizations/log-chart-grid-shared-scale.png)](./media/workbooks-grid-visualizations/log-chart-grid-shared-scale.png#lightbox)

В приведенном выше примере для цвета столбцов используется общая палитра (зеленая или красная) и шкала (среднее, медиана, P80, P95 и P99). Отдельная палитра (синяя), используемая для столбца запроса.

#### <a name="shared-scale"></a>Общий масштаб

Чтобы получить общий масштаб, сделайте следующее:

1. Используйте регулярные выражения для выбора более чем одного столбца, чтобы применить параметр к. Например, задайте имя столбца, чтобы `Mean|Median|p80|p95|p99` выбрать их все.
2. Удаление параметров по умолчанию для отдельных столбцов.

В результате новый параметр с несколькими столбцами будет применять его параметры для включения общего масштабирования.

[![Снимок экрана с параметром сетки на основе журнала для получения общего масштаба по столбцам](./media/workbooks-grid-visualizations/log-chart-grid-shared-scale-settings.png)](./media/workbooks-grid-visualizations/log-chart-grid-shared-scale-settings.png#lightbox)

### <a name="icons-to-represent-status"></a>Значки для представления состояния

В приведенном ниже примере показано пользовательское состояние запросов на основе длительности P95.

```
requests
| summarize p95 = percentile(duration, 95) by name
| order by p95 desc
| project Status = case(p95 > 5000, 'critical', p95 > 1000, 'error', 'success'), name, p95
```

[![Снимок экрана сетки на основе журнала с тепловой карты, имеющей общий масштаб по столбцам с помощью приведенного выше запроса.](./media/workbooks-grid-visualizations/log-chart-grid-icons.png)](./media/workbooks-grid-visualizations/log-chart-grid-icons.png#lightbox)

Поддерживаются следующие имена значков: `cancelled` , `critical` , `disabled` ,, `error` `failed` , `info` , `none` , `pending` , `stopped` , `question` , `success` , `unknown` , `warning` `uninitialized` , `resource` , `up` `down` `left` `right` `trendup` `trenddown` `4` `3` `2` `1` `Sev0` `Sev1` `Sev2` `Sev3` `Sev4` `Fired` `Resolved` `Available` `Unavailable` `Degraded` `Unknown` `Blank` ,,,,,,,,,,,,,,,,,,,,,,,,,,,,, и.

### <a name="using-thresholds-with-links"></a>Использование пороговых значений со ссылками

В приведенных ниже инструкциях показано, как использовать пороговые значения со ссылками для назначения значков и открытия различных книг. Каждая ссылка в сетке откроет другой шаблон книги для этого Application Insights ресурса.

1. Переключите книгу в режим редактирования, выбрав пункт *изменить* элемент панели инструментов.
2. Выберите **Добавить** , а затем *Добавить запрос*.
3. Измените *источник данных* на "JSON" и *визуализацию* на "Grid".
4. Введите следующий запрос.

```json
[ 
    { "name": "warning", "link": "Community-Workbooks/Performance/Performance Counter Analysis" },
    { "name": "info", "link": "Community-Workbooks/Performance/Performance Insights" },
    { "name": "error", "link": "Community-Workbooks/Performance/Apdex" }
]
```

5. Выполнить запрос.
6. Выберите **Параметры столбца** , чтобы открыть параметры.
7. Выберите "имя" из *столбцов*.
8. В разделе Модуль *подготовки столбцов* выберите "пороговые значения".
9.  Введите и выберите следующие *параметры порога*.
   
    | Оператор | Значение   | Значки   |
    |----------|---------|---------|
    | ==       | warning | Предупреждение |
    | ==       | Ошибка   | Failed  |

    ![Снимок экрана: вкладка "изменить параметры столбца" с указанными выше параметрами.](./media/workbooks-grid-visualizations/column-settings.png)

    Используйте строку по умолчанию как есть. Вы можете ввести любой текст, который вам нравится. Текстовый столбец принимает строковый формат в качестве входных данных и заполняет его значением столбца и единицей, если оно указано. Например, если предупреждение является значением столбца, то текст может быть " {0} {1} Link!", он будет отображаться как "warning Link!".
10. Установите флажок *сделать этот элемент ссылкой* .
    1. В разделе *представление для открытия* выберите "книга (шаблон)".
    2. В разделе *значение ссылки поступает*, выберите "связать".
    3. Щелкните поле *Открыть ссылку в контексте* .
    4. Выберите следующие параметры в *параметрах связи с книгой* .
        1. В поле *идентификатор шаблона поступило* значение, выберите "столбец".
        2. В разделе *столбец* выберите "связь".

    ![Снимок экрана параметров связи с указанными выше параметрами.](./media/workbooks-grid-visualizations/make-this-item-a-link.png)

11. Выберите "связать" из *столбцов*. В разделе Параметры рядом с модулем *подготовки столбцов* выберите **(скрыть столбец)**.
1. Чтобы изменить отображаемое имя столбца "имя", перейдите на вкладку **метки** . В строке с именем "Name" в качестве *идентификатора столбца* в поле "метка столбца" введите имя, которое нужно отобразить.
2. Нажмите кнопку **Применить** .

![Снимок экрана с пороговыми значениями в сетке с указанными выше параметрами](./media/workbooks-grid-visualizations/thresholds-workbooks-links.png)

## <a name="fractional-units-percentages"></a>Процентные доли единиц

Дробная единица (fr) — это часто используемая динамическая единица измерения в различных типах сеток. При изменении размера и разрешения окна также изменяется ширина fr.

На снимке экрана ниже показана таблица с восемью столбцами, ширина которых равна 1fr ширине. При изменении размера окна Ширина каждого столбца изменяется пропорционально.

[![Снимок экрана: столбцы в сетке со значением ширины столбца 1fr](./media/workbooks-grid-visualizations/custom-column-width-fr.png)](./media/workbooks-grid-visualizations/custom-column-width-fr.png#lightbox)

На рисунке ниже показана одна и та же таблица, за исключением того, что для первого столбца установлено значение 50% Width. При этом для столбца будет задана половина общей ширины сетки. Изменение размера окна позволит сохранить ширину 50%, если размер окна не слишком мал. Эти динамические столбцы имеют минимальную ширину на основе их содержимого. Оставшиеся 50% сетки делятся на восемь общих десятичных единиц. В столбце "Kind", приведенном ниже, задано значение 2FR, поэтому он занимает одну четвертую часть оставшегося пространства. По мере того, как другие столбцы 1fr каждый, каждый из них занимает одну восьмую правую половину сетки.

[![Снимок экрана: столбцы в сетке с 1 значением ширины столбца 50%, а остальное 1fr](./media/workbooks-grid-visualizations/custom-column-width-fr2.png)](./media/workbooks-grid-visualizations/custom-column-width-fr2.png#lightbox)

Сочетание ширины fr,%, px и CH возможно и работает аналогично предыдущим примерам. Значения ширины, заданные статическими единицами (CH и px), являются жесткими константами, которые не меняются даже при изменении окна или разрешения. Столбцы, заданные%, будут занимать процентную долю в зависимости от общей ширины сетки (может быть неточной из-за предварительно минимальной ширины). Столбцы, заданные с помощью FR, просто разбивают оставшееся место в сетке на основе числа разделенных десятичных единиц.

[![Снимок экрана: столбцы в сетке с ассортиментом разной единицы ширины](./media/workbooks-grid-visualizations/custom-column-width-fr3.png)](./media/workbooks-grid-visualizations/custom-column-width-fr3.png#lightbox)

## <a name="next-steps"></a>Дальнейшие шаги

* Узнайте, как создать [дерево в книгах](workbooks-tree-visualizations.md).
* Узнайте, как создавать [Текстовые параметры книги](workbooks-text.md).