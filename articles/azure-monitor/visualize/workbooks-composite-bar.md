---
title: Модуль подготовки составной линейчатой книги Azure Monitor
description: Узнайте о всех Azure Monitor визуализации составного оттиска линейчатой книги.
services: azure-monitor
author: lgayhardt
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 9/04/2020
ms.author: lagayhar
ms.openlocfilehash: 3bcbd2a58764003c174c02ec637050b57632048a
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100624579"
---
# <a name="composite-bar-renderer"></a>Визуализатор составной линейчатой диаграммы

Книга позволяет выполнять отрисовку данных с помощью составной полосы, которая состоит из нескольких столбцов.

На рисунке ниже показана составная полоса для состояния базы данных, показывающая, сколько серверов находится в сети, вне сети и в состоянии восстановления.

![Снимок экрана составной полосы для состояния базы данных.](./media/workbooks-composite-bar/database-status.png)

Визуализатор составных линейчатых элементов поддерживается для визуализаций сетки, плиток и графов.

## <a name="adding-composite-bar-renderer"></a>Добавление визуализатора составной линейчатой диаграммы

1. Переключите книгу в режим редактирования, выбрав пункт *изменить* элемент панели инструментов.
2. Выберите *Добавить* , а затем *Добавить запрос*.
3. Задайте для *источника данных* значение JSON и *визуализацию* в виде "Grid".
4. Добавьте следующие данные JSON.

```json
[
    {"sub":"X", "server": "A", "online": 20, "recovering": 3, "offline": 4, "total": 27},
    {"sub":"X", "server": "B", "online": 15, "recovering": 8, "offline": 5, "total": 28},
    {"sub":"Y", "server": "C", "online": 25, "recovering": 4, "offline": 5, "total": 34},
    {"sub":"Y", "server": "D", "online": 18, "recovering": 6, "offline": 9, "total": 33}
]
```

5. Выполнить запрос.
6. Выберите **Параметры столбца** , чтобы открыть параметры.
7. Выберите "Итого" в *столбцах* и выберите "составной отрезок" для модуля *подготовки столбцов*.
8. Задайте следующие параметры в разделе *Параметры составных панелей*.

| Имя столбца | Color        |
|-------------|--------------|
| в сети      | Зеленый        |
| восстановление  | Желтый       |
| автономно     | Красный (яркий) |

9. Добавить метку:`["online"] of ["total"] are healthy`
10. В параметрах столбца для оперативной, автономной и восстанавливаемой области можно задать для модуля подготовки столбцов значение "скрытый" (необязательно).
11. Выберите *метки* вверху и обновите метку столбца Total как "состояние базы данных" (необязательно).
12. Выбор при **применении**

Параметры составных панелей будут выглядеть, как показано на следующем снимке экрана:

![Снимок экрана параметров столбцов составной панели с параметрами, описанными выше.](./media/workbooks-composite-bar/composite-bar-settings.png)

Составная панель с параметрами выше:

![Снимок экрана составной панели.](./media/workbooks-composite-bar/composite-bar.png)

## <a name="composite-bar-settings"></a>Параметры составных панелей

Выберите имя столбца и соответствующий цвет, чтобы отобразить этот столбец в этом цвете как часть составной полосы. Можно вставлять, удалять и перемещать строки вверх и вниз.

### <a name="label"></a>Метка

Метка составной панели отображается в верхней части составной панели. Можно использовать сочетание статического текста, столбцов и параметра.  Если метка пуста, то в качестве метки отображается значение текущих столбцов. В предыдущем примере, если оставить поле метки черным, будет отображено значение всего столбцов.

См. столбцы с помощью `["columnName"]` .

См. параметры с помощью `{paramName}` .

Имя столбца и имя параметра вводятся с учетом регистра. Можно также создать метки для ссылки, выбрав "сделать этот элемент ссылкой", а затем добавить параметры связи.

### <a name="aggregation"></a>Агрегирование

Агрегаты удобно использовать для визуализации дерева и группировки. Данные для столбца в строке группы определяются статистическим набором для этого столбца. Существует три типа агрегатов, применимых к составным столбцам: None, Sum и Inherit.

Чтобы добавить параметры Group By, выполните следующие действия.

1. В окне Параметры столбца перейдите к столбцу, в который необходимо добавить параметры.
2. В разделе " *дерево/группирование" по параметрам* в *дереве "тип дерева*" выберите **Группировать по**
3. Выберите поле, по которому необходимо выполнить группирование.

![Снимок экрана: параметры группировки.](./media/workbooks-composite-bar/group-by-settings.png)

#### <a name="none"></a>None

None — не отображать результаты для этого столбца для строк группы.

![Снимок экрана составной полосы с неагрегированной обработкой None.](./media/workbooks-composite-bar/none.png)

#### <a name="sum"></a>SUM

Если агрегирование задано как Sum, то столбец в строке группы будет отображать составную линейчатую диаграмму с использованием суммы столбцов, используемых для ее отображения. Эта метка также будет использовать сумму столбцов, на которые они ссылаются.

В примере ниже в режиме «в сети», «вне сети» и «восстановление всех» для них задано максимальное статистическое вычисление, а Статистическое выражение для столбца Total — Sum.

![Снимок экрана составной полосы с агрегированием сумм.](./media/workbooks-composite-bar/sum.png)

#### <a name="inherit"></a>Наследовать

Если параметр агрегирования установлен как Inherit, то столбец в строке группы будет отображать составную полосу, используя набор статистических схем, используемых пользователями для отображения столбцов. Столбцы, используемые в метке, также используют набор агрегирований, заданный пользователем. Если текущий модуль визуализации столбца является составной полосой и в метке имеет значение реферид (например, "Total" в приведенном выше примере), то в качестве агрегата для этого столбца используется Sum.

В приведенном ниже примере в режиме в сети, вне сети и в восстановлении все заданы максимальные агрегаты, а Статистическое выражение для столбца Total является производным.

![Снимок экрана составной полосы с наследованием агрегирования.](./media/workbooks-composite-bar/inherit.png)

## <a name="sorting"></a>Сортировка

Для визуализаций сетки Сортировка строк для столбца с помощью визуализатора составной линейчатой диаграммы работает на основе значения, которое является суммой столбцов, используемых для динамического отображения составного компьютера. В предыдущих примерах значение, используемое для сортировки, равно сумме значений в сети, восстановления и автономных столбцов для этой конкретной строки.

## <a name="tiles-visualization"></a>Визуализация плиток

1. Выберите **Добавить** и *Добавить запрос*.
2. Измените источник данных на JSON введите данные из [предыдущего примера](#adding-composite-bar-renderer).
3. Измените визуализацию на *плитки*.
4. Выполнить запрос.
5. Выберите **Параметры плитки**.
6. Выберите *слева* в полях мозаики.
7. Введите параметры ниже в разделе *Параметры поля*.
    1. Использовать столбец: "Server".
    2. Модуль подготовки столбцов: "текст".
8. Выберите *внизу* в полях мозаики.
9. Введите параметры ниже в разделе *Параметры поля*.
    1. Использовать столбец: "итог".
    2. Модуль подготовки столбцов: "составной отрезок".
    3. Введите задайте следующие параметры в разделе "Параметры составной панели".

    | Имя столбца | Color        |
    |-------------|--------------|
    | в сети      | Зеленый        |
    | восстановление  | Желтый       |
    | автономно     | Красный (яркий) |

    4. Добавить метку: `["online"] of ["total"] are healthy` .
10. Нажмите кнопку **Применить**.

Параметры составных панелей для плиток:

![Снимок экрана параметров плитки составной панели с параметрами, описанными выше.](./media/workbooks-composite-bar/tiles-settings.png)

Представление составной панели для плиток с указанными выше параметрами будет выглядеть следующим образом:

![Снимок экрана с плитками составных полос.](./media/workbooks-composite-bar/composite-bar-tiles.png)

## <a name="graphs-visualization"></a>Визуализация диаграмм

Чтобы создать визуализатор составных линейчатых диаграмм для визуализации графов (тип кластера Hive), следуйте приведенным ниже инструкциям.

1. Выберите **Добавить** и *Добавить запрос*.
2. Измените источник данных на JSON введите данные из [предыдущего примера](#adding-composite-bar-renderer).
3. Измените визуализацию на *графы*.
4. Выполнить запрос.
5. Выберите **Параметры диаграммы**.
6. Выберите *центрировать содержимое* в параметрах формата узла.
7. Введите параметры ниже в разделе *Параметры поля*.
    1. Использовать столбец: "итог".
    2. Модуль подготовки столбцов: "составной отрезок".
    3. Введите следующие параметры в разделе *Параметры составных панелей*.

    |Имя столбца  |     Color    |
    |-------------|--------------|
    | в сети      | Зеленый        |
    | восстановление  | Желтый       |
    | автономно     | Красный (яркий) |

   4. Добавить метку: `["online"] of ["total"] are healthy` .
9. Введите параметры ниже в разделе *Параметры макета*.
    1. Тип диаграммы: **кластеры Hive**.
    2. Идентификатор узла выберите: "сервер".
    3. Группировать по полю: "нет".
    4. Размер узла: 100.
    5. Поле между шестиугольниками: 5.
    6. Тип цвета: **нет**.
1. Нажмите кнопку **Применить**.
    
Параметры составных панелей для диаграмм:

![Снимок экрана параметров составного линейного графа с параметрами, описанными выше.](./media/workbooks-composite-bar/graphs-settings.png)

Представление составной панели для Graph с указанными выше параметрами будет выглядеть следующим образом:

![Снимок экрана со графами составных линейчатых диаграмм с кластерами Hive.](./media/workbooks-composite-bar/composite-bar-graphs.png)

## <a name="next-steps"></a>Дальнейшие шаги

* [Развертывание](../visualize/workbooks-automate.md) книг с помощью Azure Resource Manager.
* [Управление](../platform/workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.
