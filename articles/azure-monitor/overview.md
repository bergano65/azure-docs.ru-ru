---
title: Общие сведения о службе Azure Monitor | Microsoft Docs
description: Обзор функциональных возможностей и служб Майкрософт, которые являются частью стратегии мониторинга ваших служб и приложений в Azure.
ms.subservice: ''
ms.topic: overview
author: bwren
ms.author: bwren
ms.date: 11/17/2019
ms.openlocfilehash: 7c48311612d48ef616e5b4c0eefaaa0ae7bb2e84
ms.sourcegitcommit: 6a350f39e2f04500ecb7235f5d88682eb4910ae8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2020
ms.locfileid: "96451290"
---
# <a name="azure-monitor-overview"></a>Общие сведения о службе Azure Monitor

Azure Monitor помогает максимизировать доступность и производительность приложений и служб. Эта служба обеспечивает комплексное решение для сбора, анализа и использования телеметрии из облака и локальных сред. Эта информация поможет вам понять, насколько производительны приложения, а также заранее определить имеющиеся в них проблемы и ресурсы, от которых они зависят.

Вот несколько примеров того, что можно сделать с помощью Azure Monitor:

- Выявлять и диагностировать проблемы и зависимости между приложениями с помощью [Application Insights](app/app-insights-overview.md).
- Сопоставлять проблемы инфраструктуры с [Azure Monitor для виртуальных машин](insights/vminsights-overview.md) и [Azure Monitor для контейнеров](insights/container-insights-overview.md).
- Анализировать данные мониторинга с помощью [Log Analytics](log-query/log-query-overview.md) для устранения неполадок и выполнения глубокой диагностики.
- Поддерживать работу при масштабировании с помощью [интеллектуальных оповещений](platform/alerts-smartgroups-overview.md) и [автоматизированных действий](platform/alerts-action-rules.md).
- Создавать визуализации с помощью [информационных панелей](learn/tutorial-logs-dashboards.md) и [книг](platform/workbooks-overview.md) Azure.
- Собирать данные от [отслеживаемых ресурсов](./monitor-reference.md) с помощью [метрик Azure Monitor](./platform/data-platform-metrics.md).

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4qXeL]


[!INCLUDE [azure-lighthouse-supported-service](../../includes/azure-lighthouse-supported-service.md)]

## <a name="overview"></a>Обзор

На приведенной ниже схеме показано высокоуровневое представление Azure Monitor. В центре схемы находятся хранилища данных для метрик и журналов — двух основных типов данных, используемых службой Azure Monitor. В левой части находятся [источники данных мониторинга](platform/data-sources.md), наполняющие эти [хранилища данных](platform/data-platform.md). Справа представлены разные функции, которые Azure Monitor выполняет с собранными данными. К ним относятся такие действия, как анализ, генерация оповещений и потоковая передача данных во внешние системы.

![Общие сведения о службе Azure Monitor](media/overview/overview.png)

## <a name="monitoring-data-platform"></a>Платформа данных мониторинга

Все данные, собираемые службой Azure Monitor, соответствуют одному из двух основных типов, то есть представляют собой [метрики или журналы](platform/data-platform.md). [Метрики](platform/data-platform-metrics.md) — это числовые значения, описывающие конкретный аспект системы в определенный момент времени. Они занимают небольшой объем, и их можно использовать в сценариях, предусматривающих работу в режиме практически реального времени. [Журналы](platform/data-platform-logs.md) содержат данные различных типов, упорядоченные по записям с разными наборами свойств для каждого типа. Помимо данных производительности в системе (в виде журналов) хранятся данные телеметрии, например события и трассировки, так что можно объединить все эти данные для анализа.

Для многих ресурсов Azure данные, собранные службой Azure Monitor, отображаются непосредственно на странице "Обзор" портала Azure. Обратите внимание на любую виртуальную машину, и вы увидите несколько диаграмм с метриками производительности. Щелкните любой график, чтобы открыть данные в [обозревателе метрик](platform/metrics-charts.md) на портале Azure, где вы можете отмечать значения нескольких метрик с течением времени.  Вы можете просматривать графики в интерактивном режиме или закрепить их на панели мониторинга, чтобы просматривать их вместе с другими визуализациями.

![Схема: данные метрик, передаваемые в обозреватель метрик для использования в визуализациях.](media/overview/metrics.png)

Данные журналов, собранные службой Azure Monitor, можно проанализировать с помощью [запросов](log-query/log-query-overview.md), которые быстро получают, консолидируют и анализируют собранные данные.  Для создания и проверки запросов можно воспользоваться службой [Log Analytics](./log-query/log-query-overview.md) на портале Azure. Затем можно напрямую проанализировать данные с помощью различных инструментов или сохранить запросы для использования с [визуализациями](visualizations.md) либо [правилами генерации оповещений](platform/alerts-overview.md).

Azure Monitor использует версию [языка запросов Kusto](/azure/kusto/query/), которая совместима с простыми запросами к журналу, но также включает и расширенную функциональность (например, функции агрегирования, объединения и интеллектуальную аналитику). Доступно [множество уроков](log-query/get-started-queries.md) для быстрого изучения этого языка.  Для пользователей, которые уже знакомы с [SQL](log-query/sql-cheatsheet.md) и [Splunk](log-query/splunk-cheatsheet.md), предоставляются отдельные руководства.

![Схема: данные журналов, передаваемые в Log Analytics для анализа.](media/overview/logs.png)

## <a name="what-data-does-azure-monitor-collect"></a>Какие данные собирает Azure Monitor?

Azure Monitor может собирать данные из [различных источников](monitor-reference.md). Это могут быть приложения, любые операционные системы и службы, на которых они основаны, а также сама платформа. Azure Monitor собирает данные со следующих уровней:

- **Данные мониторинга приложений.** Данные о производительности и функциональности написанного вами кода, не зависящие от платформы.
- **Данные мониторинга ОС на виртуальной машине.** Данные об операционной системе, в которой выполняется ваше приложение. Это может быть Azure, другое облако или локальная среда. 
- **Данные мониторинга ресурсов Azure.** Данные о работе ресурса Azure.
- **Данные мониторинга подписки Azure.** Данные об операциях и управлении подпиской Azure, а также о работоспособности и операциях самой платформы Azure. 
- **Данные мониторинга клиента Azure.** Данные о работе служб Azure на уровне клиента (например, Azure Active Directory).

Как только вы создадите подписку Azure и начнете добавлять такие ресурсы, как виртуальные машины и веб-приложения, Azure Monitor начнет собирать данные.  [Журналы действий](platform/platform-logs-overview.md) содержат сведения о времени создания и изменения ресурсов. [Метрики](platform/data-platform.md) указывают производительность ресурса и используемые им ресурсы. 

[Включите диагностику](platform/platform-logs-overview.md), чтобы собирать еще и данные о внутренней работе ресурсов.  [Добавьте агент](platform/agents-overview.md) для вычислительных ресурсов, чтобы собирать данные телеметрии из операционных систем на виртуальной машине. 

Включите мониторинг для приложения с помощью службы [Application Insights](app/app-insights-overview.md), чтобы собирать подробные сведения, включая о просмотрах страниц, запросах приложений и исключениях. Проверьте доступность приложения, настроив [тест доступности](app/monitor-web-app-availability.md) для имитации пользовательского трафика.

### <a name="custom-sources"></a>Пользовательские источники

Azure Monitor может собирать данные журналов из любого клиента REST с помощью [API сборщика данных](platform/data-collector-api.md). Это позволяет создавать пользовательские сценарии мониторинга и подвергать мониторингу ресурсы, которые не предоставляют данные телеметрии через другие источники.

## <a name="insights"></a>Аналитика
Данные мониторинга полезны, только если они могут сделать работу вычислительной среды более открытой. [Службы аналитики](monitor-reference.md#insights-and-core-solutions) предоставляют настраиваемые интерфейсы мониторинга для определенных служб Azure. Они почти не требуют настройки и предоставляют дополнительные сведения о работе критических ресурсов.

### <a name="application-insights"></a>Application Insights
Служба [Application Insights](app/app-insights-overview.md) контролирует доступность, производительность и использование ваших веб-приложений независимо от того, размещены ли они в облачной или локальной среде. Она использует мощную платформу анализа данных в Azure Monitor, чтобы предоставлять подробные аналитические сведения о работе приложения. Это позволяет быстро идентифицировать и диагностировать ошибки, не дожидаясь, пока о них сообщат пользователи. Application Insights включает точки подключения к различным средствам разработки и интегрируется с Visual Studio для поддержки процессов DevOps.

![Анализ приложения](media/overview/app-insights.png)

### <a name="azure-monitor-for-containers"></a>Azure Monitor для контейнеров
[Azure Monitor для контейнеров](insights/container-insights-overview.md) отслеживает производительность рабочих нагрузок контейнеров, развернутых на кластерах управляемой среды Kubernetes в Службе Azure Kubernetes (AKS). С помощью этой службы можно отслеживать производительность, собирая данные метрик с контроллеров, узлов и контейнеров, доступных в Kubernetes, с использованием API метрик. Также собираются журналы контейнеров.  После включения мониторинга из кластеров Kubernetes эти метрики и журналы автоматически собираются через контейнерную версию агента Log Analytics для Linux.

![Работоспособность контейнеров](media/overview/container-insights.png)

### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин
Служба [Azure Monitor для виртуальных машин](insights/vminsights-overview.md) отслеживает виртуальные машины Azure в большом масштабе. Она анализирует производительность и работоспособность виртуальных машин Windows и Linux, выявляет выполняемые на них процессы и зависимости от внешних процессов. Решение включает поддержку мониторинга производительности и зависимостей приложений для виртуальных машин, размещенных в локальном или другом поставщике облачных служб.  


![Аналитика виртуальных машин](media/overview/vm-insights.png)


## <a name="responding-to-critical-situations"></a>Реагирование на критические ситуации
Помимо интерактивного анализа данных мониторинга, эффективное решение для мониторинга должно иметь возможность заранее реагировать на критические условия, определенные в данных, которые оно собирает. Например, оно может отправлять SMS или электронное письмо администратору, ответственному за расследование проблемы. Вы также можете запустить автоматизированный процесс, пытающийся исправить ошибку.


### <a name="alerts"></a>видны узлы
[Оповещения в Azure Monitor](platform/alerts-overview.md) заранее сообщают вам о критических условиях и пытаются выполнить корректирующие действия. Правила генерации оповещений, основанные на метриках, обеспечивают отправку оповещений на основе числовых значений почти в реальном времени. Правила, основанные на журналах, поддерживают сложную логику обработки данных из нескольких источников.

Правила генерации оповещений Azure Monitor используют [группы действий](platform/action-groups.md), содержащие уникальные наборы получателей и действий, которые могут использоваться в различных правилах. В зависимости от требований, группы действий могут выполнять различные действия (например, использовать веб-перехватчики, чтобы оповещения запускали внешние операции, или интегрироваться со средствами ITSM).

![Снимок экрана с оповещениями в Azure Monitor и сведениями об уровне серьезности, общем количестве оповещений, а также другой информацией.](media/overview/alerts.png)

### <a name="autoscale"></a>Автомасштабирование
Благодаря автомасштабированию вы получаете именно тот объем ресурсов, который нужен для обработки нагрузки в вашем приложении. Создайте правила на основе собранных Azure Monitor метрик, чтобы настроить автоматическое добавление ресурсов при увеличении нагрузки. Вы можете сократить расходы, удаляя неиспользуемые ресурсы. Вы можете указать минимальное и максимальное количество экземпляров, а также логику увеличения и уменьшения объема выделяемых ресурсов.

![Схема автомасштабирования: ряд из нескольких серверов с меткой "Процессорное время > 80 %". Для двух серверов зафиксирован минимальный показатель, для трех — текущий показатель емкости, а для пяти — максимальный показатель.](media/overview/autoscale.png)

## <a name="visualizing-monitoring-data"></a>Визуализация данных мониторинга
[Визуализации](visualizations.md), такие как диаграммы и таблицы, — это эффективные средства создания сводок по данным мониторинга и их представления для различных аудиторий. Служба Azure Monitor включает собственные функции для визуализации данных мониторинга и использует другие службы Azure, чтобы публиковать их для различных аудиторий.

### <a name="dashboards"></a>Панели мониторинга
[Панели мониторинга Azure](../azure-portal/azure-portal-dashboards.md) можно использовать для объединения разных видов данных в одной панели на [портале Azure](https://portal.azure.com). При желании вы можете предоставить доступ к этой панели другим пользователям Azure. Добавьте на панель мониторинга Azure выходные данные любого запроса журнала или диаграммы метрик. Например, вы можете создать панель мониторинга, на которой содержатся плитки с графами метрик, таблица журналов действий, график использования из Application Insights и выходные данные запросов к журналу.

![Снимок экрана с панелью мониторинга Azure, на которой отображаются плитки "Приложение" и "Безопасность", а также другие настраиваемые сведения.](media/overview/dashboard.png)

### <a name="workbooks"></a>Workbooks
[Книги](platform/workbooks-overview.md) выполняют роль гибкого средства для анализа данных и создания многофункциональных визуальных отчетов на портале Azure. Они позволяют подключаться к нескольким источникам данных из Azure и объединять их через единый интерактивный интерфейс. Используйте книги, предоставленные в комплекте с Insights, или создайте собственные из предопределенных шаблонов.


![Примеры книг](media/overview/workbooks.png)

### <a name="power-bi"></a>Power BI
[Power BI](https://powerbi.microsoft.com) — это служба бизнес-аналитики, которая предоставляет интерактивные визуализации по разным источникам данных. Она позволяет эффективно предоставлять доступ к данным для других пользователей в организации и за ее пределами. Вы можете настроить Power BI на [автоматический импорт данных журналов из Azure Monitor](./platform/powerbi.md), чтобы воспользоваться этими дополнительными визуализациями.


![Power BI](media/overview/power-bi.png)


## <a name="integrate-and-export-data"></a>Интеграция и экспорт данных
Часто требуется интегрировать Azure Monitor с другими системами и создавать настраиваемые решения, использующие ваши данные мониторинга. Другие службы Azure работают с Azure Monitor для обеспечения этой интеграции.

### <a name="event-hub"></a>Концентратор событий
[Центры событий Azure](../event-hubs/index.yml) представляют собой платформу потоковой передачи и службу приема событий. Эта платформа может преобразовывать и хранить данные с помощью любого поставщика аналитических данных в реальном времени или адаптеров пакетной обработки и хранения данных. Используйте "Центры событий" для [потоковой передачи данных из Azure Monitor](platform/stream-monitoring-data-event-hubs.md) партнерским средствам мониторинга и SIEM.


### <a name="logic-apps"></a>Logic Apps
[Logic Apps](https://azure.microsoft.com/services/logic-apps) — это служба, позволяющая автоматизировать задачи и бизнес-процессы с помощью рабочих процессов, которые интегрируются с различными системами и службами. В ней доступны действия, которые считывают и записывают метрики и журналы в Azure Monitor. Это позволяет создавать рабочие процессы, которые интегрируются с другими системами.


### <a name="api"></a>API
Помимо доступа к генерируемым оповещениям, доступно множество API для считывания и записи метрик и журналов в службе Azure Monitor. Вы также можете настраивать и получать оповещения. Это предоставляет вам практически неограниченные возможности создания настраиваемых решений, которые интегрируются с Azure Monitor.

## <a name="next-steps"></a>Дальнейшие действия
См. также:

* [Метрики и журналы](platform/data-platform.md) для данных, полученных Azure Monitor.
* [Источники данных](platform/data-sources.md) для определения того, как различные компоненты приложения отправляют данные телеметрии.
* [Запросы к журналам](log-query/log-query-overview.md) для анализа собранных данных.
* [Рекомендации](/azure/architecture/best-practices/monitoring) по мониторингу облачных приложений и служб.
