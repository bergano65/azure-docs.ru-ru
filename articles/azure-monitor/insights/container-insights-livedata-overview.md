---
title: Просмотр динамических данных (Предварительная версия) с помощью Azure Monitor для контейнеров | Документация Майкрософт
description: В этой статье описывается представление журналов Kubernetes, событий и метрик Pod в режиме реального времени без использования kubectl в Azure Monitor для контейнеров.
services: azure-monitor
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: ''
ms.assetid: ''
ms.service: azure-monitor
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/15/2019
ms.author: magoedte
ms.openlocfilehash: 9c497c73d42e1fb8851c5293010098d843297250
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73514424"
---
# <a name="how-to-view-kubernetes-logs-events-and-pod-metrics-in-real-time"></a>Просмотр журналов Kubernetes, событий и метрик Pod в режиме реального времени

Azure Monitor для контейнеров включает функцию интерактивных данных (Предварительная версия), которая представляет собой расширенную диагностическую функцию, которая обеспечивает прямой доступ к журналам контейнеров Azure Kubernetes Service (stdout/stderr), событиям и метрикам Pod. Он предоставляет прямой доступ к `kubectl logs -c`, `kubectl get`ным событиям и `kubectl top pods`. В области консоли отображаются журналы, события и метрики, созданные модулем контейнеров для дальнейшей помощи в устранении неполадок в режиме реального времени.

Эта статья содержит подробный обзор и поможет вам понять, как использовать эту функцию. 

>[!NOTE]
>Кластеры AKS, включенные в качестве [частных кластеров](https://azure.microsoft.com/updates/aks-private-cluster/) , не поддерживаются этой функцией. Эта функция зависит от прямого доступа к API Kubernetes через прокси-сервер из браузера. Включение сетевой безопасности для блокировки интерфейса API Kubernetes от этого прокси-сервера приведет к блокировке этого трафика. 

>[!NOTE]
>Эта функция доступна во всех регионах Azure, включая Azure для Китая. Сейчас она недоступна в Azure для государственных организаций США.

Дополнительные сведения о настройке и устранении неполадок в интерактивных данных (Предварительная версия) см. в нашем [руководство по установке](container-insights-livedata-setup.md). Эта функция напрямую обращается к API Kubernetes, и дополнительные сведения о модели проверки подлинности можно найти [здесь](https://kubernetes.io/docs/concepts/overview/kubernetes-api/). 

## <a name="live-data-preview-functionality-overview"></a>Обзор функций интерактивных данных (Предварительная версия)

### <a name="search"></a>Поиск

![Пример фильтра области консоли динамических данных](./media/container-insights-livedata-overview/livedata-pane-filter-example.png)

Функция интерактивных данных (Предварительная версия) включает функции поиска. В поле **поиска** можно отфильтровать результаты, введя ключевое слово или термин, и все соответствующие результаты будут выделены, чтобы обеспечить быструю проверку. При просмотре событий можно дополнительно ограничить результаты с помощью **фильтра** пилюля, найденного справа от строки поиска. В зависимости от выбранного ресурса пилюля перечисляет модуль, пространство имен или кластер для выбора.  

### <a name="scroll-lock-and-pause"></a>Прокрутить блокировку и приостановить 

Чтобы приостановить автоматическую прокрутку и управлять поведением панели, позволяя выполнять прокрутку новых данных вручную, можно использовать параметр **Scroll** . Чтобы повторно включить автоматическую прокрутку, просто установите флажок **прокрутки** еще раз. Вы также можете приостановить получение данных журнала или события, выбрав параметр **приостановить** , и когда все будет готово к возобновлению, просто выберите **воспроизвести**.  

![Динамическая область консоли динамических данных приостановка интерактивного представления](./media/container-insights-livedata-overview/livedata-pane-scroll-pause-example.png)

>[!IMPORTANT]
>Мы рекомендуем приостанавливать или приостанавливать автоматическую прокрутку в течение короткого периода времени при устранении проблемы. Эти запросы могут повлиять на доступность и регулирование API Kubernetes в кластере. 

>[!IMPORTANT]
>При работе этой функции данные не сохраняются навсегда. Все сведения, захваченные во время сеанса, удаляются при закрытии браузера или переходе от него. Данные остаются только для визуализации в течение пяти минут компонента метрик. все метрики старше пяти минут также удаляются. Запросы буфера в режиме реального времени (Предварительная версия) запрашиваются по разумным ограничениям на использование памяти (они должны быть более точными, что целесообразно?). 

## <a name="view-logs"></a>Просмотр журналов

Вы можете просматривать данные журнала в режиме реального времени по мере их создания подсистемой контейнеров из **узлов**, **контроллеров**и представлений **контейнеров** . Чтобы просмотреть данные журнала, выполните следующие действия.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS в разделе **мониторинг** на левой стороне выберите **аналитика**. 

3. Выберите вкладку **узлы**, **контроллеры**или **контейнеры** .

4. Выберите объект в сетке производительности, а затем на панели свойств, расположенной справа, выберите параметр **Просмотреть динамические данные (Предварительная версия)** . Если в кластере AKS настроен единый вход с помощью Azure AD, вам будет предложено выполнить проверку подлинности при первом использовании в течение этого сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.  

    >[!NOTE]
    >При просмотре данных из рабочей области Log Analytics путем выбора параметра **Просмотр в аналитике** на панели «Свойства» результаты поиска журналов потенциально могут показывать **узлы**, **управляющие наборы**, **наборы реплик**, **задания**,  **Задания cron**, **Pod**и **контейнеры** , которые могут больше не существовать. Попытка поиска в журналах контейнера, который недоступен в `kubectl` также приведет к сбою. Дополнительные сведения о просмотре журналов журнала, событиях и метрик см. в статье [Просмотр в аналитике](container-insights-log-search.md#search-logs-to-analyze-data) .  

После успешной проверки подлинности область консоли Live Data (Preview) появится под сеткой данных о производительности, где можно просмотреть данные журнала в непрерывном потоке. Если в индикаторе состояния выборки отображается зеленая галочка, расположенная справа от панели, это означает, что данные можно получить и начать потоковую передачу в консоль.  

![Параметр просмотра данных в области "Свойства узла"](./media/container-insights-livedata-overview/node-properties-pane.png)  

В заголовке области отображается имя Pod, с которым будет сгруппирован контейнер.

## <a name="view-events"></a>Просмотр событий

Данные событий в реальном времени можно просматривать по мере их создания подсистемой контейнеров из **узлов**, **контроллеров**, **контейнеров**и **развертываний (Предварительная версия)** при просмотре контейнера, Pod, узла, реплики, управляющей программы, задания, кронжоб или Выбрано развертывание. Чтобы просмотреть события, выполните следующие действия.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS в разделе **мониторинг** на левой стороне выберите **аналитика**. 

3. Выберите вкладку **узлы**, **контроллеры**, **контейнеры**или **развертывания (Предварительная версия)** .

4. Выберите объект в сетке производительности, а затем на панели свойств, расположенной справа, выберите параметр **Просмотреть динамические данные (Предварительная версия)** . Если в кластере AKS настроен единый вход с помощью Azure AD, вам будет предложено выполнить проверку подлинности при первом использовании в течение этого сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.  

    >[!NOTE]
    >При просмотре данных из рабочей области Log Analytics путем выбора параметра **Просмотр в аналитике** на панели «Свойства» результаты поиска журналов потенциально могут показывать **узлы**, **управляющие наборы**, **наборы реплик**, **задания**,  **Задания cron**, **Pod**и **контейнеры** , которые могут больше не существовать. Попытка поиска в журналах контейнера, который недоступен в `kubectl` также приведет к сбою. Дополнительные сведения о просмотре журналов журнала, событиях и метрик см. в статье [Просмотр в аналитике](container-insights-log-search.md#search-logs-to-analyze-data) .  

После успешной проверки подлинности область консоли Live Data (Preview) появится под сеткой данных о производительности. Если в индикаторе состояния выборки отображается зеленая галочка, расположенная справа от панели, это означает, что данные можно получить и начать потоковую передачу в консоль. 
    
Если выбранный объект был контейнером, выберите параметр **события** на панели. Если вы выбрали узел, Pod или контроллер, то Просмотр событий будет выбран автоматически. 

    ![Controller properties pane view events](./media/container-insights-livedata-overview/controller-properties-live-events.png)  

В заголовке области отображается имя Pod, с которым будет сгруппирован контейнер.

### <a name="filter-events"></a>События фильтра 

При просмотре событий можно дополнительно ограничить результаты с помощью **фильтра** пилюля, найденного справа от строки поиска. В зависимости от выбранного ресурса пилюля перечисляет модуль, пространство имен или кластер для выбора.  

## <a name="view-metrics"></a>Просмотр метрик 

Данные метрик в реальном времени можно просматривать по мере их создания модулем контейнеров из представления **узлы** или **контроллеры** только при выборе **Pod** . Чтобы просмотреть метрики, выполните следующие действия.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS в разделе **мониторинг** на левой стороне выберите **аналитика**. 

3. Выберите вкладку **узлы** или **контроллеры** .

4. Выберите объект **Pod** в сетке производительности, а затем на панели свойств, расположенной справа, выберите параметр **Просмотреть динамические данные (Предварительная версия)** . Если в кластере AKS настроен единый вход с помощью Azure AD, вам будет предложено выполнить проверку подлинности при первом использовании в течение этого сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.  

    >[!NOTE]
    >При просмотре данных из рабочей области Log Analytics путем выбора параметра **Просмотр в аналитике** на панели «Свойства» результаты поиска журналов потенциально могут показывать **узлы**, **управляющие наборы**, **наборы реплик**, **задания**,  **Задания cron**, **Pod**и **контейнеры** , которые могут больше не существовать. Попытка поиска в журналах контейнера, который недоступен в `kubectl` также приведет к сбою. Дополнительные сведения о просмотре журналов журнала, событиях и метрик см. в статье [Просмотр в аналитике](container-insights-log-search.md#search-logs-to-analyze-data) .  

После успешной проверки подлинности область консоли Live Data (Preview) появится под сеткой данных о производительности. Данные метрик извлекаются и начинают потоковую передачу на консоль для представления в двух диаграммах. В заголовке области отображается имя Pod, с которым будет сгруппирован контейнер.

![Пример просмотра метрик Pod](./media/container-insights-livedata-overview/pod-properties-live-metrics.png)  

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы продолжить изучение способов использования Azure Monitor и отслеживать другие аспекты кластера AKS, ознакомьтесь со статьей [Общие сведения о мониторинге производительности кластера AKS с помощью Azure Monitor для контейнеров (предварительная версия)](container-insights-analyze.md).

- Просмотрите [примеры запросов журналов](container-insights-log-search.md#search-logs-to-analyze-data) , чтобы просмотреть предопределенные запросы и примеры для создания предупреждений, визуализаций или выполнения дальнейшего анализа кластеров.