---
title: Текстовые параметры книг Azure Monitor
description: Упростите создание сложных отчетов с помощью предварительно созданных и настраиваемых параметризованных книг. Дополнительные сведения о текстовых параметрах книги.
services: azure-monitor
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 10/23/2019
ms.openlocfilehash: 7241777c0b94ce7ccadbd273c5c305c679bfe30a
ms.sourcegitcommit: 50802bffd56155f3b01bfb4ed009b70045131750
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91932317"
---
# <a name="workbook-text-parameters"></a>Текстовые параметры книги

Параметры TextBox предоставляют простой способ для получения ввода текста от пользователей книги. Они используются, когда непрактично использовать раскрывающийся список для сбора входных данных (например, произвольное пороговое значение или универсальные фильтры). Книги позволяют авторам получать значение текстового поля по умолчанию из запроса. Это позволяет интересным сценариям, таким как установка порогового значения по умолчанию в зависимости от P95 метрики.

Обычно текстовые поля используются так же, как и внутренние переменные, используемые другими элементами управления книги. Это делается с помощью запроса значений по умолчанию и делает элемент управления вводом невидимым в режиме чтения. Например, пользователь может полагаться на пороговое значение из формулы (не для пользователя), а затем использовать пороговое значение в последующих запросах.

## <a name="creating-a-text-parameter"></a>Создание текстового параметра
1. Начните с пустой книги в режиме редактирования.
2. Выберите _Добавить параметры_ из ссылок в книге.
3. Нажмите синюю кнопку _Добавить параметр_ .
4. В новой области параметров, которая появляется на экране, введите:
    1. Имя параметра: `SlowRequestThreshold`
    2. Тип параметра: `Text`
    3. Обязательно: `checked`
    4. Получить значение по умолчанию из запроса: `unchecked`
5. Нажмите кнопку "Сохранить" на панели инструментов, чтобы создать параметр.

    ![Изображение, показывающее создание текстового параметра](./media/workbooks-text/text-create.png)

Вот как книга будет выглядеть в режиме чтения.

![Изображение, показывающее текстовый параметр в режиме чтения](./media/workbooks-text/text-readmode.png)

## <a name="referencing-a-text-parameter"></a>Ссылка на текстовый параметр
1. Добавьте в книгу элемент управления запрос, выбрав синюю `Add query` ссылку и выбрав ресурс Application Insights.
2. В поле ККЛ добавьте следующий фрагмент кода:
    ```kusto
    requests
    | summarize AllRequests = count(), SlowRequests = countif(duration >= {SlowRequestThreshold}) by name
    | extend SlowRequestPercent = 100.0 * SlowRequests / AllRequests
    | order by SlowRequests desc
    ```
3. С помощью параметра Text со значением 500 в сочетании с элементом управления запроса, который вы фактически выполняете в запросе ниже:
    ```kusto
    requests
    | summarize AllRequests = count(), SlowRequests = countif(duration >= 500) by name
    | extend SlowRequestPercent = 100.0 * SlowRequests / AllRequests
    | order by SlowRequests desc
    ```
4. Выполнение запроса для просмотра результатов

    ![Изображение, показывающее текстовый параметр, на который ссылается ККЛ](./media/workbooks-text/text-reference.png)

> [!NOTE]
> В приведенном выше примере `{SlowRequestThreshold}` представляет целочисленное значение. Если вы запрашиваете строку, например `{ComputerName}` , вам потребуется изменить запрос Kusto, чтобы добавить кавычки, чтобы `"{ComputerName}"` поле параметра принимало входные данные без кавычек.

## <a name="setting-default-values"></a>Установка значений по умолчанию
1. Начните с пустой книги в режиме редактирования.
2. Выберите _Добавить параметры_ из ссылок в книге.
3. Нажмите синюю кнопку _Добавить параметр_ .
4. В новой области параметров, которая появляется на экране, введите:
    1. Имя параметра: `SlowRequestThreshold`
    2. Тип параметра: `Text`
    3. Обязательно: `checked`
    4. Получить значение по умолчанию из запроса: `checked`
5. В поле ККЛ добавьте следующий фрагмент кода:
    ```kusto
    requests
    | summarize round(percentile(duration, 95), 2)
    ```
    Этот запрос задает для текстового поля по умолчанию значение 95 процентиль процентиля Duration для всех запросов в приложении.
6. Выполните запрос, чтобы увидеть результат
7. Нажмите кнопку "Сохранить" на панели инструментов, чтобы создать параметр.

    ![Изображение, показывающее текстовый параметр со значением по умолчанию из ККЛ](./media/workbooks-text/text-default-value.png)

> [!NOTE]
> Хотя в этом примере запрашиваются Application Insights данные, подход можно использовать для любого источника данных на основе журналов — Log Analytics, графа ресурсов Azure и т. д.

## <a name="next-steps"></a>Дальнейшие шаги

* [Узнайте](workbooks-visualizations.md) больше о книгах с множеством разнообразных вариантов визуализации.
* [Управление](workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.
