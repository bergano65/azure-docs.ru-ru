---
title: Журналы Azure Monitor
description: Содержит описание журналов Azure Monitor, которые используются для расширенного анализа данных мониторинга.
documentationcenter: ''
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.date: 10/22/2020
ms.author: bwren
ms.openlocfilehash: 3c3a20d8401affc519e118c7f2295339990e7dee
ms.sourcegitcommit: d22a86a1329be8fd1913ce4d1bfbd2a125b2bcae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "96186513"
---
# <a name="azure-monitor-logs-overview"></a>Обзор журналов Azure Monitor
Журналы Azure Monitor — это функция Azure Monitor, которая собирает и упорядочивает данные журналов и производительности из [отслеживаемых ресурсов](../monitor-reference.md). Данные из различных источников, таких как [журналы платформы](platform-logs-overview.md) из служб Azure, журналов и данных о производительности от [агентов виртуальных машин](agents-overview.md), а также данные об использовании и производительности [приложений](../app/app-insights-overview.md) , можно консолидировать в одну рабочую область, чтобы их можно было проанализировать вместе с помощью сложного языка запросов, который способен быстро анализировать миллионы записей. Вы можете выполнить простой запрос, который просто извлекает конкретный набор записей или выполняет сложный анализ данных для обнаружения критически важных шаблонов в данных мониторинга. Работа с запросами журналов и их результатами в интерактивном режиме с помощью Log Analytics, использование их в правилах оповещений для того, чтобы BR заранее уведомлять о проблемах или визуализировать их результаты в книге или панели мониторинга.

> [!NOTE]
> Журналы Azure Monitor — это одна половина платформы данных, поддерживающая Azure Monitor. Другой — [Azure Monitor метрики](data-platform-metrics.md) , в которых хранятся числовые данные в базе данных временных рядов. Это делает эти данные более простыми, чем данные в журналах Azure Monitor и способен поддерживать сценарии практически в реальном времени, что делает их особенно полезными для предупреждений и быстрого обнаружения проблем. Однако метрики могут хранить только числовые данные в определенной структуре, в то время как журналы могут хранить различные типы данных, каждая из которых имеет собственную структуру. Можно также выполнить сложный анализ данных журналов с помощью запросов к журналу, которые нельзя использовать для анализа данных метрик.


## <a name="what-can-you-do-with-azure-monitor-logs"></a>Что можно делать с журналами Azure Monitor?
В следующей таблице описаны различные способы использования журналов в Azure Monitor.

|  |  |
|:---|:---|
| **Анализ** | Использование [log Analytics](../log-query/log-analytics-tutorial.md) в портал Azure для записи [запросов журнала](../log-query/log-query-overview.md) и интерактивного анализа данных журнала с помощью мощного модуля анализа |
| **Оповещение** | Настраивать [правила оповещения журнала](alerts-log.md), которые отправляют уведомления или выполняют [автоматические действия](action-groups.md), когда результаты запроса соответствуют определенному результату. |
| **Визуализация** | Закрепляйте отображаемые результаты в виде таблиц или диаграмм на [панели мониторинга Azure](../../azure-portal/azure-portal-dashboards.md).<br>Создавайте [книги](./workbooks-overview.md) для объединения нескольких наборов данных в интерактивный отчет. <br>Экспортировать результаты запроса в [Power BI](powerbi.md), чтобы можно было использовать разные типы визуализации и делиться этими результатами с пользователями за пределами Azure.<br>Экспортируйте результаты запроса в решение [Grafana](grafana-plugin.md), чтобы использовать его панель мониторинга и объединять результаты с данными из других источников.|
| **Аналитика** | Поддержка [аналитических сведений](../monitor-reference.md#insights-and-core-solutions) , обеспечивающих настраиваемый мониторинг для конкретных приложений и служб.  |
| **Получение** | Получайте результаты запроса по журналам из командной строки с помощью [Azure CLI](/cli/azure/ext/log-analytics/monitor/log-analytics).<br>Получайте результаты запроса по журналам из командной строки с помощью [командлетов PowerShell](/powershell/module/az.operationalinsights).<br>Получайте результаты запроса по журналам из пользовательского приложения с помощью [REST API](https://dev.loganalytics.io/). |
| **Экспорт** | Настройка [автоматического экспорта данных журнала](logs-data-export.md) в учетную запись хранения Azure или концентраторы событий Azure.<br>Создавайте рабочие процессы для получения данных журналов и копирования их во внешнее расположение с помощью [Logic Apps](logicapp-flow-connector.md). |

![Обзор журналов](media/data-platform-logs/logs-overview.png)


## <a name="data-collection"></a>Сбор данных
После создания Log Analytics рабочей области необходимо настроить различные источники для отправки своих данных. Данные не собираются автоматически. Эта конфигурация будет отличаться в зависимости от источника данных. Например, [Создайте параметры диагностики](diagnostic-settings.md) для отправки журналов ресурсов из ресурсов Azure в рабочую область. [Включение Azure Monitor для виртуальных машин](../insights/vminsights-enable-overview.md) для получения данных с виртуальных машин. Настройте [Источники данных в рабочей области](data-sources.md) , чтобы получать дополнительные события и данные о производительности.

- Полный список источников данных, которые можно настроить для отправки данных в журналы Azure Monitor, см. в разделе [что отслеживается Azure Monitor?](../monitor-reference.md) .


## <a name="log-analytics-workspaces"></a>Рабочие области Log Analytics
Данные, собранные журналами Azure Monitor, хранятся в нескольких [log Analytics рабочих областях](./design-logs-deployment.md). Рабочая область определяет географическое расположение данных, права доступа, определяющие, какие пользователи могут получать доступ к данным, а также параметры конфигурации, такие как ценовая категория и срок хранения данных.  

Чтобы использовать журналы Azure Monitor, необходимо создать хотя бы одну рабочую область. Одна рабочая область может быть достаточной для всех данных мониторинга или может создавать несколько рабочих областей в зависимости от требований. Например, у вас может быть одна рабочая область для рабочих данных, а другая — для тестирования. 

- Чтобы создать рабочую область, см. раздел [создание log Analytics рабочей области на портал Azure](../learn/quick-create-workspace.md) .
- Рекомендации по созданию нескольких рабочих областей см. в статье [проектирование развертывания журналов Azure Monitor](design-logs-deployment.md) .

## <a name="data-structure"></a>Структура данных
Запросы журнала получают данные из рабочей области Log Analytics. Каждая Рабочая область содержит несколько таблиц, организованных в отдельные столбцы с несколькими строками данных. Каждая таблица определяется уникальным набором столбцов, которые являются общими для строк данных, предоставленных источником данных. 

[![Структура журналов Azure Monitor](media/data-platform-logs/logs-structure.png)](media/data-platform-logs/logs-structure.png#lightbox)


Данные журнала из Application Insights также хранятся в журналах Azure Monitor, но хранятся в разных случаях в зависимости от настройки приложения. Для приложения на основе рабочей области данные хранятся в Log Analytics рабочей области в стандартном наборе таблиц для хранения таких данных, как запросы приложений, исключения и Просмотры страниц. Несколько приложений могут использовать одну и ту же рабочую область. Для классического приложения данные не хранятся в рабочей области Log Analytics. Он использует тот же язык запросов, и вы создаете и запускаете запросы с помощью одного и того же средства Log Analytics в портал Azure. Хотя данные для классических приложений хранятся отдельно друг от друга. Его общая структура аналогична приложениям на основе рабочей области, хотя имена таблиц и столбцов различаются. Подробное сравнение схемы для приложений, основанных на рабочей области, и классические приложения см. в разделе [изменения ресурсов на основе рабочей области](../app/apm-tables.md) .


> [!NOTE]
> Мы по-прежнему предоставляем полную обратную совместимость с классическими запросами, ресурсами, книгами и оповещениями на основе журналов Application Insights. Для запроса или просмотра [структуры или схемы новой таблицы рабочей области](../app/apm-tables.md), необходимо сначала перейти в рабочую область Log Analytics. На этапе предварительной версии можно выбрать **Журналы** в областях Application Insights, чтобы перейти к классическому интерфейсу запросов Application Insights. Дополнительные сведения см. в разделе [область запроса](../log-query/scope.md) .


[![Структура журналов Azure Monitor для Application Insights](media/data-platform-logs/logs-structure-ai.png)](media/data-platform-logs/logs-structure-ai.png#lightbox)


## <a name="log-queries"></a>Запросы журнала
Данные извлекаются из рабочей области Log Analytics с помощью запроса к журналу, который является запросом только для чтения для обработки данных и возврата результатов. Запросы журнала написаны на [языке запросов Kusto (ККЛ)](/azure/data-explorer/kusto/query/), который является тем же языком запросов, который используется обозреватель данных Azure. Вы можете писать запросы журнала в Log Analytics для интерактивного анализа результатов, использовать их в правилах оповещений для упреждающего уведомления о проблемах или включения их результатов в книги или панели мониторинга. Аналитические сведения включают готовые запросы для поддержки представлений и книг.

- Список мест использования запросов к журналам и ссылки на учебники и другую документацию для начала работы см. [в разделе запросы журналов в Azure Monitor](log-query/../../log-query/log-query-overview.md) .

![Log Analytics](media/data-platform-logs/log-analytics.png)

## <a name="log-analytics"></a>Log Analytics
Используйте Log Analytics, который является средством в портал Azure, для изменения и запуска запросов журнала и интерактивного анализа результатов. Затем можно использовать созданные запросы для поддержки других функций в Azure Monitor таких как оповещения и книги запросов журнала. Доступ к Log Analytics из параметра **журналы** в меню Azure Monitor или из большинства других служб в портал Azure.

- Описание Log Analytics см. [в разделе обзор log Analytics в Azure Monitor](../log-query/log-analytics-overview.md) . 
- Дополнительные сведения об использовании Log Analyticsных функций для создания простого запроса к журналу и анализа его результатов см. в [log Analytics руководстве](../log-query/log-analytics-tutorial.md) .



## <a name="relationship-to-azure-data-explorer"></a>Связь с Azure обозреватель данных
Журналы Azure Monitor основаны на обозреватель данных Azure. Log Analytics Рабочая область примерно эквивалентна базе данных в Azure обозреватель данных, таблицы структурированы одинаково, и оба они используют один и тот же язык запросов Kusto (ККЛ). Использование Log Analytics для работы с запросами Azure Monitor в портал Azure аналогично работе с веб-ИНТЕРФЕЙСом Azure обозреватель данных. Можно даже [включить данные из рабочей области log Analytics в запрос Обозреватель данных Azure](/azure/data-explorer/query-monitor-data). 


## <a name="next-steps"></a>Дальнейшие действия

- Сведения о [запросах журнала](../log-query/log-query-overview.md) для извлечения и анализа данных из рабочей области log Analytics.
- Прочитайте статью о [метриках в Azure Monitor](data-platform-metrics.md).
- Узнайте о [доступных данных мониторинга](data-sources.md) для различных источников в Azure.