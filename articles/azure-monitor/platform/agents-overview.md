---
title: Обзор агентов мониторинга Azure | Документация Майкрософт
description: В этой статье представлен подробный обзор доступных агентов Azure, которые поддерживают мониторинг виртуальных машин, размещенных в Azure или гибридной среде.
services: azure-monitor
documentationcenter: azure-monitor
author: mgoedtel
manager: carmonm
editor: ''
ms.assetid: ''
ms.service: azure-monitor
ms.workload: na
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 11/14/2018
ms.author: magoedte
ms.openlocfilehash: 89e73a4578134493a25ec3cbd2385433a2b36156
ms.sourcegitcommit: bf509e05e4b1dc5553b4483dfcc2221055fa80f2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2019
ms.locfileid: "60003504"
---
# <a name="overview-of-the-azure-monitoring-agents"></a>Обзор агентов мониторинга Azure 
Microsoft Azure предоставляет несколько способов сбора различных типов данных с виртуальных машин, которые работают с программным обеспечением Microsoft в Windows и Linux, размещенных в Azure, вашем центре данных или в других поставщиках облачных служб. Ниже приведены три доступных типа агентов для мониторинга виртуальной машины:

* расширения системы диагностики Azure;
* агент Log Analytics для Linux и Windows;
* Агент зависимостей

В этой статье описываются различия между ними и их возможности, что позволяет определить, какой из них будет поддерживать ваши требования к мониторингу или управлению ИТ-услугами.  

## <a name="azure-diagnostic-extension"></a>Расширение системы диагностики Azure
[Расширение системы диагностики Azure](../../azure-monitor/platform/diagnostics-extension-overview.md) (его часто называют расширением системы диагностики Windows Azure (WAD) или Linux (LAD)) стало общедоступным для облачных служб Azure в 2010 году. Это агент, который обеспечивает простой сбор данных диагностики вычислительного ресурса Azure, например виртуальной машины, и сохраняет его в хранилище Azure. После сохранения можно просмотреть данные с помощью одного из инструментов, например [Server Explorer в Visual Studio](/visualstudio/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) или [Обозреватель службы хранилища Azure](../../vs-azure-tools-storage-manage-with-storage-explorer.md).

Теперь можно выбрать следующие параметры.

* Предопределенный набор счетчиков производительности и журналов событий операционной системы, или можно самому указать, что собирать. 
* Все запросы или неудачные запросы к веб-серверу IIS.
* Приложение .NET для трассировки журналов вывода.
* Трассировку событий для Windows (ETW). 
* Сбор регистрации событий из системного журнала.  
* Аварийные дампы 

Агент системы диагностики Azure следует использовать для выполнения таких действий:

* Архивация журналов и метрик в службу хранилища Azure.
* Интеграция данных мониторинга с помощью сторонних средств. Эти средства используют разнообразные методы, включая выполнение запросов к учетной записи хранения, перенаправляемых в [Центры событий](../../event-hubs/event-hubs-about.md), или выполнение запросов с помощью [REST API Azure Monitor](../../azure-monitor/platform/rest-api-walkthrough.md).
* Отправка данных в Azure Monitor для создания диаграмм метрик на портале Azure или создания [оповещений о метриках](../../azure-monitor/platform/alerts-metric-overview.md) практически в режиме реального времени. 
* Автомасштабирование масштабируемых наборов виртуальных машин и классических облачных служб на основе метрик гостевой ОС.
* Исследование неполадок загрузки виртуальной машины с помощью [диагностики загрузки](../../virtual-machines/troubleshooting/boot-diagnostics.md).
* Понимание того, как выполняются приложения, а также упреждающее определение проблем, влияющих на них, с помощью [Application Insights](../../azure-monitor/overview.md).
* Настройте Azure Monitor, чтобы импортировать метрик и журналов данные, собранные из облачных служб, классических виртуальных машин и узлов Service Fabric, хранящихся в учетной записи хранения Azure.

## <a name="log-analytics-agent"></a>Агент Log Analytics
Для расширенного мониторинга, требующие более сбора метрик и подмножество журналов, необходим агент Log Analytics для Windows (также известном как Microsoft Monitoring Agent (MMA)) и Linux. Агент Log Analytics разработан для комплексного управления на локальных физических и виртуальных машинах, компьютерах, отслеживаемых с помощью System Center Operations Manager, и виртуальных машинах, размещенных в других облаках. Агенты Windows и Linux подключаются к рабочей области Log Analytics в Azure Monitor для сбора данных мониторинга на базе решений как так и пользовательских источников данных, которые можно настроить.

[!INCLUDE [log-analytics-agent-note](../../../includes/log-analytics-agent-note.md)]

Агент Log Analytics следует использовать для выполнения таких действий:

* Сбор данных из различных источников, размещенных в Azure, других облачных провайдерах и в локальных ресурсах. 
* Использование одного из решений мониторинга Azure Monitor, например [Azure Monitor для виртуальных машин](../insights/vminsights-overview.md), [Azure Monitor для контейнеров](../insights/container-insights-overview.md) и т. д.  
* Использование другой службы управления Azure, например [центра безопасности Azure](../../security-center/security-center-intro.md), [службы автоматизации Azure](../../automation/automation-intro.md) и т. д.

Ранее несколько служб Azure были оформлены в виде *Operations Management Suite*, и в результате агент Log Analytics совместно используется службами, включая центр безопасности Azure и службу автоматизации Azure.  Сюда входит полный набор предлагаемых функциональных возможностей, обеспечивающих комплексное управление виртуальными машинами Azure в течение их жизненного цикла.  Ниже приведены некоторые примеры.

* [Управление обновлениями службы автоматизации Azure](../../automation/automation-update-management.md) для обновлений операционной системы.
* [Настройка требуемого состояния службы автоматизации Azure](../../automation/automation-dsc-overview.md) для поддержки согласованного состояния конфигурации.
* Отслеживание изменений в конфигурации с помощью [Отслеживания изменений в службе автоматизации и инвентаризации Azure](../../automation/automation-change-tracking.md).
* Службы Azure, такие как [Application Insights](https://docs.microsoft.com/azure/application-insights/) и [центр безопасности Azure](https://docs.microsoft.com/azure/security-center/), которые изначально хранят свои данные непосредственно в Log Analytics.  

## <a name="dependency-agent"></a>Агент зависимостей
Агент зависимостей был разработан как часть решения схемы услуги, который не был изначально разработан корпорацией Майкрософт. [Схема услуги](../insights/service-map.md) и [Azure Monitor для виртуальных машин](../insights/vminsights-overview.md) требуется агент зависимостей в Windows и Linux виртуальных машин и он интегрируется с агент Log Analytics для сбора обнаруженные данные о процессах, запущенных на виртуальном компьютер и зависимости внешний процесс. Он сохраняет эти данные в рабочую область Log Analytics и визуализирует обнаруженных взаимосвязанных компонентов.

Для мониторинга виртуальной машины может потребоваться сочетание этих агентов. Агенты можно установить параллельно как расширения Azure, тем не менее в Linux сначала *необходимо* установить агент Log Analytics, иначе установка завершится ошибкой. 

## <a name="next-steps"></a>Дальнейшие действия

- Сведения о требованиях и поддерживаемых методах для развертывания агента на компьютеры, размещенные в Azure, в вашем центре данных или другой облачной среде, см. в статье [Сбор данных журнала с помощью агента Azure Log Analytics](../../azure-monitor/platform/log-analytics-agent.md).

