---
title: Создание настраиваемых панелей мониторинга в Azure Application Insights | Документация Майкрософт
description: Руководство по созданию настраиваемых панелей мониторинга ключевых показателей эффективности с помощью Azure Application Insights.
keywords: ''
services: application-insights
author: lgayhardt
ms.author: lagayhar
ms.date: 07/3/2019
ms.service: application-insights
ms.custom: mvc
ms.topic: tutorial
manager: carmonm
ms.openlocfilehash: fa91933c2243cd1a2737f93f796314330b6cf5a0
ms.sourcegitcommit: 5bdd50e769a4d50ccb89e135cfd38b788ade594d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2019
ms.locfileid: "67541509"
---
# <a name="create-custom-kpi-dashboards-using-azure-application-insights"></a>Создание настраиваемых панелей мониторинга ключевых показателей эффективности с помощью Azure Application Insights

Вы можете создать несколько панелей мониторинга на портале Azure, каждая из которых будет включать плитку, визуализирующую данные из нескольких ресурсов Azure в разных группах ресурсов и подписках.  Вы можете закрепить различные диаграммы и представления Azure Application Insights для создания пользовательских панелей мониторинга, предоставляющих полную картину работоспособности и производительности приложения. В этом руководстве описано создание пользовательской панели мониторинга, которая включает несколько типов данных и визуализации из Azure Application Insights.  Вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание настраиваемой панели мониторинга в Azure.
> * Добавление плитки из коллекции плиток.
> * Добавление стандартных метрик Application Insights на панель мониторинга.
> * Добавление пользовательской диаграммы метрики Application Insights на панель мониторинга.
> * Добавление результатов запроса журналов (Analytics) на панель мониторинга



## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством:

- Разверните приложение .NET в Azure и [включите пакет SDK для Application Insights](../../azure-monitor/app/asp-net.md).

## <a name="sign-in-to-azure"></a>Вход в Azure
Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="create-a-new-dashboard"></a>Создание панели мониторинга
Одна панель мониторинга может содержать ресурсы из нескольких приложений, групп ресурсов и подписок.  Начните работу с руководством с создания панели мониторинга для приложения.  

1. На панели мониторинга выберите **Новая панель мониторинга**.

   ![Новая панель мониторинга](media/tutorial-app-dashboards/1newdashboard.png)

1. Введите имя для панели мониторинга.
1. Ознакомьтесь с **коллекцией плиток** для различных плиток, которые можно добавить на панель мониторинга.  Помимо добавления плиток из галереи вы можете закрепить диаграммы и другие представления непосредственно из Application Insights на панели мониторинга.
1. Найдите плитку **Markdown** и перетащите ее на панель мониторинга.  Эта плитка позволяет добавлять форматированный текст в разметку, которая отлично подходит для добавления поясняющего текста на панель мониторинга.
1. Добавьте текст в свойства плитки и измените его размер на холсте панели мониторинга.
    
    ![Изменение разметки плитки](media/tutorial-app-dashboards/2dashboard-text.png)

1. Щелкните **Настройка выполнена** в верхней части экрана, чтобы выйти из режима настройки плитки.

## <a name="add-health-overview"></a>Добавление общих сведений о работоспособности
Панель мониторинга только со статическим текстом не вызывает много интереса, поэтому добавьте плитку из Application Insights для отображения информации о вашем приложении.  Можно добавить плитку Application Insights из коллекции плитки или закрепить ее напрямую с экранов Application Insights.  Это позволяет настроить диаграммы и представления, с которыми вы уже знакомы, перед закреплением их на панели мониторинга.  Начните с добавления стандартного обзора работоспособности приложения.  Это не требует настройки и предоставляет минимальные настройки на панели мониторинга.


1. На начальном экране выберите ресурс **Application Insights**.
2. На панели**Обзор** щелкните значок "Закрепить" ![значок "Закрепить"](media/tutorial-app-dashboards/pushpin.png) для добавления плитки на последнюю просматриваемую панель мониторинга.  
 
3. В правом верхнем углу появится уведомление о закреплении плитки на панели мониторинга. Щелкните **Закреплено на панели мониторинга** в уведомлении, чтобы вернуться к информационной панели, или панели мониторинга.
4. Эта плитка теперь добавлена ​​на вашу панель мониторинга. Чтобы изменить расположение плитки, выберите **Правка**. Щелкните и перетащите ее в нужное место, а затем щелкните **Настройка выполнена**. Теперь на панели мониторинга есть плитка с полезной информацией.

    ![Панель мониторинга с временной шкалой обзора](media/tutorial-app-dashboards/4dashboard-edit.png)

## <a name="add-custom-metric-chart"></a>Добавление пользовательской диаграммы метрики
Панель **Метрики** позволяет графически отображать метрики, собранные Application Insights, с помощью дополнительных фильтров и группировки.  Как и все остальное в Application Insights, эту диаграмму можно добавить на панель мониторинга.  Для этого необходимо сначала выполнить небольшую настройку.

1. На начальном экране выберите ресурс **Application Insights**.
1. Выберите **Метрики**.  
2. Пустая диаграмма уже создана. Вам будет предложено ввести метрику.  Добавьте метрику на диаграмму, при необходимости можно добавить фильтры и группировку.  В приведенном ниже примере показано количество запросов к серверу, сгруппированных по успешности.  Это предоставляет постоянное представление об успешных и неуспешных запросах.

    ![Добавление метрики](media/tutorial-app-dashboards/metrics.png)

4. Выберите **Закрепить на панели мониторинга** справа. После этого представление будет добавлено на последнюю панель мониторинга, с которой вы работали.

3.  В правом верхнем углу появится уведомление о закреплении плитки на панели мониторинга. Щелкните **Закреплено на панели мониторинга** в уведомлении, чтобы вернуться к панели мониторинга, или используйте колонку панели мониторинга.

4. Эта плитка теперь добавлена ​​на вашу панель мониторинга. Чтобы изменить расположение плитки, выберите **Правка**. Щелкните и перетащите ее в нужное место, а затем щелкните **Настройка выполнена**.

## <a name="add-logs-analytics-query"></a>Добавление запроса журналов (Analytics)
Журналы (Analytics) Azure Application Insights предоставляют полнофункциональный язык запросов, позволяющий анализировать все данные, собранные Application Insights. Так же, как диаграммы и другие представления, вы можете добавить выходные данные запроса журналов на свою панель мониторинга.

Так как журналы (Analytics) Azure Application Insights представляют собой отдельную службу, вам необходимо предоставить общий доступ к панели мониторинга для включения запроса журналов. При предоставлении общего доступа к панели мониторинга Azure она будет опубликована в качестве ресурса Azure, благодаря которому она станет доступной другим пользователям и ресурсам.  

1. В верхней части экрана панели мониторинга щелкните **Доступ**.

    ![Публикация панели мониторинга](media/tutorial-app-dashboards/8dashboard-share.png)

2. Сохраните **имя панели мониторинга** без изменений и выберите **Имя подписки**, чтобы предоставить общий доступ к панели мониторинга.  Щелкните **Опубликовать**.  Панель мониторинга теперь доступна для других служб и подписок.  При необходимости можно задать определенных пользователей, которые будут иметь доступ к панели мониторинга.
1. На начальном экране выберите ресурс **Application Insights**.
2. Щелкните **Журналы (аналитика)** слева под разделом мониторинга, чтобы открыть портал журналов (Analytics).
3. Введите следующий запрос, который возвращает 10 наиболее часто запрашиваемых страниц и их число запросов:

    ``` Kusto
    requests
    | summarize count() by name
    | sort by count_ desc
    | take 10
    ```

4. Щелкните **Выполнить**, чтобы проверить результаты запроса.
5. Щелкните значок "Закрепить" ![Значок "Закрепить"](media/tutorial-app-dashboards/pushpin.png) и выберите имя вашей панели мониторинга. Причина, по которой в этом варианте выбрана панель мониторинга, в отличие от предыдущих шагов, когда использовалась последняя панель мониторинга, заключается в том, что консоль журналов (Analytics) является отдельной службой и возникает необходимость выбора из всех доступных панелей мониторинга.

5. Прежде чем вернуться к панели мониторинга, добавьте другой запрос, но теперь преобразуйте его в вид диаграммы. Таким образом вы увидите разные способы визуализации журнала запросов на панели мониторинга. Начните со следующего запроса, который обобщит 10 лучших операций с наибольшим количеством исключений.

    ``` Kusto
    exceptions
    | summarize count() by operation_Name
    | sort by count_ desc
    | take 10
    ```

6. Выберите **Диаграмма**, а затем измените ее на **Кольцевая**, чтобы визуализировать выходные данные.

    ![Диаграмма журналов (Analytics)](media/tutorial-app-dashboards/11querychart.png)

6. Щелкните значок "Закрепить" ![Значок "Закрепить"](media/tutorial-app-dashboards/pushpin.png) в правом верхнем углу для закрепления диаграммы на панели мониторинга, и в этот раз выберите ссылку для возврата на свою панель мониторинга.
4. Теперь результаты запросов будут добавлены на панель мониторинга в выбранном формате.  Щелкните и перетащите каждый из них в нужное место, затем щелкните **Настройка выполнена**.
5. Выберите значок "Карандаш" ![Значок "Карандаш"](media/tutorial-app-dashboards/pencil.png) в каждом заголовке для создания поясняющего заголовка.

5. Выберите **Опубликовать**, чтобы повторно публиковать изменения на панели мониторинга, которая теперь включает различные диаграммы и визуализации из Application Insights.


## <a name="next-steps"></a>Дополнительная информация
Теперь, когда вы узнали, как создавать настраиваемые панели мониторинга, ознакомьтесь с остальной документацией по Application Insights, включая пример внедрения.

> [!div class="nextstepaction"]
> [Углубленная диагностика для веб-приложений и служб с помощью Application Insights](../../azure-monitor/app/devops.md)
