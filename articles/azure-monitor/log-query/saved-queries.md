---
title: Сохраненные запросы в Azure Monitor Log Analytics
description: Запросы, которые можно запускать и изменять в нужных вами целях
ms.subservice: logs
ms.topic: article
author: rboucher
ms.author: robb
ms.date: 06/16/2020
ms.openlocfilehash: 462358ab967d4ba26a265d7b5f401b995223815e
ms.sourcegitcommit: 845a55e6c391c79d2c1585ac1625ea7dc953ea89
ms.contentlocale: ru-RU
ms.lasthandoff: 07/05/2020
ms.locfileid: "85959848"
---
# <a name="saved-queries-in-azure-monitor-log-analytics"></a>Сохраненные запросы в Azure Monitor Log Analytics

Log Analytics предлагает наборы примеров запросов, которые можно запускать самостоятельно или использовать в качестве отправной точки для собственных запросов. В этой статье описываются примеры запросов и способы их использования.

Если вы не знакомы с Log Analytics или языком запросов ККЛ, примеры запросов являются отличным способом начать работу. Они могут мгновенно получить представление о ресурсе и предоставить удобный способ начать обучение и использовать ККЛ, что сокращает время, необходимое для начала использования Log Analytics. Мы собрали и проработали более 250 примеров запросов, предназначенных для обеспечения мгновенной ценности, и количество таких запросов постоянно растет.

## <a name="in-context-queries"></a>Запросы в контексте

Новый интерфейс фильтрует и предлагает запросы в контексте. Иными словами, система автоматически отображает только те запросы, которые относятся к выбранной области.

- Для **одного ресурса** — запросы фильтруются в соответствии с типом ресурса.
- Для **группы ресурсов** — запросы фильтруются в соответствии с ресурсами в определенной группе ресурсов.
- Для **рабочей области** — запросы фильтруются в соответствии с установленными в рабочей области решениями.

Это поведение согласуется для всех областей Log Analytics. Если вы не видите пример запроса для требуемого типа ресурса, это может быть вызвано фильтрами в связи с назначением контекста. В более позднем разделе описано, как удалить области в контексте, чтобы можно было просматривать все возможные запросы.

> [!TIP]
> Чем больше ресурсов вы используете в вашей области, тем дольше на портале выполняется фильтрация и отображение диалогового окна пример запроса.

## <a name="example-query-user-interface"></a>Пример пользовательского интерфейса запроса

Примеры запросов можно получить из двух разных расположений.

### <a name="example-query-dialog"></a>Пример диалогового окна запроса

При первом вводе Log Analytics интерфейса *диалоговое окно примеры запросов* отображается автоматически.  Доступ к нему также можно получить, щелкнув в правом верхнем углу экрана с **примерами запросов**.

![Боковая панель](media/saved-queries/sidebar-2.png)

Затем откроется диалоговое окно пример запроса, как показано ниже.  

![Экран примеров запросов](media/saved-queries/example-query-start.png)

На предыдущем снимке экрана отображается экран "журналы" для экземпляра Azure Key Vault. Как упоминалось ранее в этой статье, запросы отображаются в контексте.  В результате на снимке экрана отображаются только Key Vault связанные примеры. Если выбрать всю подписку, отобразятся запросы для всех типов ресурсов в этой подписке.  

Каждый пример запроса представлен картой. Можно быстро просмотреть запросы, чтобы найти необходимые объекты. Вы можете выполнить запрос непосредственно из диалогового окна или загрузить его в редактор запросов для дополнительной тонкой настройки и корректировки.

### <a name="sidebar-query-experience"></a>Интерфейс боковой панели запросов

Все функции диалогового окна доступны в области запросы на боковой панели слева Log Analytics. Можно навести указатель мыши на имя запроса, чтобы получить описание запроса и дополнительные функциональные возможности.

![Боковая панель](media/saved-queries/sidebar-3.png)

## <a name="finding-and-filtering-queries"></a>Поиск и Фильтрация запросов

Параметры в этом разделе доступны как для запросов в диалоговом окне, так и для боковой панели, но с слегка отличающимся пользовательским интерфейсом.  

### <a name="use-favorites"></a>Использовать Избранное

Часто используемые запросы можно использовать для быстрого доступа.

> [!TIP]
> Сбор и Просмотр запросов в дальнейшем является хорошим способом начать работу. Найдите нужные запросы и щелкните звездочку рядом с запросом, чтобы добавить его в избранное. Если позже вы обнаружите, что запрос неудобен, вы можете отменить его Избранное.  

### <a name="filtering-and-group-by"></a>Фильтрация и группировка

Хотя диалоговое окно запроса фильтрами определенными для отображения только запросов с правильным контекстом, можно удалить фильтр и просмотреть все запросы.

### <a name="group-by"></a>Group by

Измените группирование запросов, щелкнув раскрывающийся список *Группировать по* :

![Пример запроса GroupBy на экране](media/saved-queries/example-query-groupby.png)

Диалоговое окно поддерживает группирование по:

- **Тип ресурса** — ресурс, определенный в Azure, например виртуальная машина. Полное сопоставление Azure Monitor журналов/Log Analytics таблиц с типом ресурса см. в [справочнике по Azure Monitor таблице](/azure/azure-monitor/reference/tables/tables-resourcetype) .  
- **Категория** — тип информации, такой как *Безопасность* или *Аудит*. Категории идентичны категориям, определенным в области побочные таблицы. Полный список категорий см. в [справочнике по Azure Monitor таблице](/azure/azure-monitor/reference/tables/tables-category) .  
- **Решение** — Azure Monitor решение, связанное с запросами.
- **Раздел** — раздел примера запроса, например *журналы действий* или *журналы приложений*. Свойство раздела является уникальным для примера запросов и может отличаться в зависимости от конкретного типа ресурса.

Значения группирования также действуют как активное оглавление. Щелкнув одно из значений в левой части экрана, можно прокрутить представление запросов вправо на щелчок элемента.

### <a name="filter"></a>Filter

Можно также фильтровать запросы по значениям GroupBy, упомянутым ранее. В диалоговом окне пример запроса фильтры находятся вверху.

![Пример фильтра экрана запросов](media/saved-queries/example-query-filter.png)

### <a name="combining-group-by-and-filter"></a>Объединение Group By и Filter

Функции Filter и Group By предназначены для совместной работы. Они обеспечивают гибкость при упорядочении запросов. Например, если вы используете группу ресурсов с несколькими ресурсами, может потребоваться выполнить фильтрацию по конкретному типу ресурсов и организовать итоговые запросы по теме.

## <a name="sample-query-dialog-appearance-behavior"></a>Поведение при отображении диалогового окна образца запроса

Если вы ККЛ Pro и предпочитаете перейти непосредственно в редактор запросов, можно переключить диалоговое окно запроса "Выкл.". При выключении диалогового окна пример запроса не загружается при Log Analytics загрузке экрана.

![Примеры включены](media/saved-queries/examples-on-off.png)

Вы всегда можете получить доступ к контекстному меню запроса с помощью кнопки *примеры запросов* на верхней панели log Analytics.

## <a name="query-explorer"></a>Обозреватель запросов

Интерфейс обозревателя запросов для сохранения и совместного использования созданных пользователем запросов остается неизменным в течение времени.

## <a name="next-steps"></a>Дальнейшие шаги

[Начало работы с запросами ККЛ](get-started-queries.md)

