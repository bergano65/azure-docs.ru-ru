---
title: Экземпляры контейнеров Azure и оркестрация контейнеров
description: Узнайте, как Экземпляры контейнеров Azure взаимодействуют с оркестраторами контейнеров.
services: container-instances
author: dlepow
ms.service: container-instances
ms.topic: article
ms.date: 04/15/2019
ms.author: danlep
ms.custom: mvc
ms.openlocfilehash: df9c3ecbec6dccd9ba8db2b375cfab3276005098
ms.sourcegitcommit: 509e1583c3a3dde34c8090d2149d255cb92fe991
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2019
ms.locfileid: "65072986"
---
# <a name="azure-container-instances-and-container-orchestrators"></a>Экземпляры контейнеров Azure и оркестраторы контейнеров

Благодаря небольшому размеру и ориентации приложения контейнеры хорошо подходят для эластичных сред доставки и архитектур на основе микрослужб. Задача автоматизации большого числа контейнеров, управления ими, а также способом их взаимодействия называется *оркестрацией*. Популярными оркестраторами контейнеров являются Kubernetes, DC/OS и Docker Swarm.

Служба "Экземпляры контейнеров Azure" предоставляет ряд базовых возможностей планирования платформ оркестрации. Решение "Экземпляры контейнеров Azure" не охватывает службы с более высокой стоимостью, чем предоставляемые этими платформами, но оно может служить дополнением к ним. В этой статье описана область обработки службы "Экземпляры контейнеров Azure" и взаимодействие с ней полнофункциональных оркестраторов контейнеров.

## <a name="traditional-orchestration"></a>Традиционная оркестрация

Стандартное определение оркестрации включает в себя следующие задачи:

- **Планирование**. Получив образ контейнера и запрос ресурса, найдите подходящий компьютер для запуска контейнера.
- **Сходство / Удаление сходства**. Укажите, что контейнеры должны запускаться рядом друг с другом (для производительности) или на достаточном расстоянии друг от друга (для доступности).
- **Наблюдение за работоспособностью**. Проверяйте наличие ошибок в контейнере и автоматически переносите их.
- **Отработка отказа**. Отслеживайте процессы, которые выполняется на каждом компьютере, и переносите контейнеры с неисправных компьютеров в работоспособные узлы.
- **Масштабирование**. В соответствии с требованиями добавляйте или удаляйте экземпляры контейнеров вручную или автоматически.
- **Сеть**. Укажите наложенную сеть для координации контейнеров и взаимодействия на нескольких хост-компьютерах.
- **Обнаружение служб**. Разрешите автоматическое размещение контейнеров, даже когда они перемещаются между хост-компьютерами и их IP-адреса изменяются.
- **Координированные обновления приложений**. Управляйте обновлениями контейнеров, чтобы избежать простоя приложений и выполняйте откат, если что-то пойдет не так.

## <a name="orchestration-with-azure-container-instances-a-layered-approach"></a>Оркестрация с помощью Экземпляров контейнеров Azure. Многоуровневый подход

Экземпляры контейнеров Azure позволяют применять многоуровневый подход для выполнения оркестрации, предоставляя все возможности планирования и управления, необходимые для запуска одного контейнера. Они также позволяют использовать платформы оркестратора, чтобы управлять многоконтейнерными задачами на их базе.

Так как базовая инфраструктура для экземпляров контейнеров управляется с помощью Azure, платформе оркестратора не нужно самостоятельно искать подходящий хост-компьютер для запуска одного контейнера. Благодаря гибкости облака один контейнер всегда будет доступным. Вместо этого оркестратор может сосредоточиться на задачах, которые упрощают разработку архитектуры нескольких контейнеров, включая масштабирование и скоординированные обновления.

## <a name="scenarios"></a>Сценарии

Пока интеграция оркестратора с Экземплярами контейнеров Azure еще только на начальной стадии, возможно возникновения нескольких различных сред.

### <a name="orchestration-of-container-instances-exclusively"></a>Монопольная оркестрация экземпляров контейнеров

Так как они позволяют быстро начать работу и оплачиваются по секундам, среда, которая основывается исключительно на экземплярах контейнеров Azure, предоставляет самый быстрый способ приступить к работе и обрабатывать крайне изменчивые рабочие нагрузки.

### <a name="combination-of-container-instances-and-containers-in-virtual-machines"></a>Сочетание экземпляров контейнеров и контейнеров на виртуальных машинах

Для длительных и стабильных рабочих нагрузок оркестрация контейнеров в кластере выделенных виртуальных машин обычно дешевле, чем выполнение тех же контейнеров с помощью службы "Экземпляры контейнеров Azure". Но экземпляры контейнеров — это эффективное решение для быстрого развертывания и сжатия общей емкости при обработке непредвиденных или кратковременных пиковых нагрузок в использовании.

Вместо масштабирования числа виртуальных машин в кластере и развертывания дополнительных контейнеров на этих компьютерах оркестратор может просто составить расписание для добавления контейнеров с помощью службы "Экземпляры контейнеров Azure" и удалить их, когда они больше не требуются.

## <a name="sample-implementation-virtual-nodes-for-azure-kubernetes-service-aks"></a>Пример реализации: виртуальные узлы для Службы Azure Kubernetes (AKS)

Чтобы быстро масштабировать рабочие нагрузки приложений в кластере [Службы Azure Kubernetes](../aks/intro-kubernetes.md) (AKS), используйте *виртуальные узлы*, созданные динамически в экземплярах контейнеров Azure. Виртуальные узлы обеспечивают взаимодействие контейнеров pod в сети, которые выполняются в кластерах ACI и AKS. 

В настоящее время виртуальные узлы поддерживают экземпляры контейнеров Linux. Начните работать с виртуальными узлами с помощью [Azure CLI](https://go.microsoft.com/fwlink/?linkid=2047538) или [портала Azure](https://go.microsoft.com/fwlink/?linkid=2047545).

Виртуальные узлы используют открытый код [Virtual Kubelet][aci-connector-k8s], чтобы имитировать Kubernetes [kubelet][kubelet-doc], регистрируя его как узел с неограниченной емкостью. Virtual Kubelet подготавливает создание объектов [pod][pod-doc] в качестве группы контейнеров в Экземплярах контейнеров Azure.

Для дополнительных примеров расширения Kubernetes API в бессерверные платформы контейнеров см. проект [Virtual Kubelet](https://github.com/virtual-kubelet/virtual-kubelet).

## <a name="next-steps"></a>Дальнейшие действия

Создайте свой первый контейнер с использованием службы "Экземпляры контейнеров Azure", используя [краткое руководство](container-instances-quickstart.md).

<!-- IMAGES -->

<!-- LINKS -->
[aci-connector-k8s]: https://github.com/virtual-kubelet/virtual-kubelet/tree/master/providers/azure
[kubelet-doc]: https://kubernetes.io/docs/admin/kubelet/
[pod-doc]: https://kubernetes.io/docs/concepts/workloads/pods/pod/