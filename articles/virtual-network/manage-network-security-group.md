---
title: Создание, изменение или удаление группы безопасности сети Azure
titlesuffix: Azure Virtual Network
description: Узнайте, где найти сведения о правилах безопасности, а также о том, как создать, изменить или удалить группу безопасности сети.
services: virtual-network
documentationcenter: na
author: KumudD
ms.service: virtual-network
ms.topic: how-to
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/13/2020
ms.author: kumud
ms.openlocfilehash: dfb6426ec4e75f6484df37008522b966ebc3af6f
ms.sourcegitcommit: dccb85aed33d9251048024faf7ef23c94d695145
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87281265"
---
# <a name="create-change-or-delete-a-network-security-group"></a>Создание, изменение и удаление группы безопасности сети

Правила безопасности в группах безопасности сети позволяют фильтровать различный сетевой трафик, который может проходить из подсетей виртуальной сети и сетевых интерфейсов или в них. Дополнительные сведения о группах безопасности сети см. [в этой статье](security-overview.md). Затем выполните инструкции из руководства по [фильтрации сетевого трафика](tutorial-filter-network-traffic.md) , чтобы получить некоторые возможности групп безопасности сети.

## <a name="before-you-begin"></a>Перед началом

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

Если у вас ее нет, настройте учетную запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) бесплатно. Перед началом оставшейся части этой статьи выполните одну из следующих задач:

- **Пользователи портала**. войдите в [портал Azure](https://portal.azure.com) с помощью учетной записи Azure.

- **Пользователи PowerShell**. выполните команды в [Azure Cloud Shell](https://shell.azure.com/powershell)или запустите PowerShell с компьютера. Azure Cloud Shell — это бесплатная интерактивная оболочка, с помощью которой можно выполнять действия, описанные в этой статье. Она включает предварительно установленные общие инструменты Azure и настроена для использования с вашей учетной записью. На вкладке Обозреватель Azure Cloud Shell найдите раскрывающийся список **выбрать среду** , а затем выберите **PowerShell** , если он еще не выбран.

    Если вы используете PowerShell локально, используйте Azure PowerShell Module версии 1.0.0 или более поздней. Выполните командлет `Get-Module -ListAvailable Az.Network`, чтобы узнать установленную версию. Если вам необходимо выполнить обновление, ознакомьтесь со статьей, посвященной [установке модуля Azure PowerShell](/powershell/azure/install-az-ps). Выполните команду `Connect-AzAccount`, чтобы создать подключение к Azure.

- **Пользователи интерфейса командной строки Azure (CLI)**. выполните команды в [Azure Cloud Shell](https://shell.azure.com/bash)или запустите CLI с компьютера. Если вы используете Azure CLI локально, используйте Azure CLI версии 2.0.28 или более поздней. Выполните командлет `az --version`, чтобы узнать установленную версию. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0](/cli/azure/install-azure-cli). Выполните команду `az login`, чтобы создать подключение к Azure.

Учетная запись, с которой выполняется вход, или подключение к Azure с помощью должны быть назначены [роли "участник сети](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) " или [настраиваемой роли](../role-based-access-control/custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) , которой назначены соответствующие действия, перечисленные в разделе [разрешения](#permissions).

## <a name="work-with-network-security-groups"></a>Работа с группами безопасности сети

Можно создать группу безопасности сети, [просмотреть все](#view-all-network-security-groups) группы, [просмотреть сведения о](#view-details-of-a-network-security-group) группе, а также [изменить](#change-a-network-security-group) или [удалить](#delete-a-network-security-group) группу безопасности сети. Вы также можете [создать или удалить связь](#associate-or-dissociate-a-network-security-group-to-or-from-a-subnet-or-network-interface) группы безопасности сети с сетевым интерфейсом или подсетью.

### <a name="create-a-network-security-group"></a>Создание группы безопасности сети

Существует ограничение на количество групп безопасности сети, которые можно создать для каждого расположения и подписки Azure. Дополнительные сведения см. в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).

1. На **домашней странице** или в меню [портала Azure](https://portal.azure.com) щелкните **Создать ресурс**.

2. Выберите **сеть**и щелкните **Группа безопасности сети**.

3. На странице **Создание группы безопасности сети** на вкладке **основные** параметры задайте значения для следующих параметров.

    | Параметр | Действие |
    | --- | --- |
    | **Подписка** | Выберите свою подписку. |
    | **Группа ресурсов** | Выберите существующую группу ресурсов или щелкните **создать** , чтобы создать новую группу ресурсов. |
    | **Имя** | Введите уникальную текстовую строку в группе ресурсов. |
    | **Регион** | Выберите нужное расположение. |

4. Выберите **Review + create** (Просмотреть и создать).

5. После появлении сообщения **Проверка пройдена** нажмите кнопку **создать**.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [az network nsg create](/cli/azure/network/nsg#az-network-nsg-create) |
| PowerShell | [New-AzNetworkSecurityGroup](/powershell/module/az.network/new-aznetworksecuritygroup) |

### <a name="view-all-network-security-groups"></a>Просмотр всех групп безопасности сети

Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группы безопасности сети. Найдите и выберите **группы безопасности сети**. Отобразится список групп безопасности сети для вашей подписки.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network NSG List](/cli/azure/network/nsg#az-network-nsg-list) |
| PowerShell | [Get-AzNetworkSecurityGroup](/powershell/module/az.network/get-aznetworksecuritygroup) |

### <a name="view-details-of-a-network-security-group"></a>Просмотр сведений о группе безопасности сети

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группы безопасности сети. Найдите и выберите **группы безопасности сети**.

2. Выберите имя группы безопасности сети.

В строке меню группы безопасности сети в разделе **Параметры**можно просмотреть **правила безопасности для входящего трафика**, **правила безопасности для исходящего трафика**, **Сетевые интерфейсы**и **подсети** , с которыми связана группа безопасности сети.

В разделе **мониторинг**можно включить или отключить **параметры диагностики**. В разделе **Поддержка и устранение неполадок**можно просмотреть **действующие правила безопасности**. Дополнительные сведения см. в разделе [ведение журнала диагностики для группы безопасности сети](virtual-network-nsg-manage-log.md) и [Диагностика проблемы фильтра сетевого трафика виртуальной машины](diagnose-network-traffic-filter-problem.md).

Дополнительные сведения о перечисленных общих параметрах Azure доступны в следующих статьях:

- [Журнал действий](../azure-monitor/platform/platform-logs-overview.md)
- [Управление доступом (IAM)](../role-based-access-control/overview.md)
- [Теги](../azure-resource-manager/management/tag-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
- [Блокировки](../azure-resource-manager/management/lock-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
- [Скрипт автоматизации](../azure-resource-manager/templates/export-template-portal.md)

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network NSG показывать](/cli/azure/network/nsg#az-network-nsg-show) |
| PowerShell | [Get-AzNetworkSecurityGroup](/powershell/module/az.network/get-aznetworksecuritygroup) |

### <a name="change-a-network-security-group"></a>Изменение группы безопасности сети

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группы безопасности сети. Найдите и выберите **группы безопасности сети**.

2. Выберите имя группы безопасности сети, которую необходимо изменить.

Наиболее распространенными изменениями являются [Добавление правила безопасности](#create-a-security-rule), [Удаление правила](#delete-a-security-rule)и [связывание или отмена связи группы безопасности сети с подсетью или сетевым интерфейсом](#associate-or-dissociate-a-network-security-group-to-or-from-a-subnet-or-network-interface).

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network NSG обновление](/cli/azure/network/nsg#az-network-nsg-update) |
| PowerShell | [Set-AzNetworkSecurityGroup](/powershell/module/az.network/set-aznetworksecuritygroup) |

### <a name="associate-or-dissociate-a-network-security-group-to-or-from-a-subnet-or-network-interface"></a>Создайте или удалите связь группы безопасности сети с подсетью или сетевым интерфейсом.

Чтобы создать или удалить связь группы безопасности сети с сетевым интерфейсом, ознакомьтесь с разделом [Создание, изменение и удаление группы безопасности сети](virtual-network-network-interface.md#associate-or-dissociate-a-network-security-group). Чтобы создать или удалить связь группы безопасности сети с подсетью, ознакомьтесь с разделом [Изменение параметров подсети](virtual-network-manage-subnet.md#change-subnet-settings).

### <a name="delete-a-network-security-group"></a>Удаление группы безопасности сети

Если группа безопасности сети связана с подсетями или сетевыми интерфейсами, удалить ее невозможно. Удалите связи группы безопасности сети со всеми связанными с ней подсетями и сетевыми интерфейсами, прежде чем пытаться удалить эту группу.

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группы безопасности сети. Найдите и выберите **группы безопасности сети**.

2. Выберите имя группы безопасности сети, которую нужно удалить.

3. На панели инструментов группы безопасности сети выберите **Удалить**. Выберите **Да** в диалоговом окне подтверждения.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network NSG Delete](/cli/azure/network/nsg#az-network-nsg-delete) |
| PowerShell | [Remove-Азнетворксекуритиграуп](/powershell/module/az.network/remove-aznetworksecuritygroup) |

## <a name="work-with-security-rules"></a>Работа с правилами безопасности

Группа безопасности сети содержит ноль или больше правил безопасности. Можно создать правило безопасности, [просмотреть все](#view-all-security-rules) правила, [просмотреть сведения о](#view-details-of-a-security-rule) правиле, а также [изменить](#change-a-security-rule) или [удалить](#delete-a-security-rule) правило безопасности.

### <a name="create-a-security-rule"></a>Создание правила безопасности

Существует ограничение на количество правил на группу безопасности сети, которые можно создать для каждого расположения и подписки Azure. Дополнительные сведения см. в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группы безопасности сети. Найдите и выберите **группы безопасности сети**.

2. Выберите имя группы безопасности сети, к которой нужно добавить правило безопасности.

3. В строке меню группы безопасности сети выберите **правила безопасности для входящего трафика** или **правила безопасности для исходящего трафика**.

    В списке есть несколько существующих правил, включая некоторые, которые вы, возможно, не добавили. При создании группы безопасности сети в нем создаются несколько правил безопасности по умолчанию. Ознакомьтесь с дополнительными сведениями о [правилах безопасности по умолчанию](security-overview.md#default-security-rules).  Правила безопасности по умолчанию невозможно удалить, но их можно переопределить с помощью правил с более высоким приоритетом.

4. <a name="security-rule-settings"></a>Нажмите кнопку **Добавить**. Выберите или добавьте значения для следующих параметров, а затем нажмите кнопку **ОК**.

    | Параметр | Значение | Сведения |
    | ------- | ----- | ------- |
    | **Source** | Одно из двух значений:<ul><li>**Любые**</li><li>**IP-адреса**</li><li>**Тег службы** (правило безопасности для входящего трафика) или **VirtualNetwork** (правило безопасности для исходящего трафика)</li><li>**&nbsp;Группа безопасности &nbsp; приложений**</li></ul> | <p>При выборе **IP-адресов**необходимо также указать **диапазоны исходных IP-адресов и CIDR**.</p><p>При выборе **тега службы**можно также выбрать **тег исходной службы**.</p><p>Если выбрана **Группа безопасности приложений**, необходимо также выбрать существующую группу безопасности приложений. Если выбрать **группу безопасности приложений** как для **источника** , так и для **назначения**, то сетевые интерфейсы в обеих группах безопасности приложений должны находиться в одной виртуальной сети.</p> |
    | **Исходные IP-адреса и диапазоны CIDR** | Разделенный запятыми список IP-адресов и диапазонов между междоменной маршрутизацией (CIDR) | <p>Этот параметр отображается при изменении **источника** на **IP-адреса**. Необходимо указать одно значение или разделенный запятыми список нескольких значений. Пример нескольких значений: `10.0.0.0/16, 192.188.1.1` . Число значений, которые можно указать, ограничено. Дополнительные сведения см. в статье [ограничения Azure](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).</p><p>Если указанный IP-адрес назначен виртуальной машине Azure, укажите его частный IP-адрес, а не его общедоступный IP-адрес. Azure обрабатывает правила безопасности после того, как он преобразует общедоступный IP-адрес в частный IP-адрес для правил безопасности для входящего трафика, но до того, как он переводит частный IP-адрес в общедоступный IP-адрес для исходящих правил. Дополнительные сведения об общедоступных и частных IP-адресах в Azure см. в статье, посвященной [типам IP-адресов](virtual-network-ip-addresses-overview-arm.md).</p> |
    | **Тег службы источника** | Тег службы из раскрывающегося списка | Этот необязательный параметр отображается, если для правила безопасности входящего трафика задан тег " **источник** — **Служба** ". Тег службы — это предопределенный идентификатор категории IP-адресов. Дополнительные сведения о доступных тегах служб и о том, что представляет каждый тег, см. в разделе [теги служб](security-overview.md#service-tags). |
    | **Исходная группа безопасности приложений** | Существующая группа безопасности приложений | Этот параметр отображается, если для параметра **источник** задать значение **Группа безопасности приложения**. Выберите группу безопасности приложений, которая находится в том же регионе, что и сетевой интерфейс. Узнайте, как [создать группу безопасности приложений](#create-an-application-security-group). |
    | **Диапазоны исходных портов** | Одно из двух значений:<ul><li>Один порт, например`80`</li><li>Диапазон портов, например`1024-65535`</li><li>Разделенный запятыми список отдельных портов и/или диапазонов портов, например`80, 1024-65535`</li><li>Звездочка ( `*` ), разрешающая трафик через любой порт</li></ul> | Этот параметр указывает порты, в которых правило разрешает или запрещает трафик. Число портов, которые можно указать, ограничено. Дополнительные сведения см. в статье [ограничения Azure](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits). |
    | **Назначение** | Одно из двух значений:<ul><li>**Любые**</li><li>**IP-адреса**</li><li>**Тег службы** (правило безопасности для исходящего трафика) или **VirtualNetwork** (правило безопасности для входящего трафика)</li><li>**&nbsp;Группа безопасности &nbsp; приложений**</li></ul> | <p>При выборе **IP-адресов**также укажите **диапазоны IP-адресов назначения и CIDR**.</p><p>Если выбрать **VirtualNetwork**, трафик будет разрешен для всех IP-адресов в адресном пространстве виртуальной сети. **VirtualNetwork** — это тег службы.</p><p>Если выбрана **Группа безопасности приложений**, необходимо выбрать существующую группу безопасности приложений. Узнайте, как [создать группу безопасности приложений](#create-an-application-security-group).</p> |
    | **Диапазоны IP-адресов назначения и CIDR** | Разделенный запятыми список IP-адресов и диапазонов CIDR | <p>Этот параметр отображается при изменении **назначения** на **IP-адреса**. Аналогично **исходным** и **исходным IP-адресам и диапазонам CIDR**можно указать один или несколько адресов или диапазонов. Число, которое можно указать, ограничено. Дополнительные сведения см. в статье [ограничения Azure](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).</p><p>Если указанный IP-адрес назначен виртуальной машине Azure, убедитесь, что вы указали его частный IP-адрес, а не его общедоступный. Azure обрабатывает правила безопасности после того, как он преобразует общедоступный IP-адрес в частный IP-адрес для входящих правил безопасности, но до того, как Azure переводит частный IP-адрес в общедоступный IP-адрес для исходящих правил. Дополнительные сведения об общедоступных и частных IP-адресах в Azure см. в статье, посвященной [типам IP-адресов](virtual-network-ip-addresses-overview-arm.md).</p> |
    | **Тег целевой службы** | Тег службы из раскрывающегося списка | Этот необязательный параметр отображается, если изменить **назначение** на **тег службы** для исходящего правила безопасности. Тег службы — это предопределенный идентификатор категории IP-адресов. Дополнительные сведения о доступных тегах служб и о том, что представляет каждый тег, см. в разделе [теги служб](security-overview.md#service-tags). |
    | **Целевая группа безопасности приложений** | Существующая группа безопасности приложений | Этот параметр отображается, если для параметра **назначение** задано значение **Группа безопасности приложения**. Выберите группу безопасности приложений, которая находится в том же регионе, что и сетевой интерфейс. Узнайте, как [создать группу безопасности приложений](#create-an-application-security-group). |
    | **Диапазоны портов назначения** | Одно из двух значений:<ul><li>Один порт, например`80`</li><li>Диапазон портов, например`1024-65535`</li><li>Разделенный запятыми список отдельных портов и/или диапазонов портов, например`80, 1024-65535`</li><li>Звездочка ( `*` ), разрешающая трафик через любой порт</li></ul> | Как и в случае с **диапазонами исходных портов**, можно указать один или несколько портов и диапазонов. Число, которое можно указать, ограничено. Дополнительные сведения см. в статье [ограничения Azure](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits). |
    | **Протокол** | **ANY**, **TCP**, **UDP**или **ICMP** | Правило может быть ограничено протоколом TCP, протоколом UDP или протоколом обмена сообщениями Интернета (ICMP). По умолчанию правило применяется ко всем протоколам. |
    | **Действие** | **Разрешить** или **запретить** | Этот параметр указывает, разрешает или запрещает доступ данного правила к указанной конфигурации источника и назначения. |
    | **Приоритет** | Значение от 100 до 4096, уникальное для всех правил безопасности в группе безопасности сети | Azure обрабатывает правила безопасности в порядке приоритета. Чем меньше число, тем выше приоритет. При создании правил, таких как 100, 200 и 300, рекомендуется оставлять зазор между номерами приоритетов. Освобождение пропусков упрощает добавление правил в будущем, чтобы их можно было задать выше или ниже приоритета по сравнению с существующими правилами. |
    | **Имя** | Уникальное имя правила в группе безопасности сети. | Оно может содержать до 80 знаков. Оно должно начинаться с буквы или цифры и должно заканчиваться буквой, цифрой или символом подчеркивания. Имя может содержать только буквы, цифры, символы подчеркивания, точки или дефисы. |
    | **Описание** | Текстовое описание | При необходимости можно указать текстовое описание для правила безопасности. |

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [az network nsg rule create](/cli/azure/network/nsg/rule#az-network-nsg-rule-create) |
| PowerShell | [New-AzNetworkSecurityRuleConfig](/powershell/module/az.network/new-aznetworksecurityruleconfig) |

### <a name="view-all-security-rules"></a>Просмотр всех правил безопасности

Группа безопасности сети содержит ноль или более правил. Узнать больше о сведениях при просмотре правил можно из статьи [Безопасность сети](security-overview.md).

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть правила группы безопасности сети. Найдите и выберите **группы безопасности сети**.

2. Выберите имя группы безопасности сети, для которой нужно просмотреть правила.

3. В строке меню группы безопасности сети выберите **правила безопасности для входящего трафика** или **правила безопасности для исходящего трафика**.

Список содержит все созданные правила и правила безопасности группы безопасности сети [по умолчанию](security-overview.md#default-security-rules).

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [az network nsg rule list](/cli/azure/network/nsg/rule#az-network-nsg-rule-list) |
| PowerShell | [Get-Азнетворксекуритирулеконфиг](/powershell/module/az.network/get-aznetworksecurityruleconfig) |

### <a name="view-details-of-a-security-rule"></a>Просмотр сведений о правиле безопасности

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть правила группы безопасности сети. Найдите и выберите **группы безопасности сети**.

2. Выберите имя группы безопасности сети, для которой необходимо просмотреть сведения о правиле.

3. В строке меню группы безопасности сети выберите **правила безопасности для входящего трафика** или **правила безопасности для исходящего трафика**.

4. Выберите правило, сведения о котором нужно просмотреть. Описание всех параметров см. в разделе [Параметры правил безопасности](#security-rule-settings).

    > [!NOTE]
    > Эта процедура применяется только к настраиваемому правилу безопасности. Он не работает, если выбрано правило безопасности по умолчанию.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network NSG, отображение правила](/cli/azure/network/nsg/rule#az-network-nsg-rule-show) |
| PowerShell | [Get-Азнетворксекуритирулеконфиг](/powershell/module/az.network/get-aznetworksecurityruleconfig) |

### <a name="change-a-security-rule"></a>Изменение правила безопасности

1. Выполните инструкции из раздела [Просмотр сведений о правиле безопасности](#view-details-of-a-security-rule).

2. При необходимости измените параметры, а затем нажмите кнопку **сохранить**. Описание всех параметров см. в разделе [Параметры правил безопасности](#security-rule-settings).

    > [!NOTE]
    > Эта процедура применяется только к настраиваемому правилу безопасности. Изменять правило безопасности по умолчанию запрещено.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [az network nsg rule update](/cli/azure/network/nsg/rule#az-network-nsg-rule-update) |
| PowerShell | [Set-AzNetworkSecurityRuleConfig.](/powershell/module/az.network/set-aznetworksecurityruleconfig) |

### <a name="delete-a-security-rule"></a>Удаление правила безопасности

1. Выполните инструкции из раздела [Просмотр сведений о правиле безопасности](#view-details-of-a-security-rule).

2. Нажмите **Удалить**, а затем — **Да**.

    > [!NOTE]
    > Эта процедура применяется только к настраиваемому правилу безопасности. Удаление правила безопасности по умолчанию запрещено.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network NSG правило Delete](/cli/azure/network/nsg/rule#az-network-nsg-rule-delete) |
| PowerShell | [Remove-Азнетворксекуритирулеконфиг](/powershell/module/az.network/remove-aznetworksecurityruleconfig) |

## <a name="work-with-application-security-groups"></a>Работа с группами безопасности приложений

Группа безопасности приложений содержит ноль или более сетевых интерфейсов. Дополнительные сведения см. в разделе [Группы безопасности приложений](security-overview.md#application-security-groups). Все сетевые интерфейсы внутри группы безопасности приложений должны находиться в одной виртуальной сети. Чтобы узнать больше о добавлении сетевого интерфейса в группу безопасности приложений, ознакомьтесь с разделом [Создание, изменение или удаление сетевых интерфейсов](virtual-network-network-interface.md#add-to-or-remove-from-application-security-groups).

### <a name="create-an-application-security-group"></a>Создание группы безопасности приложений

1. На **домашней странице** или в меню [портала Azure](https://portal.azure.com) щелкните **Создать ресурс**.

2. В поле поиска введите *Группа безопасности приложения*.

3. На странице **Группа безопасности приложений** выберите **создать**.

4. На странице **Создание группы безопасности приложения** на вкладке **основные** параметры задайте значения для следующих параметров.

    | Параметр | Действие |
    | --- | --- |
    | **Подписка** | Выберите свою подписку. |
    | **Группа ресурсов** | Выберите существующую группу ресурсов или щелкните **создать** , чтобы создать новую группу ресурсов. |
    | **Имя** | Введите уникальную текстовую строку в группе ресурсов. |
    | **Регион** | Выберите нужное расположение. |

5. Выберите **Review + create** (Просмотреть и создать).

6. На вкладке **Просмотр и создание** после появлении сообщения **Проверка пройдена** выберите **создать**.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network ASG CREATE](/cli/azure/network/asg#az-network-asg-create) |
| PowerShell | [New-Азаппликатионсекуритиграуп](/powershell/module/az.network/new-azapplicationsecuritygroup) |

### <a name="view-all-application-security-groups"></a>Просмотр всех групп безопасности приложений

Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группы безопасности приложений. Найдите и выберите **группы безопасности приложений**. В портал Azure отображается список групп безопасности приложений.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network ASG List](/cli/azure/network/asg#az-network-asg-list) |
| PowerShell | [Get-Азаппликатионсекуритиграуп](/powershell/module/az.network/get-azapplicationsecuritygroup) |

### <a name="view-details-of-a-specific-application-security-group"></a>Просмотр сведений об определенной группе безопасности приложений

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группу безопасности приложений. Найдите и выберите **группы безопасности приложений**.

2. Выберите имя группы безопасности приложений, сведения о которой необходимо просмотреть.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network ASG показывать](/cli/azure/network/asg#az-network-asg-show) |
| PowerShell | [Get-Азаппликатионсекуритиграуп](/powershell/module/az.network/get-azapplicationsecuritygroup) |

### <a name="change-an-application-security-group"></a>Изменение группы безопасности приложений

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы просмотреть группу безопасности приложений. Найдите и выберите **группы безопасности приложений**.

2. Выберите имя группы безопасности приложений, которую необходимо изменить.

3. Нажмите кнопку **изменить** рядом с параметром, который необходимо изменить. Например, можно добавить или удалить **теги**или изменить **группу ресурсов** или **подписку**.

    > [!NOTE]
    > Изменить расположение нельзя.

    В строке меню можно также выбрать **Управление доступом (IAM)**. На странице **Управление доступом (IAM)** можно назначить или удалить разрешения для группы безопасности приложений.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network ASG обновление](/cli/azure/network/asg#az-network-asg-update) |
| PowerShell | Нет командлета PowerShell |

### <a name="delete-an-application-security-group"></a>Удаление группы безопасности приложений

Вы не можете удалить группу безопасности приложений, если она содержит какие бы то ни было сетевые интерфейсы. Чтобы удалить все сетевые интерфейсы из группы безопасности приложений, измените параметры сетевого интерфейса или удалите сетевые интерфейсы. Дополнительные сведения см. в разделе [Добавление или удаление групп безопасности приложений](virtual-network-network-interface.md#add-to-or-remove-from-application-security-groups) или [Удаление сетевого интерфейса](virtual-network-network-interface.md#delete-a-network-interface).

1. Перейдите в [портал Azure](https://portal.azure.com) , чтобы управлять группами безопасности приложений. Найдите и выберите **группы безопасности приложений**.

2. Выберите имя группы безопасности приложений, которую необходимо удалить.

3. Выберите **Удалить** и нажмите **Да**, чтобы удалить группу безопасности приложений.

#### <a name="commands"></a>Команды

| Средство | Команда |
| ---- | ------- |
| Azure CLI | [AZ Network ASG Delete](/cli/azure/network/asg#az-network-asg-delete) |
| PowerShell | [Remove-Азаппликатионсекуритиграуп](/powershell/module/az.network/remove-azapplicationsecuritygroup) |

## <a name="permissions"></a>Разрешения

Чтобы выполнять задачи по группам безопасности сети, правилам безопасности и группам безопасности приложений, ваша учетная запись должна быть назначена роли " [участник сети](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) " или [настраиваемой роли](../role-based-access-control/custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) , которой назначены соответствующие разрешения, перечисленные в следующих таблицах:

### <a name="network-security-group"></a>Группа безопасности сети

| Действие                                                        |   Имя                                                                |
|-------------------------------------------------------------- |   -------------------------------------------                         |
| Microsoft.Network/networkSecurityGroups/read                  |   Получение группы безопасности сети.                                          |
| Microsoft.Network/networkSecurityGroups/write                 |   Создание или обновление группы безопасности сети.                             |
| Microsoft.Network/networkSecurityGroups/delete                |   Удаление группы безопасности сети.                                       |
| Microsoft.Network/networkSecurityGroups/join/action           |   Привязка группы безопасности сети к подсети или сетевому интерфейсу. 

### <a name="network-security-group-rule"></a>Правило группы безопасности сети

| Действие                                                        |   Имя                                                                |
|-------------------------------------------------------------- |   -------------------------------------------                         |
| Microsoft.Network/networkSecurityGroups/securityRules/read            |   Получение правила.                                                            |
| Microsoft.Network/networkSecurityGroups/securityRules/write           |   Создание или обновление правила.                                               |
| Microsoft.Network/networkSecurityGroups/securityRules/delete          |   Удаление правила.                                                         |

### <a name="application-security-group"></a>Группа безопасности приложений

| Действие                                                                     | Имя                                                     |
| --------------------------------------------------------------             | -------------------------------------------              |
| Microsoft.Network/applicationSecurityGroups/joinIpConfiguration/action     | Присоединение конфигурации IP к группе безопасности приложений.|
| Microsoft.Network/applicationSecurityGroups/joinNetworkSecurityRule/action | Присоединение правила безопасности к группе безопасности приложений.    |
| Microsoft.Network/applicationSecurityGroups/read                           | Получение группы безопасности приложений.                        |
| Microsoft.Network/applicationSecurityGroups/write                          | Создание или обновление группы безопасности приложений.           |
| Microsoft.Network/applicationSecurityGroups/delete                         | Удаление группы безопасности приложений                     |

## <a name="next-steps"></a>Дальнейшие действия

- Создание сети или группы безопасности приложений с помощью [PowerShell](powershell-samples.md) или [Azure CLI](cli-samples.md) примеров сценариев или шаблонов Azure [Диспетчер ресурсов](template-samples.md)
- Создание и назначение [определений политик Azure](policy-samples.md) для виртуальных сетей
