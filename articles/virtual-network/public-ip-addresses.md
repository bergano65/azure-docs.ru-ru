---
title: Общедоступные IP-адреса в Azure
titlesuffix: Azure Virtual Network
description: Сведения об общедоступных IP-адресах в Azure.
services: virtual-network
documentationcenter: na
author: asudbring
manager: KumudD
ms.service: virtual-network
ms.subservice: ip-services
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/28/2020
ms.author: allensu
ms.openlocfilehash: ef79844cf2f90ce97ea30a1948a441f909255f98
ms.sourcegitcommit: d22a86a1329be8fd1913ce4d1bfbd2a125b2bcae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "96169942"
---
# <a name="public-ip-addresses"></a>Общедоступные IP-адреса

Общедоступные IP-адреса позволяют устанавливать входящее подключение от интернет-ресурсов к ресурсам Azure. Общедоступные IP-адреса позволяют ресурсам Azure взаимодействовать с Интернетом и общедоступными службами Azure. Адрес выделяется для ресурса, пока не будет назначен. Ресурс без назначенного общедоступного IP-адреса может передавать исходящие сообщения. Azure динамически назначает доступный IP-адрес, который не выделен для ресурса. Дополнительные сведения об исходящих подключениях в Azure см. в [этой статье](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json).

В диспетчере ресурсов Azure [общедоступный IP-адрес](virtual-network-public-ip-address.md) — это ресурс, который имеет собственные свойства. Некоторые ресурсы, которые можно связать с ресурсом общедоступного IP-адреса с помощью:

* сетевые интерфейсы виртуальных машин;
* Балансировщики нагрузки, доступные в Интернете
* VPN-шлюзы
* шлюзы приложений.
* Брандмауэр Azure

## <a name="ip-address-version"></a>Версия IP-адреса

Общедоступные IP-адреса создаются с адресами IPv4 или IPv6. 

## <a name="sku"></a>Номер SKU

Дополнительные сведения об обновлении SKU см. в статье [Обновление общедоступного IP-адреса](../virtual-network/virtual-network-public-ip-address-upgrade.md).

Общедоступные IP-адреса создаются с использованием одного из следующих номеров SKU:

>[!IMPORTANT]
> Соответствующие номера SKU необходимы для подсистемы балансировки нагрузки и ресурсов общедоступного IP-адреса. Невозможно объединить ресурсы номеров SKU уровня "Базовый" и "Стандартный". Изолированные виртуальные машины, виртуальные машины в ресурсе группы доступности и ресурсы масштабируемого набора виртуальных машин нельзя подключить к обоим SKU одновременно.  В новых конструкциях рекомендуется использовать номер SKU уровня "Стандартный".  Дополнительные сведения вы найдете в статье [Azure Load Balancer Standard overview](../load-balancer/load-balancer-standard-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Обзор Load Balancer уровня "Стандартный").

### <a name="standard"></a>Standard

Общедоступные IP-адреса стандартного SKU:

- Всегда используют статический метод выделения.
- Имеют настраиваемое время ожидания в случае простоя входящего потока 4–30 минут (значение по умолчанию — 4 минуты) и фиксированное время ожидания в случае простоя входящего потока 4 минуты.
- Обеспечение безопасности по умолчанию и закрытие входящего трафика. Разрешить вывод списка входящего трафика с помощью [группы безопасности сети](security-overview.md#network-security-groups).
- Назначено сетевым интерфейсам, стандартным подсистемам балансировки нагрузки или шлюзам приложений. Дополнительные сведения о подсистеме балансировки нагрузки "Стандартный" см. в статье [Load Balancer (цен. Категория "Стандартный") Azure](../load-balancer/load-balancer-standard-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json).
- Может быть избыточным в виде зоны (из всех трех зон) или зональные (можно создать зональные и гарантировать в определенной зоне доступности). Дополнительные сведения о зонах доступности см. в статьях [с обзорной информацией о зонах доступности](../availability-zones/az-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [об использовании Load Balancer уровня "Стандартный" с зонами доступности](../load-balancer/load-balancer-standard-availability-zones.md?toc=%2fazure%2fvirtual-network%2ftoc.json). **IP-адреса, избыточные в зоне, можно создавать только в [регионах, где включены 3 зоны доступности](https://docs.microsoft.com/azure/availability-zones/az-region) .** IP-адреса, созданные до создания зон, не будут избыточными в зоне.
 
> [!NOTE]
> Внутренний обмен данными с ресурсом номера SKU "Стандартный" будет невозможен, пока вы не создадите и не свяжете [группу безопасности сети](security-overview.md#network-security-groups) и явно не разрешите нужный трафик.

> [!NOTE]
> При использовании [IMDS службы метаданных экземпляра](../virtual-machines/windows/instance-metadata-service.md)доступны только общедоступные IP-адреса с номером SKU "базовый". SKU "Стандартный" не поддерживается.

### <a name="basic"></a>Basic

До появления номеров SKU все общедоступные IP-адреса имеют номер SKU категории "Базовый". 

С введением номеров SKU укажите номер SKU, который должен быть общедоступным IP-адресом. 

Основные адреса SKU:

- Назначаются с помощью статического или динамического выделения.
- Имеют настраиваемое время ожидания в случае простоя входящего потока 4–30 минут (значение по умолчанию — 4 минуты) и фиксированное время ожидания в случае простоя входящего потока 4 минуты.
- Открыты по умолчанию.  Однако это не обязательно.
- Назначено любому ресурсу Azure, которому можно назначить общедоступный IP-адрес, например:
    * Сетевые интерфейсы
    * VPN-шлюзы;
    * Шлюзы приложений
    * Общедоступные подсистемы балансировки нагрузки
- Не поддерживают сценарии с зоной доступности. Используйте общедоступный IP-адрес SKU уровня "Стандартный" для зон доступности. Дополнительные сведения о зонах доступности см. в статьях [с обзорной информацией о зонах доступности](../availability-zones/az-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [об использовании Load Balancer уровня "Стандартный" с зонами доступности](../load-balancer/load-balancer-standard-availability-zones.md?toc=%2fazure%2fvirtual-network%2ftoc.json).

## <a name="allocation-method"></a>Способ выделения

Базовый и стандартный общедоступные IP-адреса поддерживают **статическое** назначение.  Ресурсу назначается IP-адрес во время его создания. IP-адрес освобождается при удалении ресурса.

Общедоступные IP-адреса базового SKU поддерживают **динамическое** назначение. Dynamic является методом назначения по умолчанию. IP-адрес **не** предоставляется ресурсу во время создания при выборе параметра Dynamic (динамический).

IP-адрес назначается при связывании ресурса общедоступного IP-адреса с:

* Виртуальная машина 
* Первая виртуальная машина связана с внутренним пулом подсистемы балансировки нагрузки.

Если остановить или удалить ресурс, IP-адрес освобождается.  

Например, ресурс общедоступного IP-адреса освобождается из ресурса **a**. **Ресурс а** получает другой IP-адрес при запуске, если ресурс общедоступного IP-адреса переназначится.

IP-адрес освобождается, когда метод распределения изменяется со **статического** на **динамический**. Чтобы гарантировать, что IP-адрес для связанного ресурса остается прежним, явно задайте для метода выделения значение **static**. Статический IP-адрес назначается немедленно.

> [!NOTE]
> Даже если выбран **статический** способ выделения, нельзя указать фактический IP-адрес, назначенный ресурсу с общедоступным IP-адресом. Azure назначает IP-адрес из пула доступных IP-адресов в расположении Azure, в котором создан ресурс.
>

Статические общедоступные IP-адреса обычно используются в таких случаях:

* Если необходимо обновить правила брандмауэра для обмена данными с ресурсами Azure.
* разрешение DNS-имени, в рамках которого изменение IP-адреса влечет за собой необходимость обновить записи A;
* ваши ресурсы Azure взаимодействуют с другими веб-приложениями или службами, которые используют модель безопасности, основанную на IP-адресах;
* Вы используете сертификаты TLS/SSL, связанные с IP-адресом.

> [!NOTE]
> Azure выделяет общедоступные IP-адреса из диапазона, уникального для каждого региона в каждом облаке Azure. Вы можете загрузить список диапазонов (префиксов) для облаков Azure: [общедоступное](https://www.microsoft.com/download/details.aspx?id=56519), облако [правительства США](https://www.microsoft.com/download/details.aspx?id=57063), облако для [Китая](https://www.microsoft.com/download/details.aspx?id=57062) и [Германии](https://www.microsoft.com/download/details.aspx?id=57064).
>

## <a name="dns-hostname-resolution"></a>Разрешение DNS-имен узлов

Выберите этот параметр, чтобы указать метку доменного имени DNS для ресурса общедоступного IP-адреса. 

Этот выбор создает сопоставление для **domainnamelabel**. **Location**. cloudapp.Azure.com в общедоступный IP-адрес в службе DNS под управлением Azure. 

Например, создание общедоступного IP-адреса с помощью:

* **contoso** как **domainnamelabel**
* **Западная часть США** **Расположение** Azure

Полное доменное имя **contoso.westus.cloudapp.Azure.com** разрешается в общедоступный IP-адрес ресурса.

> [!IMPORTANT]
> Каждая созданная метка имени домена должна быть уникальной в пределах своего расположения в Azure.  
>

## <a name="dns-recommendations"></a>Рекомендации по DNS

Если требуется переместить регион, невозможно перенести полное доменное имя общедоступного IP-адреса. Используйте полное доменное имя, чтобы создать пользовательскую запись CNAME, указывающую на общедоступный IP-адрес. 

Если требуется переход на другой общедоступный IP-адрес, обновите запись CNAME вместо обновления полного доменного имени.

Для записи DNS можно использовать [Azure DNS](../dns/dns-custom-domain.md?toc=%2fazure%2fvirtual-network%2ftoc.json#public-ip-address) или внешний поставщик DNS. 

## <a name="virtual-machines"></a>Виртуальные машины

Чтобы связать общедоступный IP-адрес с виртуальной машиной [Windows](../virtual-machines/windows/overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) или [Linux](../virtual-machines/linux/overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json), назначьте этот адрес ее **сетевому интерфейсу**. 

Выберите **динамический** или **статический** для общедоступного IP-адреса. См. дополнительные сведения о [назначении IP-адресов сетевым интерфейсам](virtual-network-network-interface-addresses.md).

## <a name="internet-facing-load-balancers"></a>Балансировщики нагрузки, доступные в Интернете

Вы можете связать общедоступный IP-адрес любого [SKU](#sku) с [Azure Load Balancer](../load-balancer/load-balancer-overview.md), назначив его **интерфейсной** конфигурации балансировщика нагрузки. Общедоступный IP-адрес выступает в качестве IP-адреса с балансировкой нагрузки. 

Интерфейсной конфигурации подсистемы балансировки нагрузки можно назначить динамический или статический общедоступный IP-адрес. Внешнему интерфейсу подсистемы балансировки нагрузки можно назначить несколько общедоступных IP-адресов. Такая конфигурация включает сценарии с [несколькими виртуальными IP-адресами](../load-balancer/load-balancer-multivip-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) , такие как многоклиентская среда с веб-сайтами на основе TLS. 

См. дополнительные сведения см. о [подсистеме балансировки нагрузки Azure с номером SKU "Стандартный"](../load-balancer/load-balancer-standard-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json).

## <a name="vpn-gateways"></a>VPN-шлюзы

[VPN-шлюз Azure](../vpn-gateway/vpn-gateway-about-vpngateways.md?toc=%2fazure%2fvirtual-network%2ftoc.json) подключает виртуальную сеть Azure к:

* Виртуальные сети Azure
* Локальные сети. 

Общедоступный IP-адрес назначается VPN-шлюзу для подключения к удаленной сети. VPN-шлюзу можно назначить только *динамический* общедоступный IP-адрес уровня "Базовый".

## <a name="application-gateways"></a>шлюзы приложений.

Чтобы связать общедоступный IP-адрес со [шлюзом приложений](../application-gateway/application-gateway-introduction.md?toc=%2fazure%2fvirtual-network%2ftoc.json)Azure, назначьте этот адрес конфигурации **внешнего интерфейса** шлюза. 

* Назначьте **динамический** базовый общедоступный IP-адрес для конфигурации внешнего интерфейса шлюза приложений версии v1. 
* Назначьте **статический** адрес SKU "Стандартный" для конфигурации внешнего интерфейса v2.

## <a name="azure-firewall"></a>Брандмауэр Azure

[Брандмауэр Azure](../firewall/overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) позволяет создавать, применять и регистрировать политики приложений и сетевых подключений в подписках и виртуальных сетях.

С брандмауэром можно связать только **статические** общедоступные IP-адреса. Это позволяет внешним брандмауэрам обнаруживать трафик, исходящий из виртуальной сети. 


## <a name="at-a-glance"></a>Краткий обзор

В следующей таблице показано свойство, с помощью которого общедоступный IP-адрес может быть связан с ресурсом верхнего уровня и возможными методами распределения.

| Ресурс верхнего уровня | Связанный IP-адрес | Динамический | Статические |
| --- | --- | --- | --- |
| Виртуальная машина |сетевому интерфейсу |Да |Да |
| Подсистема балансировки нагрузки, доступная в Интернете |Интерфейсная конфигурация |Да |Да |
| VPN-шлюз |Конфигурация IP шлюза |Да |Нет |
| Шлюз приложений |Интерфейсная конфигурация |Да (только конфигурация V1) |Да (только конфигурация V2) |
| Брандмауэр Azure | Интерфейсная конфигурация | Нет | Да|

## <a name="limits"></a>Ограничения

Ограничения для IP-адресации перечислены в полном наборе [ограничений для сетевых подключений](../azure-resource-manager/management/azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#networking-limits) в Azure. 

Ограничения указаны по региону и по подписке. [Обратитесь в службу поддержки](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade) , чтобы увеличить ограничения по умолчанию до максимальных ограничений в зависимости от потребностей бизнеса.

## <a name="pricing"></a>Цены

За общедоступные IP-адреса взимается номинальная плата. Дополнительные сведения о ценах на IP-адреса в Azure см. на [соответствующей](https://azure.microsoft.com/pricing/details/ip-addresses) странице.

## <a name="next-steps"></a>Дальнейшие действия
* Сведения о [частных IP-адресах в Azure](private-ip-addresses.md)
* [Развертывание виртуальной машины со статическим общедоступным IP-адресом с использованием портала Azure](virtual-network-deploy-static-pip-arm-portal.md)

