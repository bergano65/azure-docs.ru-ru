---
title: Развертывание шаблона решения Ansible для Azure в CentOS
description: Сведения о развертывании шаблона решения Ansible на виртуальной машине CentOS, размещенной в Azure, а также об использовании средств, которые настроены для работы с Azure.
ms.service: ansible
keywords: ansible, azure, devops, solution template, virtual machine, managed identities for azure resources, centos, red hat
author: tomarchermsft
manager: jeconnoc
ms.author: tarcher
ms.topic: tutorial
ms.date: 01/28/2019
ms.openlocfilehash: 9fa711c86e3ef7f05e87504905ec642808d8f601
ms.sourcegitcommit: 415742227ba5c3b089f7909aa16e0d8d5418f7fd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2019
ms.locfileid: "55770288"
---
# <a name="deploy-the-ansible-solution-template-for-azure-to-centos"></a>Развертывание шаблона решения Ansible для Azure в CentOS
Шаблон решения Ansible для Azure позволяет настроить экземпляр Ansible на виртуальной машине CentOS вместе с Ansible и набором средств для работы с Azure. Вот эти средства:

- **Модули Ansible для Azure** — [набор модулей](./ansible-matrix.md), которые позволяют создавать инфраструктуру и управлять ею в Azure. По умолчанию развертывается последняя версия модулей. Тем не менее во время развертывания шаблона решения можно указать номер версии, который подходит для вашей среды.
- **Интерфейс командной строки Azure (CLI) 2.0** — [это](/cli/azure/?view=azure-cli-latest) кроссплатформенный интерфейс командной строки для управления ресурсами Azure. 
- **Управляемые удостоверения для ресурсов Azure** — [они](/azure/active-directory/managed-identities-azure-resources/overview) решают проблему безопасности хранения облачных учетных данных приложения.

## <a name="prerequisites"></a>Предварительные требования
- **Подписка Azure.** Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio), прежде чем начинать работу.

## <a name="deploy-the-ansible-solution-template-from-the-azure-marketplace"></a>Развертывание шаблона решения Ansible из Microsoft Azure Marketplace

1. Перейдите к [шаблону решения Ansible в Azure Marketplace](https://azuremarketplace.microsoft.com/en-%20%20us/marketplace/apps/azure-oss.ansible?tab=Overview).

1. Выберите **Загрузить сейчас**.

1. Появится окно с подробным описанием условий использования, политики конфиденциальности и условий использования Microsoft Azure Marketplace. Выберите **Продолжить**.

1. После этого откроется портал Azure на странице Ansible, описывающей шаблон решения. Нажмите кнопку **Создать**.

1. На странице **создания Ansible** вы увидите несколько вкладок. На вкладке **Основные сведения** введите необходимые данные.

    - **Имя** — укажите имя своего экземпляра Ansible. В целях демонстрации используется имя `ansiblehost`.
    - **Имя пользователя** — укажите имя пользователя, который будет иметь доступ к экземпляру Ansible. В целях демонстрации используется имя `ansibleuser`.
    - **Тип проверки подлинности** — выберите **Пароль** или **Открытый ключ SSH**. В целях демонстрации выбран вариант **Открытый ключ SSH**.
    - **Пароль** и **Подтвердите пароль** — если вы выбрали **Пароль** в качестве **типа проверки подлинности**, введите пароль для этих значений.
    - **Открытый ключ SSH** — если вы выбрали **Открытый ключ SSH** в качестве **типа проверки подлинности**, введите открытый ключ RSA в однострочном формате (начиная с `ssh-rsa`).
    - **Подписка** — выберите подписку Azure в раскрывающемся списке.
    - **Группа ресурсов** — выберите имеющуюся группу ресурсов из раскрывающегося списка или выберите параметр **Создать** и введите имя группы ресурсов. В целях демонстрации используется новая группа ресурсов с именем `ansiblerg`.
    - **Расположение** — из раскрывающегося списка выберите расположение, которое подходит для вашего сценария.

    ![Вкладка основных параметров Ansible на портале Azure](./media/ansible-deploy-solution-template/portal-ansible-setup-tab-1.png)

1. Нажмите кнопку **ОК**.

1. На вкладке **Дополнительные параметры** введите необходимые сведения:

    - **Размер** — по умолчанию портал Azure предлагает стандартный размер. Чтобы указать другой размер, который допустим для конкретного сценария, щелкните стрелку, после чего отобразится список различных размеров.
    - **Тип диска виртуальной машины** — выберите **SSD** (твердотельный накопитель уровня "Премиум") или **HDD** (жесткий диск). В целях демонстрации выбран диск **SSD** ввиду оптимальных характеристик производительности. Дополнительные сведения о каждом типе дискового хранилища см. в следующих статьях:
        - [Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин Azure](/azure/virtual-machines/windows/premium-storage)
        - [Управляемые диски SSD уровня "Стандартный" для рабочих нагрузок виртуальной машины Azure](/azure/virtual-machines/windows/disks-standard-ssd)
    - **Общедоступный IP-адрес** — укажите этот параметр, если вы хотите взаимодействовать с виртуальной машиной за ее пределами. По умолчанию используется новый общедоступный IP-адрес с именем `ansible-pip`. Чтобы указать другой IP-адрес, щелкните стрелку, укажите атрибуты, такие как имя, номер SKU и назначения этого IP-адреса. 
    - **Метка доменного имени** — введите общедоступное доменное имя виртуальной машины. Имя должно быть уникальным и соответствовать требованиям к именованию. Дополнительные сведения об указании имени для виртуальной машины см. в статье [Соглашения об именовании для ресурсов Azure](/azure/architecture/best-practices/naming-conventions).
    - **Ansible version** (Версия Ansible) — укажите номер версии либо значение `latest` для развертывания последней версии. Щелкните значок сведений рядом с параметром **Ansible version** (Версия Ansible), чтобы просмотреть подробные сведения о доступных версий.

    ![Вкладка дополнительных параметров Ansible на портале Azure](./media/ansible-deploy-solution-template/portal-ansible-setup-tab-2.png)

1. Нажмите кнопку **ОК**.

1. На вкладке **Ansible Integration Settings** (Параметры интеграции Ansible) задайте тип проверки подлинности. Дополнительные сведения о защите ресурсов Azure см. в статье [Что такое управляемые удостоверения для ресурсов Azure?](/azure/active-directory/managed-identities-azure-resources/overview).

    ![Вкладка параметров интеграции Ansible на портале Azure](./media/ansible-deploy-solution-template/portal-ansible-setup-tab-3.png)

1. Нажмите кнопку **ОК**.

1. На странице **Сводка** отображается процесс проверки и список указанных критериев для развертывания Ansible. Ссылка в нижней части вкладки позволяет **загрузить шаблон и параметры** для использования с поддерживаемыми языками и платформами Azure. 

    ![Вкладка сводки для Ansible на портале Azure](./media/ansible-deploy-solution-template/portal-ansible-setup-tab-4.png)

1. Нажмите кнопку **ОК**.

1. Когда появится вкладка **Создать**, нажмите кнопку **ОК** для развертывания Ansible.

1. Выберите значок **Уведомления** в верхней части страницы портала, чтобы отследить ход выполнения развертывания Ansible. Когда развертывание будет завершено, выберите **Перейти к группе ресурсов**. 

    ![Вкладка сводки для Ansible на портале Azure](./media/ansible-deploy-solution-template/portal-ansible-setup-complete.png)

1. На странице группы ресурсов получите IP-адрес узла Ansible и войдите для управления ресурсами Azure с помощью Ansible.

## <a name="next-steps"></a>Дополнительная информация
> [!div class="nextstepaction"] 
> [Создание виртуальной машины Linux в Azure с помощью Ansible](/azure/virtual-machines/linux/ansible-create-vm)
