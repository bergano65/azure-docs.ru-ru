---
title: Перенос виртуальных машин IaaS Azure в другой регион Azure с помощью службы Azure Site Recovery | Документация Майкрософт
description: Используйте службу Azure Site Recovery для переноса виртуальных машин IaaS Azure из одного региона Azure в другой.
services: site-recovery
author: rajani-janaki-ram
ms.service: site-recovery
ms.topic: tutorial
ms.date: 01/28/2019
ms.author: rajanaki
ms.custom: MVC
ms.openlocfilehash: dc49b33fd3e6d582b31af5fe0507884e60205757
ms.sourcegitcommit: 5839af386c5a2ad46aaaeb90a13065ef94e61e74
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2019
ms.locfileid: "58078012"
---
# <a name="move-azure-vms-to-another-region"></a>Перенос виртуальных машин Azure в другой регион

Azure развивается вместе с клиентской базой и добавляет поддержку новых регионов в соответствии с растущими требованиями. Кроме того, в разных службах ежемесячно добавляются новые возможности. Вам может потребоваться переместить виртуальные машины в другой регион или в Зоны доступности, чтобы повысить доступность.

В этой статье рассматриваются различные сценарии перемещения виртуальных машин. Кроме того, в ней приведено руководство по настройке архитектуры в целевом регионе для повышения доступности. 

В рамках этого учебника вы ознакомитесь со следующими сведениями:

> [!div class="checklist"]
> 
> * Причины перемещения виртуальных машин.
> * Стандартные архитектуры.
> * Перемещение виртуальных машин "как есть" в целевой регион.
> * Перемещение виртуальных машин для повышения доступности.

## <a name="reasons-to-move-azure-vms"></a>Причины перемещения виртуальных машин Azure

Перемещение виртуальных машин может потребоваться по следующим причинам:

- У вас уже есть развертывание в одном регионе и была добавлена поддержка нового региона, который ближе к пользователям вашего приложения или службы. В этом случае вы можете переместить виртуальные машины "как есть" в новый регион, чтобы уменьшить задержку. Такой же подход применяется, если необходимо консолидировать подписки или существуют правила управления или организации, требующие перемещения.
- Ваша виртуальная машина была развернута как одноэкземплярная или как часть группы доступности. Если вы хотите расширить Соглашения об уровне обслуживания относительно доступности, вы можете переместить виртуальные машины в зону доступности.

## <a name="steps-to-move-azure-vms"></a>Перемещение виртуальных машин Azure

Для этого необходимо выполнить следующие шаги:

1. Проверьте предварительные требования.
2. Выполните подготовку исходных виртуальных машин.
3. Выполните подготовку целевого региона.
4. Скопируйте данные в целевой регион. Используйте технологию репликации Azure Site Recovery для копирования данных исходной виртуальной машины в целевой регион.
5. Выполните проверку настройки. После завершения репликации проверьте конфигурацию, выполнив тестовую отработку отказа в непроизводственной сети.
6. Выполните перемещение.
7. Выполните отмену ресурсов в исходном регионе.

> [!NOTE]
> Сведения об этих шагах приведены в следующих разделах.
> [!IMPORTANT]
> В настоящее время Azure Site Recovery поддерживает перемещение виртуальных машин из одного региона в другой и не поддерживает перемещение в пределах одного региона.

## <a name="typical-architectures-for-a-multi-tier-deployment"></a>Стандартные архитектуры для многоуровневого развертывания

В этом разделе описаны самые распространенные архитектуры развертывания для многоуровневого приложения в Azure. Примером является трехуровневое приложение с общедоступным IP-адресом. Каждый из уровней (сеть, приложение и база данных) имеет по две виртуальные машины, подключенные с помощью подсистемы балансировки нагрузки Azure к другим уровням. Уровень базы данных использует репликацию с функцией SQL Server Always On между виртуальными машинами для обеспечения высокой доступности.

* **Виртуальные машины с одним экземпляром, развернутые на различных уровнях**. Каждая виртуальная машина на уровне настроена как виртуальная машина с одним экземпляром и подключена с помощью подсистем балансировки нагрузки к другим уровням. Это самая простая конфигурация.

     ![Развертывание виртуальной машины с одним экземпляром на уровнях](media/move-vm-overview/regular-deployment.png)

* **Виртуальные машины на каждом уровне, развернутые в группах доступности**. Каждая виртуальная машина на уровне настраивается в группе доступности. [Группы доступности](https://docs.microsoft.com/azure/virtual-machines/windows/tutorial-availability-sets) распределяют развернутые в Azure виртуальные машины между несколькими изолированными аппаратными узлами в кластере. Это гарантирует, что в случае сбоя оборудования или программного обеспечения в Azure затрагивается только подмножество виртуальных машин, а общее решение остается доступным для использования.

     ![Развертывание виртуальной машины в группах доступности](media/move-vm-overview/avset.png)

* **Виртуальные машины на каждом уровне, развернутые в Зонах доступности**. Каждая виртуальная машина на уровне настраивается в [Зонах доступности](https://docs.microsoft.com/azure/availability-zones/az-overview). Зона доступности в регионе Azure — это сочетание домена сбоя и домена обновления. Например, если вы создаете три или боле виртуальных машин в трех зонах в регионе Azure, виртуальные машины эффективно распределяются между тремя доменами сбоя и тремя доменами обновления. Платформа Azure поддерживает такое распределение между доменами обновления, чтобы виртуальные машины в различных зонах не обновлялись одновременно.

     ![Развертывание зоны доступности](media/move-vm-overview/zone.png)

## <a name="move-vms-as-is-to-a-target-region"></a>Перемещение виртуальных машин "как есть" в целевое расположение

Здесь показано, как будут выглядеть развертывания после перемещения "как есть" в целевой регион с учетом вышеупомянутых [архитектур](#typical-architectures-for-a-multi-tier-deployment).

* **Виртуальные машины с одним экземпляром, развернутые на различных уровнях**

     ![Развертывание виртуальной машины с одним экземпляром на уровнях](media/move-vm-overview/single-zone.png)

* **Виртуальные машины на каждом уровне, развернутые в группах доступности**

     ![Межрегиональные группы доступности](media/move-vm-overview/crossregionaset.png)

* **Виртуальные машины на каждом уровне, развернутые в Зонах доступности**

     ![Развертывание виртуальной машины в Зонах доступности](media/move-vm-overview/azonecross.png)

## <a name="move-vms-to-increase-availability"></a>Перемещение виртуальных машин для повышения доступности

* **Виртуальные машины с одним экземпляром, развернутые на различных уровнях**

     ![Развертывание виртуальной машины с одним экземпляром на уровнях](media/move-vm-overview/single-zone.png)

* **Виртуальные машины на каждом уровне, развернутые в группах доступности**. Вы можете настроить размещение виртуальных машин в группе доступности в отдельных Зонах доступности при включении репликации для виртуальной машины с помощью Azure Site Recovery. После перемещения в соответствии с Соглашением об уровне обслуживания будет обеспечиваться доступность на уровне 99,9 %.

     ![Развертывание виртуальной машины в группы доступности и Зоны доступности](media/move-vm-overview/aset-azone.png)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> 
> * [Перенос виртуальных машин Azure в другой регион](azure-to-azure-tutorial-migrate.md)
> 
> * [Перенос виртуальных машин Azure в Зоны доступности](move-azure-vms-avset-azone.md)

