---
title: Мониторинг шаблонов обновлений на виртуальных машинах
description: Узнайте, как отслеживать шаблоны обновлений на виртуальных машинах, защищенных с помощью Azure Site Recovery
author: Sharmistha-Rai
manager: gaggupta
ms.topic: how-to
ms.date: 09/09/2020
ms.author: sharrai
ms.openlocfilehash: 51f45b5c0b8a2729f64eb376e06875719474cbfc
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "89664687"
---
# <a name="monitoring-churn-patterns-on-virtual-machines"></a>Мониторинг шаблонов обновлений на виртуальных машинах

В этой статье представлен обзор различных средств, которые можно использовать для мониторинга шаблонов обновлений на виртуальной машине. Используя соответствующие средства, можно легко определить, какое именно приложение вызывает высокий уровень обновления, а затем выполнить дальнейшие действия для этого приложения.

## <a name="for-azure-virtual-machines-windows-or-linux"></a>Для виртуальных машин Azure (Windows или Linux)

Если компьютер размещается в Azure и использует управляемый или неуправляемый диск для хранилища, можно легко отслеживать производительность, отслеживая метрики диска. Это позволяет точно отслеживать и делать правильный выбор диска в соответствии с шаблоном использования приложения. Его также можно использовать для создания оповещений, диагностики и автоматизации сборки. [Подробнее.](https://azure.microsoft.com/blog/per-disk-metrics-managed-disks/)

После защиты компьютеров с Azure Site Recovery можно отслеживать компьютеры с помощью журналов Azure Monitor и Log Analytics. [Подробнее.](https://docs.microsoft.com/azure/site-recovery/monitor-log-analytics)

Кроме того, можно использовать некоторые специальные средства операционной системы.

## <a name="for-windows-machines"></a>Для компьютеров Windows

Если у вас есть компьютер, локальный или не работающий под управлением операционной системы Windows, то доступно несколько дополнительных средств.

Помимо проверки использования диска в диспетчере задач, всегда можно обратиться к **Монитор ресурсов** и **монитору производительности**. Эти средства уже имеются на компьютерах под Windows.

### <a name="resource-monitor"></a>Монитор ресурсов

**Монитор ресурсов** отображает сведения об использовании аппаратных и программных ресурсов в режиме реального времени. Чтобы запустить монитор ресурсов на компьютере Windows, выполните следующие действия:

1. Нажмите клавиши Win + R и введите _ресмон_.
1. Когда ресмон, то есть монитор ресурсов, откроется окно перейдите на вкладку диск. Он предоставляет следующее представление:

    ![Вкладка "диск" монитор ресурсов](./media/monitoring-high-churn/resmon-disk-tab.png)

1. Эта вкладка должна постоянно отслеживаться в течение некоторого времени, чтобы получить четкое изображение. В приведенном выше примере мы видим, что _wmiprv.exe_ находится в высоком уровне.

Определив приложения, вызывающие высокий уровень обновления на компьютере, вы можете предпринять необходимые действия, чтобы решить, как они связаны с этими приложениями.

### <a name="performance-monitor"></a>Системный монитор

**Системный монитор** отслеживает различные действия на компьютере, например использование ЦП или памяти. Чтобы запустить системный монитор на компьютере Windows, выполните следующие действия:

1. Нажмите клавиши Win + R и введите _perfmon_.
1. После открытия системного монитора монитор производительности, откроется окно со следующим представлением:

    ![Монитор производительности шаг 1](./media/monitoring-high-churn/perfmon-step1.png)

1. Разверните папку **средства мониторинга** в правой части экрана и щелкните Системный монитор. Откроется приведенное ниже представление, содержащее сведения о текущей производительности в режиме реального времени.

    ![Монитор производительности шаг 2](./media/monitoring-high-churn/perfmon-step1.png)

1. В настоящее время этот график отслеживает только один монитор, то есть "% загруженности процессора", как указано в таблице прямо под диаграммой. Вы можете добавить дополнительные элементы для мониторинга, щелкнув **"+"** в верхней части средства.
1. Ниже показано, как выглядит монитор производительности после добавления в него дополнительных счетчиков.

    ![Монитор производительности шаг 3](./media/monitoring-high-churn/perfmon-step3.png)

Дополнительные сведения о мониторинге производительности см. [здесь](https://docs.microsoft.com/dynamics365/business-central/dev-itpro/administration/monitor-use-performance-monitor-collect-event-trace-data).

## <a name="for-linux-machines"></a>Для компьютеров Linux

Если у вас есть компьютер, локальный или не работающий под управлением операционной системы Linux, для мониторинга шаблонов обновления доступно еще несколько средств.

### <a name="iotop"></a>иотоп

Одним из наиболее используемых средств является _иотоп_. Это служебная программа для отображения активности диска в реальном времени. Он может перечислить процессы, выполняющие операции ввода-вывода, а также пропускную способность диска, которую они используют.

Откройте командную строку и выполните команду `iotop` .

### <a name="iostat"></a>IoStat

IoStat — это простое средство, которое будет выполнять сбор и отображение статистики системных входных и выходных данных устройства хранения. Это средство часто используется для отслеживания проблем с производительностью устройств хранения, включая устройства, локальные диски, удаленные диски.

Откройте командную строку и выполните команду `iostat` .

## <a name="next-steps"></a>Дальнейшие шаги

Узнайте, как отслеживать с помощью [Azure Monitor](monitor-log-analytics.md).
