---
title: Общие сведения о жизненном цикле схемы
description: Сведения о жизненном цикле схемы и подробные сведения о каждом этапе цикла.
author: DCtheGeek
ms.author: dacoulte
ms.date: 07/30/2019
ms.topic: conceptual
ms.service: blueprints
manager: carmonm
ms.openlocfilehash: 6112f6f2834f02cec970af886360844c5314150d
ms.sourcegitcommit: 13d5eb9657adf1c69cc8df12486470e66361224e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2019
ms.locfileid: "68678987"
---
# <a name="understand-the-lifecycle-of-an-azure-blueprint"></a>Общие сведения о жизненном цикле схемы Azure Blueprints

Как и многие ресурсы в Azure, схемы в Azure Blueprints обладают обычным жизненным циклом. Они создаются, развертываются и, наконец, удаляются, когда они больше не требуются или нерелевантны.
Схемы поддерживают стандартные операции управления жизненным циклом. На их основе предоставляются дополнительные уровни состояния, которые поддерживают традиционные конвейеры непрерывной интеграции и непрерывного развертывания для организаций, которые управляют основным элементом DevOps "Инфраструктура как код".

Чтобы полностью понять схему и ее этапы, мы рассмотрим стандартный жизненный цикл:

> [!div class="checklist"]
> - Создание и изменение схемы
> - публикация схемы;
> - создание новой версии схемы и ее изменение;
> - публикация новой версии схемы;
> - удаление определенной версии схемы;
> - удаление схемы.

## <a name="creating-and-editing-a-blueprint"></a>Создание и изменение схемы

При создании схемы добавьте в нее артефакты, сохраните ее в группу управления или подписку, а также укажите уникальное имя и уникальную версию схемы. Схема находится в режиме **черновика**, поэтому она еще не может быть назначена. Но в режиме **черновика** ее можно обновлять и изменять.

Схема в режиме **черновика**, которая никогда не публиковалась, будет отображаться на странице **Определения схем** со значком, отличным от значка для ранее **опубликованной** схемы. **Последняя версия** отображается как **черновик** для этих никогда не опубликованных схем.

Создайте схему с помощью [портала Azure](../create-blueprint-portal.md#create-a-blueprint) или [REST API](../create-blueprint-rest-api.md#create-a-blueprint) и измените ее.

## <a name="publishing-a-blueprint"></a>Публикация схемы

Внеся все необходимые изменения в схему в режиме **черновика**, ее можно **опубликовать** и сделать доступной для назначения. **Опубликованную** версию схемы нельзя изменить.
После **публикации** схема отображается со значком, отличным от значка схемы в режиме **черновика**, а в столбце **Последняя версия** показана предоставленная версия.

Опубликуйте схему с помощью [портала Azure](../create-blueprint-portal.md#publish-a-blueprint) или [REST API](../create-blueprint-rest-api.md#publish-a-blueprint).

## <a name="creating-and-editing-a-new-version-of-the-blueprint"></a>Создание новой версии схемы и ее изменение

**Опубликованную** версию схемы изменить нельзя. Но вы можете добавить в существующую схему новую версию схемы и изменить ее в соответствии со своими потребностями. Внесите изменения в существующую схему, используя режим редактирования. После сохранения изменений схема получает состояние **Неопубликованные изменения**. Теперь эти изменения составляют новую версию **черновика** схемы.

Измените схему с помощью [портала Azure](../create-blueprint-portal.md#edit-a-blueprint).

## <a name="publishing-a-new-version-of-the-blueprint"></a>Публикация новой версии схемы

Каждую измененную версию схемы необходимо **опубликовать**, прежде чем ее можно будет назначить. Если в схему внесены **неопубликованные изменения** и схема после этого не **публиковалась**, на странице изменения схемы будет доступна кнопка **Опубликовать схему**. Если такая кнопка отсутствует, значит схема уже была **опубликована** и в ней нет **неопубликованных изменений**.

> [!NOTE]
> У одной схемы может быть несколько **опубликованных** версий, которые можно назначить подпискам.

Чтобы опубликовать схему с **неопубликованными изменениями**, выполните те же действия, что и для публикации новой схемы.

## <a name="deleting-a-specific-version-of-the-blueprint"></a>Удаление определенной версии схемы

Каждая версия схемы является уникальным объектом и может быть **опубликована** отдельно. Аналогично, каждую версию схемы можно удалить. Удаление версии схемы никак не влияет на другие версии этой схемы.

> [!NOTE]
> Удалить схему, у которой есть активные назначения, невозможно. Сначала удалите назначения, а затем удалите необходимую версию.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. Выберите **определения** схемы на странице слева и используйте параметры фильтра, чтобы выбрать схему, для которой нужно удалить версию. Щелкните нужную схему, чтобы открыть страницу изменения.

1. Выберите вкладку **Опубликованные версии** и найдите версию, которую требуется удалить.

1. Щелкните правой кнопкой мыши версию, которую нужно удалить, и выберите **удалить эту версию**.

## <a name="deleting-the-blueprint"></a>Удаление схемы

Основную схему также можно удалить. Удаление основной схемы приводит к удалению всех версий схемы независимо от их состояния: **Черновик** или **Опубликовано**. Как и в случае удаления версии схемы, удаление основной схемы не приводит к удалению имеющихся назначений любых версий схемы.

> [!NOTE]
> Удалить схему, у которой есть активные назначения, невозможно. Сначала удалите назначения, а затем удалите необходимую версию.

Удалите схему с помощью [портала Azure](../create-blueprint-portal.md#delete-a-blueprint) или [REST API](../create-blueprint-rest-api.md#delete-a-blueprint).

## <a name="assignments"></a>Назначения

В жизненном цикле схемы существует несколько периодов, когда ее можно назначить подписке. Когда версия схемы находится в режиме **Опубликовано**, эту версию можно назначить подписке. Для жизненного цикла схем поддерживается использование и активное назначение определенных версий схемы на период разработки новых версий.

По мере назначения версий схем необходимо понимать, куда и с какими параметрами они были назначены. Параметры могут быть статическими и динамическими. Дополнительные сведения см. в статье о [статических и динамических параметрах](parameters.md).

### <a name="updating-assignments"></a>Обновление назначений

Когда схема назначена, это назначение можно обновить. Существуют разные причины для обновления существующего назначения, в том числе:

- добавление или удаление [блокировки ресурсов](resource-locking.md);
- изменение значений [динамических параметров](parameters.md#dynamic-parameters);
- обновление назначения до новой **опубликованной** версии схемы.

Узнайте, как [обновлять существующие назначения](../how-to/update-existing-assignments.md).

### <a name="unassigning-assignments"></a>Отмена назначения назначений

Если проект больше не нужен, его можно отменить из группы управления или подписки. Во время отназначения схемы происходит следующее:

- Удаление [блокировки ресурсов](resource-locking.md) схемы
- Удаление объекта назначения схемы
- Условие Если использовалось **назначенное системой управляемое удостоверение** , оно также удаляется.

> [!NOTE]
> Все ресурсы, развернутые с помощью назначения схемы, остаются на месте, но больше не защищаются с помощью чертежей Azure.

## <a name="next-steps"></a>Следующие шаги

- Узнайте, как использовать [статические и динамические параметры](parameters.md).
- Научитесь настраивать [последовательность схемы](sequencing-order.md).
- Узнайте, как применять [блокировку ресурсов схемы](resource-locking.md).
- Узнайте, как [обновлять существующие назначения](../how-to/update-existing-assignments.md).
- Устраняйте проблемы, возникающие во время назначения схемы, с помощью [общих инструкций по устранению неполадок](../troubleshoot/general.md).