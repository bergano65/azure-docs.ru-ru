---
title: Установка клиента Chef с портала Azure
description: Узнайте, как развернуть клиент Chef и настроить его с портала Azure
keywords: azure, chef, devops, client, install, portal
ms.service: virtual-machines-linux
author: tomarchermsft
manager: jeconnoc
ms.author: tarcher
ms.date: 05/15/2018
ms.topic: article
ms.openlocfilehash: 336ac6b81a56797ad1c1254322dbeec3e36914f3
ms.sourcegitcommit: a408b0e5551893e485fa78cd7aa91956197b5018
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/17/2019
ms.locfileid: "54358156"
---
# <a name="install-the-chef-client-from-the-azure-portal"></a>Установка клиента Chef с портала Azure
Вы можете добавить расширение клиента Chef непосредственно на компьютере под управлением Windows или Linux на портале Azure. В этой статье процесс добавления рассматривается с использованием новой виртуальной машины Linux.

## <a name="prerequisites"></a>Предварительные требования

- **Подписка Azure.** Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) , прежде чем начинать работу.

- **Chef**. Если у вас нет активной учетной записи Chef, зарегистрируйтесь [здесь](https://manage.chef.io/signup), чтобы получить бесплатную пробную версию размещенного клиента Chef. Чтобы следовать инструкциям этой статьи, вам потребуются следующие значения из учетной записи Chef:
  - ключ проверки организации;
  - RB-файл;
  - список запуска.

## <a name="install-the-chef-extension-on-a-new-linux-virtual-machine"></a>Установка расширения Chef на новую виртуальную машину Linux
В этом разделе сначала используется портал Azure для создания виртуальной машины Linux. Во время процесса вы также увидите, как установить расширение Chef на новой виртуальной машине.

1. Перейдите на [портал Azure](http://portal.azure.com).

1. В меню слева выберите вариант **Виртуальные машины**. Если вариант **Виртуальные машины** отсутствует, выберите **Все службы**, а затем — **Виртуальные машины**.

1. На вкладке **Виртуальные машины** выберите **Добавить**.

    ![Добавление новой виртуальной машины на портале Azure](./media/chef-extension-portal/add-vm.png)

1. На вкладке **Вычисления** выберите требуемую операционную систему. Для этой демонстрации выбран **Ubuntu Server**.

1. На вкладке **Ubuntu Server** выберите **Ubuntu Server 16.04 LTS**.

    ![Указание требуемой версии при создании виртуальной машины Ubuntu](./media/chef-extension-portal/ubuntu-server-version.png)

1. На вкладке **Ubuntu Server 16.04 LTS** выберите **Создать**.

    ![Ubuntu предоставляет дополнительную информацию о своих продуктах](./media/chef-extension-portal/create-vm.png)

1. На вкладке **Создание виртуальной машины** выберите **Основные сведения**.

1. На вкладке **Основные сведения** укажите приведенные ниже значения, после чего щелкните **ОК**.

    - **Имя.** Введите имя новой виртуальной машины.
    - **Тип диска виртуальной машины**. Укажите тип диска хранения: **SSD** или **HDD**. Дополнительные сведения о типах дисков виртуальных машин см. в статье [Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин Azure](/azure/virtual-machines/windows/premium-storage).
    - **Имя пользователя**. Введите имя пользователя, которому будут предоставлены права администратора на виртуальной машине.
    - **Тип проверки подлинности**. Выберите **пароль**. Также можно выбрать **Открытый ключ SSH** и указать его значение. В целях этой демонстрации (и на снимках экрана) выбран **Пароль**.
    - **Пароль** и **Подтвердите пароль**. Введите пароль для пользователя.
    - **Log in with Azure Active Directory** (Войти с использованием Azure Active Directory). Выберите **Отключено**.
    - **Подписка**. При наличии нескольких подписок Azure выберите ту, которую нужно использовать.
    - **Группа ресурсов**. Введите имя группы ресурсов.
    - **Расположение**. Выберите **Восточная часть США**.

    ![Вкладка "Основные сведения" для создания виртуальной машины](./media/chef-extension-portal/add-vm-basics.png)

1. На вкладке **Выбор размера** выберите размер виртуальной машины и щелкните **Выбрать**.

1. На вкладке **Параметры** большинство значений будет заполнено на основе значений, выбранных на предыдущих вкладках. Выберите **Расширения**.

    ![Расширения добавляются на виртуальные машины с помощью вкладки "Параметры"](./media/chef-extension-portal/add-vm-select-extensions.png)

1. На вкладке **Расширения** выберите **Добавить расширение**.

    ![Выберите "Добавить расширение", чтобы добавить расширение на виртуальную машину](./media/chef-extension-portal/add-vm-add-extension.png)

1. На вкладке **Новый ресурс** выберите **Linux Chef Extension (1.2.3)** (Расширение Linux Chef (1.2.3)).

    ![В Chef есть расширения для виртуальных машин Linux и Windows](./media/chef-extension-portal/select-linux-chef-extension.png)

1. На вкладке **Linux Chef Extension** (Расширение Linux Chef) выберите **Создать**.

1. На вкладке **Установка расширения** укажите приведенные ниже значения, после чего щелкните **ОК**.

    - **URL-адрес сервера Chef**. Введите URL-адрес сервера Chef, который включает имя организации, например *https://api.chef.io/organization/mycompany*.
    - **Chef Node Name** (Имя узла Chef). Введите имя узла Chef. Это может быть любое значение.
    - **Список запуска**. Введите список запуска Chef, добавленный на этот компьютер. Это поле можно оставить пустым.
    - **Validation Client Name** (Имя клиента для проверки). Введите имя клиента Chef для проверки. Пример: *tarcher-validator*.
    - **Validation Key** (Ключ проверки). Выберите файл, в котором содержится ключ проверки, используемый при начальной загрузки компьютеров.
    - **Client Configuration File** (Файл конфигурации клиента). Выберите файл конфигурации для клиента Chef. Это поле можно оставить пустым.
    - **Chef Client version** (Версия клиента Chef). Введите версию клиента Chef, которую необходимо установить. Это поле можно оставить пустым. Если значение пустое, устанавливается последняя версия.
    - **SSL Verification Mode** (Режим проверки SSL). Выберите **Нет** или **Кэширующий узел**. Для этого примера выбрано значение *Нет*.
    - **Chef Environment** (Среда Chef). Введите среду Chef, членом которой должен быть этот узел. Это поле можно оставить пустым.
    - **Encrypted Databag Secret** (Зашифрованный секрет Databag). Выберите файл, который содержит секрет для зашифрованного Databag, к которому эта машина должна иметь доступ. Это поле можно оставить пустым.
    - **Chef Server SSL Certificate** (SSL-сертификат сервера Chef). Выберите SSL-сертификат, присвоенный серверу Chef. Это поле можно оставить пустым.

    ![Установка сервера Chef на виртуальной машине Linux](./media/chef-extension-portal/install-extension.png)

1. Вернувшись на вкладку **Расширения**, нажмите кнопку **ОК**.

1. Вернувшись на вкладку **Параметры**, нажмите кнопку **ОК**.

1. Вернувшись на вкладку **Создание** (которая представляет собой сводку выбранных параметров и введенных значений), проверьте информацию, в том числе **Условия использования**, и выберите **Создать**.

После завершения процесса создания и развертывания виртуальной машины с расширением Chef появится уведомление об успехе или неудаче операции. Кроме того, страница ресурсов для созданной виртуальной машины автоматически откроется на портале Azure.

![Установка сервера Chef на виртуальной машине Linux](./media/chef-extension-portal/resource-created.png)

## <a name="next-steps"></a>Дополнительная информация

- [Автоматизация развертывания виртуальной машины Azure с помощью Chef](/azure/virtual-machines/windows/chef-automation)
