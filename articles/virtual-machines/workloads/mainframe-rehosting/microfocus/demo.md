---
title: Настройка Micro Focus CICS Банкдемо для Micro Focus Enterprise Developer 4,0 на виртуальных машинах Azure
description: Запустите приложение Micro Focus Банкдемо на виртуальных машинах Azure, чтобы узнать, как использовать Micro Focus Enterprise Server и корпоративный разработчик.
author: sread
ms.author: sread
ms.date: 03/30/2020
ms.topic: article
ms.service: multiple
ms.openlocfilehash: 7fb72b9a7d0d655f99d1e5cf194f7c6f26976a37
ms.sourcegitcommit: a43a59e44c14d349d597c3d2fd2bc779989c71d7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/25/2020
ms.locfileid: "95976199"
---
# <a name="set-up-micro-focus-cics-bankdemo-for-micro-focus-enterprise-developer-40-on-azure"></a>Настройка Micro Focus CICS Банкдемо для Micro Focus Enterprise Developer 4,0 в Azure

При настройке Micro Focus Enterprise Server 4,0 и Enterprise Developer 4,0 в Azure можно тестировать развертывания рабочих нагрузок IBM z/OS. В этой статье показано, как настроить CICS Банкдемо — пример приложения, поставляемого с корпоративным разработчиком.

CICs означает систему управления сведениями о клиентах, платформу транзакций, используемую многими приложениями Интернет-мэйнфреймов. Приложение Банкдемо отлично подходит для изучения работы корпоративных серверов и корпоративных разработчиков, а также для управления и развертывания реальных приложений с помощью зеленых экранных терминалов.

> [!NOTE]
> Ожидается в ближайшее время: инструкции по настройке [Micro Focus Enterprise Server 5,0](https://techcommunity.microsoft.com/t5/azurecat/micro-focus-enterprise-server-5-0-quick-start-template-on-azure/ba-p/1160110) на виртуальных машинах Azure.

## <a name="prerequisites"></a>Предварительные требования

- Виртуальная машина с [корпоративным разработчиком](set-up-micro-focus-azure.md). Помните, что корпоративный разработчик имеет полный экземпляр Enterprise Server для целей разработки и тестирования. Этот экземпляр является экземпляром Enterprise Server, используемым для демонстрации.

- [SQL Server 2017 Express Edition](https://www.microsoft.com/sql-server/sql-server-editions-express). Скачайте и установите его на виртуальную машину разработчика Enterprise. Enterprise Server требуется база данных для управления CICS регионами, а приложение Банкдемо также использует базу данных SQL Server с именем БАНКДЕМО. В этой демонстрации предполагается, что вы используете SQL Server Express для обеих баз данных. При установке выберите базовую установку.

- [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017) (SSMS). SSMS используется для управления базами данных и выполнения скрипта T-SQL. Скачайте и установите его на виртуальную машину разработчика Enterprise.

- [Visual studio 2019](https://azure.microsoft.com/downloads/) с последним пакетом обновления или [Visual Studio Community](https://visualstudio.microsoft.com/vs/community/), который можно скачать бесплатно.

- Румба Desktop или другой эмулятор 3270.

## <a name="configure-the-windows-environment"></a>Настройка среды Windows

После установки Enterprise Developer 4,0 на виртуальной машине необходимо настроить экземпляр Enterprise Server, поставляемый вместе с ним. Для этого необходимо установить несколько дополнительных компонентов Windows, как показано ниже.

1. Используйте RDP для входа на созданную виртуальную машину Enterprise Server 4,0.

2. Щелкните значок **поиска** рядом с кнопкой **Пуск** и введите **компоненты Windows**. Откроется мастер диспетчер сервера добавить роли и компоненты.

3. Выберите **роль веб-сервера (IIS)** и проверьте следующие параметры.

    - Средства управления веб-сайтом
    - Совместимость управления IIS 6 (выберите все доступные компоненты)
    - Консоль управления (IIS)
    - Сценарии и средства управления IIS
    - Служба управления IIS

4. Выберите **службы Интернета** и проверьте следующие параметры.

     Функции разработки приложений:
    - Расширяемость платформы .NET
    - ASP.NET
    - Общие функции HTTP: Добавление всех доступных компонентов
    - Работоспособность и диагностика: Добавление всех доступных компонентов
    - Безопасность:
        - Обычная проверка подлинности
        - Проверка подлинности Windows

5. Выберите **Служба активации Windows** и все ее дочерние элементы.

6. Для **функций** проверьте **Microsoft .NET Framework 3.5.1** и проверьте следующие параметры.

    - Windows Communication Foundation Активация по HTTP
    - Windows Communication Foundationная Активация без HTTP

7. Для **компонентов** проверьте **Microsoft .NET Framework 4,6** и проверьте следующие параметры.

   - Активация именованного канала
   - Активация TCP
   - Совместное использование TCP-порта

     ![Мастер добавления ролей и компонентов: службы ролей](media/01-demo-roles.png)

8. Выбрав все параметры, нажмите кнопку **Далее** , чтобы установить.

9. После компонентов Windows последовательно выберите пункты **Панель управления \> система и безопасность \> Администрирование** и щелкните **службы**. Прокрутите вниз и убедитесь, что следующие службы работают и для них установлено значение **автоматически**:

    - **NetTcpPortSharing**
    - **Адаптер прослушивателя Net.Pipe**
    - **Адаптер прослушивателя NET. TCP**

10. Чтобы настроить службы IIS и поддерживали службу поддержки, в меню выберите пункт " **корпоративный Командная строка разработчика Enterprise" (64 бит)** и запустите от имени **администратора**.

11. Введите **вассетуп – i** и нажмите клавишу **Ввод**.

12. После выполнения скрипта можно закрыть окно.

## <a name="configure-the-local-system-account-for-sql-server"></a>Настройка локальной системной учетной записи для SQL Server

Некоторые процессы корпоративного сервера должны иметь возможность входить SQL Server и создавать базы данных и другие объекты. Эти процессы используют локальную системную учетную запись, поэтому необходимо предоставить этой учетной записи полномочия администратора.

1. Запустите **SSMS** и нажмите кнопку **Подключиться** , чтобы подключиться к локальному серверу SQLExpress с использованием проверки подлинности Windows. Он должен быть доступен в списке **имя сервера** .

2. В левой части разверните папку **Безопасность** и выберите **имена входа**.

3. Выберите **\\ Система NT Authority** и щелкните **Свойства**.

4. Выберите **роли сервера** и проверьте **sysadmin**.

     ![Окно обозревателя объектов SSMS: свойства имени входа](media/02-demo-explorer.png)

## <a name="create-the-bankdemo-database-and-all-its-objects"></a>Создание базы данных Банкдемо и всех ее объектов

1. Откройте **проводник Windows** и перейдите по **адресу C: \\ Пользователи \\ общедоступные \\ документы \\ Micro Focus \\ Enterprise примеры для разработчиков \\ \\ мэйнфрейм \\ CICS \\ DotNet \\ банкдемо \\ SQL**.

2. Скопируйте содержимое файла **банкдемокреатеалл. SQL** в буфер обмена.

3. Откройте **среду SSMS**. Справа щелкните **сервер** и выберите **создать запрос**.

4. Вставьте содержимое буфера обмена в поле **новый запрос** .

5. Выполните инструкцию SQL, нажав кнопку **выполнить** на вкладке **команда** над запросом.

Запрос должен выполняться без ошибок. По завершении вы получите образец базы данных для приложения Банкдемо.

![Выходные данные SQLQuery1. SQL](media/03-demo-query.png)

## <a name="verify-that-the-database-tables-and-objects-have-been-created"></a>Проверка создания таблиц и объектов базы данных

1. Щелкните правой кнопкой мыши базу данных **банкдемо** и выберите команду **Обновить**.

2. Разверните **базу данных** и выберите **таблицы**. Вы должны увидеть нечто вроде следующего.

     ![Таблица БАНКДЕМО, развернутая в обозревателе объектов](media/04-demo-explorer.png)

## <a name="build-the-application-in-enterprise-developer"></a>Создание приложения на корпоративном разработчике

1. Откройте Visual Studio и выполните вход.

2. В меню **файл** выберите пункт **Открыть проект/решение**, перейдите к разделу **C: \\ Пользователи \\ общедоступные \\ документы \\ Micro Focus \\ Enterprise \\ Samples \\ \\ CICS \\ DotNet \\ банкдемо** и выберите файл **SLN** .

3. Потратьте некоторое время на изучение объектов. Программы COBOL отображаются в обозреватель решений с расширением КБЛ вместе с Копибукс (КПИ) и ЖКЛ.

4. Щелкните правой кнопкой мыши проект **BankDemo2** и выберите **Назначить запускаемым проектом**.

    > [!NOTE]
    > Проект Банкдемо использует ХКОСС (параметр совместимости узла для SQL Server), который не используется для этой демонстрации.

5. В **Обозреватель решений** щелкните правой кнопкой мыши проект **BankDemo2** и выберите пункт **Сборка**.

    > [!NOTE]
    > Сборка на уровне решения приводит к ошибкам, так как ХКОСС не настроен.

6. При построении проекта изучите окно **вывода** . Все должно выглядеть примерно так, как на изображении ниже.

     ![Окно вывода с успешной сборкой](media/05-demo-output.png)

## <a name="deploy-the-bankdemo-application-into-the-region-database"></a>Развертывание приложения Банкдемо в базе данных регионов

1. Откройте командную строку разработчика Enterprise (64 бит) от имени администратора.

2. Перейдите к папке **% Public% \\ Documents \\ Micro Focus \\ Enterprise \\ Samples Developer \\ \\ CICS \\ DotNet \\ банкдемо**.

3. В командной строке выполните **банкдемодбдеплой** и включите параметр для базы данных, в которой выполняется развертывание, например:

    ```
    bankdemodbdeploy (local)/sqlexpress
    ```

> [!NOTE]
> Убедитесь, что используется косая черта (/), а не обратная косая черта ( \\ ). Этот сценарий выполняется в течение определенного время.

![Администрирование: окно "Корпоративный Командная строка разработчика"](media/06-demo-cmd.png)

## <a name="create-the-bankdemo-region-in-enterprise-administrator-for-net"></a>Создание региона Банкдемо в корпоративном администраторе для .NET

1. Откройте пользовательский интерфейс **администрирования Enterprise Server для .NET** .

2. Чтобы запустить оснастку консоли управления (MMC), в меню " **Пуск** " Windows выберите **Micro Focus Enterprise Developer \> Configuration \> Корпоративный сервер для администратора .NET**. (Для Windows Server выберите **Micro Focus Enterprise Developer \> Enterprise Server для администратора .NET**).

3. Разверните контейнер **регионы** на левой панели, а затем щелкните правой кнопкой мыши **CICS**.

4. Выберите **определить регион** , чтобы создать новый регион CICS с именем **банкдемо**, размещенный в базе данных (local).

5. Укажите экземпляр сервера базы данных, нажмите кнопку **Далее**, а затем введите имя региона **банкдемо**.

     ![Диалоговое окно «Определение региона»](media/07-demo-cics.png)

6. Чтобы выбрать файл определения региона для базы данных в разных регионах, перейдите в **область \_ банкдемо \_db.config** на **диске C: \\ Пользователи \\ общедоступные \\ документы \\ Micro Focus \\ Enterprise \\ Samples \\ мэйнфрейм \\ CICS \\ DotNet \\ банкдемо**.

     ![Определение региона — имя региона: БАНКДЕМО](media/08-demo-cics.png)

7. Нажмите кнопку **Готово**.

## <a name="create-xa-resource-definitions"></a>Создание определений ресурсов XA

1. В левой области пользовательского интерфейса **администрирования Enterprise Server для .NET** разверните узел **система**, а затем **определения ресурсов XA**. Этот параметр определяет, как регион взаимодействует с корпоративным сервером и с базами данных приложений.

2. Щелкните правой кнопкой мыши **определения ресурсов XA** и выберите пункт **Добавить экземпляр сервера**.

3. В раскрывающемся списке выберите **экземпляр службы базы данных**. Это будет локальный компьютер SQLEXPRESS.

4. Выберите экземпляр из контейнера **определения ресурсов XA (имя_компьютера \\ SQLExpress)** и нажмите кнопку **добавить**.

5. Выберите **Определение ресурса XA базы данных** , а затем введите **Банкдемо** в поле **имя** и **регион**.

     ![Новый экран определения ресурса XA базы данных](media/09-demo-xa.png)

6. Нажмите кнопку с многоточием (**...**), чтобы открыть мастер создания строки подключения. В качестве **имени сервера** введите **(local) \\ SQLExpress**. Для **входа в систему** выберите **Проверка подлинности Windows**. В качестве имени базы данных введите **банкдемо** .

     ![Изменить экран строки подключения](media/10-demo-string.png)

7. Проверьте подключение.

## <a name="start-the-bankdemo-region"></a>Запуск региона БАНКДЕМО

> [!NOTE]
> Первый шаг важен: необходимо задать регион для использования только что созданного определения ресурса XA.

1. Перейдите в **область БАНДЕМО CICS** в **контейнере регионы**, а затем в области **действия** выберите пункт **изменить файл запуска региона** . Прокрутите вниз до свойства SQL и введите **банкдемо** в качестве **имени ресурса XA** или используйте многоточие, чтобы выбрать его.

2. Щелкните значок **сохранить** , чтобы сохранить изменения.

3. Щелкните правой кнопкой мыши **БАНКДЕМО CICS Region** в области **консоли** и выберите **Пуск/отключить регион**.

4. В нижней части поля **Начало и конец области** , которое отображается в средней области, нажмите кнопку **запустить**. Через несколько секунд будет запущена область.

     ![Поле запуска/окончания SQL](media/11-demo-sql.png)

     ![Экран CICS Region БАНКДЕМО-Started](media/12-demo-cics.png)

## <a name="create-a-listener"></a>Создание прослушивателя

Создайте прослушиватель для сеансов TN3270, которые обращаются к приложению Банкдемо.

1. В левой области разверните узел **редакторы конфигурации** и выберите **прослушиватель**.

2. Щелкните значок **Открыть файл** и выберите файл **seelistener.exe.config** . Этот файл будет изменен и загружается при каждом запуске Enterprise Server.

3. Обратите внимание на два ранее определенных региона (ЕСДЕМО и ЖКЛДЕМО).

4. Чтобы создать новый регион для БАНКДЕМО, щелкните правой кнопкой мыши **области** и выберите **Добавить регион**.

5. Выберите **регион банкдемо**.

6. Добавьте канал TN3270, щелкнув правой кнопкой мыши **регион банкдемо** и выбрав **Добавить канал**.

7. В качестве **имени** введите **TN3270**. В качестве **номера порта** введите **9024**. Приложение ЕСДЕМО использует порт 9230, поэтому необходимо использовать другой порт.

8. Чтобы сохранить файл, щелкните значок **сохранить** или выберите **файл** \> **сохранить**.

9. Чтобы запустить прослушиватель, щелкните значок **запустить прослушиватель** или выберите **Параметры** \> **запустить прослушиватель**.

     ![Окна редактора конфигурации прослушивателя](media/13-demo-listener.png)


## <a name="configure-rumba-to-access-the-bankdemo-application"></a>Настройка Румба для доступа к приложению Банкдемо

Наконец, необходимо настроить сеанс 3270 с помощью румба, эмулятора 3270. Этот шаг позволяет получить доступ к приложению Банкдемо с помощью созданного прослушивателя.

1. В меню **Пуск Windows запустите** Румба Desktop.

2. В пункте меню **подключения** выберите **TN3270**.

3. Щелкните **Вставить** и введите **127.0.0.1** для IP-адреса и **9024** для определяемого пользователем порта.

4. В нижней части диалогового окна нажмите кнопку **подключить**. Появится черный экран CICS.

5. Введите **Bank** , чтобы отобразить начальный экран 3270 для приложения банкдемо.

6. В поле идентификатор пользователя введите **B0001** , а для пароля введите что угодно. Откроется первый экран BANK20.

![Экран приветствия на дисплее в виде мэйнфреймов ](media/14-demo.png)
 ![ дисплей-Румба-подсистема](media/15-demo.png)

Поздравляем! Теперь вы запускаете приложение CICS в Azure с помощью Micro Focus Enterprise Server.

## <a name="next-steps"></a>Следующие шаги

- [Запуск Enterprise Server в контейнерах DOCKER в Azure](run-enterprise-server-container.md)
- [Перенос мэйнфреймов — портал](/archive/blogs/azurecat/mainframe-migration-to-azure-portal)
- [Виртуальные машины](../../../linux/overview.md)
- [Устранение неполадок](../../../troubleshooting/index.yml)
- [Декрытие мэйнфрейма с миграцией Azure](https://azure.microsoft.com/resources/demystifying-mainframe-to-azure-migration/en-us/)
