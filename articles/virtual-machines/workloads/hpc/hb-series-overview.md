---
title: Обзор виртуальных машин серии ХБ. виртуальные машины Azure | Документация Майкрософт
description: Дополнительные сведения о поддержке предварительной версии для виртуальной машины серии ХБ в Azure.
services: virtual-machines
documentationcenter: ''
author: vermagit
manager: gwallace
editor: ''
tags: azure-resource-manager
ms.service: virtual-machines
ms.workload: infrastructure-services
ms.topic: article
ms.date: 08/19/2020
ms.author: amverma
ms.reviewer: cynthn
ms.openlocfilehash: 7c66af5184c4a943fd4b3185a87623112fe0d954
ms.sourcegitcommit: 56cbd6d97cb52e61ceb6d3894abe1977713354d9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "88691247"
---
# <a name="hb-series-virtual-machines-overview"></a>Обзор виртуальных машин серии ХБ

Максимизация производительности приложений с высокой производительностью (HPC) в AMD ЕПИК требует продуманного подхода к локализации памяти и размещению процессов. Ниже мы рассмотрим архитектуру AMD ЕПИК и нашу реализацию ИТ в Azure для приложений HPC. Мы будем использовать термин "Пнума" для ссылки на физический домен NUMA и "Внума" для ссылки на виртуализированный домен NUMA.

Физически сервер [серии ХБ](../../hb-series.md) — это 2 * 32-ядерные цп ЕПИК 7551, что составляет всего 64 физических ядер. Эти ядра 64 делятся на 16 доменов Пнума (по 8 на сокет), каждый из которых состоит из четырех ядер и называется "сложным ЦП" (или "КККС"). Каждый КККС имеет собственный кэш L3, что позволяет операционной системе видеть границу Пнума/Внума. Пара смежных Ккксс предоставляет доступ к двум каналам физической памяти DRAM (32 ГБ памяти DRAM на серверах серии ХБ).

Чтобы обеспечить работу низкоуровневой оболочки Azure, не мешая виртуальной машине, мы резервируем физический Пнума-домен 0 (первый КККС). Затем мы присваиваем Пнума домены 1-15 (оставшиеся единицы КККС) для виртуальной машины. Виртуальная машина увидит следующее:

`(15 vNUMA domains) * (4 cores/vNUMA) = 60` количество ядер на виртуальную машину

Виртуальная машина сама по себе не знает, что Пнума 0 не предоставлено ей. Виртуальная машина понимает Пнума 1-15 как Внума 0-14, с 7 Внума на Всоккет 0 и 8 Внума в Всоккет 1. Хотя это и является асимметричным, операционная система должна загружаться и работать нормально. Далее в этом пошаговом окне мы рассказано, как лучше выполнять приложения MPI на этом асимметричном макете NUMA.

Закрепление процессов будет работать на виртуальных машинах серии хб, так как для гостевой виртуальной машины мы предоставляем базовую Кристалл "как есть". Мы настоятельно рекомендуем закреплять процесс для обеспечения оптимальной производительности и согласованности.

На следующей схеме показана разделение ядер, зарезервированное для низкоуровневой оболочки Azure и виртуальной машины серии ХБ.

![Разделение ядер, зарезервированное для Azure гипервизора и виртуальной машины серии ХБ](./media/hb-series-overview/segregation-cores.png)

## <a name="hardware-specifications"></a>Характеристики оборудования

| Спецификации оборудования                | Виртуальная машина серии ХБ                     |
|----------------------------------|----------------------------------|
| Ядра                            | 60 (SMT отключено)                |
| ЦП                              | AMD ЕПИК 7551                    |
| Частота ЦП (не AVX)          | ~ 2,55 ГГц (один + все ядра)   |
| Память                           | 4 ГБ/ядро (всего 240 ГБ)         |
| Локальный диск                       | SSD 700 ГБ                       |
| Infiniband;                       | 100 ГБ ЕДР Mellanox ConnectX-5 |
| Сеть                          | 50 ГБ Ethernet (40 Гб использования) Azure Смартник Gen |

## <a name="software-specifications"></a>Спецификации программного обеспечения

| Спецификации программного обеспечения           |Виртуальная машина серии ХБ           |
|-----------------------------|-----------------------|
| Максимальный размер задания MPI            | 18000 ядер (300 ВМ в одном масштабируемом наборе виртуальных машин с singlePlacementGroup = true)  |
| Поддержка MPI                 | HPC-X, Intel MPI, Опенмпи, MVAPICH2, МПИЧ, платформа MPI  |
| Дополнительные платформы       | Унифицированная связь X, либфабрик, ПГАС |
| Поддержка хранилища Azure       | Диски уровня "Стандартный" и "Премиум" (максимум 4 диска) |
| Поддержка ОС для SRIOV RDMA   | CentOS/RHEL 7.6 +, SLES 12 SP4 +, WinServer 2016 +  |
| Поддержка Orchestrator        | Циклеклауд, пакетная  |

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше о [архитектуре AMD ЕПИК](https://bit.ly/2Epv3kC) и [архитектурах с несколькими микросхемами](https://bit.ly/2GpQIMb). Дополнительные сведения см. в описании [рекомендаций по настройке HPC для процессоров AMD ЕПИК](https://bit.ly/2T3AWZ9).
- Ознакомьтесь с последними объявлениями и некоторыми примерами HPC, а также результатами в [блогах технического сообщества службы вычислений](https://techcommunity.microsoft.com/t5/azure-compute/bg-p/AzureCompute).
- Сведения о более высоком уровне архитектурного представления выполнения рабочих нагрузок HPC см. в статье [Высокопроизводительные вычисления (HPC) в Azure](/azure/architecture/topics/high-performance-computing/).
