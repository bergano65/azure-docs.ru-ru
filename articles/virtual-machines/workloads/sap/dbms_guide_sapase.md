---
title: Развертывание СУБД на виртуальных машинах Azure в SAP ASE для рабочей нагрузки SAP | Документы Майкрософт
description: Развертывание СУБД на Виртуальных машинах Azure в SAP ASE для рабочей нагрузки SAP
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: ''
author: msjuergent
manager: patfilot
editor: ''
tags: azure-resource-manager
keywords: ''
ms.service: virtual-machines-linux
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 04/13/2020
ms.author: juergent
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 82dbb73da06097407d91f23d4d372aaa4cc76e99
ms.sourcegitcommit: 54d8052c09e847a6565ec978f352769e8955aead
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2020
ms.locfileid: "88510901"
---
# <a name="sap-ase-azure-virtual-machines-dbms-deployment-for-sap-workload"></a>Развертывание СУБД на Виртуальных машинах Azure в SAP ASE для рабочей нагрузки SAP

В этом документе рассматривается несколько аспектов, которые следует учитывать при развертывании SAP ASE в Azure IaaS. Перед чтением этого документа следует ознакомиться с документом [Вопросы развертывания СУБД для рабочей нагрузки SAP на виртуальных машинах Azure](dbms_guide_general.md), а также с другими руководствами в [документации по рабочей нагрузке SAP в Azure](./get-started.md). В этом документе рассматривается SAP ASE, работающий в операционных системах Linux и Windows. Минимальный поддерживаемый выпуск в Azure — SAP ASE 16.0.02 (выпуск 16 с пакетом поддержки 2). Рекомендуется развернуть последнюю версию SAP и последний уровень обновления.  Рекомендуется использовать как минимум SAP ASE 16.0.03.07 (выпуск 16 с пакетом обновления 3 (SP3)).  Последнюю версию SAP можно найти в [целевом расписании выпуска ASE 16,0 и сведениях о списке CR](https://wiki.scn.sap.com/wiki/display/SYBASE/Targeted+ASE+16.0+Release+Schedule+and+CR+list+Information).

Дополнительные сведения о поддержке выпуска с приложениями SAP и расположением установочного носителя см. в таблице доступности продуктов SAP в следующих расположениях:

- [Примечание о поддержке SAP #2134316](https://launchpad.support.sap.com/#/notes/2134316)
- [Примечание о поддержке SAP #1941500](https://launchpad.support.sap.com/#/notes/1941500)
- [Примечание о поддержке SAP #1590719](https://launchpad.support.sap.com/#/notes/1590719)
- [Примечание о поддержке SAP #1973241](https://launchpad.support.sap.com/#/notes/1973241)

Замечание. в рамках всей документации, находящегося в мире SAP и за ее пределами, имя продукта указывается как Sybase ASE или SAP ASE или в некоторых случаях. Для поддержания единообразия мы используем имя **SAP ASE** в этой документации.

## <a name="operating-system-support"></a>Поддержка операционных систем
Матрица доступности продуктов SAP содержит поддерживаемые комбинации операционных систем и ядра SAP для каждого приложения SAP.  Дистрибутивы Linux для SUSE 12. x, SUSE 15. x, Red Hat 7. x полностью поддерживаются.  Oracle Linux в качестве операционной системы для SAP ASE не поддерживается.  Рекомендуется использовать самые последние выпуски Linux. Клиенты Windows должны использовать выпуски Windows Server 2016 или Windows Server 2019.  Более старые выпуски Windows, такие как Windows 2012, технически поддерживаются, но рекомендуется всегда использовать последнюю версию Windows.


## <a name="specifics-to-sap-ase-on-windows"></a>Особенности SAP ASE в Windows
Начиная с Microsoft Azure можно переносить существующие приложения SAP ASE на виртуальные машины Azure. SAP ASE на виртуальной машине Azure позволяет снизить общую стоимость владения для развертывания и обслуживания приложений уровня организации, а также управления ими благодаря переносу этих приложений в Microsoft Azure. С помощью SAP ASE на виртуальной машине Azure администраторы и разработчики могут продолжать использовать те же средства разработки и администрирования, которые доступны в локальной среде.

Microsoft Azure предоставляет различные типы виртуальных машин, которые позволяют запускать как небольшие системы и ландшафты SAP, так и крупные системы и ландшафты SAP с несколькими тысячами пользователей. В [заметке о поддержке SAP Вы также за#1928533 помните](https://launchpad.support.sap.com/#/notes/1928533)о том, как изменить размер SAPS в SAP для различных номеров SKU сертифицированных ВИРТУАЛЬНЫХ машин SAP.

Документацию по установке SAP ASE в Windows можно найти в [руководстве по установке SAP ASE для Windows](https://help.sap.com/viewer/36031975851a4f82b1022a9df877280b/16.0.3.7/en-US/a660d3f1bc2b101487cbdbf10069c3ac.html) .

Блокировка страниц в памяти — это параметр, позволяющий предотвратить открепление буфера базы данных SAP ASE.  Этот параметр полезен для больших занятых систем с большим объемом памяти. Для получения дополнительных сведений обратитесь к BC-DB-СИБ. 


## <a name="linux-operating-system-specific-settings"></a>Параметры операционной системы Linux
На виртуальных машинах Linux запуск `saptune` с профилем "огромные страницы SAP-ASE Linux" должен быть включен по умолчанию, и его можно проверить с помощью команды  

`cat /proc/meminfo` 

Размер страницы обычно составляет 2048 КБ. Дополнительные сведения см. в статье [огромные страницы в Linux](https://help.sap.com/viewer/ecbccd52e7024feaa12f4e780b43bc3b/16.0.3.7/en-US/a703d580bc2b10149695f7d838203fad.html) . 


## <a name="recommendations-on-vm-and-disk-structure-for-sap-ase-deployments"></a>Рекомендации по структуре виртуальных машин и дисков для развертываний SAP ASE

SAP ASE для приложений SAP NetWeaver поддерживается на всех типах виртуальных машин, перечисленных в [заметке о поддержке sap #1928533](https://launchpad.support.sap.com/#/notes/1928533) типовые виртуальные машины, используемые для серверов баз данных среднего размера SAP ASE, включают Esv3.  Большие базы данных с несколькими терабайтами могут использовать типы виртуальных машин серии M. Производительность записи на диск журнала транзакций SAP ASE можно улучшить, включив Ускоритель записи серии M. Ускоритель записи следует тщательно протестировать с помощью SAP ASE, так как SAP ASE выполняет записи журнала.  Просмотрите [Примечание о поддержке SAP #2816580](../../how-to-enable-write-accelerator.md) и попробуйте запустить тест производительности.  
Ускоритель записи предназначен только для диска журнала транзакций. Кэш на уровне диска должен иметь значение NONE. Не стоит удивление, если Azure Ускоритель записи не отображает аналогичные улучшения, как в случае с другими СУБД. В зависимости от того, как SAP ASE записывает данные в журнал транзакций, может быть, что Ускоритель записи Azure не поддерживает ускорение.
Для устройств данных и устройств с журналом рекомендуется использовать отдельные диски.  Системные базы данных сибсекурити и `saptools` не нуждаются в выделенных дисках и могут размещаться на дисках, содержащих данные базы данных SAP и устройства журналов. 

![Конфигурация хранилища для SAP ASE](./media/dbms-guide-sap-ase/sap-ase-disk-structure.png)

### <a name="file-systems-stripe-size--io-balancing"></a>Файловые системы, размер блока чередования &ная Балансировка операций ввода-вывода 
SAP ASE записывает данные в устройства дискового накопителя последовательно, если не указано иное. Это означает, что пустая база данных SAP ASE с четырьмя устройствами будет записывать данные только на первое устройство.  Другие дисковые устройства будут записываться только при заполнении первого устройства.  Объем операций ввода-вывода чтения и записи для каждого устройства SAP ASE, скорее всего, будет другим. Чтобы сбалансировать операции ввода-вывода диска на всех доступных дисках Azure, необходимо использовать дисковые пространства Windows или Linux LVM2. В Linux для форматирования дисков рекомендуется использовать файловую систему XFS. Размер чередования LVM следует тестировать с помощью теста производительности. в качестве отправной точки рекомендуется указывать размер чередования 128 КБ. В Windows следует тестировать размер единицы распределения NTFS (Австралия). 64 КБ может использоваться в качестве начального значения. 

Рекомендуется настроить автоматическое расширение базы данных, как описано в статье [Настройка автоматического расширения пространства базы данных в SAP адаптивного сервера Enterprise](https://blogs.sap.com/2014/07/09/configuring-automatic-database-space-expansion-in-sap-adaptive-server-enterprise/)  и [Поддержка sap Примечание. #1815695](https://launchpad.support.sap.com/#/notes/1815695). 

### <a name="sample-sap-ase-on-azure-virtual-machine-disk-and-file-system-configurations"></a>Пример SAP ASE на виртуальной машине Azure, конфигурации диска и файловой системы 
В следующих шаблонах показаны образцы конфигураций для Linux и Windows. Перед подтверждением конфигурации виртуальной машины и диска убедитесь, что квоты сети и хранилища для отдельной виртуальной машины достаточно для удовлетворения бизнес-требований. Также помните, что разные типы виртуальных машин Azure имеют различное максимальное число дисков, которые можно подключить к виртуальной машине. Например, виртуальная машина E4s_v3 имеет ограничение пропускной способности ввода-вывода в хранилище 48 МБ/с. Если пропускная способность хранилища, необходимая для действия резервного копирования базы данных, требует более 48 МБ/с, то более крупный тип виртуальной машины с дополнительной пропускной способностью хранения не позволяет избежать проблем. При настройке службы хранилища Azure также необходимо учитывать, что в [хранилище Azure класса Premium](../../windows/premium-storage-performance.md) пропускная способность и количество операций ввода-вывода в секунду изменяются. Дополнительные сведения о [типах дисков, доступных в Azure](../../windows/disks-types.md), см. в разделе Дополнительные сведения в этой статье. Квоты для конкретных типов виртуальных машин Azure описаны в статье [размеры виртуальных машин, оптимизированные для памяти](../../sizes-memory.md) , и статьи, связанные с ней. 

> [!NOTE]
>  Если система СУБД перемещается из локальной среды в Azure, рекомендуется выполнять мониторинг на виртуальной машине и оценивать производительность ЦП, памяти, операций ввода-вывода и пропускной способности хранилища. Сравните пиковые значения с квотами виртуальной машины, описанными в статьях, упомянутых выше.

Примеры, приведенные ниже, предназначены для наглядности и могут быть изменены в зависимости от конкретных потребностей. Из-за структуры SAP ASE количество устройств данных не так важно, как и в случае с другими базами данных. Количество устройств с данными, подробно описанных в этом документе, является исключительно руководством. 

Пример конфигурации для небольшого сервера SAP ASE DB с размером базы данных от 50 ГБ до 250 ГБ, например SAP Solution Manager, может выглядеть следующим образом:

| Конфигурация | Windows | Linux | Комментарии |
| --- | --- | --- | --- |
| Тип виртуальной машины | E4s_v3 (4 виртуальных ЦП/32 ГБ ОЗУ) | E4s_v3 (4 виртуальных ЦП/32 ГБ ОЗУ) | --- |
| Ускорение работы в сети | Включить | Включить | ---|
| Версия SAP ASE | 16.0.03.07 или выше | 16.0.03.07 или выше | --- |
| число устройств с данными | 4 | 4 | ---|
| число устройств для работы с журналами | 1 | 1 | --- |
| число устройств Temp | 1 | 1 | Дополнительные сведения о SAP BW рабочей нагрузке |
| Операционная система | Windows Server 2019 | SUSE 12 SP4/15 SP1 или RHEL 7,6 | --- |
| Объединение дисков | Дисковые пространства | LVM2 | --- |
| Файловая система | NTFS | XFS |
| Размер блока формата | требуется тестирование рабочей нагрузки | требуется тестирование рабочей нагрузки | --- |
| # и тип дисков данных | Хранилище класса Premium: 2 x P10 (конфигурацию RAID0) | Хранилище класса Premium: 2 x P10 (конфигурацию RAID0)| Кэш = только чтение |
| # и тип дисков журнала | Хранилище класса Premium: 1 x P20  | Хранилище класса Premium: 1 x P20 | Cache = NONE |
| ASE MaxMemory, параметр | 90% физической памяти | 90% физической памяти | Предполагается наличие единственного экземпляра |
| число устройств резервного копирования | 4 | 4| --- |
| # и тип дисков резервных копий | 1 | 1 | --- |


Пример конфигурации для сервера среднего уровня SAP ASE DB с размером базы данных от 250 ГБ до 750 ГБ, например в системе с небольшим бизнес-пакетом SAP, может выглядеть следующим образом:

| Конфигурация | Windows | Linux | Комментарии |
| --- | --- | --- | --- |
| Тип виртуальной машины | E16s_v3 (16 виртуальных ЦП/128 ГБ ОЗУ) | E16s_v3 (16 виртуальных ЦП/128 ГБ ОЗУ) | --- |
| Ускорение работы в сети | Включить | Включить | ---|
| Версия SAP ASE | 16.0.03.07 или выше | 16.0.03.07 или выше | --- |
| число устройств с данными | 8 | 8 | ---|
| число устройств для работы с журналами | 1 | 1 | --- |
| число устройств Temp | 1 | 1 | Дополнительные сведения о SAP BW рабочей нагрузке |
| Операционная система | Windows Server 2019 | SUSE 12 SP4/15 SP1 или RHEL 7,6 | --- |
| Объединение дисков | Дисковые пространства | LVM2 | --- |
| Файловая система | NTFS | XFS |
| Размер блока формата | требуется тестирование рабочей нагрузки | требуется тестирование рабочей нагрузки | --- |
| # и тип дисков данных | Хранилище класса Premium: 4 x P20 (конфигурацию RAID0) | Хранилище класса Premium: 4 x P20 (конфигурацию RAID0)| Кэш = только чтение |
| # и тип дисков журнала | Хранилище класса Premium: 1 x P20  | Хранилище класса Premium: 1 x P20 | Cache = NONE |
| ASE MaxMemory, параметр | 90% физической памяти | 90% физической памяти | Предполагается наличие единственного экземпляра |
| число устройств резервного копирования | 4 | 4| --- |
| # и тип дисков резервных копий | 1 | 1 | --- |

Пример конфигурации для небольшого сервера SAP ASE DB с размером базы данных от 750 ГБ до 2000 Гб, например в более крупной системе SAP Business Suite, может выглядеть следующим образом:

| Конфигурация | Windows | Linux | Комментарии |
| --- | --- | --- | --- |
| Тип виртуальной машины | E64s_v3 (64 виртуальных ЦП/432 ГБ ОЗУ) | E64s_v3 (64 виртуальных ЦП/432 ГБ ОЗУ) | --- |
| Ускорение работы в сети | Включить | Включить | ---|
| Версия SAP ASE | 16.0.03.07 или выше | 16.0.03.07 или выше | --- |
| число устройств с данными | 16 | 16 | ---|
| число устройств для работы с журналами | 1 | 1 | --- |
| число устройств Temp | 1 | 1 | Дополнительные сведения о SAP BW рабочей нагрузке |
| Операционная система | Windows Server 2019 | SUSE 12 SP4/15 SP1 или RHEL 7,6 | --- |
| Объединение дисков | Дисковые пространства | LVM2 | --- |
| Файловая система | NTFS | XFS |
| Размер блока формата | требуется тестирование рабочей нагрузки | требуется тестирование рабочей нагрузки | --- |
| # и тип дисков данных | Хранилище класса Premium: 4 x P30 (конфигурацию RAID0) | Хранилище класса Premium: 4 x P30 (конфигурацию RAID0)| Кэш = только чтение |
| # и тип дисков журнала | Хранилище класса Premium: 1 x P20  | Хранилище класса Premium: 1 x P20 | Cache = NONE |
| ASE MaxMemory, параметр | 90% физической памяти | 90% физической памяти | Предполагается наличие единственного экземпляра |
| число устройств резервного копирования | 4 | 4| --- |
| # и тип дисков резервных копий | 1 | 1 | --- |


Пример конфигурации для небольшого сервера SAP ASE DB с размером базы данных 2 ТБ +, например крупным глобально используемым системным бизнес-пакетом SAP, может выглядеть следующим образом:

| Конфигурация | Windows | Linux | Комментарии |
| --- | --- | --- | --- |
| Тип виртуальной машины | Серия M (1,0 – 4,0 ТБ ОЗУ)  | Серия M (1,0 – 4,0 ТБ ОЗУ) | --- |
| Ускорение работы в сети | Включить | Включить | ---|
| Версия SAP ASE | 16.0.03.07 или выше | 16.0.03.07 или выше | --- |
| число устройств с данными | 32 | 32 | ---|
| число устройств для работы с журналами | 1 | 1 | --- |
| число устройств Temp | 1 | 1 | Дополнительные сведения о SAP BW рабочей нагрузке |
| Операционная система | Windows Server 2019 | SUSE 12 SP4/15 SP1 или RHEL 7,6 | --- |
| Объединение дисков | Дисковые пространства | LVM2 | --- |
| Файловая система | NTFS | XFS |
| Размер блока формата | требуется тестирование рабочей нагрузки | требуется тестирование рабочей нагрузки | --- |
| # и тип дисков данных | Хранилище класса Premium: 4 + x P30 (конфигурацию RAID0) | Хранилище класса Premium: 4 + x P30 (конфигурацию RAID0)| Кэш = только для чтения, рекомендуется использовать Azure Ultra Disk |
| # и тип дисков журнала | Хранилище класса Premium: 1 x P20  | Хранилище класса Premium: 1 x P20 | Кэш = нет, рекомендуется использовать Azure Ultra Disk |
| ASE MaxMemory, параметр | 90% физической памяти | 90% физической памяти | Предполагается наличие единственного экземпляра |
| число устройств резервного копирования | 16 | 16 | --- |
| # и тип дисков резервных копий | 4 | 4 | Использование LVM2 и дисковых пространств |


### <a name="backup--restore-considerations-for-sap-ase-on-azure"></a>Рекомендации по восстановлению резервной копии & SAP ASE в Azure
Увеличение количества данных и устройств резервного копирования повышает производительность резервного копирования и восстановления. Рекомендуется создать чередующиеся диски Azure, на которых размещено устройство резервного копирования SAP ASE, как показано в таблицах, показанных ранее. Следует соблюдать осторожность, чтобы сбалансировать количество устройств и дисков резервного копирования и убедиться, что пропускная способность резервного копирования не должна превышать 40%-50% от общей квоты пропускной способности виртуальной машины. Рекомендуется использовать сжатие резервных копий SAP по умолчанию. Дополнительные сведения можно найти в статьях:

- [Примечание о поддержке SAP #1588316](https://launchpad.support.sap.com/#/notes/1588316)
- [Примечание о поддержке SAP #1801984](https://launchpad.support.sap.com/#/notes/1801984)
- [Примечание о поддержке SAP #1585981](https://launchpad.support.sap.com/#/notes/1585981) 

Не использовать диск D:\ или/TEMP в качестве места назначения для дампа базы данных или журнала.

### <a name="impact-of-database-compression"></a>Влияние сжатия базы данных
В конфигурациях, в которых пропускная способность ввода-вывода может быть ограничивающим фактором, меры, которые сокращают количество операций чтения, могут помочь растянуть рабочую нагрузку, которая может быть выполнена в сценарии IaaS, например Azure. Таким образом, рекомендуем обязательно использовать сжатие SAP ASE перед отправкой имеющейся базы данных SAP в Azure.

Использовать сжатие перед отправкой в Azure рекомендуется по нескольким причинам:

* Объем отправляемых в Azure данных уменьшается.
* Длительность выполнения сжатия короче, при условии, что локально можно использовать более мощное оборудование с большим числом ЦП, более высокой пропускной способностью ввода-вывода или меньшими задержками ввода-вывода.
* Уменьшение размеров баз данных может сократить затраты на выделение места на дисках.

Сжатие данных и LOB работает на виртуальных машинах Azure так же, как и в локальной среде. Дополнительные сведения о том, как проверить, используется ли сжатие в существующей базе данных SAP ASE, см. в [примечании о поддержке sap 1750510](https://launchpad.support.sap.com/#/notes/1750510). Дополнительные сведения о сжатии базы данных SAP ASE см. в [примечании о поддержке sap #2121797](https://launchpad.support.sap.com/#/notes/2121797)

## <a name="high-availability-of-sap-ase-on-azure"></a>Высокий уровень доступности SAP ASE в Azure 
В этом разделе подробно описывается установка и настройка решения SAP ASE "Always-On" с 2 узлами.  Кроме того, поддерживается также третий узел аварийного восстановления. SAP ASE поддерживает множество высокодоступных конфигураций, включая общий диск и кластеризацию машинных ОС (с плавающей IP-адресом). Единственной поддерживаемой конфигурацией в Azure является использование диспетчера ошибок без плавающего IP-адреса.  Метод с плавающим IP-адресом не будет работать в Azure.  Ядро SAP — это приложение с поддержкой высокой доступности, которое знает о первичном и дополнительном серверах SAP ASE. Нет тесной интеграции между SAP ASE и Azure, внутренняя подсистема балансировки нагрузки Azure не используется. Поэтому в стандартную документацию по SAP ASE следует начинать с [руководства пользователя SAP ASE HADR](https://help.sap.com/viewer/efe56ad3cad0467d837c8ff1ac6ba75c/16.0.3.7/en-US/a6645e28bc2b1014b54b8815a64b87ba.html) . 

> [!NOTE]
> Единственной поддерживаемой конфигурацией в Azure является использование диспетчера ошибок без плавающего IP-адреса.  Метод с плавающим IP-адресом не будет работать в Azure. 

### <a name="third-node-for-disaster-recovery"></a>Третий узел для аварийного восстановления
Помимо использования ключа SAP ASE Always-on для локальной высокой доступности, может потребоваться расширить конфигурацию на асинхронно реплицируемый узел в другом регионе Azure. Документацию по такому сценарию можно найти [здесь](https://techcommunity.microsoft.com/t5/running-sap-applications-on-the/installation-procedure-for-sybase-16-3-patch-level-3-always-on/ba-p/368199).

## <a name="sap-ase-database-encryption--ssl"></a>Шифрование базы данных SAP ASE & SSL 
Диспетчер подготовки программного обеспечения SAP (SWPM) предоставляет возможность зашифровать базу данных во время установки.  Если вы хотите использовать шифрование, рекомендуется использовать полное шифрование базы данных SAP.  См. сведения в разделе:

- [Примечание о поддержке SAP #2556658](https://launchpad.support.sap.com/#/notes/2556658)
- [Примечание о поддержке SAP #2224138](https://launchpad.support.sap.com/#/notes/2224138)
- [Примечание о поддержке SAP #2401066](https://launchpad.support.sap.com/#/notes/2401066)
- [Примечание о поддержке SAP #2593925](https://launchpad.support.sap.com/#/notes/2593925) 

> [!NOTE]
> Если база данных SAP ASE шифруется, сжатие резервных копий не будет работать. См. также [Примечание о поддержке SAP #2680905](https://launchpad.support.sap.com/#/notes/2680905) 

## <a name="sap-ase-on-azure-deployment-checklist"></a>Контрольный список развертывания SAP ASE в Azure
 
- Развертывание SAP ASE 16.0.03.07 или более поздней версии
- Обновление до последней версии и исправлений для Фаултманажер и SAPHostAgent
- Выполните развертывание на последней доступной сертифицированной ОС, например Windows 2019, SUSE 15,1 или Redhat 7,6 или более поздней версии.
- Использование сертифицированных виртуальных машин SAP. для виртуальных машин Azure с большим объемом памяти, таких как Es_v3 или для номеров SKU виртуальных машин серии M x-large, рекомендуется использовать
- Сопоставьте дисковые квоты операций ввода-вывода и общей пропускной способности виртуальной машины с архитектурой диска.  Развертывание достаточного количества дисков
- Объединение дисков с помощью дисковых пространств Windows или Linux LVM2 с правильным размером чередования и файловой системой
- Создание достаточного количества устройств для данных, журналов, временных файлов и резервных копий
- Рассмотрите возможность использования Ултрадиск для систем x-large 
- Запуск `saptune` SAP-ASE в ОС Linux 
- Защита базы данных с помощью шифрования БД — хранение ключей вручную в Azure Key Vault 
- Выполните [Контрольный список SAP в Azure](./sap-deployment-checklist.md) 
- Настройка резервного копирования журналов и полного резервного копирования 
- Тестирование высокого уровня доступности и АВАРИЙного восстановления, резервное копирование и восстановление и выполнение нагрузочного &ного теста 
- Подтверждение работы автоматического расширения базы данных 

## <a name="using-dbacockpit-to-monitor-database-instances"></a>Использование DBACockpit для мониторинга экземпляров базы данных
Для систем SAP, в которых используется SAP ASE в качестве платформы баз данных, средство DBACockpit доступно в виде встроенных окон браузера в DBACockpit для транзакции или в виде Webdynpro. Однако все функции мониторинга и администрирования базы данных доступны только в реализации Webdynpro DBACockpit.

Как и для локальных систем, требуется выполнить ряд действий, чтобы включить все функциональные возможности SAP NetWeaver, используемые в реализации Webdynpro средства DBACockpit. См. [Примечание о поддержке SAP #1245200](https://launchpad.support.sap.com/#/notes/1245200) , чтобы включить использование инструментов Webdynpro и создать необходимые. При выполнении инструкций, описанных в приведенных выше примечаниях, необходимо также настроить диспетчер Internet Communication Manager ( `ICM` ) вместе с портами, которые будут использоваться для подключений HTTP и HTTPS. Настройка по умолчанию для http выглядит следующим образом:

> icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600
> 
> icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600
> 
> 

Ссылки, создаваемые в DBACockpit для транзакции, выглядят так:

> HTTPS: \/ / \<fullyqualifiedhostname> : 44300/SAP/BC/Webdynpro/SAP/dba_cockpit
> 
> http: \/ / \<fullyqualifiedhostname> : 8000/SAP/BC/Webdynpro/SAP/dba_cockpit
> 
> 

В зависимости от того, как виртуальная машина Azure, на которой размещается система SAP, подключена к AD и DNS, необходимо убедиться в том, что ICM использует полное имя узла, которое может быть разрешено на компьютере, с которого вы открываете DBACockpit. См. [Примечание о поддержке SAP #773830](https://launchpad.support.sap.com/#/notes/773830) , чтобы понять, как ICM определяет полное имя узла на основе параметров профиля и задает параметр icm/host_name_full явным образом при необходимости.

Если виртуальная машина развернута в сценарии только для облака без распределенного подключения между локальной средой и Azure, необходимо определить общедоступный IP-адрес и `domainlabel` . Формат общедоступного DNS-имени виртуальной машины будет выглядеть так:

> `<custom domainlabel`>.`<azure region`>.cloudapp.azure.com
> 
> 

Дополнительные сведения, относящиеся к DNS-имени, можно найти [здесь] [Virtual-Machines-azurerm-by-азуресм].

Если для параметра профиля SAP icm/host_name_full задать DNS-имя виртуальной машины Azure, ссылка может выглядеть так:

> HTTPS: \/ /mydomainlabel.westeurope.cloudapp.NET:44300/SAP/BC/Webdynpro/SAP/dba_cockpit
> 
> http: \/ /mydomainlabel.westeurope.cloudapp.NET:8000/SAP/BC/Webdynpro/SAP/dba_cockpit

В таком случае необходимо:

* добавить правила для входящего трафика в группу безопасности сети на портале Azure для портов TCP/IP, используемых для связи с ICM;
* добавить правила для входящего трафика в конфигурацию брандмауэра Windows для портов TCP/IP, используемых для связи с ICM.

Для автоматического импорта всех доступных исправлений рекомендуется периодически применять примечания SAP, содержащие наборы исправлений, которые относятся к вашей версии SAP:

* [Примечание о поддержке SAP #1558958](https://launchpad.support.sap.com/#/notes/1558958)
* [Примечание о поддержке SAP #1619967](https://launchpad.support.sap.com/#/notes/1619967)
* [Примечание о поддержке SAP #1882376](https://launchpad.support.sap.com/#/notes/1882376)

Дополнительные сведения о панели DBA для SAP ASE можно найти в следующих примечаниях SAP:

* [Примечание о поддержке SAP #1605680](https://launchpad.support.sap.com/#/notes/1605680)
* [Примечание о поддержке SAP #1757924](https://launchpad.support.sap.com/#/notes/1757924)
* [Примечание о поддержке SAP #1757928](https://launchpad.support.sap.com/#/notes/1757928)
* [Примечание о поддержке SAP #1758182](https://launchpad.support.sap.com/#/notes/1758182)
* [Примечание о поддержке SAP #1758496](https://launchpad.support.sap.com/#/notes/1758496)    
* [Примечание о поддержке SAP #1814258](https://launchpad.support.sap.com/#/notes/1814258)
* [Примечание о поддержке SAP #1922555](https://launchpad.support.sap.com/#/notes/1922555)
* [Примечание о поддержке SAP #1956005](https://launchpad.support.sap.com/#/notes/1956005)


## <a name="useful-links-notes--whitepapers-for-sap-ase"></a>Полезные ссылки, примечания & технические документы для SAP ASE
На начальной странице [документации по SAP ASE 16.0.03.07](https://help.sap.com/viewer/product/SAP_ASE/16.0.3.7/en-US) приведены ссылки на различные документы, в которых находятся документы:

- Учебное путешествие по SAP ASE. Администрирование & мониторинг
- Учебное путешествие по SAP ASE. Установка & обновление

полезны. Еще один полезный документ — [приложения SAP в рекомендациях по адаптивному серверу для миграции и времени выполнения в SAP](https://assets.cdn.sap.com/sapcom/docs/2016/06/26450353-767c-0010-82c7-eda71af511fa.pdf).

Другие полезные заметки о поддержке SAP:

- [Примечание о поддержке SAP #2134316](https://launchpad.support.sap.com/#/notes/2134316) 
- [Примечание о поддержке SAP #1748888](https://launchpad.support.sap.com/#/notes/1748888) 
- [Примечание о поддержке SAP #2588660](https://launchpad.support.sap.com/#/notes/2588660) 
- [Примечание о поддержке SAP #1680803](https://launchpad.support.sap.com/#/notes/1680803) 
- [Примечание о поддержке SAP #1724091](https://launchpad.support.sap.com/#/notes/1724091) 
- [Примечание о поддержке SAP #1775764](https://launchpad.support.sap.com/#/notes/1775764) 
- [Примечание о поддержке SAP #2162183](https://launchpad.support.sap.com/#/notes/2162183) 
- [Примечание о поддержке SAP #1928533](https://launchpad.support.sap.com/#/notes/1928533)
- [Примечание о поддержке SAP #2015553](https://launchpad.support.sap.com/#/notes/2015553)
- [Примечание о поддержке SAP #1750510](https://launchpad.support.sap.com/#/notes/1750510) 
- [Примечание о поддержке SAP #1752266](https://launchpad.support.sap.com/#/notes/1752266) 
- [Примечание о поддержке SAP #2162183](https://launchpad.support.sap.com/#/notes/2162183) 
- [Примечание о поддержке SAP #1588316](https://launchpad.support.sap.com/#/notes/158831) 

Другие сведения публикуются на 

- [Приложения SAP на адаптивном корпоративном сервере SAP](https://community.sap.com/topics/applications-on-ase)
- [Информационный центр SAP ASE](http://infocenter.sybase.com/help/index.jsp) 
- [SAP ASE Always-On с третьей установкой узла аварийного восстановления](https://techcommunity.microsoft.com/t5/running-sap-applications-on-the/installation-procedure-for-sybase-16-3-patch-level-3-always-on/ba-p/368199)

Ежемесячный информационный бюллетень опубликован в [заметке о поддержке SAP #2381575](https://launchpad.support.sap.com/#/notes/2381575) 


## <a name="next-steps"></a>Дальнейшие действия
Ознакомьтесь со статьей [о рабочих нагрузках SAP в Azure: контрольный список для планирования и развертывания](./sap-deployment-checklist.md)
