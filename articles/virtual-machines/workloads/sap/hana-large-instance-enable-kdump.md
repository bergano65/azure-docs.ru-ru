---
title: Скрипт для включения Кдумп в SAP HANA (крупные экземпляры) | Документация Майкрософт
description: Скрипт для включения Кдумп в SAP HANA (крупные экземпляры) ХЛИ тип I, ХЛИ тип II
services: virtual-machines-linux
documentationcenter: ''
author: prtyag
manager: hrushib
editor: ''
ms.service: virtual-machines-linux
ms.subservice: workloads
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 03/30/2020
ms.author: prtyag
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: b6afcfe7684102b451860d9916d849842489cace
ms.sourcegitcommit: cd9754373576d6767c06baccfd500ae88ea733e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2020
ms.locfileid: "94967709"
---
# <a name="kdump-for-sap-hana-on-azure-large-instances-hli"></a>Кдумп для SAP HANA на крупных экземплярах Azure (ХЛИ)

Настройка и включение кдумп — это шаг, необходимый для устранения неполадок в системе, которые не имеют четкой причины.
Иногда возникает неожиданное аварийное завершение системы, которое не может быть объяснено с помощью проблемы с оборудованием или инфраструктурой.
В таких случаях это может быть проблема операционной системы или приложения, и кдумп позволит SUSE определить причину сбоя системы.

## <a name="enable-kdump-service"></a>Включение службы Кдумп

В этом документе описаны сведения о том, как включить службу Кдумп в крупном экземпляре Azure HANA (**тип I и тип II**).

## <a name="supported-skus"></a>Поддерживаемые номера SKU

|  Тип крупных экземпляров Hana   |  Поставщик ОС   |  Версия пакета ОС   |  SKU        |
|-----------------------------|--------------|-----------------------|-------------|
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S224m      |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 4 (SP4)         |  S224m      |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S72        |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S72m       |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S72m       |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S96        |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S96        |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S192       |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S192       |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 4 (SP4)         |  S192       |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S192m      |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S192m      |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 4 (SP4)         |  S192m      |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S144       |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S144       |
|   Тип I                    |  SuSE        |   SLES 12 SP2         |  S144m      |
|   Тип I                    |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S144m      |
|   Тип II                   |  SuSE        |   SLES 12 SP2         |  S384       |
|   Тип II                   |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S384       |
|   Тип II                   |  SuSE        |   SLES 12 с пакетом обновления 4 (SP4)         |  S384       |
|   Тип II                   |  SuSE        |   SLES 12 SP2         |  S384xm     |
|   Тип II                   |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S384xm     |
|   Тип II                   |  SuSE        |   SLES 12 с пакетом обновления 4 (SP4)         |  S384xm     |
|   Тип II                   |  SuSE        |   SLES 12 SP2         |  S576m      |
|   Тип II                   |  SuSE        |   SLES 12 с пакетом обновления 3 (SP3)         |  S576m      |
|   Тип II                   |  SuSE        |   SLES 12 с пакетом обновления 4 (SP4)         |  S576m      |

## <a name="prerequisites"></a>Предварительные требования

- Служба кдумп использует `/var/crash` каталог для записи дампов, убедитесь, что раздел соответствует этому каталогу, достаточно места для размещения дампов.

## <a name="setup-details"></a>Сведения о настройке

- Скрипт для включения Кдумп можно найти [здесь](https://github.com/Azure/sap-hana/blob/master/tools/enable-kdump.sh)
> [!NOTE]
> Этот сценарий создается на основе нашей лабораторной настройки, и клиент должен обратиться к поставщику ОС для дальнейшей настройки.
> Отдельный LUN будет подготовлен для новых и существующих серверов для сохранения дампов и сценариев, которые позаботится о настройке файловой системы из LUN.
> Корпорация Майкрософт не будет отвечать за анализ дампа. Клиент должен открыть билет с поставщиком ОС, чтобы получить его анализ.

- Запустите этот скрипт в крупном экземпляре HANA, используя команду с приведенной ниже командой.

    > [!NOTE]
    > для выполнения этой команды требуется привилегия sudo.

    ```bash
    sudo bash enable-kdump.sh
    ```

- Если команда выводит Кдумп, для успешного применения изменений необходимо перезагрузить систему.

- Если выходные данные команды не могут выполнить определенную операцию, то завершение работы!!!!, служба Кдумп не включена. Обратитесь к статье о [проблемах поддержки](#support-issue).

## <a name="test-kdump"></a>Тестовый Кдумп

> [!NOTE]
>  Приведенная ниже операция вызывает сбой ядра и перезагрузку системы.

- Активация сбоя ядра

    ```bash
    echo c > /proc/sysrq-trigger
    ```

- После успешного перезагрузки системы проверьте наличие `/var/crash` журналов сбоев ядра в каталоге.

- Если объект `/var/crash` имеет каталог с текущей датой, то кдумп успешно включен.

## <a name="support-issue"></a>Проблемы с поддержкой

Если сценарий завершается ошибкой или Кдумп не включен, поднимите запрос на обслуживание в группе поддержки Майкрософт, указав следующие сведения.

* Идентификатор подписки ХЛИ

* Имя сервера

* Поставщик ОС

* Версия ОС

* Версия ядра

## <a name="related-documents"></a>Связанные документы
- Дополнительные сведения о [настройке кдумп](https://www.suse.com/support/kb/doc/?id=3374462)
