---
title: Установка Azure FarmBeats
description: В этой статье описывается, как установить Azure Фармбеатс в подписке Azure.
author: usha-rathnavel
ms.topic: article
ms.date: 1/17/2020
ms.author: atinb
ms.openlocfilehash: 701e42caba5325df34bdbb2381389708b9b5a03f
ms.sourcegitcommit: 333af18fa9e4c2b376fa9aeb8f7941f1b331c11d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/13/2020
ms.locfileid: "77198860"
---
# <a name="install-azure-farmbeats"></a>Установка Azure FarmBeats

В этой статье описывается, как установить Azure Фармбеатс в подписке Azure.

Azure FarmBeats предоставляется в Azure Marketplace как предложение B2B. Она позволяет объединять наборы данных сельское хозяйство в поставщиках и создавать ценные сведения, позволяющие предпринимать практические действия. Azure Фармбеатс делает это, позволяя создавать модели искусственного интеллекта (ии) или машинного обучения (ML) на основе наборов данных с предохранителем. Два основных компонента Azure Фармбеатс:

- **Датахуб**: уровень API, обеспечивающий агрегирование, нормализацию и контекстуальность различных наборов данных сельское хозяйство в разных поставщиках.

- **Ускоритель**: веб-приложение, созданное на основе датахуб. Он запускает разработку и визуализацию модели. Ускоритель использует API-интерфейсы Фармбеатс Azure для демонстрации визуализации полученных данных датчика в виде диаграмм и визуализации вывода модели в виде карт.

## <a name="general-information"></a>Общие сведения

### <a name="components-installed"></a>Установленные компоненты

При установке Azure Фармбеатс в подписке Azure подготавливаются следующие ресурсы.

| Установленные ресурсы Azure  | Компонент Azure Фармбеатс  |
|---------|---------|
| Application Insights   |      Ускоритель & датахуб      |
| Служба приложений     |     Ускоритель & датахуб     |
| План обслуживания приложения   | Ускоритель & датахуб  |
| API подключения    |  Datahub       |
| Кэш Redis для Azure       | Datahub      |
| Azure Cosmos DB   |  Datahub       |
| Фабрика данных Azure версии 2       |     Ускоритель & датахуб      |
| Учетная запись пакетной службы Azure    | Datahub   |
| Azure Key Vault |  Ускоритель & датахуб        |
| Учетная запись Azure Maps       |     Accelerator    |
| Пространство имен концентратора событий    |     Datahub      |
| приложение логики;      |  Datahub       |
| Учетная запись хранения      |     Ускоритель & датахуб      |
| Аналитика временных рядов     |    Datahub    |

### <a name="costs-incurred"></a>Затраты

Стоимость Azure Фармбеатс — это совокупная стоимость базовых служб Azure. Сведения о ценах на службы Azure можно рассчитать с помощью [калькулятора цен](https://azure.microsoft.com/pricing/calculator). Фактические затраты на общую установку будут зависеть от использования. Устойчивое состояние для двух компонентов:

- Датахуб — менее $10 в день
- Ускоритель — менее $2 в день

### <a name="regions-supported"></a>Поддерживаемые регионы

Сейчас Azure Фармбеатс поддерживается в общедоступных облачных средах в следующих регионах:

- Восточная Австралия
- Центральная часть США
- Восток США
- восточная часть США 2
- Запад США
- западная часть США 2
- Северная Европа
- Западная Европа
- Восточная Азия
- Юго-Восточная Азия

### <a name="time-taken"></a>Затраченное время

Полная настройка Azure Фармбеатс, включая подготовку и установку, займет меньше часа.

## <a name="prerequisites"></a>Предварительные требования

Прежде чем начать фактическую установку Azure Фармбеатс, необходимо выполнить следующие действия.

### <a name="verify-permissions"></a>Проверка разрешений

Для установки Azure Фармбеатс вам потребуются следующие разрешения в клиенте Azure:

- Клиент — создатель приложения AAD
- Подписка — владелец
- Группа ресурсов, в которой устанавливается Фармбеатс — владелец

Первые два разрешения необходимы для создания шага [приложения AAD](#create-an-aad-application) . При необходимости вы можете получить у человека соответствующие разрешения на создание приложения AAD.

Пользователь, запускающий установку Фармбеатс из Marketplace, должен быть владельцем группы ресурсов, в которой устанавливается Фармбеатс. Для владельцев подписок это происходит автоматически при создании группы ресурсов. Для других пользователей необходимо предварительно создать группу ресурсов и попросить ее владельца сделать владельцем группы ресурсов.

Вы можете проверить разрешения на доступ в портал Azure, следуя инструкциям в разделе [Управление доступом на основе ролей](https://docs.microsoft.com/azure/role-based-access-control/check-access).

### <a name="decide-subscription-and-region"></a>Выбор подписки и региона

Вам потребуется идентификатор подписки Azure и регион, где вы хотите установить Azure Фармбеатс. Выберите один из регионов, перечисленных в разделе [Поддерживаемые регионы](#regions-supported) .

Запишите **идентификатор подписки Azure** и **регион Azure**.

### <a name="create-an-aad-application"></a>Создание приложения AAD

Для Azure Фармбеатс требуется создание и регистрация приложения Azure Active Directory. Для успешного выполнения скрипта создания AAD необходимы следующие разрешения.

- Клиент — создатель приложения AAD
- Подписка — владелец

Выполните следующие действия в экземпляре Cloud Shell с помощью среды PowerShell. Пользователям в первый раз будет предложено выбрать подписку и создать учетную запись хранения. Завершите установку согласно указаниям.

1. Скачать [Скрипт генератора приложений AAD](https://aka.ms/FarmBeatsAADScript)

    ```azurepowershell-interactive
        wget -q https://aka.ms/FarmBeatsAADScript -O ./create_aad_script.ps1
    ```

2. По умолчанию файл загружается в домашний каталог. Перейдите в каталог.

    ```azurepowershell-interactive
        cd
    ```

3. Выполнение скрипта AAD

    ```azurepowershell-interactive
        ./create_aad_script.ps1
    ```

4. Сценарий запрашивает следующие три входа:

    - Имя веб-сайта Фармбеатс: это уникальный префикс URL-адреса для вашего приложения Фармбеатс. Если префикс уже используется, сценарий выдаст ошибку. После установки развертывание Фармбеатс будет доступно из https://\<Фармбеатс-website-name >. azurewebsites. NET и API Swagger будут находиться в https://\<Фармбеатс-website-name >-api.azurewebsites.net

    - Идентификатор входа Azure. Укажите идентификатор входа Azure для пользователя, которого вы хотите добавить в качестве администратора Фармбеатс. Затем этот пользователь может предоставить доступ к веб-приложению Фармбеатс другим пользователям. Идентификатор входа обычно имеет форму john.doe@domain.com. Также поддерживается имя участника-пользователя Azure.

    - Идентификатор подписки. это идентификатор подписки, в которой вы хотите установить Azure Фармбеатс.

5. Сценарий AAD занимает около 2 минут для запуска и вывода значений на экране, а также для JSON-файла в том же каталоге. Если вы еще не работали с этим сценарием, попросите его поделиться этим выходом.

### <a name="create-sentinel-account"></a>Создать учетную запись Sentinel

Программа установки Azure Фармбеатс позволяет получить сопутствующие образы от "Sentinel" в сфере Европы [-2](https://scihub.copernicus.eu/) для вашей фермы. Чтобы настроить эту настройку, требуется учетная запись Sentinel.

Выполните действия, чтобы создать бесплатную учетную запись с Sentinel:

1. Перейдите на официальную страницу [регистрации](https://aka.ms/SentinelRegistration) .
2. Укажите необходимые сведения (имя, фамилию, имя пользователя, пароль и идентификатор электронной почты) и заполните форму.
3. На зарегистрированный идентификатор электронной почты отправляется ссылка для проверки. Выберите ссылку, указанную в сообщении электронной почты, и завершите проверку.

Процесс регистрации завершен. После завершения проверки запишите **имя пользователя** и **пароль**Sentinel.

## <a name="install"></a>Установка

Теперь все готово для установки Фармбеатс. Выполните следующие действия, чтобы начать установку:

1. Войдите на портал Azure. Выберите свою учетную запись в правом верхнем углу и перейдите в клиент Azure AD, где вы хотите установить Azure Фармбеатс.

2. Перейдите в Azure Marketplace на портале и выполните поиск по запросу **Azure фармбеатс** в Marketplace.

3. Откроется новое окно с обзором Azure Фармбеатс. Выберите **Создать**.

4. Откроется новое окно. Завершите процесс регистрации, выбрав подходящую подписку, группу ресурсов и расположение, в которое вы хотите установить Azure Фармбеатс.

5. Укажите адрес электронной почты, который должен получить все оповещения службы, связанные с Azure Фармбеатс, в разделе " **оповещения службы фармбеатс** ". Нажмите кнопку **Далее** в нижней части страницы, чтобы перейти на вкладку **зависимости** .

    ![Вкладка «основы»](./media/install-azure-farmbeats/create-azure-farmbeats-basics.png)

6. Скопируйте отдельные записи из выходных данных [скрипта AAD](#create-an-aad-application) в входные данные в разделе приложение AAD.

7. Введите имя пользователя и пароль [учетной записи Sentinel](#create-sentinel-account) в разделе Учетная запись Sentinel. Нажмите кнопку **Далее** , чтобы перейти на вкладку **Проверка и создание** .

    ![Вкладка «Зависимости»](./media/install-azure-farmbeats/create-azure-farmbeats-dependencies.png)

8. После проверки указанных сведений нажмите кнопку **ОК**. Откроется страница Условия использования. Ознакомьтесь с условиями и выберите **создать** , чтобы начать установку. Вы будете перенаправлены на страницу, на которой можно следовать ход установки.

После завершения установки можно проверить установку и начать использовать портал Фармбеатс, перейдя по имени веб-сайта, которое вы указали во время установки: https://\<Фармбеатс-website-name >. azurewebsites. NET. Вы должны увидеть пользовательский интерфейс Фармбеатс с возможностью создания ферм.

**Датахуб** можно найти по адресу https://\<фармбеатс-website-name >-АПИ. azurewebsites. NET/Swagger. Здесь вы увидите различные объекты API Фармбеатс и выполняют операции RESTFUL с API.

## <a name="upgrade"></a>Обновление

Чтобы обновить Фармбеатс до последней версии, выполните следующие действия в экземпляре Cloud Shell с помощью среды PowerShell. Пользователь должен быть владельцем подписки, в которой установлена Фармбеатс.

Пользователям в первый раз будет предложено выбрать подписку и создать учетную запись хранения. Завершите установку согласно указаниям.

1. Скачивание [скрипта обновления](https://aka.ms/FarmBeatsUpgradeScript)

    ```azurepowershell-interactive
        wget –q https://aka.ms/FarmBeatsUpgradeScript -O ./upgrade-farmbeats.ps1
    ```

2. По умолчанию файл загружается в домашний каталог. Перейдите в каталог.

    ```azurepowershell-interactive
        cd
    ```

3. Запуск скрипта обновления

    ```azurepowershell-interactive
        ./upgrade-farmbeats.ps1 -InputFilePath [Path to input.json file]
    ```

Путь к входному JSON-файлу является необязательным. Если не указано, сценарий запросит все необходимые входные данные. Обновление должно завершиться примерно через 30 минут.

## <a name="uninstall"></a>Удаление

Чтобы удалить Azure Фармбеатс Датахуб или ускоритель, выполните следующие действия.

1. Войдите в портал Azure и **удалите группы ресурсов** , в которых установлены эти компоненты.

2. Перейдите в Azure Active Directory & **удалить приложение Azure AD** , связанное с установкой Azure фармбеатс.

## <a name="next-steps"></a>Следующие шаги

Вы узнали, как установить Azure Фармбеатс в подписке Azure. Теперь Узнайте, как [Добавить пользователей](manage-users-in-azure-farmbeats.md#manage-users) в экземпляр Azure фармбеатс.
