---
title: Копирование приложений и данных в узлы пула
description: Сведения о том, как копировать приложения и данные в узлы пула.
ms.topic: how-to
ms.date: 02/10/2021
ms.openlocfilehash: a5933a1c52e2848b6b414f1750bb24515fb9f28a
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100378508"
---
# <a name="copy-applications-and-data-to-pool-nodes"></a>Копирование приложений и данных в узлы пула

Пакетная служба Azure поддерживает несколько способов получения данных и приложений на расчетные узлы, чтобы они были доступны для использования задачами.

Выбранный метод может зависеть от области действия файла или приложения. Для выполнения всего задания могут потребоваться данные и приложения, поэтому их необходимо установить на каждом узле. Некоторые файлы или приложения могут быть необходимы только для конкретной задачи. Для задания может потребоваться установить другие, но не обязательно указывать на каждый узел. В пакетной службе доступны инструменты для любого из этих сценариев.

## <a name="determine-the-scope-required-of-a-file"></a>Определение требуемой области для файла

Вам важно правильно определить область файла — используется ли он для всего пула, задания или задачи. Файлы, для которых областью является пул, должны использовать пакеты приложений пула или задачи запуска. Файлы для отдельного задания должны использовать задачу подготовки задания. Хорошим примером файлов с областью действия на уровне пула или задания являются приложения. Файлы для отдельной задачи должны использовать файлы ресурсов для задачи.

## <a name="pool-start-task-resource-files"></a>Файлы ресурсов задачи "начало пула"

Для приложений или данных, которые необходимо установить на каждом узле в пуле, используйте файлы ресурсов задачи "начало пула". Используйте этот метод вместе с [пакетом приложения](batch-application-packages.md) или коллекцией файлов ресурсов задачи запуска, чтобы выполнить команду install.  

Например, можно использовать командную строку запуска задачи для перемещения или установки приложений. Вы также можете указать список файлов или контейнеров в учетной записи хранения Azure. Дополнительные сведения см. [в разделе Add # ResourceFile в документации по RESTful](/rest/api/batchservice/pool/add#resourcefile).

Если каждое задание, выполняемое в пуле, запускает приложение (exe-файл), которое сначала должно быть установлено с помощью MSI-файла, необходимо задать свойству ожидание задачи запуска для **успешного выполнения** **значение true**. Дополнительные сведения см. [в разделе Add # StartTask в документации по RESTful](/rest/api/batchservice/pool/add#starttask).

## <a name="application-package-references"></a>Ссылки на пакет приложения

Для приложений или данных, которые необходимо установить на каждом узле в пуле, рассмотрите возможность использования [пакетов приложений](batch-application-packages.md). Не существует команды установки, связанной с пакетом приложения, но задачу запуска можно применять для выполнения любой команды установки. Если приложение не требует установки или состоит из большого числа файлов, вам подойдет этот метод.

Пакеты приложений полезны при наличии большого количества файлов, так как они могут объединять множество файловых ссылок в небольшие полезные данные. Если вы попытаетесь включить в одну задачу более 100 отдельных файлов ресурсов, пакетная служба может столкнуться с внутренними ограничениями системы, установленными для одной задачи. Пакеты приложений также полезны, если имеется множество различных версий одного и того же приложения и необходимо выбрать один из них.

## <a name="extensions"></a>Расширения

[Расширения](create-pool-extensions.md) — это небольшие приложения, которые упрощают настройку после подготовки и настройки на вычислительных узлах пакетной службы. При создании пула можно выбрать поддерживаемое расширение, которое будет установлено на вычисленных узлах при их подготовке. После этого расширение может выполнить требуемую операцию.

## <a name="job-preparation-task-resource-files"></a>Файлы ресурсов задачи подготовки задания

Для приложений или данных, которые должны быть установлены для запуска задания, но не нужно устанавливать во весь пул, рассмотрите возможность использования [файлов ресурсов задачи подготовки задания](./batch-job-prep-release.md).

Например, если в пуле имеется много различных типов заданий, и только одному типу задания требуется MSI-файл для выполнения, имеет смысл разместить шаг установки в задаче подготовки задания.

## <a name="task-resource-files"></a>Файлы ресурсов задач

Файлы ресурсов задач подходят, если приложение или данные относятся только к отдельной задаче.

Например, у вас может быть пять задач, каждая из которых обрабатывает другой файл и затем записывает выходные данные в хранилище BLOB-объектов. в этом случае входной файл должен быть указан в коллекции файлов ресурсов задачи, так как каждая задача имеет собственный входной файл.

## <a name="additional-ways-to-get-data-onto-nodes"></a>Дополнительные способы получения данных на узлах

Поскольку вы управляете узлами пакетной службы Azure и можете запускать пользовательские исполняемые файлы, вы можете извлечь данные из любого числа пользовательских источников. Убедитесь, что узел пакетной службы имеет подключение к целевому объекту и что на узле имеются учетные данные.

Ниже приведены несколько примеров способов перемещения данных на узлы пакетной службы.

- скачивание данных из базы данных SQL;
- скачивание данных из других веб-служб или пользовательских расположений;
- сопоставление сетевой папки.

## <a name="azure-storage"></a>Хранилище Azure

Помните, что хранилище BLOB-объектов загружает целевые показатели масштабируемости. Целевые показатели масштабируемости для общей папки в службе хранилища Azure такие же, как для одного большого двоичного объекта. Размер может повлиять на необходимое количество узлов и пулов.

## <a name="next-steps"></a>Следующие шаги

- Сведения об использовании [пакетов приложений с пакетной службой](batch-application-packages.md).
- Дополнительные сведения о [работе с узлами и пулами](nodes-and-pools.md).
