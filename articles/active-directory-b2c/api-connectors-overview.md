---
title: Сведения о соединителях API в Azure AD B2C
description: Используйте соединители API Azure Active Directory (Azure AD), чтобы настроить и расширить потоки регистрации пользователей с помощью веб-API.
services: active-directory-b2c
ms.service: active-directory
ms.subservice: B2C
ms.topic: how-to
ms.date: 09/30/2020
ms.author: mimart
author: msmimart
manager: celestedg
ms.custom: it-pro
ms.openlocfilehash: 195101a432d16c2236ea2d164416e75df33b12e4
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91828577"
---
# <a name="use-api-connectors-to-customize-and-extend-sign-up-user-flows"></a>Использование соединителей API для настройки и расширения потоков пользователей при регистрации

## <a name="overview"></a>Обзор 
Как разработчик или ИТ-администратор, вы можете использовать соединители API для интеграции пользователя регистрации с веб-API для настройки процесса регистрации. С помощью соединителей API можно:

- **Выполните проверку личности**. Используйте службу проверки личности, чтобы добавить дополнительный уровень безопасности для принятия решений о создании учетных записей.
- **Проверять входные данные пользователя.** Проверка на соответствие некорректным или недопустимым данным пользователя. Например, можно проверить данные, предоставленные пользователем, по существующим данным во внешнем хранилище данных или в списке разрешенных значений. Если значение недопустимо, можно попросить пользователя предоставить допустимые данные или запретить пользователю продолжать процесс регистрации.
- **Интеграция с настраиваемым рабочим процессом утверждения**. Подключитесь к пользовательской системе утверждения для управления и ограничения создания учетной записи.
- **Перезаписать атрибуты пользователя**. Переформатируйте или присвойте значение атрибуту, полученному от пользователя. Например, если пользователь вводит имя только строчными или заглавными буквами, вы можете изменить его формат, оставив прописной только первую букву. 
- **Запускать пользовательскую бизнес-логику**. Вы можете активировать нисходящие события в облачных системах для отправки push-уведомлений, обновления корпоративных баз данных, управления разрешениями, аудита баз данных и выполнения других настраиваемых действий.

Соединитель API предоставляет Azure Active Directory с информацией, необходимой для вызова API, включая URL-адрес конечной точки и проверку подлинности. После настройки соединителя API его можно включить для определенного шага в потоке пользователя. Когда пользователь достигает этого этапа в потоке регистрации, соединитель API вызывается и представляется как запрос HTTP POST к API, отправляя сведения о пользователе ("утверждения") в качестве пар "ключ-значение" в теле JSON. Ответ API может повлиять на выполнение потока пользователя. Например, ответ API может блокировать регистрацию пользователя, попросите пользователя повторно ввести сведения или перезаписать и добавить атрибуты пользователя.

## <a name="where-you-can-enable-an-api-connector-in-a-user-flow"></a>Где можно включить соединитель API в потоке пользователя

Существует два места в потоке пользователя, где можно включить соединитель API:

- После входа с помощью поставщика удостоверений
- Перед созданием пользователя

> [!IMPORTANT]
> В обоих случаях соединители API вызываются во время **регистрации**пользователя, а не для входа.

### <a name="after-signing-in-with-an-identity-provider"></a>После входа с помощью поставщика удостоверений

Соединитель API на этом этапе в процессе регистрации вызывается сразу после проверки подлинности пользователя с помощью поставщика удостоверений (например, Google, Facebook, & Azure AD). Этот шаг предшествует ***странице Коллекция атрибутов***, которая является формой, представленной пользователю для сбора атрибутов пользователя. Этот шаг не вызывается, если пользователь регистрируется с помощью локальной учетной записи. Ниже приведены примеры сценариев соединителя API, которые можно включить на этом шаге.

- Используйте адрес электронной почты или федеративный идентификатор, предоставленный пользователем для поиска утверждений в существующей системе. Верните эти утверждения из существующей системы, предварительно заполнив страницу коллекции атрибутов и сделав их доступными для возврата в маркер.
- Реализация списка разрешений или блокировок на основе социальных удостоверений.

### <a name="before-creating-the-user"></a>Перед созданием пользователя

Соединитель API на этом этапе в процессе регистрации вызывается после страницы коллекции атрибутов, если она включена. Этот шаг всегда вызывается перед созданием учетной записи пользователя. Ниже приведены примеры сценариев, которые можно включить на этом этапе во время регистрации.

- Проверьте входные данные пользователя и попросите пользователя повторно отправить данные.
- Блокировка регистрации пользователя на основе данных, вводимых пользователем.
- Выполните проверку личности.
- Запросите внешние системы для существующих данных о пользователе, чтобы вернуть их в маркер приложения или сохранить в Azure AD.


## <a name="next-steps"></a>Дальнейшие шаги
- Узнайте, как [Добавить соединитель API в поток пользователя](add-api-connector.md)
<!-- - Learn how to [add a custom approval system to self-service sign-up](add-approvals.md) -->