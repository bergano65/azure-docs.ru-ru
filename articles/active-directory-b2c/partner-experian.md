---
title: Руководство по настройке Azure Active Directory B2C с помощью Experian
titleSuffix: Azure AD B2C
description: Узнайте, как интегрировать проверку подлинности Azure AD B2C в Experian для проверки идентификации и проверки на основе атрибутов пользователя, чтобы предотвратить мошенничество.
services: active-directory-b2c
author: gargi-sinha
manager: martinco
ms.service: active-directory
ms.workload: identity
ms.topic: how-to
ms.date: 07/22/2020
ms.author: gasinh
ms.subservice: B2C
ms.openlocfilehash: 29116d880a51444eb45a351e2118a07d13873043
ms.sourcegitcommit: cd9754373576d6767c06baccfd500ae88ea733e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2020
ms.locfileid: "94953854"
---
# <a name="tutorial-for-configuring-experian-with-azure-active-directory-b2c"></a>Руководство по настройке Experian с помощью Azure Active Directory B2C

В этом примере учебника мы предоставляем рекомендации по интеграции Azure AD B2C с [Experian](https://www.experian.com/decision-analytics/account-opening-fraud/microsoft-integration). Experian предоставляет разнообразные решения, которые можно найти [здесь](https://www.experian.com/).

В этом примере используется интегрированная цифровая идентификация Experian и угроза риска мошенничества **кросскоре** . Кросскоре — это служба проверки ИДЕНТИФИКАТОРов, которая используется для проверки идентификации пользователя. Он выполняет анализ рисков на основе нескольких фрагментов информации, предоставляемых пользователем во время регистрации. Кросскоре используется, чтобы определить, должен ли пользователь продолжать входить в систему или нет. В анализе рисков Кросскоре можно использовать следующие атрибуты:

- Электронная почта
- IP-адрес
- Заданное имя
- Второе имя
- Surname
- Почтовый адрес
- City
- Область, республика, край, округ
- Почтовый индекс
- Страна или регион
- номер телефона;

## <a name="prerequisites"></a>Предварительные требования

Чтобы приступить к работе, вам потребуется:

- подписка Azure AD; Если у вас нет подписки, вы можете получить [бесплатную учетную запись](https://azure.microsoft.com/free/).

- [Клиент Azure AD B2C](./tutorial-create-tenant.md) , связанный с вашей подпиской Azure.

## <a name="scenario-description"></a>Описание сценария

Интеграция Experian включает следующие компоненты:

- Azure AD B2C — сервер авторизации, отвечающий за проверку учетных данных пользователя, также известный как поставщик удостоверений.

- Experian — служба Experian принимает входные данные, предоставленные пользователем, и проверяет удостоверение пользователя.

- Пользовательский API-интерфейс службы "интерфейс пользователя" — Этот API реализует интеграцию между Azure AD B2C и службой Experian.

Реализация показана на следующей схеме архитектуры.

![снимок экрана для Experian — схема архитектуры](media/partner-experian/experian-architecture-diagram.png)

|Шаг | Описание |
|:-----| :-----------|
| 1. | Пользователь прибывает на странице входа. Пользователь нажимает кнопку Регистрация для создания новой учетной записи и ввода информации на странице. Azure AD B2C собирает атрибуты пользователя.
| 2. | Azure AD B2C вызывает API среднего уровня и передает атрибуты пользователя.
| 3. | API среднего уровня собирает атрибуты пользователя и преобразует их в формат, который может использовать API Experian. Затем отправляет его в Experian.
| 4. | Experian потребляет информацию и обрабатывает ее для проверки идентификации пользователя на основе анализа рисков. Затем он возвращает результат в API среднего уровня.
| 5. | API среднего уровня обрабатывает сведения и отправляет соответствующие сведения в правильном формате JSON для Azure AD B2C.
| 6. | Azure AD B2C получает сведения от API среднего уровня. Если отображается ответ на сбой, пользователю выдается сообщение об ошибке. Если отображается ответ об успешном выполнении, пользователь проходит проверку подлинности и записывается в каталог.

## <a name="onboard-with-experian"></a>Подключение с помощью Experian

1. Чтобы создать учетную запись Experian, обратитесь в [Experian](https://www.experian.com/decision-analytics/account-opening-fraud/microsoft-integration)

2. После создания учетной записи вы получите сведения, необходимые для настройки API. В следующих разделах описывается процесс.

## <a name="configure-azure-ad-b2c-with-experian"></a>Настройка Azure AD B2C с помощью Experian

### <a name="part-1---deploy-the-api"></a>Часть 1. Развертывание API

Разверните предоставленный [код API](https://github.com/azure-ad-b2c/partner-integrations/blob/master/samples/Experian/CrossCoreIntegrationApi/CrossCoreIntegrationApi.sln) в службе Azure. Код можно опубликовать из Visual Studio, следуя этим [инструкциям](/visualstudio/deployment/quickstart-deploy-to-azure?view=vs-2019).

>[!NOTE]
>Вам потребуется URL-адрес развернутой службы, чтобы настроить Azure AD с использованием требуемых параметров.

### <a name="part-2---deploy-the-client-certificate"></a>Часть 2. Развертывание сертификата клиента

Вызов API Experian защищен сертификатом клиента. Этот сертификат клиента будет предоставляться Experian. Следуя инструкциям, указанным в этом [документе](../app-service/environment/certificates.md#private-client-certificate), сертификат необходимо отправить в службу приложений Azure. В примере политики эти ключи используются в процессе.

- Загрузка сертификата

- Задайте `WEBSITE_LOAD_ROOT_CERTIFICATES` ключ с отпечатком сертификата.

### <a name="part-3---configure-the-api"></a>Часть 3. Настройка API

Параметры приложения можно [настроить в службе приложений в Azure](../app-service/configure-common.md#configure-app-settings). С помощью этого метода параметры можно безопасно настроить без их возврата в репозиторий. Необходимо предоставить следующие параметры для API-интерфейса RESTful:

| Параметры приложений | Источник | Примечания |
| :-------- | :------------| :-----------|
|Кросскореконфиг: TenantId | Конфигурация учетной записи Experian |     |
|Кросскореконфиг: Оргкоде | Конфигурация учетной записи Experian |     |
|Кросскоре: значение apiendpoint |Конфигурация учетной записи Experian|  |
|Кросскоре: Клиентреференце | Конфигурация учетной записи Experian | |
| Кросскоре: Моделкоде |Конфигурация учетной записи Experian|
| Кросскоре: Оргкоде | Конфигурация учетной записи Experian |
| Кросскоре: Сигнатурекэй  | Конфигурация учетной записи Experian |
| Кросскоре: TenantId  | Конфигурация учетной записи Experian |
| Кросскоре: CertificateThumbprint | Сертификат Experian |
| Басикаус: Апиусернаме | Определение имени пользователя для API | Используется в конфигурации Екстид |
| Басикаус: Апипассворд | Определение пароля для API | Используется в конфигурации Екстид

### <a name="part-4---create-api-policy-keys"></a>Часть 4. Создание ключей политики API

Ознакомьтесь с этим [документом](./secure-rest-api.md#add-rest-api-username-and-password-policy-keys) и создайте два ключа политики: один для имени пользователя API, а другой — для пароля API, определенного выше для обычной проверки подлинности HTTP.

>[!NOTE]
>Ключи для настройки политик потребуются позже.

### <a name="part-5---replace-the-configuration-values"></a>Часть 5. Замена значений конфигурации

В предоставленных [пользовательских политиках](https://github.com/azure-ad-b2c/partner-integrations/tree/master/samples/Experian/policy)найдите следующие заполнители и замените их соответствующими значениями из своего экземпляра.

|                      Заполнитель                       |                                   Замена значением                                 |                   Пример                    |
| ------------------------------------------------------ | -------------------------------------------------------------------------------- | -------------------------------------------- |
| {your_tenant_name}                                     | Короткое имя вашего клиента                                                           | "йоуртенант" из yourtenant.onmicrosoft.com |
| {your_trustframeworkbase_policy}                       | Azure AD B2C имя политики TrustFrameworkBase                  | B2C_1A_experian_TrustFrameworkBase           |
| {your_tenant_IdentityExperienceFramework_appid}        | Идентификатор приложения IdentityExperienceFramework, настроенного в клиенте Azure AD B2C      | 01234567-89ab-cdef-0123-456789abcdef         |
| {your_tenant_ ProxyIdentityExperienceFramework _appid} | Идентификатор приложения ProxyIdentityExperienceFramework, настроенного в клиенте Azure AD B2C | 01234567-89ab-cdef-0123-456789abcdef         |
| {your_tenant_extensions_appid}                         | Идентификатор приложения для хранилища вашего клиента                                      | 01234567-89ab-cdef-0123-456789abcdef         |
| {your_tenant_extensions_app_objectid}                  | Идентификатор объекта приложения хранилища вашего клиента                                   | 01234567-89ab-cdef-0123-456789abcdef         |
| {your_api_username_key_name}                           | Имя созданного [здесь](#part-4---create-api-policy-keys) ключа имени пользователя             | B2C \_ 1A \_ рестапиусернаме                     |
| {your_api_password_key_name}                           | Имя созданного [здесь](#part-4---create-api-policy-keys) ключа пароля             | B2C \_ 1A \_ рестапипассворд                     |
| {your_app_service_URL}                                 | URL-адрес настроенной службы приложений                                             | `https://yourapp.azurewebsites.net`          |

### <a name="part-6---configure-the-azure-ad-b2c-policy"></a>Часть 6. Настройка политики Azure AD B2C

Инструкции по настройке клиента Azure AD B2C и настройке политик см. в этом [документе](./custom-policy-get-started.md?tabs=applications#custom-policy-starter-pack) .

>[!NOTE]
>Этот пример политики основан на [начальном пакете локальных учетных записей](https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/tree/master/LocalAccounts).

>[!NOTE]
> Рекомендуется, чтобы клиенты добавили уведомление о согласия на страницу коллекции атрибутов. Уведомлять пользователей о том, что сведения будут отправляться сторонним службам для проверки личности.

## <a name="test-the-user-flow"></a>Тестирование потока пользователя

1. Откройте клиент Azure AD B2C и в разделе политики выберите **потоки пользователя**.

2. Выберите ранее созданный **поток пользователя**.

3. Выберите **запустить поток пользователя** и выберите параметры:

   a. **Приложение**: выберите зарегистрированное приложение (пример — JWT)

   b. **URL-адрес ответа**: выберите **URL-адрес перенаправления**

   c. Выберите **Выполнить поток пользователя**.

4. Последовательно выберите процесс регистрации и создайте учетную запись.

5. Выход из журнала

6. Последовательность входа  

7. После ввода **"продолжить"** появится окно головоломки кросскоре.

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения см. в следующих статьях:

- [Пользовательские политики в Azure AD B2C](./custom-policy-overview.md)

- [Приступая к работе с пользовательскими политиками в Azure AD B2C](./custom-policy-get-started.md?tabs=applications)