---
title: Уровни Premium и Standard служебной шины Azure
description: В этой статье описываются уровни Standard и Premium служебной шины Azure. Сравнивает эти уровни и предоставляет технические различия.
ms.topic: conceptual
ms.date: 07/28/2020
ms.openlocfilehash: 31c53a1375078cd5d185945cba55a6e5a6dd5ffb
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "90966785"
---
# <a name="service-bus-premium-and-standard-messaging-tiers"></a>Уровни обмена сообщениями через служебную шину Premium и Standard

Обмен сообщениями через служебную шину включает такие сущности, как очереди и темы, а также объединяет возможности корпоративного обмена сообщениями с расширенной семантикой публикаций и подписок в масштабе облака. Обмен сообщениями через служебную шину используется в качестве средства коммуникации во многих сложных облачных решениях.

Уровень " *премиум* " обмена сообщениями служебной шины обеспечивает общее число запросов клиентов, связанных с масштабированием, производительностью и доступностью для критически важных приложений. Для использования в рабочей среде рекомендуется уровень "Премиум". Несмотря на практически идентичные наборы функций, эти два уровня обмена сообщениями через служебную шину предназначены для использования в разных условиях.

Некоторые высокоуровневые различия представлены в следующей таблице.

| Premium | Standard |
| --- | --- |
| Высокая пропускная способность |Переменная пропускная способность |
| Прогнозируемая производительность |Переменная задержка |
| Фиксированные цены |Переменная оплата по мере использования |
| Возможность увеличения и уменьшения масштаба рабочей нагрузки |Недоступно |
| Размер сообщения до 1 МБ. Это ограничение может возникать в будущем. Последние важные обновления службы см. [в блоге по обмену сообщениями в Azure](https://techcommunity.microsoft.com/t5/messaging-on-azure/bg-p/MessagingonAzureBlog). |Размер сообщения до 256 КБ |

**Обмен сообщениями через служебную шину ценовой категории "Премиум"** обеспечивает изоляцию ресурсов на уровне процессора и памяти, чтобы рабочая нагрузка каждого клиента выполнялась изолированно. Этот контейнер ресурсов называется *единицей обмена сообщениями*. Для каждого премиального пространства имен выделяется хотя бы одна единица обмена сообщениями. Для каждого пространства имен уровня Premium служебной шины можно приобрести 1, 2, 4 или 8 единиц обмена сообщениями. Одна рабочая нагрузка или сущность может охватывать несколько единиц обмена сообщениями и количество единиц обмена сообщениями, которые могут быть изменены в. В результате вы получаете решение на базе служебной шины с прогнозируемой и повторяемой производительностью.

Оно отличается не только более предсказуемой производительностью и высокой доступностью, но и более высокой скоростью работы. Служба обмена сообщениями Service Bus Premium основана на подсистеме хранилища, представленной в [концентраторах событий Azure](https://azure.microsoft.com/services/event-hubs/). Уровень "Премиум" обеспечивает более высокую скорость передачи данных при пиковой нагрузке, чем уровень "Стандартный".

## <a name="premium-messaging-technical-differences"></a>Технические отличия обмена сообщениями уровня Premium

Ниже представлены некоторые различия между уровнями обмена сообщениями "Премиум" и "Стандартный"

### <a name="partitioned-queues-and-topics"></a>Секционированные очереди и разделы

Секционированные очереди и разделы не поддерживаются в обмене сообщениями уровня "Премиум". Дополнительные сведения о секционировании см. в статье [Секционированные очереди и разделы](service-bus-partitioning.md).

### <a name="express-entities"></a>Экспресс-сущности

Так как обмен сообщениями уровня "Премиум" выполняется в изолированной среде выполнения, Экспресс-сущности не поддерживаются в пространствах имен уровня "Премиум". Дополнительные сведения об экспресс-функции см. в разделе о свойстве [QueueDescription.EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress#Microsoft_ServiceBus_Messaging_QueueDescription_EnableExpress).

Если у вас есть код, запущенный в рамках обмена сообщениями уровня "Стандартный", который необходимо перенести на уровень "Премиум", убедитесь, что для свойства [EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress#Microsoft_ServiceBus_Messaging_QueueDescription_EnableExpress) задано значение **false** (значение по умолчанию).

## <a name="premium-messaging-resource-usage"></a>Использование ресурсов обмена ресурсами уровня "Премиум"
Как правило, любая операция с сущностью может вызвать использование ЦП и памяти. Ниже приведены некоторые из этих операций. 

- Операции управления, такие как CRUD (создание, получение, обновление и удаление) для очередей, разделов и подписок.
- Операции среды выполнения (отправка и получение сообщений)
- Мониторинг операций и предупреждений

Дополнительные сведения об использовании ЦП и памяти не изменяются. Для уровня обмена сообщениями Premium существует одна цена на единицу сообщения.

Загрузка ЦП и памяти отправляются и отображаются по следующим причинам. 

- Обеспечение прозрачности системных внутренних компонентов
- Узнайте о емкости приобретенных ресурсов.
- Планирование емкости, помогающее решить увеличение/уменьшение масштаба.

## <a name="messaging-unit---how-many-are-needed"></a>Единица обмена сообщениями — сколько требуется?

При подготовке пространства имен уровня "Премиум" служебной шины Azure необходимо указать число выделенных единиц обмена сообщениями. Эти единицы обмена сообщениями являются выделенными ресурсами, выделенными для пространства имен.

Число единиц обмена сообщениями, выделенных для пространства имен уровня "Премиум" служебной шины, можно **динамически скорректировать** , чтобы учесть изменение (увеличение или уменьшение) рабочих нагрузок.

При выборе количества единиц обмена сообщениями для архитектуры необходимо учитывать ряд факторов.

- Начните с ***1 или 2 единиц обмена сообщениями*** , выделенных для пространства имен.
- Изучите метрики использования ЦП в [метриках использования ресурсов](service-bus-metrics-azure-monitor.md#resource-usage-metrics) для пространства имен.
    - Если загрузка ЦП ***ниже 20%***, вы можете ***уменьшить*** количество единиц обмена сообщениями, выделенных для пространства имен.
    - Если загрузка ЦП превышает ***70%***, ваше приложение будет выгодно ***масштабировать*** количество единиц обмена сообщениями, выделенных для пространства имен.

Сведения о настройке пространства имен служебной шины для автоматического масштабирования (увеличение или уменьшение количества единиц обмена сообщениями) см. в разделе [Автоматическое обновление единиц обмена сообщениями](automate-update-messaging-units.md).

> [!NOTE]
> **Масштабирование** ресурсов, выделенных для пространства имен, может быть либо вытесненным, либо реактивным.
>
>  * **Вытесненность**. Если ожидается дополнительная рабочая нагрузка (из-за сезонности или тенденций), можно приступить к выделению дополнительных единиц обмена сообщениями пространству имен до попадания рабочих нагрузок.
>
>  * **Реактивно**. Если дополнительные рабочие нагрузки определяются путем изучения метрик использования ресурсов, то дополнительные ресурсы могут быть выделены пространству имен для включения возрастающего спроса.
>
> Счетчики выставления счетов для служебной шины задаются ежечасно. В случае увеличения масштаба вы платите только за дополнительные ресурсы в течение часов, которые использовались.
>

## <a name="get-started-with-premium-messaging"></a>Приступая к работе с обменом сообщениями уровня "Премиум"

Приступить к работе с обменом сообщениями уровня "Премиум" так же просто, как и с обменом сообщениями уровня "Стандартный". Начните с [создания пространства имен](service-bus-create-namespace-portal.md) на [портале Azure](https://portal.azure.com). Убедитесь, что в разделе **ценовая**Категория выбран вариант **Premium** . Для просмотра дополнительных сведений о каждом уровне нажмите кнопку **Просмотреть подробные сведения о ценах**.

![create-premium-namespace][create-premium-namespace]

Вы можете также создать [пространство имен уровня "Премиум", используя шаблоны Azure Resource Manager](https://azure.microsoft.com/resources/templates/101-servicebus-pn-ar/).

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные сведения об обмене сообщениями через служебную шину см. в следующих статьях:

- [Автоматическое обновление единиц обмена сообщениями](automate-update-messaging-units.md).
- [Общие сведения о обмене сообщениями служебной шины Azure Premium (запись блога)](https://azure.microsoft.com/blog/introducing-azure-service-bus-premium-messaging/)
- [Introducing Azure Service Bus Premium Messaging (Channel9)](https://channel9.msdn.com/Blogs/Subscribe/Introducing-Azure-Service-Bus-Premium-Messaging) (Общие сведения об обмене сообщениями через служебную шину Azure уровня "Премиум" (Channel9))

<!--Image references-->

[create-premium-namespace]: ./media/service-bus-premium-messaging/select-premium-tier.png
