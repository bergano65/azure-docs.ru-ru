---
title: Часто задаваемые вопросы о служебной шине Azure | Документация Майкрософт
description: Ответы на некоторые часто задаваемые вопросы о служебной шине Azure.
services: service-bus-messaging
author: axisc
manager: timlt
editor: spelluru
ms.service: service-bus-messaging
ms.topic: article
ms.date: 01/23/2019
ms.author: aschhab
ms.openlocfilehash: 41a5f08be833d1235146d6e748580751af2c9d73
ms.sourcegitcommit: 8313d5bf28fb32e8531cdd4a3054065fa7315bfd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2019
ms.locfileid: "59046093"
---
# <a name="service-bus-faq"></a>Часто задаваемые вопросы о служебной шине

В этой статье обсуждаются некоторые часто задаваемые вопросы о служебной шине Microsoft Azure. Вы также можете посетить страницу [Часто задаваемые вопросы о поддержке Azure](https://azure.microsoft.com/support/faq/), чтобы получить общие сведения о ценах и поддержке Azure.

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

## <a name="general-questions-about-azure-service-bus"></a>Общие вопросы о служебной шине Azure
### <a name="what-is-azure-service-bus"></a>Что такое служебная шина Azure?
[Служебная шина Azure](service-bus-messaging-overview.md) — это облачная платформа асинхронного обмена сообщениями, которая позволяет отправлять данные между несвязанными системами. Корпорация Майкрософт предлагает эту возможность в виде услуги, а значит вам не нужно развертывать собственное оборудование для ее использования.

### <a name="what-is-a-service-bus-namespace"></a>Что такое пространство имен служебной шины?
[Пространство имен](service-bus-create-namespace-portal.md) предоставляет контейнер для адресации ресурсов служебной шины в вашем приложении. Создание пространства имен является первым и обязательным шагом перед началом работы со служебной шиной.

### <a name="what-is-an-azure-service-bus-queue"></a>Что такое очередь служебной шины Azure?
[Очередь служебной шины](service-bus-queues-topics-subscriptions.md) — это сущность, в которой сохраняются сообщения. Очереди целесообразно использовать при наличии нескольких приложений или нескольких частей распределенного приложения, которые должны взаимодействовать друг с другом. Очередь подобна центру распределения, куда поступают несколько продуктов (сообщений), которые затем отправляются из этого расположения.

### <a name="what-are-azure-service-bus-topics-and-subscriptions"></a>Что такое разделы и подписки служебной шины Azure?
Раздел можно представить в виде очереди. При использовании нескольких подписок он становится расширенной моделью обмена сообщениями. По сути, это инструмент связи по принципу "один ко многим". В рамках этой модели публикации и подписки (*pub/sub*) сообщение может быть отправлено из приложения в раздел с несколькими подписками, а затем получено несколькими приложениями.

### <a name="what-is-a-partitioned-entity"></a>Что такое секционированная сущность?
Обычная очередь или раздел обрабатываются одним брокером сообщений и сохраняются в одном хранилище сообщений. Поддерживаемая только в каналах обмена сообщениями уровней "Базовый" и "Стандартный", [секционированная очередь или раздел](service-bus-partitioning.md) обрабатывается несколькими брокерами сообщений и хранится в нескольких хранилищах сообщений. Это означает, что общая пропускная способность секционированной очереди или раздела больше не ограничивается производительностью одного брокера сообщений или хранилища сообщений. Кроме того, при возникновении временного сбоя хранилища сообщений секционированная очередь или раздел останутся доступными.

При использовании секционированных сущностей их упорядоченность не гарантируется. Если раздел недоступен, вы по-прежнему можете отправлять и получать сообщения из других секций.

 Секционированные сущности больше не поддерживаются в [номере SKU уровня "Премиум"](service-bus-premium-messaging.md). 

## <a name="best-practices"></a>Рекомендации
### <a name="what-are-some-azure-service-bus-best-practices"></a>Рекомендации по работе со служебной шиной Azure
См. [рекомендации по повышению производительности с помощью обмена сообщениями через служебную шину][Best practices for performance improvements using Service Bus]. В этой статье описывается, как оптимизировать производительность обмена сообщениями.

### <a name="what-should-i-know-before-creating-entities"></a>Что необходимо знать перед созданием сущностей?
Приведенные ниже свойства очереди и раздела являются неизменяемыми. Учитывайте это ограничение при подготовке сущностей, так как эти свойства нельзя изменить без создания новой сущности для замены.

* Секционирование
* Сеансы:
* Обнаружение дубликатов
* экспресс-сущность.

## <a name="pricing"></a>Цены
В этом разделе содержатся ответы на некоторые часто задаваемые вопросы о ценах на служебную шину.

В [этой статье](https://azure.microsoft.com/pricing/details/service-bus/) объясняются единицы измерения, на основе которых выставляются счета за использование служебной шины. Подробные сведения о ценах смотрите [здесь](https://azure.microsoft.com/pricing/details/service-bus/).

Вы также можете посетить страницу [Часто задаваемые вопросы о поддержке Azure](https://azure.microsoft.com/support/faq/), чтобы получить общие сведения о ценах на Azure. 

### <a name="how-do-you-charge-for-service-bus"></a>Как выставляется цена на служебную шину?
Все сведения о ценах на использование служебной шины приведены на [странице с ценами][Pricing overview]. Помимо указанной платы, также взимается плата за связанные операции передачи данных, исходящих из центра обработки данных, в котором подготавливается ваше приложение.

### <a name="what-usage-of-service-bus-is-subject-to-data-transfer-what-is-not"></a>Какое использование служебной шины считается передачей данных? А какое не считается?
Любая передача данных в пределах заданного региона Azure выполняется бесплатно, как и любая входящая передача данных. Передача данных за пределы региона оплачивается как исходящий трафик. Соответствующие тарифы указаны [здесь](https://azure.microsoft.com/pricing/details/bandwidth/).

### <a name="does-service-bus-charge-for-storage"></a>Взимает ли служебная шина плату за использование хранилища?
Нет, служебная шина не взимает плату за использование хранилища. Тем не менее существует квота, ограничивающая максимальный объем данных, которые могут быть сохранены в каждой очереди или разделе. См. следующий раздел часто задаваемых вопросов.

## <a name="quotas"></a>Квоты

Список ограничений и квот на служебную шину доступен в этом [обзоре квот служебной шины][Quotas overview].

### <a name="does-service-bus-have-any-usage-quotas"></a>Есть ли у служебной шины квоты использования?
По умолчанию для любой облачной службы Майкрософт устанавливается квота совокупного месячного использования в рамках всех подписок клиента. Если вам потребуется больше ресурсов, вы можете в любой момент обратиться в службу поддержки клиентов и договориться об изменении квот в соответствии с вашими потребностями. Для служебной шины суммарная квота на использование составляет 5 миллиардов сообщений в месяц.

Хотя корпорация Майкрософт оставляет за собой право отключить учетную запись клиента, превысившего месячные квоты на использование, перед выполнением каких-либо действий мы отправляем уведомление по электронной почте и несколько раз пытаемся связаться с клиентом. Клиенты, превысившие свои квоты, несут финансовую ответственность за пользование службой сверх установленных ограничений.

Как и в случае с другими службами в Azure, служебная шина использует набор особых квот для обеспечения справедливого использования ресурсов. Дополнительные сведения об этих квотах см. в статье [Обзор квот на служебную шину][Quotas overview].

### <a name="how-to-handle-messages-of-size--1-mb"></a>Как обрабатывать сообщения, длина которых превышает 1 МБ?
Службы сообщений служебной шины (очереди, темы и подписки) позволяют приложениям отправлять сообщения размером до 256 КБ (ценовая категория "Стандартный") или до 1 МБ (ценовая категория "Премиум"). Если вы используете сообщения, размер которых превышает 1 МБ, используйте шаблон claim check (проверка требования), описанный в [этой записи блога](https://www.serverless360.com/blog/deal-with-large-service-bus-messages-using-claim-check-pattern).

## <a name="troubleshooting"></a>Устранение неполадок
### <a name="why-am-i-not-able-to-create-a-namespace-after-deleting-it-from-another-subscription"></a>Почему я не могу создать пространство имен после удаления его из другой подписки? 
При удалении пространства имен из подписки подождите 4 часа, прежде чем создать его заново с тем же именем в другой подписке. Иначе можно получить сообщение об ошибке `Namespace already exists`. 

### <a name="what-are-some-of-the-exceptions-generated-by-azure-service-bus-apis-and-their-suggested-actions"></a>Какие исключения порождаются интерфейсами API служебной шины Azure? Какие действия можно предпринять в отношении этих исключений?
Список возможных исключений служебной шины приведен в разделе [Общие сведения об исключениях][Exceptions overview].

### <a name="what-is-a-shared-access-signature-and-which-languages-support-generating-a-signature"></a>Что такое подписанный URL-адрес? На каких языках можно создавать подписи?
Подписи общего доступа представляют собой механизм проверки подлинности на основе безопасных хэшей SHA-256 или URI. Дополнительные сведения о том, как создавать собственные подписи в Node.js, PHP, Java и C\#, см. в статье [Аутентификация служебной шины с помощью подписанных URL-адресов][Shared Access Signatures].

## <a name="subscription-and-namespace-management"></a>Управление подпиской и пространством имен
### <a name="how-do-i-migrate-a-namespace-to-another-azure-subscription"></a>Как перенести пространство имен в другую подписку Azure?

Вы можете переместить пространство имен из одной подписки Azure в другую, используя [портал Azure](https://portal.azure.com) или выполняя команды PowerShell. При перемещении пространство имен уже должно быть активно. Пользователь, который выполняет команды, должен обладать правами администратора как в исходной, так и в целевой подписках.

#### <a name="portal"></a>Microsoft Azure

Чтобы использовать портал Azure для переноса пространств имен служебной шины в другую подписку, следуйте [этим инструкциям](../azure-resource-manager/resource-group-move-resources.md#use-portal). 

#### <a name="powershell"></a>PowerShell

Следующая последовательность команд PowerShell перемещает пространство имен из одной подписки Azure в другую. Для выполнения этой операции пространство имен уже должно быть активным, а пользователь, выполняющий команды PowerShell, должен обладать правами администратора в исходной и целевой подписках.

```powershell
# Create a new resource group in target subscription
Select-AzSubscription -SubscriptionId 'ffffffff-ffff-ffff-ffff-ffffffffffff'
New-AzResourceGroup -Name 'targetRG' -Location 'East US'

# Move namespace from source subscription to target subscription
Select-AzSubscription -SubscriptionId 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'
$res = Find-AzResource -ResourceNameContains mynamespace -ResourceType 'Microsoft.ServiceBus/namespaces'
Move-AzResource -DestinationResourceGroupName 'targetRG' -DestinationSubscriptionId 'ffffffff-ffff-ffff-ffff-ffffffffffff' -ResourceId $res.ResourceId
```

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о служебной шине см. в следующих статьях:

* [Знакомство с Azure Service Bus Premium (запись блога)](https://azure.microsoft.com/blog/introducing-azure-service-bus-premium-messaging/)
* [Знакомство с Azure служебную шину Premium (Channel9)](https://channel9.msdn.com/Blogs/Subscribe/Introducing-Azure-Service-Bus-Premium-Messaging)
* [Обзор служебной шины](service-bus-messaging-overview.md)
* [Начало работы с очередями служебной шины](service-bus-dotnet-get-started-with-queues.md)

[Best practices for performance improvements using Service Bus]: service-bus-performance-improvements.md
[Best practices for insulating applications against Service Bus outages and disasters]: service-bus-outages-disasters.md
[Pricing overview]: https://azure.microsoft.com/pricing/details/service-bus/
[Quotas overview]: service-bus-quotas.md
[Exceptions overview]: service-bus-messaging-exceptions.md
[Shared Access Signatures]: service-bus-sas.md
