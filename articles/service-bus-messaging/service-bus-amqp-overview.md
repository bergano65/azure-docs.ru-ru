---
title: Обзор AMQP 1,0 в служебной шине Azure
description: Узнайте, как служебная шина Azure поддерживает Расширенный протокол управления очередью сообщений (AMQP) — открытый стандартный протокол.
ms.topic: article
ms.date: 11/20/2020
ms.openlocfilehash: a643869d7d89b287e899b1eab89c5b9ec11856e5
ms.sourcegitcommit: 1d366d72357db47feaea20c54004dc4467391364
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2020
ms.locfileid: "95396813"
---
# <a name="amqp-10-support-in-service-bus"></a>Поддержка AMQP 1.0 в служебной шине
Облачная служба служебной шины Azure использует [протокол расширенных очередей сообщений (AMQP) 1,0](http://docs.oasis-open.org/amqp/core/v1.0/amqp-core-overview-v1.0.html) в качестве основного средства связи. Корпорация Майкрософт сотрудничает с партнерами по отрасли, а также клиентам и поставщикам конкурирующих брокеров обмена сообщениями, чтобы разрабатывать и развивать AMQP за последние десять лет. новые расширения разрабатываются в [техническом комитете Oasis AMQP](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=amqp). AMQP 1,0 — это стандарт ISO и IEC ([iso 19464:20149](https://www.iso.org/standard/64955.html)). 

AMQP позволяет создавать кросс-платформенные гибридные приложения с помощью протокола Open Standard, не зависящего от поставщика и не зависящего от реализации. Можно создавать приложения, использующие компоненты, разработанные на разных языках и различных платформах и выполняемые в других операционных системах. Все эти компоненты могут подключаться к шине Service Bus и легко, эффективно и достоверно обмениваться структурированными бизнес-сообщениями.

## <a name="introduction-what-is-amqp-10-and-why-is-it-important"></a>Введение. Что такое AMQP 1.0 и почему этот протокол так важен?
Обычно ориентированное на сообщения межплатформенное программное обеспечение использует собственные протоколы для обмена данными между клиентскими приложениями и брокерами. Это означает, что после выбора брокера сообщений конкретного поставщика для подключения клиентских приложениях к этому брокеру необходимо использовать библиотеки этого поставщика. Это создает определенную зависимость от этого поставщика, так как перенос приложения в другой продукт потребует изменения кода всех подключенных приложений. В сообществе Java стандарты API для конкретного языка, такие как служба сообщений Java (JMS) и абстрактная платформа, были устранены, что довольно мало, но имеют очень узкие области функций и не могут исключать разработчиков, использующих другие языки.

Кроме того, подключение брокеров сообщений от различных поставщиков достаточно сложно реализовать. Обычно для этого требуется создание мостов на уровне приложений, чтобы перемещать сообщения из одной системы в другую, а также чтобы выполнять преобразование между собственными форматами сообщений этих брокеров. Это является общим требованием, например, при обеспечении нового унифицированного интерфейса для старых разрозненных систем или при интеграции ИТ-систем после слияния. AMQP позволяет подключать брокеры напрямую, например, с помощью маршрутизаторов, например [Apache Qpid Dispatch](https://qpid.apache.org/components/dispatch-router/index.html) или Service Broker native "шовелс", подобно одному из [RabbitMQ](service-bus-integrate-with-rabbitmq.md).

Индустрия программного обеспечения — это быстро меняющаяся отрасль, новые языки программирования и платформы приложений иногда появляются с ошеломляющей скоростью. Аналогично, со временем меняются требования ИТ-систем, и разработчики хотят пользоваться преимуществами новейших платформ. Но иногда выбранный поставщик системы обмена сообщениями не поддерживает эти платформы. Если протоколы обмена сообщениями являются собственными, другие пользователи не могут предоставлять библиотеки для этих новых платформ. Таким образом, чтобы продолжить использование продукта обмена сообщениями, необходимо применять такие подходы, как создание шлюзов или мостов.

Именно эти проблемы послужили поводом для разработки протокола AMQP 1.0. Первоначально он был разработан в компании JP Morgan, которая, как и большинство финансовых компаний, чрезвычайно активно использует ориентированное на сообщения межплатформенное программное обеспечение. Цель была проста — создать протокол обмена сообщениями на основе открытых стандартов, который позволил бы создавать приложения на основе сообщений, используя компоненты, разработанные на разных языках программирования, на разных платформах и в различных операционных системах — лучшие компоненты от множества поставщиков.

## <a name="amqp-10-technical-features"></a>Технические характеристики AMQP 1.0
AMQP 1.0 — это эффективный и надежный протокол обмена сообщениями на уровне соединения, который можно использовать для создания надежных кроссплатформенных приложений для обмена сообщениями. Цель этого протокола проста — определить механизм безопасной, надежной и эффективной передачи сообщений между двумя сторонами. Сами сообщения кодируются, используя переносимое представление данных, позволяющее разнородным отправителям и получателям с полной достоверностью обмениваться структурированными бизнес-сообщениями. Ниже приведен перечень наиболее важных показателей.

* **Эффективный**. AMQP 1.0 является протоколом с установлением соединения, который использует двоичное кодирование для инструкций протокола и передаваемых с его помощью бизнес-сообщений. Для максимального использования сети и соединенных компонентов он поддерживает сложные схемы управления потоком. С другой стороны, этот протокол был разработан для обеспечения равновесия между эффективностью, гибкостью и возможностями взаимодействия.
* **Надежный**. Протокол AMQP 1.0 позволяет обмениваться сообщениями с различными уровнями гарантии надежности, от "отправил и забыл" до надежной доставки с однократным подтверждением.
* **Гибкий**. AMQP 1.0 является гибким протоколом, который можно использовать для поддержки различных топологий. Один и тот же протокол можно использовать для взаимодействия клиент-клиент, клиент-брокер и брокер-брокер.
* **Независимый от модели брокера**. Спецификация 1.0 AMQP не предъявляет никаких требований к модели обмена сообщениями, используемой брокером. Это означает, что можно легко добавить поддержку AMQP 1.0 для существующих брокеров сообщений.

## <a name="amqp-10-is-a-standard-with-a-capital-s"></a>AMQP 1.0 — это Стандарт (с заглавной буквы С)
AMQP 1.0 — это международный стандарт, утвержденный организациями ISO и IEC в качестве стандарта ISO/IEC 19464:2014.

AMQP 1.0 разрабатывался с 2008 г. активной группой, включающей свыше 20 компаний, среди которых были как поставщики технологий, так и конечные пользователи. В течение этого времени пользовательские компании внесли свой вклад, определив требования, предъявляемые реальным бизнесом, а поставщики технологий довели протокол до соответствия этим требованиям. На протяжении всего процесса поставщики участвовали в семинарах, сотрудничая для проверки возможности взаимодействия между разработанными реализациями.

В октябре 2011 г. функции разработки перешли к техническому комитету Организации продвижения структурированных информационных стандартов (Organization for the Advancement of Structured Information Standards, OASIS). В результате в октябре 2012 г. был выпущен Стандарт AMQP 1.0 OASIS. В разработке стандарта техническим комитетом принимали участие следующие компании:

* **Поставщики технологий**: Axway Software, Huawei Technologies, IIT Software, INETCO Systems, Kaazing, Microsoft, Mitre Corporation, Primeton Technologies, Progress Software, Red Hat, SITA, Software AG, Solace Systems, VMware, WSO2, Zenika.
* **Пользовательские компании**: Bank of America, Credit Suisse, Deutsche Boerse, Goldman Sachs, JPMorgan Chase.

Текущие стулья [OASIS AMQP Technical Комитет] (( https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=amqp) представляет Red Hat и Microsoft.

Ниже приведены некоторые из часто упоминаемых преимуществ открытых стандартов:

* Уменьшение вероятности привязки к поставщику
* Совместимость
* Широкая доступность библиотек и инструментария
* Защита от устаревания
* Доступность опытного персонала
* Снижение риска и возможность управления им

## <a name="amqp-10-and-service-bus"></a>Протокол AMQP 1.0 и служебная шина
Поддержка AMQP 1,0 в служебной шине Azure означает, что вы можете использовать службу очереди служебной шины и функции обмена сообщениями с посредником для публикации и подписки из различных платформ с помощью эффективного двоичного протокола. Кроме того, можно создавать приложения, содержащие компоненты, созданные с использованием разнообразных языков, платформ и операционных систем.

На приведенной ниже схеме показан пример развертывания, в котором Java-клиенты, работающие в среде Linux и написанные с использованием стандартного API JMS (Java Message Service), и клиенты .NET, работающие под управлением Windows, обмениваются сообщениями по шине Service Bus с помощью AMQP 1.0.

![На схеме показана одна служебная шина для обмена сообщениями с двумя средами Linux и двумя средами Windows.][0]

**Рисунок 1. Пример сценария развертывания, показывающий межплатформенный обмен сообщениями с использованием служебной шины и протокола AMQP 1.0**

Все поддерживаемые клиентские библиотеки служебной шины, доступные через пакет Azure SDK, используют AMQP 1,0.

- [Служебная шина Azure для .NET](https://docs.microsoft.com/dotnet/api/overview/azure/service-bus?view=azure-dotnet&preserve-view=true)
- [Библиотеки служебной шины Azure для Java](https://docs.microsoft.com/java/api/overview/azure/servicebus?view=azure-java-stable&preserve-view=true)
- [Поставщик служебной шины Azure для Java JMS 2,0](how-to-use-java-message-service-20.md)
- [Модули служебной шины Azure для JavaScript и TypeScript](https://docs.microsoft.com/javascript/api/overview/azure/service-bus?view=azure-node-latest&preserve-view=true)
- [Библиотеки служебной шины Azure для Python](https://docs.microsoft.com/python/api/overview/azure/servicebus?view=azure-python&preserve-view=true)

Кроме того, служебную шину можно использовать из любого стека протокола, совместимого с AMQP 1,0:

| Язык | Библиотека |
| --- | --- |
| Java | [Apache Qpid Proton-J](https://qpid.apache.org/proton/index.html) |
| C/C++ |[Azure UAMQP C](https://github.com/azure/azure-uamqp-c/), [Apache Qpid Proton-C](https://qpid.apache.org/proton/index.html) |
| Python |[Azure uAMQP для Python](https://github.com/azure/azure-uamqp-python/), [Apache Qpid Proton Python](https://qpid.apache.org/releases/qpid-proton-0.32.0/proton/python/docs/overview.html) |
| PHP | [Azure uAMQP для PHP](https://github.com/vsouz4/azure-uamqp-php/) |
| Ruby | [Apache Qpid Proton Ruby](https://github.com/apache/qpid-proton/tree/master/ruby) |
| Go | [Azure Go AMQP](https://github.com/Azure/go-amqp), [Apache Qpid Proton Go](https://github.com/apache/qpid-proton/tree/master/go/examples)
| C#/F #/VB | [AMQP .NET Lite](https://github.com/Azure/amqpnetlite), [Apache узлов AMQP](https://github.com/apache/activemq-nms-amqp)|
| JavaScript или узел | [рхеа](https://github.com/grs/rhea) |

**Рисунок 2. Таблица клиентских библиотек AMQP 1.0**

## <a name="summary"></a>Сводка
* AMQP 1.0 — это открытый и надежный протокол обмена сообщениями, который можно использовать для создания кроссплатформенных гибридных приложений. AMQP 1.0 является стандартом OASIS.

## <a name="next-steps"></a>Дальнейшие действия
Хотите узнать больше? Перейдите по следующим ссылкам:

* [Использование служебной шины на платформе .NET с протоколом AMQP]
* [Использование служебной шины на платформе Java с протоколом AMQP]
* [Установка Apache Qpid Proton-C на виртуальной машине Linux в Azure

[0]: ./media/service-bus-amqp-overview/service-bus-amqp-1.png
[Использование служебной шины на платформе .NET с протоколом AMQP]: service-bus-amqp-dotnet.md
[Использование служебной шины на платформе Java с протоколом AMQP]: ./service-bus-java-how-to-use-jms-api-amqp.md
[Установка Apache Qpid Proton-C на виртуальной машине Linux в Azure]:: 
