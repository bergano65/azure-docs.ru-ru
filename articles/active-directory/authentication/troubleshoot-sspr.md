---
title: Устранение неполадок самостоятельного сброса пароля в Azure Active Directory
description: Узнайте, как устранять распространенные проблемы и способы их устранения при самостоятельном сбросе пароля в Azure Active Directory
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: troubleshooting
ms.date: 08/26/2020
ms.author: joflore
author: MicrosoftGuyJFlo
manager: daveba
ms.reviewer: rhicock
ms.collection: M365-identity-device-management
ms.openlocfilehash: 5ef46cf0947f1ea31c74a6d189b5bdf00fea44fc
ms.sourcegitcommit: d103a93e7ef2dde1298f04e307920378a87e982a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "91963828"
---
# <a name="troubleshoot-self-service-password-reset-in-azure-active-directory"></a>Устранение неполадок самостоятельного сброса пароля в Azure Active Directory

Azure Active Directory (Azure AD) самостоятельный сброс пароля (SSPR) позволяет пользователям сбрасывать пароли в облаке.

При возникновении проблем с SSPR могут возникнуть следующие действия по устранению неполадок и распространенные ошибки. Если вы не можете найти ответ на проблему, [наши группы поддержки всегда доступны](#contact-microsoft-support) для дальнейшей помощи.

## <a name="sspr-configuration-in-the-azure-portal"></a>Конфигурация SSPR в портал Azure

Если у вас возникли проблемы при просмотре или настройке параметров SSPR в портал Azure, ознакомьтесь со следующими действиями по устранению неполадок:

### <a name="i-dont-see-the-password-reset-section-under-azure-ad-in-the-azure-portal"></a>Раздел **Сброс пароля** не отображается в области Azure AD на портале Azure.

Если администратору, выполняющему операцию, не назначена лицензия Azure AD, вы не увидите пункт меню " **Сброс пароля** ".

Чтобы назначить лицензию для рассматриваемой учетной записи администратора, выполните действия по [назначению, проверке и устранению проблем с лицензиями](../users-groups-roles/licensing-groups-assign.md#step-1-assign-the-required-licenses).

### <a name="i-dont-see-a-particular-configuration-option"></a>Не отображается конкретный параметр конфигурации.

Многие элементы пользовательского интерфейса скрываются до тех пор, пока они не понадобятся. Убедитесь, что параметр включен, прежде чем искать конкретные параметры конфигурации.

### <a name="i-dont-see-the-on-premises-integration-tab"></a>Вкладка **Интеграция с локальной средой** не отображается.

Локальная обратная запись паролей отображается только в том случае, если вы скачали Azure AD Connect и настроили эту функцию.

Дополнительные сведения см. в статье [Приступая к работе с Azure AD Connect](../hybrid/how-to-connect-install-express.md).

## <a name="sspr-reporting"></a>Отчеты SSPR

При возникновении проблем с SSPR Reporting в портал Azure ознакомьтесь со следующими действиями по устранению неполадок.

### <a name="i-dont-see-any-password-management-activity-types-in-the-self-service-password-management-audit-event-category"></a>В категории событий аудита **самостоятельного управления паролями** не отображаются типы действий по управлению паролями.

Это может произойти, если администратору, выполняющему операцию, не назначена лицензия Azure AD.

Чтобы назначить лицензию для рассматриваемой учетной записи администратора, выполните действия по [назначению, проверке и устранению проблем с лицензиями](../users-groups-roles/licensing-groups-assign.md#step-1-assign-the-required-licenses).

### <a name="user-registrations-show-multiple-times"></a>Регистрации пользователя отображаются несколько раз.

Когда пользователь регистрируется, в настоящее время записывается каждый отдельный фрагмент данных, зарегистрированный как отдельное событие.

Если необходимо агрегировать эти данные и обеспечить гибкость при их просмотре, можно загрузить отчет и открыть данные в виде сводной таблицы в Excel.

## <a name="sspr-registration-portal"></a>Портал регистрации SSPR

Если у пользователей возникают проблемы с регистрацией для SSPR, ознакомьтесь со следующими действиями по устранению неполадок.

### <a name="the-directory-isnt-enabled-for-password-reset-the-user-may-see-an-error-that-reports-your-administrator-has-not-enabled-you-to-use-this-feature"></a>Каталог не поддерживает сброс пароля. Пользователь может увидеть сообщение об ошибке «администратор не включил использование этой функции».

Можно включить SSPR для всех пользователей, пользователей или для выбранных групп пользователей. В настоящее время SSPR можно включить только для одной группы Azure AD с помощью портала Azure. Для более широкого развертывания SSPR поддерживаются вложенные группы. Убедитесь, что пользователям в выбранных группах назначены соответствующие лицензии.

В портал Azure измените конфигурацию с **включенной поддержкой самостоятельного сброса пароля** на *выбранную* или *все* , а затем нажмите кнопку **сохранить**.

### <a name="the-user-doesnt-have-an-azure-ad-license-assigned-the-user-may-see-an-error-that-reports-your-administrator-has-not-enabled-you-to-use-this-feature"></a>Пользователю не назначена лицензия Azure AD. Пользователь может увидеть сообщение об ошибке «администратор не включил использование этой функции».

В настоящее время SSPR можно включить только для одной группы Azure AD с помощью портала Azure. Для более широкого развертывания SSPR поддерживаются вложенные группы. Убедитесь, что пользователям в выбранных группах назначены соответствующие лицензии. Ознакомьтесь с предыдущим шагом устранения неполадок, чтобы включить SSPR в соответствии с требованиями.

Также ознакомьтесь с действиями по устранению неполадок, чтобы убедиться, что администратору, выполняющему параметры конфигурации, назначена лицензия. Чтобы назначить лицензию для рассматриваемой учетной записи администратора, выполните действия по [назначению, проверке и устранению проблем с лицензиями](../users-groups-roles/licensing-groups-assign.md#step-1-assign-the-required-licenses).

### <a name="theres-an-error-processing-the-request"></a>Ошибка при обработке запроса.

Ошибки регистрации универсальных SSPR могут быть вызваны многими проблемами, но обычно эта ошибка возникает из-за сбоя службы или проблемы конфигурации. Если вы продолжаете видеть эту общую ошибку при попытке повторного выполнения регистрации SSPR, [обратитесь в службу поддержки Майкрософт](#contact-microsoft-support) за дополнительной помощью.

## <a name="sspr-usage"></a>Использование SSPR

Если у вас или ваших пользователей возникли проблемы с использованием SSPR, ознакомьтесь со следующими сценариями устранения неполадок и способами устранения проблем.

| Error | Решение |
| --- | --- |
| Каталог не поддерживает сброс пароля. | В портал Azure измените конфигурацию с **включенной поддержкой самостоятельного сброса пароля** на *выбранную* или *все* , а затем нажмите кнопку **сохранить**. |
| Пользователю не назначена лицензия Azure AD. | Это может произойти, если вам не назначена лицензия Azure AD для нужного пользователя. Чтобы назначить лицензию для рассматриваемой учетной записи администратора, выполните действия по [назначению, проверке и устранению проблем с лицензиями](../users-groups-roles/licensing-groups-assign.md#step-1-assign-the-required-licenses). |
| Для каталога включен сброс паролей, но у пользователя отсутствуют или неправильно указаны сведения для проверки подлинности. | Убедитесь, что пользователь правильно наработал контактные данные в файле в каталоге. Дополнительные сведения см. в статье [Развертывание сброса пароля без регистрации пользователя](howto-sspr-authenticationdata.md). |
| Для каталога включен сброс паролей, но пользователь указал при регистрации только один элемент контактных данных, в то время как настройка политики требует два метода проверки. | Убедитесь, что у пользователя есть по крайней мере два правильно настроенных метода связи. Например, мобильный *и* рабочий телефон. |
| Для каталога включен сброс паролей и пользователь настроен правильно, но с пользователем не удается связаться. | Это может быть результатом временной ошибки службы или неправильного определения контактных данных. <br> <br> Если пользователь ждет 10 секунд, отобразится ссылка "повторить попытку" и обратитесь к администратору. Если пользователь выберет "повторить попытку", он повторяет вызов. Если пользователь выберет "обратитесь к администратору", он отправит сообщение электронной почты в виде формы администратору, запрашивающему сброс пароля для этой учетной записи пользователя. |
| Пользователь не получает SMS или телефонного вызова для сброса пароля. | Это может быть результатом неправильно указанного в каталоге телефонного номера. Убедитесь, что номер телефона указан в формате "+ 1 4251234567". <br> <br>Сброс пароля не поддерживает расширения, даже если указать его в каталоге. Расширения удаляются до совершения вызова. Используйте число без расширения или Интегрируйте расширение в номер телефона в вашей частной ветви (УАТС). |
| Пользователь не получает сообщения электронной почты для сброса пароля. | Наиболее распространенной причиной этой проблемы является отклонение сообщения фильтром нежелательной почты. Проверьте папку спама, нежелательной почты или удаленных писем в своем почтовом ящике. <br> <br> Кроме того, убедитесь, что пользователь проверяет правильность учетной записи электронной почты, зарегистрированной в SSPR. |
| Я установил политику сброса пароля, но если учетная запись администратора использует сброс пароля, эта политика не применяется. | Корпорация Майкрософт управляет политикой сброса паролей администраторов, контролирует ее, обеспечивая максимально высокий уровень безопасности. |
| Пользователь предпринял слишком много попыток сброса пароля в день, и для него эта возможность была заблокирована. | Механизм автоматического регулирования используется для того, чтобы запретить пользователям слишком много попыток сбросить пароли в течение короткого периода времени. Регулирование выполняется в следующих случаях. <br><ul><li>В течение одного часа пользователь пытается проверить номер телефона пять раз.</li><li>В течение одного часа пользователь пытается использовать шлюз контрольных вопросов пять раз.</li><li>В течение одного часа пользователь пытается сбросить пароль для одной и той же учетной записи пять раз.</li></ul>Если пользователь сталкивается с этой проблемой, он должен подождать 24 часа после последней попытки. Затем он сможет сбросить свой пароль. |
| Пользователь видит ошибку при проверке своего номера телефона. | Эта ошибка возникает, когда указанный номер телефона не соответствует номеру телефона в файле. Убедитесь, что при попытке сбросить пароль с помощью телефона пользователь вводит номер телефона полностью, включая код региона и страны. |
| Ошибка при обработке запроса. | Ошибки регистрации универсальных SSPR могут быть вызваны многими проблемами, но обычно эта ошибка возникает из-за сбоя службы или проблемы конфигурации. Если эта общая ошибка будет отображаться при повторной попытке регистрации SSPR, [обратитесь в службу поддержки Майкрософт](#contact-microsoft-support) за дополнительной помощью. |
| Нарушение локальной политики | Пароль не соответствует локальной политике паролей Active Directory. Пользователь должен определить пароль, который соответствует требованиям к сложности или стойкости. |
| Пароль не соответствует политике нечеткого тестирования | Используемый пароль отображается в [списке запрещенных паролей](./concept-password-ban-bad.md#how-are-passwords-evaluated) и не может использоваться. Пользователь должен определить пароль, который соответствует политике списка запрещенных паролей или превышает его. |

## <a name="sspr-errors-that-a-user-might-see"></a>SSPR ошибки, которые может видеть пользователь

Следующие ошибки и технические сведения могут отображаться для пользователя в рамках процесса SSPR. Часто эта ошибка не может быть устранена самостоятельно, так как функция SSPR должна быть включена, настроена или зарегистрирована для своей учетной записи.

Используйте следующие сведения, чтобы узнать, какие проблемы необходимо исправить в клиенте Azure AD или учетной записи отдельного пользователя.

| Error | Сведения | Технические сведения |
| --- | --- | --- |
| TenantSSPRFlagDisabled = 9 | К сожалению, в настоящее время невозможно сбросить пароль, так как администратор отключил сброс пароля для вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы включить данную функцию.<br /><br />Чтобы узнать больше, см. раздел [Распространенные проблемы и способы их устранения](../user-help/active-directory-passwords-update-your-own-password.md#common-problems-and-their-solutions). | SSPR_0009: мы обнаружили, что сброс пароля не был включен администратором. Обратитесь к администратору, чтобы включить сброс пароля для своей организации. |
| WritebackNotEnabled = 10 |К сожалению, в настоящее время невозможно сбросить пароль, так как администратор не включил необходимую службу для вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору и попросите его проверить конфигурацию вашей организации.<br /><br />Чтобы узнать больше об этой необходимой службе, см. раздел [Настройка компонента обратной записи паролей](./tutorial-enable-sspr-writeback.md). | SSPR_0010: мы обнаружили, что компонент обратной записи паролей не был включен. Обратитесь к администратору, чтобы включить компонент обратной записи паролей. |
| SsprNotEnabledInUserPolicy = 11 | К сожалению, в настоящее время невозможно сбросить пароль, так как администратор не настроил сброс пароля для вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы настроить сброс пароля.<br /><br />Дополнительные сведения о конфигурации сброса пароля см. в статье [Краткое руководство. Самостоятельный сброс пароля](./tutorial-enable-sspr.md). | SSPR_0011: в вашей организации не определена политика сброса пароля. Обратитесь к администратору, чтобы определить политику сброса пароля. |
| UserNotLicensed = 12 | К сожалению, в настоящее время невозможно сбросить пароль, так как необходимые лицензии отсутствуют в вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору для проверки назначенных лицензий.<br /><br />Дополнительные сведения о лицензировании см. в статье [Требования к лицензированию самостоятельного сброса пароля в Azure AD](./concept-sspr-licensing.md). | SSPR_0012: у вашей организации нет лицензий, необходимых для выполнения сброса пароля. Обратитесь к администратору для проверки назначенных лицензий. |
| UserNotMemberOfScopedAccessGroup = 13 | К сожалению, в настоящее время невозможно сбросить пароль, так как администратор не настроил учетную запись для использования сброса пароля. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы настроить сброс пароля для своей учетной записи.<br /><br />Дополнительные сведения о настройке учетной записи для сброса пароля см. в статье [Как развернуть самостоятельный сброс пароля](./howto-sspr-deployment.md). | SSPR_0013: вы не являетесь участником группы, которой разрешен сброс пароля. Обратитесь к администратору и запросите добавление в такую группу. |
| UserNotProperlyConfigured = 14 | К сожалению, в настоящее время невозможно сбросить пароль, так как в вашей учетной записи отсутствуют необходимые сведения. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы сбросить пароль. После повторного получения доступа к учетной записи нужно зарегистрировать необходимые сведения.<br /><br />Для этого следуйте указаниям в статье [Регистрация для самостоятельного сброса пароля](../user-help/active-directory-passwords-reset-register.md). | SSPR_0014: для сброса пароля требуются дополнительные сведения для защиты. Чтобы продолжить, обратитесь к администратору для сброса пароля. После получения доступа к учетной записи вы сможете зарегистрировать дополнительные сведения на странице https://aka.ms/ssprsetup. Администратор может добавить дополнительные сведения о безопасности в вашу учетную запись, следуя указаниям в разделе [Развертывание сброса пароля без регистрации пользователя](howto-sspr-authenticationdata.md). |
| OnPremisesAdminActionRequired = 29 | К сожалению, в настоящее время невозможно сбросить ваш пароль из-за проблемы с конфигурацией сброса паролей вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору для изучения данной проблемы. <br /><br />Или<br /><br />В настоящее время невозможно сбросить пароль из-за проблемы с конфигурацией сброса паролей вашей организации. Дальнейшие действия, которые можно предпринять для решения этой проблемы, отсутствуют. Обратитесь к администратору для изучения данной проблемы.<br /><br />Дополнительные сведения о возможных проблемах см. в разделе [Устранение неполадок с обратной записью паролей](troubleshoot-sspr-writeback.md). | SSPR_0029: не удалось сбросить пароль из-за ошибки в локальной конфигурации. Обратитесь к администратору для изучения данной проблемы. |
| OnPremisesConnectivityError = 30 | К сожалению, в настоящее время невозможно сбросить ваш пароль из-за проблем с подключением к вашей организации. Нет никаких действий, которые можно было бы предпринять прямо сейчас, но проблема может исчезнуть, если вы повторите попытку позже. Если проблема повторится, обратитесь к администратору для ее изучения.<br /><br />Дополнительные сведения о проблемах подключения см. в разделе [Устранение неполадок подключения обратной записи паролей](troubleshoot-sspr-writeback.md). | SSPR_0030: невозможно сбросить ваш пароль из-за плохого подключения к локальной среде. Обратитесь к администратору для изучения данной проблемы.|

## <a name="azure-ad-forums"></a>Форумы Azure AD

Если у вас есть общие вопросы об Azure AD и самостоятельном сбросе пароля, обратитесь за помощью к сообществу, чтобы получить помощь на [странице Microsoft Q&A вопроса для Azure Active Directory](/answers/topics/azure-active-directory.html). В сообщество входят инженеры, менеджеры по продуктам, MVP и ИТ-специалисты.

## <a name="contact-microsoft-support"></a>Обратиться в службу поддержки Майкрософт

Если вам не удается найти решение проблемы, специалисты группы поддержки всегда готовы помочь.

Чтобы мы могли предоставить вам соответствующую помощь, укажите в запросе как можно больше подробностей. Ниже приведены эти сведения.

* **Общее описание ошибки**. В чем заключается ошибка? Как вела себя система? Как можно воспроизвести ошибку? Опишите проблему максимально подробно.
* **Страницу.** На какой странице вы находились, когда произошла ошибка? По возможности предоставьте URL-адрес страницы и снимок экрана.
* **Код поддержки.** Какой код поддержки был сформирован, когда пользователь увидел ошибку?
   * Чтобы найти его, воспроизведите ошибку, затем щелкните ссылку **Код поддержки** внизу экрана и отправьте специалисту службы поддержки идентификатор GUID, который отобразится в результате.

    :::image type="content" source="./media/troubleshoot-sspr-writeback/view-support-code.png" alt-text="Код поддержки находится в правом нижнем углу окна веб-браузера.":::

  * Если вы находитесь на странице, внизу которой отсутствует код поддержки, нажмите клавишу F12 и поищите SID и CID, после чего отправьте два найденных результата специалисту службы поддержки.
* **Дату, время и часовой пояс.** Укажите точную дату и время возникновения ошибки, а также *часовой пояс*.
* **Идентификатор пользователя.** Какой пользователь увидел ошибку? Например, *пользователь\@contoso.com*.
   * Это федеративный пользователь?
   * Это пользователь, применяющий сквозную аутентификацию?
   * Это пользователь с синхронизацией хэшей паролей?
   * Это облачный пользователь?
* **Лицензирование.** Назначена ли пользователю лицензия Azure AD?
* **Журнал событий приложений.** Если используется компонент обратной записи паролей и код ошибки находится в локальной инфраструктуре, включите сжатую копию журнала событий приложения с сервера Azure AD Connect.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о SSPR см. в статье [как это работает: самостоятельный сброс пароля Azure AD](concept-sspr-howitworks.md) или [самостоятельная обратная запись сброса пароля в Azure AD](concept-sspr-writeback.md).
