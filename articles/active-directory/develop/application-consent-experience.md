---
title: Основные сведения о процедуре предоставления согласия для приложений Azure AD | Документы Майкрософт
description: Узнайте о процедуре предоставления согласия Azure AD, а также о том, как вы можете использовать ее при управлении и разработке приложений в Azure AD
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/11/2018
ms.author: celested
ms.reviewer: zawad
ms.collection: M365-identity-device-management
ms.openlocfilehash: 86424a7c797dfd7e73ad5f0e56929616d9653b3d
ms.sourcegitcommit: 301128ea7d883d432720c64238b0d28ebe9aed59
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/13/2019
ms.locfileid: "56170981"
---
# <a name="understanding-azure-ad-application-consent-experiences"></a>Основные сведения о процедуре предоставления согласия для приложений Azure AD

Узнайте больше о процедуре предоставления согласия в Azure Active Directory (Azure AD). Таким образом, вы сможете квалифицированно управлять приложениями вашей организации и (или) разрабатывать приложения с помощью более прозрачного механизма предоставления согласия.

## <a name="consent-and-permissions"></a>Согласие и разрешения

Согласие — это процесс предоставления пользователем разрешения приложению получать доступ к защищенным ресурсам от имени пользователя. Администратор или пользователь могут получать запрос на разрешение доступа к рабочим или личным данным.

Фактический процесс представления согласия будет различаться в зависимости от политик, заданных на клиенте пользователя, набора прав пользователя (или роли) и типа [разрешения](https://docs.microsoft.com/azure/active-directory/develop/active-directory-permissions), запрашиваемого клиентским приложением. Это означает, что разработчики приложений и администраторы клиентов имеют определенный уровень контроля над процедурой получения согласия. Администраторы имеют гибкие возможности настройки и отключения политик клиента или приложения для управления процедурой предоставления согласия в своих клиентах. Разработчики приложений могут жестко указывать, какие разрешения будут запрошены и хотят ли они выполнить процесс предоставления согласия пользователя или администратора.

- **Процесс предоставления согласия пользователем**. Разработчик приложения направляет пользователей к конечной точке авторизации с целью зафиксировать согласие только для текущего пользователя.
- **Процесс предоставления согласия администратором**. Разработчик приложения направляет пользователей к конечной точке авторизации администратора с целью зафиксировать согласие для всего клиента. Для правильной работы процесса предоставления согласия администратора разработчик приложений должен перечислить все разрешения в свойстве `RequiredResourceAccess` манифеста приложения. Дополнительные сведения см. в статье [Манифест приложения Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/reference-app-manifest).

## <a name="building-blocks-of-the-consent-prompt"></a>Стандартные блоки подтверждения согласия

Запрос на согласие разработан таким образом, чтобы убедиться, что пользователи имели всю необходимую информацию для определения того, достаточно ли они доверяют клиентскому приложению для доступа к защищенным ресурсам от их имени. Стандартные блоки помогают пользователям, которые предоставляют согласие, принимать более обоснованные решения, а разработчикам — создавать удобные интерфейсы.

Следующие схема и таблица содержат сведения о стандартных блоках запросов на согласие.

![Стандартные блоки подтверждения согласия](./media/application-consent-experience/consent_prompt.png)

| # | Компонент | Назначение |
| ----- | ----- | ----- |
| 1 | Идентификатор пользователя | Этот идентификатор представляет пользователя, у которого клиентское приложение запрашивает доступ к защищенным ресурсам от имени пользователя. |
| 2 | Название | Заголовок изменяется в зависимости от того, выполняется ли процесс предоставления согласия пользователя или администратора. В случае запроса согласия пользователя заголовок будет "Запрос разрешений", при запросе согласия администратора — "Примите для вашей организации". |
| 3 | Логотип приложения | Изображение должно помочь пользователям убедиться, что это именно то приложение, которому они хотят предоставить доступ. Это изображение предоставляется разработчиками приложения, и владелец этого изображение не проверяется. |
| 4. | Имя приложения. | Это значение должно проинформировать пользователей о том, какое приложение запрашивает доступ к данным пользователей. Обратите внимание, что это имя предоставляется разработчиками приложения, и владелец этого имени не проверяется. |
| 5 | Домен издателя | Это значение сообщает пользователям домен, который они могут проверить на надежность. Этот домен предоставляется разработчиками, и выполняется проверка владения этим доменом издателя. |
| 6 | Разрешения | Этот список содержит разрешения, которые запрашивает клиентское приложение. Пользователям всегда следует проверять типы запрашиваемых разрешений, чтобы понять, к каким данным будет иметь доступ клиентское приложение от имени пользователей, если они предоставят свое согласие. Разработчикам приложений рекомендуется запрашивать наименьший уровень привилегий. |
| 7 | Описание разрешения | Это значение задается службой, предоставляющей разрешения. Чтобы просмотреть описание разрешений, необходимо открыть значок шеврона рядом с разрешением. |
| 8 | Условия использования данных приложением | Эти условия содержат ссылки на условия предоставления услуг и заявление о конфиденциальности приложения. Издатель несет ответственность за изложение своих правил в условиях предоставления услуг. Кроме того, издатель отвечает за раскрытие способа, которым они используют данные пользователей, в заявлении о конфиденциальности. Если издатель не предоставляет ссылки на эти документы для мультитенантных приложений, в запросе на согласие будет отображаться выделенное жирным шрифтом предупреждение. |
| 9 | https://myapps.microsoft.com | Ссылка, где пользователи могут просмотреть и удалить все приложения сторонних производителей, которые в настоящее время имеют доступ к данным пользователя. |

## <a name="common-consent-scenarios"></a>Типичные сценарии согласия

Ниже приведены запросы на согласие, с которыми пользователь может столкнуться в распространенных сценариях согласия:

1. Пользователи предоставляют доступ приложению, которое выполняет процесс предоставления согласия пользователем, запрашивая набор разрешений, находящийся в пределах их полномочий.
    
    1. Администраторы увидят дополнительный элемент управления в обычном запросе согласия, который позволяет предоставить согласие от имени всего клиента. Этот элемент управления по умолчанию отключено, поэтому только когда администратор явным образом отметит флажок, согласие будет предоставлено от имени всего клиента. В настоящее время этот флажок отображается только для роли глобального администратора, поэтому администраторы облака и администраторы приложений не увидят его.

        ![Запрос согласия для сценария 1a](./media/application-consent-experience/consent_prompt_1a.png)
    
    2. Пользователи увидят обычный запрос согласия.

        ![Запрос согласия для сценария 1b](./media/application-consent-experience/consent_prompt_1b.png)

2. Пользователи, предоставляющие доступ приложению, которое запрашивает хотя бы одно разрешение, выходящее за рамки полномочий пользователя.
    1. Администраторы увидят то же подтверждение 1a, изображенное выше.
    2. Пользователи не смогут предоставить согласие для этого приложения, и им будет предложено обратиться к администратору для доступа к приложению. 
                
        ![Запрос согласия для сценария 1b](./media/application-consent-experience/consent_prompt_2b.png)

3. Обычные пользователи, которые перешли или были перенаправлены на процесс получения согласия администратора.
    1. Администраторы увидят запрос согласия администратора. Заголовок и описание разрешений в этом подтверждении изменятся. В изменениях отразится тот факт, что принятие этого запроса предоставит приложению доступ к запрашиваемым данным от имени всего клиента.
        
        ![Запрос согласия для сценария 1b](./media/application-consent-experience/consent_prompt_3a.png)
        
    1. Пользователи без прав администратора увидят экран 2b, изображенный выше.

## <a name="next-steps"></a>Дополнительная информация
- Ознакомьтесь с пошаговым руководством по [реализации согласия в инфраструктуре согласия Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications).
- Получите более подробные сведения об [использовании инфраструктуры согласия в мультитенантном приложении](https://docs.microsoft.com/azure/active-directory/develop/active-directory-devhowto-multi-tenant-overview), чтобы реализовать согласие пользователя и администратора, с поддержкой нескольких дополнительных шаблонов многоуровневого приложения.
