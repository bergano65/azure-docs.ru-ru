---
title: Дополнительные сведения о протоколах авторизации, поддерживаемых платформой Microsoft identity | Azure
description: Руководство по протоколам OAuth 2.0 и OpenID Connect, поддерживаемые конечной точкой платформа удостоверений Майкрософт.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
editor: ''
ms.assetid: 5fb4fa1b-8fc4-438e-b3b0-258d8c145f22
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/11/2019
ms.author: celested
ms.reviewer: hirsin
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: dad05221376fa5871aadf6d89dcb15dff55a6dfa
ms.sourcegitcommit: 1a19a5845ae5d9f5752b4c905a43bf959a60eb9d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/11/2019
ms.locfileid: "59490728"
---
# <a name="microsoft-identity-platform-protocols"></a>Протоколы платформы удостоверений Microsoft

Конечная точка платформы удостоверений Microsoft для идентификации как услуга с помощью стандартных отраслевых протоколов, OpenID Connect и OAuth 2.0. Хотя эта служба соответствует стандартам, между любыми двумя реализациями этих протоколов могут быть незначительные различия. Сведения в этой статье могут оказаться полезными, если вы планируете писать код с использованием прямой отправки и обработки HTTP-запросов или сторонней библиотеки с открытым кодом вместо одной из наших [библиотек с открытым кодом](reference-v2-libraries.md).

> [!NOTE]
> Не все сценарии Azure AD и функции поддерживаются конечной точкой платформа удостоверений Майкрософт. Чтобы определить, если необходимо использовать конечную точку платформы Microsoft identity, ознакомьтесь [ограничения платформы удостоверений Microsoft](active-directory-v2-limitations.md).

## <a name="the-basics"></a>Основные сведения

Почти во всех потоках обмена данными в OAuth 2.0 и OpenID Connect участвуют четыре стороны.

![Роли OAuth 2.0](./media/active-directory-v2-flows/protocols-roles.svg)

* **Сервер авторизации** — это конечная точка платформы удостоверений Microsoft и ответственность за обеспечение удостоверение пользователя, предоставление и Отмена доступа к ресурсам и выдачи маркеров. Кроме того, он выполняет роль поставщика удостоверений: он безопасным способом обрабатывает любые данные, связанные со сведениями о пользователе, его доступом и отношениями доверия между участниками потока.
* **Владелец ресурса** — это, как правило, пользователь. Это сторона, владеющая данными, которая может предоставлять третьим сторонам доступ к этим данным или ресурсу.
* **Клиент OAuth** — это приложение, определяемое идентификатором приложения. Обычно именно с этой стороной взаимодействует конечный пользователь. Клиент OAuth также запрашивает маркеры у сервера авторизации. Владелец ресурса должен предоставить клиенту разрешение на доступ к ресурсу.
* **Сервер ресурсов** — место размещения ресурса или данных. Он доверяет серверу авторизации безопасную проверку подлинности и авторизацию клиента OAuth и использует токены доступа носителя, чтобы убедиться, что можно предоставлять доступ к ресурсу.

## <a name="app-registration"></a>Регистрация приложения

Каждое приложение, которое хочет принимать как личных и рабочих или учебных учетных записей должны быть зарегистрированы при помощи новых **регистрация приложений (Предварительная версия)** опытом в области [портала Azure](https://portal.azure.com/?Microsoft_AAD_RegisteredApps=true#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade) чтобы эти пользователи могли войти систему с помощью OAuth 2.0 или OpenID Connect. В процессе регистрации для приложения будет собрано и назначено несколько значений.

* **идентификатор приложения**, который определяет конкретное приложение;
* **Универсальный код ресурса (URI) перенаправления** или **Идентификатор пакета**, которые можно использовать для возврата ответов к приложению.
* Несколько других зависящих от сценария значений.

Дополнительные сведения см. в статье о [регистрации приложения](quickstart-v2-register-an-app.md).

## <a name="endpoints"></a>Конечные точки

После регистрации приложение взаимодействует с платформой Microsoft identity, отправляя запросы к конечной точке:

```
https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize
https://login.microsoftonline.com/{tenant}/oauth2/v2.0/token
```

Где `{tenant}` может принимать одно из четырех значений:

| Значение | Описание |
| --- | --- |
| `common` | Позволяет пользователям с личными учетными записями Майкрософт и рабочими учетными записями Azure AD выполнять вход в приложение. |
| `organizations` | Позволяет выполнять вход в приложение только пользователям с рабочими учетными записями Azure AD. |
| `consumers` | Позволяет выполнять вход в приложение только пользователям с личными учетными записями Майкрософт. |
| `8eaef023-2b34-4da1-9baa-8bc8c9d6a490` или `contoso.onmicrosoft.com` | Позволяет выполнять вход в приложение только пользователям с рабочими учетными записями определенного клиента Azure AD. Можно использовать понятное доменное имя клиента Azure AD или идентификатор GUID клиента. |

Чтобы узнать, как взаимодействовать с этими конечными точками, выберите определенный тип приложения в разделе [Протоколы](#protocols) и перейдите по ссылкам для получения дополнительной информации.

> [!TIP]
> Все приложения, зарегистрированного в Azure AD можно использовать конечную точку платформы удостоверений Microsoft, даже если они не войти в личные учетные записи.  Таким образом, можно перевести существующие приложения на платформе Microsoft identity и [MSAL](reference-v2-libraries.md) без повторного создания приложения.  

## <a name="tokens"></a>Маркеры

Реализация платформы Microsoft identity OAuth 2.0 и OpenID Connect более широко использовать токены носителя, включая маркеры носителя в виде JWT. Токен носителя — это упрощенный маркер безопасности, предоставляющий его носителя (предъявителю) доступ к защищенному ресурсу. В этом смысле предъявителем является любая сторона, которая может предъявить маркер. На то, что сторона должна пройти проверку подлинности с платформой удостоверений Microsoft для получения токена носителя, если для защиты токена, передаче и хранении не выполняются действия, необходимые, его можно перехватить и использовать Несанкционированная сторона. Хотя в некоторых маркерах безопасности для предотвращения несанкционированного использования применяется специальный встроенный механизм, в токенах носителя такого механизма нет, и они должны передаваться по защищенному каналу, например с использованием стандарта безопасности транспортного уровня (HTTPS). Если токен носителя передается в незашифрованном виде, злоумышленник может использовать атаку "злоумышленник в середине", чтобы получить токен и использовать его для несанкционированного доступа к защищенному ресурсу. Те же принципы безопасности применяются при сохранении или кэшировании маркеров носителя для последующего использования. Необходимо всегда проверять, что приложение передает и сохраняет токены носителя безопасным образом. Дополнительные сведения о безопасности в случае применения токенов носителя см. в [RFC 6750, раздел 5](https://tools.ietf.org/html/rfc6750).

Дополнительные сведения о различных типах маркеров, используемых в Microsoft, конечная точка платформы удостоверений доступна в [Microsoft identity платформы ссылка на конечную точку маркера](v2-id-and-access-tokens.md).

## <a name="protocols"></a>Протоколы

Если вы готовы рассмотреть несколько примеров запросов, приступите к одному из учебников ниже. Каждый из них соответствует определенному сценарию аутентификации. Если вам нужна помощь в выборе правильный поток, см. статью [типы приложений, которые можно создать с платформой Microsoft identity](v2-app-types.md).

* [Создание мобильного и собственного приложения с помощью OAuth 2.0](v2-oauth2-auth-code-flow.md)
* [Создание веб-приложений с помощью OpenID Connect](v2-protocols-oidc.md)
* [Создание одностраничных приложений с помощью неявного потока OAuth 2.0](v2-oauth2-implicit-grant-flow.md)
* [Создание управляющих программ или серверных процессов с помощью потока учетных данных клиента OAuth 2.0](v2-oauth2-client-creds-grant-flow.md)
* [Получение маркеров в веб-API с помощью потока on-behalf-of OAuth 2.0](v2-oauth2-on-behalf-of-flow.md)
