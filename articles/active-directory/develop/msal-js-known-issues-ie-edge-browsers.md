---
title: Проблемы MSAL. js в Internet Explorer & Microsoft ребр | Службы
titleSuffix: Microsoft identity platform
description: Сведения об известных проблемах при использовании библиотеки проверки подлинности Майкрософт для JavaScript (MSAL. js) в Internet Explorer и браузерах Microsoft ребр.
services: active-directory
author: navyasric
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: troubleshooting
ms.workload: identity
ms.date: 05/16/2019
ms.author: nacanuma
ms.reviewer: saeeda
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: fe9f8ff420698d5afe617973abc7874256efe260
ms.sourcegitcommit: a5ebf5026d9967c4c4f92432698cb1f8651c03bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2019
ms.locfileid: "74916389"
---
# <a name="known-issues-on-internet-explorer-and-microsoft-edge-browsers-with-msaljs"></a>Известные проблемы в Internet Explorer и обозревателях Microsoft ребр с MSAL. js

## <a name="issues-due-to-security-zones"></a>Проблемы из-за зон безопасности
У нас возникло несколько отчетов о проблемах с проверкой подлинности в IE и Microsoft погранично (так как обновление *обозревателя Microsoft ребра до 40.15063.0.0*). Мы отслеживаем их и осведомлены о команде Microsoft ребра. Хотя Microsoft ребр работает с решением проблемы, здесь приводится описание часто встречающихся проблем и возможных способов их реализации.

### <a name="cause"></a>Причина:
Причина большинства этих проблем выглядит следующим образом. Хранилище сеанса и локальное хранилище разделены зонами безопасности в браузере Microsoft ребра. В этой конкретной версии Microsoft ребро, когда приложение перенаправляется между зонами, хранилище сеанса и локальное хранилище очищаются. В частности, хранилище сеанса удаляется при обычной навигации в браузере, а сеанс и локальное хранилище очищаются в режиме InPrivate браузера. MSAL. js сохраняет определенное состояние в хранилище сеанса и зависит от проверки этого состояния во время потоков проверки подлинности. При очистке хранилища сеанса это состояние теряется и поэтому приводит к нарушению работы.

### <a name="issues"></a>Проблемы

- **Бесконечные циклы перенаправления и перезагрузки страниц во время проверки подлинности**. Когда пользователи входят в приложение в Microsoft ребро, они перенаправляются обратно со страницы входа AAD и находятся в бесконечном цикле перенаправления, что приводит к многократной перезагрузке страниц. Обычно это сопровождается ошибкой `invalid_state` в хранилище сеанса.

- **Бесконечные циклы получения маркера и ошибка AADSTS50058**. Когда приложение, работающее в Microsoft ребр, пытается получить маркер для ресурса, приложение может оставаться в бесконечном цикле вызова маркера получения и следующей ошибки из AAD в трассировке сети:

    `Error :login_required; Error description:AADSTS50058: A silent sign-in request was sent but no user is signed in. The cookies used to represent the user's session were not sent in the request to Azure AD. This can happen if the user is using Internet Explorer or Edge, and the web app sending the silent sign-in request is in different IE security zone than the Azure AD endpoint (login.microsoftonline.com)`

- **Всплывающее окно не закрывается или зависает при использовании входа с помощью всплывающего окна для проверки подлинности**. При проверке подлинности всплывающего окна в Microsoft пограничном или IE (InPrivate) после ввода учетных данных и входа в систему, если в области навигации участвуют несколько доменов между зонами, всплывающее окно не закрывается, так как MSAL. js теряет этот обработчик. всплывающее окно.  

    Ниже приведены ссылки на эти проблемы в средстве регистрации проблем Microsoft ребра.  
    - [Ошибка 13861050](https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/13861050/)
    - [Ошибка 13861663](https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/13861663/)

### <a name="update-fix-available-in-msaljs-023"></a>Обновление: исправление доступно в MSAL. js 0.2.3
Исправления для проблем с циклом перенаправления проверки подлинности были выпущены в [MSAL. js 0.2.3](https://github.com/AzureAD/microsoft-authentication-library-for-js/releases). Включите флаг `storeAuthStateInCookie` в конфигурации MSAL. js, чтобы воспользоваться этим исправлением. По умолчанию этот флаг имеет значение false.

Если включен флаг `storeAuthStateInCookie`, MSAL. js будет использовать файлы cookie браузера для хранения состояния запроса, необходимого для проверки последовательностей проверки подлинности.

> [!NOTE]
> Это исправление еще не доступно для оболочек msal-угловой и msal-angularjs. Это исправление не устраняет проблему с всплывающими окнами.

Используйте обходные пути ниже.

#### <a name="other-workarounds"></a>Другие обходные пути
Убедитесь, что проблема возникает только в определенной версии браузера Microsoft ребра и работает в других браузерах, прежде чем внедрять эти обходные пути.  
1. Чтобы обойти эти проблемы, убедитесь, что домен приложения, и другие сайты, участвующие в перенаправлениях потока проверки подлинности, добавляются в параметры безопасности браузера в качестве доверенных сайтов, чтобы они принадлежали к одной и той же зоне безопасности.
Для этого выполните следующие действия.
    - Откройте **Internet Explorer** и щелкните " **Параметры** " (значок шестеренки) в правом верхнем углу.
    - Выберите **Свойства браузера**
    - Перейдите на вкладку **Безопасность** .
    - В разделе **Trusted Sites (надежные сайты** ) нажмите кнопку **Sites (сайты** ) и добавьте URL-адреса в открывшемся диалоговом окне.

2. Как упоминалось ранее, поскольку во время обычной навигации очищаются только хранилище сеансов, можно настроить MSAL. js для использования локального хранилища. Его можно задать в качестве параметра `cacheLocation` config при инициализации MSAL.

Обратите внимание, что это не позволит решить проблему с просмотром InPrivate, так как сеанс и локальное хранилище очищаются.

## <a name="issues-due-to-popup-blockers"></a>Проблемы, вызванные блокированием всплывающих окон

Бывают случаи, когда всплывающие окна заблокированы в IE или Microsoft ребро, например когда во время многофакторной проверки подлинности появляется второе всплывающее окно. Вы получите оповещение в браузере, чтобы разрешить всплывающее окно один раз или всегда. Если вы решили разрешить, браузер автоматически открывает всплывающее окно и возвращает для него обработчик `null`. В результате библиотека не имеет обработчика для окна, и нет способа закрыть всплывающее окно. Та же ситуация не возникает в Chrome, когда она предлагает разрешить всплывающие окна, так как не открывает всплывающее окно автоматически.

В качестве **обходного решения**разработчикам необходимо разрешить всплывающие окна в IE и Microsoft ребро, прежде чем они начнут использовать приложение, чтобы избежать этой проблемы.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения об [использовании MSAL. js в Internet Explorer](msal-js-use-ie-browser.md).
