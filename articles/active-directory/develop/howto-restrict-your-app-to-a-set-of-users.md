---
title: Ограничить приложение Azure AD набором пользователей | Службы
titleSuffix: Microsoft identity platform
description: Сведения о предоставлении доступа к приложениям, зарегистрированным в AAD, только для выбранного набора пользователей.
services: active-directory
author: kalyankrishna1
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.topic: conceptual
ms.date: 09/24/2018
ms.author: kkrishna
ms.reviewer: jmprieur
ms.custom: aaddev
ms.openlocfilehash: 8bdc7e6e3795719128a8ecfb1e8bc97c1a9a08c7
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81759025"
---
# <a name="how-to-restrict-your-azure-ad-app-to-a-set-of-users-in-an-azure-ad-tenant"></a>Как ограничить приложение Azure AD набором пользователей в клиенте Azure AD

Приложения, зарегистрированные в клиенте Azure Active Directory (Azure AD), по умолчанию являются доступными для всех пользователей клиента, которые успешно прошли проверку подлинности.

Аналогичным образом, в частности в случае [мультитенантного](howto-convert-app-to-be-multi-tenant.md) приложения, все пользователи в клиенте Azure AD, в котором подготовлено это приложение, будут иметь возможность доступа к этому приложению сразу после успешной проверки подлинности в своих соответствующих клиентах.

У администраторов и разработчиков клиента часто есть требования относительно ограничения доступа к приложению определенным набором пользователей. Разработчики могут сделать то же самое, используя популярные шаблоны авторизации, такие как управление доступом на основе ролей (RBAC), но для этого подхода требуются значительные усилия со стороны разработчика.

Администраторы и разработчики клиента могут ограничить приложение определенным набором пользователей или групп безопасности в клиенте с помощью этой встроенной функции Azure AD.

## <a name="supported-app-configurations"></a>Поддерживаемые конфигурации приложения

Функция ограничения приложения для определенного набора пользователей или групп безопасности в клиенте работает со следующими типами приложений:

- Приложения, настроенные для федеративного единого входа с проверкой подлинности на основе SAML.
- Приложения прокси приложения, использующие предварительную проверку подлинности Azure AD.
- Приложения, созданные непосредственно на платформе приложений Azure AD, использующих проверку подлинности OAuth 2.0 или OpenID Connect после того, как пользователь или администратор согласились с условиями использования этого приложения.

     > [!NOTE]
     > Эта функция доступна только для веб-приложений, веб-API и корпоративных приложений. Приложения, зарегистрированные как [собственные](quickstart-v1-integrate-apps-with-azure-ad.md), нельзя ограничивать набором пользователей или групп безопасности в клиенте.

## <a name="update-the-app-to-enable-user-assignment"></a>Обновление приложения для включения назначения пользователя

Существует два способа создания приложения с включенным назначением пользователей. Одна из них требует роли **глобального администратора** , а вторая — нет.

### <a name="enterprise-applications-requires-the-global-administrator-role"></a>Корпоративные приложения (требуется роль глобального администратора)

1. Перейдите к [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор**.
1. В верхней панели выберите учетную запись, с помощью которой выполнен вход. 
1. В разделе **каталога** выберите клиент Azure AD, в котором будет зарегистрировано приложение.
1. В области навигации слева выберите **Azure Active Directory**. Если Azure Active Directory недоступна в области навигации, выполните следующие действия.

    1. Выберите **Все службы** в верхней части главного меню навигации слева.
    1. Введите **Azure Active Directory** в поле фильтра поиска, а затем выберите элемент **Azure Active Directory** из результата.

1. В области **Azure Active Directory** выберите **корпоративные приложения** в меню навигации **Azure Active Directory** слева.
1. Выберите **все приложения** , чтобы просмотреть список всех приложений.

     Если приложение не отображается, используйте различные фильтры в верхней части списка **Все приложения**, чтобы сократить список, или прокрутите его вниз и найдите приложение.

1. Выберите из списка приложение, которое вы хотите назначить пользователю или группе безопасности.
1. На странице **Обзор** приложения в меню навигации слева приложения выберите **свойства** .
1. Найдите параметр **Требуется ли назн. польз.?** и присвойте ему значение **Да**. Если этот параметр имеет значение **Да**, пользователи в клиенте сначала должны быть назначены этому приложению или не смогут входить в это приложение.
1. Нажмите кнопку **Сохранить**, чтобы сохранить это изменение конфигурации.

### <a name="app-registration"></a>Регистрация приложения

1. Перейдите к [**портал Azure**](https://portal.azure.com/).
1. В верхней панели выберите учетную запись, с помощью которой выполнен вход. 
1. В разделе **каталога** выберите клиент Azure AD, в котором будет зарегистрировано приложение.
1. В области навигации слева выберите **Azure Active Directory**.
1. В области **Azure Active Directory** выберите **Регистрация приложений** в меню навигации **Azure Active Directory** слева.
1. Создайте или выберите приложение, которым требуется управлять. Необходимо быть **владельцем** этой регистрации приложения.
1. На странице **Обзор** приложения перейдите по ссылке **управляемое приложение в локальном каталоге** в разделе Основные компоненты в верхней части страницы. Вы перейдете к _управляемому корпоративному приложению_ регистрации приложения.
1. В колонке навигации слева выберите **Свойства**.
1. Найдите параметр **Требуется ли назн. польз.?** и присвойте ему значение **Да**. Если этот параметр имеет значение **Да**, пользователи в клиенте сначала должны быть назначены этому приложению или не смогут входить в это приложение.
1. Нажмите кнопку **Сохранить**, чтобы сохранить это изменение конфигурации.

## <a name="assign-users-and-groups-to-the-app"></a>Назначение пользователей и групп для приложения

После того как вы настроили приложение для включения назначения пользователя, вы можете продолжить и назначить приложению пользователей и группы.

1. Щелкните панель **Пользователи и группы** в меню навигации приложения слева.
1. Вверху списка **Пользователи и группы** нажмите кнопку **Добавить пользователя**, чтобы открыть панель **Добавление назначения**.
1. В области **добавления назначения** щелкните селектор **Пользователи**. 

     Отобразится список пользователей и групп безопасности, а также текстовое поле для поиска определенного пользователя или группы. На этом экране можно выбрать сразу несколько пользователей и групп.

1. Выбрав пользователей и группы, нажмите кнопку **Выбрать** внизу, чтобы перейти к следующей части.
1. Используемых Если в приложении определены роли приложения, можно использовать параметр **Выбор роли** , чтобы назначить выбранных пользователей и группы одной из ролей приложения. 
1. Нажмите кнопку **Назначить** внизу, чтобы завершить назначение пользователей и групп для приложения. 
1. Убедитесь, что добавленные пользователи и группы отображаются в обновленном списке **Пользователи и группы**.

## <a name="more-information"></a>Дополнительные сведения

- [Как добавить роли приложения в приложение](https://docs.microsoft.com/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps)
- [Добавление авторизации с помощью ролей приложения & утверждения ролей в веб-приложение ASP.NET Core](https://github.com/Azure-Samples/active-directory-aspnetcore-webapp-openidconnect-v2/tree/master/5-WebApp-AuthZ/5-1-Roles)
- [August 9: Using application roles and security groups in your apps (Video)](https://www.youtube.com/watch?v=V8VUPixLSiM) (9 августа. Использование ролей приложения и групп безопасности в приложениях (видео))
- [Azure Active Directory, now with Group Claims and Application Roles](https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Azure-Active-Directory-now-with-Group-Claims-and-Application/ba-p/243862) (Azure Active Directory с утверждениями групп и ролями приложения)
- [Манифест приложения Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/reference-app-manifest)