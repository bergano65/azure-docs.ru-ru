---
title: Краткое руководство. Регистрация приложения на платформе удостоверений Майкрософт | Azure
description: Из этого краткого руководства вы узнаете, как зарегистрировать приложение с помощью платформы удостоверений Майкрософт.
services: active-directory
author: mmacy
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: quickstart
ms.workload: identity
ms.date: 09/03/2020
ms.author: marsma
ms.custom: aaddev, identityplatformtop40, contperfq1
ms.reviewer: aragra, lenalepa, sureshja
ms.openlocfilehash: 9cd59d6bf5b9bf6e17cba0786bfac27ed12d7638
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91258138"
---
# <a name="quickstart-register-an-application-with-the-microsoft-identity-platform"></a>Краткое руководство. Регистрация приложения с помощью платформы удостоверений Майкрософт

В этом кратком руководстве вы зарегистрируете приложение на портале Azure, чтобы платформа удостоверений Майкрософт могла предоставлять службы проверки подлинности и авторизации для приложения и пользователей.

Каждое приложение, для которого платформа удостоверений Майкрософт должна выполнять функции идентификации и управления доступом, следует зарегистрировать. Регистрация устанавливает отношение доверия между приложением (будь то клиентское приложение, например веб-или мобильное приложение, или веб-API, которое создает резервную копию клиентского приложения) и поставщиком удостоверений (платформой удостоверений Майкрософт).

## <a name="prerequisites"></a>Предварительные требования

* Учетная запись Azure с активной подпиской. [Создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).
* Завершение [краткого руководства по настройке клиента](quickstart-create-new-tenant.md).

## <a name="register-an-application"></a>Регистрация приложения

Регистрация приложения устанавливает отношения доверия между приложением и платформой удостоверений Майкрософт. Отношение доверия является однонаправленным: ваше приложение доверяет платформе удостоверений Майкрософт, а не наоборот.

Чтобы зарегистрировать приложение, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com).
1. Если у вас есть доступ к нескольким клиентам, в верхнем меню используйте фильтр **Каталог и подписка** :::image type="icon" source="./media/quickstart-register-app/portal-01-directory-subscription-filter.png" border="false":::, чтобы выбрать клиент, в котором следует зарегистрировать приложение.
1. Найдите и выберите **Azure Active Directory**.
1. В разделе **Управление** щелкните **Регистрация приложений** и выберите пункт **Новая регистрация**.
1. Введите значение **Name** (Имя) для приложения. Пользователи приложения могут видеть это имя. Вы можете изменить его позже.
1. Укажите, кто может использовать приложение. Эти иногда называют *аудиторией входа*.

    | Поддерживаемые типы учетных записей | Описание |
    |-------------------------|-------------|
    | **Accounts in this organizational directory only** (Учетные записи только в этом каталоге организации) | Выберите этот параметр, если создаете приложение для использования только пользователями (или гостями) в *вашем* клиенте.<br><br>Это приложение, часто называемое *бизнес-приложением* (LOB), является приложением **с одним клиентом** на платформе удостоверений Майкрософт. |
    | **Учетные записи в любом каталоге организации** | Выберите этот параметр, если вы хотите, чтобы пользователи в *любом* клиенте Azure AD могли использовать ваше приложение. Этот вариант подходит, если, например, вы создаете приложение SaaS, которое планируется предоставить нескольким организациям.<br><br>На платформе удостоверений Майкрософт оно называется приложением с **несколькими клиентами**. |
    | **Accounts in any organizational directory and personal Microsoft accounts** (Учетные записи в любом каталоге организации и личные учетные записи Майкрософт) | Выберите этот параметр для широкого круга клиентов.<br><br>При выборе этого параметра регистрируется приложение **с несколькими клиентами**, в котором поддерживаются пользователи с личными **учетными записями Майкрософт** (MSA). |
    | **Personal Microsoft accounts** (Личные учетные записи Майкрософт) | Выберите этот параметр, если вы создаете приложение для использования только пользователями с личными учетными записями Майкрософт. Личные учетные записи Майкрософт включают в себя учетные записи Skype, Xbox, Live и Hotmail. |

1. Не вводите данные в поле **URI перенаправления (необязательно)** , вы настроите его в следующем разделе.
1. Для завершения исходной регистрации приложения нажмите кнопку **Зарегистрировать**.

    :::image type="content" source="media/quickstart-register-app/portal-02-app-reg-01.png" alt-text="Снимок экрана портала Azure в веб-браузере с областью регистрации приложения.":::

По завершении регистрации на портале Azure отобразится область **Обзор** регистрации приложения, которая содержит **идентификатор приложения (клиента)** . Это значение, также называемое *идентификатором клиента*. Оно определяет ваше приложение на платформе удостоверений Майкрософт.

Код приложения или, как правило, библиотека проверки подлинности, используемая в приложении, также использует идентификатор клиента в качестве одного из аспектов проверки маркеров безопасности, получаемых от платформы удостоверений.

:::image type="content" source="media/quickstart-register-app/portal-03-app-reg-02.png" alt-text="Снимок экрана портала Azure в веб-браузере с областью регистрации приложения.":::

## <a name="add-a-redirect-uri"></a>Добавление URI перенаправления

URI перенаправления — это расположение, в которое платформа удостоверений Майкрософт перенаправляет клиент пользователя и отправляет маркеры безопасности после проверки подлинности.

Например, URI перенаправления в рабочем веб-приложении часто является общедоступной конечной точкой, в которой работает приложение, например `https://contoso.com/auth-response`. Во время разработки также можно добавить конечную точку, в которой вы запускаете приложение локально, например `https://127.0.0.1/auth-response` или `http://localhost/auth-response`.

Чтобы добавить и изменить URI перенаправления для зарегистрированных приложений, настройте [параметры платформы](#configure-platform-settings).

### <a name="configure-platform-settings"></a>Настройка параметров платформы

Параметры для каждого типа приложения, включая URI перенаправления, настраиваются в разделе **Конфигурация платформ** на портале Azure. Для некоторых платформ, таких как **веб-** и **одностраничные приложений**, необходимо вручную указать URI перенаправления. Для других платформ, например мобильных устройств и настольных ПК, соответствующие URI перенаправления можно выбрать при настройке других параметров.

Чтобы настроить параметры приложения на основе платформы или устройства, необходимо выбрать целевой объект.

1. Выберите приложение в разделе **Регистрация приложений** на портале Azure.
1. В разделе **Управление** выберите **Проверка подлинности**.
1. В разделе **Конфигурации платформ** щелкните **Добавить платформу**.
1. В разделе **Настройка платформ** выберите плитку типа приложения (платформу), чтобы настроить его параметры.

    :::image type="content" source="media/quickstart-register-app/portal-04-app-reg-03-platform-config.png" alt-text="Снимок экрана портала Azure в веб-браузере с областью регистрации приложения." border="false":::

    | Платформа | Параметры конфигурации |
    | -------- | ---------------------- |
    | **Web** | Введите **URI перенаправления** для приложения — расположение, в которое платформа удостоверений Майкрософт перенаправляет клиента пользователя и отправляет маркеры безопасности после проверки подлинности.<br/><br/>Выберите эту платформу для стандартных веб-приложений, которые выполняются на сервере. |
    | **Одностраничное приложение** | Введите **URI перенаправления** для приложения — расположение, в которое платформа удостоверений Майкрософт перенаправляет клиента пользователя и отправляет маркеры безопасности после проверки подлинности.<br/><br/>Выберите эту платформу, если вы создаете веб-приложение на стороне клиента с использованием JavaScript или с помощью таких платформ, как Angular, Vue.js, React.js или Blazor WebAssembly. |
    | **iOS, macOS** | Введите **идентификатор пакета** для приложения, который можно найти в XCode в файле *Info.plist* или в разделе "Параметры сборки".<br/><br/>При указании идентификатора пакета создается URI перенаправления. |
    | **Android** | Укажите для приложения **имя пакета**, которое указано в файле *AndroidManifest.xml*. Затем создайте и введите **хэш подписи**.<br/><br/>При указании этих параметров создается URI перенаправления. |
    | **Мобильные и классические приложения** | Выберите один из **предлагаемых URI перенаправления** или укажите **пользовательский URI перенаправления**.<br/>Для классических приложений рекомендуется выполнить следующие действия.<br/>`https://login.microsoftonline.com/common/oauth2/nativeclient`<br/><br/>Выберите эту платформу для мобильных приложений, которые не используют последнюю версию библиотеки проверки подлинности Майкрософт (MSAL) или брокер. Также выберите эту платформу для классических приложений. |
1. Нажмите кнопку **Настроить**, чтобы завершить настройку платформы.

### <a name="redirect-uri-restrictions"></a>Ограничения для URI перенаправления

Существуют определенные ограничения формата URI перенаправления, добавляемого в регистрацию приложения. См. сведения об [ограничениях для URI перенаправления и URL-адресов ответа](reply-url.md).

## <a name="add-credentials"></a>Добавление учетных данных

Учетные данные используются конфиденциальными клиентскими приложениями, которые обращаются к веб-API. Примерами конфиденциальных клиентов являются веб-приложения, другие веб-API, приложения типа "служба" и "управляющая программа". Учетные данные позволяют приложению проходить самостоятельную проверку подлинности, не требуя взаимодействия с пользователем во время выполнения.

Вы можете также добавить сертификаты и секреты клиента (строку) в качестве учетных данных для регистрации конфиденциального клиентского приложения.

:::image type="content" source="media/quickstart-register-app/portal-05-app-reg-04-credentials.png" alt-text="Снимок экрана портала Azure в веб-браузере с областью регистрации приложения.":::

### <a name="add-a-certificate"></a>Добавление сертификата

Сертификаты, иногда называемые *открытым ключом*, — это рекомендуемый тип учетных данных, так как они предоставляют более высокий уровень надежности, чем секрет клиента.

1. Выберите приложение в разделе **Регистрация приложений** на портале Azure.
1. Выберите **Сертификаты и секреты** > **Загрузить сертификат**.
1. Выберите файл, который вы хотите отправить. Он должен быть одного из следующих типов файлов: CER, PEM, CRT.
1. Выберите **Добавить**.

### <a name="add-a-client-secret"></a>Добавление секрета клиента

Секрет клиента, известный также как *пароль приложения*, — это строковое значение, которое ваше приложение может использовать вместо сертификата для идентификации. Это самый простой из двух типов учетных данных, который часто используется во время разработки. Он считается менее безопасным, чем сертификат. Сертификаты следует использовать в приложениях, выполняющихся в рабочей среде.

1. Выберите приложение в разделе **Регистрация приложений** на портале Azure.
1. Выберите **Сертификаты и секреты** >  **Новый секрет клиента**.
1. Добавьте описание секрета клиента.
1. Выберите длительность.
1. Выберите **Добавить**.
1. **Запишите значение секрета** для использования в коде клиентского приложения. Оно *больше не отобразится* после выхода из этой страницы.

## <a name="next-steps"></a>Дальнейшие действия

Клиентским приложениям обычно требуется доступ к ресурсам в веб-API. Помимо защиты клиентского приложения с помощью платформы удостоверений Майкрософт, платформу можно использовать для авторизации доступа к веб-API на основе разрешений по областям.

Перейдите к следующему краткому руководству в серии, чтобы зарегистрировать еще одно приложение для веб-API и предоставить его области действия.

> [!div class="nextstepaction"]
> [Настройка приложения для предоставления веб-API](quickstart-configure-app-expose-web-apis.md)
