---
title: Краткое руководство. Регистрация приложения на платформе удостоверений Майкрософт | Azure
description: Из этого краткого руководства вы узнаете, как зарегистрировать приложение с помощью платформы удостоверений Майкрософт.
services: active-directory
author: mmacy
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: quickstart
ms.workload: identity
ms.date: 09/03/2020
ms.author: marsma
ms.custom: aaddev, identityplatformtop40, contperf-fy21q1, contperf-fy21q2
ms.reviewer: aragra, lenalepa, sureshja
ms.openlocfilehash: 430ab980f51ff06ad5e39d6402abf5f649cc6d39
ms.sourcegitcommit: f377ba5ebd431e8c3579445ff588da664b00b36b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2021
ms.locfileid: "99593101"
---
# <a name="quickstart-register-an-application-with-the-microsoft-identity-platform"></a>Краткое руководство. Регистрация приложения с помощью платформы удостоверений Майкрософт

В этом кратком руководстве вы зарегистрируете приложение на портале Azure, чтобы платформа удостоверений Майкрософт могла предоставлять службы проверки подлинности и авторизации для приложения и пользователей.

Платформа удостоверений Майкрософт обеспечивает управление удостоверениями и доступом (IAM) только для зарегистрированных приложений. Регистрация устанавливает отношение доверия между приложением (будь то клиентское приложение, например веб-или мобильное приложение, или веб-API, которое создает резервную копию клиентского приложения) и поставщиком удостоверений (платформой удостоверений Майкрософт).

## <a name="prerequisites"></a>Предварительные требования

* Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) бесплатно.
* Ознакомление с кратким руководством [Настройка арендатора](quickstart-create-new-tenant.md).

## <a name="register-an-application"></a>Регистрация приложения

Регистрация приложения устанавливает отношения доверия между приложением и платформой удостоверений Майкрософт. Отношение доверия является однонаправленным: ваше приложение доверяет платформе удостоверений Майкрософт, а не наоборот.

Чтобы зарегистрировать приложение, выполните следующие действия.

1. Войдите на <a href="https://portal.azure.com/" target="_blank">портал Azure<span class="docon docon-navigate-external x-hidden-focus"></span></a>.
1. Если у вас есть доступ к нескольким арендаторам, в верхнем меню используйте фильтр **Каталог и подписка** :::image type="icon" source="./media/common/portal-directory-subscription-filter.png" border="false":::, чтобы выбрать арендатор, в котором следует зарегистрировать приложение.
1. Найдите и выберите **Azure Active Directory**.
1. В разделе **Управление** выберите **Регистрация приложений** > **Создать регистрацию**.
1. Введите значение **Name** (Имя) для приложения. Это имя отображается для пользователей вашего приложения. Его можно изменить позже.
1. Укажите, кто может использовать приложение. Таких пользователей иногда называют *аудиторией входа*.

    | Поддерживаемые типы учетных записей | Описание |
    |-------------------------|-------------|
    | **Accounts in this organizational directory only** (Учетные записи только в этом каталоге организации) | Выберите этот параметр, если создаете приложение для использования только пользователями (или гостями) в *вашем* клиенте.<br><br>Это приложение, часто называемое *бизнес-приложением* (LOB), является приложением *с одним арендатором* на платформе удостоверений Майкрософт. |
    | **Учетные записи в любом каталоге организации** | Выберите этот параметр, если вы хотите, чтобы пользователи в *любом* арендаторе Azure Active Directory (Azure AD) могли использовать ваше приложение. Этот вариант подходит, если, например, вы создаете приложение SaaS, которое планируется предоставить нескольким организациям.<br><br>На платформе удостоверений Майкрософт оно называется приложением с *несколькими арендаторами*. |
    | **Accounts in any organizational directory and personal Microsoft accounts** (Учетные записи в любом каталоге организации и личные учетные записи Майкрософт) | Выберите этот параметр для широкого круга клиентов.<br><br>При выборе этого параметра регистрируется приложение *с несколькими арендаторами*, в котором поддерживаются пользователи с личными *учетными записями Майкрософт*. |
    | **Personal Microsoft accounts** (Личные учетные записи Майкрософт) | Выберите этот параметр, если вы создаете приложение для использования только пользователями с личными учетными записями Майкрософт. Личные учетные записи Майкрософт включают в себя учетные записи Skype, Xbox, Live и Hotmail. |

1. Не вводите значение для **URI перенаправления (необязательно)** . Вы настроите его в следующем разделе.
1. Для завершения исходной регистрации приложения нажмите кнопку **Зарегистрировать**.

    :::image type="content" source="media/quickstart-register-app/portal-02-app-reg-01.png" alt-text="Снимок экрана: портал Azure в веб-браузере с областью регистрации приложения.":::

После завершения регистрации на портале Azure отображается область **Общие сведения** для регистрации приложения. Вы увидите значение **Идентификатор приложения (клиента)** . Это значение, также называемое *идентификатором клиента*, определяет ваше приложение на платформе удостоверений Майкрософт.

Код приложения или, как правило, библиотека аутентификации в приложении, также использует идентификатор клиента. Этот идентификатор используется в ходе проверки маркеров безопасности, получаемых от платформы удостоверений.

:::image type="content" source="media/quickstart-register-app/portal-03-app-reg-02.png" alt-text="Снимок экрана: портал Azure в веб-браузере с областью общих сведений о регистрации приложения.":::

## <a name="add-a-redirect-uri"></a>Добавление URI перенаправления

*URI перенаправления* — это расположение, в которое платформа удостоверений Майкрософт перенаправляет клиент пользователя и отправляет маркеры безопасности после аутентификации.

Например, URI перенаправления в рабочем веб-приложении часто является общедоступной конечной точкой, в которой работает приложение, например `https://contoso.com/auth-response`. Во время разработки также можно добавить конечную точку, в которой вы запускаете приложение локально, например `https://127.0.0.1/auth-response` или `http://localhost/auth-response`.

Чтобы добавить и изменить URI перенаправления для зарегистрированных приложений, настройте [параметры платформы](#configure-platform-settings).

### <a name="configure-platform-settings"></a>Настройка параметров платформы

Параметры для каждого типа приложения, включая URI перенаправления, настраиваются в разделе **Конфигурация платформ** на портале Azure. Для некоторых платформ, таких как **веб-** и **одностраничные приложений**, необходимо вручную указать URI перенаправления. Для других платформ, например мобильных устройств и настольных ПК, соответствующие URI перенаправления можно выбрать при настройке других параметров.

Чтобы настроить параметры приложения на основе платформы или устройства, необходимо выбрать целевой объект.

1. Выберите приложение в разделе **Регистрация приложений** на портале Azure.
1. В разделе **Управление** выберите **Проверка подлинности**.
1. В разделе **Конфигурации платформ** щелкните **Добавить платформу**.
1. В разделе **Настройка платформ** щелкните плитку типа приложения (платформу), чтобы настроить его параметры.

    :::image type="content" source="media/quickstart-register-app/portal-04-app-reg-03-platform-config.png" alt-text="Снимок экрана: область настройки платформ на портале Azure." border="false":::

    | Платформа | Параметры конфигурации |
    | -------- | ---------------------- |
    | **Web** | Введите **URI перенаправления** для своего приложения. URI перенаправления — это расположение, в которое платформа удостоверений Майкрософт перенаправляет клиент пользователя и отправляет маркеры безопасности после аутентификации.<br/><br/>Выберите эту платформу для стандартных веб-приложений, которые выполняются на сервере. |
    | **Одностраничное приложение** | Введите **URI перенаправления** для своего приложения. URI перенаправления — это расположение, в которое платформа удостоверений Майкрософт перенаправляет клиент пользователя и отправляет маркеры безопасности после аутентификации.<br/><br/>Выберите эту платформу, если вы создаете веб-приложение на стороне клиента с использованием JavaScript или с помощью таких платформ, как Angular, Vue.js, React.js или Blazor WebAssembly. |
    | **iOS, macOS** | Введите **идентификатор пакета** приложения. Найдите его в **параметрах сборки** или в Xcode в файле *info.plist*.<br/><br/>При указании **идентификатора пакета** создается URI перенаправления. |
    | **Android** | Введите **имя пакета** приложения. Найдите его в файле *AndroidManifest.xml*. Также создайте и введите **хэш подписи**.<br/><br/>При указании этих параметров создается URI перенаправления. |
    | **Мобильные и классические приложения** | Выберите один из **предлагаемых URI перенаправления**. Или же укажите **пользовательский URI перенаправления**.<br/><br/>Для классических приложений рекомендуется использовать<br/>`https://login.microsoftonline.com/common/oauth2/nativeclient`<br/><br/>Выберите эту платформу для мобильных приложений, которые не используют последнюю версию библиотеки аутентификации Майкрософт (MSAL) или брокер. Также выберите эту платформу для классических приложений. |
1. Нажмите кнопку **Настроить**, чтобы завершить настройку платформы.

### <a name="redirect-uri-restrictions"></a>Ограничения для URI перенаправления

Существуют определенные ограничения формата URI перенаправления, добавляемого в регистрацию приложения. См. сведения об [ограничениях для URI перенаправления и URL-адресов ответа](reply-url.md).

## <a name="add-credentials"></a>Добавление учетных данных

Учетные данные используются [конфиденциальными клиентскими приложениями](msal-client-applications.md), которые обращаются к веб-API. Примерами конфиденциальных клиентов являются [веб-приложения](scenario-web-app-call-api-overview.md), другие [веб-API](scenario-protected-web-api-overview.md), [приложения типа "служба" и "управляющая программа"](scenario-daemon-overview.md). Учетные данные позволяют приложению проходить самостоятельную проверку подлинности, не требуя взаимодействия с пользователем во время выполнения. 

Вы можете также добавить сертификаты и секреты клиента (строку) в качестве учетных данных для регистрации конфиденциального клиентского приложения.

:::image type="content" source="media/quickstart-register-app/portal-05-app-reg-04-credentials.png" alt-text="Снимок экрана: портал Azure с областью сертификатов и секретов в разделе регистрации приложений.":::

### <a name="add-a-certificate"></a>Добавление сертификата

Сертификат, который иногда называется *открытым ключом*, является рекомендуемым типом учетных данных. Он обеспечивает дополнительную защиту по сравнению с секретом клиента. Дополнительные сведения об использовании сертификата в качестве метода аутентификации в приложении см. в статье [Учетные данные сертификата аутентификации приложения платформы удостоверений Майкрософт](active-directory-certificate-credentials.md).

1. Выберите приложение в разделе **Регистрация приложений** на портале Azure.
1. Выберите **Сертификаты и секреты** > **Загрузить сертификат**.
1. Выберите отправляемый файл. Он должен быть одного из следующих типов файлов: *CER*, *PEM*, *CRT*.
1. Выберите **Добавить**.

### <a name="add-a-client-secret"></a>Добавление секрета клиента

Секрет клиента также называется *паролем приложения*. Это строковое значение, которое приложение может использовать для идентификации вместо сертификата. Секрет клиента — это более простой для использования тип учетных данных. Он часто используется во время разработки, но считается менее безопасным, чем сертификат. В рабочей среде для приложений следует использовать сертификаты. 

Дополнительные сведения о рекомендациях по обеспечению безопасности приложений см. в статье [Рекомендации по использованию платформы удостоверений Майкрософт](identity-platform-integration-checklist.md#security).

1. Выберите приложение в разделе **Регистрация приложений** на портале Azure.
1. Выберите **Сертификаты и секреты** >  **Новый секрет клиента**.
1. Добавьте описание секрета клиента.
1. Выберите длительность.
1. Выберите **Добавить**.
1. *Запишите значение секрета*, чтобы затем использовать его в коде клиентского приложения. Это значение секрета *больше нигде не отображается* после закрытия страницы.


## <a name="next-steps"></a>Дальнейшие действия

Клиентским приложениям обычно требуется доступ к ресурсам в веб-API. Вы можете защитить клиентское приложение с помощью платформы удостоверений Майкрософт. Кроме того, вы можете использовать платформу для авторизации ограниченного определенной областью доступа к веб-API на основе разрешений.

Перейдите к следующему краткому руководству в серии, чтобы зарегистрировать еще одно приложение для веб-API и предоставить его области действия.

> [!div class="nextstepaction"]
> [Настройка приложения для предоставления веб-API](quickstart-configure-app-expose-web-apis.md)
