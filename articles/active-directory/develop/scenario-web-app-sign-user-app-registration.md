---
title: Веб-приложение, которое подписывает пользователей (регистрация приложения) — платформа Microsoft Identity
description: Узнайте, как создать веб-приложение, которое входит в систему пользователей (регистрация приложений)
services: active-directory
documentationcenter: dev-center-name
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 10/30/2019
ms.author: jmprieur
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: 0d840cbaba2cc8325c619248bb7f4421d3b2f83c
ms.sourcegitcommit: 6bb98654e97d213c549b23ebb161bda4468a1997
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74766078"
---
# <a name="web-app-that-signs-in-users-app-registration"></a>Веб-приложение, которое входит в систему пользователей: регистрация приложения

В этой статье объясняются особенности регистрации приложений для веб-приложения, которое входит в систему пользователей.

Чтобы зарегистрировать приложение, можно использовать:

- [Краткое руководство по веб-приложению](#register-an-app-by-using-the-quickstarts). Кроме того, что очень удобно при создании приложения, краткие руководства в портал Azure содержат кнопку с именем **внести это изменение**. С помощью этой кнопки можно задать нужные свойства даже для существующего приложения. Необходимо адаптировать значения этих свойств к своему собственному случаю. В частности, веб-интерфейс API для вашего приложения, вероятно, будет отличаться от предложенного по умолчанию, что также повлияет на универсальный код ресурса (URI) выхода.
- Портал Azure для [регистрации приложения вручную](#register-an-app-by-using-the-azure-portal).
- PowerShell и программы командной строки.

## <a name="register-an-app-by-using-the-quickstarts"></a>Регистрация приложения с помощью кратких руководств

Эти ссылки можно использовать для начальной загрузки создания веб-приложения.

- [ASP.NET Core](https://aka.ms/aspnetcore2-1-aad-quickstart-v2)
- [ASP.NET](https://ms.portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/applicationsListBlade/quickStartType/AspNetWebAppQuickstartPage/sourceType/docs)

## <a name="register-an-app-by-using-the-azure-portal"></a>Регистрация приложения с помощью портал Azure

> [!NOTE]
> Используемый портал отличается в зависимости от того, выполняется ли ваше приложение в Microsoft Azure общедоступном облаке или в национальной или независимых облаке. Дополнительные сведения см. в статье [местные облака](./authentication-national-cloud.md#app-registration-endpoints).


1. Войдите на [портал Azure](https://portal.azure.com) с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи. Кроме того, можно войти в портал Azure для национального облака.
1. Если ваша учетная запись предоставляет доступ к нескольким клиентам, выберите свою учетную запись в правом верхнем углу. Затем задайте для сеанса портала требуемый клиент Azure Active Directory (Azure AD).
1. В левой области выберите службу **Azure Active Directory** , а затем выберите **Регистрация приложений** > **Новая регистрация**.

# <a name="aspnet-coretabaspnetcore"></a>[ASP.NET Core](#tab/aspnetcore)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Выберите поддерживаемые типы учетных записей для приложения. (См. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md).)
   1. В разделе **имя** введите понятное имя приложения, которое будет отображаться для пользователей приложения. Например, введите **AspNetCore-webapp**.
   1. Для **URI перенаправления**добавьте тип приложения и назначение URI, которые будут принимать возвращенные ответы токена после успешной проверки подлинности. Например, введите **https://localhost:44321** . Затем щелкните **Регистрация**.
1. Выберите меню **Проверка подлинности**, а затем добавьте следующие сведения:
   1. В качестве **URL-адреса ответа**добавьте **https://localhost:44321/signin-oidc** типа **Web**.
   1. В разделе **Дополнительные параметры** задайте для параметра **URL-адрес выхода** значение **https://localhost:44321/signout-oidc** .
   1. В разделе **неявное предоставление**выберите **токены идентификации**.
   1. Щелкните **Сохранить**.

# <a name="aspnettabaspnet"></a>[ASP.NET](#tab/aspnet)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Выберите поддерживаемые типы учетных записей для приложения. (См. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md).)
   1. В разделе **имя** введите понятное имя приложения, которое будет отображаться для пользователей приложения. Например, введите **маилапп-openidconnect-v2**.
   1. В разделе **URI перенаправления (необязательно)** выберите **Web** в поле со СПИСКОМ и введите следующий URI перенаправления: **https://localhost:44326/** .
1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. Выберите меню **Проверка подлинности** .
1. В разделе **Дополнительные параметры** | **неявное предоставление** выберите **токены идентификации**. Для работы с этим образцом необходимо включить [неявный поток предоставления](v2-oauth2-implicit-grant-flow.md) для входа пользователя.
1. Щелкните **Сохранить**.

# <a name="javatabjava"></a>[Java](#tab/java)

1. Когда появится **страница Регистрация приложения** , введите отображаемое имя приложения. Например, введите **Java-webapp**.
1. Выберите **учетные записи в любом организационном каталоге и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)** , а затем выберите **веб-приложение или API** для **типа приложения**.
1. Выберите **зарегистрировать** , чтобы зарегистрировать приложение.
1. В меню слева выберите **Проверка подлинности**. В разделе **URI перенаправления**выберите **веб**.

1. Введите два URI перенаправления: один для страницы входа и один для страницы графа. В обоих случаях используйте один и тот же узел и номер порта, а затем **/msal4jsample/Secure/AAD** для страницы входа и **msal4jsample/Graph/Me** для страницы сведений о пользователе.

   По умолчанию в образце используется:

   - **http://localhost:8080/msal4jsample/secure/aad**
   - **http://localhost:8080/msal4jsample/graph/me**

  Затем нажмите кнопку **Сохранить**.

1. В меню выберите **сертификаты & секреты** .
1. В разделе **секреты клиента** выберите **новый секрет клиента**, а затем:

   1. Введите описание ключа.
   1. Выберите продолжительность ключа **в 1 году**.
   1. Выберите **Добавить**.
   1. Когда отобразится значение ключа, скопируйте его для последующего использования. Это значение не будет отображаться повторно или быть извлечено другими способами.

# <a name="pythontabpython"></a>[Python](#tab/python)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. В разделе **имя** введите понятное имя приложения, которое будет отображаться для пользователей приложения. Например, введите **Python-webapp**.
   1. Измените **Поддерживаемые типы учетных записей** на **учетные записи в любом каталоге Организации и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)** .
   1. В разделе **URI перенаправления (необязательно)** выберите **Web** в поле со СПИСКОМ и введите следующий URI перенаправления: **http://localhost:5000/getAToken** .
1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. На странице приложения **Обзор** найдите **идентификатор приложения (клиента)** и запишите его, чтобы использовать позже. Он понадобится для настройки файла конфигурации Visual Studio для этого проекта.
1. В меню слева выберите **сертификаты & секреты**.
1. В разделе **секреты клиента** выберите **новый секрет клиента**, а затем:

   1. Введите описание ключа.
   1. Выберите срок действия ключа**в 1 год**.
   1. Выберите **Добавить**.
   1. Когда отобразится значение ключа, скопируйте его. Он понадобится вам позднее.
---

## <a name="register-an-app-by-using-powershell"></a>Регистрация приложения с помощью PowerShell

> [!NOTE]
> Сейчас Azure AD PowerShell создает приложения только со следующими поддерживаемыми типами учетных записей:
>
> - Мйорг (учетные записи только в этом каталоге организации)
> - Анйорг (учетные записи в любом каталоге организации)
>
> Вы можете создать приложение, которое будет выполнять вход пользователей с помощью личных учетных записей Майкрософт (например, Skype, Xbox или Outlook.com). Сначала создайте многоклиентское приложение. Поддерживаемые типы учетных записей — это учетные записи в любом каталоге Организации. Затем измените свойство `signInAudience` в манифесте приложения из портал Azure. Дополнительные сведения см. в описании [шага 1,3](https://github.com/Azure-Samples/active-directory-aspnetcore-webapp-openidconnect-v2/tree/master/1-WebApp-OIDC/1-3-AnyOrgOrPersonal#step-1-register-the-sample-with-your-azure-ad-tenant) в руководстве по ASP.NET Core. Этот шаг можно обобщить для веб-приложений на любом языке.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Конфигурация кода приложения](scenario-web-app-sign-user-app-configuration.md)
