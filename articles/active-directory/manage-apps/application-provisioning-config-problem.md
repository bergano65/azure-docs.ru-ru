---
title: Проблема при настройке подготовки пользователей для приложения из коллекции Azure AD | Документы Майкрософт
description: Решение распространенных проблем при настройке подготовки пользователей для приложения из коллекции приложений Azure AD
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 09/03/2019
ms.author: mimart
ms.reviewer: asteen
ms.collection: M365-identity-device-management
ms.openlocfilehash: 9a8eaa46b46551f9b6075ec10b38de80f84c22a0
ms.sourcegitcommit: 0fab4c4f2940e4c7b2ac5a93fcc52d2d5f7ff367
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2019
ms.locfileid: "71034145"
---
# <a name="problem-configuring-user-provisioning-to-an-azure-ad-gallery-application"></a>Проблема при настройке подготовки пользователей для приложения из коллекции Azure AD

При настройке [автоматической подготовки пользователей](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) для приложения (если она поддерживается) необходимо выполнить определенные инструкции для автоматической подготовки приложения. Затем можно настроить службу подготовки для синхронизации учетных записей пользователей для приложения на портале Azure.

Для начала следует найти руководство по настройке подготовки для вашего приложения. Затем выполните указанные в нем действия, чтобы создать подключение подготовки между приложением и Azure AD. Руководства по настройке для приложений можно найти в [Списке руководств по интеграции приложений SaaS в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).

## <a name="how-to-see-if-provisioning-is-working"></a>Как проверить, работает ли развертывание 

После настройки службы большую часть сведений о работе службы можно найти в двух местах:

-   **Журналы подготовки (Предварительная версия)** . [журналы подготовки](../reports-monitoring/concept-provisioning-logs.md?context=azure/active-directory/manage-apps/context/manage-apps-context) записывают все операции, выполняемые службой подготовки, включая запросы Azure AD для назначенных пользователей, которые находятся в области для подготовки. запросы целевого приложения на наличие этих пользователей и сравнение объектов пользователя в разных системах. Затем добавьте, измените или отключите учетную запись пользователя в целевой системе на основе сравнения. Вы можете получить доступ к журналам подготовки в портал Azure, выбрав **Azure Active Directory** &gt; **корпоративные приложения** &gt; **журналы подготовки (Предварительная версия)** в разделе **действие** .

-   **Текущее состояние —** Сводные данные о последнем выполнении подготовки для данного приложения можно просмотреть в разделе "  **&gt; подготовка имени\] &gt; &gt;приложения Azure Active Directory корпоративных приложений \[** " в нижней части экран под параметрами службы. В разделе Текущее состояние указывается, начал ли цикл подготовки учетные записи пользователей. Вы можете отслеживать ход выполнения цикла, узнать, сколько пользователей и групп были подготовлены, и узнать, сколько ролей создано. В случае возникновения ошибок сведения можно найти в [журналах подготовки (Предварительная версия)](../reports-monitoring/concept-provisioning-logs.md?context=azure/active-directory/manage-apps/context/manage-apps-context).

## <a name="general-problem-areas-with-provisioning-to-consider"></a>Общие проблемные области при подготовке, которые необходимо учитывать

Ниже приведен список общих проблемных областей, в которые можно углубиться, если у вас есть какие-то идеи.

* [Служба подготовки не запускается](#provisioning-service-does-not-appear-to-start)
* Не удалось сохранить конфигурацию из-за недействительных учетных данных приложения
* [Журналы подготовки говорят, что пользователи пропускаются и не подготавливаются, даже если они назначены](#provisioning-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned)

## <a name="provisioning-service-does-not-appear-to-start"></a>Служба подготовки не запускается

Предположим, что вы установили параметр **Состояние подготовки** в значение **Вкл** в разделе **Azure Active Directory &gt; Корпоративные приложения &gt; \[имя приложения\] &gt;Подготовка** портала Azure. Однако при последующей перезагрузке никакие другие сведения о состоянии на этой странице не отображаются. Скорее всего, служба запущена, но еще не завершила первоначальный цикл. Проверьте **журналы подготовки** , описанные выше, чтобы определить, какие операции выполняет служба, и в случае каких-либо ошибок.

>[!NOTE]
>Начальный цикл может занять от 20 минут до нескольких часов, в зависимости от размера каталога Azure AD и числа пользователей в области для подготовки. Последующие операции синхронизации после начального цикла будут выполняться быстрее, так как служба подготовки сохраняет водяные знаки, представляющие состояние обеих систем после начального цикла, повышая производительность последующих синхронизаций.
>
>

## <a name="cant-save-configuration-due-to-app-credentials-not-working"></a>Не удалось сохранить конфигурацию из-за недействительных учетных данных приложения

Для подготовки Azure AD требуются действительные учетные данные для подключения к API управления пользователями для этого приложения. Если эти учетные данные не работают или вы их не знаете, обратитесь к руководству по настройке этого приложения, приведенному выше.

## <a name="provisioning-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned"></a>Журналы подготовки говорят, что пользователи пропускаются и не подготавливаются, даже если они назначены

Когда пользователь отображается как "пропущено" в журналах подготовки, очень важно прочитать расширенные сведения в сообщении журнала, чтобы определить причину. Ниже приведены распространенные причины и способы устранения ошибок:

- **Настроен фильтр области** **, который фильтрует пользователей на основе значения атрибута**. Дополнительные сведения о фильтрах области см. по ссылке <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.

- **Пользователь "не имеет фактических прав".** Если вы видите это сообщение об ошибке, это свидетельствует о наличии проблемы с записью назначения пользователя, которая хранится в Azure AD. Для устранения этой проблемы отмените назначение пользователя (или группы) для приложения и повторно назначьте пользователя (или группу). Дополнительные сведения о назначении см. по ссылке <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.

- **Обязательный атрибут для пользователя отсутствует или его значение не указано.** При настройке подготовки важно просмотреть и настроить сопоставления атрибутов и рабочие процессы, которые определяют, какие свойства пользователя (или группы) передаются из Azure AD в приложение. К ним относится "свойство сопоставления", используемое для уникальной идентификации и сопоставления пользователей или групп между двумя системами. Дополнительные сведения об этом важном процессе см. по ссылке <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.

  * **Сопоставление атрибутов для групп**. Подготовка имени группы и сведений о ней, помимо ее участников (если поддерживается для некоторых приложений). Вы можете включить или отключить эту возможность, включая или отключая **сопоставление** для объектов группы, отображающихся на вкладке **Подготовка**. Если подготовка групп включена, обязательно ознакомьтесь с атрибутами сопоставления, чтобы убедиться, что в качестве соответствующего идентификатора используется подходящее поле. В качестве этого поля может использоваться отображаемое имя или псевдоним электронной почты. Если соответствующее свойство для группы в Azure AD не указано или не заполнено, группа и ее участники не будут подготовлены.

## <a name="next-steps"></a>Следующие шаги
[Автоматическая подготовка пользователей и ее отзыв для приложений SaaS в Azure Active Directory](user-provisioning.md)
