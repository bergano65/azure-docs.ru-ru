---
title: Устранение неполадок единого входа на основе пароля в Azure Active Directory
description: Устранение неполадок в приложении Azure AD, настроенном для единого входа на основе пароля.
author: kenwith
manager: celestedg
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.topic: troubleshooting
ms.date: 07/11/2017
ms.author: kenwith
ms.reviewer: asteen
ms.openlocfilehash: d122cedbad41d6984614a0edccb2fd98269710f2
ms.sourcegitcommit: 8192034867ee1fd3925c4a48d890f140ca3918ce
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2020
ms.locfileid: "96618082"
---
# <a name="troubleshoot-password-based-single-sign-on-in-azure-ad"></a>Устранение неполадок с единым входом на основе пароля в Azure AD

Для использования единого входа на основе пароля в "Мои приложения" необходимо установить расширение браузера. Расширение загружается автоматически при выборе приложения, настроенного для единого входа на основе пароля. Дополнительные сведения об использовании моих приложений с точки зрения конечных пользователей см. в [справке по порталу "Мои приложения](../user-help/my-apps-portal-end-user-access.md)".

## <a name="my-apps-browser-extension-not-installed"></a>Расширение браузера "Мои приложения" не установлено
Убедитесь, что расширение браузера установлено. Дополнительные сведения см. в статье [планирование Azure Active Directory развертывания приложений](access-panel-deployment-plan.md). 

## <a name="single-sign-on-not-configured"></a>Единый вход не настроен
Убедитесь, что единый вход на основе пароля настроен. Дополнительные сведения см. в разделе [Настройка единого входа на основе пароля](configure-password-single-sign-on-non-gallery-applications.md).

## <a name="users-not-assigned"></a>Пользователи не назначены
Убедитесь, что пользователь назначен приложению. Дополнительные сведения см. в разделе [Назначение пользователя или группы приложению](assign-user-or-group-access-portal.md).

## <a name="credentials-are-filled-in-but-the-extension-does-not-submit-them"></a>Учетные данные заполняются, но расширение не отправляет их

Такая проблема обычно происходит, если разработчик приложения недавно изменил страницу входа, добавив на нее новое поле, изменил идентификаторы, с помощью которых определяются поля имени пользователя и пароля, или изменил процедуру входа для своего приложения. К счастью, во многих случаях корпорация Майкрософт может быстро решить эти проблемы совместно с разработчиками приложений.

Хотя у корпорации Майкрософт есть технологии для автоматического определения нарушений интеграции, иногда не возможно определить проблемы незамедлительно или для их устранение требуется некоторое время. При наличии таких нарушений интеграции просим отправить запрос в службу поддержки, чтобы решить проблему как можно быстрее.

**Если вы работаете с поставщиком приложения**, отправьте ему наши рекомендации, чтобы корпорация Майкрософт смогла интегрировать его приложение в Azure Active Directory. Для начала можете отправить разработчику приложения ссылку на статью [Добавление приложения в коллекцию приложений Azure Active Directory](../develop/v2-howto-app-gallery-listing.md).

## <a name="credentials-are-filled-in-and-submitted-but-the-page-indicates-the-credentials-are-incorrect"></a>Учетные данные заполняются и отправляются, но на странице указано, что учетные данные неверны

Чтобы устранить эту проблему, сначала попробуйте выполнить следующие действия:

- Пользователь должен попробовать **войти на веб-сайт приложения напрямую** с сохраненными учетными данными.

  * Если вход работает, то пользователь должен нажать кнопку **обновить учетные данные** на **плитке приложения** в **разделе "приложения** " окна " [Мои приложения](https://myapps.microsoft.com/) ", чтобы обновить их до последнего известного рабочего имени пользователя и пароля.

  * Если вы или другой администратор назначили учетные данные для этого пользователя, найдите назначение для пользователя или группы приложений, перейдя на вкладку **Пользователи и группы** для приложения, выберите назначение и нажмите кнопку **Обновить учетные данные**.

- Если пользователю назначены собственные учетные данные, попросите его **проверить, что срок действия пароля в приложении не истек**. Если срок действия истек, **обновите пароль**, войдя в приложение напрямую.

  * После обновления пароля в приложении Запросите пользователя нажать кнопку **обновить учетные данные** на **плитке приложения** в **разделе "приложения** " раздела " [Мои приложения](https://myapps.microsoft.com/) ", чтобы обновить их до последнего известного рабочего имени пользователя и пароля.

  * Если вы или другой администратор назначили учетные данные для этого пользователя, найдите назначение для пользователя или группы приложений, перейдя на вкладку **Пользователи и группы** для приложения, выберите назначение и нажмите кнопку **Обновить учетные данные**.

- Убедитесь, что расширение браузера "Мои приложения" работает и включено в браузере пользователя.

- Убедитесь, что пользователи не пытаются войти в приложение из моих приложений в **режиме инкогнито, InPrivate или частном режиме**. Расширение "Мои приложения" не поддерживается в этих режимах.

Если приведенные рекомендации не помогли, возможно, причина заключается в том, что приложение было изменено, и в результате интеграция приложения с Azure AD оказалась нарушена. Например, это может произойти, если разработчик приложения разместил скрипт, который ведет себя по-разному для ручного и автоматизированного ввода данных, и этот скрипт привел к нарушению автоматической интеграции. К счастью, во многих случаях корпорация Майкрософт может быстро решить эти проблемы совместно с разработчиками приложений.

Хотя у корпорации Майкрософт есть технологии для автоматического определения нарушений интеграций приложения, иногда не возможно определить проблемы незамедлительно или для их устранение может потребоваться некоторое время. При неправильной работе интеграции вы можете отправить запрос в службу поддержки, чтобы устранить эту проблему как можно быстрее. 

Кроме того, **если вы работаете с поставщиком приложения,** **отправьте ему наши рекомендации**, чтобы мы смогли интегрировать его приложение в Azure Active Directory. Для начала можете отправить разработчику приложения ссылку на статью [Добавление приложения в коллекцию приложений Azure Active Directory](../develop/v2-howto-app-gallery-listing.md).

## <a name="check-if-the-applications-login-page-has-changed-recently-or-requires-an-additional-field"></a>Проверьте, не была ли страница входа приложения недавно изменена и не появились ли на ней дополнительные поля.

Если страница входа приложения сильно изменилась, это может привести к нарушению нашей интеграции. К таким ситуациям относится добавление на страницу поля входа в систему, поля captcha или многофакторной проверки подлинности. К счастью, во многих случаях корпорация Майкрософт может быстро решить эти проблемы совместно с разработчиками приложений.

Хотя у корпорации Майкрософт есть технологии для автоматического определения нарушений интеграций приложения, иногда не возможно определить проблемы незамедлительно или для их устранение может потребоваться некоторое время. При неправильной работе интеграции вы можете отправить запрос в службу поддержки, чтобы устранить эту проблему как можно быстрее. 

Кроме того, **если вы работаете с поставщиком приложения,** **отправьте ему наши рекомендации**, чтобы мы смогли интегрировать его приложение в Azure Active Directory. Для начала можете отправить разработчику приложения ссылку на статью [Добавление приложения в коллекцию приложений Azure Active Directory](../develop/v2-howto-app-gallery-listing.md).

## <a name="capture-sign-in-fields-for-an-app"></a>Запись полей входа для приложения

Запись полей входа поддерживается только для страниц входа, поддерживающих HTML. Она не поддерживается для нестандартных страниц входа, например для тех, кто использует Adobe Flash или другие технологии, не поддерживающие HTML.

Существует два способа записи полей входа для пользовательских приложений.

- **Автоматический захват полей входа** хорошо работает с большинством страниц входа, поддерживающих HTML, *если они используют известные идентификаторы div* в полях имя пользователя и пароль. HTML-код на странице забракован, чтобы найти идентификаторы DIV, соответствующие определенным критериям. Эти метаданные сохраняются, чтобы их можно было воспроизвести в приложении позже.

- **Захват поля входа вручную** используется, если поставщик приложения *не помечает поля ввода входа*. Ручной захват также используется, если поставщик *отображает несколько полей, которые не могут быть обнаружены автоматически*. Azure Active Directory (Azure AD) может хранить данные для любого количества полей на странице входа, если указать, где эти поля находятся на странице.

В общем случае, если автоматическое отслеживание полей входа не работает, попробуйте выполнить настройку вручную.

### <a name="automatically-capture-sign-in-fields-for-an-app"></a>Автоматически записывать поля входа для приложения

Чтобы настроить единый вход на основе пароля с помощью автоматического захвата полей входа, выполните следующие действия.
1. Откройте [портал Azure](https://portal.azure.com/). Войдите в систему как глобальный администратор или Соадминистратор.
2. В области навигации слева выберите **все службы** , чтобы открыть расширение Azure AD.
3. В поле фильтра поиска введите **Azure Active Directory** , а затем выберите **Azure Active Directory**.
4. Выберите **корпоративные приложения** в области навигации Azure AD.
5. Выберите **все приложения** , чтобы просмотреть список приложений.
   > [!NOTE]
   > Если нужное приложение не отображается, используйте элемент управления **Фильтр** в верхней части списка **все приложения** . Задайте для параметра " **Показывать** " значение "все приложения".
6. Выберите приложение, которое требуется настроить для единого входа.
7. После загрузки приложения выберите **единый вход** в области навигации в левой части.
8. Выберите режим **входа на основе пароля** .
9. Введите URL-адрес **входа**, который является URL страницы, где пользователи вводят имя пользователя и пароль для входа. *Убедитесь, что поля входа отображаются на странице предоставленного URL-адреса*.
10. Нажмите **Сохранить**.
    Страница автоматически забракована для полей ввода имени пользователя и пароля. Теперь вы можете использовать Azure AD для безопасной передачи паролей в это приложение с помощью расширения браузера "Мои приложения".

### <a name="manually-capture-sign-in-fields-for-an-app"></a>Ручная запись полей входа для приложения

Чтобы вручную записать поля входа, необходимо установить расширение браузера "Мои приложения". Кроме того, браузер не может работать в режиме *InPrivate*, *режиме инкогнито* или *Private* .

Чтобы настроить единый вход на основе пароля для приложения с помощью записи полей входа вручную, выполните следующие действия.
1. Откройте [портал Azure](https://portal.azure.com/). Войдите в систему как глобальный администратор или Соадминистратор.
2. В области навигации слева выберите **все службы** , чтобы открыть расширение Azure AD.
3. В поле фильтра поиска введите **Azure Active Directory** , а затем выберите **Azure Active Directory**.
4. Выберите **корпоративные приложения** в области навигации Azure AD.
5. Выберите **все приложения** , чтобы просмотреть список приложений.
   > [!NOTE] 
   > Если нужное приложение не отображается, используйте элемент управления **Фильтр** в верхней части списка **все приложения** . Задайте для параметра " **Показывать** " значение "все приложения".
6. Выберите приложение, которое требуется настроить для единого входа.
7. После загрузки приложения выберите **единый вход** в области навигации в левой части.
8. Выберите режим **входа на основе пароля** .
9. Введите **URL-адрес входа**, который представляет собой страницу, где пользователи вводят имя пользователя и пароль для входа. *Убедитесь, что поля входа отображаются на странице предоставленного URL-адреса*.
10. Выберите **настроить *&lt; AppName &gt;* пароль параметры единого входа**.
11. Выберите **вручную определять поля входа**.
14. Щелкните **ОК**.
15. Щелкните **Сохранить**.
16. Следуйте инструкциям, чтобы использовать мои приложения.


## <a name="troubleshoot-problems"></a>Устранение неполадок

### <a name="i-get-a-we-couldnt-find-any-sign-in-fields-at-that-url-error"></a>Я получаю сообщение об ошибке «не удалось найти поля входа по этому URL-адресу».

Это сообщение об ошибке появляется при сбое автоматического обнаружения полей входа. Чтобы устранить эту проблему, попробуйте выполнить обнаружение полей входа вручную. См. раздел [ручное отслеживание входных полей для приложения в](#manually-capture-sign-in-fields-for-an-app) этой статье.

### <a name="i-get-an-unable-to-save-single-sign-on-configuration-error"></a>Я получаю сообщение об ошибке "не удается сохранить конфигурацию единого входа"

В редких случаях обновление конфигурации единого входа не выполняется. Чтобы устранить эту проблему, попробуйте сохранить конфигурацию еще раз.

Если вы продолжаете получать ошибку, откройте обращение в службу поддержки. Включите сведения, описанные в сведениях об [уведомлении портала](#view-portal-notification-details) , и [отправьте сведения об уведомлении инженеру службы поддержки, чтобы получить разделы справки](#send-notification-details-to-a-support-engineer-to-get-help) по этой статье.

### <a name="i-cant-manually-detect-sign-in-fields-for-my-app"></a>Не удается определить поля входа для моего приложения вручную

При неработающем ручном обнаружении может возникнуть следующее поведение:
- Процесс ручного отслеживания работал, но захваченные поля неверны.
- При выполнении процесса отслеживания не выделяются правильные поля.
- Процесс записи переходит на страницу входа приложения, как ожидалось, но ничего не происходит.
- Запись вручную работает, но SSO не происходит, когда пользователи переходят в приложение из папки "Мои приложения".

При возникновении этих проблем выполните следующие действия.
- Убедитесь, что *установлена и включена* последняя версия расширения браузера "Мои приложения".
- Убедитесь, что браузер не находится в *режиме инкогнито*, *InPrivate* или *частном* режиме во время процесса записи. Расширение "Мои приложения" не поддерживается в этих режимах.
- Убедитесь, что пользователи не пытаются войти в приложение из папки "Мои приложения" в *режиме инкогнито*, *InPrivate* или *частном режиме*.
- Попробуйте повторить процесс записи вручную. Убедитесь, что красные маркеры находятся над правильными полями.
- Если процесс ручного отслеживания, как кажется, перестает отвечать на запросы, или страница входа не отвечает, попробуйте вручную выполнить процесс записи. Но на этот раз после завершения процесса нажмите клавишу F12, чтобы открыть консоль разработчика в браузере. Перейдите на вкладку **консоль** . Введите **Window. Location = "*&lt; URL-адрес входа, указанный при настройке &gt; приложения*"**, а затем нажмите клавишу ВВОД. Это приводит к принудительному перенаправлению страницы, завершающему процесс отслеживания, и сохраняет записанные поля.

### <a name="i-cant-add-another-user-to-my-password-based-sso-app"></a>Не удается добавить другого пользователя в приложение единого входа на основе пароля

Приложение единого входа на основе пароля имеет ограничение в 48 пользователей. Таким же ограничение составляет 48 ключей для пар "имя пользователя-пароль" для каждого приложения.
Если вы хотите добавить дополнительных пользователей, можно выполнить одно из следующих действий:
-   Добавить дополнительный экземпляр приложения
-   Удалить пользователей, которые больше не используют приложение

## <a name="request-support"></a>Создание запроса 
Если при настройке единого входа и назначении пользователей появляется сообщение об ошибке, откройте запрос в службу поддержки. Включите как можно больше следующих сведений:

-   идентификатор ошибки корреляции;
-   имя участника-пользователя (адрес электронной почты пользователя);
-   идентификатор клиента;
-   тип браузера;
-   Часовой пояс и интервал времени и времени, когда произошла ошибка
-   трассировки Fiddler.

### <a name="view-portal-notification-details"></a>Просмотр сведений об уведомлении портала

Чтобы просмотреть сведения о любом уведомлении портала, выполните следующие действия.
1. Щелкните значок **уведомления** (колокольчик) в правом верхнем углу портал Azure.
2. Выберите любое уведомление, показывающее состояние *ошибки* . (У них есть красный знак "!".)
   > [!NOTE]
   > Нельзя выбрать уведомления, которые находятся в состоянии " *успешно* " или " *выполняется* ".
3. Откроется панель **Сведения об уведомлении**. Дополнительные сведения о проблеме см. в этой статье.
5. Если вам по-прежнему нужна помощь, поделитесь информацией со специалистом службы поддержки или группой продуктов. Щелкните значок **копирования** справа от поля **Копировать ошибку** , чтобы скопировать сведения об уведомлении для совместного использования.

### <a name="send-notification-details-to-a-support-engineer-to-get-help"></a>Отправка сведений об уведомлении инженеру службы поддержки для получения справки

Важно поделиться *всеми* сведениями, перечисленными в этом разделе, с поддержкой, чтобы они могли быстро получить помощь. Чтобы записать его, можно создать снимок экрана или выбрать **ошибку копирования**.

В следующей информации объясняется, что означает каждый элемент уведомления, и приводятся примеры.

#### <a name="essential-notification-items"></a>Ключевые элементы уведомлений

- **Title**: описательное название уведомления.

   Пример. *Параметры прокси приложения*

- **Описание**: что произошло в результате операции.

   Пример: *указанный внутренний URL-адрес уже используется другим приложением.*

- **ИД уведомления**: уникальный идентификатор уведомления.

    Пример: *клиентнотификатион-2adbfc06-2073-4678-A69F-7eb78d96b068*

- **Идентификатор запроса клиента**: конкретный идентификатор запроса, сделанный вашим браузером.

    Пример: *302fd775-3329-4670-a9f3-bea37004f0bc*

- **Метка времени UTC**: метка времени, когда было получено уведомление, в формате UTC.

    Пример: *2017-03-23T19:50:43.7583681 z*

- **Внутренний идентификатор транзакции**. Внутренний идентификатор, используемый для поиска ошибки в наших системах.

    Пример: **71a2f329-ca29-402f-aa72-bc00a7aca603**

- **UPN**: пользователь, запустивший операцию.

    Пример: *тперкинс \@ f128.info*

- **Идентификатор клиента**: уникальный идентификатор клиента, членом которого является пользователь, запустивший операцию.

    Пример: *7918d4b5-0442-4a97-be2d-36f9f9962ece*

- **Идентификатор объекта пользователя**: уникальный идентификатор пользователя, выполнившего операцию.

    Пример: *17f84be4-51f8-483a-b533-383791227a99*

#### <a name="detailed-notification-items"></a>Подробные элементы уведомления

- **Отображаемое имя**: (может быть пустым) более подробно отображаемое имя ошибки.

    Пример. *Параметры прокси приложения*

- **Состояние**: конкретное состояние уведомления.

    Пример: *сбой*

- **Идентификатор объекта**: (может быть пустым) идентификатор объекта, с которым была выполнена операция.

   Пример: *8e08161d-f2fd-40ad-a34a-a9632d6bb599*

- **Сведения**: подробное описание того, что произошло в результате операции.

    Пример: *внутренний URL-адрес " <https://bing.com/> " является недопустимым, так как он уже используется.*

- **Ошибка копирования**: позволяет выбрать **значок копирования** справа от текстового поля **Копировать ошибку** , чтобы скопировать сведения об уведомлении для получения поддержки.

    Например   ```{"errorCode":"InternalUrl\_Duplicate","localizedErrorDetails":{"errorDetail":"Internal url 'https://google.com/' is invalid since it is already in use"},"operationResults":\[{"objectId":null,"displayName":null,"status":0,"details":"Internal url 'https://bing.com/' is invalid since it is already in use"}\],"timeStampUtc":"2017-03-23T19:50:26.465743Z","clientRequestId":"302fd775-3329-4670-a9f3-bea37004f0bb","internalTransactionId":"ea5b5475-03b9-4f08-8e95-bbb11289ab65","upn":"tperkins@f128.info","tenantId":"7918d4b5-0442-4a97-be2d-36f9f9962ece","userObjectId":"17f84be4-51f8-483a-b533-383791227a99"}```


## <a name="next-steps"></a>Дальнейшие действия
* [Серия кратких руководств по управлению приложениями](view-applications-portal.md)
* [Планирование развертывания "Мои приложения"](access-panel-deployment-plan.md)
