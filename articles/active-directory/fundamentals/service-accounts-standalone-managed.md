---
title: Защита автономных управляемых учетных записей служб | Azure Active Directory
description: Рекомендации по защите автономных управляемых учетных записей служб.
services: active-directory
author: BarbaraSelden
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.subservice: fundamentals
ms.topic: conceptual
ms.date: 2/15/2021
ms.author: baselden
ms.reviewer: ajburnle
ms.custom: it-pro, seodec18
ms.collection: M365-identity-device-management
ms.openlocfilehash: 08a919338789a02d50cbb6976ee50b214cb0d612
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100417958"
---
# <a name="securing-standalone-managed-service-accounts"></a>Защита автономных управляемых учетных записей служб

Автономные управляемые учетные записи служб (Смсас) — это управляемые учетные записи домена, используемые для защиты одной или нескольких служб, выполняющихся на сервере. Их нельзя повторно использовать на нескольких серверах. Смсас обеспечивают автоматическое управление паролями, упрощенное управление именами участников-служб (SPN) и возможность делегирования управления другим администраторам. 

В Active Directory Смсас привязаны к определенному серверу, на котором выполняется служба. Эти учетные записи можно найти в списке оснастки "пользователи и компьютеры" консоли управления (Майкрософт) Active Directory.

![Снимок экрана: оснастка "Active Directory пользователи и компьютеры" с подразделением "управляемые учетные записи служб".](./media/securing-service-accounts/secure-standalone-msa-image-1.png)

Управляемые учетные записи служб появились в Windows Server 2008R2 Active Directory Schema и нуждаются в минимальном уровне ОС Windows Server 2008R2. 

## <a name="benefits-of-using-smsas"></a>Преимущества использования Смсас

Смсас обеспечивают повышенную безопасность, чем учетные записи пользователей, используемые в качестве учетных записей служб, при этом уменьшая затраты на администрирование:

* Установка надежных паролей. Смсас используют генерируемые случайным образом сложные пароли 240 байт. Сложность и длина паролей sMSA снижают вероятность нарушения работы службы при атаках методом подбора или словарной атаки.

* Регулярное переключение паролей. Windows автоматически изменяет пароль sMSA каждые 30 дней. Администраторам служб и доменов не нужно запланировать изменения паролей или управлять связанным временем простоя.

* Упрощение управления именами участников-служб. Имена субъектов-служб автоматически обновляются, если режим работы домена (ДФЛ) — Windows Server 2008 R2. Например, имя субъекта-службы автоматически обновляется в следующих сценариях:

   * Учетная запись главного компьютера переименовывается. 

   * Изменилось DNS-имя главного компьютера.

   * При добавлении или удалении дополнительных параметров SAM-AccountName или DNS-hostname с помощью [PowerShell](https://docs.microsoft.com/powershell/module/addsadministration/set-adserviceaccount?view=win10-ps)

## <a name="when-to-use-smsas"></a>Когда следует использовать Смсас

Смсас может упростить задачи управления и обеспечения безопасности. Используйте Смсас, если одна или несколько служб развернуты на одном сервере и вы не можете использовать gMSA. 

> [!NOTE] 
> Хотя Смсас можно использовать для нескольких служб, рекомендуется, чтобы каждая служба имела свое удостоверение для целей аудита. 

Если создатель программного обеспечения не может сообщить вам, может ли он использовать MSA, необходимо протестировать приложение. Для этого создайте тестовую среду и убедитесь, что она может получить доступ ко всем необходимым ресурсам. Пошаговые инструкции см. [в статье Создание и установка sMSA](https://docs.microsoft.com/archive/blogs/askds/managed-service-accounts-understanding-implementing-best-practices-and-troubleshooting) .

### <a name="assess-security-posture-of-smsas"></a>Оценка уровня безопасности Смсас

Смсас по своей природе более безопасны, чем стандартные учетные записи пользователей, требующие постоянного управления паролями. Однако важно учитывать Смсас "область доступа как часть общего уровня безопасности.

В следующей таблице показано, как устранить потенциальные проблемы безопасности, связанные с Смсас.

| Проблемы с безопасностью| Устранение проблем |
| - | - |
| sMSA является членом привилегированных групп|Удалите sMSA из привилегированных групп с повышенными привилегиями (например, администраторов домена). <br> Используйте модель с наименьшим уровнем привилегий и предоставьте sMSA только права и разрешения, необходимые для запуска служб. <br> Если вы не уверены в необходимых разрешениях, ознакомьтесь с автором службы. |
| sMSA имеет доступ на чтение и запись к конфиденциальным ресурсам.|Аудит доступа к конфиденциальным ресурсам. Архивируйте журналы аудита в SIEM (Azure Log Analytics или Azure Sentinel) для анализа. <br> Исправлять разрешения для ресурсов, если обнаружен нежелательный уровень доступа. |
| По умолчанию частота смены пароля sMSA составляет 30 дней.| Групповую политику можно использовать для настройки длительности в зависимости от требований к безопасности в корпоративной среде. <br> * Вы можете задать срок действия пароля, используя следующий путь. <br>Конфигурация компьютера \ \ параметры \ имя_компьютера Оптионс\домаин член: максимальный срок действия пароля учетной записи компьютера |



### <a name="challenges-with-smsas"></a>Проблемы с Смсас

Ниже перечислены проблемы, связанные с Смсас.

| Сложности| Устранение проблем |
| - | - |
| Их можно использовать на одном сервере.| Используйте Gmsa, если необходимо использовать учетную запись на серверах. |
| Их нельзя использовать в разных доменах.| Используйте Gmsa, если необходимо использовать учетную запись в разных доменах. |
| Не все приложения поддерживают Смсас.| По возможности используйте Gmsa. Если не использовать учетную запись обычного пользователя или учетную запись компьютера, как это было рекомендовано автором приложения. |


## <a name="find-smsas"></a>Найти Смсас

На любом контроллере домена запустите DSA. msc и разверните контейнер управляемых учетных записей служб, чтобы просмотреть все Смсас. 

Следующая команда PowerShell возвращает все Смсас и Gmsa в домене Active Directory. 

`Get-ADServiceAccount -Filter *`

Следующая команда возвращает только Смсас в домене Active Directory.

`Get-ADServiceAccount -Filter * | where { $_.objectClass -eq "msDS-ManagedServiceAccount" }`

## <a name="manage-smsas"></a>Управление Смсас

Вы можете использовать следующие командлеты PowerShell Active Directory для управления Смсас:

`Get-ADServiceAccount`

` Install-ADServiceAccount`

` New-ADServiceAccount`

` Remove-ADServiceAccount`

`Set-ADServiceAccount`

`Test-ADServiceAccount`

`Ininstall-ADServiceAccount`

## <a name="move-to-smsas"></a>Переместить в Смсас

Если служба приложений поддерживает sMSA, но не Gmsa, и в настоящее время использует учетную запись пользователя или учетную запись компьютера для контекста безопасности, [Создайте и установите](https://docs.microsoft.com/archive/blogs/askds/managed-service-accounts-understanding-implementing-best-practices-and-troubleshooting) на сервере sMSA. 

В идеале следует перемещать ресурсы в Azure и использовать управляемые удостоверения или субъекты-службы Azure.

 

## <a name="next-steps"></a>Следующие шаги
См. следующие статьи о защите учетных записей служб.

* [Общие сведения о локальных учетных записях служб](service-accounts-on-premises.md)

* [Безопасная групповая управляемая учетная запись службы](service-accounts-group-managed.md)

* [Защищенные автономные управляемые учетные записи служб](service-accounts-standalone-managed.md)

* [Защита учетных записей компьютеров](service-accounts-computer.md)

* [Защита учетных записей пользователей](service-accounts-user-on-premises.md)

* [Управление учетными записями локальной службы](service-accounts-govern-on-premises.md)

 
