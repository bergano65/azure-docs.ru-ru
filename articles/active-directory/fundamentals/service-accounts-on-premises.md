---
title: Общие сведения об учетных записях служб Active Directory | Azure Active Directory
description: Общие сведения о типах учетных записей служб в Active Directory и способах их защиты.
services: active-directory
author: BarbaraSelden
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.subservice: fundamentals
ms.topic: conceptual
ms.date: 2/15/2021
ms.author: baselden
ms.reviewer: ajburnle
ms.custom: it-pro, seodec18
ms.collection: M365-identity-device-management
ms.openlocfilehash: 55de24975dadf27293f305611c6ba07522e8aa90
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100417964"
---
# <a name="introduction-to-active-directory-service-accounts"></a>Общие сведения об учетных записях служб Active Directory

Служба имеет основное удостоверение безопасности, определяющее права доступа для локальных и сетевых ресурсов. Контекст безопасности для службы Microsoft Win32 определяется учетной записью службы, используемой для запуска службы. Учетная запись службы используется для:
* Обнаружение и проверка подлинности службы
* Служба успешно запущена
* доступ к коду или приложению или его выполнение
* Запустите процесс. 

## <a name="types-of-on-premises-service-accounts"></a>Типы локальных учетных записей служб

В зависимости от варианта использования для запуска службы можно использовать управляемую учетную запись службы (MSA), учетную запись компьютера или учетную запись пользователя. Необходимо проверить службы, чтобы убедиться, что они могут использовать управляемую учетную запись службы. Если это возможно, следует использовать один из них.

### <a name="group-msa-accounts"></a>Группирование учетных записей MSA

По возможности используйте [групповые управляемые учетные записи служб](service-accounts-group-managed.md) (gmsa), если это возможно для служб, работающих в локальной среде. Gmsa предоставляют единое решение идентификации для службы, работающей на ферме серверов или за подсистемой балансировки сетевой нагрузки. Их также можно использовать для службы, работающей на одном сервере. [Gmsa предъявляют определенные требования, которые должны быть удовлетворены](https://docs.microsoft.com/windows-server/security/group-managed-service-accounts/getting-started-with-group-managed-service-accounts)

### <a name="standalone-msa-accounts"></a>Автономные учетные записи MSA

Если вы не можете использовать gMSA, используйте [автономные управляемые учетные записи служб](service-accounts-standalone-managed.md)(sMSA). для Смсас требуется по крайней мере Windows Server 2008R2. В отличие от Gmsa, Смсас запускаются только на одном сервере. Их можно использовать для нескольких служб на этом сервере.

### <a name="computer-account"></a>Учетная запись компьютера

Если вы не можете использовать MSA, проверьте использование [учетных записей компьютеров](service-accounts-computer.md). Учетная запись LocalSystem — это предопределенная локальная учетная запись с обширными привилегиями на локальном компьютере, которая выступает в качестве удостоверения компьютера в сети.   
Службы, запускаемые как учетная запись LocalSystem, получают доступ к сетевому ресурсу с использованием учетных данных учетной записи компьютера в формате <domain_name>\<computer_name> .

NT AUTHORITY\SYSTEM — это предопределенное имя для учетной записи LocalSystem. Его можно использовать для запуска службы и предоставления контекста безопасности для этой службы.

> [!NOTE]
> При использовании учетной записи компьютера невозможно определить, какая служба на компьютере использует эту учетную запись, и, следовательно, не сможет проверить, какая служба вносит изменения. 

### <a name="user-account"></a>Учетная запись пользователя

Если вы не можете использовать MSA, проанализируйте ее с помощью [учетных записей пользователей](service-accounts-user-on-premises.md). Учетные записи пользователей могут быть учетной записью пользователя домена или локальной учетной записью пользователя.

Учетная запись пользователя домена позволяет службе использовать все преимущества функций безопасности служб Windows и Microsoft домен Active Directory Services. Служба будет иметь локальный и сетевой доступ, предоставленные учетной записи. Он также будет иметь разрешения для всех групп, членом которых является эта учетная запись. Учетные записи службы домена поддерживают взаимную проверку подлинности Kerberos.

Локальная учетная запись пользователя (формат имени: ".\Усернаме") существует только в базе данных SAM главного компьютера; в службах домен Active Directory Services отсутствует объект User. Домен не может пройти проверку подлинности локальной учетной записи. Таким образом, служба, которая работает в контексте безопасности локальной учетной записи пользователя, не имеет доступа к сетевым ресурсам (за исключением анонимного пользователя). Службы, работающие в контексте локального пользователя, не поддерживают взаимную проверку подлинности Kerberos, в которой служба проходит проверку подлинности по своим клиентам. По этим причинам локальные учетные записи пользователей обычно не подходят для служб, поддерживающих каталог.

> [!IMPORTANT]
> Учетные записи служб не должны быть членами каких-либо привилегированных групп, так как членство в привилегированных группах предоставляет разрешения, которые могут представлять угрозу безопасности. Каждая служба должна иметь собственную учетную запись службы для аудита и безопасности.

## <a name="choose-the-right-type-of-service-account"></a>Выберите правильный тип учетной записи службы


| Критерии| gMSA| sMSA| Учетная запись компьютера| Учетная запись пользователя |
| - | - | - | - | - |
| Приложение работает на одном сервере| Да| Да. По возможности используйте gMSA| Да. По возможности используйте MSA.| Да. По возможности используйте MSA. |
| Приложение запускается на нескольких серверах| Да| Нет| Нет. Учетная запись привязана к серверу| Да. По возможности используйте MSA. |
| Приложения запускаются позади подсистем балансировки нагрузки| Да| Нет| Нет| Да. Используйте, только если вы не можете использовать gMSA |
| Приложение работает на Windows Server 2008 R2| Нет| Да| Да. По возможности используйте MSA.| Да. По возможности используйте MSA. |
| Работает в Windows Server 2012| Да| Да. По возможности используйте gMSA| Да. По возможности используйте MSA.| Да. По возможности используйте MSA. |
| Требование для ограничения учетной записи службы на одиночный сервер| Нет| Да| Да. По возможности используйте sMSA| Нет. |


 

### <a name="use-server-logs-and-powershell-to-investigate"></a>Использование журналов сервера и PowerShell для изучения

Журналы сервера можно использовать для определения серверов и количества серверов, на которых выполняется приложение.

Можно выполнить следующую команду PowerShell, чтобы получить список версий Windows Server для всех серверов в сети. 

```PowerShell

Get-ADComputer -Filter 'operatingsystem -like "*server*" -and enabled -eq "true"' `

-Properties Name,Operatingsystem,OperatingSystemVersion,IPv4Address |

sort-Object -Property Operatingsystem |

Select-Object -Property Name,Operatingsystem,OperatingSystemVersion,IPv4Address |

Out-GridView

```

## <a name="find-on-premises-service-accounts"></a>Поиск локальных учетных записей служб

Рекомендуется добавить префикс, например "SVC". Ко всем учетным записям, используемым в качестве учетных записей служб. Такое соглашение об именовании упростит поиск и управление. Также рекомендуется использовать атрибут Description для учетной записи службы и владельца учетной записи службы. это может быть псевдоним группы или владелец группы безопасности.

Поиск локальных учетных записей служб является ключом к обеспечению безопасности. И это может быть трудной задачей для учетных записей без MSA. Рекомендуется просмотреть все учетные записи, имеющие доступ к важным локальным ресурсам, и определить, какие учетные записи компьютеров или пользователей могут выступать в качестве учетных записей служб. Для поиска учетных записей также можно использовать следующие методы.

* В статьях для каждого типа учетной записи содержатся подробные инструкции по поиску этого типа учетной записи. Ссылки на эти статьи см. в разделе дальнейшие действия этой статьи.

## <a name="document-service-accounts"></a>Учетные записи службы документов

Найдя учетные записи служб в локальной среде, задокументируйте следующие сведения о каждой учетной записи. 

* Владелец. Учетная запись пользователя для обслуживания учетной записи.

* Цель. Приложение, представляемое учетной записью, или другое назначение. 

* Области разрешений. Какие разрешения у него есть и должны ли они быть? Что делать, если какие-либо группы являются членами?

* Профиль риска. Какова риск для вашего бизнеса, если эта учетная запись скомпрометирована? При высоком уровне риска используйте MSA.

* Ожидаемое время существования и периодическая аттестация. Как долго вы предполагаете, что эта учетная запись будет находиться в режиме реального времени? Как часто требуется проверка владельца и аттестация для постоянной работы?

* Защита паролем. Для учетных записей пользователей и локальных компьютеров, где хранится пароль. Обеспечение безопасности паролей и документов, имеющих доступ. Рекомендуется использовать [Управление привилегированными пользователями](../privileged-identity-management/pim-configure.md) для защиты сохраненных паролей. 

  

## <a name="next-steps"></a>Следующие шаги

См. следующие статьи о защите учетных записей служб.

* [Общие сведения о локальных учетных записях служб](service-accounts-on-premises.md)

* [Безопасная групповая управляемая учетная запись службы](service-accounts-group-managed.md)

* [Защищенные автономные управляемые учетные записи служб](service-accounts-standalone-managed.md)

* [Защита учетных записей компьютеров](service-accounts-computer.md)

* [Защита учетных записей пользователей](service-accounts-user-on-premises.md)

* [Управление учетными записями локальной службы](service-accounts-govern-on-premises.md)

 