---
title: Руководство по интеграции единого входа Azure Active Directory с NetSuite | Документация Майкрософт
description: Сведения о том, как настроить единый вход Azure Active Directory в NetSuite.
services: active-directory
author: jeevansd
manager: CelesteDG
ms.reviewer: celested
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.topic: tutorial
ms.date: 04/28/2020
ms.author: jeedes
ms.openlocfilehash: c2f2e86a3080b0edfcb0a699ac9b3a78ee1b5a52
ms.sourcegitcommit: 59f506857abb1ed3328fda34d37800b55159c91d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2020
ms.locfileid: "92519424"
---
# <a name="tutorial-integrate-azure-ad-single-sign-on-sso-with-netsuite"></a>Руководство по Интеграция единого входа Azure AD с NetSuite

В этом учебнике описано, как интегрировать NetSuite с Azure Active Directory (Azure AD). Интеграция NetSuite с Azure AD обеспечивает следующие возможности.

* С помощью Azure AD вы можете контролировать доступ к NetSuite.
* Вы можете включить автоматический вход пользователей в NetSuite с учетными записями Azure AD.
* Централизованное управление учетными записями через портал Azure.

Чтобы узнать больше об интеграции приложений SaaS с Azure AD, прочитайте статью [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)

## <a name="prerequisites"></a>Предварительные требования

Чтобы приступить к работе, потребуется следующее.

* Подписка Azure AD. Если у вас нет подписки, вы можете получить [бесплатную учетную запись](https://azure.microsoft.com/free/).
* Подписка NetSuite с поддержкой единого входа.

## <a name="scenario-description"></a>Описание сценария

В рамках этого руководства вы настроите и проверите единый вход Azure AD в тестовой среде. 

NetSuite поддерживает следующие технологии:

* единый вход, инициированный поставщиком удостоверений;
* JIT-подготовка пользователей;
* [автоматическая подготовка пользователей](NetSuite-provisioning-tutorial.md).
* После настройки NetSuite можно применять элементы управления сеансами, которые защищают от хищения и несанкционированного доступа к конфиденциальным данным вашей организации в режиме реального времени. Элементы управления сеансом являются расширением функции условного доступа. [Узнайте, как применять управление сеансами с помощью Microsoft Cloud App Security](/cloud-app-security/proxy-deployment-aad).

> [!NOTE]
> Так как идентификатор этого приложения является фиксированным строковым значением, в одном клиенте можно настроить только один экземпляр.

## <a name="add-netsuite-from-the-gallery"></a>Добавление NetSuite из коллекции

Чтобы настроить интеграцию NetSuite с Azure AD, добавьте NetSuite из коллекции в список управляемых приложений SaaS следующим образом:

1. Войдите на [портал Azure](https://portal.azure.com) с личной учетной записью Майкрософт, рабочей или учебной учетной записью.
1. Слева выберите службу **Azure Active Directory** .
1. Перейдите в колонку **Корпоративные приложения** и выберите **Все приложения** .
1. Чтобы добавить новое приложение, выберите **Новое приложение** .
1. В разделе **Добавление из коллекции** в поле поиска введите **NetSuite** .
1. В области результатов выберите **NetSuite** и добавьте это приложение. Подождите несколько секунд, пока приложение не будет добавлено в ваш клиент.

## <a name="configure-and-test-azure-ad-single-sign-on-for-netsuite"></a>Настройка и проверка единого входа Azure AD для NetSuite

Настройте и проверьте единый вход Azure AD в NetSuite с помощью тестового пользователя **B.Simon** . Для обеспечения работы единого входа необходимо установить связь между пользователем Azure AD и соответствующим пользователем в NetSuite.

Чтобы настроить и проверить единый вход Azure AD в NetSuite, выполните действия в следующих стандартных блоках.

1. [Настройка единого входа Azure AD](#configure-azure-ad-sso) необходима, чтобы пользователи могли использовать эту функцию.
    * [Создание тестового пользователя Azure AD](#create-an-azure-ad-test-user) требуется для проверки работы единого входа Azure AD от имени пользователя B.Simon.  
    * [Назначение тестового пользователя Azure AD](#assign-the-azure-ad-test-user) необходимо, чтобы разрешить пользователю B.Simon использовать единый вход Azure AD.
1. [Настройка единого входа в NetSuite](#configure-netsuite-sso) необходима, чтобы настроить параметры единого входа на стороне приложения.
    * [Создание тестового пользователя NetSuite](#create-the-netsuite-test-user) требуется для того, чтобы в NetSuite существовал пользователь B.Simon, связанный с одноименным пользователем в Azure AD.
1. [Проверьте единый вход](#test-sso), чтобы убедиться, что конфигурация работает правильно.

## <a name="configure-azure-ad-sso"></a>Настройка единого входа Azure AD

Чтобы включить единый вход Azure AD на портале Azure, выполните следующие действия:

1. На [портале Azure](https://portal.azure.com/) на странице интеграции с приложением **NetSuite** найдите раздел **Управление** и выберите **Единый вход** .
1. В области **Выбрать метод единого входа** выберите **SAML** .
1. На странице **Настройка единого входа с помощью SAML** щелкните **Изменить** (значок карандаша) рядом с областью **Базовая конфигурация SAML** .

   ![Изменение базовой конфигурации SAML](common/edit-urls.png)

1. В разделе **Базовая конфигурация SAML** введите в текстовое поле **URL-адрес ответа** URL-адрес в одном из следующих форматов:

    ```https
    https://<Instance ID>.NetSuite.com/saml2/acs
    https://<Instance ID>.na1.NetSuite.com/saml2/acs
    https://<Instance ID>.na2.NetSuite.com/saml2/acs
    https://<Instance ID>.sandbox.NetSuite.com/saml2/acs
    https://<Instance ID>.na1.sandbox.NetSuite.com/saml2/acs
    https://<Instance ID>.na2.sandbox.NetSuite.com/saml2/acs
    ```

    * Вы получите значение **<`Instance ID`>** в разделе конфигурации Netsuite, описанное далее в руководстве на шаге 8 раздела "Конфигурация Netsuite". В этом случае вы обнаружите точный домен (например, system.na0.netsuite.com).

        ![Снимок экрана: страница настройки SAML, где можно получить домен.](./media/NetSuite-tutorial/domain-value.png)

        > [!NOTE]
        > Приведенные выше URL-адреса используются только для примера. Замените их фактическим URL-адресом ответа. Чтобы получить это значение, обратитесь в [службу поддержки клиентов NetSuite](http://www.netsuite.com/portal/services/support-services/suitesupport.shtml). Кроме того, вы можете изучить допустимые форматы в разделе **Базовая конфигурация SAML** на портале Azure.

1. Приложение NetSuite ожидает проверочные утверждения SAML в определенном формате, который требует добавить настраиваемые сопоставления атрибутов в конфигурацию атрибутов токена SAML. На следующем снимке экрана показан список атрибутов по умолчанию.

    ![Изображение](common/default-attributes.png)

1. В дополнение к описанному выше приложение NetSuite ожидает несколько дополнительных атрибутов в ответе SAML, как показано ниже. Эти атрибуты также заранее заполнены, но вы можете изменить их в соответствии со своими требованиями.

    | Имя | Атрибут источника |
    | ---------------| --------------- |
    | account  | `account id` |

    > [!NOTE]
    > Значение атрибута учетной записи приведено для примера. Вы замените это значение, как описано далее в этом руководстве.

1. На странице "Настройка единого входа с помощью SAML" в разделе "Сертификат подписи SAML" найдите элемент "XML метаданных федерации" и выберите "Скачать", чтобы скачать сертификат и сохранить его на компьютере.

    ![Ссылка для скачивания сертификата](common/metadataxml.png)

1. Скопируйте подходящие URL-адреса (один или более, в зависимости от ваших требований) из раздела **настройки NetSuite** .

    ![Копирование URL-адресов настройки](common/copy-configuration-urls.png)

### <a name="create-an-azure-ad-test-user"></a>Создание тестового пользователя Azure AD

В этом разделе описано, как на портале Azure создать тестового пользователя с именем B.Simon.

1. На портале Azure последовательно выберите на панели слева элементы **Azure Active Directory** > **Пользователи** > **Все пользователи** .

1. В верхней части экрана выберите **Новый пользователь** .

1. На панели свойств **Пользователь** выполните следующие действия.

   а. В поле **Имя** введите **B.Simon** .  
   b. В поле **Имя пользователя** введите username@companydomain.extension (например, B.Simon@contoso.com).  
   c. Установите флажок **Показать пароль** и запишите значение, которое отображается в поле **Пароль** .  
   d. Нажмите кнопку **создания** .

### <a name="assign-the-azure-ad-test-user"></a>Назначение тестового пользователя Azure AD

В этом разделе описано, как разрешить пользователю B.Simon использовать единый вход Azure, предоставив этому пользователю доступ к NetSuite.

1. На портале Azure выберите **Корпоративные приложения** , а затем — **Все приложения** .
1. В списке приложений выберите **NetSuite** .
1. На панели обзора найдите раздел **Управление** и щелкните ссылку **Пользователи и группы** .

   ![Ссылка "Пользователи и группы"](common/users-groups-blade.png)

1. Выберите **Добавить пользователя** , а затем на панели **Добавление назначения** щелкните **Пользователи и группы** .

    ![Кнопка "Добавить пользователя"](common/add-assign-user.png)

1. На панели **Пользователи и группы** выберите **B.Simon** в списке **Пользователи** , а затем нажмите кнопку **Выбрать** в нижней части экрана.
1. Если вы планируете получить значение роли из утверждения SAML, сделайте следующее:

   а. В диалоговом окне **Выбор роли** выберите в списке подходящую роль для пользователя.  
   b. В нижней части экрана нажмите кнопку **Выбрать** .
1. В области **Добавление назначения** нажмите кнопку **Назначить** .

## <a name="configure-netsuite-sso"></a>Настройка единого входа для NetSuite

1. Откройте новую вкладку в браузере и войдите на корпоративный сайт NetSuite с правами администратора.

2. На панели навигации вверху выберите **Setup** (Настройка), а затем **Company (Компания)**  > **Enable Features (Включить функции)** .

    ![Снимок экрана: выбранный параметр включения функции раздела Company (Компания).](./media/NetSuite-tutorial/ns-setupsaml.png)

3. На панели инструментов в средней части страницы щелкните **SuiteCloud** .

    ![Снимок экрана: выбранный пункт SuiteCloud.](./media/NetSuite-tutorial/ns-suitecloud.png)

4. В разделе **Manage Authentication** (Управление проверкой подлинности) установите флажок **SAML Single Sign-on** (Единый вход SAML), чтобы включить единый вход SAML для NetSuite.

    ![Снимок экрана: раздел управления проверкой подлинности, где можно установить флажок SAML Single Sign-on (Единый вход SAML).](./media/NetSuite-tutorial/ns-ticksaml.png)

5. Выберите **Setup** (Настройка) на панели навигации вверху.

    ![Снимок экрана: пункт Setup (Настройка), выбранный на панели навигации NETSUITE.](./media/NetSuite-tutorial/ns-setup.png)

6. В списке **Setup Tasks** (Задачи настройки) выберите пункт **Integration** (Интеграция).

    ![Снимок экрана: пункт Integration (Интеграция) в списке задач настройки.](./media/NetSuite-tutorial/ns-integration.png)

7. В области **Manage Authentication** (Управление аутентификацией) выберите вариант **Single sign-on authentication** (Аутентификация единого входа).

    ![Снимок экрана: вариант Single sign-on authentication (Аутентификация единого входа), выбранный из элемента Integration (Интеграция) в списке задач настройки.](./media/NetSuite-tutorial/ns-saml.png)

8. На панели **SAML Setup** (Настройка SAML) в разделе **NetSuite Configuration** (Конфигурация NetSuite) выполните следующие действия:

    ![Снимок экрана: страница настройки SAML для ввода описанных значений.](./media/NetSuite-tutorial/ns-saml-setup.png)
  
    а. Установите флажок **Primary Authentication Method** (Основной метод проверки подлинности).

    b. В разделе **SAMLV2 Identity Provider metadata** (Метаданные поставщика удостоверений SAMLV2) щелкните **Upload IDP Metadata File** (Отправить файл метаданных поставщика удостоверений), а затем **Browse** (Просмотр), чтобы выбрать и отправить файл метаданных, скачанный с портала Azure.

    c. Нажмите кнопку **Submit** (Отправить).

9. На панели навигации NetSuite вверху выберите **Setup** (Настройка), а затем **Company (Компания)**  > **Company Information (Сведения о компании)** .

    ![Снимок экрана: параметр сведений о компании, выбранный в разделе Company (Компания).](./media/NetSuite-tutorial/ns-com.png)

    ![Снимок экрана: панель для ввода описанных значений.](./media/NetSuite-tutorial/ns-account-id.png)

    b. На панели **Company Information** (Сведения о компании) в правом столбце скопируйте **Account ID** (Идентификатор учетной записи).

    c. Вставьте **идентификатор учетной записи** , который вы скопировали из учетной записи NetSuite, в поле **Значение атрибута** в Azure AD.

10. Прежде чем пользователи смогут выполнять единый вход в NetSuite, необходимо назначить им соответствующие разрешения в NetSuite. Чтобы назначить эти разрешения, сделайте следующее:

    а. Выберите **Setup** (Настройка) на панели навигации вверху.

    ![Снимок экрана: пункт Setup (Настройка), выбранный на панели навигации NETSUITE.](./media/NetSuite-tutorial/ns-setup.png)

    b. На панели слева выберите **Users/Roles** (Пользователи и роли), а затем щелкните **Manage Roles** (Управление ролями).

    ![Снимок экрана: панель управления ролями, где можно выбрать новую роль.](./media/NetSuite-tutorial/ns-manage-roles.png)

    c. Выберите **New Role** (Новая роль).

    d. Введите **имя** для новой роли.

    ![Снимок экрана: пункт Setup Manager (Диспетчер настройки), где можно ввести имя для роли.](./media/NetSuite-tutorial/ns-new-role.png)

    д) Щелкните **Сохранить** .

    е) Выберите **Permissions** (Разрешения) на панели навигации вверху. Затем щелкните **Setup** (Настройка).

    ![Снимок экрана: вкладка Setup (Настройка) для ввода описанных значений.](./media/NetSuite-tutorial/ns-sso.png)

    ж. Выберите **SAML Single Sign-on** (Единый вход SAML) и щелкните **Add** (Добавить).

    h. Щелкните **Сохранить** .

    i. На панели навигации вверху выберите **Setup** (Настройка), а затем **Setup Manager** (Диспетчер настройки).

    ![Снимок экрана: пункт Setup (Настройка), выбранный на панели навигации NETSUITE.](./media/NetSuite-tutorial/ns-setup.png)

    j. На панели слева выберите **Users/Roles** (Пользователи и роли), а затем щелкните **Manage Users** (Управление пользователями).

    ![Снимок экрана: панель управления пользователями, где можно выбрать Suite Demo Team (Команда демонстрации Suite).](./media/NetSuite-tutorial/ns-manage-users.png)

    k. Выберите тестового пользователя, а затем щелкните **Edit** (Изменить) и перейдите на вкладку **Access** (Доступ).

    ![Снимок экрана: панель управления пользователями, где можно выбрать пункт Edit (Изменить).](./media/NetSuite-tutorial/ns-edit-user.png)

    l. В диалоговом окне **Roles** (Роли) назначьте подходящую роль, которую вы создали.

    ![Снимок экрана: пункт Administrator (Администратор), выбранный в разделе Employee (Сотрудник).](./media/NetSuite-tutorial/ns-add-role.png)

    m. Щелкните **Сохранить** .

### <a name="create-the-netsuite-test-user"></a>Создание тестового пользователя NetSuite

В этом разделе описано, как в приложении NetSuite создать пользователя с именем B.Simon. Приложение NetSuite поддерживает JIT-подготовку пользователей, которая включена по умолчанию. В рамках этого раздела никакие действия с вашей стороны не требуются. Если пользователь еще не существует в NetSuite, он создается после проверки подлинности.

## <a name="test-sso"></a>Проверка единого входа

В этом разделе описано, как проверить конфигурацию единого входа Azure AD с помощью панели доступа.

Щелкнув плитку NetSuite на панели доступа, вы автоматически войдете в приложение NetSuite, для которого настроили единый вход. См. дополнительные сведения о [панели доступа](../user-help/my-apps-portal-end-user-access.md)

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Список учебников по интеграции приложений SaaS с Azure Active Directory](./tutorial-list.md)
- [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)
- [Что представляет собой условный доступ в Azure Active Directory?](../conditional-access/overview.md)
- [Попробуйте использовать NetSuite с Azure AD](https://aad.portal.azure.com/)
- [Что такое управление сеансами в Microsoft Cloud App Security?](/cloud-app-security/proxy-intro-aad)

- [Защита приложений с помощью функции управления настройками условного доступа для приложений в Microsoft Cloud App Security](/cloud-app-security/proxy-intro-aad)