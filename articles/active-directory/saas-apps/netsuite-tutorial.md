---
title: Руководство по интеграции единого входа Azure Active Directory с NetSuite | Документация Майкрософт
description: Сведения о том, как настроить единый вход Azure Active Directory в NetSuite.
services: active-directory
documentationCenter: na
author: jeevansd
manager: mtillman
ms.reviewer: barbkess
ms.assetid: dafa0864-aef2-4f5e-9eac-770504688ef4
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: tutorial
ms.date: 09/10/2019
ms.author: jeedes
ms.collection: M365-identity-device-management
ms.openlocfilehash: 6d578b5d08fecde733bb7b257057e480fef83c4e
ms.sourcegitcommit: 8074f482fcd1f61442b3b8101f153adb52cf35c9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2019
ms.locfileid: "72754416"
---
# <a name="tutorial-integrate-azure-ad-single-sign-on-sso-with-netsuite"></a>Руководство по Интеграция единого входа Azure AD с NetSuite

В этом учебнике описано, как интегрировать NetSuite с Azure Active Directory (Azure AD). Интеграция NetSuite с Azure AD обеспечивает следующие возможности.

* С помощью Azure AD вы можете контролировать доступ к NetSuite.
* Вы можете включить автоматический вход пользователей в NetSuite с учетными записями Azure AD.
* Централизованное управление учетными записями через портал Azure.

Чтобы узнать больше об интеграции приложений SaaS с Azure AD, прочитайте статью [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](https://docs.microsoft.com/azure/active-directory/active-directory-appssoaccess-whatis)

## <a name="prerequisites"></a>Предварительные требования

Чтобы приступить к работе, потребуется следующее:

* подписка Azure AD Если у вас нет подписки, вы можете получить [бесплатную учетную запись](https://azure.microsoft.com/free/).
* Подписка NetSuite с поддержкой единого входа.

## <a name="scenario-description"></a>Описание сценария

В рамках этого руководства вы настроите и проверите единый вход Azure AD в тестовой среде. 

NetSuite поддерживает следующие технологии:

* единый вход, инициированный поставщиком удостоверений;
* JIT-подготовка пользователей;
* [автоматическая подготовка пользователей](NetSuite-provisioning-tutorial.md).

> [!NOTE]
> Так как идентификатор этого приложения является фиксированным строковым значением, в одном клиенте можно настроить только один экземпляр.

## <a name="add-netsuite-from-the-gallery"></a>Добавление NetSuite из коллекции

Чтобы настроить интеграцию NetSuite с Azure AD, добавьте NetSuite из коллекции в список управляемых приложений SaaS следующим образом:

1. Войдите на [портал Azure](https://portal.azure.com) с личной учетной записью Майкрософт, рабочей или учебной учетной записью.
1. Слева выберите службу **Azure Active Directory**.
1. Перейдите в колонку **Корпоративные приложения** и выберите **Все приложения**.
1. Чтобы добавить новое приложение, выберите **Новое приложение**.
1. В разделе **Добавление из коллекции** в поле поиска введите **NetSuite**.
1. В области результатов выберите **NetSuite** и добавьте это приложение. Подождите несколько секунд, пока приложение не будет добавлено в ваш клиент.

## <a name="configure-and-test-azure-ad-single-sign-on-for-netsuite"></a>Настройка и проверка единого входа Azure AD для NetSuite

Настройте и проверьте единый вход Azure AD в NetSuite с помощью тестового пользователя **B.Simon**. Для обеспечения работы единого входа необходимо установить связь между пользователем Azure AD и соответствующим пользователем в NetSuite.

Чтобы настроить и проверить единый вход Azure AD в NetSuite, выполните действия в следующих стандартных блоках.

1. [Настройка единого входа Azure AD](#configure-azure-ad-sso) необходима, чтобы пользователи могли использовать эту функцию.

    a. [Создание тестового пользователя Azure AD](#create-an-azure-ad-test-user) требуется для проверки работы единого входа Azure AD от имени пользователя B.Simon.  
    b. [Назначение тестового пользователя Azure AD](#assign-the-azure-ad-test-user) необходимо, чтобы разрешить пользователю B.Simon использовать единый вход Azure AD.
1. [Настройка единого входа в NetSuite](#configure-netsuite-sso) необходима, чтобы настроить параметры единого входа на стороне приложения.
    * [Создание тестового пользователя NetSuite](#create-the-netsuite-test-user) требуется для того, чтобы в NetSuite существовал пользователь B.Simon, связанный с одноименным пользователем в Azure AD.
1. [Проверьте единый вход](#test-sso), чтобы убедиться, что конфигурация работает правильно.

## <a name="configure-azure-ad-sso"></a>Настройка единого входа Azure AD

Чтобы включить единый вход Azure AD на портале Azure, выполните следующие действия:

1. На [портале Azure](https://portal.azure.com/) на странице интеграции с приложением **NetSuite** найдите раздел **Управление** и выберите **Единый вход**.
1. В области **Выбрать метод единого входа** выберите **SAML**.
1. На странице **Настройка единого входа с помощью SAML** щелкните **Изменить** (значок карандаша) рядом с областью **Базовая конфигурация SAML**.

   ![Правка базовой конфигурации SAML](common/edit-urls.png)

1. В разделе **Базовая конфигурация SAML** введите в текстовое поле **URL-адрес ответа** URL-адрес в одном из следующих форматов:

    ```
    https://<tenant-name>.NetSuite.com/saml2/acs
    https://<tenant-name>.na1.NetSuite.com/saml2/acs
    https://<tenant-name>.na2.NetSuite.com/saml2/acs
    https://<tenant-name>.sandbox.NetSuite.com/saml2/acs
    https://<tenant-name>.na1.sandbox.NetSuite.com/saml2/acs
    https://<tenant-name>.na2.sandbox.NetSuite.com/saml2/acs
    ```

    > [!NOTE]
    > Приведенные выше URL-адреса используются только для примера. Замените их фактическим URL-адресом ответа. Чтобы получить это значение, обратитесь в [службу поддержки клиентов NetSuite](http://www.netsuite.com/portal/services/support-services/suitesupport.shtml). Кроме того, вы можете изучить допустимые форматы в разделе **Базовая конфигурация SAML** на портале Azure.

    Приложение NetSuite ожидает отображения утверждений SAML в определенном формате. Нужно добавить сопоставление настраиваемых атрибутов в конфигурацию атрибутов токена SAML. 
    
1. Чтобы открыть панель **Атрибуты пользователя**, щелкните значок **Изменить** (с изображением карандаша). Откроется панель со списком атрибутов по умолчанию, как показано на следующем рисунке: 

    ![Панель "Атрибуты пользователя"](common/edit-attribute.png)

    Кроме представленных здесь атрибутов приложение NetSuite ожидает несколько дополнительных атрибутов в ответе SAML. 

1. На панели **Атрибуты пользователя** в разделе **Утверждения пользователя** выполните описанные ниже действия, чтобы добавить атрибут токена SAML, как показано в следующей таблице:

    | ИМЯ | Атрибут источника | 
    | ---------------| --------------- |
    | учетная запись  | `account id` |

    a. Чтобы открыть панель **Управление утверждениями пользователя**, выберите **Добавить новое утверждение**.

    b. В текстовом поле **Имя** введите имя атрибута, отображаемое для этой строки.

    c. Оставьте пустым поле **Пространство имен**.

    d. В раскрывающемся списке **Источник** выберите значение **Атрибут**.

    д. В списке **Атрибут источника** введите значение атрибута, отображаемое для этой строки.

    Е. Нажмите кнопку **ОК**.

    ж. Щелкните **Сохранить**.

    >[!NOTE]
    >Значение атрибута учетной записи приведено для примера. Вы замените это значение, как описано далее в этом руководстве.

1. На странице **Настройка единого входа с помощью SAML** в разделе **Сертификат подписи SAML** выберите **XML метаданных федерации**.

1. Щелкните **Скачать**, чтобы получить сертификат и сохранить его на локальном компьютере.

    ![Ссылка для скачивания сертификата](common/metadataxml.png)

1. Скопируйте подходящие URL-адреса (один или более, в зависимости от ваших требований) из раздела **настройки NetSuite**.

    ![Копирование URL-адресов настройки](common/copy-configuration-urls.png)

### <a name="create-an-azure-ad-test-user"></a>Создание тестового пользователя Azure AD

В этом разделе описано, как на портале Azure создать тестового пользователя с именем B.Simon.

1. На портале Azure последовательно выберите на панели слева элементы **Azure Active Directory** > **Пользователи** > **Все пользователи**.

1. В верхней части экрана выберите **Новый пользователь**.

1. На панели свойств **Пользователь** выполните следующие действия.

   a. В поле **Имя** введите **B.Simon**.  
   b. В поле **Имя пользователя** введите username@companydomain.extension (например, B.Simon@contoso.com).  
   c. Установите флажок **Показать пароль** и запишите значение, которое отображается в поле **Пароль**.  
   d. Нажмите кнопку **Создать**.

### <a name="assign-the-azure-ad-test-user"></a>Назначение тестового пользователя Azure AD

В этом разделе описано, как разрешить пользователю B.Simon использовать единый вход Azure, предоставив этому пользователю доступ к NetSuite.

1. На портале Azure выберите **Корпоративные приложения**, а затем —**Все приложения**.
1. В списке приложений выберите **NetSuite**.
1. На панели обзора найдите раздел **Управление** и щелкните ссылку **Пользователи и группы**.

   ![Ссылка "Пользователи и группы"](common/users-groups-blade.png)

1. Выберите **Добавить пользователя**, а затем на панели **Добавление назначения** щелкните **Пользователи и группы**.

    ![Кнопка "Добавить пользователя"](common/add-assign-user.png)

1. На панели **Пользователи и группы** выберите **B.Simon** в списке **Пользователи**, а затем нажмите кнопку **Выбрать** в нижней части экрана.
1. Если вы планируете получить значение роли из утверждения SAML, сделайте следующее:

   a. В диалоговом окне **Выбор роли** выберите в списке подходящую роль для пользователя.  
   b. В нижней части экрана нажмите кнопку **Выбрать**.
1. В области **Добавление назначения** нажмите кнопку **Назначить**.

## <a name="configure-netsuite-sso"></a>Настройка единого входа для NetSuite

1. Откройте новую вкладку в браузере и войдите на корпоративный сайт NetSuite с правами администратора.

2. На панели навигации вверху выберите **Setup** (Настройка), а затем **Company (Компания)**  > **Enable Features (Включить функции)** .

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-setupsaml.png)

3. На панели инструментов в средней части страницы щелкните **SuiteCloud**.

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-suitecloud.png)

4. В разделе **Manage Authentication** (Управление проверкой подлинности) установите флажок **SAML Single Sign-on** (Единый вход SAML), чтобы включить единый вход SAML для NetSuite.

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-ticksaml.png)

5. Выберите **Setup** (Настройка) на панели навигации вверху.

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-setup.png)

6. В списке **Setup Tasks** (Задачи настройки) выберите пункт **Integration** (Интеграция).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-integration.png)

7. В области **Manage Authentication** (Управление аутентификацией) выберите вариант **Single sign-on authentication** (Аутентификация единого входа).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-saml.png)

8. На панели **SAML Setup** (Настройка SAML) в разделе **NetSuite Configuration** (Конфигурация NetSuite) выполните следующие действия:

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-saml-setup.png)
  
    a. Установите флажок **Primary Authentication Method** (Основной метод проверки подлинности).

    b. В разделе **SAMLV2 Identity Provider metadata** (Метаданные поставщика удостоверений SAMLV2) щелкните **Upload IDP Metadata File** (Отправить файл метаданных поставщика удостоверений), а затем **Browse** (Просмотр), чтобы выбрать и отправить файл метаданных, скачанный с портала Azure.

    c. Нажмите кнопку **Submit** (Отправить).

9. На панели навигации NetSuite вверху выберите **Setup** (Настройка), а затем **Company (Компания)**  > **Company Information (Сведения о компании)** .

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-com.png)

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-account-id.png)

    b. На панели **Company Information** (Сведения о компании) в правом столбце скопируйте **Account ID** (Идентификатор учетной записи).

    c. Вставьте **идентификатор учетной записи**, который вы скопировали из учетной записи NetSuite, в поле **Значение атрибута** в Azure AD. 

10. Прежде чем пользователи смогут выполнять единый вход в NetSuite, необходимо назначить им соответствующие разрешения в NetSuite. Чтобы назначить эти разрешения, сделайте следующее:

    a. Выберите **Setup** (Настройка) на панели навигации вверху.

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-setup.png)

    b. На панели слева выберите **Users/Roles** (Пользователи и роли), а затем щелкните **Manage Roles** (Управление ролями).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-manage-roles.png)

    c. Выберите **New Role** (Новая роль).

    d. Введите **имя** для новой роли.

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-new-role.png)

    д. Щелкните **Сохранить**.

    Е. Выберите **Permissions** (Разрешения) на панели навигации вверху. Затем щелкните **Setup** (Настройка).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-sso.png)

    ж. Выберите **SAML Single Sign-on** (Единый вход SAML) и щелкните **Add** (Добавить).

    h. Щелкните **Сохранить**.

    i. На панели навигации вверху выберите **Setup** (Настройка), а затем **Setup Manager** (Диспетчер настройки).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-setup.png)

    j. На панели слева выберите **Users/Roles** (Пользователи и роли), а затем щелкните **Manage Users** (Управление пользователями).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-manage-users.png)

    k. Выберите тестового пользователя, а затем щелкните **Edit** (Изменить) и перейдите на вкладку **Access** (Доступ).

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-edit-user.png)

    l. В диалоговом окне **Roles** (Роли) назначьте подходящую роль, которую вы создали.

    ![Настройка единого входа](./media/NetSuite-tutorial/ns-add-role.png)

    m. Щелкните **Сохранить**.

### <a name="create-the-netsuite-test-user"></a>Создание тестового пользователя NetSuite

В этом разделе описано, как в приложении NetSuite создать пользователя с именем B.Simon. Приложение NetSuite поддерживает JIT-подготовку пользователей, которая включена по умолчанию. В рамках этого раздела никакие действия с вашей стороны не требуются. Если пользователь еще не существует в NetSuite, он создается после проверки подлинности.

## <a name="test-sso"></a>Проверка единого входа 

В этом разделе описано, как проверить конфигурацию единого входа Azure AD с помощью панели доступа.

Щелкнув плитку NetSuite на панели доступа, вы автоматически войдете в приложение NetSuite, для которого настроили единый вход. См. дополнительные сведения о [панели доступа](https://docs.microsoft.com/azure/active-directory/active-directory-saas-access-panel-introduction)

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Список учебников по интеграции приложений SaaS с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list)
- [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](https://docs.microsoft.com/azure/active-directory/active-directory-appssoaccess-whatis)
- [Что представляет собой условный доступ в Azure Active Directory?](https://docs.microsoft.com/azure/active-directory/conditional-access/overview)
- [Попробуйте использовать NetSuite с Azure AD](https://aad.portal.azure.com/)

