---
title: Руководство по Интеграция единого входа Azure Active Directory с SignalFx | Документация Майкрософт
description: Узнайте, как настроить единый вход между Azure Active Directory и SignalFx.
services: active-directory
author: jeevansd
manager: CelesteDG
ms.reviewer: celested
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.topic: tutorial
ms.date: 02/24/2020
ms.author: jeedes
ms.openlocfilehash: 3eae423763d2d4a05b33e4e1d4b6e9e087a47ba3
ms.sourcegitcommit: 023d10b4127f50f301995d44f2b4499cbcffb8fc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2020
ms.locfileid: "88521575"
---
# <a name="tutorial-azure-active-directory-single-sign-on-sso-integration-with-signalfx"></a>Руководство по Интеграция единого входа Azure Active Directory с SignalFx

В этом учебнике описано, как интегрировать SignalFx с Azure Active Directory (Azure AD). Интеграция SignalFx с Azure AD обеспечивает следующие возможности.

* С помощью Azure AD вы можете контролировать доступ к SignalFx.
* Вы можете включить автоматический вход пользователей в SignalFx с помощью учетных записей Azure AD.
* Вы также можете централизовано управлять учетными записями через портал Azure.

Чтобы узнать больше об интеграции приложений SaaS с Azure AD, прочитайте статью [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](/azure/active-directory/manage-apps/what-is-single-sign-on)

## <a name="prerequisites"></a>Предварительные требования

Прежде чем приступить к выполнению инструкций, вам потребуется следующее:

* подписка Azure AD;
    * (если у вас нет подписки, вы можете получить [здесь бесплатную учетную запись](https://azure.microsoft.com/free/));
* подписка SignalFx с поддержкой единого входа.

## <a name="scenario-description"></a>Описание сценария

В рамках этого руководства вы настроите и проверите единый вход AAD в тестовой среде.

* SignalFx поддерживает единый вход, инициируемый **поставщиком удостоверений**.
* SignalFx поддерживает **JIT**-подготовку пользователей.
* После настройки SignalFx вы можете применить функцию управления сеансом, которая защищает от хищения конфиденциальных данных вашей организации и несанкционированного доступа к ним в реальном времени. Управление сеансом является расширением функции условного доступа. [Узнайте, как применять управление сеансами с помощью Microsoft Cloud App Security](https://docs.microsoft.com/cloud-app-security/proxy-deployment-any-app).

## <a name="step-1-add-the-signalfx-application-in-azure"></a>Шаг 1. Добавление приложения SignalFx в Azure

Следуйте этим инструкциям, чтобы добавить приложение SignalFx в список управляемых приложений SaaS.

1. Войдите на [портал Azure](https://portal.azure.com).
1. В левой части окна навигации выберите **Azure Active Directory**.
1. Перейдите в колонку **Корпоративные приложения** и выберите **Все приложения**.
1. Выберите **Новое приложение**.
1. В разделе **Добавление из коллекции** в поле поиска введите и выберите **SignalFx**.
     * Дождитесь добавления приложения в клиент (на это может потребоваться несколько минут).
1. Оставьте портал Azure открытым, а затем откройте новую вкладку в веб-браузере.    

## <a name="step-2-begin-signalfx-sso-configuration"></a>Шаг 2. Начло настройки единого входа в SignalFx

Следуйте этим инструкциям, чтобы начать процесс настройки единого входа в SignalFx.

1. На открытой ранее новой вкладке перейдите к пользовательскому интерфейсу SignalFx и войдите в него. 
1. В верхнем меню щелкните **Integrations** (Интеграции). 
1. В поле поиска введите и выберите **Azure Active Directory**.
1. Щелкните **Create New Integration** (Создать интеграцию).
1. В поле **Name** (Имя) введите легко узнаваемое имя, которое будет понятно пользователям.
1. Установите флажок **Show on login page** (Показывать на странице входа).
    * При выборе этой функции на странице входа будет отображаться настраиваемая кнопка, которую могут нажать пользователи. 
    * На кнопке будут отображаться сведения, введенные в поле **Name** (Имя). Вот почему следует ввести **имя**, которое смогут узнать пользователи. 
    * Этот параметр будет работать только при использовании личного поддомена для приложения SignalFx, например **yourcompanyname.signalfx.com**. Чтобы получить личный поддомен, обратитесь в службу поддержки SignalFx. 
1. Скопируйте **идентификатор интеграции**. Он понадобится в дальнейшем. 
1. Оставьте пользовательский интерфейс SignalFx открытым. 

## <a name="step-3-configure-azure-ad-sso"></a>Шаг 3. Настройка единого входа Azure AD

Выполните эти инструкции, чтобы включить единый вход Azure AD на портале Azure.

1. Вернитесь на [портал Azure](https://portal.azure.com/) и на странице интеграции с приложением **SignalFx** найдите раздел **Управление** и выберите **Единый вход**.
1. На странице **Выбрать метод единого входа** выберите **SAML**.
1. На странице **Настройка единого входа с помощью SAML** щелкните значок "Перо" (Изменить), чтобы открыть диалоговое окно **Базовая конфигурация SAML** и изменить параметры.

   ![Изменение базовой конфигурации SAML](common/edit-urls.png)

1. На странице **Настройка единого входа с помощью SAML** заполните следующие поля. 

    а. В поле **Идентификатор** введите URL-адрес `https://api.<realm>.signalfx.com/v1/saml/metadata` и замените `<realm>` своей областью SignalFx. 

    b. В поле **URL-адрес ответа** введите URL-адрес `https://api.<realm>.signalfx.com/v1/saml/acs/<integration ID>` и замените `<realm>` своей областью SignalFx, а `<integration ID>` — **идентификатором интеграции**, скопированным ранее из пользовательского интерфейса SignalFx.

1. Приложение SignalFx ожидает проверочные утверждения SAML в определенном формате, который требует добавить настраиваемые сопоставления атрибутов в конфигурацию атрибутов токена SAML. 
    
1. Проверьте и убедитесь, что следующие утверждения сопоставлены с исходными атрибутами, подставленными в Active Directory. 

    | Имя |  Исходный атрибут|
    | ------------------- | -------------------- |
    | User.FirstName  | user.givenname |
    | User.email  | user.mail |
    | PersonImmutableID       | user.userprincipalname    |
    | User.LastName       | user.surname    |

    > [!NOTE]
    > Для этого процесса требуется, чтобы в службе Active Directory был настроен хотя бы один проверенный личный домен и у нее был доступ к учетным записям электронной почты в этом домене. Если у вас есть сомнения или вам нужна помощь с настройкой, обратитесь в службу поддержки SignalFx.  

1. На странице **Настройка единого входа с помощью SAML** в разделе **Сертификат подписи SAML** найдите **Сертификат (Base64)** , а затем выберите **Скачать**. Скачайте сертификат и сохраните его на локальном компьютере. Затем скопируйте значение **URL-адрес метаданных федерации приложений**. Эти сведения понадобятся вам в дальнейшем в пользовательском интерфейсе SignalFx. 

    ![Ссылка для скачивания сертификата](common/certificatebase64.png)

1. В разделе **Настройка SignalFx** скопируйте значение в поле **Идентификатор Azure AD**. Он понадобится в дальнейшем в пользовательском интерфейсе SignalFx. 

## <a name="step-4-create-an-azure-ad-test-user"></a>Шаг 4. Создание тестового пользователя Azure AD

Выполните эти инструкции по созданию на портале Azure тестового пользователя с именем **B. Simon**.

1. На портале Azure в боковом окне навигации слева выберите **Azure Active Directory**, **Пользователи**, а затем — **Все пользователи**.
1. В верхней части страницы выберите **Новый пользователь**.
1. В свойствах **пользователя**:
   1. В поле **Имя пользователя** введите `username@companydomain.extension`, например `b.simon@contoso.com`.
   1. В разделе **Имя** введите `B.Simon`.
   1. Установите флажок **Показать пароль**, а затем скопируйте отображаемое значение в поле **Пароль**. Эти сведения понадобятся вам позже, чтобы протестировать данную интеграцию. 
   1. Нажмите кнопку **Создать**.

## <a name="step-5-assign-the-azure-ad-test-user"></a>Шаг 5. Назначение тестового пользователя Azure AD

Выполните эти инструкции по включению тестового пользователя, чтобы использовать единый вход Azure для SignalFx.

1. На портале Azure выберите **Корпоративные приложения**, а затем — **Все приложения**.
1. В списке приложений выберите **SignalFx**.
1. На странице обзора приложения найдите раздел **Управление** и выберите вкладку **Пользователи и группы**.

   ![Ссылка "Пользователи и группы"](common/users-groups-blade.png)

1. Выберите **Добавить пользователя**, а в диалоговом окне **Добавление назначения** — выберите **Пользователи и группы**.

    ![Ссылка "Добавить пользователя"](common/add-assign-user.png)

1. В диалоговом окне **Пользователи и группы** в списке **Пользователи** выберите **B. Simon**, а затем в нижней части страницы нажмите **Выбрать**.
1. Если ожидается, что в утверждении SAML будет получено какое-либо значение роли, то в диалоговом окне **Выбор роли** нужно выбрать соответствующую роль для пользователя из списка, а затем щелкнуть **Выбрать** в нижней части страницы.
1. В диалоговом окне **Добавление назначения** нажмите **Назначить**.

## <a name="step-6-complete-the-signalfx-sso-configuration"></a>Шаг 6. Завершение настройки единого входа в SignalFx 

1. Откройте предыдущую вкладку и вернитесь в пользовательский интерфейс SignalFx, чтобы просмотреть текущую страницу интеграции с Azure Active Directory. 
1. Рядом с полем **Сертификат (Base64)** щелкните **Upload File** (Отправить файл), а затем найдите файл **сертификата в кодировке Base64**, загруженный ранее с портала Azure.
1. Рядом с надписью **Azure AD Identifier** (Идентификатор Azure AD) вставьте значение **идентификатора Azure AD**, скопированное ранее на портале Azure. 
1. Рядом с надписью **Federation Metadata URL** (URL-адрес метаданных федерации) вставьте значение **URL-адреса метаданных федерации приложения**, скопированное ранее на портале Azure. 
1. Выберите команду **Сохранить**.

## <a name="step-7-test-sso"></a>Шаг 7. Проверка единого входа

Ознакомьтесь со следующими сведениями о тестировании единого входа а также о том, чего следует ожидать при первом входе в SignalFx. 

### <a name="test-logins"></a>Проверка процедуры входа

* Чтобы проверить вход, следует использовать окно в частном режиме или режиме инкогнито либо выйти из портала Azure. В противном случае файлы cookie, которые были сохранены для пользователя, настраивавшего приложение, помешают успешно войти в учетную запись тестового пользователя.

* При первом входе нового тестового пользователя Azure принудительно запустит процедуру смены пароля. В этом случае процесс единого входа не завершится, и тестовый пользователь будет перенаправлен на портал Azure. Для устранения этой проблемы тестовый пользователь должен сменить свой пароль, перейти на страницу входа в SignalFx или на Панель доступа и повторить попытку.
    * Щелкнув плитку "SignalFx" на Панели доступа, вы автоматически войдете в SignalFx. 
        * См. дополнительные сведения о [панели доступа](https://docs.microsoft.com/azure/active-directory/active-directory-saas-access-panel-introduction)

* Доступ к приложению SignalFx можно получить с Панели доступа или с помощью настраиваемой страницы входа, назначенной организации. Тестовый пользователь должен проверить интеграцию, начиная с любого из этих расположений.
    * Тестовый пользователь может использовать учетные данные, созданные ранее в рамках этого процесса для **b.simon@contoso.com** .

### <a name="first-time-logins"></a>Первый вход

* Когда пользователь в первый раз входит в SignalFx, используя единый вход SAML, он получает сообщение электронной почты SignalFx со ссылкой. Пользователь должен щелкнуть ссылку в целях проверки подлинности. Эта проверка электронной почты выполняется для пользователей только при первом входе. 

* SignalFx поддерживает создание пользователя в режиме**JIT-подготовки**. Это означает, что если пользователь отсутствует в SignalFx, при первой попытке входа для него будет создана учетная запись пользователя.

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Список учебников по интеграции приложений SaaS с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list)

- [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](/azure/active-directory/manage-apps/what-is-single-sign-on)

- [Что представляет собой условный доступ в Azure Active Directory?](https://docs.microsoft.com/azure/active-directory/conditional-access/overview)

- [Что такое управление сеансами в Microsoft Cloud App Security?](https://docs.microsoft.com/cloud-app-security/proxy-intro-aad)

- [Попробуйте использовать SignalFx с Azure AD](https://aad.portal.azure.com/)