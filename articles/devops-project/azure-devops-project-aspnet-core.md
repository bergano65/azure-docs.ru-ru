---
title: Краткое руководство. Создание конвейера CI/CD для приложения .NET в службе Azure DevOps Starter
description: Служба Azure DevOps Starter позволяет быстро приступить к работе с Azure. Это поможет вам запустить приложение .NET в службе Azure по вашему выбору за несколько быстрых шагов.
ms.prod: devops
ms.technology: devops-cicd
services: azure-devops-project
documentationcenter: vs-devops-build
author: mlearned
manager: gwallace
editor: ''
ms.assetid: ''
ms.workload: web
ms.tgt_pltfrm: na
ms.topic: quickstart
ms.date: 03/24/2020
ms.author: mlearned
ms.custom: devx-track-csharp, mvc
ms.openlocfilehash: c434abdac19c0afd3a76256c27fc3316a8b09940
ms.sourcegitcommit: c28fc1ec7d90f7e8b2e8775f5a250dd14a1622a6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2020
ms.locfileid: "88163702"
---
# <a name="create-a-cicd-pipeline-for-net-with-azure-devops-starter"></a>Создание конвейера CI/CD для приложения .NET в службе Azure DevOps Starter

Настройте непрерывную интеграцию (CI) и непрерывную доставку (CD) для вашего приложения .NET Core или ASP.NET с помощью DevOps Starter. DevOps Starter упрощает начальную настройку конвейера сборки и выпуска в Azure Pipelines.

Если у вас нет подписки Azure, вы можете получить ее бесплатно с помощью [Visual Studio Dev Essentials](https://visualstudio.microsoft.com/dev-essentials/).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

DevOps Starter позволяет создать конвейер CI/CD в Azure DevOps. Вы можете создать новую организацию Azure DevOps или использовать существующую. DevOps Starter также создает ресурсы Azure в требуемой подписке Azure.

1. Войдите на [портал Microsoft Azure](https://portal.azure.com).

1. В поле поиска введите **DevOps Starter**, а затем выберите ресурс. Щелкните **Добавить**, чтобы создать новый ресурс. 

    ![Панель мониторинга DevOps Starter](_img/azure-devops-starter-aks/search-devops-starter.png)

## <a name="select-a-sample-application-and-azure-service"></a>Выбор примера приложения и службы Azure

1. Выберите пример приложения **.NET**. Примеры .NET включают в себя либо платформу ASP.NET с открытым кодом, либо кросс-платформенную платформу .NET Core.

   ![Платформа .NET](_img/azure-devops-project-aspnet-core/select-dotnet.png)

2. Этот пример представляет собой приложение ASP.NET Core MVC. Выберите платформу приложения **.NET Core**, а затем **Далее**.    
    
3. Выберите **Веб-приложение в Windows** в качестве целевого объекта развертывания, а затем **Далее**. При необходимости для развертывания можно выбрать другие службы Azure. Исполняющая среда, которую вы выбрали ранее, определяет доступный тип целевого объекта развертывания в службе Azure.

## <a name="configure-azure-devops-and-an-azure-subscription"></a>настройка Azure DevOps и подписки Azure; 

1. Заполните поле **Имя проекта**.

2. Создайте бесплатную **организацию Azure DevOps** или выберите имеющуюся из раскрывающегося списка.

3. Выберите **подписку Azure**, введите имя для **веб-приложения** или присвойте имя по умолчанию и нажмите кнопку **Готово**. Через несколько минут общие сведения о развертывании DevOps Starter отобразятся на портале Azure. 

4. Выберите **Перейти к ресурсу**, чтобы просмотреть панель мониторинга DevOps Starter. В правом верхнем углу закрепите **проект** на панели мониторинга для быстрого доступа. Пример приложения настроен в репозитории в вашей **организации Azure DevOps**. Сборка выполнена и ваше приложение развернуто в Azure.

5. Панель мониторинга позволяет просматривать репозиторий кода, конвейер CI/CD и приложение в Azure. В области справа под разделом "Ресурсы Azure" выберите **Обзор** для просмотра выполняющегося приложения.

   ![Представление панели мониторинга](_img/azure-devops-project-aspnet-core/dashboardnopreview.png) 

## <a name="commit-code-changes-and-execute-cicd"></a>Фиксация изменений, внесенных в код, и выполнение CI/CD

DevOps Starter создает репозиторий Git в Azure Repos или на сайте GitHub. Выполните описанные ниже действия, чтобы просмотреть репозиторий и внести изменения в код приложения.

1. В левой части панели мониторинга DevOps Starter выберите ссылку **главной** ветви. Эта ссылка открывает представление созданного репозитория Git.

2. В следующих нескольких шагах вы можете с помощью веб-браузера создавать и фиксировать изменения кода непосредственно в **главной ветви**. Репозиторий Git можно клонировать в предпочитаемой интегрированной среде разработки, выбрав **Клонировать** в верхнем правом углу страницы репозитория. 

3. В левой части экрана перейдите по структуре файла приложения к **Application/aspnet-core-dotnet-core/Pages/Index.cshtml**.

4. Выберите **Изменить** и внесите изменения в заголовок h2. Например, введите **Начало работы с проектом Azure DevOps Starter** или внесите некоторые изменения.

      ![Изменения в коде](_img/azure-devops-project-aspnet-core/codechange.png)

5. Выберите **Зафиксировать**, оставьте комментарий и выберите **Зафиксировать** еще раз.

6. В браузере откройте панель мониторинга Azure DevOps Starter.  Теперь вы должны увидеть, что сборка выполняется. С помощью конвейера CI/CD выполняется автоматическая сборка и развертывание внесенных изменений.

## <a name="examine-the-cicd-pipeline"></a>Изучение конвейера CI/CD

На предыдущем этапе весь конвейер CI/CD был автоматически настроен с помощью Azure DevOps Starter. При необходимости изучите и настройте конвейер. Выполните следующие действия, чтобы ознакомиться с конвейерами сборки и выпуска Azure DevOps.

1. В верхней части панели мониторинга DevOps Starter выберите **Конвейеры сборки**. По ссылке откроется вкладка браузера, содержащая сведения о конвейере сборки Azure DevOps для нового проекта.

1. Щелкните многоточие (…).  После этого откроется меню, в котором можно начать выполнение нескольких действий, таких как постановка новой сборки в очередь, приостановка создания и изменение конвейера сборки.

1. Выберите команду **Изменить**.

    ![Конвейер сборки](_img/azure-devops-project-aspnet-core/builddef.png)

1. В этой области можно просмотреть различные задачи для конвейера сборки. Операция сборки выполняет различные задачи, такие как получение исходного кода из репозитория Git, восстановление зависимостей и публикация полученных файлов, используемых для развертывания.

1. Выберите имя конвейера сборки в верхней части соответствующей области.

1. Замените имя конвейера сборки более понятным для себя, выберите **Сохранить и поместить в очередь** и нажмите кнопку **Сохранить**.

1. Под именем конвейера сборки щелкните **Журнал**.   
В области **Журнал** можно просмотреть журнал аудита последних изменений сборки.  Azure Pipelines отслеживает все изменения, внесенные в конвейер сборки, и позволяет сравнивать версии.

1. Выберите **Триггеры**. DevOps Starter автоматически создает триггер CI, а при каждой фиксации в репозитории запускается новая сборка. При желании выберите включение или исключение ветвей из процесса непрерывной интеграции.

1. Щелкните **Период удержания**. В зависимости от сценария можно указать политики для хранения или удаления определенного количества сборок.

1. Щелкните **Сборка и выпуск**, а затем выберите **Выпуски**.  
DevOps Starter создаст конвейер выпуска для управления развертываниями в Azure.

1.  Щелкните многоточие (...) рядом с конвейером выпуска и выберите **Изменить**. Конвейер выпуска содержит конвейер, определяющий процесс выпуска.  

1. В разделе **Артефакты** выберите **Удалить**. Конвейер сборки, который вы изучали на предыдущих этапах, создает выходные данные для артефакта. 

1. Рядом со значком **Удалить** выберите **Триггер непрерывного развертывания**. В этом конвейере выпуска активирован триггер непрерывного развертывания, выполняющий развертывание каждый раз, когда становится доступным новый артефакт сборки. При желании можно отключить триггер, чтобы выполнить развертывание вручную.  

1. В области слева выберите **Задачи**.  Задачи — это действия, выполняемые при развертывании. В этом примере задача заключается в развертывании в Службе приложений Azure.

1. В области справа выберите **Просмотреть выпуски**. В этом представлении можно просмотреть журнал выпусков.

1. Щелкните многоточие (...) рядом с одним из выпусков и выберите **Открыть**. В этом представлении доступно несколько меню, например меню сводки по выпуску, меню связанных рабочих элементов и тестов.

1. Щелкните **Фиксации**. В этом представлении отображаются фиксации кода, связанные с определенным развертыванием. 

1. Выберите **Журналы**. Журналы содержат полезную информацию о процессе развертывания. Их можно просматривать как во время, так и после развертывания.

## <a name="clean-up-resources"></a>Очистка ресурсов

Ненужную Службу приложений Azure и связанные ресурсы можно удалить. Воспользуйтесь функцией **Удалить** на панели мониторинга DevOps Starter.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше об изменении определений сборки и выпуска в соответствии с потребностями вашей команды, см. следующее руководство.

> [!div class="nextstepaction"]
> [Define your multi-stage continuous deployment (CD) process](https://docs.microsoft.com/azure/devops/pipelines/release/define-multistage-release-process?view=vsts) (Определение многоэтапного процесса непрерывного развертывания)

## <a name="videos"></a>Видео

> [!VIDEO https://www.youtube.com/embed/itwqMf9aR0w]
