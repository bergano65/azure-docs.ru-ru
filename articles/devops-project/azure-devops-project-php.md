---
title: Краткое руководство. Создание конвейера CI/CD для PHP с помощью Azure DevOps Projects
description: Служба DevOps Projects позволяет быстро приступить к работе с Azure. Это поможет вам запустить приложение в службе Azure по вашему выбору за несколько быстрых шагов.
ms.prod: devops
ms.technology: devops-cicd
services: vsts
documentationcenter: vs-devops-build
author: mlearned
manager: gwallace
editor: ''
ms.assetid: ''
ms.workload: web
ms.tgt_pltfrm: na
ms.topic: quickstart
ms.date: 07/09/2018
ms.author: mlearned
ms.custom: mvc
monikerRange: vsts
ms.openlocfilehash: 7c097c2a7247c9cad6cdce8a89059ee8d90d159e
ms.sourcegitcommit: 3e7646d60e0f3d68e4eff246b3c17711fb41eeda
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2019
ms.locfileid: "70899594"
---
# <a name="create-a-cicd-pipeline-for-php-with-azure-devops-projects"></a>Создание конвейера CI/CD для PHP с помощью Azure DevOps Projects

Azure DevOps Projects представляет собой упрощенный интерфейс, который создает ресурсы Azure и конвейер непрерывной интеграции (CI) и непрерывной поставки (CD) для приложения PHP в Azure Pipelines.  

Если у вас нет подписки Azure, вы можете получить ее бесплатно с помощью [Visual Studio Dev Essentials](https://visualstudio.microsoft.com/dev-essentials/).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

 DevOps Projects позволяет создать конвейер CI/CD в Azure Pipelines. Вы можете создать новую бесплатную организацию Azure DevOps или использовать существующую. DevOps Projects также создает ресурсы Azure в требуемой подписке Azure.

1. Войдите на [портал Microsoft Azure](https://portal.azure.com).

1. Щелкните значок **Создать ресурс** в области слева и выполните поиск по запросу **DevOps Projects**.  

3. Нажмите кнопку **Создать**.

    ![Начало настройки непрерывной поставки](_img/azure-devops-project-php/fullbrowser.png)

## <a name="select-a-sample-application-and-azure-service"></a>Выбор примера приложения и службы Azure

1. Выберите пример приложения PHP.  
        Доступны примеры PHP для разных исполняющих сред. В примере по умолчанию используется платформа Laravel. 
        
2. Оставьте значение по умолчанию и нажмите кнопку **Далее**.  

1. Веб-приложение для контейнеров является целевым объектом развертывания по умолчанию.  
    Исполняющая среда, которую вы выбрали ранее, определяет доступный тип объекта развертывания в службе Azure.  Оставьте службу по умолчанию и нажмите кнопку **Далее**.
 
## <a name="configure-azure-devops-and-an-azure-subscription"></a>Настройка Azure DevOps и подписки Azure 

1. Создайте новую организацию Azure DevOps или выберите существующую. 

    a. Задайте имя проекта в Azure DevOps. 
    
    b. Выберите подписку Azure и расположение, введите имя приложения и нажмите кнопку **Готово**.   
        Через несколько минут панель мониторинга DevOps Projects отобразится на портале Azure. Пример приложения настраивается в репозитории в организации Azure DevOps, выполняется сборка, а ваше приложение развертывается в Azure. Панель мониторинга позволяет просматривать репозиторий кода, конвейер CI/CD и приложение в Azure.  
        
2. Выберите **Обзор**, чтобы просмотреть выполняющееся приложение.

    ![Представление панели мониторинга](_img/azure-devops-project-php/dashboardnopreview.png) 
    
   DevOps Projects автоматически настраивает сборку непрерывной интеграции и триггер выпуска.  Теперь вы готовы сотрудничать с командой в приложении PHP с процессом CI/CD, который автоматически развертывает данные последней работы на вашем веб-сайте.

## <a name="commit-code-changes-and-execute-cicd"></a>Фиксация изменений, внесенных в код, и выполнение CI/CD

 DevOps Projects создает репозиторий Git в Azure Repos или на сайте GitHub. Выполните следующие действия, чтобы просмотреть репозиторий и внести изменения в код приложения.

1. В левой части панели мониторинга DevOps Projects выберите ссылку на главную ветвь.   
    Эта ссылка открывает представление созданного репозитория Git.

1. Чтобы просмотреть URL-адрес клона репозитория, щелкните **Клонировать** в правом верхнем углу браузера.   
    Вы можете клонировать свой репозиторий Git в предпочитаемую интегрированную среду разработки. На следующих нескольких шагах используйте веб-браузер для создания и фиксации изменений кода непосредственно в главной ветви.

1. В левой части окна перейдите к файлу **resources/views/welcome.blade.php**.

1. Выберите **Изменить** и внесите изменения в текст.  Например, измените часть текста для одного из тегов div.

1. Выберите **Зафиксировать** и сохраните изменения.

1. В браузере откройте панель мониторинга DevOps Projects.  
Вы увидите выполнение сборки. С помощью конвейера CI/CD выполняется автоматическая сборка и развертывание внесенных изменений.

## <a name="examine-the-cicd-pipeline"></a>Изучение конвейера CI/CD

 DevOps Projects автоматически настраивает весь конвейер CI/CD в Azure Pipelines. При необходимости изучите и настройте конвейер. Чтобы составить представление о конвейерах сборки и выпуска, сделайте следующее:

1. В верхней части панели мониторинга DevOps Projects выберите **Конвейеры сборки**.  
    По ссылке откроется вкладка браузера с конвейером сборки для нового проекта.

1. Выберите поле **Состояние** и щелкните значок **многоточия** (...).  
    В появившемся меню содержится несколько пунктов, таких как постановка новой сборки в очередь, приостановка сборки и изменение конвейера сборки.

1. Выберите **Изменить**

1. В этой области можно просмотреть различные задачи для конвейера сборки.  
    При сборке выполняются различные задачи, такие как получение исходного кода из репозитория Git, восстановление зависимостей и публикация результатов, используемых для развертывания.

1. Выберите имя конвейера сборки в верхней части соответствующей области.

1. Замените имя конвейера сборки более понятным для себя, выберите **Сохранить и поместить в очередь** и нажмите кнопку **Сохранить**.

1. Под именем конвейера сборки щелкните **Журнал**.   
    В области **Журнал** отображается журнал аудита последних изменений сборки. Azure Pipelines отслеживает все изменения, внесенные в конвейер сборки, и позволяет сравнивать версии.

1. Выберите **Триггеры**.  
      DevOps Projects автоматически создает триггер CI, а каждая фиксация в репозитории запускает новую сборку. При желании выберите включение или исключение ветвей из процесса непрерывной интеграции.

1. Щелкните **Период удержания**.   
    В зависимости от сценария можно указать политики для хранения или удаления определенного количества сборок.

1. Выберите **Сборка и выпуск**, а затем — **Выпуски**.  
     DevOps Projects создаст конвейер выпуска для управления развертываниями в Azure.

1. Щелкните многоточие (…) рядом с конвейером выпуска и выберите **Изменить**.  
    Конвейер выпуска содержит конвейер, определяющий процесс выпуска. 

12. В разделе **Артефакты** выберите **Удалить**.  
    Конвейер сборки, который вы изучали на предыдущих этапах, создаст выходные данные для артефакта. 

1. Рядом со значком **Удалить** выберите **Триггер непрерывного развертывания**.   
    В этом конвейере выпуска активирован триггер непрерывного развертывания, выполняющий развертывание каждый раз, когда становится доступным новый артефакт сборки.  При необходимости можно отключить триггер, чтобы выполнять развертывание вручную. 

1. В области слева выберите **Задачи**.  
        Задачи — это действия, выполняемые при развертывании.  В этом примере задача заключается в развертывании в Службе приложений Azure.

1. В правой части окна выберите **Просмотреть выпуски**, чтобы отобразился журнал выпусков.

1. Щелкните многоточие (…) рядом с каким-нибудь выпуском и выберите **Открыть**.  
        В этом представлении есть несколько меню, которые можно изучить, например меню сводки, связанных рабочих элементов и тестов.

1. Щелкните **Фиксации**.  
        В этом представлении отображаются фиксации кода, связанные с определенным развертыванием. 

1. Выберите **Журналы**.  
        Журналы содержат полезную информацию о процессе развертывания. Их можно просматривать как во время, так и после развертывания.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если Служба приложений Azure и другие связанные с ней ресурсы вам больше не нужны, их можно удалить. Для этого воспользуйтесь функцией **Удалить** на панели мониторинга DevOps Projects.

## <a name="next-steps"></a>Дополнительная информация

После настройки процесса CI/CD конвейеры сборки и выпуска создаются автоматически. Вы можете изменить эти конвейеры сборки и выпуска в соответствии с потребностями вашей команды. Дополнительные сведения о конвейере CI/CD см. в этом руководстве:

> [!div class="nextstepaction"]
> [Define your multi-stage continuous deployment (CD) process](https://docs.microsoft.com/azure/devops/pipelines/release/define-multistage-release-process?view=vsts) (Определение многоэтапного процесса непрерывного развертывания)
