---
title: Краткое руководство. Создание рабочего процесса CI/CD для Node.js — DevOps Starter для развертывания в Azure из GitHub
description: DevOps Starter позволяет быстро начать работу с Azure с помощью GitHub Actions.
author: ninallam
editor: ninallam
ms.assetid: ''
ms.devlang: na
ms.service: az-devops-project
ms.topic: overview
ms.tgt_pltfrm: na
ms.workload: ''
ms.date: 08/24/2020
ms.author: ninallam
ms.openlocfilehash: 92fa445cee75b2311cbadf96e24c31a1dbd579b8
ms.sourcegitcommit: 03713bf705301e7f567010714beb236e7c8cee6f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2020
ms.locfileid: "92332716"
---
# <a name="set-up-cicd-for-a-nodejs-app-with-devops-starter-using-github-actions"></a>Настройка CI/CD для Node.js с помощью DevOps Starter и GitHub Actions

В этом кратком руководстве показано, как с помощью простого интерфейса DevOps Starter настроить конвейер непрерывной интеграции (CI) и непрерывной поставки (CD) для приложения Node.js с помощью GitHub Actions. С помощью DevOps Starter вы можете установить все компоненты, необходимые для разработки, развертывания и мониторинга приложения. 

## <a name="prerequisites"></a>Предварительные требования

- Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) бесплатно. 
- Учетная запись [GitHub](https://github.com/).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

DevOps Starter создает рабочий процесс CI/CD на основе GitHub Actions. DevOps Starter также создает ресурсы Azure в требуемой подписке Azure.

1. Войдите на [портал Azure](https://portal.azure.com).

1. В поле поиска введите **DevOps Starter** , а затем выберите ресурс. Щелкните **Добавить** , чтобы создать новый ресурс.

    ![Панель мониторинга DevOps Starter](_img/azure-devops-starter-aks/search-devops-starter.png)

## <a name="select-a-sample-application-and-azure-service"></a>Выбор примера приложения и службы Azure

1. Щелкните **Set up DevOps starter with GitHub** (Настроить DevOps Starter для GitHub) на баннере справа.

    ![landing_page](_img/azure-devops-project-nodejs/landing-page.png)

1. Убедитесь, что в качестве поставщика CI/CD указано **GitHub Actions** .

    ![CICD_provider](_img/azure-devops-project-nodejs/provider-selection.png)

1. Выберите пример приложения **Node.js** . Примеры Node.js включают в себя выбор нескольких платформ приложений.

1. Платформа примера по умолчанию — **Express.js** . Оставьте значение по умолчанию и нажмите кнопку **Далее** .   

2. Целевым объектом развертывания по умолчанию является веб-приложение Windows. Исполняющая среда, которую вы выбрали ранее, определяет доступный тип целевого объекта развертывания в службе Azure. Оставьте службу по умолчанию и нажмите кнопку **Далее** .
 
## <a name="configure-github-account-and-an-azure-subscription"></a>Настройка учетной записи GitHub и подписки Azure 

1. Войдите в учетную запись GitHub.

   1. Нажмите кнопку **Authorize** (Авторизовать). 
   
   1. Вход в GitHub. Если у вас нет учетной записи GitHub, вы можете зарегистрироваться.

2. Выберите существующую **организацию GitHub** . 
   
   1. Выберите имя для репозитория GitHub. 
   
   1. Выберите подписку Azure и расположение, задайте имя приложения и нажмите кнопку **Готово** .
    
       ![Enter_GH_details](_img/azure-devops-project-nodejs/gh-details.png)


    Через несколько минут панель мониторинга DevOps Starter отобразится на портале Azure. Пример приложения настраивается в репозитории в организации Azure DevOps, после чего активируется рабочий процесс GitHub для развертывания приложения в Azure. Эта панель мониторинга позволяет просматривать репозиторий кода, рабочий процесс GitHub и приложение в Azure.
   
3. Выберите **Обзор** , чтобы просмотреть выполняющееся приложение.
    
    Эта панель мониторинга содержит сведения о рабочем процессе GitHub и ресурсах Azure. Чтобы просмотреть сведения о рабочем процессе GitHub, например время последнего выполнения, содержимое фиксаций и состояние задания, необходимо **авторизоваться на GitHub** .
   
   ![Authorize_dashboard](_img/azure-devops-project-nodejs/authenticate-dashboard.png)

DevOps Starter автоматически создает рабочий процесс GitHub с заданиями сборки и развертывания, используя GitHub Actions. Теперь вы готовы сотрудничать с командой в приложении Node.js с процессом CI/CD, который автоматически развертывает данные последней работы на вашем веб-сайте.

   ![dashooard_view](_img/azure-devops-project-nodejs/full-dashboard.png)

## <a name="commit-code-changes-and-execute-cicd"></a>Фиксация изменений, внесенных в код, и выполнение CI/CD

DevOps Starter создает репозиторий в GitHub. Выполните описанные ниже действия, чтобы просмотреть репозиторий и внести изменения в код приложения.

1. В левой части панели мониторинга DevOps Starter выберите ссылку главной ветви. Эта ссылка открывает представление созданного репозитория GitHub.

1. Чтобы просмотреть URL-адрес клона репозитория, щелкните **Клонировать** в правом верхнем углу браузера. Вы можете клонировать свой репозиторий Git в предпочитаемую интегрированную среду разработки. В следующих нескольких шагах вы можете использовать веб-браузер для создания и фиксации изменений кода непосредственно в главной ветви.

1. В области слева в браузере перейдите к файлу **/Application/views/index.pug** .

1. Выберите **Изменить** и внесите изменения в текст.
    Например, измените часть текста для одного из тегов.

1. Выберите **Зафиксировать** и сохраните изменения.

1. В браузере откройте панель мониторинга DevOps Starter.   
Здесь вы увидите, что в рабочем процессе GitHub выполняется задание сборки. С помощью рабочего процесса GitHub выполняется автоматическая сборка и развертывание внесенных изменений.

## <a name="view-the-github-workflow"></a>Просмотр рабочего процесса GitHub

На предыдущем этапе с помощью DevOps Starter был автоматически настроен полный рабочий процесс GitHub. Изучите этот рабочий процесс и измените его, если потребуется. Чтобы ознакомиться с рабочим процессом, сделайте следующее.

1. На панели мониторинга DevOps Starter слева выберите элемент **GitHub workflow** (Рабочий процесс GitHub). Откроется новая вкладка браузера с информацией о рабочем процессе GitHub для нового проекта.
    > [!NOTE]
    > Не изменяйте имя файла рабочего процесса. Чтобы панель мониторинга правильно отображала изменения, имя файла должно быть таким: **devops-starter-workflow.yml** .

1. YAML-файл рабочего процесса содержит все компоненты GitHub Actions, требуемые для сборки и развертывания приложения. Щелкните действие **edit file** (Редактировать файл), чтобы настроить этот файл рабочего процесса.

1. В репозитории на вкладке **Code** (Код) щелкните элемент **commits** (Фиксации). В этом представлении отображаются фиксации кода, связанные с определенным развертыванием.

1. В репозитории на вкладке **Actions** (Действия) отображается история всех выполнений рабочего процесса в этом репозитории.

1. Щелкните **latest run** (Последнее выполнение), чтобы просмотреть все задания, выполненные в этом рабочем процессе.

1. Щелкните **jobs** (Задания), чтобы просмотреть подробные журналы выполнения рабочего процесса. Журналы содержат полезную информацию о процессе развертывания. Их можно просматривать как во время, так и после развертывания.

1. Щелкните вкладку **Pull request** (Запрос на вытягивание), чтобы просмотреть все запросы на вытягивание, выполненные для этого репозитория.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если Служба приложений Azure и другие связанные с ней ресурсы вам больше не нужны, их можно удалить. Воспользуйтесь функцией **Удалить** на панели мониторинга DevOps Starter.

## <a name="next-steps"></a>Дальнейшие действия

При настройке процесса CI/CD был автоматически создан рабочий процесс GitHub. Вы можете изменить этот рабочий процесс в соответствии с задачами своей команды. См. дополнительные сведения о GitHub Actions и рабочих процессах:

> [!div class="nextstepaction"]
> [Настройка рабочего процесса GitHub](https://docs.github.com/actions/configuring-and-managing-workflows/configuring-and-managing-workflow-files-and-runs)
