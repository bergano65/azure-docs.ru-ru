---
title: Настройка сетевой лаборатории с помощью служб лабораторий Azure и GNS3 | Документация Майкрософт
description: Узнайте, как настроить лабораторию с помощью служб лабораторий Azure для обучения сети с GNS3.
ms.topic: article
ms.date: 01/19/2021
ms.openlocfilehash: dec5dea13d5a89536a06da45fc57d33881a9b3ad
ms.sourcegitcommit: 740698a63c485390ebdd5e58bc41929ec0e4ed2d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2021
ms.locfileid: "99500517"
---
# <a name="set-up-a-lab-to-teach-a-networking-class"></a>Настройка лаборатории для обучения классу сети 
В этой статье показано, как настроить класс, предназначенный для предоставления учащимся возможности эмулировать, настройку, тестирование и устранение неполадок в виртуальных и реальных сетях с помощью программного обеспечения [gns3](https://www.gns3.com/) . 

Эта статья содержит два основных раздела. В первом разделе описывается создание лаборатории для занятий. Во втором разделе описывается создание шаблона компьютера с включенной вложенной виртуализацией и с установленным и настроенным GNS3.

## <a name="lab-configuration"></a>Настройка лаборатории
Для настройки этой лаборатории вам прежде всего потребуется подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/), прежде чем начинать работу. После получения подписки Azure можно либо создать новую учетную запись лаборатории в службах лаборатории Azure, либо использовать существующую учетную запись. Ознакомьтесь со следующим руководством по созданию учетной записи лаборатории: [учебник по настройке учетной записи лаборатории](tutorial-setup-lab-account.md).

Следуйте указаниям [этого учебника](tutorial-setup-classroom-lab.md) , чтобы создать лабораторию, а затем примените следующие параметры.

| размер виртуальной машины; | Изображение |
| -------------------- | ----- | 
| Большой (вложенная виртуализация) | Windows 10 профессиональная, версия 1909 |

## <a name="template-machine"></a>Компьютер шаблона 

После создания шаблона компьютера запустите его и подключитесь к нему, чтобы выполнить следующие три основные задачи. 
 
1. Подготовьте компьютер шаблона для вложенной виртуализации.
2. Установите GNS3.
3. Создайте вложенную виртуальную машину GNS3 в Hyper-V.
4. Настройте GNS3 для использования виртуальной машины Windows Hyper-V.
5. Добавьте соответствующие устройства.
6. Шаблон публикации.


### <a name="prepare-template-machine-for-nested-virtualization"></a>Подготовка компьютера шаблона для вложенной виртуализации
- Следуйте инструкциям в [этой статье](how-to-enable-nested-virtualization-template-vm.md) , чтобы подготовить виртуальную машину шаблона для вложенной виртуализации. 

### <a name="install-gns3"></a>Установка GNS3
- Следуйте инструкциям по [установке gns3 в Windows](https://docs.gns3.com/docs/getting-started/installation/windows).  Не забудьте включить установку **виртуальной машины gns3** в диалоговом окне компонента, см. ниже.

![SelectGNS3vm](./media/class-type-networking-gns3/gns3-select-vm.png)

В итоге вы получите доступ к выбору виртуальной машины GNS3. Убедитесь, что выбран параметр **Hyper-V** .

![селексиперв](./media/class-type-networking-gns3/gns3-vm-hyper-v.png)

  Этот параметр позволяет скачать скрипт PowerShell и VHD-файлы для создания виртуальной машины GNS3 в диспетчере Hyper-V. Продолжайте установку, используя значения по умолчанию. **После завершения настройки не запускайте gns3**.

### <a name="create-gns3-vm"></a>Создание виртуальной машины GNS3
После завершения установки ZIP-файл **"GNS3.VM.Hyper-V.2.2.17.zip"** загружается в ту же папку, что и файл установки, содержащий диски и сценарий PowerShell для создания виртуальной машины Hyper-V.
- **Извлеките все** содержимое GNS3.VM.Hyper-V.2.2.17.zip.  Это действие выполнит извлечение дисков и сценарий PowerShell для создания виртуальной машины.
- **Запустите с помощью PowerShell** в сценарии powershell "create-vm.ps1", щелкнув файл правой кнопкой мыши.
- Может отобразиться запрос на изменение политики выполнения. Введите "Y", чтобы выполнить скрипт.

![псексекутионполици](./media/class-type-networking-gns3/powershell-execution-policy-change.png)

- После завершения скрипта можно подтвердить, что ВИРТУАЛЬная машина "GNS3 VM" создана в диспетчере Hyper-V.

### <a name="configure-gns3-to-use-hyper-v-vm"></a>Настройка GNS3 для использования виртуальной машины Hyper-V
После установки GNS3 и добавления виртуальной машины GNS3 запустите GNS3, чтобы связать эти две.  [Мастер установки gns3 запустится автоматически.](https://docs.gns3.com/docs/getting-started/setup-wizard-gns3-vm#local-gns3-vm-setup-wizard)  
- Используйте **команду запустить устройства из виртуальной машины.** (Создайте ветвь для и запустите запрос на вытягивание).  Используйте значения по умолчанию для остальной части мастера, пока не будет **Найдено средство VMware вмрун.** .

![вмвариррор](./media/class-type-networking-gns3/gns3-vmware-vmrun-tool-not-found.png)

- Нажмите кнопку **ОК** и **закройте** мастер.
- Чтобы завершить подключение к виртуальной машине Hyper-v, Откройте виртуальную машину **изменения**  ->  **настроек**  ->  **gns3** и выберите **включить виртуальную машину gns3** и выберите параметр **Hyper-v** .
 
![EnableGNS3VMs](./media/class-type-networking-gns3/gns3-preference-vm.png)

### <a name="add-appropriate-appliances"></a>Добавление соответствующих устройств

На этом этапе необходимо добавить соответствующие [устройства для класса.](https://docs.gns3.com/docs/using-gns3/beginners/install-from-marketplace)

### <a name="publish-template"></a>Публикация шаблона

Теперь, когда шаблон виртуальной машины настроен правильно и вы готовы к публикации, необходимо проверить несколько ключевых моментов.
- Убедитесь, что виртуальная машина GNS3 выключена или выключена.  Публикация во время работы ВИРТУАЛЬНОЙ машины приведет к повреждению виртуальной машины.
- Закройте GNS3. Публикация во время выполнения может привести к непредвиденным побочным эффектам.
- Очистите все файлы установки или другие ненужные файлы.

## <a name="cost"></a>Стоимость  

Если вы хотите оценить стоимость этой лаборатории, можно использовать следующий пример: 
 
Для класса из 25 учащихся с 20 часами запланированного времени обучения и 10 часами квоты для домашних заданий или назначений цена за лабораторию будет такой: 

25 учащихся * (20 + 10) ч * 84 лабораторных единиц * 0,01 долларов США в час = 630 долл. США. 

**Важно.** Оценка стоимости предназначена только для примера.  Текущие сведения о ценах см. на странице [цен на службы лаборатории Azure](https://azure.microsoft.com/pricing/details/lab-services/).

## <a name="conclusion"></a>Заключение
В этой статье описано, как создать лабораторию для настройки сети с помощью GNS3.

## <a name="next-steps"></a>Дальнейшие действия
Следующие шаги являются общими для настройки любой лаборатории.

- [Добавление пользователей](tutorial-setup-classroom-lab.md#add-users-to-the-lab)
- [Настройка квоты](how-to-configure-student-usage.md#set-quotas-for-users)
- [Настройка расписания](tutorial-setup-classroom-lab.md#set-a-schedule-for-the-lab) 
- [Отправка по электронной почте ссылок для регистрации учащимся](how-to-configure-student-usage.md#send-invitations-to-users)