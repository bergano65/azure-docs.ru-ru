---
title: Настройка лаборатории для обучения обработки и анализа данных с использованием записных книжек Python и Jupyter | Документация Майкрософт
description: Узнайте, как настроить лабораторию для обучения обработки и анализа данных с использованием записных книжек Python и Jupyter.
author: emaher
ms.topic: article
ms.date: 06/26/2020
ms.author: enewman
ms.openlocfilehash: 25fd090f76c0aa11617b34503ea18d1b45a0e1ce
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85445021"
---
# <a name="set-up-a-lab-to-teach-data-science-with-python-and-jupyter-notebooks"></a>Настройка лаборатории для обучения обработки и анализа данных с помощью записных книжек Python и Jupyter
В этой статье описывается, как настроить виртуальную машину шаблона (ВМ) в службах лаборатории с помощью средств, необходимых для обучения учащихся, как использовать [записные книжки Jupyter](http://jupyter-notebook.readthedocs.io/), а также как студенты могут подключаться к своим записным книжкам на виртуальных машинах (ВМ).

Jupyter Notebook — это проект с открытым кодом, который позволяет легко комбинировать форматированный текст и исполняемый исходный код Python на одном холсте, именуемом блокнотом. При запуске записной книжки создается линейная запись входных и выходных данных. Эти выходные данные могут включать текст, таблицы данных, точечные диаграммы и многое другое.

## <a name="set-up-the-lab"></a>Настройка лаборатории

### <a name="lab-configuration"></a>Настройка лаборатории
Чтобы настроить эту лабораторию, вам потребуется доступ к подписке Azure и учетной записи лаборатории. Познакомьтесь с администратором вашей организации, чтобы узнать, можете ли вы получить доступ к существующей подписке Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/), прежде чем начинать работу.

Создав подписку Azure, создайте новую учетную запись лаборатории в службах лаборатории Azure, следуя указаниям в руководстве по [настройке учетной записи лаборатории](tutorial-setup-lab-account.md). Можно также использовать существующую учетную запись лаборатории.

### <a name="lab-account-settings"></a>Параметры учетной записи лаборатории
Включите параметры, описанные в следующей таблице для учетной записи лаборатории. Дополнительные сведения о включении образов Marketplace см. в разделе [Указание образов Marketplace, доступных авторам лабораторий](specify-marketplace-images.md).

| Настройки учетной записи лаборатории | Instructions |
| ------------------- | ------------ |
| Образ Marketplace | В учетной записи лаборатории включите один из образов Azure Marketplace в соответствии с потребностями вашей операционной системы: <br/><ul><li>Виртуальная машина для обработки и анализа данных — Windows Server 2019</li><li>Виртуальная машина для обработки и анализа данных — Ubuntu 18,04</li></ul> |

> [!NOTE]
> В этой статье используются образы виртуальных машин для обработки и анализа данных, доступные в Azure Marketplace, так как они предварительно настроены с помощью Jupyter Notebook. Эти образы, однако, также включают множество других средств разработки и моделирования для обработки и анализа данных. Если вы не хотите, чтобы эти дополнительные средства и вы хотели использовать упрощенную настройку только с Jupyter записными книжками, создайте пользовательский образ виртуальной машины. Пример [установки жупиперхуб в Azure](http://tljh.jupyter.org/en/latest/install/azure.html). После создания пользовательского образа его можно передать в коллекцию общих образов, чтобы использовать этот образ в службах лаборатории Azure. Узнайте больше об [использовании коллекции общих образов в службах лаборатории Azure](how-to-attach-detach-shared-image-gallery.md). 

### <a name="lab-settings"></a>Параметры лаборатории
Настройте параметры **размера виртуальной машины** и **образа виртуальной машины** , как показано в следующей таблице при настройке лаборатории аудитории. Инструкции по созданию лабораторной среды см. в разделе [Настройка лаборатории для](tutorial-setup-classroom-lab.md)занятий.

| Параметры лаборатории | Значение или инструкции |
| ------------ | ------------------ | 
| размер виртуальной машины; | <p>Размер, который вы выбираете здесь, зависит от рабочей нагрузки, которую необходимо выполнить.</p><ul><li>Малый или средний — хорошо подходит для базовой настройки доступа к записным книжкам Jupyter.</li><li>Малый GPU (вычислительные ресурсы) — лучше всего подходит для ресурсоемких вычислительных и сетевых приложений, таких как искусственный интеллект и глубокое обучение.</li></ul> | 
| Образ виртуальной машины | <p>Выберите один из следующих образов в зависимости от потребностей операционной системы.</p><ul><li>[Виртуальная машина для обработки и анализа данных — Windows Server 2019](https://azuremarketplace.microsoft.com/marketplace/apps/microsoft-dsvm.dsvm-win-2019)</li><li>[Виртуальная машина для обработки и анализа данных — Ubuntu 18,04](https://azuremarketplace.microsoft.com/marketplace/apps/microsoft-dsvm.ubuntu-1804?tab=Overview)</li></ul> |


### <a name="template-virtual-machine"></a>Шаблон виртуальной машины
После создания лаборатории на основе выбранного размера и образа виртуальной машины будет создана шаблонная ВИРТУАЛЬная машина. Вы настраиваете для виртуальной машины шаблона все, что вы хотите предоставить учащимся для этого класса. Дополнительные сведения см. в разделе [Управление виртуальной машиной шаблона](how-to-create-manage-template.md). 

Образы виртуальных машин обработки и анализа данных по умолчанию входят в состав множества платформ обработки и анализа данных, необходимых для этого типа класса. Например, изображения включают:

- [Записные книжки Jupyter](http://jupyter-notebook.readthedocs.io/). веб-приложение, которое позволяет специалистам по обработке и анализу данных принимать необработанные данные, выполнять вычисления и просматривать результаты в одной и той же среде. Он будет выполняться локально в виртуальной машине шаблона.  
- [Visual Studio Code](https://code.visualstudio.com/): интегрированная среда разработки (IDE), предоставляющая широкие возможности интерактивного взаимодействия при написании и тестировании записной книжки. Дополнительные сведения см. [в разделе Работа с записными книжками Jupyter в Visual Studio Code](https://code.visualstudio.com/docs/python/jupyter-support).

### <a name="provide-notebooks-for-the-class"></a>Предоставление записных книжек для класса
Следующая задача — предоставить учащимся записным книжкам, которые вы хотите использовать. Чтобы предоставить собственные записные книжки, можно сохранить записные книжки локально на виртуальной машине шаблона. 

Если вы хотите использовать примеры записных книжек из Машинное обучение Azure, см. статью [Настройка среды с помощью записных книжек Jupyter](../machine-learning/how-to-configure-environment.md#jupyter). 

### <a name="optional-enable-graphical-desktop-for-linux"></a>Необязательно: Включение графического рабочего стола для Linux 
**Виртуальная машина для обработки и анализа данных — образ Ubuntu** уже подготовлен с помощью сервера X2GO и готов к приему клиентских подключений. При настройке виртуальной машины шаблона дальнейшие действия не требуются. 

### <a name="publish-the-template-machine"></a>Публикация шаблона компьютера
При публикации шаблона каждый учащийся, зарегистрированный в лаборатории, получит копию шаблона виртуальной машины со всеми локальными инструментами и записными книжками, которые вы настроили.

## <a name="how-students-connect-to-jupyter-notebooks"></a>Как студенты подключаются к записным книжкам Jupyter?
После публикации шаблона каждый учащийся будет иметь доступ к виртуальной машине, которая поставляется со всеми предварительно настроенными для класса, включая записные книжки Jupyter. В следующих разделах показаны различные способы подключения учащихся к записным книжкам Jupyter. 

### <a name="for-windows-vms"></a>Для виртуальных машин Windows
Если вы предоставили учащихся с виртуальными машинами Windows, им нужно подключиться к своим виртуальным машинам и использовать записные книжки Jupyter, которые доступны локально. 

Для подключения к виртуальной машине Windows учащийся может использовать подключение к удаленному рабочему столу (RDP). Подробные инструкции см. [в статье как получить доступ к лабораторной работе](how-to-use-classroom-lab.md). 

Студент, использующий Mac или свои Chromebook, может следовать инструкциям из следующих статей для подключения к виртуальной машине Windows для обработки и анализа данных. 

- [Подключение к виртуальной машине с помощью RDP на компьютере Mac](connect-virtual-machine-mac-remote-desktop.md)
- [Подключение к виртуальной машине с помощью RDP на Chromebook](connect-virtual-machine-chromebook-remote-desktop.md)

### <a name="for-linux-vms"></a>Для виртуальных машин Linux
Если вы предоставили учащихся с виртуальными машинами Linux, то можете использовать несколько вариантов для подключения к своим Jupyter записным книжкам на виртуальных машинах:

- Доступ к записным книжкам Jupyter локально после подключения к виртуальной машине
    - Подключение SSH к виртуальной машине для сеансов терминалов
     - X2Go подключение к виртуальной машине для графических сеансов
- Используйте Туннелирование SSH для подключения локального компьютера учащегося непосредственно к серверу Jupyter на виртуальной машине. 

Следующие разделы содержат сведения об этих способах подключения к записным книжкам Jupyter. 

#### <a name="ssh-to-virtual-machine"></a>SSH-подключение к виртуальной машине
Студенты могут подключаться по протоколу SSH к виртуальным машинам Linux из сеанса терминала. Подробные инструкции см. [в статье как получить доступ к лабораторной работе](how-to-use-classroom-lab.md). Если они используют клиентский компьютер Windows, им нужно будет включить клиент SSH, [загрузив](https://www.putty.org/) выводимое сообщение или включив [OpenSSH в Windows](https://docs.microsoft.com/windows-server/administration/openssh/openssh_install_firstuse) в SSH из командной строки. 

1.  Запустите виртуальную машину.
2.  Когда виртуальная машина будет запущена, нажмите кнопку **подключить**, чтобы открыть диалоговое окно, содержащее командную строку SSH, которая будет выглядеть, как в следующем примере:
    
     ```shell
    ssh -p 12345 student@ml-lab-00000000-0000-0000-0000-000000000000.eastus2.cloudapp.azure.com
     ```
3.  Перейдите в командную строку или терминал, вставьте эту команду и нажмите клавишу **Ввод**.
4.  Введите пароль для входа на виртуальную машину. 

После подключения учащихся к виртуальным машинам они смогут получать доступ к записным книжкам Jupyter и запускать их локально.

#### <a name="x2go-to-virtual-machine"></a>X2Go к виртуальной машине
**Виртуальная машина для обработки и анализа данных — образ Ubuntu** уже подготовлен с помощью сервера X2GO и готов к приему клиентских подключений. Чтобы подключиться к графическому рабочему столу компьютера Linux, студенты должны выполнить эти однократные действия, чтобы настроить X2Go на клиентских компьютерах:

1.  Скачайте и установите [клиент X2Go](https://wiki.x2go.org/doku.php/doc:installation:x2goclient) для клиентской платформы.
2.  На [портале служб лаборатории Azure](https://labs.azure.com)убедитесь, что виртуальная машина Linux, к которой вы хотите подключиться, запущена.
3.  Когда виртуальная машина будет запущена, нажмите кнопку **подключить**, чтобы открыть диалоговое окно, содержащее командную строку SSH, которая будет выглядеть, как в следующем примере:

    ```
     ssh -p 12345 student@ml-lab-00000000-0000-0000-0000-000000000000.eastus2.cloudapp.azure.com
     ```    
4. После получения этих сведений откройте клиентское приложение X2Go и создайте новый сеанс. 
5.  Введите следующие значения в области **Параметры сеанса** :
    - **Имя сеанса**. оно может быть любым, но мы рекомендуем использовать имя виртуальной машины лаборатории.
     - **Узел**:`ml-lab-00000000-0000-0000-0000-000000000000.eastus2.cloudapp.azure.com`
     - **Имя для входа**: учащийся
     - **Порт SSH**: 12345
     - **Тип сеанса**: XFce
6. Нажмите кнопку **ОК**. 

    > [!NOTE]
     > При создании нового сеанса X2Go обязательно используйте порт SSH, а **не** RDP-порт.

Теперь для подключения к виртуальной машине выполните следующие действия.    

1.  В клиенте X2Go дважды щелкните виртуальную машину, к которой необходимо подключиться. 

    ![Клиент X2Go](./media/class-type-jupyter-notebook/x2go-client.png)
2. Введите пароль для подключения к виртуальной машине. (Может потребоваться предоставить X2Go разрешение на обход брандмауэра для завершения подключения.)
3.  Теперь вы увидите графический интерфейс для виртуальной машины Ubuntu для обработки и анализа данных.


#### <a name="ssh-tunnel-to-jupyter-server-on-the-vm"></a>Туннелирование SSH к серверу Jupyter на виртуальной машине
Некоторым учащимся может потребоваться прямое подключение к серверу Jupyter на виртуальных машинах непосредственно с локального компьютера. Протокол SSH обеспечивает перенаправление портов между локальным компьютером и удаленным сервером (в нашем случае это лабораторная виртуальная машина учащегося), чтобы приложение, работающее на определенном порте на сервере, было **туннелно** на порт сопоставления на локальном компьютере. Студенты должны выполнить следующие действия для туннелирования SSH к серверу Jupyter на виртуальных машинах лаборатории:

1.  На [портале служб лаборатории Azure](https://labs.azure.com)убедитесь, что виртуальная машина Linux, которую вы хотите подключить, запущена.
2.  Когда виртуальная машина будет запущена, нажмите кнопку **подключить**, чтобы открыть диалоговое окно, содержащее командную строку SSH, которая будет выглядеть, как в следующей строке:

    ```bash
     ssh -p 12345 student@ml-lab-00000000-0000-0000-0000-000000000000.eastus2.cloudapp.azure.com
     ```
3. На локальном компьютере запустите терминал или окно командной строки и скопируйте в него строку подключения SSH. Затем добавьте `-L 8888:localhost:8888` в командную строку, которая создает **туннель** между портами. Последняя строка должна выглядеть следующим образом:

    ```bash
     ssh –L 8888:localhost:8888 -p 12345 student@ml-lab-b720853e-570f-49ac-9cb2-bd0bd2aeec35.eastus.cloudapp.azure.com
     ```
4. Нажмите клавишу **Ввод** , чтобы выполнить команду. 
5.  При появлении запроса введите пароль для подключения к виртуальной машине лаборатории. 
6.  После подключения к виртуальной машине запустите сервер Jupyter с помощью следующей команды: 

    ```bash
     jupyter notebook
     ```
7. При выполнении команды будет предоставлен URL-адрес в окне терминала или в командной строке. URL-адрес должен выглядеть следующим образом:

    ```bash
     http://localhost:8888/?token=8c09ecfc93e6a8cbedf9c66dffdae19670a64acc1d37
     ```
8. Вставьте этот URL-адрес в браузер на локальном компьютере, чтобы подключиться к Jupyter Notebook и работать с ним. 

    > [!NOTE]
    > Visual Studio Code также обеспечивает удобную [процедуру редактирования Jupyter Notebook](https://code.visualstudio.com/docs/python/jupyter-support). Вы можете выполнить инструкции по [подключению к удаленному серверу Jupyter](https://code.visualstudio.com/docs/python/jupyter-support#_connect-to-a-remote-jupyter-server) и использовать тот же URL-адрес из предыдущего шага, чтобы подключиться из VS Code, а не из браузера. 


## <a name="cost-estimate"></a>Оценка стоимости
Давайте рассмотрим возможную оценку затрат для этого класса. Мы будем использовать класс из 25 учащихся. Существует 20 часов запланированного времени класса. Кроме того, каждый учащийся получает 10 часов квоты на домашние задания или назначения за пределами запланированного времени класса. Выбран размер виртуальной машины Small GPU (вычислений), который составляет 139 лабораторных единиц. Если вы хотите использовать малый (20 лабораторных единиц) или средний размер (42 лабораторных единиц), можно заменить часть лабораторной единицы в уравнении ниже на правильное число.  

Ниже приведен пример возможной оценки затрат для этого класса: 25 учащихся * (20 запланированных часов + 10 часов квот) * 139 модулей лаборатории * 0,01 долларов США в час = 1042,5 долл. США

Дополнительные сведения о ценах см. в разделе [Цены на Службы лабораторий Azure](https://azure.microsoft.com/pricing/details/lab-services/).

## <a name="conclusion"></a>Заключение
В этой статье мы рассмотрели шаги по созданию лаборатории для класса записных книжек Jupyter. Аналогичную программу установки можно использовать для других классов машинного обучения.

## <a name="next-steps"></a>Дальнейшие шаги

Дальнейшие действия являются общими для настройки любой лаборатории.

- [Создание шаблона и управление им](how-to-create-manage-template.md)
- [Добавление пользователей](tutorial-setup-classroom-lab.md#add-users-to-the-lab)
- [Настройка квоты](how-to-configure-student-usage.md#set-quotas-for-users)
- [Настройка расписания](tutorial-setup-classroom-lab.md#set-a-schedule-for-the-lab)
- [Ссылки для регистрации электронной почты учащихся](how-to-configure-student-usage.md#send-invitations-to-users)
