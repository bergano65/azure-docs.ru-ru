---
title: Устранение сбоев при создании виртуальной машины и среды Azure DevTest Labs | Документация Майкрософт
description: Узнайте, как устранить неполадки виртуальной машины и сбоя при создании среды в Azure DevTest Labs.
services: devtest-lab,virtual-machines,lab-services
documentationcenter: na
author: spelluru
manager: femila
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2019
ms.author: spelluru
ms.openlocfilehash: bcdb549ce5b522b2d456e2cbeb5471b9df984514
ms.sourcegitcommit: 4b5dcdcd80860764e291f18de081a41753946ec9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2019
ms.locfileid: "68774412"
---
# <a name="troubleshoot-virtual-machine-vm-and-environment-creation-failures-in-azure-devtest-labs"></a>Устранение сбоев при создании виртуальной машины и сбоя создания среды в Azure DevTest Labs
DevTest Labs выдает предупреждения, если имя компьютера недопустимо или если вы собираетесь нарушать политику лаборатории. Иногда рядом с виртуальной машиной `X` лаборатории или состоянием среды отображается красный цвет, который информирует вас о том, что что-то пошло не так.  Эта статья содержит несколько приемов, которые можно использовать для поиска базовой проблемы и, надеюсь, избежать проблемы в будущем.

## <a name="portal-notifications"></a>Уведомления на портале
Если вы используете портал Azure, то первое, что следует искать, — это **панель уведомления**.  Уведомления панели, доступные на панели основных команд, нажав кнопку **значок колокольчика**, сообщает ли создании виртуальной Машины или среды лаборатории успешно или нет.  Если произошел сбой, отобразится сообщение об ошибке, связанное с ошибкой создания. Эти сведения часто предоставляют дополнительные сведения, помогающие устранить проблему. В следующем примере не удалось создать виртуальную машину из-за нехватки ядер. В подробном сообщении объясняется, как устранить проблему и запросить увеличение квоты на ядро.

![Уведомление портал Azure](./media/troubleshoot-vm-environment-creation-failures/portal-notification.png)

### <a name="vm-in-corruption-state"></a>Виртуальная машина в состоянии повреждения
Если в лаборатории вы видите состояние поврежденной виртуальной машины, возможно, базовая виртуальная машина была удалена со страницы **виртуальной машины** , к которой пользователь может переходить со страницы **виртуальные машины** (не со страницы DevTest Labs). Очистите лабораторию в DevTest Labs, удалив виртуальную машину из лаборатории. Затем повторно создайте виртуальную машину в лаборатории. 

![Виртуальная машина в поврежденном состоянии](./media/troubleshoot-vm-environment-creation-failures/vm-corrupted-state.png)



## <a name="activity-logs"></a>Журналы действий
Просмотрите журналы действий, если вы изучаете сбой после попытки создания виртуальной машины или среды. В этом разделе показано, как найти журналы для виртуальных машин и сред.

## <a name="activity-logs-for-virtual-machines"></a>Журналы действий для виртуальных машин

1. На домашней странице лаборатории выберите ВИРТУАЛЬную машину для запуска страницы **виртуальной машины** .
2. На странице **Виртуальная машина** в разделе **мониторинг** в меню слева выберите **Журнал действий** , чтобы просмотреть все журналы, связанные с виртуальной машиной.
3. В элементах журнала действий выберите операцию, которая завершилась ошибкой. Как правило, операция, вызвавшая `Write Virtualmachines`сбой, называется.
4. На панели справа перейдите на вкладку JSON. Подробные сведения отображаются в представлении JSON журнала.

    ![Журнал действий для виртуальной машины](./media/troubleshoot-vm-environment-creation-failures/vm-activity-log.png)
5. Просмотрите журнал JSON, пока не найдете `statusMessage` свойство. Он предоставляет основное сообщение об ошибке и более подробную информацию, если это применимо. Следующий код JSON является примером ошибки, о которой появлялось в кавычках выше в этой статье.

    ```json
    "properties": {
        "statusCode": "Conflict",
        "statusMessage": "{\"status\":\"Failed\",\"error\":{\"code\":\"ResourceDeploymentFailure\",\"message\":\"The resource operation completed with terminal provisioning state 'Failed'.\",\"details\":[{\"code\":\"OperationNotAllowed\",\"message\":\"Operation results in exceeding quota limits of Core. Maximum allowed: 100, Current in use: 100, Additional requested: 8. Please read more about quota increase at https://aka.ms/corequotaincrease.\"}]}}",
    },
    ```

## <a name="activity-log-for-an-environment"></a>Журнал действий для среды

Чтобы просмотреть журнал действий для создания среды, выполните следующие действия.

1. На домашней странице лаборатории в меню слева выберите **Конфигурация и политики** .
2. на странице **Конфигурация и политики** в меню выберите **журналы действий** .
3. Найдите ошибку в списке действий в журнале и выберите ее.
4. В области справа перейдите на вкладку JSON и найдите **statusMessage**.

    ![Журнал действий среды](./media/troubleshoot-vm-environment-creation-failures/envirionment-activity-log.png)

## <a name="resource-manager-template-deployment-logs"></a>Журналы развертывания шаблона диспетчер ресурсов
Если среда или виртуальная машина была создана с помощью службы автоматизации, для просмотра сведений об ошибках существует одно Последнее место. Это журнал развертывания шаблона Azure Resource Manager. При создании лабораторного ресурса с помощью службы автоматизации часто выполняется развертывание шаблона Azure Resource Manager. См[https://github.com/Azure/azure-devtestlab/tree/master/samples/DevTestLabs/QuickStartTemplates](https://github.com/Azure/azure-devtestlab/tree/master/samples/DevTestLabs/QuickStartTemplates) . Примеры шаблонов Azure Resource Manager, которые создают ресурсы DevTest Labs.

Чтобы просмотреть журналы развертывания шаблона лаборатории, выполните следующие действия.

1. Откройте страницу группы ресурсов, в которой существует Лаборатория.
2. В меню слева выберите **развертывания** в разделе **Параметры**.
3. Найдите развертывания с состоянием сбоя и выберите его.
4. На странице **развертывание** выберите ссылку **сведения об операции** для операции, которая завершилась ошибкой.
5. Вы увидите сведения об операции, которая завершилась ошибкой в окне **сведения об операции** .

## <a name="next-steps"></a>Следующие шаги
См. раздел [Устранение неполадок артефактов](devtest-lab-troubleshoot-artifact-failure.md)