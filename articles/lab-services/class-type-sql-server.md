---
title: Настройка лаборатории для управления базой данных SQL Azure и ее разработки | Службы лаборатории Azure
description: Узнайте, как настроить лабораторию для управления и разработки базы данных SQL Azure.
author: emaher
ms.topic: article
ms.date: 06/26/2020
ms.author: enewman
ms.openlocfilehash: 9fc0a965869207ba8d1b4eb6f45e878ae4b93c3a
ms.sourcegitcommit: 2ffa5bae1545c660d6f3b62f31c4efa69c1e957f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2020
ms.locfileid: "88079028"
---
# <a name="set-up-a-lab-to-manage-and-develop-with-sql-server"></a>Настройка лаборатории для управления и разработки с помощью SQL Server

В этой статье описывается, как настроить лабораторию для базового класса SQL Server управления и разработки в службах лаборатории Azure.  Основные понятия базы данных — один из вводных курсов, которые научились в большинстве компьютерных отделов в колледже. Язык SQL (SQL) является международным стандартом.  SQL — это стандартный язык для управления базой данных отношений, включая добавление, доступ и управление содержимым в базе данных.  Он наиболее часто отмечается для быстрой обработки, проверенной надежности, простоты и гибкости использования.

В этой статье мы покажем, как настроить шаблон виртуальной машины в лаборатории с помощью [Visual Studio 2019](https://visualstudio.microsoft.com/vs/), [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver15)и [Azure Data Studio](https://github.com/microsoft/azuredatastudio).  Для этого лабораторного занятия мы будем использовать одну общую [базу данных SQL Server](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview) для всей лаборатории. [База данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview) — это платформа как услуга (PaaS), ядро СУБД предложение из Azure.

## <a name="lab-configuration"></a>Настройка лаборатории

Для настройки этой лабораторной работы требуется подписка Azure и учетная запись лаборатории. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу. После получения подписки Azure можно создать новую учетную запись лаборатории в службах лаборатории Azure. Дополнительные сведения о создании учетной записи лаборатории см. в разделе [учебник по настройке учетной записи лаборатории](https://docs.microsoft.com/azure/lab-services/classroom-labs/tutorial-setup-lab-account). Можно также использовать существующую учетную запись лаборатории.

### <a name="lab-account-settings"></a>Параметры учетной записи лаборатории

Включите параметры, описанные в таблице ниже, для учетной записи лаборатории. Дополнительные сведения о том, как включить образы Marketplace, см. [в разделе Указание образов Marketplace, доступных авторам лабораторий](specify-marketplace-images.md).

| Настройки учетной записи лаборатории | Instructions |
| ------------------- | ------------ |
| Образ Marketplace | Включите "Visual Studio 2019 Community (новейшая версия)" в образ Windows 10 Корпоративная N (x64) "для использования в вашей учетной записи лаборатории. |

### <a name="shared-resource-configuration"></a>Конфигурация общего ресурса

Чтобы использовать общий ресурс в службах лаборатории, сначала необходимо создать виртуальную сеть и сами ресурсы.  Чтобы создать виртуальную сеть и подключить ее к лаборатории, следуйте инструкциям по [созданию лаборатории с общим ресурсом в службах лаборатории Azure](how-to-create-a-lab-with-shared-resource.md).  Помните, что счета за ресурсы, внешние для служб лаборатории, будут выставляться отдельно и не будут включаться в оценочные затраты на лабораторию.

>[!WARNING]
>Перед созданием лаборатории необходимо настроить общие ресурсы для лаборатории.  Если виртуальная сеть не [соединена с учетной записью лаборатории](how-to-connect-peer-virtual-network.md) *до* создания лаборатории, то лаборатория не будет иметь доступа к общему ресурсу.

Теперь, когда сетевая часть компонентов обрабатывается, можно создать SQL Server базу данных.  Мы создадим [одну базу данных](https://docs.microsoft.com/azure/sql-database/sql-database-single-database-get-started?tabs=azure-portal) , так как это самый быстрый вариант развертывания для базы данных SQL Azure.  Для других вариантов развертывания создайте [эластичный пул](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool#creating-a-new-sql-database-elastic-pool-using-the-azure-portal), [управляемый экземпляр](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-get-started)или [виртуальную машину SQL](https://docs.microsoft.com/azure/virtual-machines/windows/sql/quickstart-sql-vm-create-portal).

1. В меню портал Azure выберите команду **создать новый ресурс**.
2. Выберите **база данных SQL** и нажмите кнопку **создать** .
3. На вкладке **Основные сведения** в форме **Создание базы данных SQL** выберите группу ресурсов для базы данных.  Мы будем использовать *sqldb-RG*.
4. В качестве **имени базы данных**введите *класслабдб*.
5. В разделе параметр **сервера** щелкните **создать** , чтобы создать новый сервер для размещения базы данных.
6. На всплывающем окне **новый сервер** введите имя сервера.  Мы будем использовать *класслабдбсервер*.  Имя сервера должно быть глобально уникальным.
7. Введите *azureuser* для **имени входа администратора сервера**.
8. Введите запоминающееся пароль.  Длина пароля должна составлять не менее восьми символов и содержать специальные символы.
9. Выберите регион для **расположения**.  Если это возможно, укажите то же расположение учетной записи лаборатории и одноранговой виртуальной сети, чтобы максимально ограничить задержку.
10. Нажмите кнопку **ОК** , чтобы вернуться к форме **Создание базы данных SQL** .
11. Щелкните **настроить связь с базой данных** в параметре **вычислений и хранилища** .
12. При необходимости измените параметры базы данных для класса.  Можно выбрать один из вариантов: подготовленный и бессерверный.  В этом примере мы будем использовать автомасштабируемый режим без сервера с параметром max виртуальных ядер из 4, min виртуальных ядер, равного 1. Параметр приостановки будет включен в минимальное значение, равное 1 часу. Нажмите кнопку **Применить**.
13. Нажмите кнопку **Далее:** кнопка "сеть".
14. На вкладке "сеть" выберите частная конечная точка для **метода подключения**.
15. В разделе **частные конечные точки** щелкните **Добавить частную конечную точку**.
16. На всплывающем окне **Создание частной конечной точки** выберите ту же группу ресурсов, в которой находится виртуальная сеть, соединенная с учетной записью лаборатории.
17. В поле **Расположение**выберите то же расположение, что и для виртуальной сети.
18. В качестве **имени**введите *лабскл-ендпт*.
19. Оставьте для целевого подресурса значение SqlServer.
20. В поле **Виртуальная сеть**выберите ту же виртуальную сеть, к которой подключена учетная запись лаборатории.
21. В поле **подсеть**выберите подсеть, в которой должна размещаться конечная точка.  IP-адрес, назначенный конечной точке, будет соответствовать диапазону, назначенному этой подсети.
22. Задайте для параметра **Интеграция с частным DNS** значение **нет**. Для простоты мы будем использовать DNS Azure через собственную закрытую зону DNS или собственные DNS-серверы.
23. Нажмите кнопку **ОК**.
24. Щелкните **Далее: Дополнительные параметры**.
25. Для параметра **использовать существующие данные** выберите **Пример**.  Данные из базы данных AdventureWorksLT будут использоваться при создании базы данных.
26. Щелкните **Review + create** (Просмотреть и создать).
27. Нажмите кнопку **Создать**.

После успешного завершения развертывания базы данных SQL мы можем создать лабораторию и установить программное обеспечение на компьютере с лабораторным шаблоном.

### <a name="lab-settings"></a>Параметры лаборатории

При настройке лаборатории для занятий используйте параметры, приведенные в таблице ниже. Дополнительные сведения о создании лабораторной среды см. в разделе [Настройка лаборатории по созданию аудиторий](tutorial-setup-classroom-lab.md).

| Параметры лаборатории | Значение или инструкции |
| ------------ | ------------------ |
| Размер виртуальной машины | Средний. Этот размер лучше всего подходит для реляционных баз данных, кэширования в памяти и аналитики. |
| Образ виртуальной машины | Visual Studio 2019 Community (последний выпуск) в Windows 10 Корпоративная N (x64) |

Теперь, когда наша Лаборатория создана, мы изменим шаблон на компьютере с нужным программным обеспечением.

## <a name="visual-studio"></a>Visual Studio

Выбранное выше изображение включает [сообщество Visual Studio 2019](https://visualstudio.microsoft.com/vs/community/).  Все рабочие нагрузки и наборы инструментов уже установлены на образе.  Используйте Visual Studio Installer для [установки дополнительных средств](https://docs.microsoft.com/visualstudio/install/modify-visual-studio?view=vs-2019) , которые могут потребоваться.  [Войдите в Visual Studio](https://docs.microsoft.com/visualstudio/ide/signing-in-to-visual-studio?view=vs-2019#how-to-sign-in-to-visual-studio) , чтобы разблокировать выпуск Community.

Visual Studio включает набор средств **хранения и обработки данных** , который включает SQL Server Data Tools (SSDT).  Дополнительные сведения о возможностях SSDT см. в разделе [Общие сведения о SQL Server Data Tools](https://docs.microsoft.com/sql/ssdt/sql-server-data-tools?view=sql-server-ver15).  Чтобы проверить подключение к общему SQL Server для класса будет успешным, см. раздел [Подключение к базе данных и Просмотр существующих объектов](https://docs.microsoft.com/sql/ssdt/how-to-connect-to-a-database-and-browse-existing-objects?view=sql-server-ver15). При появлении запроса добавьте IP-адрес компьютера шаблона в [список разрешенных компьютеров](https://docs.microsoft.com/azure/azure-sql/database/firewall-configure) , которые могут подключаться к вашему экземпляру SQL Server.

Visual Studio поддерживает несколько рабочих нагрузок, в том числе **веб-& облачные** и **настольные & мобильные** рабочие нагрузки.  Обе эти рабочие нагрузки поддерживают SQL Server в качестве источника данных. Дополнительные сведения об использовании ASP.NET Core для SQL Server см. [в руководстве по созданию ASP.NET Core и приложения базы данных SQL в службе приложений Azure](https://docs.microsoft.com/azure/app-service/tutorial-dotnetcore-sqldb-app) .  Используйте библиотеку [System. Data. SqlClient](https://docs.microsoft.com/dotnet/api/system.data.sqlclient) для подключения к базе данных SQL из приложения [Xamarin](https://docs.microsoft.com/xamarin) .

## <a name="install-azure-data-studio"></a>Установка Azure Data Studio

[Azure Data Studio](https://github.com/microsoft/azuredatastudio) — это многоуровневая многоплатформенная среда рабочего стола для специалистов по работе с данными, использующая семейство локальных и облачных платформ данных в Windows, MacOS и Linux.

1. Скачайте [установщик Azure Data Studio *системы* для Windows](https://go.microsoft.com/fwlink/?linkid=2127432). Чтобы найти установщики для других поддерживаемых операционных систем, перейдите на страницу загрузки [Azure Data Studio](https://docs.microsoft.com/sql/azure-data-studio/download) .
2. На странице **лицензионное соглашение** выберите **я принимаю условия соглашения**. Щелкните **Далее**.
3. На странице **Выбор места назначения** нажмите кнопку **Далее**.
4. На странице **Выбор папки меню запуска** щелкните **Далее**.
5. На странице **Выбор дополнительных задач** установите флажок **создать значок рабочего стола** , если требуется значок рабочего стола.  Щелкните **Далее**.
6. На странице **все готово для установки**нажмите кнопку **Далее**.
7. Дождитесь запуска установщика.  Нажмите кнопку **Готово**.

Теперь, после установки Azure Data Studio, давайте настроим подключение к базе данных SQL Azure.

1. На странице **приветствия** Azure Data Studio щелкните ссылку **создать подключение** .
2. В поле **сведения о подключении** введите необходимые сведения.
    - Установить **сервер** в *classlabdbserver.Database.Windows.NET*
    - Задайте имя **пользователя** *azureuser* .
    - Задайте для параметра **пароль** значение пароль, используемый для создания базы данных.
    - Установите флажок **Запомнить пароль**.
    - В качестве **базы данных**выберите *класслабдб*.
3. Нажмите кнопку **Подключиться**.

## <a name="install-sql-server-management-studio"></a>Установите SQL Server Management Studio

[SQL Server Management Studio (SSMS)](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver15) — это интегрированная среда для управления любой инфраструктурой SQL.  SSMS — это средство, используемое администраторами баз данных для развертывания, мониторинга и обновления инфраструктуры данных.

1. [Скачайте SQL server Management Studio](https://aka.ms/ssmsfullsetup). После скачивания запустите установщик.
2. На странице **приветствия** нажмите кнопку **установить**.
3. На странице **Установка завершена** нажмите кнопку **Закрыть**.
4. Запустите SQL Server Management Studio.  
5. На странице **процесс настройки зависимостей** нажмите кнопку **Закрыть**.

Если среда SSMS не установлена, можно [подключиться к SQL Server и запросить](https://docs.microsoft.com/sql/ssms/tutorials/connect-query-sql-server)их. При настройке соединения используйте следующие значения:

- Тип сервера: ядро СУБД
- Имя сервера: *classlabdbserver.Database.Windows.NET*
- Проверка подлинности: SQL Server проверка подлинности
- Имя для входа: *azureuser*
- Password: пароль, используемый для создания базы данных.

## <a name="cost-estimate"></a>Оценка стоимости

Давайте рассмотрим возможную оценку затрат для этого класса. Оценка не включает затраты на выполнение SQL Server.  Актуальные сведения о ценах на базу данных см. в разделе [цены на базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database) .

Мы будем использовать класс из 25 учащихся. Существует 20 часов запланированного времени класса. Кроме того, каждый учащийся получает 10 часов квоты на домашние задания или назначения за пределами запланированного времени класса. Выбран размер виртуальной машины Medium, то есть 42 лабораторных единиц.

Ниже приведен пример возможной оценки затрат для этого класса:

25 учащихся \* (20 запланированных часов с \+ 10 квотами) * 0,42 долларов США в час = 315,00 долл. США

>[!IMPORTANT]
>Оценка стоимости предназначена только для примера. Текущие сведения о ценах см. на странице [цен на службы лаборатории Azure](https://azure.microsoft.com/pricing/details/lab-services/).

## <a name="next-steps"></a>Дальнейшие действия

Дальнейшие действия являются общими для настройки любой лаборатории.

- [Создание, управление и публикация шаблона](how-to-create-manage-template.md)
- [Добавление пользователей](tutorial-setup-classroom-lab.md#add-users-to-the-lab)
- [Настройка квоты](how-to-configure-student-usage.md#set-quotas-for-users)
- [Настройка расписания](tutorial-setup-classroom-lab.md#set-a-schedule-for-the-lab)
- [Ссылки для регистрации электронной почты учащихся](how-to-configure-student-usage.md#send-invitations-to-users)
