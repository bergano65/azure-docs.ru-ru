---
title: Настройка лаборатории с графическими процессорами в службах лаборатории Azure | Документация Майкрософт
description: Узнайте, как настроить лабораторию с помощью виртуальных машин графического процессора (GPU).
author: nicolela
ms.topic: article
ms.date: 06/26/2020
ms.author: nicolela
ms.openlocfilehash: abd182339719f19a521feed95f7cfbed6942b3e8
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91404788"
---
# <a name="set-up-a-lab-with-gpu-virtual-machines"></a>Настройка лаборатории с помощью виртуальных машин GPU

В этой статье показано, как выполнять следующие задачи:

- Выбор между *визуализацией* и *вычислительными* единицами обработки графических процессоров (GPU).
- Убедитесь, что установлены соответствующие драйверы GPU.

## <a name="choose-between-visualization-and-compute-gpu-sizes"></a>Выбор размера GPU для визуализации и вычислений
На первой странице мастера создания лаборатории в раскрывающемся списке требуемый **Размер виртуальной машины** выберите размер виртуальных машин, необходимых для вашего класса.  

![Снимок экрана: область "Новая лаборатория" для выбора размера виртуальной машины](./media/how-to-setup-gpu/lab-gpu-selection.png)

В этом процессе можно выбрать **визуализацию** или **Вычисление** GPU.  Важно выбрать тип GPU, основанный на программном обеспечении, которое будут использовать студенты.  

Как описано в следующей таблице, размер *вычислений* GPU предназначен для ресурсоемких приложений.  Например, для [глубокого обучения в типе класса обработки естественного языка](./class-type-deep-learning-natural-language-processing.md) используется **малый размер GPU (вычислений)** .  Вычислительный GPU подходит для этого типа класса, так как студенты используют платформы и средства глубокого обучения, предоставляемые [образом виртуальной машины](https://azuremarketplace.microsoft.com/marketplace/apps/microsoft-dsvm.ubuntu-1804) для обработки и анализа данных, для обучения моделей глубокого обучения с большими наборами данных.

| Размер | Ядра | ОЗУ | Описание | 
| ---- | ----- | --- | ----------- | 
| Малый GPU (вычисления) | -&nbsp;6 &nbsp; ядер<br>-&nbsp;56 &nbsp; ГБ &nbsp; ОЗУ  | [Standard_NC6](https://docs.microsoft.com/azure/virtual-machines/nc-series) |Этот размер лучше всего подходит для ресурсоемких приложений, таких как искусственный интеллект (ии) и глубокое обучение. |

Размеры GPU *визуализации* предназначены для приложений, интенсивно использующих графические объекты.  Например, [тип инженерного класса солидворкс](./class-type-solidworks.md) показывает, что используется **малый размер GPU (визуализация)** .  Графический процессор визуализации подходит для этого типа класса, так как студенты взаимодействуют с средой СОЛИДВОРКС 3D (CAD), предназначенной для моделирования и визуализации сплошных объектов.

| Размер | Ядра | ОЗУ | Описание | 
| ---- | ----- | --- | ----------- | 
| Малый GPU (визуализация) | -&nbsp;6 &nbsp; ядер<br>-&nbsp;56 &nbsp; ГБ &nbsp; ОЗУ  | [Standard_NV6](https://docs.microsoft.com/azure/virtual-machines/nv-series) | Этот размер лучше всего подходит для удаленной визуализации, потоковой передачи, игр и кодирования, в которых используются такие платформы, как OpenGL и DirectX. |
| Средний GPU (визуализация) | -&nbsp;12 &nbsp; ядер<br>-&nbsp;112 &nbsp; ГБ &nbsp; ОЗУ  | [Standard_NV12](https://docs.microsoft.com/azure/virtual-machines/nv-series?toc=/azure/virtual-machines/linux/toc.json&bc=/azure/virtual-machines/linux/breadcrumb/toc.json) | Этот размер лучше всего подходит для удаленной визуализации, потоковой передачи, игр и кодирования, в которых используются такие платформы, как OpenGL и DirectX. |

> [!NOTE]
> Некоторые из этих размеров виртуальных машин могут не отображаться в списке при создании лаборатории для аудитории. Этот список заполняется с учетом текущей емкости в расположении лаборатории. Если создатель учетной записи лаборатории [разрешил авторам лабораторий выбрать расположение для лабораторий](allow-lab-creator-pick-lab-location.md), вы можете попробовать другое расположение для лаборатории и узнать, доступен ли там нужный размер виртуальной машины. Сведения о доступности виртуальных машин см. [в разделе продукты, доступные по регионам](https://azure.microsoft.com/regions/services/?products=virtual-machines).

## <a name="ensure-that-the-appropriate-gpu-drivers-are-installed"></a>Убедитесь, что установлены соответствующие драйверы GPU
Чтобы воспользоваться возможностями GPU виртуальных машин лаборатории, убедитесь, что установлены соответствующие драйверы GPU.  В мастере создания лаборатории при выборе размера виртуальной машины GPU можно выбрать параметр **установить драйверы GPU** .  

![Снимок экрана: "Новая лаборатория" с параметром "установить драйверы GPU"](./media/how-to-setup-gpu/lab-gpu-drivers.png)

Как показано на предыдущем рисунке, этот параметр включен по умолчанию, что гарантирует установку *новейших* драйверов для выбранного типа GPU и образа.
- При выборе размера *вычислений* GPU виртуальные машины лаборатории работают под управлением GPU [NVIDIA Tesla K80](https://www.nvidia.com/content/dam/en-zz/Solutions/Data-Center/tesla-product-literature/Tesla-K80-BoardSpec-07317-001-v05.pdf) .  В этом случае устанавливаются последние драйверы [вычислений для унифицированной архитектуры устройств (CUDA)](http://developer.download.nvidia.com/compute/cuda/2_0/docs/CudaReferenceManual_2.0.pdf) , обеспечивающие высокую производительность вычислений.
- При выборе размера GPU *визуализации* на виртуальных машинах лаборатории используются технология [NVIDIA Tesla M60](https://images.nvidia.com/content/tesla/pdf/188417-Tesla-M60-DS-A4-fnl-Web.pdf) GPU и [Grid](https://www.nvidia.com/content/dam/en-zz/Solutions/design-visualization/solutions/resources/documents1/NVIDIA_GRID_vPC_Solution_Overview.pdf).  В этом случае устанавливаются последние драйверы сетки, что позволяет использовать приложения с большим объемом графики.

### <a name="install-the-drivers-manually"></a>Установка драйверов вручную
Может потребоваться установить версию драйвера, отличную от последней версии.  В этом разделе показано, как вручную установить соответствующие драйверы в зависимости от того, используете ли вы процессор *вычислений* или графический процессор *визуализации* .

#### <a name="install-the-compute-gpu-drivers"></a>Установка драйверов вычислений GPU

Чтобы вручную установить драйверы для размера вычислений GPU, выполните следующие действия.

1. При [создании лаборатории](./how-to-manage-classroom-labs.md)в мастере создания лаборатории отключите параметр **установить драйверы GPU** .

1. После создания лаборатории подключитесь к виртуальной машине шаблона, чтобы установить соответствующие драйверы.

   ![Снимок экрана со страницей загрузки драйвера NVIDIA](./media/how-to-setup-gpu/nvidia-driver-download.png) 

   a. В браузере перейдите на [страницу загрузки драйвера NVIDIA](https://www.nvidia.com/Download/index.aspx).  
   b. Задайте **Тип продукта** **Tesla**.  
   c. Присвойте **серии продуктов** **серии K**.  
   d. Укажите **операционную систему** в соответствии с типом базового образа, выбранного при создании лаборатории.  
   д) Задайте для набора **средств CUDA** версию драйвера CUDA, которая вам нужна.  
   е) Выберите **Поиск** для поиска драйверов.  
   ж. Щелкните **скачать** , чтобы скачать установщик.  
   h. Запустите установщик, чтобы установить драйверы на виртуальную машину шаблона.  
1. Проверьте правильность установки драйверов, следуя инструкциям в разделе [Проверка установленных драйверов](how-to-setup-lab-gpu.md#validate-the-installed-drivers) . 
1. После установки драйверов и другого программного обеспечения, необходимого для вашего класса, выберите **опубликовать** , чтобы создать виртуальные машины учащихся.

> [!NOTE]
> Если вы используете образ Linux, после загрузки установщика установите драйверы, следуя инструкциям в [статье Установка драйверов CUDA в Linux](https://docs.microsoft.com/azure/virtual-machines/linux/n-series-driver-setup?toc=/azure/virtual-machines/linux/toc.json#install-cuda-drivers-on-n-series-vms).

#### <a name="install-the-visualization-gpu-drivers"></a>Установка драйверов графического процессора визуализации

Чтобы вручную установить драйверы для размера графического процессора визуализации, выполните следующие действия.

1. При [создании лаборатории](./how-to-manage-classroom-labs.md)в мастере создания лаборатории отключите параметр **установить драйверы GPU** .
1. После создания лаборатории подключитесь к виртуальной машине шаблона, чтобы установить соответствующие драйверы.
1. Установите драйверы сетки, предоставляемые корпорацией Майкрософт, на виртуальную машину шаблона, следуя инструкциям для вашей операционной системы:
   -  [Драйверы Windows NVIDIA GRID](https://docs.microsoft.com/azure/virtual-machines/windows/n-series-driver-setup#nvidia-grid-drivers)
   -  [Драйверы сетки для Linux NVIDIA](https://docs.microsoft.com/azure/virtual-machines/linux/n-series-driver-setup?toc=/azure/virtual-machines/linux/toc.json#nvidia-grid-drivers)
  
1. Перезапустите виртуальную машину шаблона.
1. Проверьте правильность установки драйверов, следуя инструкциям в разделе [Проверка установленных драйверов](how-to-setup-lab-gpu.md#validate-the-installed-drivers) .
1. После установки драйверов и другого программного обеспечения, необходимого для вашего класса, выберите **опубликовать** , чтобы создать виртуальные машины учащихся.

### <a name="validate-the-installed-drivers"></a>Проверка установленных драйверов
В этом разделе описывается, как проверить правильность установки драйверов GPU.

#### <a name="windows-images"></a>Образы Windows
1.  Следуйте инструкциям в разделе "Проверка установки драйвера" статьи [Установка драйверов GPU NVIDIA на виртуальных машинах серии N под управлением Windows](https://docs.microsoft.com/azure/virtual-machines/windows/n-series-driver-setup#verify-driver-installation).
1.  Если вы используете графический процессор *визуализации* , вы также можете:
    - Просмотр и Настройка параметров GPU на панели управления NVIDIA. Для этого в **панели управления Windows**выберите **оборудование**, а затем щелкните **элемент Панель управления NVIDIA**.

      ![Снимок экрана: панель управления Windows, отображающая ссылку на панель управления NVIDIA](./media/how-to-setup-gpu/control-panel-nvidia-settings.png) 

     - Просмотр производительности GPU с помощью **диспетчера задач**.  Для этого перейдите на вкладку **производительность** и выберите параметр **GPU** .

       ![Снимок экрана: вкладка производительности графического процессора диспетчера задач](./media/how-to-setup-gpu/task-manager-gpu.png) 

      > [!IMPORTANT]
      > Доступ к параметрам панели управления NVIDIA можно получить только для графических процессоров *визуализации* .  При попытке открыть панель управления NVIDIA для вычислений GPU возникает следующая ошибка: "Параметры экрана NVIDIA недоступны.  В данный момент не используется дисплей, присоединенный к GPU NVIDIA. "  Аналогичным образом сведения о производительности GPU в диспетчере задач предоставляются только для графических процессоров визуализации.

#### <a name="linux-images"></a>Образы Linux
Следуйте инструкциям в разделе "Проверка установки драйвера" статьи [Установка драйверов GPU NVIDIA на виртуальных машинах серии N под управлением Linux](https://docs.microsoft.com/azure/virtual-machines/linux/n-series-driver-setup#verify-driver-installation).

## <a name="next-steps"></a>Дальнейшие действия
См. следующие статьи:

- [Создание и администрирование лабораторий для аудитории](how-to-manage-classroom-labs.md)
- [Тип класса СОЛИДВОРКС Computer-автоматизированного проектирования (CAD)](class-type-solidworks.md)
- [Тип класса MATLAB (матричная лаборатория)](class-type-matlab.md)



