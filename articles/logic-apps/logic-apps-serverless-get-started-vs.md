---
title: Создание первого бессерверного приложения в Visual Studio
description: Создание, развертывание бессерверного приложения и управление им с помощью Azure Logic Apps и функций Azure в Visual Studio
services: logic-apps
ms.suite: integration
ms.reviewer: klam, logicappspm
ms.topic: article
ms.date: 06/20/2019
ms.openlocfilehash: 4ed2ad2d2ff92e9320a7b9c773c4d6e5857fb905
ms.sourcegitcommit: 76b48a22257a2244024f05eb9fe8aa6182daf7e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74792964"
---
# <a name="build-your-first-serverless-app-by-using-azure-logic-apps-and-azure-functions-in-visual-studio"></a>Создание первого бессерверного приложения с помощью Azure Logic Apps и функций Azure в Visual Studio

Вы можете быстро разрабатывать и развертывать облачные приложения с помощью бессерверных средств и возможностей в Azure, таких как [Azure Logic Apps](../logic-apps/logic-apps-overview.md) и [функции Azure](../azure-functions/functions-overview.md). В этой статье показано, как в Visual Studio приступить к созданию бессерверного приложения на основе приложения логики, которое вызывает функцию Azure. Дополнительные сведения о бессерверных решениях в Azure см. в статье [Обзор бессерверных компонентов Azure с функциями и Logic Apps](../logic-apps/logic-apps-serverless-overview.md).

## <a name="prerequisites"></a>Технические условия

Чтобы создать бессерверное приложение в Visual Studio, вам потребуется:

* Подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Следующие средства. Если у вас их еще нет, скачайте и установите их.

  * [Visual Studio 2019, 2017 или 2015 (сообщество или другой выпуск)](https://aka.ms/download-visual-studio). 
  В этом кратком руководстве используется бесплатная версия Visual Studio Community 2017.

    > [!IMPORTANT]
    > При установке Visual Studio 2019 или 2017 обязательно выберите рабочую нагрузку **разработки Azure**.

  * [Пакет Microsoft Azure SDK для .NET (версия 2.9.1 или более поздняя)](https://azure.microsoft.com/downloads/). 
  Дополнительные сведения о [пакете Azure SDK для .NET](https://docs.microsoft.com/dotnet/azure/dotnet-tools?view=azure-dotnet).

  * [Azure PowerShell](https://github.com/Azure/azure-powershell#installation).

  * Средства Azure Logic Apps для необходимой версии Visual Studio:

    * [Visual Studio 2019](https://aka.ms/download-azure-logic-apps-tools-visual-studio-2019)

    * [Visual Studio 2017](https://aka.ms/download-azure-logic-apps-tools-visual-studio-2017)

    * [Visual Studio 2015](https://aka.ms/download-azure-logic-apps-tools-visual-studio-2015)
  
    Вы можете скачать и установить средства Azure Logic Apps напрямую из Visual Studio Marketplace или узнать, [как установить это расширение из Visual Studio](https://docs.microsoft.com/visualstudio/ide/finding-and-using-visual-studio-extensions). 
    После завершения установки перезагрузите Visual Studio.

  * [Azure functions Core Tools](https://www.npmjs.com/package/azure-functions-core-tools) для локальных функций отладки.

* Доступ к веб-приложениям при использовании внедренного конструктора приложений логики.

  Конструктору требуется подключение к Интернету, чтобы создать ресурсы в Azure и считать свойства и данные из соединителей в приложении логики. 
  Например, если вы используете соединитель Dynamics CRM Online, конструктор проверяет экземпляр CRM и получает информацию для отображения доступных свойств по умолчанию и пользовательских свойств.

## <a name="create-a-resource-group-project"></a>Создание проекта группы ресурсов

Чтобы начать работу, создайте для бессерверного приложения [проект группы ресурсов Azure](../azure-resource-manager/vs-azure-tools-resource-groups-deployment-projects-create-deploy.md). В Azure вы создаете ресурсы в *группе ресурсов*, которая является логической коллекцией, используемой для Организации и развертывания ресурсов для всего приложения в виде одного ресурса. Группа ресурсов для бессерверного приложения в Azure содержит ресурсы для Azure Logic Apps и службы "Функции Azure". Узнайте больше о [группах ресурсов Azure и ресурсах](../azure-resource-manager/resource-group-overview.md).

1. Запустите Visual Studio и выполните вход с помощью учетной записи Azure.

1. В меню **Файл** выберите **Создать** > **Проект**.

   ![Создание проекта в Visual Studio](./media/logic-apps-serverless-get-started-vs/create-new-project-visual-studio.png)

1. В разделе **Установленные** выберите **Visual C#** или **Visual Basic**. Затем выберите **облако** > **Группа ресурсов Azure**.

   > [!NOTE]
   > Если категория **облако** или проект **группы ресурсов Azure** не существуют, убедитесь, что вы установили пакет Azure SDK для Visual Studio.

   Если вы используете Visual Studio 2019, сделайте следующее:

   1. В поле **создать проект** выберите шаблон проекта **группы ресурсов Azure** для любого визуального элемента C# или Visual Basic, а затем нажмите кнопку **Далее**.

   1. Укажите имя и другие сведения о проекте, которые будут использоваться для группы ресурсов Azure. Когда все будет готово, выберите **Создать**.

1. Присвойте проекту имя и расположение, а затем нажмите кнопку **ОК**.

   Visual Studio предложит выбрать шаблон из списка шаблонов. 
   В этом примере используется шаблон быстрого запуска Azure, который позволяет создать бессерверное приложение, включающее приложение логики и вызов функции Azure.

   > [!TIP]
   > В сценариях, где вы не хотите развертывать решение в группе ресурсов Azure, можно использовать шаблон пустое **приложение логики** , который просто создает пустое приложение логики.

1. В списке **Показывать шаблоны из этого расположения** выберите Быстрый запуск **Azure (GitHub.com/Azure/Azure-QuickStart-Templates)** .

1. В поле поиска введите "Logic-App" в качестве фильтра. В результатах выберите шаблон **101-Logic-App-and-Function-App** .

   ![Выбор шаблона быстрого запуска Azure](./media/logic-apps-serverless-get-started-vs/select-template.png)

   Visual Studio создаст и откроет решение для проекта группы ресурсов. 
   Выбранный шаблон быстрого запуска Azure создает шаблон развертывания с именем azuredeploy. JSON в проекте группы ресурсов. Этот шаблон развертывания включает определение для простого приложения логики, которое активируется HTTP-запросом, вызывает функцию Azure и возвращает результат в виде HTTP-ответа.

   ![Новое бессерверное решение](./media/logic-apps-serverless-get-started-vs/create-serverless-solution.png)

1. Затем разверните свое решение в Azure. Это необходимо сделать, прежде чем можно будет открыть шаблон развертывания и проверить ресурсы для бессерверного приложения.

## <a name="deploy-your-solution"></a>Развертывание решения

Прежде чем можно будет открыть приложение логики в конструкторе приложений логики в Visual Studio, необходимо иметь группу ресурсов Azure, которая уже развернута в Azure. Это позволит конструктору создавать подключения к ресурсам и службам из приложения логики. Для выполнения этой задачи выполните следующие действия, чтобы развернуть решение из Visual Studio на портал Azure:

1. В обозреватель решений в контекстном меню проекта ресурса выберите **развернуть** > **создать**.

   ![Создание развертывания для группы ресурсов](./media/logic-apps-serverless-get-started-vs/deploy.png)

1. Выберите подписку Azure и группу ресурсов, в которых требуется выполнить развертывание, если они еще не выбраны. Затем выберите **развернуть**.

   ![Параметры развертывания](./media/logic-apps-serverless-get-started-vs/deploy-to-resource-group.png)

1. Если появится поле **изменить параметры** , укажите имена ресурсов, которые следует использовать для приложения логики и приложения функции Azure во время развертывания, а затем сохраните параметры. Используйте для приложения-функции глобально уникальное имя.

   ![Ввод имен для приложения логики и приложения-функции](./media/logic-apps-serverless-get-started-vs/logic-function-app-name-parameters.png)

   Когда Visual Studio запускает развертывание решения в указанной группе ресурсов, состояние этого развертывания отображается в **окне вывода** Visual Studio. 
   После завершения развертывания приложение логики активируется на портале Azure.

## <a name="edit-your-logic-app-in-visual-studio"></a>Изменение приложения логики в Visual Studio

Чтобы изменить приложение логики после развертывания, откройте приложение логики с помощью конструктора приложений логики в Visual Studio.

1. В обозреватель решений в контекстном меню файла azuredeploy. JSON выберите **Открыть в конструкторе приложений логики**.

   ![Открытие azuredeploy. JSON в конструкторе приложений логики](./media/logic-apps-serverless-get-started-vs/open-logic-app-designer.png)

   > [!TIP]
   > Если у вас нет этой команды в Visual Studio 2019, убедитесь, что установлены последние обновления для Visual Studio.

1. После появления поля **свойства приложения логики** в разделе **Подписка**выберите подписку Azure, если она еще не выбрана. В разделе **Группа ресурсов**выберите группу ресурсов и расположение, в котором развернуто решение, а затем нажмите кнопку **ОК**.

   ![Свойства приложения логики](./media/logic-apps-serverless-get-started-vs/logic-app-properties.png)

   В открывшемся окне конструктора приложений логики вы можете добавить новые действия или изменить рабочий процесс, а затем сохранить изменения.

   ![Открытое приложение логики в конструкторе приложений логики](./media/logic-apps-serverless-get-started-vs/opened-logic-app.png)

## <a name="create-your-azure-functions-project"></a>Создание проекта функций Azure

Чтобы создать проект функций и выполнить функции с помощью JavaScript, Python, F#PowerShell, пакетной службы или bash, выполните действия, описанные в разделе [Работа с Azure functions Core Tools](../azure-functions/functions-run-local.md). Чтобы разработать функцию Azure с помощью C# внутри решения, используйте библиотеку C# классов, выполнив действия, описанные в статье [Публикация библиотеки классов .NET в качестве приложение-функция](https://blogs.msdn.microsoft.com/appserviceteam/2017/03/16/publishing-a-net-class-library-as-a-function-app/).

## <a name="deploy-functions-from-visual-studio"></a>Развертывание функций из Visual Studio

Шаблон развертывания развертывает все функции Azure, которые имеются в решении, из репозитория Git, заданного переменными в файле azuredeploy. JSON. При создании и разработке проекта функций в решении можно вернуть проект в систему управления версиями Git (например, GitHub или Azure DevOps), а затем обновить переменную `repo`, чтобы шаблон развертывает функцию Azure.

## <a name="manage-logic-apps-and-view-run-history"></a>Управление приложениями логики и просмотр журнала выполнения

Для приложений логики, уже развернутых в Azure, можно изменять, просматривать журнал выполнения и отключать эти приложения из Visual Studio, а также управлять ими.

1. Откройте меню **Представление** в Visual Studio и выберите **Cloud Explorer**.

1. В разделе **все подписки**выберите подписку Azure, связанную с приложениями логики, которыми требуется управлять, а затем нажмите кнопку **Применить**.

1. В разделе **Приложения логики** выберите это приложение логики. В контекстном меню для приложения логики выберите **Open with Logic App Editor** (Открыть в редакторе приложений логики).

   > [!TIP]
   > Если у вас нет этой команды в Visual Studio 2019, убедитесь, что установлены последние обновления для Visual Studio.

Теперь опубликованное приложение логики можно скачать в проект группы ресурсов. Поэтому, хотя вы могли запускать приложение логики в портал Azure, вы по-прежнему можете импортировать это приложение в Visual Studio и управлять им. Дополнительные сведения см. в статье [Управление приложениями логики в Visual Studio](../logic-apps/manage-logic-apps-with-visual-studio.md).

## <a name="next-steps"></a>Дальнейшие действия

* [Управление приложениями логики в Visual Studio](manage-logic-apps-with-visual-studio.md)
