---
title: Доступ к виртуальным сетям Azure
description: Общие сведения о том, как среды службы Integration Services (Исес) помогают приложениям логики получать доступ к виртуальным сетям Azure (виртуальных сетей)
services: logic-apps
ms.suite: integration
ms.reviewer: jonfan, logicappspm
ms.topic: conceptual
ms.date: 07/05/2020
ms.openlocfilehash: 86d647a79b7babc2780cb0db904e689f3916673f
ms.sourcegitcommit: 206629373b7c2246e909297d69f4fe3728446af5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2020
ms.locfileid: "89500391"
---
# <a name="access-to-azure-virtual-network-resources-from-azure-logic-apps-by-using-integration-service-environments-ises"></a>Доступ к ресурсам виртуальных сетей Azure из Azure Logic Apps с использованием сред службы интеграции (ISE)

Иногда приложениям логики требуется доступ к защищенным ресурсам, таким как виртуальные машины (VM) и другие системы или службы, которые находятся в [виртуальной сети Azure](../virtual-network/virtual-networks-overview.md)или подключены к ней. Чтобы настроить этот доступ, можно [создать *среду службы интеграции* (ISE)](../logic-apps/connect-virtual-network-vnet-isolated-environment.md). Интегрированная среда сценариев — это экземпляр службы Logic Apps, использующий выделенные ресурсы и выполняемый отдельно от "глобальной" многоклиентской Logic Apps службы.

Например, в некоторых виртуальных сетях Azure используются частные конечные точки, которые можно настроить с помощью [частной ссылки Azure](../private-link/private-link-overview.md), чтобы предоставить доступ к службам Azure PaaS, таким как служба хранилища azure, Azure Cosmos DB или база данных SQL Azure, партнерские службы или службы клиентов, размещенные в Azure. Если приложениям логики требуется доступ к виртуальным сетям, использующим частные конечные точки, необходимо создать, развернуть и запустить эти приложения логики в интегрированной среде сценариев.

При создании среды службы интеграции Azure *внедряет* или развертывает эту среду в вашу виртуальную сеть Azure. Затем ее можно использовать в качестве расположения для приложений логики и учетных записей интеграции, которым требуется доступ.

![Выбор среды службы интеграции](./media/connect-virtual-network-vnet-isolated-environment-overview/select-logic-app-integration-service-environment.png)

В этом обзоре содержатся дополнительные сведения о том, [почему вы хотите использовать интегрированную среду сценариев](#benefits), [различия между выделенной и многоклиентской Logic Apps службой](#difference), а также способ прямого доступа к ресурсам, которые находятся в виртуальной сети Azure или подключены к ней.

<a name="benefits"></a>

## <a name="why-use-an-ise"></a>Зачем использовать интегрированную среду сценариев?

Запуск приложений логики в отдельном выделенном экземпляре помогает уменьшить влияние других арендаторов Azure на производительность вашего приложения, то есть устранить [эффект "шумных соседей"](https://en.wikipedia.org/wiki/Cloud_computing_issues#Performance_interference_and_noisy_neighbors). Кроме того, ISE обеспечивает следующие преимущества:

* Прямой доступ к ресурсам, которые находятся внутри виртуальной сети или подключены к ней;

  Приложения логики, создаваемые и выполняемые в интегрированной среде сценариев, могут использовать [специально разработанные соединители, которые работают в интегрированной среде разработки](../connectors/apis-list.md#ise-connectors). Если соединитель ISE существует для локальной системы или источника данных, вы можете подключиться напрямую, не используя [локальный шлюз данных](../logic-apps/logic-apps-gateway-connection.md). Дополнительные сведения см. в разделе [выделенные и многопользовательские клиенты](#difference) и [доступ к локальным системам](#on-premises) далее в этой статье.

* Доступ к ресурсам, которые находятся вне или не подключены к виртуальной сети

  Приложения логики, создаваемые и выполняемые в интегрированной среде сценариев, по-прежнему могут использовать соединители, которые выполняются в многоклиентской Logic Apps службе, если соединитель, относящийся к ISE, недоступен. Дополнительные сведения см. в разделе [выделенные и множественные клиенты](#difference).

* Собственные статические IP-адреса, которые отделены от статических IP-адресов, совместно используемых приложениями логики в мультитенантной службе. Для связи с целевыми системами можно также настроить один общедоступный статический исходящий IP-адрес с возможностью прогнозирования. Таким образом, вам не придется настраивать дополнительные пути брандмауэра в целевых системах для каждой ISE.

* Увеличены ограничения продолжительности выполнения, хранения, пропускной способности, времени ожидания HTTP-запросов и ответов, размеров сообщений и запросов пользовательских соединителей. Дополнительные сведения см. в статье [Ограничения и сведения о конфигурации для Azure Logic Apps](logic-apps-limits-and-config.md).

<a name="difference"></a>

## <a name="dedicated-versus-multi-tenant"></a>Выделенные и множественные клиенты

При создании и запуске приложений логики в интегрированной среде сценариев вы получаете те же интерфейсы пользователя и аналогичные возможности, что и многоклиентская служба Logic Apps. Вы можете использовать все те же встроенные триггеры, действия и управляемые соединители, доступные в многоклиентской Logic Apps службе. Некоторые управляемые соединители предлагают дополнительные версии ISE. Разница между соединителями ISE и соединителями, отличными от ISE, существует в том месте, где они выполняются, а метки, которые они имели в конструкторе приложений логики, при работе в интегрированной среде сценариев.

![Соединители с метками и без них в интегрированной среде сценариев](./media/connect-virtual-network-vnet-isolated-environment-overview/labeled-trigger-actions-integration-service-environment.png)

* Встроенные триггеры и действия, такие как HTTP, отображают **основную** метку и выполняются в той же интегрированной среде сценариев, что и приложение логики.

* Управляемые соединители, отображающие метку **ISE** , специально предназначены для исес и *всегда выполняются в той же интегрированной среде разработки, что и приложение логики*. Например, вот несколько [соединителей, предлагающих версии ISE](../connectors/apis-list.md#ise-connectors):<p>

  * Хранилище BLOB-объектов, хранилище файлов и хранилище таблиц Azure
  * Служебная шина Azure, очереди Azure, концентраторы событий Azure
  * Служба автоматизации Azure, Azure Key Vault, служба "Сетка событий Azure" и журналы Azure Monitor
  * FTP, SFTP — SSH, файловая система и SMTP
  * SAP, IBM MQ, IBM DB2 и IBM 3270
  * SQL Server, Azure синапсе Analytics Azure Cosmos DB
  * AS2, X12 и EDIFACT

  С редкими исключениями, если соединитель ISE доступен для локальной системы или источника данных, вы можете подключиться напрямую, не используя [локальный шлюз данных](../logic-apps/logic-apps-gateway-connection.md). Дополнительные сведения см. в подразделе [доступ к локальным системам](#on-premises) далее в этой статье.

* Управляемые соединители, которые не отображают метку **ISE** , продолжают работать для приложений логики в интегрированной среде сценариев. Эти соединители *всегда выполняются в многоклиентской Logic Apps службе*, а не в интегрированной среде сценариев.

* Пользовательские соединители, создаваемые *вне интегрированной среды сценариев*, независимо от того, требуется ли им [локальный шлюз данных](../logic-apps/logic-apps-gateway-connection.md), продолжают работать для приложений логики в интегрированной среде сценариев. Однако пользовательские соединители, создаваемые *внутри интегрированной среды сценариев* , не будут работать с локальным шлюзом данных. Дополнительные сведения см. в статье [доступ к локальным системам](#on-premises).

<a name="on-premises"></a>

## <a name="access-to-on-premises-systems"></a>Доступ к локальным системам

Приложения логики, которые выполняются внутри интегрированной среды сценариев, могут напрямую обращаться к локальным системам и источникам данных, которые находятся в виртуальной сети Azure или подключены к ней с помощью следующих элементов:<p>

* Триггер или действие HTTP, отображающее **основную** метку.

* Соединитель **ISE** , если он доступен для локальной системы или источника данных

  Если соединитель ISE доступен, можно получить прямой доступ к системе или источнику данных без [локального шлюза данных](../logic-apps/logic-apps-gateway-connection.md). Тем не менее, если необходимо получить доступ к SQL Server из интегрированной среды сценариев и использовать проверку подлинности Windows, необходимо использовать неинтегрированную версию и локальный шлюз данных соединителя. ИНТЕГРИРОВАНная версия соединителя не поддерживает проверку подлинности Windows. Дополнительные сведения см. в статьях [соединители ISE](../connectors/apis-list.md#ise-connectors) и [подключение из среды службы интеграции](../connectors/apis-list.md#integration-service-environment).

* настраиваемый соединитель;

  * Пользовательские соединители, создаваемые *вне интегрированной среды сценариев*, независимо от того, требуется ли им [локальный шлюз данных](../logic-apps/logic-apps-gateway-connection.md), продолжают работать для приложений логики в интегрированной среде сценариев.

  * Пользовательские соединители, создаваемые *внутри интегрированной среды сценариев* , не работают с локальным шлюзом данных. Однако эти соединители могут напрямую обращаться к локальным системам и источникам данных, которые находятся внутри или подключены к виртуальной сети, в которой размещена интегрированная среда сценариев. Поэтому приложения логики, которые находятся внутри интегрированной среды сценариев, обычно не требуют шлюза данных при доступе к этим ресурсам.

Для доступа к локальным системам и источникам данных, у которых нет соединителей ISE, они находятся за пределами виртуальной сети или не подключены к виртуальной сети, вам по-прежнему необходимо использовать локальный шлюз данных. Приложения логики в интегрированной среде сценариев могут продолжать использовать соединители без метки **ядра** или **интегрированной среды сценариев** . Эти соединители просто выполняются в многоклиентской Logic Apps службе, а не в интегрированной среде сценариев. 

<a name="ise-level"></a>

## <a name="ise-skus"></a>Номера SKU интегрированной среды сценариев

При создании ИНТЕГРИРОВАНной среды разработки можно выбрать SKU для разработчиков или SKU Premium. Ниже приведены различия между этими номерами SKU.

* **Разработчик**

  Предоставляет интегрированную среду с более низкими затратами, которую можно использовать для экспериментов, разработки и тестирования, но не для тестирования в рабочей среде или тестировании производительности. SKU для разработчиков включают встроенные триггеры и действия, стандартные соединители, соединители предприятия и учетную запись интеграции с одним [свободным уровнем](../logic-apps/logic-apps-limits-and-config.md#artifact-number-limits) для фиксированной ежемесячной цены. Однако этот номер SKU не включает соглашения об уровне обслуживания (SLA), параметры масштабирования емкости или избыточность во время повторного запуска. Это означает, что могут возникнуть задержки или простои.

* **Премиальный**

  Предоставляет интегрированную среду сценариев, которую можно использовать для рабочей среды и включает поддержку соглашения об уровне обслуживания, встроенные триггеры и действия, стандартные соединители, соединители предприятия, единую учетную запись интеграции [уровня Standard](../logic-apps/logic-apps-limits-and-config.md#artifact-number-limits) , варианты масштабирования емкости и избыточность при повторном использовании по фиксированной месячной цене.

> [!IMPORTANT]
> Параметр SKU доступен только при создании ИНТЕГРИРОВАНной среды разработки и не может быть изменен позже.

Сведения о тарифах см. на странице [цен на Logic Apps](https://azure.microsoft.com/pricing/details/logic-apps/). Сведения о ценах и выставлении счетов для сред ISE см. в статье [Модель ценообразования для Azure Logic Apps](../logic-apps/logic-apps-pricing.md#fixed-pricing).

<a name="endpoint-access"></a>

## <a name="ise-endpoint-access"></a>Доступ к конечной точке интегрированной среды сценариев

При создании интегрированной среды сценариев можно выбрать использование внутренних или внешних конечных точек доступа. Выбор определяет, могут ли триггеры запроса или веб-перехватчика в интегрированной среде сценариев получать вызовы извне вашей виртуальной сети. Эти конечные точки также влияют на способ доступа к входным и выходным данным из журнала выполнения приложений логики.

> [!IMPORTANT]
> Вы можете выбрать конечную точку доступа только во время создания ИНТЕГРИРОВАНной среды разработки и изменить этот параметр позже.

* **Внутренняя**: частные конечные точки разрешается вызывать приложения логики в интегрированной среде сценариев, где можно просматривать входные и выходные данные из приложений логики и получать к ним доступ *только из виртуальной сети*.

  > [!IMPORTANT]
  > Убедитесь в наличии сетевого подключения между частными конечными точками и компьютером, с которого требуется получить доступ к журналу выполнения. В противном случае при попытке просмотра журнала выполнения приложения логики появляется сообщение об ошибке "непредвиденная ошибка". Не удалось получить ".
  >
  > ![Ошибка действия службы хранилища Azure в результате невозможности отправить трафик через брандмауэр](./media/connect-virtual-network-vnet-isolated-environment-overview/integration-service-environment-error.png)
  >
  > Например, клиентский компьютер может находиться в виртуальной сети ISE или в виртуальной сети, подключенной к виртуальной сети ISE через пиринг или виртуальную частную сеть. 

* **Внешние**: общедоступные конечные точки позволяют вызывать приложения логики в интегрированной среде сценариев, где можно просматривать входные и выходные данные из приложений логики, а также получать доступ к ним из *виртуальной сети*. Если вы используете группы безопасности сети (группы безопасности сети), убедитесь, что они настроены с помощью правил входящего трафика, чтобы разрешить доступ к входным и выходным данным журнала выполнения. Дополнительные сведения см. в разделе [Включение доступа для интегрированной среды сценариев](../logic-apps/connect-virtual-network-vnet-isolated-environment.md#enable-access).

Чтобы определить, используется ли в интегрированной среде сценариев внутренняя или внешняя конечная точка доступа, в меню интегрированной среды сценариев в разделе **Параметры**выберите **свойства**и найдите свойство **Конечная точка доступа** .

![Поиск конечной точки доступа ISE](./media/connect-virtual-network-vnet-isolated-environment-overview/find-ise-access-endpoint.png)

<a name="pricing-model"></a>

## <a name="pricing-model"></a>Модель ценообразования

Приложения логики, встроенные триггеры, встроенные действия и соединители, работающие в интегрированной среде сценариев, используют фиксированный тарифный план, отличающийся от плана ценообразования на основе потребления. Дополнительные сведения см. в разделе [модель ценообразования Logic Apps](../logic-apps/logic-apps-pricing.md#fixed-pricing). Сведения о тарифах см. на странице [цен на Logic Apps](https://azure.microsoft.com/pricing/details/logic-apps/).

<a name="create-integration-account-environment"></a>

## <a name="integration-accounts-with-ise"></a>Учетные записи интеграции в ISE

Учетные записи интеграции с приложениями логики можно использовать в среде службы интеграции. Тем не менее эти учетные записи интеграции должны использовать *ту же ISE*, что и связанные приложения логики. Приложения логики в среде ISE могут ссылаться только на те учетные записи интеграции, которые находятся в одной с ними среде ISE. При создании учетной записи интеграции можно выбрать среду ISE в качестве расположения учетной записи интеграции. Чтобы узнать, как цены и данные о выставлении счетов для учетных записей интеграции с интегрированной средой ISE, см. [Logic Appsную модель ценообразования](../logic-apps/logic-apps-pricing.md#fixed-pricing). Сведения о тарифах см. на странице [цен на Logic Apps](https://azure.microsoft.com/pricing/details/logic-apps/). Сведения об ограничениях см. в разделе [ограничения учетной записи интеграции](../logic-apps/logic-apps-limits-and-config.md#integration-account-limits).

## <a name="next-steps"></a>Дальнейшие действия

* [Подключение к виртуальным сетям Azure из Azure Logic Apps](../logic-apps/connect-virtual-network-vnet-isolated-environment.md)
* Узнайте больше о [виртуальной сети Azure](../virtual-network/virtual-networks-overview.md).
* Узнайте об [интеграции виртуальной сети для служб Azure](../virtual-network/virtual-network-for-azure-services.md).
