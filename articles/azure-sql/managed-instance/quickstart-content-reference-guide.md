---
title: Ссылки на материалы по началу работы
titleSuffix: Azure SQL Managed Instance
description: 'Подборка ссылок на материалы, которые помогут вам начать работу с Управляемым экземпляром SQL Azure. '
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: sqldbrb=1
ms.devlang: ''
ms.topic: quickstart
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 07/11/2019
ms.openlocfilehash: 5ed88514650b9931a52e5f155abc34fbf734a3b7
ms.sourcegitcommit: 69156ae3c1e22cc570dda7f7234145c8226cc162
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2020
ms.locfileid: "84310773"
---
# <a name="getting-started-with-azure-sql-managed-instance"></a>Начало работы с управляемым экземпляром SQL Azure
[!INCLUDE[appliesto-sqlmi](../includes/appliesto-sqlmi.md)]

[Управляемый экземпляр SQL Azure](sql-managed-instance-paas-overview.md) создает базу данных, практически полностью совместимую с последним ядром СУБД SQL Server (Enterprise Edition). Она предоставляет собственную реализацию [виртуальной сети](../../virtual-network/virtual-networks-overview.md), в которой устранены распространенные проблемы безопасности, и [бизнес-модель](https://azure.microsoft.com/pricing/details/sql-database/), подходящую для существующих клиентов SQL Server.

Эта статья содержит ссылки на материалы, с помощью которых вы сможете быстро создать и настроить Управляемый экземпляр SQL и перенести базы данных.

## <a name="quickstart-overview"></a>Общие сведения о кратком руководстве

Следующие краткие руководства помогут вам быстро создать Управляемый экземпляр SQL, настроить виртуальную машину или VPN-подключение "точка — сеть" для клиентского приложения и восстановить базу данных в новом Управляемом экземпляре SQL с помощью файла `.bak`.

### <a name="configure-environment"></a>Настройка среды

Для начала необходимо создать первый Управляемый экземпляр SQL с сетевой средой, в которой он будет размещен, и разрешить подключение с компьютера или виртуальной машины, на которых будут выполняться запросы к Управляемому экземпляру SQL. Вы можете использовать сведения из приведенных ниже руководств.

- [Создание Управляемого экземпляра SQL на портале Azure](instance-create-quickstart.md). На портале Azure вы настраиваете необходимые параметры (имя пользователя, пароль, число ядер и максимальный объем хранилища) и автоматически создаете сетевую среду Azure. Для этого вам не нужно иметь опыт работы с сетями или знать о требованиях к инфраструктуре. Вам нужен только [тип подписки](resource-limits.md#supported-subscription-types), в данный момент позволяющий создать Управляемый экземпляр SQL. О том, как настроить сеть или использовать собственную сеть, читайте в разделе о [настройке имеющейся виртуальной сети для Управляемого экземпляра SQL Azure](vnet-existing-add-subnet.md) или [создании виртуальной сети для Управляемого экземпляра SQL Azure](virtual-network-subnet-create-arm-template.md).
- Управляемый экземпляр SQL создается в собственной виртуальной сети без общедоступной конечной точки. Для доступа клиентских приложений вы можете **создать виртуальную машину в той же виртуальной сети (в другой подсети)** или **VPN-подключение типа "точка — сеть" к виртуальной сети для клиентского компьютера** с помощью одного из этих кратких руководств.
  - Включите [общедоступную конечную точку](public-endpoint-configure.md) в Управляемом экземпляре SQL, чтобы получить доступ к данным непосредственно из своей среды.
  - Создайте [виртуальную машину Azure в виртуальной сети Управляемого экземпляра SQL](connect-vm-instance-configure.md), чтобы обеспечить возможность подключения клиентского приложения, включая SQL Server Management Studio.
  - Настройте [VPN-подключение "точка — сеть" к Управляемому экземпляру SQL](point-to-site-p2s-configure.md) для клиентского компьютера, на котором установлено ПО SQL Server Management Studio и другие подключаемые клиентские приложения. Это другой из двух вариантов подключения к Управляемому экземпляру SQL и его виртуальной сети.

  > [!NOTE]
  > - Вы также можете использовать ExpressRoute или подключение типа "сеть — сеть" из локальной сети, но эти подходы не описаны в этих кратких руководствах.
  > - Если для срока хранения вместо 0 (неограниченный срок хранения) указать любое другое значение, то сохранение будет применяться только к журналам, записанным после изменения этого значения. Журналы, записанные в течение периода, когда был установлен неограниченный срок хранения, сохранятся даже после включения функции сохранения.

Управляемый экземпляр SQL не обязательно создавать вручную. Можно использовать [PowerShell](scripts/create-configure-managed-instance-powershell.md), [PowerShell с шаблоном Resource Manager](scripts/create-powershell-azure-resource-manager-template.md) или [Azure CLI](https://docs.microsoft.com/cli/azure/sql/mi#az-sql-mi-create), чтобы автоматизировать этот процесс с помощью сценария.

### <a name="migrate-your-databases"></a>Миграция баз данных

Когда Управляемый экземпляр SQL создан и доступ к нему настроен, можно начать перенос баз данных SQL Server. Выполнить перенос не получится, если у перемещаемой базы данных есть неподдерживаемые функции. Чтобы избежать сбоев и проверить совместимость, можно воспользоваться [Помощником по миграции данных](https://www.microsoft.com/download/details.aspx?id=53595), который проанализирует базы данных на сервере SQL Server и обнаружит проблемы, мешающие миграции на Управляемый экземпляр SQL, например наличие [файлового потока](https://docs.microsoft.com/sql/relational-databases/blob/filestream-sql-server) или нескольких файлов журнала. Если решить эти проблемы, базы данных будут готовы к переносу в Управляемый экземпляр SQL. [Database Experimentation Assistant](/sql/dea/database-experimentation-assistant-overview) — еще один полезный инструмент, который может записывать рабочую нагрузку SQL Server и воспроизводить ее в Управляемом экземпляре SQL. Благодаря этому вы сможете определить, не возникнет ли проблем с производительностью при миграции на Управляемый экземпляр SQL.

Убедившись в возможности переноса базы данных в Управляемый экземпляр SQL, вы можете использовать встроенные возможности восстановления SQL Server, чтобы восстановить базу данных в Управляемом экземпляре SQL из файла `.bak`. Этот метод позволяет переносить базы данных из ядра СУБД SQL Server, установленного локально или на виртуальных машинах Azure. См. краткое руководство в статье о [восстановлении базы данных в Управляемом экземпляре SQL из резервной копии](restore-sample-database-quickstart.md). В этом кратком руководстве описано, как восстановить базу данных из файла `.bak`, хранящегося в хранилище BLOB-объектов Azure, с помощью команды Transact-SQL `RESTORE`.

> [!TIP]
> Сведения о том, как создать резервную копию базы данных в хранилище BLOB-объектов Azure с помощью команды Transact-SQL `BACKUP`, см. в статье [Резервное копирование в SQL Server по URL-адресу](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url).

Эти краткие руководства помогут вам быстро создать, настроить и восстановить базу данных из резервной копии в Управляемом экземпляре SQL. В некоторых сценариях нужно будет настроить или автоматизировать развертывание Управляемого экземпляра SQL и необходимой сетевой среды. Эти сценарии описаны ниже.

## <a name="customize-network-environment"></a>Настройка сетевой среды

Виртуальную сеть и подсеть можно настроить автоматически при создании экземпляра на [портале Azure](instance-create-quickstart.md), но иногда удобнее создать их до начала создания экземпляров в Управляемом экземпляре SQL, чтобы задать требуемые параметры виртуальной сети и подсети. Для создания и настройки сетевой среды проще всего использовать шаблон [развертывания ресурса Azure](virtual-network-subnet-create-arm-template.md), который создаст и настроит сеть и подсеть для размещаемого экземпляра. Для этого просто нужно нажать кнопку развертывания Azure Resource Manager и заполнить форму параметрами.

В качестве альтернативы можно также использовать этот [скрипт PowerShell](https://www.powershellmagazine.com/2018/07/23/configuring-azure-environment-to-set-up-azure-sql-database-managed-instance-preview/) для автоматизации создания сети.

Если у вас уже есть виртуальная сеть и подсеть, в которой вы собираетесь развернуть Управляемый экземпляр SQL, нужно убедиться, что они соответствуют [требованиям к сети](connectivity-architecture-overview.md#network-requirements). Чтобы убедиться, что подсеть настроена должным образом, воспользуйтесь этим [скриптом PowerShell](vnet-existing-add-subnet.md). Скрипт проверяет сеть, уведомляет о проблемах и необходимых изменениях и предлагает внести требуемые изменения в виртуальную сеть или подсеть. Выполните этот скрипт, если не хотите вручную настраивать виртуальную сеть или подсеть. Его также можно выполнять после масштабной перенастройки сетевой инфраструктуры. Если вы хотите создать и настроить собственную сеть, ознакомьтесь со статьей об [архитектуре подключения](connectivity-architecture-overview.md) и [руководством по созданию и настройке среды Управляемого экземпляра SQL](https://medium.com/azure-sqldb-managed-instance/the-ultimate-guide-for-creating-and-configuring-azure-sql-managed-instance-environment-91ff58c0be01).

## <a name="migrate-to-a-sql-managed-instance"></a>Миграция в Управляемый экземпляр SQL

Приведенные выше краткие руководства позволяют быстро настроить Управляемый экземпляр SQL и переместить базы данных с помощью встроенной функции `RESTORE`. Это хорошая отправная точка, если вы хотите быстро подтвердить концепции и убедиться, что ваше решение может работать в Управляемом экземпляре.

Но для переноса производственной базы данных или даже баз данных разработки и тестирования, которые вы хотите использовать для тестирования производительности, вам потребуется воспользоваться дополнительными техниками, например такими:

- Тестирование производительности — вам необходимо замерить базовые показатели производительности на исходном экземпляре SQL Server и сравнить их с показателями производительности целевого Управляемого экземпляра SQL, в который перенесена база данных. Подробные сведения см. в статье с [рекомендациями по сравнению показателей производительности](https://techcommunity.microsoft.com/t5/Azure-SQL-Database/The-best-practices-for-performance-comparison-between-Azure-SQL/ba-p/683210).
- Миграция по сети — при использовании встроенной функции `RESTORE`, которая описана в этой статье, вам придется подождать восстановления баз данных (и их копирования в хранилище BLOB-объектов Azure, если их там нет). Это приведет к некоторому простою приложения, особенно в случае больших баз данных. Для переноса рабочей базы данных используйте [Azure Database Migration Service (DMS)](https://docs.microsoft.com/azure/dms/tutorial-sql-server-to-managed-instance?toc=/azure/sql-database/toc.json), чтобы минимизировать время ее простоя. DMS постепенно отправляет изменения исходной базы данных в базу данных, которая восстанавливается в Управляемом экземпляре SQL. Это позволяет быстро переключить приложение с исходной базы данных на целевую и свести к минимуму время простоя.

Подробные сведения см. в статье [SQL Server instance migration to Azure SQL Database managed instance](migrate-to-instance-from-sql-server.md) (Перенос экземпляра SQL Server в управляемый экземпляр Базы данных SQL Azure).

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь с [общим списком функций, поддерживаемых Управляемым экземпляром SQL](../database/features-comparison.md), а также с [дополнительными сведениями и известными проблемами](transact-sql-tsql-differences-sql-server.md).
- Изучите [технические характеристики Управляемого экземпляра SQL](resource-limits.md#service-tier-characteristics).
- Прочитайте более подробные инструкции в [разделе об использовании Управляемого экземпляра SQL](how-to-content-reference-guide.md).
- [Определите, какой SKU Управляемого экземпляра SQL Azure подойдет вашей локальной базе данных](/sql/dma/dma-sku-recommend-sql-db/).
