---
title: Основные и критически важные для бизнеса уровни обслуживания
titleSuffix: Azure SQL Database & SQL Managed Instance
description: В этой статье обсуждаются уровни обслуживания общего назначения и критический для бизнеса уровня службы в модели приобретения на основе виртуальное ядро, используемой базой данных SQL Azure и Управляемый экземпляр Azure SQL.
services: sql-database
ms.service: sql-db-mi
ms.subservice: features
ms.custom: sqldbrb=2
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake
ms.date: 12/14/2020
ms.openlocfilehash: 9ee7440b10bc348d3ba87a4779208791a7b0e9ac
ms.sourcegitcommit: 63d0621404375d4ac64055f1df4177dfad3d6de6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/15/2020
ms.locfileid: "97512034"
---
# <a name="azure-sql-database-and-azure-sql-managed-instance-service-tiers"></a>Уровни служб базы данных SQL Azure и Azure SQL Управляемый экземпляр
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

База данных SQL Azure и Управляемый экземпляр Azure SQL основаны SQL Server архитектуре ядра СУБД, которая настроена для облачной среды для обеспечения доступности 99,99% даже в случае сбоя инфраструктуры. База данных SQL Azure и Azure SQL Управляемый экземпляр используют два уровня служб, каждая из которых имеет другую архитектурную модель. Ниже указаны эти уровни служб.

- [Общее назначение](service-tier-general-purpose.md), предназначенное для бюджетных рабочих нагрузок.
- [Критически важный для бизнеса](service-tier-business-critical.md), предназначенный для рабочих нагрузок с низкой задержкой и высокой устойчивостью к сбоям и быстрой отработке отказа.

База данных SQL Azure имеет дополнительный уровень служб: 

- [Масштабирование](service-tier-hyperscale.md), предназначенное для большинства рабочих нагрузок, обеспечивает высокую масштабируемость хранения, масштабируемость чтения и быстрое восстановление базы данных.

В этой статье рассматриваются различия между уровнями служб, хранилищем и резервным копированием для уровней обслуживания "общий" и "критически важный для бизнеса" в модели приобретения на основе виртуальное ядро.

## <a name="service-tier-comparison"></a>Сравнение уровней служб

В следующей таблице описаны основные различия между уровнями служб для последнего поколения (го поколения). Обратите внимание, что характеристики уровня служб могут отличаться в базе данных SQL и SQL Управляемый экземпляр.

|-| Тип ресурса | Общее назначение |  Уровень "Гипермасштабирование" | Критически важный для бизнеса |
|:---:|:---:|:---:|:---:|:---:|
| **Сценарии применения** | |  Предлагает бюджетные сбалансированные варианты вычислительных ресурсов и ресурсов хранилища. | Большинства рабочих нагрузок. Автомасштабирование размера хранилища до 100 ТБ, жидкие вертикальное и горизонтальное масштабирование вычислений, быстрое восстановление базы данных. | Приложения OLTP с высокой частотой транзакций и низкой задержкой операций ввода-вывода. Обеспечивает наивысшую устойчивость к сбоям и быструю отработку отказа, используя несколько синхронно обновленных реплик.|
|  **Доступно в типе ресурса:** ||База данных SQL или SQL Управляемый экземпляр | Отдельная база данных SQL Azure | База данных SQL или SQL Управляемый экземпляр |
| **Объем вычислительных ресурсов**| База данных SQL | От 1 до 80 виртуальных ядер | от 1 до 80 виртуальных ядер | От 1 до 80 виртуальных ядер |
| | Управляемый экземпляр SQL | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер | Недоступно | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер |
| | Пулы Управляемый экземпляр SQL | 2, 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер | Недоступно | Недоступно |
| **Тип хранилища** | Все | Удаленное хранилище класса Premium (для каждого экземпляра) | Не связанное хранилище с локальным кэшем SSD (для каждого экземпляра) | Сверхбыстрое локальное хранилище SSD (для каждого экземпляра) |
| **Размер базы данных** | База данных SQL | От 5 ГБ до 4 ТБ | До 100 ТБ | От 5 ГБ до 4 ТБ |
| | Управляемый экземпляр SQL  | От 32 ГБ до 8 ТБ | Недоступно | От 32 ГБ до 4 ТБ |
| **Объем памяти** | База данных SQL | От 5 ГБ до 4 ТБ | До 100 ТБ | От 5 ГБ до 4 ТБ |
| | Управляемый экземпляр SQL  | От 32 ГБ до 8 ТБ | Недоступно | От 32 ГБ до 4 ТБ |
| **Размер базы данных TempDB** | База данных SQL | [32 ГБ на виртуальное ядро](resource-limits-vcore-single-databases.md#general-purpose---provisioned-compute---gen4) | [32 ГБ на виртуальное ядро](resource-limits-vcore-single-databases.md#hyperscale---provisioned-compute---gen5) | [32 ГБ на виртуальное ядро](resource-limits-vcore-single-databases.md#business-critical---provisioned-compute---gen4) |
| | Управляемый экземпляр SQL  | [24 ГБ на виртуальное ядро](../managed-instance/resource-limits.md#service-tier-characteristics) | Недоступно | До 4 ТБ — [ограничено размером хранилища](../managed-instance/resource-limits.md#service-tier-characteristics) |
| **Пропускная способность записи в журнал** | База данных SQL | [1,875 МБ/с на виртуальное ядро (Макс. 30 МБ/с)](resource-limits-vcore-single-databases.md#general-purpose---provisioned-compute---gen4) | 100 МБ/с | [6 МБ/с на виртуальное ядро (Макс. 96 МБ/с)](resource-limits-vcore-single-databases.md#business-critical---provisioned-compute---gen4) |
| | Управляемый экземпляр SQL | [3 МБ/с на виртуальное ядро (максимум 22 Мб/с)](../managed-instance/resource-limits.md#service-tier-characteristics) | Недоступно | [4 МБ/с на виртуальное ядро (Макс. 48 МБ/с)](../managed-instance/resource-limits.md#service-tier-characteristics) |
|**Доступность**|Все| 99,99 % |  [99,95% с одной вторичной репликой, 99,99% с дополнительными репликами](service-tier-hyperscale-frequently-asked-questions-faq.md#what-slas-are-provided-for-a-hyperscale-database) | 99,99 % <br/> [99,995% с избыточной зоной, отдельной базой данных](https://azure.microsoft.com/blog/understanding-and-leveraging-azure-sql-database-sla/) |
|**Резервные копии**|Все|RA-GRS, 7-35 дней (по умолчанию 7 дней). Максимальный срок хранения для уровня "базовый" составляет 7 дней. | RA-GRS, 7 дней, постоянное восстановление на момент времени (PITR) | Геоизбыточное хранилище с доступом на чтение, 7–35 дней (7 дней по умолчанию) |
|**Выполняющаяся в памяти OLTP** | | Недоступно | Недоступно | Доступно |
|**Реплики только для чтения**| | 0 встроенная <br> 0-4. Использование [георепликации](active-geo-replication-overview.md) | 0-4 встроенные | 1 встроенный, включается в цену <br> 0-4. Использование [георепликации](active-geo-replication-overview.md) |
|**Цены и выставление счетов** | База данных SQL | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена. | [Виртуальное ядро для каждой реплики и используемого хранилища](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>Число операций ввода-вывода еще не оплачено. | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена. |
|| Управляемый экземпляр SQL | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/managed/) начислены. <br/>Не оплачено операций ввода-вывода| Недоступно | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/managed/) начислены. <br/>В операциях ввода-вывода не начислена.| 
|**Модели скидок**| | [Зарезервированные экземпляры](reserved-capacity-overview.md)<br/>[Преимущество гибридного использования Azure](../azure-hybrid-benefit.md) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования| [Преимущество гибридного использования Azure](../azure-hybrid-benefit.md) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования| [Зарезервированные экземпляры](reserved-capacity-overview.md)<br/>[Преимущество гибридного использования Azure](../azure-hybrid-benefit.md) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования|

Дополнительные сведения см. в разделе подробные различия между уровнями служб в [базе данных SQL Azure (Виртуальное ядро)](resource-limits-vcore-single-databases.md), [одной базой данных SQL Azure (DTU)](resource-limits-dtu-single-databases.md), [базой данных SQL Azure в составе пула (dtu)](resource-limits-dtu-single-databases.md)и страницами [управляемый экземпляр Azure SQL](../managed-instance/resource-limits.md) .

> [!NOTE]
> Дополнительные сведения о уровне службы "виртуальное ядро" в модели приобретения на основе служб см. в статье [масштабирование уровня службы](service-tier-hyperscale.md). Сравнение модели приобретения на основе виртуальное ядро с моделью приобретения на основе DTU см. в разделе [приобретение моделей и ресурсов](purchasing-models.md).

## <a name="data-and-log-storage"></a>Хранилище данных и журналов

На объем хранилища, используемый для файлов данных и журналов, влияют следующие факторы, которые применяются к общего назначения и критически важный для бизнеса. Дополнительные сведения о хранении данных и журналов в процессе масштабирования см. в статье о [уровне служб](service-tier-hyperscale.md)в процессе масштабирования.

- Выделенное хранилище используется файлами данных (MDF) и файлами журналов (LDF).
- Каждый размер вычислений отдельной базы данных поддерживает максимальный размер базы данных с максимальным размером по умолчанию 32 ГБ.
- При настройке требуемого размера отдельной базы данных (размера MDF-файла) для поддержки файлов LDF автоматически добавляется 30-процентное дополнительное хранилище.
- Можно выбрать любой размер базы данных в диапазоне от 10 ГБ до поддерживаемого максимума.
  - Для хранилища на уровне служб Standard или общего назначения увеличьте или уменьшите размер с шагом в 10 ГБ.
  - Для хранилища на уровне обслуживания "Премиум" или "критически важный для бизнеса" увеличьте или уменьшите размер с шагом в 250 ГБ.
- На уровне служб общего назначения `tempdb` использует подключенный SSD, а стоимость хранения включается в цену Виртуальное ядро.
- На уровне службы "критически важный для бизнеса `tempdb` " использует подключенный SSD с файлами MDF и LDF, а `tempdb` стоимость хранилища включается в цену Виртуальное ядро.
- Размер хранилища для Управляемый экземпляр SQL должен быть задан кратным 32 ГБ.


> [!IMPORTANT]
> За общий объем хранилища, выделенный для файлов MDF и LDF, выставляются счета.

Чтобы отслеживать текущий общий размер файлов MDF и LDF, используйте [sp_spaceused](/sql/relational-databases/system-stored-procedures/sp-spaceused-transact-sql). Чтобы отслеживать текущий размер отдельных файлов MDF и LDF, используйте [sys.database_files](/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Дополнительные сведения см. [в статье Управление дисковым пространством в базе данных SQL Azure](file-space-manage.md).

## <a name="backups-and-storage"></a>Резервные копии и хранилище

Хранилище для резервных копий базы данных выделяется для поддержки возможности восстановления на момент времени (PITR) и [долгосрочного хранения (LTR)](long-term-retention-overview.md) базы данных SQL и SQL управляемый экземпляр. Это хранилище выделяется отдельно для каждой базы данных. За эти возможности выставляются два отдельных счета.

- **PITR**. резервные копии отдельных баз данных копируются в [хранилище геоизбыточного хранилища с доступом на чтение (RA-GRS)](../../storage/common/geo-redundant-design.md) автоматически. Размер хранилища динамически увеличивается по мере создания новых резервных копий. Хранилище используется для еженедельных полных резервных копий, ежедневных разностных резервных копий и резервных копий журналов транзакций, которые копируются каждые 5 минут. Потребление хранилища зависит от скорости изменения базы данных и срока хранения резервных копий. Вы можете настроить отдельный период хранения для каждой базы данных длительностью от 7 до 35 дней. Минимальный объем хранилища, равный 100% (1x) размера базы данных, предоставляется без дополнительной платы. Для большинства баз данных этого объема достаточно для хранения резервных копий за 7 дней.
- **LTR**: Вы также можете настроить долгосрочное хранение полных резервных копий до 10 лет (Эта функция [ограничена общедоступной предварительной версией для SQL управляемый экземпляр](long-term-retention-overview.md#sql-managed-instance-support). Если настроить политику LTR, эти резервные копии будут храниться в хранилище RA-GRS автоматически, но вы можете управлять частотой копирования резервных копий. Для удовлетворения различных требований соответствия можно выбрать разные периоды хранения для еженедельных, ежемесячных и (или) ежегодных резервных копий. Выбранная конфигурация определяет, какой объем хранилища будет использоваться для резервных копий на LTR. Чтобы оценить стоимость хранения на LTR, можно использовать калькулятор цен на LTR. Дополнительные сведения см. в статье [долгосрочное хранение базы данных SQL](long-term-retention-overview.md).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о конкретных размерах вычислений и хранилища, доступных в основных уровнях обслуживания и критических для бизнеса, см. в следующих статьях: 

- [ограничения ресурсов на основе виртуальное ядро для базы данных SQL Azure](resource-limits-vcore-single-databases.md).
- [ограничения ресурсов на основе виртуальное ядро для баз данных в составе пула в базе данных SQL Azure](resource-limits-vcore-elastic-pools.md).
- [ограничения ресурсов на основе виртуальное ядро для управляемый экземпляр Azure SQL](../managed-instance/resource-limits.md).
