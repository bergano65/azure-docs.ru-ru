---
title: Уровень служб "Критически важный для бизнеса"
titleSuffix: Azure SQL Database & Azure SQL Managed Instance
description: Узнайте о критически важном для бизнеса уровне служб для базы данных SQL Azure и Управляемый экземпляр Azure SQL.
services: sql-database
ms.service: sql-db-mi
ms.subservice: features
ms.custom: sqldbrb=2
ms.devlang: ''
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
ms.reviewer: sstein
ms.date: 12/04/2018
ms.openlocfilehash: 0067811316a8afd26828050d81215ecb5748c841
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "85986707"
---
# <a name="business-critical-tier---azure-sql-database-and-azure-sql-managed-instance"></a>Критически важный для бизнеса уровня — база данных SQL Azure и Azure SQL Управляемый экземпляр 
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

> [!NOTE]
> Критически важный для бизнеса уровень называется Premium в модели приобретения DTU. Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для Базы данных SQL Azure](purchasing-models.md).

База данных SQL Azure и Управляемый экземпляр Azure SQL основаны SQL Server архитектуре ядра СУБД, которая корректируется для облачной среды, чтобы обеспечить доступность 99,99% даже в случае сбоев инфраструктуры. Используются три архитектурные модели:
- уровни "Общего назначения" или "Стандартный"; 
- уровни "Критически важный для бизнеса" или "Премиум";
- Уровень "Гипермасштабирование"

Модель уровня служб "Премиум" или "Критически важный для бизнеса" основана на кластере процессов ядра СУБД. Эта модель полагается на тот факт, что всегда есть кворум доступных узлов ядра СУБД, и она имеет минимальное влияние на производительность рабочей нагрузки даже во время обслуживания. Уровень службы "горизонтальное масштабирование" в настоящее время доступен только для базы данных SQL Azure (а не SQL Управляемый экземпляр) и является высокомасштабируемым уровнем производительности хранилища и вычислений, который использует архитектуру Azure для масштабирования ресурсов хранения и вычислений для базы данных в базе данных SQL Azure, значительно превышающей ограничения, доступные для уровней служб общего назначения и критически важный для бизнеса.

Azure обновляет базовую операционную систему, драйверы и SQL Server ядро СУБД прозрачно с минимальным временем простоя для конечных пользователей. 

Доступность уровня "Премиум" включается на уровне служб Premium и критически важный для бизнеса и предназначена для интенсивных рабочих нагрузок, которые не допускают влияния на производительность из-за текущих операций обслуживания.

Среда вычислений и хранилища интегрированы на одном узле модели Premium. Высокая доступность в этой архитектурной модели достигается за счет репликации вычислений (процесс ядра СУБД SQL Server) и хранилища (локально подключен SSD), развернутого в кластере из четырех узлов, с использованием технологии, подобной SQL Server [группы доступности Always on](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server).

![Кластер узлов ядра СУБД](./media/service-tier-business-critical/business-critical-service-tier.png)

Процесс ядра СУБД SQL Server и нижележащие файлы MDF/LDF размещаются на одном узле с локально подключенным хранилищем SSD, что обеспечивает низкую задержку в рабочей нагрузке. Высокий уровень доступности реализуется с помощью технологии, подобной SQL Server [группы доступности Always on](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server). Каждая база данных — это кластер узлов базы данных с одной базой данных-источником, доступной для рабочих нагрузок клиентов, и три вторичных процесса, содержащие копии данных. Основной узел постоянно передает изменения на вторичные узлы, чтобы обеспечить доступность данных во вторичных репликах в случае сбоя основного узла по какой-либо причине. Отработка отказа обрабатывается ядром СУБД SQL Server — одна вторичная реплика становится основным узлом и создается новая вторичная реплика, чтобы убедиться в наличии достаточного количества узлов в кластере. Рабочая нагрузка автоматически перенаправляется на новый основной узел.

Кроме того, в кластер ценовой категории "Критически важный для бизнеса" встроена возможность [масштабирования для чтения](read-scale-out.md), предоставляющая встроенный бесплатный узел только для чтения, который может использоваться для выполнения запросов только на чтение (например, чтение отчетов), которые не должен влиять на производительность основной рабочей нагрузки.

## <a name="when-to-choose-this-service-tier"></a>Когда нужно выбирать этот уровень служб?

Критически важный для бизнеса уровень служб предназначен для приложений, которым требуются ответы с низкой задержкой от базового хранилища SSD (1-2 мс в среднем), быстрое восстановление в случае сбоя базовой инфраструктуры или необходимость в отправке отчетов, аналитике и запросах только для чтения к бесплатной вторичной реплике базы данных-источника.

Ниже приведены основные причины, по которым следует выбрать критически важный для бизнеса уровня служб вместо уровня общего назначения.
-   **Низкие требования к задержкам ввода-вывода** — рабочие нагрузки, требующие быстрого ответа от уровня хранилища (1-2 миллисекунд в среднем), должны использовать уровень критически важный для бизнеса. 
-   **Частое взаимодействие между приложением и базой данных**. Приложения, которые не могут использовать кэширование уровня приложения или [запросы на пакетирование](../performance-improve-use-batching.md) , а также необходимость отправки большого количества запросов SQL, которые должны быть быстро обработаны, являются хорошими кандидатами для уровня критически важный для бизнеса.
-   **Большое количество обновлений** — операции вставки, обновления и удаления изменяют страницы данных в памяти ("грязную" страницу), которые должны быть сохранены в файлах данных с помощью `CHECKPOINT` операции. Потенциальный сбой процесса ядра СУБД или отработка отказа базы данных с большим количеством "грязных" страниц может увеличить время восстановления на общего назначения уровне. Уровень критически важный для бизнеса используется при наличии рабочей нагрузки, которая вызывает много изменений в памяти. 
-   **Долго выполняющиеся транзакции, изменяющие данные**. Транзакции, открытые дольше, препятствуют усечению файла журнала, что может увеличить размер журнала и число [виртуальных файлов журнала (VLF)](https://docs.microsoft.com/sql/relational-databases/sql-server-transaction-log-architecture-and-management-guide#physical_arch). Большое число VLF может замедлить восстановление базы данных после отработки отказа.
-   **Рабочая нагрузка с отчетами и аналитическими запросами** , которые можно перенаправить на бесплатную вторичную реплику только для чтения.
- **Повышение устойчивости и более быстрое восстановление после сбоев**. В случае сбоя системы база данных на основном экземпляре будет отключена, а одна из вторичных реплик будет немедленно становиться новой базой данных-источником для чтения и записи, готовой к обработке запросов. Ядру СУБД не нужно анализировать и повторять транзакции из файла журнала и загружать все данные в буфер памяти.
- **Расширенная защита от повреждений данных**. Критически важный для бизнеса уровень использует реплики базы данных в фоновом режиме для обеспечения непрерывности бизнес-процессов, поэтому служба также использует автоматическое восстановление страниц, то есть ту же технологию, которая используется для SQL Server [зеркального отображения базы данных и групп доступности](https://docs.microsoft.com/sql/sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring). В случае, если реплике не удается прочитать страницу из-за проблемы целостности данных, будет получена новая копия страницы из другой реплики, которая заменит нечитаемую страницу без потери данных или простоя клиента. Эта функция применима на уровне общего назначения, если база данных имеет геовторичную реплику.
- **Более высокая доступность** — уровень критически важный для бизнеса в конфигурации с несколькими AZ гарантирует доступность 99,995% по сравнению с 99,99% уровня общего назначения.
- Для **быстрого** георепликации критически важный для бизнеса уровень, настроенный с георепликацией, имеет гарантированную целевую точку восстановления (RPO) 5 секунд и целевое время восстановления (RTO) в 30 секунд для 100% развернутых часов.

## <a name="next-steps"></a>Дальнейшие действия

- Находите характеристики ресурсов (число ядер, операций ввода-вывода, памяти) критически важный для бизнеса уровня в [SQL управляемый экземпляр](../managed-instance/resource-limits.md#service-tier-characteristics), отдельной базы данных в [модели Виртуальное ядро](resource-limits-vcore-single-databases.md#business-critical---provisioned-compute---gen4) или [модели DTU](resource-limits-dtu-single-databases.md#premium-service-tier)или эластичном пуле в модели [Виртуальное ядро](resource-limits-vcore-elastic-pools.md#business-critical---provisioned-compute---gen4) и [DTU](resource-limits-dtu-elastic-pools.md#premium-elastic-pool-limits).
- См. дополнительные сведения об уровнях [Общего назначения](service-tier-general-purpose.md) и [Гипермасштабирование](service-tier-hyperscale.md).
- Дополнительные сведения о [Service Fabric](../../service-fabric/service-fabric-overview.md).
- Дополнительные параметры обеспечения высокого уровня доступности и аварийного восстановления см. в статье [непрерывность бизнес-процессов](business-continuity-high-availability-disaster-recover-hadr-overview.md).
