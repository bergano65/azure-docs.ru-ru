---
title: Справочник по правилам оценки уязвимостей SQL
description: Список заголовков и описаний правил для SQL Server, базы данных SQL Azure, Управляемый экземпляр SQL Azure и Azure синапсе Analytics
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 05/08/2020
ms.openlocfilehash: 71ba817f8df086ed8723532dd50d991386b68a03
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "90033240"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Справочник по правилам оценки уязвимостей SQL
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

В этой статье приведен набор встроенных правил, которые используются для отметки уязвимостей системы безопасности и выделения отклонения от рекомендаций, таких как недопустимые конфигурации, чрезмерные разрешения и незащищенные конфиденциальные данные. Правила основаны на рекомендациях корпорации Майкрософт и сосредоточены на вопросах безопасности, представляющих наибольшую опасность для базы данных и ее ценных данных. Они охватывают как проблемы на уровне базы данных, так и проблемы безопасности на уровне сервера, такие как настройки брандмауэра сервера и разрешения на уровне сервера. В этих правилах также представлены многие требования различных контролирующих органов, что позволяет соблюдать стандарты соответствия.

Правила, отображаемые в базе данных, зависят от версии и проверенной платформы SQL. 

Сведения о том, как реализовать оценку уязвимостей в Azure, см. в разделе [Реализация оценки уязвимостей](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment#implement-vulnerability-assessment).

## <a name="rules"></a>Правила

|Идентификатор правила  |Название правила  |Категория правила  |Серьезность правила  |Описание правила  |Платформа  |
|---------|---------|---------|---------|---------|---------|
| VA1017     |Разрешения на выполнение xp_cmdshell для всех пользователей (кроме dbo) должны быть отозваны         |Аутентификация и авторизация         |Высокий         |Xp_cmdshell расширенная хранимая процедура порождает командную оболочку Windows         |<nobr>SQL Server 2012 +<sup>1</sup><nobr/>         |
| VA1018     |Необходимо установить последние обновления         |Установка обновлений и исправлений         |Высокий         |Корпорация Майкрософт периодически выпускает накопительные обновления (Cu) для каждой версии SQL Server. Это правило проверяет, установлена ли последняя версия CU для конкретной версии SQL Server, путем передачи строки для выполнения. Это правило проверяет, что все пользователи (за исключением dbo) не имеют разрешения на выполнение расширенной хранимой процедуры xp_cmdshell. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA1020     |ГОСТЬ пользователя базы данных не должен быть членом какой-либо роли         |Аутентификация и авторизация         |Высокий         |Гостевой пользователь разрешает доступ к базе данных для любых имен входа, не сопоставленных с конкретным пользователем базы данных. Это правило проверяет, что гостевому пользователю не назначены роли базы данных.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1021     |Глобальные временные хранимые процедуры должны быть удалены         |Защита данных         |Высокий         |Глобальная временная хранимая процедура является видимой для всех сеансов и удаляется, когда сеанс пользователя, создавшего его, закрыт. Это правило проверяет отсутствие глобальных хранимых процедур.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1022     |Нерегламентированные распределенные запросы должны быть отключены         |Уменьшение контактной зоны         |Средний         |Автоматизированные распределенные запросы используют `OPENROWSET` `OPENDATASOURCE` функции и для подключения к удаленным источникам данных, использующим OLE DB. Это правило проверяет, отключены ли Нерегламентированные распределенные запросы.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1023     |Среда CLR должна быть отключена         |Уменьшение контактной зоны         |Высокий         |Среда CLR позволяет размещать управляемый код и запускать его в среде Microsoft SQL Server. Это правило проверяет, отключена ли среда CLR.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1026     |Среда CLR должна быть отключена         |Уменьшение контактной зоны         |Средний         |Среда CLR позволяет размещать управляемый код и запускать его в среде Microsoft SQL Server. В среде CLR строгая безопасность рассматривает надежные и EXTERNAL_ACCESS сборки, как если бы они были помечены как небезопасный, и требует, чтобы все сборки были подписаны сертификатом или асимметричным ключом с соответствующим именем входа, которому предоставлено ненадежное разрешение сборки в базе данных master. Это правило проверяет, отключена ли среда CLR.         |<nobr>SQL Server 2017 +<sup>2</sup><nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1027     |Не отслеживанию доверенных сборок следует удалить         |Уменьшение контактной зоны         |Высокий         |Сборки, помеченные как ненадежные, должны быть подписаны сертификатом или асимметричным ключом с соответствующим именем входа, которому было предоставлено разрешение ненадежной сборки в базе данных master. Доверенные сборки могут обходить это требование.          |<nobr>SQL Server 2017 г. +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1042     |Цепочки владения базы данных должны быть отключены для всех баз данных, за исключением `master` , `msdb` и `tempdb`         |Аутентификация и авторизация         |Высокий         |Межбазовые цепочки владения — это расширение цепочки владения, за исключением того, что оно выполняет перекрестную границу базы данных. Это правило проверяет, отключен ли этот параметр для всех баз данных, за исключением `master` , `msdb` и `tempdb` . Для `master` , `msdb` и `tempdb` , по умолчанию включено межбазовые цепочки владения.        |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1043     |Основной гостевой сервер не должен иметь доступа к любой пользовательской базе данных         |Аутентификация и авторизация         |Средний         |Гостевой пользователь разрешает доступ к базе данных для любых имен входа, не сопоставленных с конкретным пользователем базы данных. Это правило проверяет, что гостевой пользователь не может подключиться к какой бы то ни было базе данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1044     |Подключения удаленного администратора должны быть отключены         |Уменьшение контактной зоны         |Средний         |SQL Server предоставляет выделенное административное соединение (DAC). DAC позволяет администратору получить доступ к выполняющемуся серверу для выполнения диагностических функций или инструкций Transact-SQL или для устранения неполадок на сервере. Это правило проверяет, отключены ли удаленные выделенные подключения администратора.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1045     |Должна быть включена трассировка по умолчанию         |Аудит и ведение журнала         |Средний         |Трассировка по умолчанию обеспечивает помощь в поиске неисправностей администраторам базы данных, гарантируя, что они имеют необходимые регистрационные данные для диагностики проблем сразу же, как только они происходят. Это правило проверяет, включена ли трассировка по умолчанию.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1046     |CHECK_POLICY должны быть включены для всех имен входа SQL         |Аутентификация и авторизация         |Низкий         |CHECK_POLICY параметр включает проверку имен входа SQL в политике домена. Это правило проверяет, включен ли параметр CHECK_POLICY для всех имен входа SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1047     |Проверка истечения срока действия пароля должна быть включена для всех имен входа SQL.         |Аутентификация и авторизация         |Низкий         |Политика истечения срока действия паролей используется для управления продолжительностью действия пароля. Когда SQL Server принудительно применяет политику срока действия паролей, пользователи получают напоминание об изменении старых паролей и учетных записей, срок действия паролей которых истек. Это правило проверяет, включена ли политика истечения срока действия паролей для всех имен входа SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1048     |Участники базы данных не должны сопоставляться с `sa` учетной записью         |Аутентификация и авторизация         |Высокий         |Участник базы данных, сопоставленный с `sa` учетной записью, может использовать злоумышленник для повышения прав доступа к `sysadmin`         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1051     |AUTO_CLOSE должны быть отключены во всех базах данных         |Уменьшение контактной зоны         |Средний         |Параметр AUTO_CLOSE указывает, будет ли база данных закрываться аккуратно и освобождать ресурсы после выхода последнего пользователя. Это правило проверяет, что этот параметр отключен во всех базах данных.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1052     |Удалить Builtin \ администраторы в качестве имени для входа на сервер         |Аутентификация и авторизация         |Низкий         |Группа Builtin \ администраторы содержит группу локальных администраторов Windows. В более ранних версиях Microsoft SQL Server эта группа имеет права администратора по умолчанию. Это правило проверяет, что эта группа удалена из SQL Server.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1053     |Учетная запись с именем по умолчанию `sa` должна быть переименована или отключена         |Аутентификация и авторизация         |Низкий         |`sa` — хорошо известная учетная запись с ИДЕНТИФИКАТОРом участника 1. Это правило проверяет, что `sa` учетная запись либо переименована, либо отключена.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1054     |Излишние разрешения не должны быть предоставлены открытой роли для объектов или столбцов         |Аутентификация и авторизация         |Низкий         |Каждое имя входа SQL Server принадлежит роли сервера public. Если участнику сервера не предоставлены или запрещены определенные разрешения на защищаемый объект, пользователь наследует разрешения, предоставленные для общего доступа к этому объекту. Это правило отображает список всех защищаемых объектов или столбцов, доступных для всех пользователей с помощью роли PUBLIC.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1058     |`sa` имя входа должно быть отключено         |Аутентификация и авторизация         |Высокий         |`sa` — хорошо известная учетная запись с ИДЕНТИФИКАТОРом участника 1. Это правило проверяет, `sa` отключена ли учетная запись.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1059     |xp_cmdshell следует отключить         |Аутентификация и авторизация         |Высокий         |xp_cmdshell порождает командную оболочку Windows и передает ей строку для выполнения. Это правило проверяет, отключена ли xp_cmdshell.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1066     |Неиспользуемые конечные точки компонента Service Broker следует удалить         |Уменьшение контактной зоны         |Низкий         |Service Broker предоставляет службы очередей и надежного обмена сообщениями для SQL Server. Service Broker используется как для приложений, использующих один экземпляр SQL Server, так и для приложений, которые распределяют работу между несколькими экземплярами. Конечные точки компонента Service Broker предоставляют возможности для безопасности транспорта и пересылки сообщений. Это правило перечисляет все конечные точки компонента Service Broker. Удалите неиспользуемые.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1067     |Database Mail XPs следует отключить.         |Аутентификация и авторизация         |Средний         |Database Mail — это корпоративное решение для отправки сообщений электронной почты из SQL Server.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1068     |Разрешения сервера не должны предоставляться непосредственно участникам         |Аутентификация и авторизация         |Низкий         |Разрешения уровня сервера связаны с объектом уровня сервера, чтобы контролировать, какие пользователи могут получить доступ к объекту. Это правило проверяет, что для имен входа не предоставлены разрешения уровня сервера.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1069     |Разрешения на выбор из системных таблиц и представлений должны быть отменены для не являющихся администраторами.         |Аутентификация и авторизация         |Низкий         |Разрешения, не относящиеся к sysadmin, для выбора из системных таблиц и представлений находятся в списке и обычно используются такими инструментами, как SSMS. Это правило перечисляет системные таблицы и представления, к которым можно получить доступ без прав администратора.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1070     |Пользователи базы данных не должны иметь то же имя, что и имя входа на сервер         |Аутентификация и авторизация         |Низкий         |Пользователи базы данных могут иметь то же имя, что и имя входа на сервер. Это правило проверяет отсутствие таких пользователей.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1071     |Параметр "проверять на наличие хранимых процедур запуска" должен быть отключен         |Уменьшение контактной зоны         |Средний         |Если включен параметр "сканировать для процедур запуска" SQL Server сканирует для и выполняет все автоматически выполняемые хранимые процедуры, определенные на сервере. Если этот параметр включен SQL Server сканирование для и запускает все автоматически выполняемые хранимые процедуры, определенные на сервере. Это правило проверяет, отключен ли этот параметр.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1072     |Режим проверки подлинности должен быть проверкой подлинности Windows         |Аутентификация и авторизация         |Средний         |Существует два возможных режима проверки подлинности: режим проверки подлинности Windows и смешанный режим. Смешанный режим означает, что SQL Server включает проверку подлинности Windows и SQL Server проверку подлинности. Это правило проверяет, что для режима проверки подлинности задано значение Проверка подлинности Windows.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1091     |Аудит успешных и неудачных попыток входа (трассировка по умолчанию) должен быть включен, если для параметра "Аудит входа" настроено отслеживание имен входа.         |Аудит и ведение журнала         |Низкий         |SQL Server конфигурация аудита входа в систему позволяет администраторам отслеживать вход пользователей в SQL Server экземпляры. Если пользователь выбрал параметр "подсчитывать аудит входа", чтобы отслеживать вход пользователей в SQL Server экземпляры, важно включить ее как для успешных, так и для неудачных попыток входа.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1092     |SQL Server экземпляр не должен объявляться службой обозреватель SQL Server         |Уменьшение контактной зоны         |Низкий         |SQL Server использует службу обозреватель SQL Server для перечисления экземпляров ядро СУБД, установленных на компьютере. Это позволяет клиентским приложениям просматривать сервер и помогает клиентам отличать несколько экземпляров ядро СУБД на одном компьютере. Это правило проверяет, что экземпляр SQL скрыт.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1093     |Максимальное число журналов ошибок должно быть не больше 12.         |Аудит и ведение журнала         |Низкий         |Каждый журнал ошибок SQL Server содержит все сведения об ошибках и ошибках, произошедших с момента последнего перезапуска SQL Server или с момента последнего очистки журналов ошибок. Это правило проверяет, что максимальное число журналов ошибок — 12 или больше.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1094     |Разрешения базы данных не должны предоставляться непосредственно участникам         |Аутентификация и авторизация         |Низкий         |Разрешения — это правила, связанные с защищаемым объектом для регулирования того, какие пользователи могут получить доступ к объекту. Это правило проверяет, нет ли разрешений базы данных, предоставленных пользователям напрямую.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1095     |Не следует предоставлять роли PUBLIC более высокие разрешения         |Аутентификация и авторизация         |Средний         |Каждое имя входа SQL Server принадлежит роли сервера public. Если участнику сервера не предоставлены или запрещены определенные разрешения на защищаемый объект, пользователь наследует разрешения, предоставленные для общего доступа к этому объекту. Отобразится список всех разрешений, предоставленных роли PUBLIC.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1096     |Основному ГОСТЕВому пользователю не должны быть предоставлены разрешения в базе данных         |Аутентификация и авторизация         |Низкий         |Каждая база данных включает пользователя с именем GUEST. Разрешения, предоставленные гостевой системе, наследуются пользователями, которые имеют доступ к базе данных, но не имеют учетной записи пользователя в базе данных. Это правило проверяет, были ли отменены все разрешения у ГОСТЕВОГО пользователя.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1097     |Основному ГОСТЕВому пользователю не должны быть предоставлены разрешения на объекты или столбцы         |Аутентификация и авторизация         |Низкий         |Каждая база данных включает пользователя с именем GUEST. Разрешения, предоставленные гостевой системе, наследуются пользователями, которые имеют доступ к базе данных, но не имеют учетной записи пользователя в базе данных. Это правило проверяет, были ли отменены все разрешения у ГОСТЕВОГО пользователя.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1098     |Для любой существующей конечной точки SSB или зеркального отображения должно потребоваться подключение AES.         |Защита данных         |Высокий         |Конечные точки Service Broker и зеркального отображения поддерживают разные алгоритмы шифрования, включая без шифрования. Это правило проверяет, требуется ли шифрование AES для любой существующей конечной точки.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1099     |ГОСТЕВому пользователю не должны быть предоставлены разрешения на защищаемые объекты базы данных         |Аутентификация и авторизация         |Низкий         |Каждая база данных включает пользователя с именем GUEST. Разрешения, предоставленные гостевой системе, наследуются пользователями, которые имеют доступ к базе данных, но не имеют учетной записи пользователя в базе данных. Это правило проверяет, были ли отменены все разрешения у ГОСТЕВОГО пользователя.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1102     |Надежный бит должен быть отключен во всех базах данных, кроме MSDB         |Уменьшение контактной зоны         |Высокий         |Свойство базы данных TRUSTWORTHY используется для указания того, доверяет ли экземпляр SQL Server базе данных и ее содержимому. Если этот параметр включен, модули базы данных (например, определяемые пользователем функции или хранимые процедуры), которые используют контекст олицетворения, могут обращаться к ресурсам за пределами базы данных. Это правило проверяет, что надежный бит отключен во всех базах данных, кроме MSDB.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1143     |не следует использовать "dbo" для нормальной работы службы         |Уменьшение контактной зоны         |Средний         |Dbo или владелец базы данных — это учетная запись пользователя, которая имеет неявные разрешения на выполнение всех действий в базе данных. Члены предопределенной роли сервера sysadmin автоматически сопоставляются с dbo. Это правило проверяет, является ли dbo не единственной учетной записью, которой разрешен доступ к этой базе данных. Обратите внимание, что во вновь созданной чистой базе данных это правило завершится ошибкой, пока не будут созданы дополнительные роли.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1144     |База данных model должна быть доступна только для "dbo"         |Уменьшение контактной зоны         |Средний         |База данных model используется в качестве шаблона для всех баз данных, созданных на экземпляре SQL Server. Изменения, внесенные в базу данных модели, например модель восстановления размера базы данных и другие параметры базы данных, применяются к любым создаваемым базам данных. Это правило проверяет, является ли dbo единственной учетной записью, которой разрешен доступ к базе данных model.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1219     |Необходимо включить прозрачное шифрование данных         |Защита данных         |Средний         |Прозрачное шифрование данных (TDE) помогает защититься от угроз вредоносных действий, осуществляя шифрование и расшифровку баз данных, связанных с резервными копиями и журналами транзакций, в режиме реального времени без внесения изменений в приложение. Это правило проверяет, включен ли TDE в базе данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1220     |Обмен данными с базой данных с помощью TDS следует защищать через TLS.         |Защита данных         |Высокий         |Microsoft SQL Server может использовать протоколы SSL (SSL) или TLS для шифрования данных, передаваемых по сети между экземпляром SQL Server и клиентским приложением. Это правило проверяет, что все подключения к SQL Server шифруются через TLS.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1221     |Симметричные ключи шифрования базы данных должны использовать алгоритм AES         |Защита данных         |Высокий         |SQL Server использует ключи шифрования для защиты учетных данных и сведений о соединении, которые хранятся в базе данных сервера. SQL Server имеет два вида ключей: симметричный и асимметричный. Это правило служит для проверки того, что симметричные ключи шифрования базы данных используют алгоритм AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1222     |Cell-Level ключам шифрования следует использовать алгоритм AES         |Защита данных         |Высокий         |Шифрование Cell-Level (CLE) позволяет шифровать данные с помощью симметричных и асимметричных ключей. Это правило проверяет, что симметричные ключи шифрования Cell-Level используют алгоритм AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1223     |Ключи сертификата должны использовать не менее 2048 бит         |Защита данных         |Высокий         |Ключи сертификатов используются в RSA и других алгоритмах шифрования для защиты данных. Эти ключи должны быть достаточной длины для защиты данных пользователя. Это правило проверяет, что длина ключа составляет по крайней мере 2048 бит для всех сертификатов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1224     |Длина асимметричных ключей должна составлять не менее 2048 бит         |Защита данных         |Высокий         |Асимметричные ключи базы данных используются во многих алгоритмах шифрования. Эти ключи должны иметь достаточную длину для защиты зашифрованных данных. это правило проверяет, что все асимметричные ключи, хранящиеся в базе данных, имеют длину не менее 2048 бит.         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>База данных SQL         |
|VA1229     |Параметр FILESTREAM в реестре и в конфигурации SQL Server должны совпадать         |Уменьшение контактной зоны         |Высокий         |Существует два параметра, управляющих параметром FILESTREAM один в реестре (уровень ОС), а другой — в SQL Server конфигурации. Это правило проверяет соответствие двух параметров.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1230     |Файловый поток должен быть отключен         |Уменьшение контактной зоны         |Высокий         |Файловый поток данных интегрирует SQL Server ядро СУБД с файловой системой NTFS, сохраняя данные большого двоичного объекта (max) типа varbinary в виде файлов в файловой системе. Инструкции Transact-SQL могут вставить запрос на обновление и выполнить резервное копирование данных FILESTREAM. Это правило проверяет, отключен ли FILESTREAM.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1231     |Файловый поток должен быть отключен (SQL)         |Уменьшение контактной зоны         |Высокий         |Файловый поток данных интегрирует SQL Server ядро СУБД с файловой системой NTFS, сохраняя данные большого двоичного объекта (max) типа varbinary в виде файлов в файловой системе. Инструкции Transact-SQL могут вставить запрос на обновление и выполнить резервное копирование данных FILESTREAM. Это правило проверяет, отключен ли параметр FILESTREAM SQL "Специальный"         |<nobr>SQL Server 2012 +<nobr/>          |
|VA1234     |Необходимо включить параметр общих критериев         |Аудит и ведение журнала         |Низкий         |Параметр Common Условия_отбора Enabled включает несколько элементов и поведений, необходимых для соответствия общим критериям. Это правило проверяет, включен ли этот параметр. Обратите внимание, что этот параметр недоступен в выпуске Standard Edition. Дополнительные сведения см. в статьях [Конфигурация сервера с включенным соответствием общих критериев](/sql/database-engine/configure-windows/common-criteria-compliance-enabled-server-configuration-option) и [SQL Server ресурсы](https://www.microsoft.com/sql-server/sql-server-2019).        |<nobr>SQL Server 2012 +<nobr/>          |
|VA1235     |Необходимо отключить репликацию XPs         |Уменьшение контактной зоны         |Средний         |Отключить контактную зону для атак с репликацией XPs         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1244     |Потерянные пользователи должны быть удалены из баз данных SQL Server.         |Уменьшение контактной зоны         |Средний         |Пользователь базы данных, который существует в базе данных, но не имеет соответствующего имени входа в базе данных master или в качестве внешнего ресурса (например, пользователя Windows), называется потерянным пользователем, и его следует удалить или повторно сопоставить с допустимым именем входа. Это правило проверяет отсутствие потерянных пользователей.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1245     |Сведения dbo должны быть согласованы между целевой базой данных и главным         |Уменьшение контактной зоны         |Высокий         |Существует избыточная информация об удостоверении dbo для любой базы данных: метаданные, хранящиеся в самой базе данных, и метаданные, хранящиеся в Master DB. Это правило проверяет согласованность данных между целевой базой данных и главным объектом.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1246     |Не следует использовать роли приложений         |Аутентификация и авторизация         |Низкий         |Роль приложения — это участник базы данных, который позволяет приложению работать с собственными разрешениями, аналогичными пользовательским. Роли приложения обеспечивают доступ к определенным данным только пользователям, подключающимся через определенное приложение. Роли приложения основаны на паролях (обычно это приложения жестко), а не на основе разрешений, которые предоставляют базу данных для олицетворения роли приложения с помощью подбора пароля. Это правило проверяет, что в базе данных не определены роли приложения.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL         |
|VA1247     |Не должно быть ни одного SPs, помеченного как автоматический запуск         |Уменьшение контактной зоны         |Высокий         |Если для SQL Server настроено "сканирование для процедур запуска", сервер будет проверять базу данных master для хранимых процедур, помеченных как автозапуск. Это правило проверяет отсутствие SPs, помеченного как автозапуск.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1248     |Определяемые пользователем роли базы данных не должны быть членами фиксированных ролей         |Аутентификация и авторизация         |Средний         |Чтобы легко управлять разрешениями в базах данных SQL Server предоставляет несколько ролей, которые являются субъектами безопасности, которые группируют другие участники. Они подобны группам в операционной системе Microsoft Windows. Учетные записи базы данных и другие роли SQL Server можно добавлять в роли уровня базы данных. Каждый член предопределенной роли базы данных может добавлять других пользователей в ту же самую роль. Это правило проверяет, что ни одна пользовательская роль не является членом предопределенных ролей.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1252     |Список событий, которые подлежат аудиту и управляются централизованно с помощью спецификаций аудита сервера.         |Аудит и ведение журнала         |Низкий         |Аудит экземпляра ядра СУБД SQL Server или отдельной базы данных включает в себя отслеживание и ведение журнала событий, происходящих в ядре СУБД. Это правило отображает список событий, аудит которых выполняется.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1253     |Список событий уровня базы данных, аудит и централизованное управление которыми осуществляется с помощью спецификаций аудита сервера         |Аудит и ведение журнала         |Низкий         |Аудит экземпляра ядра СУБД SQL Server или отдельной базы данных включает в себя отслеживание и ведение журнала событий, происходящих в ядре СУБД. Это правило отображает полный список всех событий, аудит которых в данный момент осуществляется (то есть связанных с включенным аудитом), которые являются управляемыми для базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1256     |Пользовательские сборки CLR не должны определяться в базе данных         |Уменьшение контактной зоны         |Высокий         |Сборки среды CLR можно использовать для выполнения произвольного кода в SQL Server процессе. Это правило проверяет, что в базе данных нет определяемых пользователем сборок среды CLR.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1258     |Владельцы базы данных должным образом         |Аудит и ведение журнала         |Высокий         |Владельцы баз данных могут выполнять все действия по настройке и обслуживанию базы данных, а также удалять базы данных в SQL Server. Отслеживание владельцев базы данных важно, чтобы избежать чрезмерного разрешения для некоторых участников. Создайте базовый уровень, определяющий ожидаемых владельцев базы данных для базы данных. Это правило проверяет, определены ли владельцы базы данных в соответствии с базовыми показателями.         |<nobr>SQL Server 2016 +<sup>3</sup><nobr/><br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1263     |Список всех активных аудитов в системе         |Аудит и ведение журнала         |Низкий         |Аудит экземпляра ядра СУБД SQL Server или отдельной базы данных включает в себя отслеживание и ведение журнала событий, происходящих в ядре СУБД. Это правило отображает полный список всех событий, аудит которых выполняется в данный момент (например, связанных с включенным аудитом).         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1264     |Аудит успешных и неудачных попыток входа должен быть включен         |Аудит и ведение журнала         |Низкий         |SQL Server конфигурация аудита позволяет администраторам отслеживать вход пользователей в SQL Server экземпляры, за которые они отвечают. Это правило проверяет, включен ли аудит как для успешных, так и для неудачных попыток входа.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1265     |Аудит успешных и неудачных попыток входа для включенной проверки подлинности автономной базы данных должен быть включен         |Аудит и ведение журнала         |Средний         |SQL Server конфигурация аудита позволяет администраторам отслеживать вход пользователей в SQL Server экземпляры, за которые они отвечают. Это правило проверяет, включен ли аудит как успешных, так и неудачных попыток входа в автономную базу данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1266     |Параметр "MUST_CHANGE" должен быть задан для всех имен входа SQL.         |Аутентификация и авторизация         |Низкий         |Если параметр MUST_CHANGE установлен в SQL Server входа, потребуется установить новый пароль при первом входе в систему для проверки подлинности. Это правило проверяет, установлен ли этот параметр для всех имен входа.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1267     |Автономные пользователи должны использовать проверку подлинности Windows         |Аутентификация и авторизация         |Средний         |Автономные пользователи — это пользователи, которые существуют в базе данных и не нуждаются в сопоставлении имен входа. Это правило проверяет, что в автономных пользователях используется проверка подлинности Windows.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1276     |Компонент агента XPs должен быть отключен         |Аудит и ведение журнала         |Средний         |Агент SQL Server — это служба Microsoft Windows, которая выполняет запланированные административные задачи в SQL Server. Агент XPs является расширенными хранимыми процедурами, используемыми агент SQL Server, предоставляющими привилегированные действия, выполняемые извне в контексте безопасности учетной записи службы агент SQL Server. Это правило проверяет, отключен ли компонент агента XPs.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1277     |Шифрование сети polybase должно быть включено         |Уменьшение контактной зоны         |Высокий         |Polybase — это технология, которая обращается и объединяет нереляционные и реляционные данные из SQL Server. Параметр шифрования сети polybase настраивает SQL Server для шифрования каналов управления и данных при использовании polybase. Это правило проверяет, включен ли этот параметр.         |<nobr>SQL Server 2016 +<nobr/>         |
|VA1278     |Создание базовых показателей внешних поставщиков управления ключами         |Уменьшение контактной зоны         |Средний         |SQL Server расширенного управления ключами (Extensible Key Management) позволяет сторонним поставщикам программного обеспечения (HSM) и модулям безопасности оборудования регистрировать свои модули в SQL Server. При регистрации SQL Server пользователи могут использовать ключи шифрования, хранящиеся в модулях расширенного управления ключами. Это правило отображает список поставщиков расширенного управления ключами, используемых в системе.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1279     |Для TDS необходимо включить принудительное шифрование         |Защита данных         |Высокий         |Если параметр Принудительное шифрование для ядро СУБД включен, все связи между клиентом и сервером шифруются независимо от того, установлен ли параметр "шифровать соединение" (например, из SSMS). Это правило проверяет, включен ли параметр принудительного шифрования.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1280     |Разрешения сервера, предоставленные для общего доступа, должны быть минимальными         |Аутентификация и авторизация         |Средний         |Каждое имя входа SQL Server принадлежит роли сервера public. Если участнику сервера не предоставлены или запрещены определенные разрешения на защищаемый объект, пользователь наследует разрешения, предоставленные для общего доступа к этому объекту. Это правило проверяет, что разрешения сервера, предоставленные общедоступным, минимальны.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1281     |Должны быть предназначены все членства для определяемых пользователем ролей         |Аудит и ведение журнала         |Средний         |Определяемые пользователем роли — это субъекты безопасности, определенные пользователем для группировки участников, чтобы легко управлять разрешениями. Наблюдение за этими ролями важно, чтобы избежать чрезмерных разрешений. Создайте базовый уровень, определяющий Ожидаемое членство для каждой определяемой пользователем роли. Это правило проверяет, определены ли все членства для определяемых пользователем ролей в базовом плане.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1282     |Не следует удалять потерянные роли         |Аутентификация и авторизация         |Низкий         |Потерянные роли — это определяемые пользователем роли, которые не имеют членов. Удалите потерянные роли, так как они не требуются в системе. Это правило проверяет наличие потерянных ролей.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA1283     |В системе должен быть по крайней мере один активный аудит.         |Аудит и ведение журнала         |Низкий         |Аудит экземпляра ядра СУБД SQL Server или отдельной базы данных включает в себя отслеживание и ведение журнала событий, происходящих в ядре СУБД. Объект Подсистема аудита SQL Server объединяет отдельные экземпляры действий или групп действий уровня сервера или базы данных, за которыми нужно проводить наблюдение. Это правило проверяет наличие по крайней мере одного активного аудита в системе.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1286     |Разрешения базы данных не должны предоставляться непосредственно участникам (объект или столбец)         |Аутентификация и авторизация         |Низкий         |Разрешения — это правила, связанные с защищаемым объектом для регулирования того, какие пользователи могут получить доступ к объекту. Это правило проверяет, нет ли разрешений базы данных, предоставленных пользователям напрямую.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA1288     |Столбцы конфиденциальных данных должны классифицироваться         |Защита данных         |Средний         |Это правило обнаруживает и характеризует потенциально конфиденциальные данные в базе данных. Результатом является коллекция конфиденциальных столбцов базы данных, которые должны быть просмотрены и классифицированы с помощью классификации & обнаружения данных SQL. Это позволяет постоянно помечать столбцы базы данных в соответствии с их чувствительностью, что позволяет отслеживать (проводить аудит) использование классифицированных данных и создавать отчеты. Если конфиденциальные столбцы базы данных не защищены, следует также рассмотреть возможность применения одной из встроенных возможностей безопасности базы данных SQL, чтобы ограничить доступ к конфиденциальным данным и защитить их.         |<nobr/>База данных SQL         |
|VA2000     |Минимальный набор участников должен обладать высоким влиянием разрешений уровня базы данных         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор участников предоставляет высокий уровень влияния на разрешения уровня базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2001     |Минимальному набору участников следует предоставить высокий уровень влияния на разрешения уровня базы данных для объектов или столбцов.         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор участников предоставляет высокий уровень влияния на разрешения уровня базы данных для объектов или столбцов.        |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2002     |Минимальному набору участников следует предоставить высокий уровень влияния на разрешения уровня базы данных для различных защищаемых объектов.         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор участников предоставляет высокий уровень влияния на разрешения уровня базы данных для различных защищаемых объектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2010     |Минимальный набор участников должен обладать средним уровнем влияния на разрешения уровня базы данных         |Аутентификация и авторизация         |Средний         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов предоставляет средние влияния на разрешения уровня базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2020     |Минимальному набору участников следует предоставить разрешения ALTER или ALTER любого пользователя с областью действия базы данных         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов имеет разрешения ALTER или ALTER любого пользователя с областью действия базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2021     |Минимальному набору участников следует предоставить разрешения ALTER уровня базы данных для объектов или столбцов.         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальному набору участников предоставляются разрешения ALTER DATABASE с областью действия для объектов или столбцов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2022     |Минимальному набору участников следует предоставить разрешение ALTER уровня базы данных для различных защищаемых объектов.         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов имеет разрешения ALTER уровня базы данных на различные защищаемые объекты.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2030     |Минимальному набору участников следует предоставить разрешения SELECT или EXECUTE уровня базы данных.         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что разрешения SELECT или EXECUTE на уровне базы данных предоставляются только минимальному набору субъектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2031     |Минимальный набор участников должен быть предоставлен в области базы данных SELECT          |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что разрешение SELECT на уровне базы данных для объектов или столбцов предоставляется только минимальному набору субъектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2032     |Минимальному набору участников следует предоставить разрешения SELECT или EXECUTE на уровне базы данных для схемы         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что для схемы предоставлены разрешения SELECT или EXECUTE на уровне базы данных только для минимального набора субъектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2033     |Минимальному набору участников должно быть предоставлено разрешение EXECUTE на уровне базы данных для объектов или столбцов.         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что разрешение EXECUTE на уровне базы данных для объектов или столбцов предоставляется только минимальному набору субъектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2034     |Минимальному набору участников должно быть предоставлено разрешение EXECUTE на уровне базы данных для коллекции XML-схем.         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальному набору участников предоставляется разрешение EXECUTE на уровне базы данных для коллекции XML-схем.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL         |
|VA2040     |Минимальный набор субъектов следует предоставлять с низким влиянием разрешений уровня базы данных.         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов имеет низкие последствия для разрешений уровня базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2041     |Минимальный набор субъектов следует предоставлять с низким влиянием разрешений уровня базы данных на объекты или столбцы.         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов имеет низкую воздействие на разрешения уровня базы данных для объектов или столбцов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе          |
|VA2042     |Минимальный набор субъектов следует предоставлять с низким влиянием разрешений уровня базы данных на схему         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов имеет низкую воздействие на схему разрешений уровня базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе          |
|VA2050     |Минимальному набору участников следует предоставить разрешения VIEW DEFINITION на уровне базы данных         |Аутентификация и авторизация         |Средний         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что разрешение VIEW DEFINITION на уровне базы данных предоставляется только минимальному набору субъектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе          |
|VA2051     |Минимальному набору участников следует предоставить разрешения VIEW DEFINITION на уровне базы данных для объектов или столбцов.         |Аутентификация и авторизация         |Средний         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что для объектов или столбцов предоставлены разрешения VIEW DEFINITION на уровне базы данных только для минимального набора участников.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе          |
|VA2052     |Минимальному набору участников следует предоставить разрешение VIEW DEFINITION на уровне базы данных для различных защищаемых объектов.         |Аутентификация и авторизация         |Средний         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что разрешение VIEW DEFINITION на уровне базы данных для различных защищаемых объектов предоставляется только минимальному набору субъектов.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе          |
|VA2060     |Обнаружение угроз SQL должно быть включено на уровне сервера         |Защита данных         |Средний         |Обнаружение угроз SQL обеспечивает уровень безопасности, который обнаруживает потенциальные уязвимости и аномальные действия в базах данных, таких как атаки путем внедрения кода SQL и необычные шаблоны поведения. При обнаружении потенциальной угрозы система обнаружения угроз отправляет оповещение в режиме реального времени по электронной почте и в центр безопасности Azure, что включает четкие действия по исследованию и исправлению для конкретной угрозы. Дополнительные сведения см. в разделе [Настройка обнаружения угроз](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection). Эта проверка проверяет, включено ли обнаружение угроз SQL.         |<nobr/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2061     |Аудит должен быть включен на уровне сервера         |Аудит и ведение журнала         |Высокий         |Аудит базы данных SQL Azure отслеживает события базы данных и записывает их в журнал аудита в учетной записи хранения Azure. Аудит помогает понять активность базы данных и получить представление о расхождениях и аномалиях, которые могут указывать на бизнес-проблемы или потенциальные нарушения безопасности, а также помочь в обеспечении соответствия нормативным требованиям. Дополнительные сведения см. в разделе [аудит SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-auditing). Это правило проверяет, включен ли аудит.         |<nobr/>База данных SQL<br/><br/>Azure синапсе          |
|VA2062     |Правила брандмауэра уровня базы данных не должны предоставлять чрезмерный доступ         |Уменьшение контактной зоны         |Высокий         |Брандмауэр уровня базы данных SQL Azure помогает защитить данные, предотвращая доступ к базе данных, пока вы не укажете, какие IP-адреса имеют разрешение. Правила брандмауэра уровня базы данных предоставляют доступ к определенной базе данных на основе исходного IP-адреса каждого запроса.  Правила брандмауэра уровня базы данных для баз данных master и User можно создавать и управлять только с помощью Transact-SQL (в отличие от правил брандмауэра уровня сервера, которые также можно создавать и управлять с помощью портал Azure или PowerShell). Дополнительные сведения см. в статье [правила брандмауэра IP-адресов для базы данных SQL Azure и Azure синапсе Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Эта проверка подтверждает, что правила брандмауэра уровня базы данных не предоставляют чрезмерного доступа.         |<nobr/>База данных SQL<br/><br/>Azure синапсе         |
|VA2063     |Правила брандмауэра уровня сервера не должны предоставлять чрезмерный доступ         |Уменьшение контактной зоны         |Высокий         |Брандмауэр уровня сервера SQL Azure помогает защитить сервер, предотвращая доступ к базам данных, пока вы не укажете, какие IP-адреса имеют разрешение. Правила брандмауэра уровня сервера предоставляют доступ ко всем базам данных, принадлежащим серверу, на основе исходного IP-адреса каждого запроса.  Правила брандмауэра уровня сервера можно создавать и управлять только с помощью Transact-SQL, а также с помощью портал Azure или PowerShell. Дополнительные сведения см. в статье [правила брандмауэра IP-адресов для базы данных SQL Azure и Azure синапсе Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Эта проверка подтверждает, что правила брандмауэра уровня сервера не предоставляют чрезмерный доступ.         |<nobr/>База данных SQL<br/><br/>Azure синапсе         |
|VA2064     |Правила брандмауэра уровня базы данных должны отслеживаться и храниться не менее         |Уменьшение контактной зоны         |Высокий         |Брандмауэр уровня базы данных SQL Azure помогает защитить данные, предотвращая доступ к базе данных, пока вы не укажете, какие IP-адреса имеют разрешение. Правила брандмауэра уровня базы данных предоставляют доступ к определенной базе данных на основе исходного IP-адреса каждого запроса. Правила брандмауэра уровня базы данных для баз данных master и User можно создавать и управлять только с помощью Transact-SQL (в отличие от правил брандмауэра уровня сервера, которые также можно создавать и управлять с помощью портал Azure или PowerShell). Дополнительные сведения см. в статье [правила брандмауэра IP-адресов для базы данных SQL Azure и Azure синапсе Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Эта проверка перечисляет все правила брандмауэра уровня базы данных, чтобы можно было идентифицировать и устранить любые изменения, внесенные в них.         |<nobr/>База данных SQL<br/><br/>Azure синапсе         |
|VA2065     |Правила брандмауэра уровня сервера должны отслеживаться и храниться не менее         |Уменьшение контактной зоны         |Высокий         |Брандмауэр уровня сервера SQL Azure помогает защитить данные, предотвращая доступ к базам данных, пока вы не укажете, какие IP-адреса имеют разрешение. Правила брандмауэра уровня сервера предоставляют доступ ко всем базам данных, принадлежащим серверу, на основе исходного IP-адреса каждого запроса.  Правила брандмауэра уровня сервера можно создавать и управлять с помощью Transact-SQL, а также с помощью портал Azure или PowerShell. Дополнительные сведения см. в статье [правила брандмауэра IP-адресов для базы данных SQL Azure и Azure синапсе Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).  Эта проверка перечисляет все правила брандмауэра уровня сервера, чтобы можно было идентифицировать и устранить любые изменения, внесенные в них.         |<nobr/>База данных SQL<br/><br/>Azure синапсе         |
|VA2100     |Минимальный набор субъектов следует предоставлять с высоким уровнем влияния на разрешения уровня сервера         |Аутентификация и авторизация         |Высокий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов предоставляет высокий уровень разрешений на уровне сервера.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2101     |Минимальный набор участников должен обладать средним уровнем влияния на разрешения уровня сервера         |Аутентификация и авторизация         |Средний         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов предоставляет средние последствия для разрешений на уровне сервера.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2102     |Минимальный набор субъектов следует предоставлять с низким влиянием разрешений уровня сервера         |Аутентификация и авторизация         |Низкий         |С каждым защищаемым объектом SQL Server связаны разрешения, которые могут быть предоставлены участникам. Разрешения можно ограничить на уровне сервера (назначенном для имен входа и серверных ролей) или на уровне базы данных (назначенном пользователям базы данных и ролям базы данных). Эти правила проверяют, что только минимальный набор субъектов имеет низкий уровень разрешений на уровне сервера.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2103     |Необходимо отозвать ненужные разрешения на выполнение для расширенных хранимых процедур         |Аутентификация и авторизация         |Средний         |Расширенные хранимые процедуры — это библиотеки DLL, которые экземпляр SQL Server может динамически загружать и запускать. SQL Server упаковывается во множество расширенных хранимых процедур, которые позволяют взаимодействовать с системными библиотеками DLL. Это правило проверяет, были ли отозваны ненужные разрешения на выполнение для расширенных хранимых процедур.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2104     |Разрешения на выполнение для расширенных хранимых процедур должны быть отозваны из открытых         |Аутентификация и авторизация         |Средний         |Расширенные хранимые процедуры — это библиотеки DLL, которые экземпляр SQL Server может динамически загружать и запускать. SQL Server упаковывается во множество расширенных хранимых процедур, которые позволяют взаимодействовать с системными библиотеками DLL. Это правило проверяет, что роли PUBLIC не предоставлены ненужные разрешения на выполнение.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2105     |Пароль для входа не следует легко угадать         |Аутентификация и авторизация         |Высокий         |Это правило проверяет, что пароли для входа не легко угадать.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2107     |Минимальный набор участников должен быть членом фиксированных ролей базы данных SQL Azure Master.         |Аутентификация и авторизация         |Высокий         |База данных SQL предоставляет две ограниченные административные роли в базе данных master, к которым можно добавлять учетные записи пользователей, предоставляющие разрешения на создание баз данных или управление именами входа. Это правило проверяет, является ли минимальный набор участников членами этих административных ролей.         |<nobr/>База данных SQL<br/><br/>Azure синапсе         |
|VA2108     |Минимальный набор участников должен быть членом фиксированных ролей базы данных с высоким уровнем влияния.         |Аутентификация и авторизация         |Высокий         |SQL Server предоставляет роли, помогающие управлять разрешениями. Роли — это субъекты безопасности, которые группируют другие участники. Роли уровня базы данных находятся в области разрешений на уровне базы данных. Это правило проверяет, что минимальный набор участников является членом предопределенных ролей базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2109     |Минимальный набор участников должен быть членом фиксированных ролей базы данных с низким влиянием.         |Аутентификация и авторизация         |Низкий         |SQL Server предоставляет роли, помогающие управлять разрешениями. Роли — это субъекты безопасности, которые группируют другие участники. Роли уровня базы данных находятся в области разрешений на уровне базы данных. Это правило проверяет, что минимальный набор участников является членом предопределенных ролей базы данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2110     |Разрешения на выполнение для доступа к реестру должны быть отозваны         |Аутентификация и авторизация         |Высокий         |Расширенные хранимые процедуры реестра позволяют Microsoft SQL Server читать записи и перечислять значения и ключи в реестре. Они используются программой Enterprise Manager для настройки сервера. Это правило проверяет, были ли отменены разрешения на выполнение расширенных хранимых процедур реестра для всех пользователей (кроме dbo).         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2111     |Образцы баз данных должны быть удалены         |Уменьшение контактной зоны         |Низкий         |Microsoft SQL Server поставляется с несколькими образцами баз данных. Это правило проверяет, были ли удалены образцы баз данных.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2112     |Разрешения из общедоступной службы для служб DTS должны быть отозваны         |Аутентификация и авторизация         |Средний         |Службы DTS — это набор объектов и служебных программ, которые обеспечивают автоматизацию извлечения операций преобразования и загрузки (ETL) в базу данных или из нее. Объекты являются пакетами служб DTS и их компонентами, а служебные программы называются средствами служб DTS. Это правило проверяет, были ли отменены разрешения роли PUBLIC для использования системных хранимых процедур DTS.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2113     |Разрешения служб DTS следует предоставлять только ролям служб SSIS.         |Аутентификация и авторизация         |Средний         |Службы DTS — это набор объектов и служебных программ, которые позволяют автоматизации извлекать операции преобразования и загрузки в базу данных или из нее. Объекты являются пакетами служб DTS и их компонентами, а служебные программы называются средствами служб DTS. Это правило проверяет, что только ролям служб SSIS предоставляются разрешения на использование системных хранимых процедур служб DTS.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2114     |Минимальный набор участников должен быть членом предопределенных ролей сервера с высоким уровнем влияния.         |Аутентификация и авторизация         |Высокий         |SQL Server предоставляет роли, помогающие управлять разрешениями. Роли — это субъекты безопасности, которые группируют другие участники. Роли уровня сервера находятся на уровне сервера в области разрешений. Это правило проверяет, что минимальный набор участников является членом предопределенных ролей сервера.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2115     |Минимальный набор участников должен быть членом предопределенных ролей сервера среднего влияния.         |Аутентификация и авторизация         |Средний         |SQL Server предоставляет роли, помогающие управлять разрешениями. Роли — это субъекты безопасности, которые группируют другие участники. Роли уровня сервера находятся на уровне сервера в области разрешений. Это правило проверяет, что минимальный набор участников является членом предопределенных ролей сервера.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2120     |Функции, которые могут повлиять на безопасность, должны быть отключены         |Уменьшение контактной зоны         |Высокий         |SQL Server может предоставлять широкий спектр функций и служб. Некоторые функции и службы, предоставляемые по умолчанию, не являются обязательными, и их включение может негативно сказаться на безопасности системы. Это правило проверяет, отключены ли эти функции.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2121     | Компонент "процедуры OLE Automation" должен быть отключен        |Уменьшение контактной зоны         |Высокий         |SQL Server может предоставлять широкий спектр функций и служб. Некоторые функции и службы, предоставляемые по умолчанию, могут быть ненужными, и их включение может негативно сказаться на безопасности системы. Параметр «процедуры OLE-автоматизации» определяет, можно ли создавать экземпляры объектов OLE Automation в пакетах Transact — SQL. Это расширенные хранимые процедуры, позволяющие SQL Server пользователям выполнять функции, внешние для SQL Server. Независимо от его преимуществ его также можно использовать для эксплойтов и известно как популярный механизм для файлов на целевых компьютерах. Рекомендуется использовать PowerShell в качестве замены для этого средства. Это правило проверяет, отключена ли функция "процедуры OLE-автоматизации".         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2122     |Компонент "Параметры пользователя" должен быть отключен         |Уменьшение контактной зоны         |Средний         |SQL Server может предоставлять широкий спектр функций и служб. Некоторые функции и службы, предоставляемые по умолчанию, не являются обязательными, и их включение может негативно сказаться на безопасности системы. Параметры пользователя указывают глобальные значения по умолчанию для всех пользователей. Список параметров обработки запросов по умолчанию создается на время сеанса работы пользователя. Параметры пользователя позволяют изменять значения по умолчанию параметров SET (если параметры сервера по умолчанию не подходят). Это правило проверяет, отключена ли функция "пользовательские параметры".         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2123     |Необходимо отключить функцию "удаленный доступ"         |Уменьшение контактной зоны         |Средний         |SQL Server может предоставлять широкий спектр функций и служб. Некоторые функции и службы, предоставляемые по умолчанию, не являются обязательными, и их включение может негативно сказаться на безопасности системы. Параметр Remote Access управляет выполнением локальных хранимых процедур на удаленных серверах или удаленных хранимых процедурах на локальном сервере. Это правило проверяет, отключен ли компонент "удаленный доступ".         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL         |
|VA2126     |Функции, которые могут повлиять на безопасность, должны быть отключены         |Уменьшение контактной зоны         |Средний         |SQL Server может предоставлять широкий спектр функций и служб. Некоторые функции и службы, предоставляемые по умолчанию, не являются обязательными, и их включение может негативно сказаться на безопасности системы. Это правило проверяет, отключены ли эти функции.         |<nobr>SQL Server 2016 +<nobr/>         |
|VA2127     |Функция "внешние скрипты" должна быть отключена         |Уменьшение контактной зоны         |Высокий         |SQL Server может предоставлять широкий спектр функций и служб. Некоторые функции и службы, предоставляемые по умолчанию, не являются обязательными, и их включение может негативно сказаться на безопасности системы. Параметр "External Scripts Enabled" включает выполнение скриптов с определенными удаленными расширениями языка. Это правило проверяет, отключена ли функция "внешние скрипты".         |<nobr>SQL Server 2016 +<nobr/>         |
|VA2128     |Оценка уязвимостей не поддерживается для SQL Server версий ниже SQL Server 2012         |Установка обновлений и исправлений         |Высокий         |Для запуска сканирования оценки уязвимостей на SQL Server необходимо обновить сервер до SQL Server 2012 или более поздней версии, SQL Server 2008 R2 и ниже больше не поддерживаются корпорацией Майкрософт. Дополнительные сведения см. в разделе <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Управляемый экземпляр SQL<br/><br/>База данных SQL<br/><br/>Azure синапсе         |
|VA2129     |Изменения в подписанных модулях должны быть полномочными         |Аутентификация и авторизация         |Высокий         |Можно подписать хранимую процедуру, функцию или триггер с помощью сертификата или асимметричного ключа. Эта возможность предназначена для сценариев, в которых разрешения не могут наследоваться по цепочке владения или если цепочка владения разорвана, например в динамическом SQL. Это правило проверяет изменения, внесенные в подписанные модули, что может свидетельствовать о вредоносном использовании.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>База данных SQL         |
|VA2130     |Отследите всех пользователей с доступом к базе данных.         |Аутентификация и авторизация         |Низкий         |Пользователям должны быть предоставлены разрешения в соответствии с принципом наименьших привилегий. каждому пользователю следует предоставить минимальный набор разрешений, необходимый для их роли. Эта проверка отслеживает всех пользователей, имеющих доступ к базе данных. Убедитесь, что эти пользователи являются полномочными в соответствии с их текущей ролью в Организации. Сведения о разрешениях в этой проверке могут поддерживать процесс проверки доступа пользователей для базы данных.         |<nobr>База данных SQL<nobr/><br/><br/>Azure синапсе         |

<sup>1</sup> **SQL Server 2012 +** относится ко всем версиям SQL Server 2012 и более поздних версий.

<sup>2</sup> **SQL Server 2017 г. +** относится ко всем версиям SQL Server 2017 и более поздних версий.

<sup>3</sup> **SQL Server 2016** г. + относится ко всем версиям SQL Server 2016 и более поздних версий.

## <a name="next-steps"></a>Дальнейшие шаги

- [Оценка уязвимостей](sql-vulnerability-assessment.md)
