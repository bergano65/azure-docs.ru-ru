---
title: Снижение затрат на обслуживание с помощью средства "Помощник по Azure"
description: Использование Azure Advisor для оптимизации затрат на развернутые службы Azure.
ms.topic: article
ms.date: 01/29/2019
ms.openlocfilehash: 6fa57726ee37d78438b4e07d329f1af00f157d7e
ms.sourcegitcommit: 3d79f737ff34708b48dd2ae45100e2516af9ed78
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2020
ms.locfileid: "87057739"
---
# <a name="reduce-service-costs-by-using-azure-advisor"></a>Уменьшение затрат на обслуживание с помощью помощника по Azure

Azure Advisor помогает оптимизировать и сократить общие затраты на Azure, выявляя бездействующие и недостаточные ресурсы.Рекомендации по затратам можно получить на вкладке **Стоимость** панели мониторинга Помощника.

## <a name="optimize-virtual-machine-spend-by-resizing-or-shutting-down-underutilized-instances"></a>Оптимизация затрат на виртуальные машины путем изменения размеров или завершения работы недостаточно нагруженных экземпляров 

Хотя в некоторых сценариях приложение может намеренно обеспечивать низкую загрузку, часто можно сократить затраты, управляя размером и числом виртуальных машин. 

Рекомендуемые действия отключаются или изменяют размер, зависящий от оцениваемого ресурса.

Расширенная модель оценки в Advisor учитывает завершение работы виртуальных машин, если выполняются оба следующих условия. 
- P95th максимальное значение использования ЦП меньше 3%. 
- Использование сети менее 2% за семь дней.
- Нехватка памяти ниже пороговых значений

Помощник считает, что изменение размера виртуальных машин возможно в соответствии с текущей нагрузкой в пределах одного семейства номеров SKU или меньшего числа экземпляров, например:
- Текущая нагрузка не выйдет свыше 80% использования для рабочих нагрузок, которые не подключены к пользователю. 
- Нагрузка не выйдет выше 40% для рабочих нагрузок, доступных пользователю. 

Здесь помощник определяет тип рабочей нагрузки, анализируя характеристики загрузки ЦП рабочей нагрузки.

Advisor показывает предполагаемую экономию затрат для рекомендуемого действия: изменение размера или завершение работы. Для изменения размера помощник предоставляет сведения о текущем и целевом номере SKU.

Если требуется более интенсивное определение неиспользуемых виртуальных машин, можно настроить правило использования ЦП для каждой подписки.

## <a name="optimize-spend-for-mariadb-mysql-and-postgresql-servers-by-right-sizing"></a>Оптимизируйте расходы на серверы MariaDB, MySQL и PostgreSQL, используя правильный размер 
Advisor анализирует данные об использовании и оценивает, были ли ресурсы сервера базы данных MariaDB, MySQL или PostgreSQL недостаточными для продолжительного времени за последние семь дней. Низкая загрузка ресурсов приводит к нежелательным расходам, которые можно исправить без существенного влияния на производительность. Чтобы снизить затраты и эффективно управлять ресурсами, рекомендуется уменьшить размер вычислений (виртуальных ядер) на половину.

## <a name="reduce-costs-by-eliminating-unprovisioned-expressroute-circuits"></a>Сокращение расходов за счет исключения неподготовленных каналов ExpressRoute

Advisor определяет каналы Azure ExpressRoute, которые были в состоянии поставщика **не подготовлены** более одного месяца. Он рекомендует удалить канал, если вы не планируете подготавливать канал с помощью поставщика услуг подключения.

## <a name="reduce-costs-by-deleting-or-reconfiguring-idle-virtual-network-gateways"></a>Сокращение расходов за счет удаления или перенастройки неактивных шлюзов виртуальной сети

Advisor определяет шлюзы виртуальной сети, которые были бездействующими в течение более 90 дней. Так как счета за эти шлюзы выставляются ежечасно, следует рассмотреть возможность их перенастройки или удаления, если вы больше не планируете их использовать. 

## <a name="buy-reserved-virtual-machine-instances-to-save-money-over-pay-as-you-go-costs"></a>Приобретение зарезервированных экземпляров виртуальных машин для экономии средств по сравнению с применением оплаты по мере использования

Advisor проверяет использование виртуальной машины за последние 30 дней, чтобы определить, можно ли сэкономить деньги, приобретя резервирование Azure. Помощник отображает регионы и размеры, которые могут быть самыми высокими, и предполагаемая экономия от резервирования покупок. Приобретая резервирования Azure, можно предварительно оплатить базовую стоимость виртуальных машин. Скидки автоматически применяются к новым или существующим виртуальным машинам, которые имеют тот же размер и регион, что и ваши резервирования. [Узнайте больше о зарезервированных экземплярах виртуальных машин Azure.](https://azure.microsoft.com/pricing/reserved-vm-instances/)

Помощник также уведомляет вас о зарезервированных экземплярах, срок действия которых истечет в течение следующих 30 дней. Рекомендуется приобрести новые зарезервированные экземпляры, чтобы избежать цены с оплатой по мере использования.

## <a name="buy-reserved-instances-for-several-resource-types-to-save-over-your-pay-as-you-go-costs"></a>Приобретение зарезервированных экземпляров для нескольких типов ресурсов, чтобы сэкономить на стоимости с оплатой по мере использования

Advisor анализирует закономерности использования за последние 30 дней для следующих ресурсов и рекомендует приобретения зарезервированных мощностей, которые оптимизируют затраты.

### <a name="azure-cosmos-db-reserved-capacity"></a>Azure Cosmos DB зарезервированная емкость
Advisor анализирует шаблоны использования Azure Cosmos DB за последние 30 дней и рекомендует приобретения зарезервированных мощностей для оптимизации затрат. Используя зарезервированные ресурсы, вы можете предварительно приобрести Azure Cosmos DB почасовое использование и сэкономить на затратах с оплатой по мере использования. Зарезервированная емкость является преимуществом выставления счетов и автоматически применяется к новым и существующим развертываниям. Advisor вычисляет оценки для отдельных подписок с помощью 3-летний цены на резервирование и путем экстраполяции шаблонов использования за последние 30 дней. Рекомендации по общей области доступны для покупок зарезервированных мощностей и могут повысить экономию.

### <a name="sql-paas-reserved-capacity"></a>Зарезервированная емкость SQL PaaS
Advisor анализирует пулы эластичных баз данных SQL PaaS и шаблоны использования SQL Управляемый экземпляр за последние 30 дней. Затем он рекомендует приобрести зарезервированную емкость, которая оптимизирует затраты. Используя зарезервированные ресурсы, вы можете предварительно приобрести почасовое использование базы данных SQL и сэкономить затраты на вычисление SQL. Ваша лицензия SQL выставляется отдельно и не подсчитывается резервированием. Зарезервированная емкость является преимуществом выставления счетов и автоматически применяется к новым и существующим развертываниям. Advisor вычисляет оценки для отдельных подписок с помощью 3-летний цены на резервирование и путем экстраполяции шаблонов использования за последние 30 дней. Рекомендации по общей области доступны для покупок зарезервированных мощностей и могут повысить экономию.

### <a name="app-service-stamp-fee-reserved-capacity"></a>Зарезервированная емкость платы службы приложений
Advisor анализирует шаблон использования штампа времени для изолированной среды службы приложений Azure за последние 30 дней и рекомендует приобретения зарезервированных мощностей, которые оптимизируют затраты. Используя зарезервированную емкость, вы можете предварительно приобрести почасовую оплату за использование отметок изолированной среды и сэкономить на затратах с оплатой по мере использования. Обратите внимание, что зарезервированная емкость применяется только к плате за отметку, а не к экземплярам службы приложений. Зарезервированная емкость является преимуществом выставления счетов и автоматически применяется к новым и существующим развертываниям. Advisor оценивает сохранение оценок для отдельных подписок с использованием 3-летний цены на резервирование на основе шаблонов использования за последние 30 дней.

### <a name="blob-storage-reserved-capacity"></a>Зарезервированная емкость хранилища BLOB-объектов
Advisor анализирует хранилище BLOB-объектов Azure и Azure Data Lake использование хранилища за последние 30 дней. Затем он вычисляет зарезервированные приобретения емкости, которые оптимизируют затраты. С зарезервированной емкостью вы можете предварительно приобрести почасовое использование и сэкономить ваши затраты по запросу. Зарезервированная емкость хранилища BLOB-объектов применяется только к данным, хранящимся в учетных записях BLOB-объектов Azure общего назначения версии 2 и Azure Data Lake Storage 2-го поколения. Зарезервированная емкость является преимуществом выставления счетов и автоматически применяется к новым и существующим развертываниям. Advisor вычисляет оценки для отдельных подписок, используя цены на резервирование в 3 года и закономерности использования за последние 30 дней. Рекомендации по общей области доступны для покупок зарезервированных мощностей и могут повысить экономию.

### <a name="mariadb-mysql-and-postgresql-reserved-capacity"></a>Зарезервированная емкость MariaDB, MySQL и PostgreSQL
Advisor анализирует закономерности использования базы данных Azure для MariaDB, базы данных Azure для MySQL и базы данных Azure для PostgreSQL за последние 30 дней. Затем он рекомендует приобрести зарезервированную емкость, которая оптимизирует затраты. Используя зарезервированную емкость, вы можете предварительно приобрести MariaDB, MySQL и PostgreSQL использование почасового использования и сэкономить ваши текущие затраты. Зарезервированная емкость является преимуществом выставления счетов и автоматически применяется к новым и существующим развертываниям. Advisor вычисляет оценки для отдельных подписок, используя цены на резервирование в 3 года и закономерности использования за последние 30 дней. Рекомендации по общей области доступны для покупок зарезервированных мощностей и могут повысить экономию.

### <a name="synapse-analytics-formerly-sql-data-warehouse-reserved-capacity"></a>Синапсе Analytics (ранее — хранилище данных SQL) зарезервированная емкость
Advisor анализирует шаблоны использования Azure синапсе Analytics за последние 30 дней и рекомендует приобретения зарезервированных мощностей, которые оптимизируют затраты. Используя зарезервированные ресурсы, вы можете предварительно приобрести почасовое использование синапсе Analytics и сэкономить на затратах по запросу. Зарезервированная емкость является преимуществом выставления счетов и автоматически применяется к новым и существующим развертываниям. Advisor вычисляет оценки для отдельных подписок, используя цены на резервирование в 3 года и закономерности использования за последние 30 дней. Рекомендации по общей области доступны для покупок зарезервированных мощностей и могут повысить экономию.

## <a name="delete-unassociated-public-ip-addresses-to-save-money"></a>Удаление несвязанных общедоступных IP-адресов для экономии денег

Advisor определяет общедоступные IP-адреса, которые не связаны с ресурсами Azure, такими как подсистемы балансировки нагрузки и виртуальные машины. С этими общедоступными IP-адресами связана номинальная плата. Если вы не планируете использовать их, вы можете сэкономить деньги, удалив их.

## <a name="delete-azure-data-factory-pipelines-that-are-failing"></a>Удаление конвейеров Фабрики данных Azure, которые завершаются сбоем

Помощник обнаруживает конвейеры фабрики данных Azure, которые повторяются неудачно. Рекомендуется устранить проблемы или удалить конвейеры, если они вам не нужны. Плата взимается за эти конвейеры, даже если они не обслуживаются, пока они не будут работать.

## <a name="use-standard-snapshots-for-managed-disks"></a>Использование стандартных моментальных снимков для управляемых дисков
Чтобы сэкономить 60% затрат, рекомендуется хранить моментальные снимки в стандартном хранилище независимо от типа хранилища родительского диска. Этот параметр используется по умолчанию для моментальных снимков управляемых дисков. Помощник определяет моментальные снимки, хранящиеся в хранилище класса Premium, и рекомендует переход с уровня "Премиум" на хранилище "Стандартный". [Дополнительные сведения о ценах на управляемые диски.](https://aka.ms/aa_manageddisksnapshot_learnmore)

## <a name="use-lifecycle-management"></a>Использование управления жизненным циклом
С помощью анализа количества объектов хранилища BLOB-объектов Azure, общего размера и транзакций помощник определяет, следует ли включить управление жизненным циклом данных на уровне одной или нескольких учетных записей хранения. В нем предлагается создать правила управления жизненным циклом, чтобы автоматически распределять данные в виде холодного или архивного хранилища, чтобы оптимизировать затраты на хранение, сохранив данные в хранилище BLOB-объектов Azure для совместимости приложений.

## <a name="create-an-ephemeral-os-disk-recommendation"></a>Рекомендации по созданию временного диска ОС
[Временный диск ОС](../virtual-machines/windows/ephemeral-os-disks.md) позволяет выполнять следующие задачи: 
- Сэкономьте затраты на хранение дисков ОС. 
- Уменьшите задержку чтения и записи на диск ОС. 
- Быстрое выполнение операций повторного создания образа виртуальной машины путем сброса операционной системы (и временного диска) в исходное состояние.

Рекомендуется использовать временный диск ОС для кратковременных виртуальных машин IaaS или виртуальных машин с рабочими нагрузками без отслеживания состояния. Advisor предоставляет рекомендации для ресурсов, которые могут использовать преимущества временного диска ОС.


## <a name="how-to-access-cost-recommendations-in-azure-advisor"></a>Как получить доступ к рекомендациям по затратам в Azure Advisor

1. Войдите на [портал Azure](https://portal.azure.com).

1. Найдите и выберите [**Advisor**](https://aka.ms/azureadvisordashboard) на любой странице.

1. На панели мониторинга **Advisor** выберите вкладку **затраты** .

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше о рекомендациях Помощника, ознакомьтесь с приведенными ниже материалами.
* [Общие сведения об Azure Advisor](advisor-overview.md)
* [Начало работы с Помощником](advisor-get-started.md)
* [Рекомендации по повышению производительности помощника](advisor-performance-recommendations.md)
* [Рекомендации по высокой доступности Advisor](advisor-high-availability-recommendations.md)
* [Рекомендации по безопасности Advisor](advisor-security-recommendations.md)
* [Рекомендации для оперативной работы Advisor](advisor-operational-excellence-recommendations.md)
