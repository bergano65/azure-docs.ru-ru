---
title: Повышение надежности приложения с помощью помощника
description: Используйте помощник Azure для обеспечения и повышения надежности в критически важных для бизнеса развертываниях Azure.
ms.topic: article
ms.date: 01/29/2019
ms.openlocfilehash: 928e0b098cb2cf117eff40d2257fc79dbe114f85
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85124628"
---
# <a name="improve-the-reliability-of-your-application-by-using-azure-advisor"></a>Повышение надежности приложения с помощью помощника по Azure

Помощник по Azure помогает обеспечить работу критически важных бизнес-приложений и их целостность. Рекомендации по надежности можно получить у помощника на вкладке **надежность** панели мониторинга Advisor.

## <a name="ensure-virtual-machine-fault-tolerance"></a>Обеспечение отказоустойчивости виртуальной машины

Для обеспечения избыточности приложения рекомендуется сгруппировать в группе доступности две или несколько виртуальных машин. Advisor определяет виртуальные машины, которые не входят в группу доступности, и рекомендует переместить их в одну. Эта конфигурация гарантирует, что во время запланированного или незапланированного обслуживания по крайней мере одна виртуальная машина будет доступна и соответствует соглашению об уровне обслуживания для виртуальной машины Azure. Можно создать группу доступности для виртуальной машины или добавить ее в существующую группу доступности.

> [!NOTE]
> Если вы решили создать группу доступности, в нее необходимо добавить хотя бы одну виртуальную машину. Мы рекомендуем объединять в группу доступности не меньше двух виртуальных машин, чтобы обеспечить доступность как минимум одной из них во время сбоя.

## <a name="ensure-availability-set-fault-tolerance"></a>Обеспечение отказоустойчивости группы доступности

Для обеспечения избыточности приложения рекомендуется сгруппировать в группе доступности две или несколько виртуальных машин. Помощник определяет группы доступности, содержащие одну виртуальную машину, и рекомендует добавить в нее одну или несколько виртуальных машин.Эта конфигурация гарантирует, что во время запланированного или незапланированного обслуживания по крайней мере одна виртуальная машина будет доступна и соответствует соглашению об уровне обслуживания для виртуальной машины Azure.Можно создать виртуальную машину или добавить существующую виртуальную машину в группу доступности.  

## <a name="use-managed-disks-to-improve-data-reliability"></a>Использование управляемых дисков для повышения надежности данных

Виртуальные машины, которые находятся в группе доступности с дисками, которые совместно используют учетные записи хранения или единицы масштабирования хранилища, не могут быть устойчивы к сбоям в одном масштабе хранилища во время простоя. Advisor определяет эти наборы доступности и рекомендует переход на управляемые диски Azure. Эта миграция обеспечит достаточную изоляцию дисков виртуальных машин в группе доступности, чтобы избежать единой точки отказа. 

## <a name="check-the-version-of-your-check-point-network-virtual-appliance-image"></a>Проверка версии образа виртуального устройства сети проверки

Помощник может определить, использует ли ваша виртуальная машина версию образа контрольной точки, которая была известна для потери сетевого подключения во время операций обслуживания платформы. Рекомендация помощника поможет выполнить обновление до более новой версии образа, устраняющего эту проблему. Эта проверка обеспечит непрерывность бизнес-процессов благодаря улучшенному подключению к сети.

## <a name="ensure-application-gateway-fault-tolerance"></a>Обеспечение отказоустойчивости шлюза приложений

Эта рекомендация обеспечивает непрерывность работы критически важных приложений, прослушивающих шлюзы приложений. Advisor определяет экземпляры шлюза приложений, которые не настроены на отказоустойчивость. Затем он предлагает действия по исправлению, которые можно выполнить. Помощник определяет средние или крупные шлюзы приложений с одним экземпляром и рекомендует добавить хотя бы еще один экземпляр. Он также определяет шлюзы малых приложений с одним экземпляром и несколькими экземплярами и рекомендует перенести их в средние или крупные номера SKU. Помощник рекомендует эти действия, чтобы убедиться, что экземпляры шлюза приложений настроены для удовлетворения текущих требований соглашения об уровне обслуживания для этих ресурсов.

## <a name="protect-your-virtual-machine-data-from-accidental-deletion"></a>Защита данных виртуальной машины от случайного удаления

Настройка резервного копирования виртуальной машины обеспечивает доступность критически важных бизнес-данных и защиту данных от случайного удаления или повреждения. Advisor определяет виртуальные машины, на которых резервное копирование не включено, и рекомендует включить резервное копирование. 

## <a name="ensure-you-have-access-to-azure-experts-when-you-need-it"></a>При необходимости убедитесь, что у вас есть доступ к экспертам по Azure

При выполнении рабочей нагрузки, критически важной для бизнеса, важно иметь доступ к технической поддержке, когда она вам нужна. Advisor определяет потенциально критически важные для бизнеса подписки, которые не включают техническую поддержку в планы поддержки. Он рекомендует обновить до варианта, включающего в себя техническую поддержку.

## <a name="create-azure-service-health-alerts-to-be-notified-when-azure-problems-affect-you"></a>Создание оповещений о работоспособности службы Azure для уведомления о влиянии проблем Azure

Рекомендуется настроить оповещения о работоспособности служб Azure, чтобы получать уведомления о влиянии проблем служб Azure на вас. Служба [работоспособности служб Azure](https://azure.microsoft.com/features/service-health/) — это бесплатная служба, которая предоставляет персонализированные рекомендации и поддержку в случае возникновения проблем со службой Azure. Advisor определяет подписки, для которых не настроены оповещения, и рекомендует их настраивать.

## <a name="configure-traffic-manager-endpoints-for-resiliency"></a>Настройка конечных точек диспетчера трафика для обеспечения устойчивости

Профили диспетчера трафика Azure с более чем одной конечной точкой имеют более высокий уровень доступности, если любая заданная конечная точка завершается сбоем. Размещение конечных точек в разных регионах дополнительно повышает надежность служб. Помощник определяет профили диспетчера трафика, в которых есть только одна конечная точка, и рекомендует добавить хотя бы еще одну конечную точку в другом регионе.

Если все конечные точки в профиле диспетчера трафика, настроенном для маршрутизации с учетом расположения, находятся в одном регионе, то могут возникнуть задержки при подключении пользователей из других регионов. Добавление или перемещение конечной точки в другом регионе улучшит производительность в целом и обеспечит высокую доступность всех конечных точек в случае сбоя в одном регионе. Помощник определяет профили диспетчера трафика, настроенные для маршрутизации с учетом расположения, в которых все конечные точки находятся в одном и том же регионе. Он рекомендует добавить или переместить конечную точку в другой регион Azure.

Если профиль диспетчера трафика настроен для географической маршрутизации, трафик направляется в конечные точки на основе определенных регионов. В случае сбоя региона предопределенная отработка отказа отсутствует. Если у вас есть конечная точка, в которой региональные группы настроены на **все (мир)**, можно избежать отклонения трафика и повысить доступность службы. Advisor определяет профили диспетчера трафика, настроенные для географической маршрутизации, где нет конечных точек, настроенных для региональной группировки как **все (мир)**. Рекомендуется изменить конфигурацию, чтобы сделать конечную точку **всей (World)**.

## <a name="use-soft-delete-on-your-azure-storage-account-to-save-and-recover-data-after-accidental-overwrite-or-deletion"></a>Использование обратимого удаления в учетной записи хранения Azure для сохранения и восстановления данных после случайной перезаписи или удаления

Включите [обратимое удаление](https://docs.microsoft.com/azure/storage/blobs/storage-blob-soft-delete) в вашей учетной записи хранения, чтобы удалить большие двоичные объекты с возможность восстановления вместо безвозвратного удаления. Когда данные перезаписываются, создается теневая копия обратимого удаления, чтобы сохранить состояние перезаписанных данных. Использование обратимого удаления позволяет восстанавливаться после случайного удаления или перезаписи. Помощник определяет учетные записи хранения Azure, для которых не включено обратимое удаление, и предлагает включить ее.

## <a name="configure-your-vpn-gateway-to-active-active-for-connection-resiliency"></a>Настройте VPN-шлюз на режим "активный — активный" для устойчивости подключения

В конфигурации "активный — активный" оба экземпляра VPN-шлюза устанавливают VPN-туннели S2S на локальное VPN-устройство. Когда событие запланированного обслуживания или незапланированное событие происходит на одном экземпляре шлюза, трафик автоматически переключается на другой активный туннель IPsec. Помощник Azure определяет VPN-шлюзы, которые не настроены как активные — активные, и предлагает настроить их для обеспечения высокой доступности.

## <a name="use-production-vpn-gateways-to-run-your-production-workloads"></a>Использование производственных VPN-шлюзов для выполнения рабочих нагрузок

Помощник Azure проверяет наличие VPN-шлюзов, использующих базовый SKU, и рекомендует вместо этого использовать номер SKU рабочей среды. Базовый SKU предназначен для разработки и тестирования. Предлагаемые производственные SKU:
- Дополнительные туннели. 
- Поддержка BGP. 
- Параметры конфигурации "активный — активный". 
- Пользовательская политика IPSec/IKE. 
- Повышенная стабильность и доступность.

## <a name="repair-invalid-log-alert-rules"></a>Исправить недопустимые правила генерации оповещений журнала

Помощник по Azure обнаруживает правила генерации оповещений, в разделе условий которых указаны недопустимые запросы. Правила генерации оповещений журнала можно создать в Azure Monitor и использовать их для выполнения запросов аналитики через определенные промежутки времени. Результаты запроса определяют, нужно ли запускать оповещение. Запросы аналитики могут стать недопустимыми со временем из-за изменений в ссылочных ресурсах, таблицах или командах. Помощник рекомендует исправить запрос в правиле оповещения, чтобы предотвратить его автоматическое отключение и обеспечить мониторинг ресурсов в Azure. [Дополнительные сведения об устранении неполадок правил оповещений.](https://aka.ms/aa_logalerts_queryrepair)

## <a name="configure-consistent-indexing-mode-on-your-azure-cosmos-db-collection"></a>Настройка режима последовательного индексирования для коллекции Azure Cosmos DB

Настройка Azure Cosmos DB контейнеров с отложенным режимом индексирования может повлиять на актуальность результатов запроса. Advisor обнаруживает контейнеры, настроенные таким образом, и рекомендует переключиться в режим согласованности. [Дополнительные сведения о политиках индексирования см. в Azure Cosmos DB.](https://aka.ms/cosmosdb/how-to-manage-indexing-policy)

## <a name="configure-your-azure-cosmos-db-containers-with-a-partition-key"></a>Настройте контейнеры Azure Cosmos DB с помощью ключа разделов

Помощник Azure определяет Azure Cosmos DB несекционированные коллекции, которые приближается к квотам подготовленного хранилища. Рекомендуется перенести эти коллекции в новые коллекции с определением ключа секции, чтобы их можно было автоматически масштабировать службой. [Дополнительные сведения о выборе ключа секции.](https://aka.ms/cosmosdb/choose-partitionkey)

## <a name="upgrade-your-azure-cosmos-db-net-sdk-to-the-latest-version-from-nuget"></a>Обновление пакета SDK для Azure Cosmos DB .NET до последней версии с NuGet

Помощник Azure определяет Azure Cosmos DB учетные записи, использующие старые версии пакета SDK для .NET. Рекомендуется выполнить обновление до последней версии с NuGet для получения последних исправлений, повышения производительности и возможностей функций. [Дополнительные сведения о Azure Cosmos DB пакете SDK для .NET.](https://aka.ms/cosmosdb/sql-api-sdk-dotnet)

## <a name="upgrade-your-azure-cosmos-db-java-sdk-to-the-latest-version-from-maven"></a>Обновите пакет SDK Java для Azure Cosmos DB до последней версии с сайта Maven

Помощник Azure определяет Azure Cosmos DB учетные записи, использующие старые версии пакета SDK для Java. Рекомендуется выполнить обновление до последней версии с Maven для последних исправлений, повышения производительности и возможностей функций. [Дополнительные сведения о Azure Cosmos DB пакете SDK для Java.](https://aka.ms/cosmosdb/sql-api-sdk-async-java)

## <a name="upgrade-your-azure-cosmos-db-spark-connector-to-the-latest-version-from-maven"></a>Обновление соединителя Azure Cosmos DB Spark до последней версии из Maven

Помощник Azure определяет Azure Cosmos DB учетные записи, использующие старые версии соединителя Azure Cosmos DB Spark. Рекомендуется выполнить обновление до последней версии с Maven для последних исправлений, повышения производительности и возможностей функций. [Дополнительные сведения о соединителе Azure Cosmos DB Spark.](https://aka.ms/cosmosdb/spark-connector)

## <a name="consider-moving-to-kafka-21-on-hdinsight-40"></a>Попробуйте перейти на Kafka 2,1 в HDInsight 4,0

Начиная с 1 июля 2020 вы не сможете создавать новые кластеры Kafka с помощью Kafka 1,1 в Azure HDInsight 4,0. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Попробуйте перейти на Kafka 2,1 в HDInsight 4,0 до 30 июня 2020, чтобы избежать потенциальных прерываний системы и поддержки.

## <a name="consider-upgrading-older-spark-versions-in-hdinsight-spark-clusters"></a>Рекомендуется обновить старые версии Spark в кластерах HDInsight Spark

Начиная с 1 июля 2020 вы не сможете создавать новые кластеры Spark с помощью Spark 2,1 или 2,2 в HDInsight 3,6. Вы не сможете создавать новые кластеры Spark с помощью Spark 2,3 в HDInsight 4,0. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. 

## <a name="enable-virtual-machine-replication"></a>Включение репликации виртуальных машин
Виртуальные машины, для которых не включена репликация в другой регион, не являются устойчивыми к региональным простоям. Репликация виртуальных машин сокращает любые неблагоприятные последствия для бизнеса во время простоя в регионах Azure. Advisor обнаруживает виртуальные машины, на которых репликация не включена, и рекомендует включить ее. При включении репликации в случае сбоя можно быстро подключить виртуальные машины в удаленном регионе Azure. [Дополнительные сведения о репликации виртуальных машин.](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-quickstart)

## <a name="how-to-access-high-availability-recommendations-in-advisor"></a>Как получить доступ к рекомендациям по обеспечению высокой доступности в Advisor

1. Войдите на [портал Azure](https://portal.azure.com) и откройте [Помощник](https://aka.ms/azureadvisordashboard).

2.  На панели мониторинга Advisor перейдите на вкладку **высокий уровень доступности** .

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные сведения о рекомендациях Помощника см. в следующих разделах.
* [Общие сведения об Azure Advisor](advisor-overview.md)
* [Начало работы с Помощником](advisor-get-started.md)
* [Рекомендации по стоимости помощника](advisor-cost-recommendations.md)
* [Рекомендации по повышению производительности помощника](advisor-performance-recommendations.md)
* [Рекомендации по безопасности Advisor](advisor-security-recommendations.md)
* [Рекомендации для оперативной работы Advisor](advisor-operational-excellence-recommendations.md)
