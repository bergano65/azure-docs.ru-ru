---
title: Передняя дверца Azure — мониторинг работоспособности серверной части | Документация Майкрософт
description: Эта статья поможет вам понять, как передняя дверца Azure отслеживает работоспособность ваших серверов.
services: frontdoor
documentationcenter: ''
author: duongau
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/28/2020
ms.author: duau
ms.openlocfilehash: 4cbeea8ad20d41daff3d4ad086a36df5e988991f
ms.sourcegitcommit: 3792cf7efc12e357f0e3b65638ea7673651db6e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/29/2020
ms.locfileid: "91449243"
---
# <a name="health-probes"></a>Пробы работоспособности

Чтобы определить работоспособность и близкость каждого внутреннего сервера к заданной среде передней дверцы, каждая среда с передней дверцей периодически отправляет искусственный запрос HTTP или HTTPS каждому из настроенных серверных систем. Затем передняя дверца использует эти ответы из пробы, чтобы определить наиболее подходящие серверные ресурсы для маршрутизации клиентских запросов. 

> [!WARNING]
> Так как у передней дверцы есть много пограничных сред, объем проверки работоспособности для серверной части может быть довольно высоким в диапазоне от 25 запросов в минуту до 1200 запросов в минуту в зависимости от настроенной частоты проверки работоспособности. При частоте проверки по умолчанию 30 секунд объем проверяемого тома на серверной стороне должен составлять примерно 200 запросов в минуту.

## <a name="supported-protocols"></a>Поддерживаемые протоколы

Front Door поддерживает отправку проб по протоколу HTTP или HTTPS. Эти пробы отправляются через одни и те же TCP-порты, настроенные для маршрутизации клиентских запросов, и их невозможно переопределить.

## <a name="supported-http-methods-for-health-probes"></a>Поддерживаемые методы HTTP для проб работоспособности

Передняя дверца поддерживает следующие методы HTTP для отправки проб работоспособности:

1. **Получить:** Метод GET означает извлечение любой информации (в форме сущности) с помощью URI запроса.
2. **Заголовок:** Метод HEAD идентичен ПОЛУЧЕНию, за исключением того, что сервер не должен возвращать текст сообщения в ответе. Для новых профилей передней дверцы по умолчанию выбран метод проверки HEAD.

> [!NOTE]
> Для более низкой нагрузки и снижения стоимости работы на серверной части первая дверца рекомендует использовать ГОЛОВные запросы для проб работоспособности.

## <a name="health-probe-responses"></a>Ответы проб работоспособности

| Ответы  | Описание | 
| ------------- | ------------- |
| Определение работоспособности  |  Код состояния "200 ОК" указывает, что серверная часть находится в работоспособном состоянии. Все остальные состояния будут считаться сбоем. Если по какой-либо причине (включая сбой сети) не получен допустимый ответ HTTP для пробы, зонд считается неудачным.|
| Измерение задержки  | Задержка — это физическое время, измеренное с момента отправки пробы до момента получения последнего байта ответа. Мы используем новое TCP-подключение для каждого запроса, чтобы это измерение не было смещено в сторону незавершенных соединений с существующими горячими подключениями.  |

## <a name="how-front-door-determines-backend-health"></a>Как Front Door определяет работоспособность серверной части

Для определения работоспособности Передняя дверца Azure использует для всех алгоритмов один и тот же процесс из трех этапов.

1. Исключение отключенных серверных частей.

2. Исключение серверных частей с ошибками пробы работоспособности.
    * Этот можно сделать, просмотрев последние _n_ ответов проб работоспособности. Если по крайней мере _x_ указывают на работоспособное состояние, серверная часть считается работоспособной.

    * _n_ настраивается путем изменения свойства SampleSize в параметрах балансировки нагрузки.

    * _x_ настраивается путем изменения свойства сукцессфулсамплесрекуиред в параметрах балансировки нагрузки.

3. Для наборов исправных серверов в внутреннем пуле Передняя дверца дополнительно измеряет и поддерживает задержку (время приема-передачи) для каждой серверной части.


## <a name="complete-health-probe-failure"></a>Полный сбой пробы работоспособности

При сбое пробы работоспособности для каждой серверной части во внутреннем пуле Front Door считает их работоспособными и направляет трафик методом циклического распределения между ними.

После того как любая Серверная часть вернется в работоспособное состояние, она возобновит нормальную работу алгоритма балансировки нагрузки.

## <a name="disabling-health-probes"></a>Отключение проверок работоспособности

При наличии одной серверной части в серверном пуле можно отключить пробы работоспособности, уменьшая нагрузку на серверную часть приложения. Даже если в внутреннем пуле имеется несколько серверных компонентов, но только один из них находится в включенном состоянии, можно отключить зонды работоспособности.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
