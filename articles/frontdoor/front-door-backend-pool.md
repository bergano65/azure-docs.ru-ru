---
title: Серверы и серверные пулы в службе "Передняя дверца" Azure | Документация Майкрософт
description: В этой статье описывается, какие серверные и внутренние пулы находятся в конфигурации передней дверцы.
services: front-door
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: b764799d3f40cef24a0412ac950026af650d4ec7
ms.sourcegitcommit: d6b68b907e5158b451239e4c09bb55eccb5fef89
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2019
ms.locfileid: "74229029"
---
# <a name="backends-and-backend-pools-in-azure-front-door-service"></a>Серверные системы и серверные пулы в службе Azure Front Door
В этой статье описываются основные понятия о том, как сопоставлять развертывание приложений с помощью службы "Передняя дверца Azure". В нем также объясняются различные термины в конфигурации передней дверцы вокруг серверной части приложения.

## <a name="backends"></a>Серверные системы
Серверная часть равна экземпляру развертывания приложения в регионе. Служба "Передняя дверь" поддерживает серверные части Azure и без Azure, поэтому регион не ограничивается только регионами Azure. Кроме того, это может быть локальный центр обработки данных или экземпляр приложения в другом облаке.

Серверная часть службы "Передняя дверь" ссылается на имя узла или общедоступный IP-адрес вашего приложения, который может обслуживать клиентские запросы. Не следует путать с уровнем базы данных, уровнем хранилища и т. д. Серверные части должны быть просмотрены как общедоступная конечная точка приложения. При добавлении серверной части в серверный пул для передней дверцы необходимо также добавить следующее:

- **Тип узла серверной части**. Тип ресурса, который требуется добавить. Служба "Передняя дверца" поддерживает автообнаружение серверных интерфейсов приложения из службы приложений, облачной службы или хранилища. Если вам нужен другой ресурс в Azure или даже Серверная часть, не относящаяся к Azure, выберите **Пользовательский узел**.

    >[!IMPORTANT]
    >Во время настройки интерфейсы API не проверяют, недоступна ли Серверная часть в средах с передней дверцей. Убедитесь, что передняя дверца может достигать серверной части.

- **Имя узла подписки и**сервера. Если вы не выбрали **Пользовательский узел** для типа узла серверной части, выберите свою серверную часть, выбрав соответствующую подписку и соответствующее имя узла в пользовательском интерфейсе.

- **Заголовок узла внутреннего сервера**. Значение заголовка узла, отправляемое в серверную часть для каждого запроса. Дополнительные сведения см. в разделе [Серверный заголовок узла](#hostheader).

- **Приоритет**. Назначьте приоритеты различным серверным конечным серверам, если вы хотите использовать основную внутреннюю службу службы для всего трафика. Кроме того, предоставьте резервные копии, если первичная или резервная недоступна. Дополнительные сведения см. в разделе [Priority](front-door-routing-methods.md#priority).

- **Вес**. Задайте весовые коэффициенты для различных конечных элементов, чтобы распределить трафик между набором последовательностей, равномерно или пропорционально коэффициентам веса. Дополнительные сведения см. в разделе [веса](front-door-routing-methods.md#weighted).

### <a name = "hostheader"></a>Заголовок узла серверной системы

Запросы, переадресованные передней дверце к серверной части, включают поле заголовка узла, используемое серверной частью для получения целевого ресурса. Значение для этого поля обычно берется из URI серверной системы и содержит узел и порт.

Например, запрос, отправленный для www\.contoso.com, будет иметь заголовок узла www\.contoso.com. Если для настройки серверной части используется портал Azure, значением по умолчанию для этого поля является имя узла серверной части. Если серверная часть — contoso-westus.azurewebsites.net, в портал Azure автоматически заполняемое значение заголовка узла внутреннего сервера будет contoso-westus.azurewebsites.net. Однако если вы используете шаблоны Azure Resource Manager или другой метод без явного задания этого поля, служба "Передняя дверь" отправит входящее имя узла в качестве значения заголовка узла. Если запрос был сделан для www\.contoso.com, а Серверная часть — contoso-westus.azurewebsites.net с пустым полем заголовка, служба "Передняя дверь" настроит заголовок узла как www\.contoso.com.

Для большинства серверных частей приложения (веб-приложения Azure, хранилище больших двоичных объектов и облачные службы) заголовок узла должен соответствовать домену внутреннего сервера. Однако интерфейсный узел, который маршрутизирует на серверную часть, будет использовать другое имя узла, например www\.contoso.azurefd.net.

Если серверной части требуется, чтобы заголовок узла совпадал с именем узла внутреннего сервера, убедитесь, что заголовок узла внутреннего сервера содержит серверную часть имени узла.

#### <a name="configuring-the-backend-host-header-for-the-backend"></a>Настройка заголовка узла серверной системы

Чтобы настроить поле **заголовка внутреннего узла** для серверной части в разделе серверный пул:

1. Откройте ресурс "Передняя дверь" и выберите внутренний пул с серверной частью для настройки.

2. Добавьте серверную часть, если вы этого не сделали, или измените существующую.

3. В поле Заголовок узла серверной части задайте пользовательское значение или оставьте его пустым. Имя узла для входящего запроса будет использоваться в качестве значения заголовка узла.

## <a name="backend-pools"></a>Серверные пулы
Внутренний пул в службе Front дверь ссылается на набор серверных компонентов, которые получают подобный трафик для своего приложения. Иными словами, это логическая группировка экземпляров приложения по всему миру, которые получают одинаковый трафик и отвечают ожидаемому поведению. Эти интерфейсы развертываются в разных регионах или в одном регионе. Все серверные элементы могут находиться в режиме активного или активного развертывания или быть определены как Активная/пассивная конфигурация.

Внутренний пул определяет, как различные серверные части должны оцениваться через зонды работоспособности. Он также определяет, как происходит балансировка нагрузки между ними.

### <a name="health-probes"></a>Пробы работоспособности.
Служба "Передняя дверца" отправляет периодические запросы HTTP/HTTPS на каждый из настроенных серверных систем. Запросы пробы определяют сходство и работоспособность каждой серверной части для балансировки нагрузки запросов конечных пользователей. Параметры проверки работоспособности для внутреннего пула определяют, как мы будем опрашивать состояние работоспособности серверной части приложения. Для конфигурации балансировки нагрузки доступны следующие параметры.

- **Путь**. URL-адрес, используемый для пробных запросов для всех серверных частей внутреннего пула. Например, если один из серверных contoso-westus.azurewebsites.net, а путь имеет значение/пробе/тест.аспкс, то среда службы "Передняя дверца", при условии, что для протокола задано значение HTTP, отправит запросы проверки работоспособности в HTTP\://contoso-westus.azurewebsites.net/probe/test.aspx.

- **Протокол**. Определяет, следует ли отсылать запросы пробы работоспособности от службы Front дверь к серверной части с помощью протокола HTTP или HTTPS.

- **Интервал (в секундах)** . Определяет частоту проверок работоспособности в серверных системах или интервалы, в течение которых каждая из сред передней дверцы отправляет зонд.

    >[!NOTE]
    >Для ускорения отработки отказа установите для интервала меньшее значение. Чем меньше это значение, тем выше объем данных проверки работоспособности, получаемый конечными точками. Например, если для интервала задано значение 30 секунд с 90 средами или точками подключения передней дверцы, каждая серверная часть получит около 3-5 запросов пробы в секунду.

Дополнительные сведения см. в разделе [зонды работоспособности](front-door-health-probes.md).

### <a name="load-balancing-settings"></a>Параметры балансировки нагрузки
Параметры балансировки нагрузки для серверного пула определяют, как оцениваются пробы работоспособности. Эти параметры определяют, является ли Серверная часть работоспособной или неработоспособной. Они также посвящены балансировке нагрузки трафика между различными серверными интерфейсами в внутреннем пуле. Для конфигурации балансировки нагрузки доступны следующие параметры.

- **Размер выборки**. Определяет, сколько примеров проверок работоспособности необходимо учитывать при оценке работоспособности серверной части.

- **Размер выборки успешно выполнен**. Определяет размер выборки, как упоминалось ранее, количество успешных выборок, необходимых для вызова работоспособности серверной части. Например, предположим, что интервал проверки работоспособности передней дверцы составляет 30 секунд, размер выборки равен 5, а успешный размер выборки — 3. Каждый раз, когда оцениваются проверки работоспособности серверной части, мы рассмотрим пять последних выборок за 150 секунд (5 x 30). Для объявления серверной части в качестве работоспособного требуется по крайней мере три успешные проверки.

- **Чувствительность задержки (дополнительная задержка)** . Определяет, должна ли Передняя дверца отправлять запрос на сервер в пределах диапазона чувствительности к измерению задержки или пересылать запрос ближайшему серверу.

Дополнительные сведения см. в разделе [метод маршрутизации на основе минимальной задержки](front-door-routing-methods.md#latency).

## <a name="next-steps"></a>Дополнительная информация

- [Создание профиля передней дверцы](quickstart-create-front-door.md)
- [Принцип работы передней дверцы](front-door-routing-architecture.md)