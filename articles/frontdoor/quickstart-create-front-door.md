---
title: Краткое руководство. Обеспечение высокого уровня доступности в Azure Front Door Service — портал Azure
description: В этом кратком руководстве показано, как использовать Azure Front Door Service для работы с глобальным веб-приложением с высоким уровнем доступности и производительности с помощью портала Azure.
services: front-door
documentationcenter: na
author: duongau
manager: KumudD
Customer intent: As an IT admin, I want to direct user traffic to ensure high availability of web applications.
ms.service: frontdoor
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/16/2020
ms.author: duau
ms.openlocfilehash: 4846438f8479fe622570aa515a4d8b40cccc57b8
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91252312"
---
# <a name="quickstart-create-a-front-door-for-a-highly-available-global-web-application"></a>Краткое руководство. Создание службы Front Door для глобального веб-приложения высокого уровня доступности

Начало работы с Azure Front Door: обеспечение высокого уровня доступности для веб-приложения с помощью портала Azure.

В этом кратком руководстве Azure Front Door объединяет два экземпляра веб-приложения, которые выполняются в разных регионах Azure. Конфигурация Front Door основана на серверных частях с одинаковыми приоритетами и весовыми коэффициентами. Такая конфигурация направляет трафик на тот сайт с приложением, который расположен ближе всего к пользователю. Azure Front Door постоянно отслеживает работу веб-приложения. Эта служба обеспечивает автоматическую отработку отказа на следующий доступный сайт, когда ближайший сайт становится недоступным.

## <a name="prerequisites"></a>Предварительные требования

- Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) бесплатно.

## <a name="create-two-instances-of-a-web-app"></a>Создание двух экземпляров веб-приложения

Для этого краткого руководства потребуются два экземпляра веб-приложения, которые выполняются в разных регионах Azure. Оба экземпляра этого веб-приложения работают в режиме *активный — активный*, то есть любой из них будет принимать трафик. Эта конфигурация отличается от конфигурации *активный — резервный*, когда один из экземпляров используется только для отработки отказа.

Если у вас нет веб-приложения, создайте его, как показано ниже.

1. Войдите на портал Azure по адресу https://portal.azure.com.

1. В верхней левой части экрана выберите **Создать ресурс** >  **WebApp**.

    :::image type="content" source="media/quickstart-create-front-door/front-door-create-web-app.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный" S1, общее число ACU — 100, 1,75 ГБ памяти). |

1. Щелкните **Просмотр и создание**, проверьте раздел **Сводка** и щелкните **Создать**. Развертывание может занять несколько минут.

    :::image type="content" source="media/quickstart-create-front-door/create-web-app.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

Когда развертывание завершится, создайте второе веб-приложение. Повторите ту же процедуру с теми же значениями, за исключением следующих.

| Параметр          | Значение     |
| ---              | ---  |
| **Группа ресурсов**   | Выберите **Создать** и введите *FrontDoorQS_rg2*. |
| **Имя**             | Введите для веб-приложения уникальное имя, в нашем примере это *WebAppContoso-2*.  |
| **Регион**           | В нашем примере это *Центрально-южная часть США*. |
| **План службы приложений** > **План Windows**.         | Выберите **Создать новый** и введите *myAppServicePlanSouthCentralUS*, а затем щелкните **OK**. |

## <a name="create-a-front-door-for-your-application"></a>Создание профиля Front Door для приложения

Создайте в Azure Front Door конфигурацию, которая распределяет трафик пользователей между двумя серверами веб-приложений на основе минимальных значений задержки. Для начала добавьте интерфейсный узел для Azure Front Door.

1. На домашней странице или в меню Azure выберите **Создать ресурс**. Щелкните **Сеть** > **Показать все** > **Front Door**.

1. На странице **Создать Frontdoor** на вкладке **Основные сведения** укажите следующую информацию, а затем выберите **Далее: Конфигурация**.

    | Параметр | Значение |
    | --- | --- |
    | **Подписка** | Выберите свою подписку. |    
    | **Группа ресурсов** | Выберите **Создать** и введите *FrontDoorQS_rg0* в текстовом поле.|
    | **Расположение группы ресурсов** | Выберите **Центральная часть США**. |

1. В разделе **Интерфейсные серверы и домены** выберите **+** , чтобы открыть раздел **Добавление интерфейсного узла**.

1. Введите глобально уникальное имя узла в поле **Имя узла**. В нашем примере это *contoso-frontend*. Нажмите **Добавить**.

    :::image type="content" source="media/quickstart-create-front-door/add-frontend-host-azure-front-door.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

Затем создайте внутренний пул, содержащий два веб-приложения.

1. В том же разделе **Создание профиля Front Door** выберите в поле **Внутренние пулы** значение **+** , чтобы открыть раздел **Добавление внутреннего пула**.

1. В поле **Имя** введите *myBackEndPool*, а затем выберите **Добавление серверного компонента**.

    :::image type="content" source="media/quickstart-create-front-door/front-door-add-backend-pool.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

1. В колонке **Добавление серверного компонента** выберите следующие сведения, а затем нажмите кнопку **Добавить**.

    | Параметр | Значение |
    | --- | --- |
    | **Тип внутреннего узла** | Выберите **Служба приложений**. |   
    | **Подписка** | Выберите свою подписку. |    
    | **Имя внутреннего узла** | Выберите первое созданное веб-приложение. В нашем примере это веб-приложение *WebAppContoso-1*. |

    **Для других полей сохраните значения по умолчанию.*

    :::image type="content" source="media/quickstart-create-front-door/front-door-add-a-backend.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

1. Снова щелкните **Добавление внутреннего компонента**. Выберите следующие сведения и нажмите кнопку **Добавить**.

    | Параметр | Значение |
    | --- | --- |
    | **Тип внутреннего узла** | Выберите **Служба приложений**. |   
    | **Подписка** | Выберите свою подписку. |    
    | **Имя внутреннего узла** | Выберите второе созданное веб-приложение. В нашем примере это веб-приложение *WebAppContoso-2*. |

    **Для других полей сохраните значения по умолчанию.*

1. Выберите **Добавить** в колонке **Добавление серверного пула**, чтобы завершить настройку серверного пула.

    :::image type="content" source="media/quickstart-create-front-door/front-door-add-backend-pool-complete.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

Осталось добавить правило маршрутизации. Это правило маршрутизации сопоставляет интерфейсный узел с внутренним пулом. Правило перенаправляет запросы к адресу `contoso-frontend.azurefd.net` на **myBackendPool**.

1. В том же разделе **Создание профиля Front Door** выберите в разделе **Правила маршрутизации** значение **+** , чтобы настроить правило маршрутизации.

1. В разделе **Добавить правило** введите в поле **Имя** значение *LocationRule*. Сохраните все значения по умолчанию и щелкните **Добавить**, чтобы добавить правило маршрутизации.

    :::image type="content" source="media/quickstart-create-front-door/front-door-add-a-rule.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

   >[!WARNING]
   > **Обязательно** убедитесь, что каждый из интерфейсных узлов в службе Front Door имеет связанное правило маршрутизации с путем по умолчанию (`\*`). Это означает, что среди всех правил маршрутизации должно быть по крайней мере одно правило для каждого из интерфейсных узлов, определенных в пути по умолчанию (`\*`). В противном случае трафик пользователей может маршрутизироваться неправильно.

1. Выберите **Просмотр и создание**, а затем щелкните **Создать**.

    :::image type="content" source="media/quickstart-create-front-door/configuration-azure-front-door.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

## <a name="view-azure-front-door-in-action"></a>Проверка работы Azure Front Door

После создания экземпляра Front Door потребуется несколько минут, чтобы конфигурация была развернута глобально. После завершения перейдите к созданному вами интерфейсному узлу. Для этого откройте в браузере адрес `contoso-frontend.azurefd.net`. Ваш запрос будет автоматически направлен на ближайший к вам сервер из настроенного ранее внутреннего пула с указанными серверами.

Если вы использовали приложения, предложенные для этого быстрого руководства, вы увидите информационную страницу.

Чтобы проверить мгновенную глобальную отработку отказа, сделайте следующее.

1. Откройте браузер и перейдите по следующему адресу интерфейсной части: `contoso-frontend.azurefd.net`.

1. На портале Azure найдите и выберите *Службы приложений*. Прокрутите страницу вниз до одного из настроенных веб-приложений, в нашем примере это **WebAppContoso-1**.

1. Выберите это веб-приложение, щелкните **Остановить** и подтвердите действие, щелкнув **Да**.

1. Обновите свой браузер. Вы увидите ту же самую информационную страницу.

   >[!TIP]
   >Но эти действия могут выполняться с небольшой задержкой. Возможно, нужно будет обновить страницу еще раз.

1. Теперь найдите и остановите второе приложение.

1. Обновите свой браузер. На этот раз вы увидите сообщение об ошибке.

   :::image type="content" source="media/quickstart-create-front-door/web-app-stopped-message.png" alt-text="Создание веб-приложения на портале Azure&quot;:::

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |    
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-1*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** (&quot;Стандартный":::

## <a name="clean-up-resources"></a>Очистка ресурсов

После завершения работы вы можете удалить все созданные элементы. При удалении группы ресурсов полностью удаляется ее содержимое. Если вам больше не нужна эта служба Front Door, удалите все ее ресурсы, чтобы избежать лишних расходов.

1. На портале Azure найдите и выберите элемент **Группы ресурсов** или щелкните **Группы ресурсов** в меню портала Azure.

1. Примените фильтр или прокрутите список, чтобы найти нужную группу ресурсов, в нашем примере это **FrontDoorQS_rg0**.

1. Выберите эту группу ресурсов и щелкните **Удалить группу ресурсов**.

   >[!WARNING]
   >Это действие невозможно отменить.

1. Введите имя группы ресурсов для подтверждения и щелкните **Удалить**.

Повторите эту процедуру для двух других групп.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы можете переходить к следующей статье, где описано добавление личного домена в Front Door.
> [!div class="nextstepaction"]
> [Добавить личный домен](front-door-custom-domain.md)
