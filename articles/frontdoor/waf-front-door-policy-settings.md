---
title: Параметры политики для брандмауэра веб-приложения с помощью передней дверцы Azure
description: Знакомство с брандмауэром веб-приложения (WAF).
services: frontdoor
author: KumudD
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/08/2019
ms.author: kumud
ms.reviewer: tyao
ms.openlocfilehash: 8f51cb6944221416b098a9b953db417053155f1e
ms.sourcegitcommit: fa45c2bcd1b32bc8dd54a5dc8bc206d2fe23d5fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2019
ms.locfileid: "67849105"
---
# <a name="policy-settings-for-web-application-firewall-with-azure-front-door"></a>Параметры политики для брандмауэра веб-приложения с помощью передней дверцы Azure

Политика брандмауэра веб-приложения (WAF) позволяет управлять доступом к веб-приложениям с помощью набора настраиваемых и управляемых правил. Имя политики WAF должно быть уникальным. При попытке использовать существующее имя вы получите ошибку проверки. Существует несколько параметров уровня политики, которые применяются ко всем правилам, указанным для этой политики, как описано в этой статье.

## <a name="waf-state"></a>Состояние WAF

Политика WAF для передней дверцы может находиться в одном из следующих двух состояний:
- **Включено**. Если политика включена, WAF активно проверяет входящие запросы и выполняет соответствующие действия в соответствии с определениями правил.
- **Отключено.** если политика отключена, проверка WAF приостанавливается. Входящие запросы будут обходить WAF и отправляются на серверные части на основе маршрутизации на передней дверце.

## <a name="waf-mode"></a>Режим WAF

Политику WAF можно настроить для запуска в следующих двух режимах:

- **Режим обнаружения** При запуске в режиме обнаружения WAF не принимает никаких действий, кроме Monitor, и регистрирует запрос и соответствующее правило WAF в журналах WAF. Включите диагностику ведения журнала для передней дверцы (при использовании портала это можно сделать, перейдя к разделу **Диагностика** в портал Azure).

- **Режим предотвращения** Если настроено выполнение в режиме предотвращения, WAF выполняет указанное действие, если запрос соответствует правилу. Все совпадающие запросы также регистрируются в журналах WAF.

## <a name="waf-response-for-blocked-requests"></a>WAF ответ для заблокированных запросов

По умолчанию, когда WAF блокирует запрос из-за сопоставленного правила, он возвращает код состояния 403 с параметром- **запрос блокирует** сообщение. Для ведения журнала также возвращается строка ссылки.

Вы можете определить пользовательский код состояния ответа и ответное сообщение, если запрос заблокирован WAF. Поддерживаются следующие настраиваемые коды состояния:

- 200 ОК
- 403 запрещено
- метод 405 не разрешен
- 406 неприемлемо
- 429. слишком много запросов

Код состояния настраиваемого ответа и ответное сообщение являются параметром уровня политики. После настройки все заблокированные запросы получают одно и то же состояние пользовательского ответа и ответное сообщение.

## <a name="uri-for-redirect-action"></a>Универсальный код ресурса (URI) для действия перенаправления

Необходимо определить универсальный код ресурса (URI) для перенаправления запросов,  если для любого из правил, содержащихся в политике WAF, выбрано действие перенаправления. Этот URI перенаправления должен быть допустимым сайтом HTTP (S) и после настройки. все запросы, соответствующие правилам с действием "перенаправление", будут перенаправляться на указанный сайт.


## <a name="next-steps"></a>Следующие шаги
- Узнайте, как определить [пользовательские ответы](waf-front-door-configure-custom-response-code.md) WAF
