---
title: Передняя дверца Azure — перенаправление URL-адресов | Документация Майкрософт
description: Эта статья поможет вам понять, как передняя дверца Azure поддерживает перенаправление URL-адресов для правил маршрутизации.
services: front-door
documentationcenter: ''
author: duongau
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/28/2020
ms.author: duau
ms.openlocfilehash: 61077c7900530fd4c5be64054bedd9c5d087fe77
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91442045"
---
# <a name="url-redirect"></a>Перенаправление URL-адреса
Передняя дверца Azure может перенаправлять трафик на каждом из следующих уровней: протокол, имя узла, путь, строка запроса. Эти возможности можно настроить для отдельных микрослужб, так как перенаправление основано на пути. Это может упростить настройку приложений за счет оптимизации использования ресурсов и поддерживает новые сценарии перенаправления, включая глобальное перенаправление на основе пути.
</br>

:::image type="content" source="./media/front-door-url-redirect/front-door-url-redirect.png" alt-text="Перенаправление URL-адреса передней дверцы Azure":::

## <a name="redirection-types"></a>Типы перенаправлений
Тип перенаправления задает код состояния ответа для клиентов, чтобы понять назначение перенаправления. Поддерживаются следующие типы перенаправления:

- **301 (перемещен навсегда)**: указывает, что целевому ресурсу был назначен новый постоянный URI. Все будущие ссылки на этот ресурс будут использовать один из заключенных в него URI. Используйте код состояния 301 для перенаправления HTTP в HTTPS. 
- **302 (найдено)**: указывает, что целевой ресурс временно находится под другим URI. Так как перенаправление может измениться в некоторых случаях, клиент должен продолжать использовать действующий URI запроса для будущих запросов.
- **307 (временное перенаправление)**: указывает, что целевой ресурс временно находится под другим URI. Агент пользователя не должен изменять метод запроса, если он выполняет автоматическое перенаправление на этот URI. Так как перенаправление может измениться со временем, клиент должен продолжать использовать исходный действующий URI запроса для будущих запросов.
- **308 (постоянное перенаправление)**: указывает, что целевому ресурсу был назначен новый постоянный URI. Все будущие ссылки на этот ресурс должны использовать один из заключенных в него URI.

## <a name="redirection-protocol"></a>Протокол перенаправления
Можно задать протокол, который будет использоваться для перенаправления. Наиболее распространенными вариантами использования функции перенаправления является установка перенаправления HTTP на HTTPS.

- **Только HTTPS**. Установите протокол только для протокола HTTPS, если хотите перенаправить трафик с HTTP на HTTPS. Передняя дверца Azure рекомендует всегда устанавливать перенаправление только по протоколу HTTPS.
- **Только HTTP**: перенаправляет входящий запрос на HTTP. Используйте это значение только в том случае, если необходимо обеспечить незашифрованный трафик HTTP.
- **Запрос Match**. Этот параметр сохраняет протокол, используемый входящим запросом. Таким образом, HTTP-запрос остается в формате HTTP, а HTTPS-запрос — после перенаправления HTTPS.

## <a name="destination-host"></a>Узел назначения
В рамках настройки маршрутизации перенаправления можно также изменить имя узла или домен для запроса на перенаправление. Это поле можно задать, чтобы изменить имя узла в URL-адресе для перенаправления или иным образом сохранить имя узла из входящего запроса. Таким образом, с помощью этого поля можно перенаправить все запросы, отправленные в `https://www.contoso.com/*` `https://www.fabrikam.com/*` .

## <a name="destination-path"></a>Конечный путь
В случаях, когда необходимо заменить сегмент пути URL-адреса в рамках перенаправления, можно задать для этого поля новое значение пути. В противном случае можно сохранить значение пути как часть перенаправления. Таким образом, с помощью этого поля можно перенаправить все запросы, отправленные в `https://www.contoso.com/\*`  `https://www.contoso.com/redirected-site` .

## <a name="query-string-parameters"></a>Параметры строки запроса
Можно также заменить параметры строки запроса в URL-адресе перенаправления. Чтобы заменить любую существующую строку запроса из URL-адреса входящего запроса, установите для этого поля значение "заменить", а затем задайте нужное. В противном случае можно сохранить исходный набор строк запроса, задав для поля значение "preserve". Например, с помощью этого поля можно перенаправить весь трафик, отправленный `https://www.contoso.com/foo/bar` в `https://www.contoso.com/foo/bar?&utm_referrer=https%3A%2F%2Fwww.bing.com%2F` . 

## <a name="destination-fragment"></a>Фрагмент места назначения
Фрагмент назначения — это часть URL-адреса после "#", которая используется браузером для указания определенного раздела веб-страницы. Это поле можно задать, чтобы добавить фрагмент в URL-адрес перенаправления.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
