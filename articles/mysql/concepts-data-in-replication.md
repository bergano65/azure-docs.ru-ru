---
title: Репликация данных — база данных Azure для MySQL
description: Сведения об использовании репликации данных для синхронизации с внешнего сервера в службе "база данных Azure для MySQL".
author: ajlam
ms.author: andrela
ms.service: mysql
ms.topic: conceptual
ms.date: 8/7/2020
ms.openlocfilehash: 9212142ff6f43a84b141b0781fbe9828eebcbd40
ms.sourcegitcommit: f5580dd1d1799de15646e195f0120b9f9255617b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/29/2020
ms.locfileid: "91537163"
---
# <a name="replicate-data-into-azure-database-for-mysql"></a>Репликация данных в базу данных Azure для MySQL

Репликация входных данных позволяет синхронизировать данные с внешнего сервера MySQL в службу Базы данных Azure для MySQL. Внешний сервер может быть локальным, на виртуальных машинах или в службе базы данных, размещенной другими поставщиками облачных служб. Репликация входных данных основана на функции собственной репликации в MySQL на основе позиции файла двоичного журнала (binlog). Дополнительные сведения о репликации binlog MySQL см. в [этой статье](https://dev.mysql.com/doc/refman/5.7/en/binlog-replication-configuration-overview.html). 

## <a name="when-to-use-data-in-replication"></a>Когда следует использовать репликацию входных данных
Ниже приведены основные сценарии применения репликации входных данных.

- **Гибридная синхронизация данных.** С помощью репликации входных данных можно обеспечить синхронизацию данных между локальными серверами и базой данных Azure для MySQL. Эта синхронизация полезна при создании гибридных приложений. Этот метод удобен, если у вас есть локальный сервер базы данных, но вы хотите переместить данные в регион, который расположен ближе к пользователям.
- **Многооблачная синхронизация.** Для сложных облачных решений репликацию входных данных можно использовать, чтобы синхронизировать данные между базой данных Azure для MySQL и различными облачными поставщиками, включая виртуальные машины и службы баз данных, размещенные в этих облаках.
 
Для сценариев миграции используйте [Azure Database Migration Service](https://azure.microsoft.com/services/database-migration/)(DMS).

## <a name="limitations-and-considerations"></a>Рекомендации и ограничения

### <a name="data-not-replicated"></a>Нереплицируемые данные
[*Системная база данных MySQL*](https://dev.mysql.com/doc/refman/5.7/en/system-schema.html) на исходном сервере не реплицирована. Изменения учетных записей и разрешений на исходном сервере не реплицируются. Если вы создаете учетную запись на исходном сервере и эта учетная запись должна иметь доступ к серверу реплики, вручную создайте ту же учетную запись на стороне сервера реплики. Чтобы узнать, какие таблицы хранятся в системной базе данных, ознакомьтесь с [руководством по MySQL](https://dev.mysql.com/doc/refman/5.7/en/system-schema.html).

### <a name="filtering"></a>Фильтрация
Чтобы пропустить репликацию таблиц с исходного сервера (размещенных локально, на виртуальных машинах или в службе базы данных, размещенной другими поставщиками облачных служб), `replicate_wild_ignore_table` параметр поддерживается. При необходимости обновите этот параметр на сервере реплики, размещенном в Azure, с помощью [портал Azure](howto-server-parameters.md) или [Azure CLI](howto-configure-server-parameters-using-cli.md).

Чтобы узнать больше об этом параметре, ознакомьтесь с документацией по [MySQL](https://dev.mysql.com/doc/refman/8.0/en/replication-options-replica.html#option_mysqld_replicate-wild-ignore-table).

### <a name="requirements"></a>Требования
- Версия исходного сервера должна быть не ниже MySQL версии 5,6. 
- Версии сервера исходной и реплики должны быть одинаковыми. Например, на обоих должна быть система MySQL версии 5.6 или 5.7.
- Каждая таблица должна иметь первичный ключ.
- На исходном сервере должен использоваться модуль MySQL InnoDB Engine.
- Пользователь должен иметь разрешения на настройку ведения журнала в двоичном формате и создание новых пользователей на исходном сервере.
- Если на исходном сервере включен протокол SSL, убедитесь, что сертификат ЦС SSL, предоставленный для домена, включен в `mysql.az_replication_change_master` хранимую процедуру. См. следующие [примеры](https://docs.microsoft.com/azure/mysql/howto-data-in-replication#link-master-and-replica-servers-to-start-data-in-replication) и `master_ssl_ca` параметр.
- Убедитесь, что IP-адрес исходного сервера добавлен в базу данных Azure для правил брандмауэра сервера реплики MySQL. Измените правила брандмауэра на [портале Azure](https://docs.microsoft.com/azure/mysql/howto-manage-firewall-using-portal) или с помощью [Azure CLI](https://docs.microsoft.com/azure/mysql/howto-manage-firewall-using-cli).
- Убедитесь, что компьютер, на котором размещается исходный сервер, допускает входящий и исходящий трафик через порт 3306.
- Убедитесь, что исходный сервер имеет **общедоступный IP-адрес**, DNS является общедоступным или имеет полное доменное имя (FQDN).

### <a name="other"></a>Другое
- Репликация данных поддерживается только в ценовых категориях общего назначения и с оптимизацией для операций в памяти.
- Идентификаторы глобальных транзакций (GTID) не поддерживаются.

## <a name="next-steps"></a>Дальнейшие действия
- Узнайте, как [настроить репликацию данных](howto-data-in-replication.md)
- Дополнительные сведения см. в статье [Реплики чтения в базе данных Azure для MySQL](concepts-read-replicas.md).
- Сведения о [переносе данных с минимальным временем простоя с помощью DMS](howto-migrate-online.md)