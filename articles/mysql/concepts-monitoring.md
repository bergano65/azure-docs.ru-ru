---
title: Мониторинг — база данных Azure для MySQL
description: В этой статье описываются метрики для мониторинга и создания предупреждений в базе данных Azure для MySQL, включая ЦП, хранилище и статистику подключений.
author: savjani
ms.author: pariks
ms.service: mysql
ms.topic: conceptual
ms.custom: references_regions
ms.date: 10/21/2020
ms.openlocfilehash: 5b818068c2aab045b46b34d408a93b7cb3df15c7
ms.sourcegitcommit: 6ab718e1be2767db2605eeebe974ee9e2c07022b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2020
ms.locfileid: "94537702"
---
# <a name="monitoring-in-azure-database-for-mysql"></a>Мониторинг в базе данных Azure для MySQL
Мониторинг данных о серверах помогает устранять неполадки и оптимизировать рабочую нагрузку. База данных Azure для MySQL предоставляет различные метрики, позволяющие понять действия сервера.

## <a name="metrics"></a>Метрики
Все метрики Azure записываются ежеминутно, и каждая из них предоставляет данные за последние 30 дней. Вы можете настроить оповещения на основе метрик. Пошаговые инструкции см. в статье [Использование портала Azure для настройки оповещений на основе метрик для базы данных Azure для MySQL](howto-alert-on-metric.md). Другие задачи включают настройку автоматических действий, выполнение расширенной аналитики и архивирование журнала. Дополнительные сведения см. в статье [Обзор метрик в Microsoft Azure](../azure-monitor/platform/data-platform.md).

### <a name="list-of-metrics"></a>Список метрик
Для базы данных Azure для MySQL доступны следующие метрики:

|Метрика|Отображаемое имя метрики|Единицы|Описание|
|---|---|---|---|
|cpu_percent|Нагрузка ЦП|Процент|Процент используемого ЦП.|
|memory_percent|Процент памяти|Процент|Процент используемой памяти.|
|io_consumption_percent|Процент ввода-вывода данных|Процент|Процент используемых операций ввода-вывода. (Неприменимо для серверов уровня Basic)|
|storage_percent|Storage percentage|Процент|Процент использованного объема хранилища сервера (от максимального объема).|
|storage_used|Storage used|Байты|Используемый объем хранилища. Хранилище, используемое службой, может содержать файлы базы данных, журналы транзакций и журналы сервера.|
|serverlog_storage_percent|Процент хранилища для журнала сервера|Процент|Процент использованного объема хранилища журнала сервера (от максимального объема).|
|serverlog_storage_usage|Используемый объем хранилища для журнала сервера|Байты|Используемый объем хранилища журнала сервера.|
|serverlog_storage_limit|Максимальный объем хранилища для журнала сервера|Байты|Максимальный объем хранилища журнала сервера для этого сервера.|
|storage_limit|Storage limit|Байты|Максимальный объем хранилища для этого сервера.|
|active_connections|Активные подключения|Count|Число активных подключений к серверу.|
|connections_failed|Неудачные подключения|Count|Число неудачных попыток подключения к серверу.|
|seconds_behind_master|Задержка репликации в секундах|Count|Количество секунд, в течение которых сервер реплики задержкой на исходном сервере. (Неприменимо для серверов уровня Basic)|
|network_bytes_egress|Сеть (исходящий трафик)|Байты|Исходящий сетевой трафик по активным подключениям.|
|network_bytes_ingress|Сеть (входящий трафик)|Байты|Входящий сетевой трафик по активным подключениям.|
|backup_storage_used|Используемое хранилище резервных копий|Байты|Объем используемого хранилища резервных копий. Эта метрика представляет собой сумму хранилища, потребляемого всеми полными резервными копиями базы данных, разностными резервными копиями и резервными копиями журналов на основе срока хранения резервной копии, заданного для сервера. Периодичность резервного копирования управляется службой и описывается в [статье основные понятия](concepts-backup.md). Для геоизбыточного хранилища использование хранилища резервных копий в два раза больше, чем локально избыточное хранилище.|

## <a name="server-logs"></a>Журналы сервера
На сервере можно включить низкую регистрацию запросов и аудита. Эти журналы также доступны в журналах диагностики Azure в Azure Monitor журналов, концентраторах событий и учетной записи хранения. Дополнительные сведения о ведении журналов см. в статьях [журналы аудита](concepts-audit-logs.md) и [журналы медленных запросов](concepts-server-logs.md) .

## <a name="query-store"></a>Хранилище запросов
[Хранилище запросов](concepts-query-store.md) — это функция, которая отслеживает производительность запросов с течением времени, включая статистику времени выполнения запросов и события ожидания. Эта функция сохраняет сведения о производительности среды выполнения запросов в схеме **MySQL** . Вы можете управлять процессами сбора и хранения данных с помощью различных приспособлений конфигурации.

## <a name="query-performance-insight"></a>Анализ производительности запросов
Средство [Анализ производительности запросов](concepts-query-performance-insight.md) работает совместно с хранилищем запросов для предоставления визуализаций, доступных на портале Azure. Эти диаграммы позволяют определить основные запросы, влияющие на производительность. Анализ производительности запросов доступен в разделе " **Интеллектуальная производительность** " на странице портала сервера базы данных Azure для MySQL.

## <a name="performance-recommendations"></a>Рекомендации по производительности
Функция [Рекомендации по производительности](concepts-performance-recommendations.md) определяет возможности для повышения производительности рабочей нагрузки. Рекомендации по производительности предоставляют рекомендации по созданию новых индексов, которые могут повысить производительность рабочих нагрузок. Для создания рекомендаций по индексам эта функция учитывает различные характеристики базы данных, включая ее схемы и рабочую нагрузку по данным хранилища запросов. После реализации любой из рекомендаций по повышению производительности клиенты должны протестировать производительность, чтобы оценить результаты внесенных изменений.

## <a name="planned-maintenance-notification"></a>Уведомление о плановом обслуживании

[Уведомления о плановом обслуживании](./concepts-planned-maintenance-notification.md) позволяют получать оповещения о запланированном обслуживании для базы данных Azure для MySQL. Эти уведомления интегрируются с плановым обслуживанием [работоспособности служб](../service-health/overview.md) и позволяют просматривать все запланированные профилактические работы для подписок в одном месте. Он также помогает масштабировать уведомление до нужных аудиторий для разных групп ресурсов, так как у вас могут быть разные контакты, ответственные за различные ресурсы. Вы получите уведомление о предстоящем обслуживании 72 часов перед событием.

Дополнительные сведения о настройке уведомлений см. в документе [уведомления о запланированном обслуживании](./concepts-planned-maintenance-notification.md) .

## <a name="next-steps"></a>Дальнейшие действия
- См. рекомендации по созданию оповещений для метрики в статье [Как настраивать оповещения](howto-alert-on-metric.md).
- Дополнительные сведения о доступе к метрикам и их экспорте с помощью портала Azure, REST API или интерфейса командной строки см. в статье [Обзор метрик в Microsoft Azure](../azure-monitor/platform/data-platform.md).
- Читайте наш блог, чтобы ознакомиться с [рекомендациями по мониторингу сервера](https://azure.microsoft.com/blog/best-practices-for-alerting-on-metrics-with-azure-database-for-mysql-monitoring/).
- Дополнительные сведения о [запланированных уведомлениях об обслуживании](./concepts-planned-maintenance-notification.md) в базе данных Azure для MySQL — один сервер