---
title: Тестовый выпуск Azure Resource Manager | Документация Майкрософт
description: Создание тестового выпуска для Marketplace с помощью Azure Resource Mаnager
services: Azure, Marketplace, Cloud Partner Portal,
documentationcenter: ''
author: pbutlerm
manager: Patrick .Butler
editor: ''
ms.assetid: ''
ms.service: marketplace
ms.workload: ''
ms.tgt_pltfrm: ''
ms.devlang: ''
ms.topic: conceptual
ms.date: 09/13/2018
ms.author: pbutlerm
ms.openlocfilehash: 2fe1a1fc1ff82415a5c2f88c72ae707b12cd5283
ms.sourcegitcommit: cf971fe82e9ee70db9209bb196ddf36614d39d10
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2019
ms.locfileid: "58541168"
---
# <a name="azure-resource-manager-test-drive"></a>Тестовый выпуск Azure Resource Manager

Эта статья предназначена для издателей, размещающих свое приложение в Azure Marketplace, а также для тех, кто пользуется AppSource, но намерен создать тестовый выпуск с использованием только ресурсов Azure.

Шаблон диспетчера ресурсов Azure (Resource Manager) — это закодированный контейнер ресурсов Azure, разработать для рекомендации представляют собой решения. Если вы не знакомы с какой шаблон Resource Manager —, специально изучайте [основные сведения о шаблонах Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview) и [Создание шаблонов диспетчера ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) чтобы убедиться, что вы знаете, как выполнить сборку и тестирование пользовательские шаблоны.

Тестовый выпуск принимает указанный шаблон Resource Manager и выполняет развертывание всех необходимых ресурсов из этого шаблона в группу ресурсов.

Если вы решили создать тестовый выпуск Azure Resource Manager, необходимо выполнить следующие требования.

- Создать, протестировать, а затем отправить свой шаблон тестового выпуска Resource Manager.
- Настроить все необходимые метаданные и параметры, чтобы включить тестовый выпуск.
- Повторно опубликовать предложение с включенным тестовым выпуском.

## <a name="how-to-build-an-azure-resource-manager-test-drive"></a>Создание тестового выпуска Azure Resource Manager

Ниже приведен процесс построения привода тестового диспетчера ресурсов Azure.

1. Проектирование, то, что нужно пользователям сделать на схеме потока.
1. Определите, какие возможности вы хотите вашим клиентам возможность создавать.
1. Исходя из определений, решить, какие элементы и ресурсы требуются для клиентов для выполнения такой работы: например, экземпляр D365 или веб-сайт с базой данных.
1. Сборки локально для разработки и тестирования процесс.
1. Пакет опыт в развертывании шаблона ARM, а также из него:
    1. Определить, какие части ресурсов являются входными параметрами;
    1. Что такое переменные;
    1. Какие выходные данные, предоставленные качество обслуживания клиентов.
1. Опубликуйте, тестирования и запущен.

Самая важная часть создания тестового выпуска Azure Resource Manager — определение сценариев, по которым должны работать ваши клиенты. Ваш продукт представляет собой брандмауэр и вы хотите продемонстрировать, насколько хорошо он справляется с атаками путем внедрения сценариев? Ваш продукт связан с хранением данных и нужно показать, насколько быстро и легко ваше решение сжимает файлы?

Убедитесь в том, что тратить достаточное количество времени оценке, Каковы лучшие способы продемонстрировать ваш продукт. В частности вокруг все необходимые ресурсы потребовалось бы, как это средство упрощает упаковки достаточно простой шаблон Resource Manager.

В продолжение нашего примера с брандмауэром: архитектура может быть такой, что вам потребуется URL-адрес с общедоступным IP-адресом для службы, а также еще один URL-адрес с общедоступным IP-адресом — для веб-сайта, который защищен брандмауэром. Каждый IP-адрес развертывается на виртуальной машине и связывается с группой безопасности сети и сетевым интерфейсом.

После создания нужного пакета ресурсов, теперь поставляется, записи и создание шаблона тестового диспетчера ресурсов диска.

## <a name="writing-test-drive-resource-manager-templates"></a>Написание шаблонов тестового выпуска Azure Resource Manager

Тестовый выпуск выполняет развертывания в полностью автоматическом режиме, поэтому в шаблонах тестового выпуска шаблона действуют некоторые ограничения, описанные ниже.

### <a name="parameters"></a>Параметры

Большинство шаблонов содержат набор параметров. Параметры определяют имена ресурсов, размеры ресурсов (например, типы учетных записей хранения или размеры виртуальных машин), имена пользователей и пароли, DNS-имена и т. д. При развертывании решений с помощью портала Azure можно вручную заполнить все эти параметры, выбрать доступные DNS-имена или имена учетных записей хранения и так далее.

![Список параметров в Azure Resource Manager](./media/azure-resource-manager-test-drive/param1.png)

Тем не менее тестовый выпуск работает в полностью автоматическом режиме, без участия пользователя, поэтому он поддерживает только ограниченный набор категорий параметров. Если параметр в шаблоне тестового выпуска Resource Manager не относится к одной из поддерживаемых категорий, необходимо **заменить этот параметр значением переменной или константы**.

Для параметров можно использовать любое допустимое имя. Тестовый выпуск распознает категорию параметра по значению типа метаданных. **Необходимо указать тип метаданных для каждого параметра шаблона**, в противном случае шаблон не пройдет проверку:

```json
"parameters": {
  ...
  "username": {
    "type": "string",
    "metadata": {
      "type": "username"
    }
  },
  ...
}
```

Также важно отметить, что **все параметры являются необязательными**, поэтому, если какой-либо из них использовать нежелательно, этого делать не нужно.

### <a name="accepted-parameter-metadata-types"></a>Допустимые типы метаданных параметров

| Тип метаданных   | Тип параметра  | ОПИСАНИЕ     | Образец значения    |
|---|---|---|---|
| **baseuri**     | строка          | Базовый универсальный код ресурса (URI) пакета развертывания| https:\//\<\..\>.blob.core.windows.net/\<\..\> |
| **username**    | строка          | Новое случайное имя пользователя.| admin68876      |
| **password**    | защищенная строка    | Новый случайный пароль | Lp!ACS\^2kh     |
| **session id**   | строка          | Уникальный идентификатор сеанса тестового выпуска (GUID)    | b8c8693e-5673-449c-badd-257a405a6dee |

#### <a name="username"></a>Имя пользователя

Тестовый выпуск инициализирует этот параметр с помощью **базового URI** пакета развертывания, поэтому с помощью этого параметра можно создать URI любого файла, включенного в пакет.

```json
"parameters": {
  ...
  "baseuri": {
    "type": "string",
    "metadata": {
      "type": "baseuri",
      "description": "Base Uri of the deployment package."
    }
  },
  ...
}
```

Внутри шаблона этот параметр можно использовать для создания URI любого файла из пакета развертывания тестового выпуска. В приведенном ниже примере показано, как построить URI связанного шаблона:

```json
"templateLink": {
  "uri": "[concat(parameters('baseuri'),'templates/solution.json')]",
  "contentVersion": "1.0.0.0"
}
```

#### <a name="username"></a>Имя пользователя

Тестовый выпуск инициализирует этот параметр с помощью нового случайного имени пользователя:

```json
"parameters": {
  ...
  "username": {
    "type": "string",
    "metadata": {
      "type": "username",
      "description": "Solution admin name."
    }
  },
  ...
}
```

Пример значения:

    admin68876

Для вашего решения можно задействовать как случайные, так и постоянные имена пользователей.

#### <a name="password"></a>password

Тестовый выпуск инициализирует этот параметр с помощью нового случайного пароля:

```json
"parameters": {
  ...
  "password": {
    "type": "securestring",
    "metadata": {
      "type": "password",
      "description": "Solution admin password."
    }
  },
  ...
}
```

Пример значения:

    Lp!ACS^2kh

Для вашего решения можно задействовать как случайные, так и постоянные пароли.

#### <a name="session-id"></a>session ID

Тестовый выпуск инициализирует этот параметр с помощью уникального идентификатора GUID, который представляет собой идентификатор сеанса тестового выпуска:

```json
"parameters": {
  ...
  "sessionid": {
    "type": "string",
    "metadata": {
      "type": "sessionid",
      "description": "Unique Test Drive session id."
    }
  },
  ...
}
```

Пример значения:

    b8c8693e-5673-449c-badd-257a405a6dee

Этот параметр при необходимости можно использовать для уникальной идентификации сеанса тестового выпуска.

### <a name="unique-names"></a>Уникальные имена

Для некоторых ресурсов Azure, например учетных записей хранения или DNS-имен, требуются глобально уникальные имена.

Это означает, что каждый раз, когда тестовый выпуск развертывает шаблон Resource Manager, он создает **новую группу ресурсов с уникальным именем** для всех ее\' ресурсов. Поэтому необходимо использовать функцию [uniquestring](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-functions#uniquestring), сцепленную с именами переменных в идентификаторах групп ресурсов, чтобы создавать случайные уникальные значения:

```json
"variables": {
  ...
  "domainNameLabel": "[concat('contosovm',uniquestring(resourceGroup().id))]",
  "storageAccountName": "[concat('contosodisk',uniquestring(resourceGroup().id))]",
  ...
}
```

Не забудьте сцепить строки параметров (значений) (\'contosovm\') с уникальными строковыми выходными данными (\'resourceGroup().id\'), так как это гарантирует уникальность и надежность каждой переменной.

Например, большинство имен ресурсов не могут начинаться с цифры, но уникальная строковая функция может вернуть строку, которая начинается с цифры. Таким образом, при использовании необработанных уникальных строковых выходных данных развертывание завершится ошибкой. 

Дополнительные сведения о правилах и ограничениях именования ресурсов можно найти в [этой статье](https://docs.microsoft.com/azure/guidance/guidance-naming-conventions).

### <a name="deployment-location"></a>Расположение развертывания

Тестовый выпуск можно сделать доступным в разных регионах Azure. Идея в том, чтобы позволить пользователю выбрать ближайший регион для максимального удобства работы.

Когда тестовый выпуск создает экземпляр лаборатории, он всегда создает группу ресурсов в регионе, выбранном пользователем, а затем выполняет шаблон развертывания в контексте этой группы. Таким образом, шаблон должен выбирать расположение развертывания из группы ресурсов:

```json
"variables": {
  ...
  "location": "[resourceGroup().location]",
  ...
}
```

А затем использовать это расположение для каждого ресурса в конкретном экземпляре лаборатории:

```json
"resources": [
  {
    "type": "Microsoft.Storage/storageAccounts",
    "location": "[variables('location')]",
    ...
  },
  {
    "type": "Microsoft.Network/publicIPAddresses",
    "location": "[variables('location')]",
    ...
  },
  {
    "type": "Microsoft.Network/virtualNetworks",
    "location": "[variables('location')]",
    ...
  },
  {
    "type": "Microsoft.Network/networkInterfaces",
    "location": "[variables('location')]",
    ...
  },
  {
    "type": "Microsoft.Compute/virtualMachines",
    "location": "[variables('location')]",
    ...
  }
]
```

Необходимо гарантировать, что подписка может развернуть все ресурсы, которые нужно развернуть в каждом из выбранных вами регионов. Также необходимо убедиться, что образы виртуальных машин доступны во всех регионах, которые планируется включить. В противном случае шаблон развертывания не будет работать в некоторых регионах.

### <a name="outputs"></a>outputs

Обычно с помощью шаблонов Resource Manager можно выполнить развертывание без выходных данных. Причина в том, что вам известны все значения, используемые для заполнения параметров шаблона, и всегда можно вручную проверить свойства любого ресурса.

Однако для шаблонов тестового выпуска Resource Manager важно возвращать тестовому выпуску все сведения, которые ему требуются для получения доступа к лаборатории (URI веб-сайтов, имена узлов виртуальных машин, имена пользователей и пароли). Убедитесь, что все имена выходных данных доступны для чтения, так как эти переменные будут представлены клиенту.

Для выходных данных шаблона отсутствуют ограничения. Следует только помнить, что тестовый выпуск преобразует все выходные значения в **строки**, поэтому, если вы отправите в выходные данные какой-либо объект, пользователь увидит строку JSON.

Пример:

```json
"outputs": {
  "Host Name": {
    "type": "string",
    "value": "[reference(variables('pubIpId')).dnsSettings.fqdn]"
  },
  "User Name": {
    "type": "string",
    "value": "[parameters('adminName')]"
  },
  "Password": {
    "type": "string",
    "value": "[parameters('adminPassword')]"
  }
}
```

### <a name="subscription-limits"></a>Ограничения подписки

Еде один момент, который следует учитывать, — ограничения подписки и служб. Например, если требуется развернуть до десяти 4-ядерных виртуальных машин, необходимо убедиться, что с подпиской, используемой для лаборатории, разрешено использовать 40 ядер.

Дополнительные сведения об ограничениях подписки и служб Azure см. [в этой статье](https://docs.microsoft.com/azure/azure-subscription-service-limits). Так как одновременно можно запустить несколько тестовых выпусков, убедитесь, что ваша подписка может обрабатывать количество ядер, умноженное на общее число параллельных тестовых выпусков, которые могут быть запущены.

### <a name="what-to-upload"></a>Что следует отправлять

Шаблон тестового выпуска Resource Manager отправляется в виде ZIP-файла, который может включать в себя различные артефакты развертывания, но обязательно должен содержать файл с именем **main-template.json**. Этот файл является шаблоном развертывания Azure Resource Manager, и с его помощью тестовый выпуск создает экземпляр лаборатории.

Если помимо этого файла у вас есть дополнительные ресурсы, можно указать ссылку на них в качестве внешних ресурсов внутри шаблона или включить эти ресурсы в ZIP-файл.

В ходе сертификации публикации тестовый выпуск распаковывает пакет развертывания и помещает его содержимое во внутренний контейнер больших двоичных объектов тестового выпуска. Структура контейнера отражает структуру пакета развертывания:

| package.zip                       | Контейнер больших двоичных объектов тестового выпуска         |
|---|---|
| main-template.json                | https:\//\<\.... \>.blob.core.windows.net/\<\.... \>/main-template.json  |
| templates/solution.json           | https:\//\<\.... \>.blob.core.windows.net/\<\.... \>/templates/solution.json |
| scripts/warmup.ps1                | https:\//\<\...\>.blob.core.windows.net/\<\...\>/scripts/warmup.ps1  |


Мы называем URI этого контейнера больших двоичных объектов базовым URI. Каждой редакции лаборатории соответствует собственный контейнер больших двоичных объектов и, соответственно, собственный базовый URI. Тестовый выпуск может передавать базовый URI разархивированного пакета развертывания в шаблон через параметры шаблона.

## <a name="transforming-template-examples-for-test-drive"></a>Преобразование примеров шаблонов для тестового выпуска

Процесс преобразования архитектуры ресурсов в шаблон тестового выпуска Resource Manager может показаться сложной задачей. Чтобы упростить этот процесс, мы создали примеры рекомендуемых способов [преобразования текущих шаблонов развертывания](./transforming-examples-for-test-drive.md).

## <a name="how-to-publish-a-test-drive"></a>Публикация тестового выпуска

Теперь, когда тестовый выпуск создан, мы рассмотрим все поля, необходимые для успешной публикации тестового выпуска.

![Включение тестового выпуска в пользовательском интерфейсе](./media/azure-resource-manager-test-drive/howtopub1.png)

Первое и самое важное поле позволяет включить или отключить тестовый выпуск для вашего предложения. При выборе варианта **Да** вам будет предложено заполнить остальную форму со всеми обязательными полями. При выборе варианта **Нет** форма будет отключена, и, если повторить публикацию при отключенном тестовом выпуске, тестовый выпуск будет удален из рабочей среды.

Примечание. Если какие-либо пользователи активно используют тестовые выпуски, эти выпуски будут продолжать работать до истечения соответствующего сеанса.

### <a name="details"></a>Сведения

Следующий раздел, который следует заполнить, — подробные сведения о вашем предложении тестового выпуска.

![Подробные сведения о тестовом выпуске](./media/azure-resource-manager-test-drive/howtopub2.png)

**Description (Описание) —** *обязательное*. Здесь следует ввести основное описание того, что содержится в данном тестовом выпуске. Клиент прочитает здесь о сценариях работы с продуктом, поддерживаемых этим тестовым выпуском. 

**User Manual (Руководство пользователя) —** *обязательное*. Это подробная инструкция по работе с вашим тестовым выпуском. Клиент ее откроет и сможет шаг за шагом выполнить точно те действия, которые требуются от него в тестовом выпуске. Очень важно, чтобы это содержимое было простым для понимания и выполнения! (Это должен быть файл в формате PDF.)

**Test Drive Demo Video** (Демонстрационное видео о тестовом выпуске) *рекомендуемый материал*. Мы рекомендуем предоставить видеоруководство по использованию тестового выпуска в дополнение к руководству пользователя. Клиент просмотрит его перед работой или во время работы с тестовым выпуском и сможет шаг за шагом выполнить точно те действия, которые от него требуются в тестовом выпуске. Очень важно, чтобы это содержимое было простым для понимания и выполнения!

- **Name** (Имя) — заголовок видео.
- **Link** (Ссылка) — должна быть встроенным URL-адресом видео или канала. Ниже приведен пример получения встроенного URL-адреса:
- **Thumbnail** (Эскиз) — должен представлять собой изображение высокого качества (533x324 пикселя). Здесь рекомендуется поместить снимок экрана, демонстрирующий выполнение какого-либо действия с тестовым выпуском.

Ниже показано, как эти поля отображаются клиенту во время работы с тестовым выпуском.

![Расположение полей тестового выпуска в предложении Marketplace](./media/azure-resource-manager-test-drive/howtopub4.png)

### <a name="technical-configuration"></a>Техническая конфигурация

В следующем разделе, который следует заполнить, выполняется отправка шаблона тестового выпуска Resource Manager и точное определение способа работы экземпляров тестового выпуска.

![](./media/azure-resource-manager-test-drive/howtopub5.png)

**Instances (Экземпляры) —** *обязательно*. Здесь можно указать, сколько экземпляров необходимо создать, в каких регионах и как быстро ваши клиенты смогут получить тестовый выпуск.

- **Instances (Экземпляры)** — кнопка Select regions (Выбрать регионы) позволяет выбрать, где будет развернут шаблон тестового выпуска Resource Manager. Рекомендуется выбрать только один регион, где с наибольшей вероятностью будут находиться ваши клиенты.
- **Hot (Горячие)** — количество экземпляров тестового выпуска, которые уже развернуты и ожидают доступа в выбранном регионе. Клиенты могут мгновенно получить доступ к этим тестовым выпускам, а не ждать развертывания. Недостаток в том, что эти экземпляры всегда выполняются в вашей подписке Azure, так что за их работу будет взиматься больше средств. Настоятельно рекомендуется запустить **по крайней мере один "горячий" экземпляр**, так как большинство клиентов не хотят ожидать полного развертывания до конца, и это ведет к падению популярности среди клиентов.
- **Warm (Теплые)** — количество экземпляров тестового выпуска по региону, которые были развернуты, а затем виртуальная машина была остановлена и сохранена в хранилище Azure. Время ожидания для "теплых" экземпляров больше, чем для "горячих", но затраты на работу хранилища меньше.
- **Cold (Холодные)** — количество экземпляров тестового выпуска в регионе, которые потенциально могут быть развернуты. Для "холодных" экземпляров требуется полное развертывание шаблона тестового выпуска Resource Manager по запросу клиента, так что они работают медленнее, чем "горячие" или "теплые" экземпляры. Однако при этом вы платите только за время работы конкретного тестового выпуска.

На этот момент следует вычислить общее число возможных параллельно выполняемых тестовых выпусков, которые будут доступны, и убедиться, что ограничение квоты для вашей подписки позволяет одновременно обрабатывать такое количество:

**(Количество выбранных регионов x количество "горячих" экземпляров) + (Количество выбранных регионов x количество "теплых" экземпляров) + (Количество выбранных регионов x количество "холодных" экземпляров)**

**Test Drive Duration (hours) (Продолжительность тестового выпуска (ч)) —** *обязательно*. Длительность времени, в течение которого тестовый выпуск будет оставаться активным, в часах. Тестовый выпуск автоматически завершает работу по истечении указанного периода времени.

**Test Drive Resource Manager template (Шаблон тестового выпуска Resource Manager) —** *обязательно*. Здесь следует отправить ваш шаблон Resource Manager. Это файл, созданный в предыдущем разделе. Задайте для основного файла шаблона имя main-template.json и убедитесь, что шаблон Resource Manager содержит все необходимые выходные параметры для ключевых переменных. (Это должен быть ZIP-файл.)

**Access Information (Сведения о доступе) —** *обязательно*. После того как клиент получит тестовый выпуск, ему будут предоставлены сведения о доступе. В этих инструкциях следует предоставить полезные выходные параметры из вашего шаблона тестового выпуска Resource Manager. Чтобы включить параметры вывода, используйте двойные фигурные скобки (например, **{{имя_вывода}}**). Так вы правильно вставите параметры в нужное расположение. (Здесь в клиентском интерфейсе рекомендуется выводить средства для HTML-форматирования строк.)

### <a name="test-drive-deployment-subscription-details"></a>Сведения о подписке, связанной с развертыванием тестового выпуска

В последнем заполняемом разделе у вас будет возможность развертывать тестовые выпуски автоматически, подключив подписку Azure и Azure Active Directory (AD).

![Сведения о подписке на развертывание тестового выпуска](./media/azure-resource-manager-test-drive/subdetails1.png)

**Azure Subscription ID (Идентификатор подписки Azure) —** *обязательно*. Предоставляет доступ к службам Azure и порталу Azure. Подписка является местом, где производится учет использования ресурсов и выставляются счета за услуги. Если у вас еще нет **отдельной** подписки Azure только для тестовых выпусков, создайте ее. Чтобы найти идентификаторы подписок Azure, войдите на портал Azure, а затем перейдите в раздел Subscriptions (Подписки) в меню слева. (Пример: a83645ac-1234-5ab6-6789-1h234g764ghty.)

![Подписки Azure](./media/azure-resource-manager-test-drive/subdetails2.png)

**Azure AD Tenant ID (Идентификатор клиента Azure AD) —** *обязательно*. Если вам уже доступен идентификатор клиента, его можно найти внизу в разделе Properties (Свойства) —\> Directory ID (Идентификатор каталога).

![Пункт "Свойства" для Azure Active Directory](./media/azure-resource-manager-test-drive/subdetails3.png)

В противном случае создайте новый клиент в Azure Active Directory.

![Список клиентов Azure Active Directory](./media/azure-resource-manager-test-drive/subdetails4.png)

![Определение организации, домена и страны для клиента Azure AD](./media/azure-resource-manager-test-drive/subdetails5.png)

![Подтверждение выбора](./media/azure-resource-manager-test-drive/subdetails6.png)

**Azure AD App ID (Идентификатор приложения Azure AD) —** *обязательно*. На следующем шаге создается и регистрируется новое приложение. Мы будем использовать это приложение для выполнения операций над экземпляром тестового выпуска.

1. Перейдите в только что созданный каталог или уже существующий каталог и выберите Azure Active Directory в области фильтров.
2. Выполните поиск по запросу "App registrations" (Регистрация приложений) и нажмите кнопку Add (Добавить).
3. Введите имя приложения.
4. В качестве типа выберите Web app / API (Веб-приложение или API).
5. Введите любое значение в поле Sign-on URL (URL-адрес входа) — мы его использовать не будем.
6. Щелкните "Создать".
7. После создания приложения перейдите в раздел Properties (Свойства) —\> Set the application as multi-tenant (Сделать приложение мультитенантным) и нажмите кнопку Save (Сохранить).

Щелкните Сохранить. Последний шаг — скопировать идентификатор зарегистрированного приложения и вставить его в поле Test Drive (Тестовый выпуск).

![Сведения об идентификаторе приложения Azure AD](./media/azure-resource-manager-test-drive/subdetails7.png)

Учитывая то, что мы используем приложение для развертывания в подписке, нам необходимо добавить приложение в качестве участника подписки. Для этого сделайте следующее:

1. Перейдите в колонку Subscriptions (Подписки) и выберите соответствующую подписку, которая используется только для тестового выпуска.
1. Щелкните **Управление доступом (IAM)**.
1. Перейдите на вкладку **Назначение ролей**.  ![Добавление нового участника службы контроля доступа](./media/azure-resource-manager-test-drive/SetupSub7_1.jpg)
1. Выберите команду **Добавить назначение ролей**.
1. Выберите роль **Contributor** (Участник).
1. Введите имя приложения Azure AD и выберите приложение, которому следует назначить эту роль.
    ![Добавление разрешений](./media/azure-resource-manager-test-drive/SetupSub7_2.jpg)
1. Выберите команду **Сохранить**.

**Azure AD App Key (Ключ приложения Azure AD) —** *обязательно*. Последнее поле служит для формирования ключа проверки подлинности. В разделе ключей добавьте описание ключа, в качестве длительности задайте неограниченный срок действия, затем выберите Save (Сохранить). **Важно**, чтобы срок действия ключа не истекал, так как это сделает невозможным использование тестового выпуска в рабочей среде. Скопируйте это значение и вставьте его в обязательное поле Test Drive (Тестовый выпуск).

![Отображение ключей для приложения Azure AD](./media/azure-resource-manager-test-drive/subdetails8.png)

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда все поля тестового выпуска заполнены, проверьте свое предложение и **повторно опубликуйте** его. Как только ваш тестовый запуск пройдет сертификацию, следует тщательно проверить качество обслуживания клиентов в **предварительной версии** предложения. Запустите тестовый выпуск в пользовательском интерфейсе, затем откройте свою подписку Azure на портале Azure и убедитесь, что тестовые выпуски полностью развертываются правильно.

![Портал Azure](./media/azure-resource-manager-test-drive/subdetails9.png)

Важно отметить, что вам не нужно удалять какие-либо экземпляры тестовых выпусков по мере их подготовки для клиентов — служба тестового выпуска будет автоматически очищать такие группы ресурсов после того, как клиент завершит работу с ними.

Когда предварительная версия вашего предложения будет готова, ее можно **запустить в работу**. После публикации предложения выполняется процесс окончательного анализа корпорацией Майкрософт для повторной проверки всего процесса взаимодействия. Если по какой-либо причине предложение будет отклонено, мы отправим уведомление с контактами инженерного отдела и описанием того, что необходимо исправить.

Если у вас появились дополнительные вопросы, вы ищете рекомендации по устранению неполадок или хотите сделать свой тестовый выпуск успешным, перейдите к статье [Test Drive Marketing and Best Practices (Рекомендации по маркетингу тестового выпуска)](./marketing-and-best-practices.md).
