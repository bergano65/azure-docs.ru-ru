---
title: Хранилище таблиц Azure | Документация Майкрософт
description: Настройте управление интересами для Хранилища таблиц Azure.
services: Azure, Marketplace, Cloud Partner Portal,
documentationcenter: ''
author: dan-wesley
manager: Patrick.Butler
editor: ''
ms.assetid: ''
ms.service: marketplace
ms.workload: ''
ms.tgt_pltfrm: ''
ms.devlang: ''
ms.topic: conceptual
ms.date: 12/06/2018
ms.author: pbutlerm
ms.openlocfilehash: c4537709181398e401ade67b831bc2d26a99221f
ms.sourcegitcommit: 5b869779fb99d51c1c288bc7122429a3d22a0363
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2018
ms.locfileid: "53193592"
---
# <a name="lead-management-instructions-for-azure-table"></a>Инструкции по управлению интересами для Хранилища таблиц Azure

В этой статье описывается, как настроить Хранилище таблиц Azure для хранения информации о потенциальных клиентах. Хранилище таблиц Azure позволяет сохранять и настраивать информацию о клиентах.

## <a name="to-configure-azure-table"></a>Настройка Хранилища таблиц Azure

1.  Если у вас нет учетной записи Azure, вы можете [создать бесплатную пробную учетную запись](https://azure.microsoft.com/pricing/free-trial/).

2.  Войдите на [портал Azure](https://portal.azure.com), после того как учетная запись Azure станет активна.
3.  Создайте учетную запись хранения на портале Azure. На следующем снимке экрана показано, как создать учетную запись хранения. Дополнительные сведения о ценах на службу хранилища см. на странице [Обзор цен на хранилище Azure](https://azure.microsoft.com/pricing/details/storage/).

    ![Шаги по созданию учетной записи хранения Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azurestoragecreate.png)

4.  Скопируйте строку подключения учетной записи хранения для ключа и вставьте ее в поле **Строка подключения к учетной записи хранилища** на Портале Cloud Partner. Пример строки подключения: `DefaultEndpointsProtocol=https;AccountName=myAccountName;AccountKey=myAccountKey;EndpointSuffix=core.windows.net `
    
    ![Ключ к хранилищу Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azurestoragekeys.png)

Вы можете использовать [обозреватель службы хранилища Azure](http://azurestorageexplorer.codeplex.com/) или любое другое средство для просмотра данных в таблице хранилища. Данные также можно экспортировать в Хранилище таблиц Azure
.

## <a name="optional-use-microsoft-flow-with-an-azure-table"></a>Использования Microsoft Flow с таблицей Azure **(необязательно)**

[Microsoft Flow](https://docs.microsoft.com/flow/) можно использовать для автоматизации уведомления при каждом добавлении потенциального клиента в таблицу Azure. Если у вас нет учетной записи, вы можете [зарегистрироваться, чтобы получить ее бесплатно](https://flow.microsoft.com/).

### <a name="lead-notification-example"></a>Пример уведомления о потенциальном клиенте

Этот пример можно использовать как руководство по созданию простого потока, который автоматически отправляет уведомление по электронной почте при добавлении нового потенциального клиента в таблицу Azure. В нем показано, как настроить повторение для отправки сведений о потенциальном клиенте каждый час при обновлении хранилища таблиц.

1. Войдите в учетную запись Microsoft Flow.
2. На панели навигации слева выберите **Мои потоки**.
3. На панели навигации сверху выберите **+ Создать**.  
4. В раскрывающемся списке выберите **+ Создать с нуля**.
5. В разделе "Создать поток с нуля" выберите **Создать с нуля**.

   ![Создание нового потока с нуля](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-create-from-blank.png)

6. На странице поиска соединителей и триггеров выберите **Триггеры**.
7. В разделе **Триггеры**выберите **Повторение**.
8. В окне **Повторение** оставьте значение по умолчанию 1 в поле **Интервал**. Из раскрывающегося списка **Частота** выберите **Час**.

   >[!NOTE] 
   >Хотя в этом примере используется часовой интервал, вы можете выбрать оптимальный интервал и частоту в соответствии со своими деловыми потребностями.

   ![Установка повторения с частотой в 1 час](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-recurrence-dropdown.png)

9. Выберите **+ Новый шаг**.
10. Введите в поле поиска "Получение времени в прошлом", а затем выберите **Получение времени в прошлом** в области "Действия". 

    ![Поиск и выбор действия "Получение времени в прошлом"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-search-getpasttime.png)

11. В окне **Получение времени в прошлом** в поле **Интервал** укажите 1.  Из раскрывающегося списка **Единица времени** выберите **Час**.
    >[!IMPORTANT] 
    >Убедитесь, что этот интервал и единица времени соответствуют интервалу и частоте, настроенным для повторения.

    ![Настройка интервала в разделе "Получение времени в прошлом"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getpast-time.png)

    >[!TIP] 
    >Чтобы убедиться в правильности каждого шага, можно в любое время проверить поток. Чтобы проверить ваш поток, выберите **Средство проверки потоков**  в строке меню Flow.

В следующих инструкциях описывается, как установить подключение к таблице Azure и настроить логику обработки новых потенциальных клиентов.

1. После выполнения этапа "Получение времени в прошлом" выберите **+ Новый шаг** и введите в поле поиска "Получить сущности".
2. В разделе **Действия** выберите **Получить записи**, а затем выберите **Показать расширенные параметры**.
3. В окне **Получить записи** укажите сведения для следующих полей:

   - **Таблица** — введите имя хранилища таблиц Azure. На следующем снимке экрана показан запрос, который отображается при вводе "MarketPlaceLeads" для этого примера. 

     ![Выбор пользовательского значения для имени таблицы Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getentities-table-name.png)

   - **Запрос фильтра** — если щелкнуть это поле, во всплывающем окне отобразится значок "Получение времени в прошлом". Выберите **Время в прошлом**, чтобы использовать эту метку времени для фильтрации запроса. Кроме того, данную функцию можно вставить в поле `gt datetime'@{body('Get_past_time')}'`.

     ![Настройка функции запроса фильтра](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getentities-filterquery.png)

4. Выберите **Новый шаг**, чтобы добавить условие поиска в таблице Azure для новых потенциальных клиентов.

   ![Использование нового шага для добавления условия поиска в таблице Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-add-filterquery-new-step.png)

5. В окне **Выберите действие** выберите **Действия**, а затем — элемент управления **Условие**.

     ![Добавление элемента управления "Условие"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-action-condition-control.png)

6. В окне **Условие** перейдите в поле **Выберите значение**, а затем выберите **Выражение** во всплывающем окне.
7. Вставьте `length(body('Get_entities')?['value'])` в поле ***fx***. Нажмите **ОК** для добавления этой функции. Чтобы завершить настройку условия:

   - Из раскрывающегося списка выберите "больше".
   - Введите 0 в качестве значения. 

     ![Добавление функции в условие](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-condition-fx0.png)

8. Задайте действие, которое будет выполняться в зависимости от значения условия.

     ![Настройка действия в зависимости от значения условия](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-condition-pick-action.png)

9. Если условие возвращает **Если "нет"**, ничего не происходит. 
10. Если условие возвращает **Если "да"**, активируется действие подключения к учетной записи Office 365 для отправки сообщения электронной почты. Выберите **Добавить действие**.
11. Выберите **Отправить электронное письмо**. 
12. В окне **Отправить электронное письмо** укажите сведения для следующих полей:

    - **Кому** — введите адреса электронной почты всех пользователей, которые должны получить это уведомление.
    - **Тема** — укажите тему электронного письма. Например:  Новые потенциальные клиенты!
    - **Текст**:   Введите текст каждого письма (необязательно), а затем вставьте в текст сообщения `('Get_entities')?['value']` в качестве функции для добавления информации о потенциальном клиенте.

      >[!NOTE] 
      >В текст сообщения можно вставить дополнительные статические или динамические точки данных.

       ![Настройка электронной почты для уведомления о потенциальных клиентах](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-emailbody-fx.png)

13. Выберите **Сохранить**, чтобы сохранить поток. Microsoft Flow автоматически проверит поток на наличие ошибок. Если они отсутствуют, поток запустится после его сохранения.

На следующем снимке экрана показан пример того, как в итоге должен выглядеть поток.

 ![Итоговая последовательность потока](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-end-to-end.png)

### <a name="managing-your-flow"></a>Управление потоком

После запуска потока вы можете им легко управлять.  Вы его полностью контролируете. Например, вы можете его остановить или изменить, просмотреть журнал его выполнения и получить аналитику. На следующем снимке экрана показаны доступные параметры для управления потоком. 

 ![Управление потоком](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-manage-completed.png)

Поток продолжает выполняться, пока вы не остановите его с помощью параметра **Отключить поток**.

Если вы не получаете по электронной почте уведомления о новых потенциальных клиентах, значит они не добавлены в таблицу Azure. При возникновении ошибок в потоке вы получите сообщение электронной почты, аналогичное показанному на следующем снимке экрана.

 ![Уведомление по электронной почте о сбое потока](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-failure-note.png)

## <a name="next-steps"></a>Дополнительная информация

[Настройка получения сведений о потенциальных клиентах](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-get-customer-leads)