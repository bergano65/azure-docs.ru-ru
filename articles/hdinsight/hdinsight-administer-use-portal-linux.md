---
title: Управление кластерами Apache Hadoop в HDInsight с помощью портала Azure
description: Узнайте, как создавать кластеры Azure HDInsight и управлять ими с помощью портал Azure.
author: hrasheed-msft
ms.reviewer: jasonh
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 06/06/2019
ms.author: hrasheed
ms.openlocfilehash: 8bb6ca0483a7bc0a5af63a1fae7e5e5a5415abba
ms.sourcegitcommit: fa4852cca8644b14ce935674861363613cf4bfdf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2019
ms.locfileid: "70810307"
---
# <a name="manage-apache-hadoop-clusters-in-hdinsight-by-using-the-azure-portal"></a>Управление кластерами Apache Hadoop в HDInsight с помощью портала Azure

[!INCLUDE [selector](../../includes/hdinsight-portal-management-selector.md)]

С помощью [портал Azure](https://portal.azure.com)вы можете управлять кластерами [Apache Hadoop](https://hadoop.apache.org/) в Azure HDInsight. Используйте другие вкладки выше, чтобы перейти к статьям об управлении кластерами Hadoop в HDInsight с помощью других инструментов.

## <a name="prerequisites"></a>Предварительные требования

Существующий кластер Apache Hadoop в HDInsight.  См. статью [Создание кластеров под управлением Linux в HDInsight с помощью портала Azure](hdinsight-hadoop-create-linux-clusters-portal.md).

## <a name="getting-started"></a>Начало работы
Войдите на портал [https://portal.azure.com](https://portal.azure.com).

## <a name="showClusters"></a> Перечисление и отображение кластеров
На странице **Кластеры HDInsight** появится список существующих кластеров.  На портале
1. В меню слева выберите **Все службы**.
2. В разделе **Аналитика** выберите **Кластеры HDInsight**.

## <a name="homePage"></a> Домашняя страница кластера 
Выберите имя кластера на странице [**кластеры HDInsight**](#showClusters) .  Откроется представление **Обзор**, которое будет выглядеть следующим образом.

![Основная информация о кластере HDInsight на портале Azure](./media/hdinsight-administer-use-portal-linux/hdinsight-essentials2.png)

**Строка меню сверху**  

| Элемент| Описание |
|---|---|
|Переместить|Перемещает кластер в другую группу ресурсов или подписку.|
|Оператор delete|Удаляет кластер. |
|Обновить|Обновляет представление.|

**Меню слева:**  
  - **Меню сверху слева**

    | Элемент| Описание |
    |---|---|
    |Обзор|Содержит общие сведения для кластера.|
    |Журнал действий|Отображение и запрашивание журналов действий.|
    |Управление доступом (IAM)|Использование назначения ролей.  Ознакомьтесь со статьей [Использование назначений ролей для управления доступом к ресурсам в подписке Azure](../role-based-access-control/role-assignments-portal.md).|
    |Tags|Позволяют задавать пары "ключ — значение" для определения пользовательской классификации облачных служб. Например, можно создать ключ с именем **project**, а затем использовать общее значение для всех служб, связанных с определенным проектом.|
    |Диагностика и решение проблем|Отображение сведений об устранении неполадок.|
    |Быстрый запуск|Отображение сведений, помогающих начать работу с HDInsight.|
    |Сервис|Справочные сведения об инструментах, связанных с HDInsight.|

  - **Меню параметров**  

    | Элемент| Описание |
    |---|---|
    |Размер кластера|Проверка, увеличение и уменьшение количества рабочих узлов кластера. См. раздел о [масштабировании кластеров](hdinsight-administer-use-portal-linux.md#scale-clusters).|
    |Пределы квоты|Отображение сведений об используемых и доступных ядрах для подписки.|
    |SSH + вход в кластер|Отображение сведений о подключении к кластеру по протоколу SSH. Дополнительные сведения см. в статье [Использование SSH с Hadoop на основе Linux в HDInsight из Linux, Unix или OS X](hdinsight-hadoop-linux-use-ssh-unix.md).|
    |Data Lake Storage 1-го поколения|Настройка доступа к Data Lake Storage 1-го поколения.  См. [Краткое руководство. по настройке кластеров в HDInsight](../storage/data-lake-storage/quickstart-create-connect-hdi-cluster.md).|
    |Учетные записи хранения|Просмотр учетных записей хранения и ключей. Учетные записи хранения настраиваются во время создания кластера.|
    |Приложения|Добавление и удаление приложений HDInsight.  Ознакомьтесь со статьей [Установка пользовательских приложений HDInsight](hdinsight-apps-install-custom-applications.md).|
    |Действия скрипта|Выполнение bash-скриптов в кластере. См. статью [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).|
    |Внешние метахранилища|просмотр метахранилищ [Apache Hive](https://hive.apache.org/) и [Apache Oozie](https://oozie.apache.org/). Метахранилища можно настроить только во время создания кластера.|
    |Партнер HDInsight|Добавление или удаление текущего партнера HDInsight.|
    |Свойства|Просмотр [свойств кластера](#properties).|
    |Блокировки|Добавление блокировки во избежание изменения или удаления кластера.|
    |Экспортировать шаблон|Отображение и экспорт шаблона Azure Resource Manager для кластера. В настоящее время можно экспортировать только зависимую учетную запись хранения Azure. См. статью [Создание кластеров Apache Hadoop в HDInsight с помощью шаблонов Resource Manager](hdinsight-hadoop-create-linux-clusters-arm-templates.md).|

  - **Меню "Мониторинг"**

    | Элемент| Описание |
    |---|---|
    |Предупреждения|Управление оповещениями и действиями.|
    |metrics|Отслеживайте метрики кластера в журналах Azure Monitor.|
    |Параметры диагностики|Настройки места хранения для метрик диагностики.|
    |Operations Management Suite|Мониторинг кластера в Azure Operations Management Suite (OMS) и журналов Azure Monitor.|

  - **Меню "Поддержка и устранение неполадок"**

    | Элемент| Описание |
    |---|---|
    |Работоспособность ресурсов|См. [Обзор службы "Работоспособность ресурсов Azure"](../service-health/resource-health-overview.md).|
    |Новый запрос в службу поддержки|Позволяет создать запрос в службу поддержки Майкрософт.|

## <a name="properties"></a> Свойства кластера

На [домашней странице кластера](#homePage) в разделе **Параметры** выберите **Свойства**.

|Элемент | Описание |
|---|---|
|ИМЯ УЗЛА|имя кластера;|
|URL-АДРЕС КЛАСТЕРА|URL-адрес веб-интерфейса Ambari.|
|Закрытая конечная точка|Частная конечная точка кластера.|
|Secure Shell (SSH)|Имя пользователя и имя узла используются при доступе к кластеру по протоколу SSH.|
|СОСТОЯНИЕ|Возможные варианты: Aborted, Accepted, ClusterStorageProvisioned, AzureVMConfiguration, HDInsightConfiguration, Operational, Running, Error, Deleting, Deleted, Timedout, DeleteQueued, DeleteTimedout, DeleteError, PatchQueued, CertRolloverQueued, ResizeQueued или ClusterCustomization.|
|Регион|Расположение Azure. Поддерживаемые расположения Azure перечислены в раскрывающемся списке **Регион** на странице [Цены — HDInsight](https://azure.microsoft.com/pricing/details/hdinsight/).|
|ДАТА СОЗДАНИЯ|Дата развертывания кластера.|
|ОПЕРАЦИОННАЯ СИСТЕМА|**Windows** или **Linux**.|
|ТИП|Hadoop, HBase, Storm, Spark.|
|Version|См. статью о [поддерживаемых версиях HDInsight](hdinsight-component-versioning.md).|
|ПОДПИСКА|Имя подписки.|
|ИСТОЧНИК ДАННЫХ ПО УМОЛЧАНИЮ|Файловая система кластера по умолчанию.|
|Размеры рабочих узлов|Выбранный размер виртуальной машины для рабочих узлов.|
|Размер головного узла|Выбранный размер виртуальной машины для головных узлов.|
|Виртуальная сеть|Имя виртуальной сети, в которой развернут кластер, если он был выбран во время развертывания.|

## <a name="move-clusters"></a>Перемещение кластеров

Кластер HDInsight можно переместить в другую группу ресурсов Azure или в другую подписку.

На [домашней странице кластера](#homePage).

1. Выберите команду **Переместить** в верхнем меню.
2. Выберите команду **Переместить в другую группу ресурсов** или **Переместить в другую подписку**.
3. Следуйте инструкциям на новой странице.

## <a name="delete-clusters"></a>Удаление кластеров
Удаление кластера не приведет к удалению учетной записи хранения, используемой по умолчанию, или других учетных записей, связанных с кластером. Вы всегда сможете заново создать кластер, указав те же учетные записи хранения и те же метахранилища. При повторном создании кластера рекомендуем использовать новый контейнер больших двоичных объектов по умолчанию.

На [домашней странице кластера](#homePage).

1. В верхнем меню выберите пункт **Удалить**.
2. Следуйте инструкциям на новой странице.

См. также раздел [Приостановка и завершение работы кластеров](#pauseshut-down-clusters).

## <a name="add-additional-storage-accounts"></a>Добавление дополнительных учетных записей хранения

После создания кластера можно добавить дополнительные учетные записи службы хранилища Azure и учетные записи Azure Data Lake Storage. Дополнительные сведения см. в статье [Добавление дополнительных учетных записей хранения в HDInsight](./hdinsight-hadoop-add-storage.md).

## <a name="scale-clusters"></a>Масштабирование кластеров

Масштабирование кластера позволяет изменить количество рабочих узлов в кластере Azure HDInsight. При этом не требуется повторно создавать кластер.

Полные сведения см. в разделе [масштабирование кластеров HDInsight](./hdinsight-scaling-best-practices.md) .

## <a name="pauseshut-down-clusters"></a>Приостановка и завершение работы кластеров

Большинство заданий Hadoop представляют собой пакетные задания, выполняемые от случая к случаю. Обычно кластеры Hadoop в течение долгих промежутков времени не используются для обработки данных. В случае с HDInsight ваши данные хранятся в службе хранилища Azure, что позволяет безопасно удалить неиспользуемый кластер.
Плата за кластеры HDInsight взимается, даже когда они не используются. Поскольку стоимость кластера во много раз превышает стоимость хранилища, экономически целесообразно удалять неиспользуемые кластеры.

Этот процесс можно выполнять автоматически несколькими способами:

* С помощью фабрики данных Azure. Сведения о создании связанных служб HDInsight по запросу см. в статье [Руководство. Создание кластеров Apache Hadoop в HDInsight по запросу с помощью Фабрики данных Azure](hdinsight-hadoop-create-linux-clusters-adf.md).
* С помощью Azure PowerShell.  См. статью [Анализ данных о задержке рейсов с помощью Hive в HDInsight](./interactive-query/interactive-query-tutorial-analyze-flight-data.md).
* С помощью интерфейса командной строки Azure. См. раздел [Управление кластерами Azure HDInsight с помощью Azure CLI](hdinsight-administer-use-command-line.md).
* С помощью пакета SDK для HDInsight .NET. См. дополнительные сведения об [отправке заданий Apache Hadoop](hadoop/submit-apache-hadoop-jobs-programmatically.md).

Сведения о ценах см. на странице [цен на HDInsight](https://azure.microsoft.com/pricing/details/hdinsight/). Удаление кластера на портале описано в разделе [Удаление кластеров](#delete-clusters).

## <a name="upgrade-clusters"></a>Установка новых версий кластеров

Ознакомьтесь с разделом [Обновление кластера HDInsight до более новой версии](./hdinsight-upgrade-cluster.md).

## <a name="open-the-apache-ambari-web-ui"></a>Открытие веб-интерфейса Apache Ambari

Ambari предоставляет интуитивно понятный и простой веб-интерфейс управления Hadoop, который поддерживают API-интерфейсы RESTful. Ambari дает системным администраторам возможность управлять кластерами Hadoop и наблюдать за ними.

На [домашней странице кластера](#homePage).

1. Выберите **Панели мониторинга кластера**.

    ![Меню кластера HDInsight Hadoop](./media/hdinsight-administer-use-portal-linux/hdinsight-azure-portal-cluster-menu2.png)

1. Выберите **домашнюю страницу Ambari** на новой странице.
1. Введите имя пользователя для входа в кластер и пароль.  Имя пользователя кластера по умолчанию — _admin_.

Дополнительные сведения см. в статье [Управление кластерами HDInsight с помощью веб-интерфейса Ambari](hdinsight-hadoop-manage-ambari.md).

## <a name="change-passwords"></a>Изменение паролей
Кластер HDInsight может иметь две учетные записи пользователя. Учетная запись пользователя кластера HDInsight (учетная запись пользователя HTTP) и учетная запись пользователя SSH создаются в процессе создания. С помощью портала можно изменить имя и пароль учетной записи, а также действия сценария для изменения учетной записи SSH.

### <a name="change-the-cluster-user-password"></a>Изменение пароля пользователя кластера

> [!NOTE]  
> Если изменить пароль пользователя (администратора) кластера, это может привести к сбою при выполнении действий сценария для этого кластера. Если у вас есть сохраненные действия сценария для рабочих узлов, эти сценарии могут завершиться ошибкой при добавлении узлов в кластер при изменении размера. Дополнительные сведения о действиях сценариев см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

На [домашней странице кластера](#homePage).
1. Выберите **SSH + Вход в кластер** в разделе **Параметры**.
2. Выберите команду **Сбросить учетные данные**.
3. Введите и подтвердите новый пароль в текстовых полях.
4. Нажмите кнопку **ОК**.

Система изменит пароль на всех узлах в кластере.

### <a name="change-the-ssh-user-password"></a>Изменение пароля пользователя SSH
1. С помощью текстового редактора сохраните указанный ниже текст в файл с именем **changepassword.sh**.

    > [!IMPORTANT]  
    > Необходимо использовать редактор, который использует LF в качестве конца строки. Если редактор использует CRLF, сценарий не будет работать.

    ```bash
    #! /bin/bash
    USER=$1
    PASS=$2
    usermod --password $(echo $PASS | openssl passwd -1 -stdin) $USER
    ```

2. Передайте файл в расположение хранилища, которое будет использоваться из HDInsight с помощью адреса HTTP или HTTPS. Например, в такое общедоступное хранилище файлов, как OneDrive или хранилище BLOB-объектов Azure. Сохраните универсальный код ресурса (URI) для файла (адрес HTTP или HTTPS), так как он понадобится на следующем шаге.
3. На [домашней странице кластера](#homePage)в разделе **Параметры**выберите **действия скрипта** .
4. На странице **действия скрипта** выберите **отправить новый**.
5. На странице **Отправка действия скрипта** введите следующие сведения.

   | Поле | Значение |
   | --- | --- |
   | Тип скрипта | Выберите **— Настраиваемый** из раскрывающегося списка.|
   | Название |"Изменить пароль SSH" |
   | URI bash-скрипта |Универсальный код ресурса (URI) файла changepassword.sh. |
   | Типы узлов: (головные, рабочие, Nimbus, супервизора, Zookeeper и т. д.). |✓ для всех перечисленных типов узлов. |
   | Параметры |Введите имя пользователя SSH и новый пароль. Между именем пользователя и паролем должен быть один пробел. |
   | Сохранить этот скрипт… |Оставьте это поле без изменений. |

6. Выберите **Создать**, чтобы применить сценарий. После выполнения сценария вы сможете подключиться к кластеру с помощью SSH с новым паролем.

## <a name="grantrevoke-access"></a>Предоставление и отмена доступа
В кластерах HDInsight имеются следующие веб-службы HTTP (все эти службы имеют конечные точки RESTful):

* ODBC
* JDBC
* Ambari
* Oozie
* Templeton

По умолчанию эти службы предоставляются для доступа. Вы можете отозвать или предоставить доступ с помощью [Azure PowerShell](hdinsight-administer-use-powershell.md#grantrevoke-access).

## <a name="find-the-subscription-id"></a>Поиск идентификатора подписки
Каждый кластер привязывается к подписке Azure.  Идентификатор подписки есть на [домашней странице кластера](#homePage).

## <a name="find-the-resource-group"></a>Поиск группы ресурсов
В режиме Azure Resource Manager каждый кластер HDInsight создается с группой Azure Resource Manager. Группа Resource Manager есть на [домашней странице кластера](#homePage).

## <a name="find-the-storage-accounts"></a>Поиск учетных записей хранения
Для хранения данных кластеров HDInsight используется учетная запись хранения Azure или Azure Data Lake Storage. Каждый кластер HDInsight может иметь одну учетную запись хранения по умолчанию и несколько связанных учетных записей хранения. Чтобы получить список учетных записей хранения, на [домашней странице кластера](#homePage) в разделе **Параметры** выберите **Учетные записи хранения**.

## <a name="monitor-jobs"></a>Мониторинг заданий
См. статью [Управление кластерами HDInsight с помощью веб-интерфейса Ambari](hdinsight-hadoop-manage-ambari.md#monitoring).

## <a name="cluster-size"></a>Размер кластера

Плитка **Размер кластера** на [домашней странице кластера](#homePage) отображает число ядер, выделенных для этого кластера, и способ их выделения для узлов в этом кластере.

> [!IMPORTANT]  
> Для мониторинга служб, предоставляемых кластером HDInsight, необходимо использовать интерфейс Ambari Web или API REST Ambari. См. дополнительные сведения об [управлении кластерами HDInsight с помощью Apache Ambari](hdinsight-hadoop-manage-ambari.md).

## <a name="connect-to-a-cluster"></a>Подключение к кластеру

* [Использование Hive и HiveQL с Hadoop в HDInsight для анализа примера файла Apache log4j](hadoop/apache-hadoop-use-hive-ambari-view.md)
* [Использование SSH с HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md)

## <a name="next-steps"></a>Следующие шаги

Из этой статьи вы узнали о некоторых основных функциях администрирования. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

* [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)
* [Администрирование HDInsight с помощью CLI Azure](hdinsight-administer-use-command-line.md)
* [Создание кластеров HDInsight](hdinsight-hadoop-provision-linux-clusters.md)
* [Управление кластерами HDInsight с помощью REST API Ambari](hdinsight-hadoop-manage-ambari-rest-api.md)
* [Использование Apache Hive в HDInsight](hadoop/hdinsight-use-hive.md)
* [Использование Sqoop с Hadoop в HDInsight](hadoop/hdinsight-use-sqoop.md)
* [Использование определяемых пользователем функций Python с Apache Hive и Apache Pig в HDInsight](hadoop/python-udf-hdinsight.md)
* [Какая версия Apache Hadoop включена в Azure HDInsight?](hdinsight-component-versioning.md)