---
title: Управление кластерами Apache Hadoop для Windows в HDInsight с помощью портала Azure
description: Сведения об управлении службой HDInsight. Создайте кластер HDInsight, откройте интерактивную консоль JavaScript и командную консоль Apache Hadoop.
services: hdinsight
author: hrasheed-msft
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: conceptual
ms.date: 05/25/2017
ms.author: hrasheed
ROBOTS: NOINDEX
ms.openlocfilehash: 378f52f0418c8c99e9ce6ca393ca10a77504698d
ms.sourcegitcommit: 345b96d564256bcd3115910e93220c4e4cf827b3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2018
ms.locfileid: "52499584"
---
# <a name="manage-windows-based-apache-hadoop-clusters-in-hdinsight-by-using-the-azure-portal"></a>Управление кластерами Apache Hadoop для Windows в HDInsight с помощью портала Azure

На [портале Azure][azure-portal] можно создавать кластеры [Apache Hadoop](https://hadoop.apache.org/) для Windows в Azure HDInsight, менять пароль пользователя Hadoop и включать протокол удаленного рабочего стола (RDP) для работы с командной консолью Hadoop в кластере.

Эта статья посвящена только кластерам HDInsight под управлением Windows. См. дополнительные сведения об [управлении кластерами Hadoop на основе Linux в HDInsight с помощью портала Azure](hdinsight-administer-use-portal-linux.md).

[!INCLUDE [windows-retirement-notice](../../includes/windows-retirement-notice.md)]

## <a name="prerequisites"></a>Предварительные требования

Перед началом работы с этой статьей необходимо иметь следующее:

* **Подписка Azure**. См. страницу [бесплатной пробной версии Azure](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).
* **Учетная запись хранения Azure.** Кластер HDInsight использует контейнер хранилища больших двоичных объектов Azure в качестве файловой системы по умолчанию. Дополнительные сведения о том, каким образом хранилище больших двоичных объектов Azure обеспечивает удобную работу с кластерами HDInsight, см. в статье [Использование хранилища BLOB-объектов Azure с HDInsight](hdinsight-hadoop-use-blob-storage.md). Сведения о создании учетной записи хранения Azure см. в статье [Об учетных записях хранения Azure](../storage/common/storage-create-storage-account.md).

## <a name="open-the-portal"></a>Запуск портала
1. Войдите на портал [https://portal.azure.com](https://portal.azure.com).
2. На портале:

   * В меню слева щелкните **Создать ресурс**, чтобы создать кластер.

       ![Кнопка создания кластера HDInsight](./media/hdinsight-administer-use-management-portal/azure-portal-new-button.png)
   * В меню слева щелкните **Кластеры HDInsight** .

       ![Кнопка кластера HDInsight на портале Azure](./media/hdinsight-administer-use-management-portal/azure-portal-hdinsight-button.png)

     Если в меню нет пункта **Кластеры HDInsight**, щелкните **Обзор**.

     ![Кнопка обзора кластера на портале Azure](./media/hdinsight-administer-use-management-portal/azure-portal-browse-button.png)

## <a name="create-clusters"></a>Создание кластеров
Инструкции по созданию кластеров с помощью портала см. в статье [Создание кластеров Hadoop под управлением Windows в HDInsight](hdinsight-hadoop-provision-linux-clusters.md).

HDInsight работает с разными компонентами Apache Hadoop. См. [список проверенных и поддерживаемых компонентов Apache Hadoop, доступных в Azure HDInsight](hdinsight-component-versioning.md). Вы можете настраивать HDInsight с использованием одного из следующих вариантов.

* Используйте действие скрипта для запуска пользовательских скриптов, которые могут настраивать кластер для изменения конфигурации кластера или для установки настраиваемых компонентов, таких как Giraph или Solr. Дополнительные сведения см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster.md).
* При создании кластера используйте параметры настройки кластера в Azure PowerShell или в пакете SDK для HDInsight .NET. Такие изменения конфигурации сохраняются на протяжении всего срока существования кластера и не попадают под воздействие операций повторного создания образа узла, которые периодически выполняет платформа Azure в рамках обслуживания. Дополнительные сведения об использовании параметров настройки кластера см. в статье [Создание кластеров Hadoop под управлением Windows в HDInsight](hdinsight-hadoop-provision-linux-clusters.md).
* Некоторые собственные компоненты Java, такие как [Apache Mahout](https://mahout.apache.org/) и [Cascading](https://www.cascading.org/), могут выполняться в кластере как JAR-файлы. Эти JAR-файлы можно распространить в хранилище больших двоичных объектов Azure и отправить в кластеры HDInsight с помощью механизмов отправки заданий Hadoop. См. дополнительные сведения об [отправке заданий Apache Hadoop программными средствами](hadoop/submit-apache-hadoop-jobs-programmatically.md).

  > [!NOTE]
  > Если при развертывании или вызове JAR-файлов в кластерах HDInsight возникают проблемы, обратитесь в [службу поддержки Майкрософт](https://azure.microsoft.com/support/options/).
  >
  > Компонент Cascading не поддерживается службой HDInsight и на него не распространяется техническая поддержка Майкрософт. Списки поддерживаемых компонентов см. в статье [Что представляют собой различные компоненты Hadoop, доступные в HDInsight?](hdinsight-component-versioning.md)
  >
  >

Установка пользовательского программного обеспечения в кластере с помощью подключения к удаленному рабочему столу не поддерживается. Не храните файлы на дисках головного узла, поскольку в случае повторного создания кластеров эти файлы будут потеряны. Рекомендуется хранить файлы в хранилище больших двоичных объектов Azure. Хранилище BLOB-объектов остается неизменным.

## <a name="list-and-show-clusters"></a>Отображение кластеров
1. Войдите на портал [https://portal.azure.com](https://portal.azure.com).
2. В меню слева щелкните **Кластеры HDInsight** .
3. Щелкните имя кластера. Если список кластеров длинный, можно использовать фильтр в верхней части страницы.
4. Дважды щелкните кластер в списке, чтобы просмотреть подробные сведения о нем.

    **Меню и основная информация**:

    ![Основная информация о кластере HDInsight на портале Azure](./media/hdinsight-administer-use-management-portal/hdinsight-essentials.png)

   * Чтобы настроить меню, щелкните правой кнопкой мыши в любой его части и выберите пункт **Настройка**.
   * **Параметры** и **Все параметры**: открытие колонки **Параметры** кластера с подробными сведениями о его конфигурации.
   * **Панель мониторинга**, **Панель мониторинга кластера** и **URL-адрес**: три способа перехода к панели мониторинга кластера, которая для кластеров под управлением Linux представляет собой веб-интерфейс Ambari.
   * **Secure Shell**: отображение сведений, необходимых для подключения к кластеру по протоколу SSH.
   * **Изменить масштаб кластера**: позволяет изменить количество рабочих узлов для этого кластера.
   * **Удалить**: удаление кластера.
   * **Быстрый запуск**: отображение сведений, необходимых для начала работы с HDInsight.
   * **Пользователи**: здесь можно указать разрешения на доступ к *порталу управления* этого кластера для других пользователей в вашей подписке Azure.

     > [!IMPORTANT]
     > Этот параметр влияет *только* на право доступа к указанному кластеру на портале Azure. Он не определяет тех, кто может подключаться к кластеру HDInsight или отправлять в него задания.
     >
     >
   * **Теги**: теги позволяют задавать пары "ключ —значение" для определения пользовательской таксономии облачных служб. Например, можно создать ключ с именем **project**, а затем использовать общее значение для всех служб, связанных с определенным проектом.
   * **Просмотры Ambari**: ссылки на веб-интерфейс Ambari.

     > [!IMPORTANT]
     > Для управления службами, предоставляемыми кластером HDInsight, необходимо использовать интерфейс Ambari Web или API REST Ambari. См. дополнительные сведения об [управлении кластерами HDInsight с помощью Apache Ambari](hdinsight-hadoop-manage-ambari.md).
     >
     >

     **Использование**:

     ![Использование кластера HDInsight на портале Azure](./media/hdinsight-administer-use-management-portal/hdinsight-portal-cluster-usage.png)
5. Щелкните **Параметры**.

    ![Использование кластера HDInsight на портале Azure](./media/hdinsight-administer-use-management-portal/hdinsight.portal.cluster.settings.png)

   * **Свойства**: просмотр свойств кластера.
   * **Идентификатор AAD кластера**:
   * **Ключи к хранилищу данных Azure**: просмотр стандартной учетной записи хранения и ключа к ней. Учетная запись хранения настраивается во время создания кластера.
   * **Вход в кластер**: изменение имени пользователя и пароля для входа в кластер по протоколу HTTP.
   * **Внешние метахранилища**: просмотр метахранилищ [Apache Hive](https://hive.apache.org/) и [Apache Oozie](https://oozie.apache.org/). Метахранилища можно настроить только во время создания кластера.
   * **Масштабирование кластера**: увеличение или уменьшение количества рабочих узлов в кластере.
   * **Удаленный рабочий стол**: включение и отключение доступа по протоколу RDP, а также настройка имени пользователя для входа.  Имя пользователя RDP должно отличаться от имени пользователя HTTP.
   * **Зарегистрированный партнер**:

     > [!NOTE]
     > Это универсальный список доступных параметров; не все из них будут присутствовать для всех типов кластера.
     >
     >
6. Щелкните **Свойства**.

    В разделе свойств отобразится следующий список:

   * **Имя узла**: имя кластера.
   * **URL-адрес кластера**.
   * **Состояние**: возможны варианты "Прервано", "Принято", "Хранилище кластера подготовлено", "Конфигурация виртуальной машины Azure", "Конфигурация HDInsight", "Оперативный", "Выполняется", "Ошибка", "Удаление", "Удалено", "Время ожидания истекло", "Удаление добавлено в очередь", "Истекло время ожидания удаления", "Ошибка удаления", "Исправление добавлено в очередь", "Смена сертификатов в очереди", "Изменение размера поставлено в очередь" и "Настройка кластера".
   * **Регион**: расположение Azure. Поддерживаемые расположения Azure перечислены в раскрывающемся списке **Регион** на странице [Цены — HDInsight](https://azure.microsoft.com/pricing/details/hdinsight/).
   * **Дата создания**.
   * **Операционная система**: **Windows** или **Linux**.
   * **Тип**: Hadoop, HBase, Storm или Spark.
   * **Версия**. См. раздел [Поддерживаемые версии HDInsight](hdinsight-component-versioning.md).
   * **Подписка**: имя подписки.
   * **Идентификатор подписки**.
   * **Первичный источник данных**. По умолчанию файловой системой Hadoop является учетная запись хранения BLOB-объектов Azure.
   * **Ценовая категория рабочих узлов**.
   * **Ценовая категория головного узла**.

## <a name="delete-clusters"></a>Удаление кластеров
Удаление кластера не приведет к удалению учетной записи хранения, используемой по умолчанию, или любых других учетных записей, связанных с кластером. Вы всегда сможете заново создать кластер, указав те же учетные записи хранения и те же метахранилища.

1. Войдите на [портал][azure-portal].
2. В меню слева щелкните **Просмотреть все**, выберите **Кластеры HDInsight**, а затем щелкните имя нужного кластера.
3. В верхнем меню щелкните **Удалить** и следуйте инструкциям на экране.

См. также раздел [Приостановка и завершение работы кластеров](#pauseshut-down-clusters).

## <a name="scale-clusters"></a>Масштабирование кластеров
Масштабирование кластера позволяет изменить количество рабочих узлов в кластере, который работает под управлением Azure HDInsight. При этом не требуется повторно создавать кластер.

> [!NOTE]
> Поддерживаются только кластеры HDInsight версии 3.1.3 или более поздней. Если вы не знаете версию кластера, см. страницу «Свойства».  См. раздел [Отображение кластеров](#list-and-show-clusters).
>
>

Ниже представлены возможности, связанные с изменением количества узлов данных в кластере каждого типа, поддерживаемого в HDInsight.

* Apache Hadoop

    Вы можете легко увеличить количество рабочих узлов в работающем кластере Hadoop. Это не помешает обработке заданий в состоянии ожидания и выполнения. В ходе выполнения операции можно также отправлять новые задания. Сбои операции масштабирования обрабатываются корректно, поэтому кластер всегда пребывает в функциональном состоянии.

    Если уменьшить масштаб кластера Hadoop, сократив количество узлов данных, некоторые службы в нем будут перезапущены. Это приведет к сбою всех выполняющихся и ожидающих заданий при завершении операции масштабирования. Однако после завершения операции вы можете повторно отправить задания.
* Apache HBase

    Вы можете с легкостью добавлять и удалять узлы данных в работающем кластере HBase. Балансировка региональных серверов выполняется автоматически в течение нескольких минут после завершения операции масштабирования. Но их также можно сбалансировать вручную, выполнив вход в головной узел кластера и выполнив следующие команды в окне командной строки:

        >pushd %HBASE_HOME%\bin
        >hbase shell
        >balancer

    Дополнительные сведения об использовании оболочки HBase см. []
* Apache Storm

    Вы можете с легкостью добавлять и удалять узлы данных в работающем кластере Storm. Но после успешного завершения операции масштабирования потребуется повторная балансировка топологии.

    Повторную балансировку можно выполнить двумя способами:

  * Веб-интерфейс Apache Storm
  * с помощью программы командной строки.

    Дополнительные сведения см. в [документации по Apache Storm](http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html).

    В кластере HDInsight доступен веб-интерфейс Storm.

    ![HDInsight, storm, масштабирование, перераспределение](./media/hdinsight-administer-use-management-portal/hdinsight-portal-scale-cluster-storm-rebalance.png)

    Ниже приведен пример использования команды CLI для повторной балансировки топологии Storm:

        ## Reconfigure the topology "mytopology" to use 5 worker processes,
        ## the spout "blue-spout" to use 3 executors, and
        ## the bolt "yellow-bolt" to use 10 executors
        $ storm rebalance mytopology -n 5 -e blue-spout=3 -e yellow-bolt=10

**Масштабирование кластеров**

1. Войдите на [портал][azure-portal].
2. В меню слева щелкните **Просмотреть все**, выберите **Кластеры HDInsight**, а затем щелкните имя нужного кластера.
3. В верхнем меню щелкните **Параметры** и выберите пункт **Изменить масштаб кластера**.
4. В поле **Количество рабочих узлов**укажите нужное количество. Максимальное количество узлов кластера зависит от типа подписки Azure. Чтобы увеличить лимит, обратитесь в службу поддержки по вопросам выставления счетов.  Сведения о затратах будут отражать внесенные изменения количества узлов.

    ![HDInsight, Hadoop, HBase, Storm Spark, масштабирование](./media/hdinsight-administer-use-management-portal/hdinsight.portal.scale.cluster.png)

## <a name="pauseshut-down-clusters"></a>Приостановка и завершение работы кластеров
Большинство заданий Hadoop представляют собой пакетные задания, выполняемые от случая к случаю. Обычно кластеры Hadoop в течение долгих промежутков времени не используются для обработки данных. В случае с HDInsight ваши данные хранятся в службе хранилища Azure, что позволяет безопасно удалить неиспользуемый кластер.
Плата за кластеры HDInsight взимается, даже когда они не используются. Поскольку стоимость кластера во много раз превышает стоимость хранилища, экономически целесообразно удалять неиспользуемые кластеры.

Этот процесс можно выполнять автоматически несколькими способами:

* С помощью фабрики данных Azure. Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Связанные службы вычислений](../data-factory/compute-linked-services.md) и [Преобразование данных в фабрике данных Azure](../data-factory/transform-data.md).
* С помощью Azure PowerShell.  См. статью [Анализ данных о задержке рейсов с помощью Hive в HDInsight](hdinsight-analyze-flight-delay-data.md).
* Используйте классический интерфейс командной строки Azure. См. раздел [Управление кластерами HDInsight с помощью классического интерфейса командной строки Azure](hdinsight-administer-use-command-line.md).
* С помощью пакета SDK для HDInsight .NET. См. дополнительные сведения об [отправке заданий Apache Hadoop](hadoop/submit-apache-hadoop-jobs-programmatically.md).

Сведения о ценах см. на странице [цен на HDInsight](https://azure.microsoft.com/pricing/details/hdinsight/). Удаление кластера на портале описано в разделе [Удаление кластеров](#delete-clusters).

## <a name="change-cluster-username"></a>Изменение имени пользователя кластера
Кластер HDInsight может иметь две учетные записи пользователя. Учетная запись пользователя кластера HDInsight создается в процессе создания кластера. Вы также можете создать учетную запись пользователя RDP для доступа к кластеру через RDP. См. сведения о [включении удаленного рабочего стола](#connect-to-hdinsight-clusters-by-using-rdp).

**Изменение имени пользователя и пароля для кластера HDInsight**

1. Войдите на [портал][azure-portal].
2. В меню слева щелкните **Просмотреть все**, выберите **Кластеры HDInsight**, а затем щелкните имя нужного кластера.
3. В верхнем меню щелкните **Параметры** и выберите пункт **Cluster Login** (Вход в кластер).
4. Если **вход в кластер** был ранее включен, следует нажать кнопку **Отключить**, а затем — кнопку **Включить**. Без этого вы не сможете изменить имя пользователя и пароль.
5. В поле **Имя пользователя для входа в кластер** или **Пароль для входа в кластер** введите новое значение и нажмите кнопку **Сохранить**.

    ![hdinsight, изменение, пользователь кластера, имя пользователя, пароль, http пользователь](./media/hdinsight-administer-use-management-portal/hdinsight.portal.change.username.password.png)

## <a name="grantrevoke-access"></a>Предоставление и отмена доступа
В кластерах HDInsight имеются следующие веб-службы HTTP (все эти службы имеют конечные точки RESTful):

* ODBC
* JDBC
* Ambari
* Oozie
* Templeton

По умолчанию эти службы предоставляются для доступа. Вы можете отменять и предоставлять доступ на портале Azure.

> [!NOTE]
> Предоставляя или отменяя доступ, вы сбрасываете имя пользователя и пароль кластера.
>
>

**Предоставление и отмена доступа к веб-службам HTTP**

1. Войдите на [портал][azure-portal].
2. В меню слева щелкните **Просмотреть все**, выберите **Кластеры HDInsight**, а затем щелкните имя нужного кластера.
3. В верхнем меню щелкните **Параметры** и выберите пункт **Cluster Login** (Вход в кластер).
4. Если **вход в кластер** был ранее включен, следует нажать кнопку **Отключить**, а затем — кнопку **Включить**. Без этого вы не сможете изменить имя пользователя и пароль.
5. В полях **Имя пользователя для входа в кластер** и **Пароль для входа в кластер** введите для кластера соответственно новое имя пользователя и пароль.
6. Щелкните **СОХРАНИТЬ**.

    ![hdinsight, предоставление, отмена, http, веб-служба, доступ](./media/hdinsight-administer-use-management-portal/hdinsight.portal.change.username.password.png)

## <a name="find-the-default-storage-account"></a>Поиск учетной записи хранения по умолчанию
Каждый кластер HDInsight имеет учетную запись хранения, используемую по умолчанию. Учетную запись хранения по умолчанию и ее ключи можно найти, выбрав **Параметры**/**Свойства**/**Ключи хранилища Azure**. См. раздел [Отображение кластеров](#list-and-show-clusters).

## <a name="find-the-resource-group"></a>Поиск группы ресурсов
В режиме Azure Resource Manager каждый кластер HDInsight создается с группой ресурсов Azure. Группу ресурсов Azure, к которой принадлежит кластер, можно увидеть:

* в списке кластеров в столбце **Группа ресурсов** ;
* на плитке кластера **Основное** .  

Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Отображение кластеров](#list-and-show-clusters).

## <a name="open-hdinsight-query-console"></a>Открытие консоли запросов HDInsight
Консоль запросов HDInsight содержит следующие компоненты.

* **Редактор кустов**. Графический пользовательский веб-интерфейс для отправки заданий Hive.  См. дополнительные сведения о [выполнении запросов Apache Hive с помощью консоли запросов](hadoop/apache-hadoop-use-hive-query-console.md).

    ![Редактор кустов на портале HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight-hive-editor.png)
* **Журнал заданий**. Позволяет отслеживать задания Hadoop.  

    ![История заданий на портале HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight-job-history.png)

    Щелкните **имя запроса**, чтобы увидеть подробную информацию о нем, в том числе свойства задания, **запрос задания** и \*\*выходные данные задания. Здесь также можно загрузить на локальный компьютер сам запрос и результат его работы.
* **Обозреватель файлов**. Просмотр учетной записи хранения по умолчанию и связанных учетных записей хранения.

    ![Обозреватель файлов на портале HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight-file-browser.png)

    На снимке экрана тип **<Account>** обозначает, что этот элемент является учетной записью хранения Azure.  Чтобы просмотреть файлы, щелкните имя учетной записи.
* **Пользовательский интерфейс Hadoop:**

    ![Пользовательский интерфейс Hadoop на портале HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight-hadoop-ui.png)

    В **пользовательском интерфейсе Hadoop*можно просматривать файлы и журналы.
* **Пользовательский интерфейс Yarn:**

    ![Пользовательский интерфейс YARN на портале HDInsight](./media/hdinsight-administer-use-management-portal/hdinsight-yarn-ui.png)

## <a name="run-hive-queries"></a>Выполнение запросов Hive
Чтобы выполнить задание Hive на портале, в консоли запросов HDInsight щелкните **Hive Editor** (Редактор кустов). Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Открытие консоли запросов HDInsight](#open-hdinsight-query-console).

## <a name="monitor-jobs"></a>Мониторинг заданий
Для мониторинга заданий на портале в консоли запросов HDInsight щелкните **Журнал заданий**. Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Открытие консоли запросов HDInsight](#open-hdinsight-query-console).

## <a name="browse-files"></a>Обзор файлов
Чтобы просмотреть файлы, хранящиеся в учетной записи хранения по умолчанию или в связанных учетных записях, в консоли запросов HDInsight щелкните **File Browser** (Обозреватель файлов). Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Открытие консоли запросов HDInsight](#open-hdinsight-query-console).

Можно также использовать служебную программу **обзора файловой системы**, которая есть в **пользовательском интерфейсе Hadoop** в консоли HDInsight.  Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Открытие консоли запросов HDInsight](#open-hdinsight-query-console).

## <a name="monitor-cluster-usage"></a>Мониторинг использования кластера
В колонке кластера HDInsight в разделе **Использование** отображаются сведения о количестве ядер, доступных для HDInsight в рамках вашей подписки, а также о количестве ядер, выделенных для этого кластера, и их распределении между узлами в кластере. См. раздел [Отображение кластеров](#list-and-show-clusters).

> [!IMPORTANT]
> Для мониторинга служб, предоставляемых кластером HDInsight, необходимо использовать интерфейс Ambari Web или API REST Ambari. См. дополнительные сведения об [управлении кластерами HDInsight с помощью Apache Ambari](hdinsight-hadoop-manage-ambari.md).
>
>

## <a name="open-hadoop-ui"></a>Открытие пользовательского интерфейса Hadoop
Если вы желаете проследить за работой кластера, просмотреть файлы или проверить журналы, в консоли запросов HDInsight щелкните **Hadoop UI** (Пользовательский интерфейс Hadoop). Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Открытие консоли запросов HDInsight](#open-hdinsight-query-console).

## <a name="open-yarn-ui"></a>Открытие пользовательского интерфейса Yarn
Чтобы использовать пользовательский интерфейс Yarn, в консоли запросов HDInsight щелкните **Yarn UI** (Пользовательский интерфейс Yarn). Выполняемые по запросу и самоопределяющиеся связанные службы HDInsight описаны в статьях [Открытие консоли запросов HDInsight](#open-hdinsight-query-console).

## <a name="connect-to-clusters-using-rdp"></a>Подключение к кластерам по протоколу RDP
Учетные данные, указанные при создании кластера, предоставляют доступ к службам в кластере, но не к самому кластеру через удаленный рабочий стол. Вы можете включить доступ к удаленному рабочему столу во время или после подготовки кластера. Инструкции о том, как включить удаленный рабочий стол во время создания кластера, см. в статье [Создание кластеров Hadoop под управлением Windows в HDInsight](hdinsight-hadoop-provision-linux-clusters.md).

**Включение удаленного рабочего стола**

1. Войдите на [портал][azure-portal].
2. В меню слева щелкните **Просмотреть все**, выберите **Кластеры HDInsight**, а затем щелкните имя нужного кластера.
3. В верхнем меню щелкните **Параметры** и выберите пункт **Удаленный рабочий стол**.
4. Заполните поля **Срок действия**, **Имя пользователя удаленного рабочего стола** и **Пароль удаленного рабочего стола**, а затем нажмите кнопку **Включить**.

    ![Hdinsight, включить, отключить, настроить, удаленный рабочий стол](./media/hdinsight-administer-use-management-portal/hdinsight.portal.remote.desktop.png)

    Для поля "Срок действия" значением по умолчанию является неделя.

   > [!NOTE]
   > Можно также включить удаленный рабочий стол в кластере с помощью пакета SDK для HDInsight .NET. Используйте метод **EnableRdp** в клиентском объекте HDInsight следующим образом: **client.EnableRdp(имя_кластера, расположение, "rdpuser", "rdppassword", DateTime.Now.AddDays(6))**. Аналогично, чтобы отключить удаленный рабочий стол в кластере, можно использовать **client.DisableRdp(имя_кластера, расположение)**. Дополнительные сведения об этих методах см. в [справочнике по пакету SDK для HDInsight .NET](https://go.microsoft.com/fwlink/?LinkId=529017). Это применимо только для кластеров HDInsight под управлением Windows.
   >
   >

**Подключение к кластеру с помощью RDP**

1. Войдите на [портал][azure-portal].
2. В меню слева щелкните **Просмотреть все**, выберите **Кластеры HDInsight**, а затем щелкните имя нужного кластера.
3. В верхнем меню щелкните **Параметры** и выберите пункт **Удаленный рабочий стол**.
4. Нажмите кнопку **Подключить** , а затем следуйте инструкциям на экране. Если кнопка «Подключить» неактивна, сначала активируйте ее. Убедитесь, что вы используете имя пользователя и пароль удаленного рабочего стола.  Нельзя использовать учетные данные пользователя кластера.

## <a name="open-hadoop-command-line"></a>Открытие командной строки Hadoop
Чтобы подключиться к кластеру с помощью удаленного рабочего стола и использовать командную строку Hadoop, необходимо сначала включить доступ к кластеру с удаленного рабочего стола, как описано в предыдущем разделе.

**Открытие командной строки Hadoop.**

1. Подключитесь к кластеру с помощью удаленного рабочего стола.
2. На рабочем столе дважды щелкните элемент **Командная строка Hadoop**.

    ![HDI.HadoopCommandLine][image-hadoopcommandline]

    См. дополнительные сведения о [командах Apache Hadoop](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/CommandsManual.html).

На предыдущем снимке экрана в имя папки включен номер версии Hadoop. Номер версии может меняться в зависимости от версии компонентов Hadoop, установленных в кластере. Для ссылки на эти папки можно использовать переменные среды Hadoop. Например: 

    cd %hadoop_home%
    cd %hive_home%
    cd %hbase_home%
    cd %pig_home%
    cd %sqoop_home%
    cd %hcatalog_home%

## <a name="next-steps"></a>Дополнительная информация
Из этой статьи вы узнали, как создать кластер HDInsight с помощью портала и открыть программу командной строки Apache Hadoop. Для получения дополнительных сведений ознакомьтесь со следующими статьями:

* [Администрирование HDInsight с помощью Azure PowerShell](hdinsight-administer-use-powershell.md)
* [Администрирование HDInsight с помощью классического интерфейса командной строки Azure CLI](hdinsight-administer-use-command-line.md)
* [Создание кластеров HDInsight](hdinsight-hadoop-provision-linux-clusters.md)
* [Отправка заданий Apache Hadoop программными средствами](hadoop/submit-apache-hadoop-jobs-programmatically.md)
* [Начало работы с Azure HDInsight](hadoop/apache-hadoop-linux-tutorial-get-started.md)
* [Какая версия Apache Hadoop включена в Azure HDInsight?](hdinsight-component-versioning.md)

[azure-portal]: https://portal.azure.com
[image-hadoopcommandline]: ./media/hdinsight-administer-use-management-portal/hdinsight-hadoop-command-line.png "Командная строка Hadoop"
