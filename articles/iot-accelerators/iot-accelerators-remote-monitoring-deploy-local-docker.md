---
title: Локальное развертывание решения для удаленного мониторинга Docker в Azure | Документация Майкрософт
description: В этом руководстве показано, как развернуть акселератор решений для удаленного мониторинга на локальном компьютере в целях тестирования и разработки.
author: avneet723
manager: hegate
ms.author: avneet723
ms.service: iot-accelerators
services: iot-accelerators
ms.date: 10/25/2018
ms.topic: conceptual
ms.openlocfilehash: 91f43473a5648be5264038993f43b61887e0c363
ms.sourcegitcommit: ba4570d778187a975645a45920d1d631139ac36e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2018
ms.locfileid: "51285416"
---
# <a name="deploy-the-remote-monitoring-solution-accelerator-locally---docker"></a>Локальное развертывание акселератора решений для удаленного мониторинга Docker

[!INCLUDE [iot-accelerators-selector-local](../../includes/iot-accelerators-selector-local.md)]

В этой статье показано, как развернуть акселератор решений для удаленного мониторинга на локальном компьютере в целях тестирования и разработки. В этой статье показано, как развернуть микрослужбы в контейнерах Docker. Для развертывания локальных микрослужб используются следующие облачные службы: Центр Интернета вещей, Cosmos DB, Azure Streaming Analytics и службы аналитики временных рядов Azure.

Если вы хотите запустить акселератор решений для удаленного мониторинга в IDE на локальном компьютере, см. статью [Локальное развертывание акселератора решений для удаленного мониторинга](iot-accelerators-remote-monitoring-deploy-local.md).

## <a name="prerequisites"></a>Предварительные требования

Для развертывания служб Azure, используемых акселератором решений для удаленного мониторинга, требуется активная подписка Azure.

Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure](http://azure.microsoft.com/pricing/free-trial/).

### <a name="machine-setup"></a>Настройки компьютера

Для завершения локального развертывания необходимо установить следующие средства на локальный компьютер разработчика:

* [Git](https://git-scm.com/)
* [Docker](https://www.docker.com)
* [Visual Studio](https://visualstudio.microsoft.com/)
* [Node.js версии 8](https://nodejs.org/). Это программное обеспечение является необходимым компонентом для интерфейса командной строки PCS, который используется в сценариях для создания ресурсов Azure. Не используйте Node.js версии 10.

> [!NOTE]
> Эти средства доступны на многих платформах, включая Windows, Linux и iOS.

[!INCLUDE [iot-accelerators-local-setup](../../includes/iot-accelerators-local-setup.md)]

## <a name="run-the-microservices-in-docker"></a>Запуск микрослужб в Docker

Чтобы иметь доступ к переменным средам, установленным сценарием **start.cmd**, откройте командную строку. Чтобы проверить, являются ли переменные среды настроенными в ОС Windows, выполните следующую команду.

```cmd
set PCS
```

В результате выполнения команды появятся переменные среды, установленные сценарием **start.cmd**.

Убедитесь, что Docker запущен на локальном компьютере.

Микрослужбам, работающим в локальных контейнерах Docker, необходим доступ к облачным службам Azure. Вы можете протестировать подключение среды Docker к Интернету, используя следующую команду, которая проверит адреса в Интернете, находящиеся внутри контейнера.

```cmd/sh
docker run --rm -ti library/alpine ping google.com
```

Чтобы запустить акселератор решений, перейдите в папку **services\\scripts\\local** в среде командной строки и выполните следующую команду:

```cmd/sh
docker-compose up
```

При первом выполнении этой команды Docker скачивает образы микрослужб из центра Docker для локальной сборки контейнеров. При последующих выполнениях Docker запускает контейнеры немедленно.

> [!TIP]
> Публикация образов Docker с новой функциональностью выполняется регулярно. Чтобы очистить локальные контейнеры Docker и соответствующие образы, прежде чем извлечь последние из них, можно использовать следующий набор команд. 

```cmd/sh
docker list
docker rm <list_of_containers>
docker rmi <list_of_images>
```

С помощью отдельной оболочки можно просмотреть журналы из контейнера. Для этого сначала найдите идентификатор контейнера с помощью команды `docker ps`. Затем с помощью команды `docker logs {container-id} --tail 1000` просмотрите последние 1000 сущностей для указанного контейнера.

### <a name="start-the-stream-analytics-job"></a>Запуск задания Stream Analytics

Чтобы запустить задание Stream Analytics, выполните следующие действия:

1. Перейдите на [портал Azure](https://portal.azure.com).
1. Перейдите к **группе ресурсов**, созданной для этого решения. Имя группы ресурсов совпадает с именем решения, выбранного при запуске сценария **start.cmd**.
1. В списке ресурсов щелкните **Задание Stream Analytics**.
1. На странице **обзор** задания Stream Analytics нажмите кнопку **Запуск**. Затем, чтобы немедленно начать задание, щелкните **Пуск**.

### <a name="connect-to-the-dashboard"></a>Подключение к панели мониторинга

Для доступа к панели мониторинга решения для удаленного мониторинга перейдите по адресу [http://localhost:8080](http://localhost:8080) в браузере. Теперь можно использовать веб-Интерфейс и локальные микрослужбы.

## <a name="clean-up"></a>Очистка

Чтобы избежать ненужных расходов, после завершения тестирования удалите облачные службы из подписки Azure. Чтобы удалить службы — перейти на [портал Azure](https://ms.portal.azure.com) и удалить группу ресурсов, созданную при запуске сценария **start.cmd**.

Воспользуйтесь командой `docker-compose down --rmi all`, чтобы удалить образы Docker и освободить место на локальном компьютере. Также можно удалить локальную копию репозитория удаленного мониторинга, созданную при клонировании исходного кода из GitHub.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

> [!div class="checklist"]
> * настройка локальной среды разработки;
> * настройка акселератора решений;
> * развертывание акселератора решений;
> * вход в акселератор решений.

Теперь, когда вы развернули решение для удаленного мониторинга, ознакомьтесь со статьей [Краткое руководство. Использование облачного решения для удаленного мониторинга](quickstart-remote-monitoring-deploy.md).

<!-- Next tutorials in the sequence -->