---
title: Что такое хранилище ключей Azure? | Документы Майкрософт
description: Узнайте, как Azure Key Vault защищает криптографические ключи и секреты, используемые облачными приложениями и службами.
services: key-vault
author: msmbaldwin
manager: rkarlin
tags: azure-resource-manager
ms.service: key-vault
ms.topic: conceptual
ms.date: 01/18/2019
ms.author: mbaldwin
ms.openlocfilehash: cf8101923f898c4ce190f3eaf2f3a9b2430cc723
ms.sourcegitcommit: 7c5a2a3068e5330b77f3c6738d6de1e03d3c3b7d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2019
ms.locfileid: "70885126"
---
# <a name="what-is-azure-key-vault"></a>Что такое хранилище ключей Azure?

Облачные приложения и службы используют криптографические ключи и секреты для обеспечения безопасности информации. Azure Key Vault защищает эти ключи и секреты. При использовании Key Vault можно зашифровать ключи проверки подлинности, ключи учетной записи хранения, ключи шифрования данных, PFX-файлы и пароли с помощью ключей, защищенных аппаратными модулями безопасности (HSM).

Key Vault помогает решить следующие проблемы:

- **Управление секретами**: Безопасное хранение и строгое управление доступом к маркерам, паролям, сертификатам, ключам API и другим секретам.
- **Управление ключами**: Создание и управление ключами шифрования, которые шифруют данные. 
- **Управление сертификатами**: Подготавливайте и развертывайте общедоступные и частные SSL/TLS-сертификаты для использования с Azure и внутренними подключенными ресурсами. 
- **Хранить секреты, поддерживаемые HSM**: Для защиты секретов и ключей используйте программное обеспечение или FIPS 140-2 уровня 2, проверенные HSM.

## <a name="basic-concepts"></a>Основные понятия

Azure Key Vault — это средство для безопасного хранения и доступа к секретам. Секрет — это то, к чему необходимо строго контролировать доступ, например ключи API, пароли или сертификаты. Хранилище — это логическая группа секретов.

Ниже приведены другие важные термины.

- **Tenant:** Это организация, которая владеет и управляет определенным экземпляром облачных служб Майкрософт. Чаще всего он используется для ссылки на набор служб Azure и Office 365 для Организации.

- **Владелец хранилища**. Он может создать хранилище ключей, получить полный доступ и контроль над ним. Владелец хранилища имеет доступ к секретам и ключам, а также может настроить аудит журнала. Администраторы могут управлять жизненным циклом ключей. Он может откатить ключ до новой версии, создать ее резервную копию и выполнять другие связанные задачи.

- **Объект-получатель хранилища**. Он может выполнять действия в ресурсах хранилища ключей, когда владелец хранилища предоставляет пользовательский доступ. Доступные действия зависят от предоставленных разрешений.

- **Ресурс**: Это управляемый элемент, доступный в Azure. Распространенными примерами являются виртуальная машина, учетная запись хранения, веб-приложение, база данных и виртуальная сеть. Существует много других.

- **Группа ресурсов.** Группа ресурсов — это контейнер, содержащий связанные ресурсы для решения Azure. В группу ресурсов могут входить все ресурсы приложения или только те, которыми необходимо управлять совместно. Пользователи могут выбрать оптимальный для своей организации способ распределения ресурсов в группах ресурсов.

- **Субъект-служба**. Субъект-служба Azure — это удостоверение безопасности, которое пользовательские приложения, службы и средства автоматизации используют для доступа к конкретным ресурсам Azure. Его следует рассматривать как "удостоверение пользователя" (имя пользователя и пароль или сертификат) с определенной ролью и жестко управляемыми разрешениями. В отличие от удостоверений пользователей субъект-служба должен выполнять только определенные задачи. Она повышает безопасность, если предоставить ей только минимальный уровень разрешений, необходимый для выполнения задач управления.

- [Azure Active Directory (Azure AD)](../active-directory/active-directory-whatis.md). Это служба Active Directory для клиента. Каждый каталог содержит один или несколько доменов. Каталог может иметь много подписок, связанных с ним, но только один клиент.

- **Идентификатор клиента Azure**. Это уникальный способ идентификации экземпляра Azure AD в пределах подписки Azure.

- **Управляемые удостоверения**: Azure Key Vault позволяет обеспечить безопасное хранение учетных данных, а также других ключей и секретов, но для их получения код должен выполнять аутентификацию в Key Vault. Управляемое удостоверение упрощает решение этой задачи, предоставляя службам Azure автоматически управляемое удостоверение в Azure AD. Это удостоверение можно использовать для аутентификации хранилища ключей или любой службы, которая поддерживает аутентификацию Azure AD, не храня какие-либо учетные данные в коде. Дополнительные сведения см. на следующем рисунке и в [обзоре управляемых удостоверений для ресурсов Azure](../active-directory/managed-identities-azure-resources/overview.md).

    ![Схема работы управляемых удостоверений для ресурсов Azure](./media/key-vault-whatis/msi.png)

## <a name="authentication"></a>Проверка подлинности
Для выполнения любых операций с Key Vault необходимо сначала пройти проверку подлинности. Существует три способа проверки подлинности в Key Vault.

- [Управляемые удостоверения для ресурсов Azure](../active-directory/managed-identities-azure-resources/overview.md). При развертывании приложения на виртуальной машине в Azure можно назначить удостоверение виртуальной машине, имеющей доступ к Key Vault. Вы также можете назначить удостоверения [другим ресурсам Azure](../active-directory/managed-identities-azure-resources/overview.md). Преимуществом этого подхода является то, что приложение или служба не управляют поворотом первого секрета. Azure автоматически меняет удостоверение. Рекомендуется использовать такой подход. 
- **Субъект-служба и сертификат**: Можно использовать субъект-службу и связанный сертификат, который имеет доступ к Key Vault. Мы не рекомендуем использовать этот подход, так как владелец приложения или разработчик должен поворачивать сертификат.
- **Субъект-служба и секретный код**: Хотя вы можете использовать субъект-службу и секрет для проверки подлинности в Key Vault, мы не рекомендуем его применять. Трудно автоматически сменить секрет начальной загрузки, который используется для проверки подлинности в Key Vault.


## <a name="key-vault-roles"></a>Роли Key Vault

Используйте таблицу ниже, чтобы лучше понять, как хранилище ключей может помочь в удовлетворении требований разработчиков и администраторов безопасности.

| Role | Проблема | Решение с помощью хранилища ключей Azure |
| --- | --- | --- |
| Разработчик приложения Azure |"Я хочу написать приложение для Azure, использующее ключи для подписывания и шифрования. Но я хочу, чтобы эти ключи были внешними из моего приложения, чтобы решение было пригодным для географически распределенного приложения. <br/><br/>Необходимо, чтобы эти ключи и секреты были защищены и не нужно было писать код самостоятельно, а также чтобы их можно было с легкостью и оптимальной производительностью использовать в моем приложении". |√ Ключи хранятся в хранилище, и при необходимости их можно вызывать с помощью URI.<br/><br/> √ Azure защищает ключи с использованием стандартных отраслевых алгоритмов, методов управления длиной ключей и аппаратных модулей безопасности.<br/><br/> √ Ключи обрабатываются в аппаратных модулях безопасности, которые находятся в тех же центрах обработки данных Azure, что и приложения. Это обеспечивает более высокую надежность и менее длительную задержку, чем при расположении ключей в другом месте, например в локальной среде. |
| Разработчик программного обеспечения как услуги (SaaS) |«Я не хочу нести ответственность или связывать себя потенциальными обязательствами, связанными с ключами и секретами клиентов моих заказчиков. <br/><br/>Мне нужно, чтобы заказчики владели и управляли своими ключами, а мне можно было полностью сосредоточиться на своей основной работе, а именно предоставлении базовых функций программного обеспечения". |√ Клиенты могут импортировать свои ключи в Azure и управлять ими. Если приложению SaaS требуется выполнять криптографические операции с помощью ключей клиентов, Key Vault выполняет эти операции от имени приложения. Приложение не видит ключи клиентов. |
| Руководитель службы безопасности |«Мне необходимо знать, что аппаратные модули безопасности, используемые в наших приложениях, соответствуют стандарту FIPS 140-2 уровня 2, обеспечивающему безопасное управление ключами. <br/><br/>Я также хочу убедиться, что моя организация может управлять жизненным циклом ключей и отслеживать их использование. <br/><br/>Кроме того, хотя мы используем множество служб и ресурсов Azure, необходимо, чтобы ключами можно было управлять из одного расположения в Azure». |√ Аппаратные модули безопасности прошли проверку по стандарту FIPS 140-2 уровня 2.<br/><br/>√ Хранилище ключей разработано таким образом, чтобы сотрудники Майкрософт не могли видеть или извлекать ваши ключи.<br/><br/>√ Использование ключа протоколируется почти в реальном времени.<br/><br/>√ Хранилище предоставляет единый интерфейс, независимо от количества хранилищ в Azure, поддерживаемых регионов и использующих их приложений. |

Хранилища ключей может создавать и использовать любой пользователь, у которого есть подписка Azure. Хотя Key Vault преимущества разработчиков и администраторов безопасности, их можно реализовать и управлять администратором организации, который управляет другими службами Azure. Например, этот администратор может войти в систему с помощью подписки Azure, создать хранилище для Организации, в которой будут храниться ключи, а затем отвечать на такие задачи, как:

- создание или импорт ключа или секрета;
- отзыв или удаление ключа или секрета;
- авторизация пользователей или приложений для доступа к хранилищу ключей с целью управления ключами и секретами или их использования;
- настройка использования ключей (например, подписи и шифрования);
- мониторинг использования ключей.

Затем этот администратор предоставляет разработчикам универсальные коды ресурса (URI) для вызова из своих приложений. Этот администратор также предоставляет администратору безопасности сведения о ведении журнала использования ключа. 

![Общие сведения о работе хранилища Azure Key Vault][1]

Разработчики также могут управлять ключами напрямую с помощью API. Дополнительные сведения см. в статье [Руководство разработчика хранилища ключей Azure](key-vault-developers-guide.md).

## <a name="next-steps"></a>Следующие шаги

Узнайте, как [защитить хранилище](key-vault-secure-your-key-vault.md).

<!--Image references-->
[1]: ./media/key-vault-whatis/AzureKeyVault_overview.png
Хранилище ключей Azure доступно в большинстве регионов. Дополнительные сведения см. на странице [цен на хранилище ключей](https://azure.microsoft.com/pricing/details/key-vault/).
