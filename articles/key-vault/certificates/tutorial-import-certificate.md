---
title: Руководство. Импорт сертификата в Key Vault с помощью портала Azure | Документация Майкрософт
description: Руководство, в котором показано, как импортировать сертификат в Azure Key Vault
services: key-vault
author: msmbaldwin
manager: rkarlin
tags: azure-resource-manager
ms.service: key-vault
ms.subservice: certificates
ms.topic: tutorial
ms.custom: mvc, devx-track-azurecli
ms.date: 04/16/2020
ms.author: sebansal
ms.openlocfilehash: 626d7f161d23e6105eea0ca160cd2c9be0ed0ea0
ms.sourcegitcommit: 2aa52d30e7b733616d6d92633436e499fbe8b069
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97935943"
---
# <a name="tutorial-import-a-certificate-in-azure-key-vault"></a>Руководство по импорту сертификата в Azure Key Vault

Azure Key Vault — это облачная служба, которая предоставляет защищенное хранилище для секретов. Вы можете безопасно хранить ключи, пароли, сертификаты и другие секреты. Создать хранилища Azure Key Vault и управлять ими можно на портале Azure. В этом руководстве вы создадите хранилище ключей, а затем используете его для импорта сертификата. См. дополнительные сведения о [Key Vault](../general/overview.md).

В этом руководстве описаны следующие процедуры.

> [!div class="checklist"]
> * Создать хранилище ключей.
> * Импорт сертификата в Key Vault с помощью портала.
> * Импорт сертификата в Key Vault с помощью интерфейса командной строки.
> * Импорт сертификата в Key Vault с помощью PowerShell.


Перед началом работы ознакомьтесь c [основными понятиями службы Key Vault](../general/basic-concepts.md). 

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="sign-in-to-azure"></a>Вход в Azure

Войдите на портал Azure по адресу https://portal.azure.com.

## <a name="create-a-vault"></a>Создание хранилища

1. На **домашней странице** или в меню портала Azure выберите команду **Создать ресурс**.
2. В поле поиска введите **Key Vault**.
3. В списке результатов выберите **Key Vault**.
4. В разделе Key Vault выберите **Создать**.
5. В разделе **Создать Key Vault** введите приведенные ниже сведения.
    - **Name** (Имя). Укажите уникальное имя. В нашем примере это **Example-Vault**. 
    - **Подписка**: Выберите подписку.
    - В разделе **Группа ресурсов** выберите **Создать** и введите имя группы ресурсов.
    - В раскрывающемся меню **Расположение** выберите расположение.
    - Для других параметров оставьте значения по умолчанию.
6. Указав приведенные выше сведения, выберите **Создать**.

Запишите значения двух указанных ниже свойств.

* **Имя хранилища.** В нашем примере это **Example-Vault**. Вы будете использовать это имя для выполнения других этапов.
* **URI хранилища**. В нашем примере это https://example-vault.vault.azure.net/. Необходимо, чтобы приложения, использующие ваше хранилище через REST API, использовали этот URI.

На этом этапе операции в новом хранилище ключей может выполнять только учетная запись Azure.

![Выходные данные после создания Key Vault](../media/certificates/tutorial-import-cert/vault-properties.png)

## <a name="import-a-certificate-to-key-vault"></a>Импорт сертификата в Key Vault

Чтобы импортировать сертификат в хранилище, необходимо иметь файл сертификата PEM или PFX на диске. В этом случае мы импортируем сертификат с помощью файла, который называется **ExampleCertificate**.

> [!IMPORTANT]
> В Azure Key Vault поддерживаются форматы сертификатов PFX и PEM. 
> - Формат файла PEM содержит один или несколько файлов сертификатов X509.
> - Формат файла PFX — это формат файла архива для хранения нескольких криптографических объектов в одном файле, т. е. сертификат сервера (выданный для вашего домена), соответствующий закрытый ключ, и может дополнительно включать промежуточный ЦС.  

1. На странице свойств Key Vault выберите **Сертификаты**.
2. Щелкните **Generate/Import** (Создать или импортировать).
3. На экране **Создание сертификата** выберите следующие значения:
    - **Метод создания сертификата**. Импорт.
    - **Имя сертификата**: ExampleCertificate.
    - **Отправка файла сертификата**: выберите файл сертификата с диска
    - **Пароль**. Если вы отправляете файл сертификата, защищенный паролем, укажите этот пароль здесь. В противном случае оставьте поле пустым. После успешного импорта файла сертификата хранилище ключей удалит этот пароль.
4. Нажмите кнопку **Создать**.

![Свойства сертификатов](../media/certificates/tutorial-import-cert/cert-import.png)

Добавив сертификат с помощью метода **Импорт**, Azure Key Vault автоматически заполнит параметры сертификата (например, срок действия, имя издателя, дата активации и т. д.).

Получив сообщение об успешном импорте сертификата, вы можете выбрать его в списке, чтобы просмотреть его свойства. 

![Снимок экрана: где просмотреть свойства сертификата.](../media/certificates/tutorial-import-cert/current-version-hidden.png)

## <a name="import-a-certificate-using-azure-cli"></a>Импорт сертификата с помощью Azure CLI

Импорт сертификата в указанное хранилище ключей. Импорт допустимого существующего сертификата, содержащего закрытый ключ, в Azure Key Vault. Импортируемый файл может иметь формат PFX или PEM. Если сертификат находится в формате PEM, PEM-файл должен содержать ключ, а также сертификаты x509. Для этой операции требуются разрешения на сертификаты и импорт.

```azurecli
az keyvault certificate import --file
                               --name
                               --vault-name
                               [--disabled {false, true}]
                               [--only-show-errors]
                               [--password]
                               [--policy]
                               [--subscription]
                               [--tags]
```

Дополнительные сведения о параметрах см. [здесь](/cli/azure/keyvault/certificate?view=azure-cli-latest#az-keyvault-certificate-import).

После импорта сертификата его можно просмотреть с помощью пункта [Certificate show](/cli/azure/keyvault/certificate?view=azure-cli-latest#az-keyvault-certificate-show) (Просмотр сертификата)


```azurecli
az keyvault certificate show [--id]
                             [--name]
                             [--only-show-errors]
                             [--subscription]
                             [--vault-name]
                             [--version]
```

Теперь вы создали хранилище ключей, импортировали сертификат и просмотрели свойства сертификата.

## <a name="import-a-certificate-using-azure-powershell"></a>Импорт сертификата с помощью Azure PowerShell

```
Import-AzureKeyVaultCertificate
      [-VaultName] <String>
      [-Name] <String>
      -FilePath <String>
      [-Password <SecureString>]
      [-Tag <Hashtable>]
      [-DefaultProfile <IAzureContextContainer>]
      [-WhatIf]
      [-Confirm]
      [<CommonParameters>]
```

Дополнительные сведения о параметрах см. [здесь](/powershell/module/azurerm.keyvault/import-azurekeyvaultcertificate?view=azurermps-6.13.0).


## <a name="clean-up-resources"></a>Очистка ресурсов

Другие руководства о Key Vault созданы на основе этого документа. Если вы планируете продолжить работу с последующими краткими руководствами и статьями, эти ресурсы можно не удалять.
Удалите ненужную группу ресурсов. Key Vault и связанные ресурсы будут также удалены. Чтобы удалить группу ресурсов на портале, сделайте следующее:

1. В поле поиска в верхней части портала введите имя группы ресурсов. Если в результатах поиска отображается группа ресурсов, используемая в этом кратком руководстве, выберите ее.
2. Выберите **Удалить группу ресурсов**.
3. В поле **Введите имя группы ресурсов:** введите имя группы ресурсов и выберите **Удалить**.


## <a name="next-steps"></a>Дальнейшие действия

С помощью этого руководства вы создали Key Vault импортировали в него сертификат. Дополнительные сведения о Key Vault и его интеграции в приложения см. в следующих статьях.

- Узнайте больше об [управлении созданием сертификатов в Azure Key Vault](./create-certificate-scenarios.md).
- См. примеры [импорта сертификатов с помощью интерфейсов REST API](/rest/api/keyvault/importcertificate/importcertificate)
- Ознакомьтесь со статьей [Обзор системы безопасности Key Vault](../general/security-overview.md)