---
title: Анализ производительности запросов — "база данных Azure для PostgreSQL — один сервер"
description: В этой статье описывается функция анализ производительности запросов в базе данных Azure для PostgreSQL-Single Server.
author: sunilagarwal
ms.author: sunila
ms.service: postgresql
ms.topic: conceptual
ms.date: 08/21/2019
ms.openlocfilehash: babf2c8208732a194184549dfa5ed3228b376d0f
ms.sourcegitcommit: 19dce034650c654b656f44aab44de0c7a8bd7efe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/04/2020
ms.locfileid: "91710266"
---
# <a name="query-performance-insight"></a>Анализ производительности запросов 

**Применимо к:** База данных Azure для PostgreSQL — версии с одним сервером 9,6, 10, 11

Этот компонент помогает быстро определить наиболее медленно выполняющиеся запросы, их изменение со временем и ожидания каких действий влияют на них.

## <a name="permissions"></a>Разрешения
Чтобы просматривать текст запросов в анализе производительности запросов, требуются разрешения **Владельца** или **Участника**. **Модуль чтения** может просматривать графики и таблицы, но не текст запросов.

## <a name="prerequisites"></a>Предварительные требования
Чтобы компонент "Анализ производительности запросов" работал, данные должны находиться в [хранилище запросов](concepts-query-store.md).

## <a name="viewing-performance-insights"></a>Просмотр анализа производительности
Представление [анализа производительности запросов](concepts-query-performance-insight.md) на портале Azure содержит визуализации ключевых данных из хранилища запросов. 

На странице портал сервера базы данных Azure для PostgreSQL выберите пункт анализ **производительности запросов** в разделе **Интеллектуальная производительность** в строке меню.

:::image type="content" source="./media/concepts-query-performance-insight/query-performance-insight-landing-page.png" alt-text="Анализ производительности медленно выполняющихся запросов":::

На вкладке **длительные запросы** отображаются пять первых запросов по среднему времени выполнения, агрегированных за 15-минутные интервалы. Можно просмотреть дополнительные запросы, выбрав из раскрывающегося списка **число запросов** . При этом цвета, соответствующие тому или иному идентификатору запроса на графике, могут изменяться.

Чтобы уменьшить временной интервал графика, перетащите его границу. Кроме того, для просмотра более коротких или более длинных периодов используйте соответственно значки увеличения и уменьшения масштаба.

Дополнительные сведения о медленно выполняющихся запросах за выбранный временной интервал см. в таблице под графиком.

Откройте вкладку **Статистика ожидания**, чтобы посмотреть визуализации ожидания на сервере.

:::image type="content" source="./media/concepts-query-performance-insight/query-performance-insight-wait-statistics.png" alt-text="Анализ производительности медленно выполняющихся запросов":::

## <a name="considerations"></a>Рекомендации
* Анализ производительности запросов недоступна для [реплик чтения](concepts-read-replicas.md).

## <a name="next-steps"></a>Дальнейшие действия
- Дополнительные сведения о [мониторинге и настройке](concepts-monitoring.md) см. в базе данных Azure для PostgreSQL.


