---
title: Преобразование данных в конструкторе
titleSuffix: Azure Machine Learning
description: Сведения о преобразовании данных в конструкторе Машинного обучения Azure для создания собственных наборов данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
author: peterclu
ms.author: peterlu
ms.date: 06/28/2020
ms.topic: conceptual
ms.custom: how-to, designer
ms.openlocfilehash: f08d0f1be166630d9cf4b0b9236d78228fd78aae
ms.sourcegitcommit: 96918333d87f4029d4d6af7ac44635c833abb3da
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2020
ms.locfileid: "93312813"
---
# <a name="transform-data-in-azure-machine-learning-designer"></a>Преобразование данных в конструкторе Машинное обучение Azure


Из этой статьи вы узнаете, как преобразовывать и сохранять наборы данных в конструкторе Машинного обучения Azure для подготовки собственных данных для машинного обучения.

Используя пример набора данных [Adult Census Income Binary Classification](./samples-designer.md), мы подготовим два набора данных: один будет включать данные переписи совершеннолетних граждан США, а второй — данных совершеннолетних лиц, которые не являются гражданами США.

Вы узнаете, как выполнять следующие задачи:

1. Преобразование набора данных для подготовки к обучению.
1. Экспорт полученных наборов данных в хранилище данных.
1. Просмотр результатов.

Ознакомление с этим руководством обязательно для изучения статьи [Переобучение моделей конструктора](how-to-retrain-designer.md). В этой статье вы узнаете, как использовать преобразованные наборы данных для обучения нескольких моделей с параметрами конвейера.

[!INCLUDE [machine-learning-missing-ui](../../includes/machine-learning-missing-ui.md)]

## <a name="transform-a-dataset"></a>Преобразование набора данных

В этом разделе вы узнаете, как импортировать пример набора данных и разделить данные на наборы данных "США" и "Не США". Дополнительные сведения о том, как импортировать собственные данные в конструктор, см. в статье [Импорт данных](how-to-designer-import-data.md).

### <a name="import-data"></a>Импорт данных

Чтобы импортировать пример набора данных, выполните следующие действия.

1. Войдите на сайт <a href="https://ml.azure.com?tabs=jre" target="_blank">ml.azure.com</a> и выберите рабочую область, с которой хотите работать.

1. Перейдите в конструктор. Выберите **Простые модули предварительной сборки** , чтобы создать конвейер.

1. Выберите для запуска конвейера целевой объект вычислений по умолчанию.

1. Слева на холсте конвейера расположена палитра наборов данных и модулей. Щелкните **Наборы данных**. Затем просмотрите раздел **Примеры**.

1. Перетащите набор данных **Adult Census Income Binary Classification** на холст.

1. Выберите модуль набор данных **Adult Census Income**.

1. В области сведений справа от холста щелкните **Выходные данные**.

1. Нажмите на значок визуализации ![значок визуализации](media/how-to-designer-transform-data/visualize-icon.png).

1. В окне предварительного просмотра данных экспортируйте набор данных. Обратите внимание на значения столбца "Страна происхождения".

### <a name="split-the-data"></a>Разделение данных

В этом разделе вы будете определять и отделять строки, где в столбце "Родная страна" указано "США", с помощью модуля [Разделение данных](algorithm-module-reference/split-data.md). 

1. В палитре модулей слева от холста разверните раздел **Преобразование данных** и найдите модуль **Разделение данных**.

1. Перетащите модуль **Разделение данных** на холст в место под модулем набора данных.

1. Подключите модуль набора данных к модулю **Разделение данных**.

1. Выберите модуль **Split Data** (Разделение данных).

1. В области сведений о модуле справа от холста выберите в поле **Режим разделения** значение **Регулярное выражение**.

1. Введите **регулярное выражение** : `\"native-country" United-States`.

    Режим **регулярное выражение** проверяет значение в одном столбце. Дополнительные сведения о модуле "Разделение данных" см. на [странице справки по модулю соответствующего алгоритма](algorithm-module-reference/split-data.md).

Теперь конвейер будет выглядеть следующим образом:

:::image type="content" source="./media/how-to-designer-transform-data/split-data.png"alt-text="Снимок экрана, демонстрирующий настройку конвейера и модуля Разделение данных":::


## <a name="save-the-datasets"></a>Сохранение наборов данных

Теперь, когда ваш конвейер настроен на разделение данных, необходимо указать, где должны храниться наборы данных. В этом примере используйте для сохранения набора данных в хранилище данных модуль **Экспорт данных**. Дополнительные сведения о хранилищах данных см. в статье [Подключение к службам хранилища Azure](how-to-access-data.md).

1. В палитре модулей слева от холста разверните раздел **Входные и выходные данные** и найдите модуль **Экспорт данных**.

1. Перетащите два модуля **Экспорт данных** под модуль **Разделение данных**.

1. Подключите каждый из выходных портов модуля **Разделение данных** к разным модулям **Экспорт данных**.

    Теперь конвейер должен выглядеть примерно так:

    ![Снимок экрана, демонстрирующий подключение модулей экспорта данных](media/how-to-designer-transform-data/export-data-pipeline.png).

1. Выберите модуль **Экспорт данных** , подключенный к *левому* порту модуля **Разделение данных**.

    Порядок выходных портов для модуля **Разделение данных** важен. Первый выходной порт содержит строки, в которых регулярное выражение имеет значение true. В нашем случае первый порт содержит строки доходов граждан США, а второй — строки доходов лиц, которые не являются гражданами США.

1. В области сведений о модуле справа от холста выберите следующие параметры:
    
    **Тип хранилища данных** : хранилище BLOB-объектов Azure

    **Хранилище данных** : выберите существующее хранилище данных или создайте новое, нажав кнопку "Создать хранилище данных".

    **Путь** : `/data/us-income`.

    **Формат файла** : CSV.

    > [!NOTE]
    > В этой статье предполагается, что у вас есть доступ к хранилищу данных, зарегистрированному в текущей рабочей области Машинного обучения Azure. Инструкции по настройке хранилища данных см. в статье [Подключение к службам хранилища Azure](how-to-connect-data-ui.md#create-datastores).

    Если у вас нет хранилища данных, его можно создать. Например, в этой статье наборы данных сохраняются в учетной записи хранения BLOB-объектов по умолчанию, связанной с рабочей областью. Наборы данных будут сохранены в контейнер `azureml` в новой папке с именем `data`.

1.  Выберите модуль **Экспорт данных** , подключенный к *правому* порту модуля **Разделение данных**.

1. В области сведений о модуле справа от холста выберите следующие параметры:
    
    **Тип хранилища данных** : хранилище BLOB-объектов Azure

    **Хранилище данных** : выберите то же хранилище данных, что и выше.

    **Путь** : `/data/non-us-income`.

    **Формат файла** : CSV.

1. Выберите модуль **Экспорт данных** , подключенный к левому порту **Разделение данных** , имеющему **путь** `/data/us-income`.

1. Убедитесь, что модуль **Экспорт данных** , подключенный к правому порту, имеет **путь** `/data/non-us-income`.

    Теперь конвейер и параметры будут выглядеть следующим образом:
    
    ![Снимок экрана, демонстрирующий настройку модулей экспорта данных](media/how-to-designer-transform-data/us-income-export-data.png).

### <a name="submit-the-run"></a>Выполнение прогона

Теперь, когда ваш конвейер настроен для разделения и экспорта данных, выполните прогон конвейера.

1. В верхней части холста выберите **Отправить**.

1. В диалоговом окне **Настройка выполнения конвейера** нажмите **Создать** , чтобы создать эксперимент.

    Эксперименты группируют схожие запуски конвейера в логические группы. В дальнейшем при запуске этого конвейера вам нужно будет использовать для ведения журнала и отслеживания тот же эксперимент.

1. Введите описательное имя эксперимента, например "разделение-данных-переписи".

1. Нажмите кнопку **Submit** (Отправить).

## <a name="view-results"></a>Просмотр результатов

После того как конвейер будет выполнен, вы сможете просмотреть результаты, перейдя к хранилищу BLOB-объектов на портале Azure. Вы также можете просмотреть промежуточные результаты модуля **Разделение данных** и проверить правильность разделения ваших данных.

1. Выберите модуль **Split Data** (Разделение данных).

1. В области "Сведения о модуле" справа от холста щелкните элемент **Outputs + logs** (Выходные данные и журналы). 

1. Нажмите на значок визуализации ![значок визуализации](media/how-to-designer-transform-data/visualize-icon.png) рядом с **набором данных результатов 1**. 

1. Убедитесь, что столбец "страна происхождения" содержит только значение "США".

1. Нажмите на значок визуализации ![значок визуализации](media/how-to-designer-transform-data/visualize-icon.png) рядом с **набором данных результатов 2**. 

1. Убедитесь, что столбец "страна происхождения" не содержит значение "США".

## <a name="clean-up-resources"></a>Очистка ресурсов

Пропустите этот раздел, если вы хотите перейти к части 2 этого руководства, [Переобучение моделей с помощью конструктора Машинного обучения Azure](how-to-retrain-designer.md).

[!INCLUDE [aml-ui-cleanup](../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы узнали, как преобразовать набор данных и сохранить его в зарегистрированное хранилище данных.

В следующей части этой серии руководств, [Переобучение моделей с помощью конструктора Машинного обучения Azure](how-to-retrain-designer.md), вы узнаете, как использовать преобразованные наборы данных и параметры конвейера для обучения моделей машинного обучения.