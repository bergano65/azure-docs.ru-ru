---
title: 'Перекрестная проверка модели: ссылка на модуль'
titleSuffix: Azure Machine Learning service
description: Узнайте, как использовать модуль перекрестной проверки модели в службе Машинное обучение Azure для перекрестной проверки оценок параметров для моделей классификации или регрессии путем секционирования данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/10/2019
ms.openlocfilehash: d83a9b5df7acc9d626613e53369f483367e55a54
ms.sourcegitcommit: bc7725874a1502aa4c069fc1804f1f249f4fa5f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2019
ms.locfileid: "73717243"
---
# <a name="cross-validate-model"></a>Перекрестная проверка модели

В этой статье описывается использование модуля перекрестная проверка модели в конструкторе Машинное обучение Azure (Предварительная версия). *Перекрестная проверка* — это методика, часто используемая в машинном обучении для оценки вариативности набора данных и надежности любой модели, обученной этими данными.  

Модуль перекрестная проверка модели принимает в качестве входных данных элемент DataSet с меткой, а также модель обученной классификации или регрессии. Он делит набор данных на некоторое количество подмножеств (*сверток*), создает модель на каждом из сверток, а затем возвращает набор статистики точности для каждого сгиба. Сравнивая статистику точности для всех сверток, можно интерпретировать качество набора данных. Затем можно понять, является ли модель уязвимой для вариаций в данных.  

Модель перекрестной проверки также возвращает прогнозируемые результаты и вероятности для набора данных, что позволяет оценить надежность прогнозов.  

### <a name="how-cross-validation-works"></a>Принцип работы перекрестной проверки

1. Перекрестная проверка случайным образом делит обучающие данные на сгибы. 

   По умолчанию алгоритм имеет значение 10 сверток, если набор данных не был разбит ранее. Чтобы разделить набор данных на другое число сверток, можно использовать модуль [Partition и Sample](partition-and-sample.md) , а также указать, сколько сверток следует использовать.  

2.  Модуль задает откладывание данных в виде сгиба 1, чтобы использовать их для проверки. (Иногда это называется « *Контрольный сгиб*».) Для обучения модели модуль использует оставшиеся свертки. 

    Например, при создании пяти сверток модуль создает пять моделей во время перекрестной проверки. Модуль обучает каждую модель с помощью четырех пятой информации. Она проверяет каждую модель на остающейся на один пятый.  

3.  При тестировании модели для каждого из сверток модуль оценивает несколько статистических данных о точности. Статистические данные, используемые модулем, зависят от типа модели, которую вы оцениваете. Для вычисления моделей классификации и моделей регрессии используются различные статистические данные.  

4.  По завершении процесса сборки и оценки для всех сверток модель перекрестной проверки создает набор метрик производительности и оценки результатов для всех данных. Просмотрите эти метрики, чтобы узнать, имеет ли один сгиб высокую или низкую точность. 

### <a name="advantages-of-cross-validation"></a>Преимущества перекрестной проверки

Другой и распространенный способ оценки модели — разделение данных на обучающий и проверочный наборы с помощью [разбиения данных](split-data.md), а затем проверка модели на обучающие данные. Но перекрестная проверка дает некоторые преимущества:  

-   Перекрестная проверка использует больше тестовых данных.

    Перекрестная проверка измеряет производительность модели с указанными параметрами в более крупном пространстве данных. То есть перекрестная проверка использует весь обучающий набор данных как для обучения, так и для оценки, а не для части. В отличие от этого, при проверке модели с помощью данных, созданных из случайного разбиения, обычно модель вычисляется только на 30% или меньше доступных данных.  

    Тем не менее, поскольку процесс перекрестной проверки и проверка модели выполняется несколько раз над большим набором данных, он гораздо более ресурсоемким. Он занимает намного больше времени, чем проверка случайного разбиения.  

-   При перекрестной проверке вычисляется и набор данных, и модель.

    Перекрестная проверка не просто измеряет точность модели. Он также дает представление о том, как репрезентативно представлять набор данных и насколько важна модель для вариаций в данных.  

## <a name="how-to-use-cross-validate-model"></a>Использование перекрестной проверки модели

Выполнение перекрестной проверки может занять много времени, если набор данных имеет большой размер.  Таким образом, вы можете использовать перекрестную проверку модели на начальном этапе создания и тестирования модели. На этом этапе можно оценить значение параметров модели (если время вычисления — приемлемой). Затем можно обучить и оценить модель с помощью установленных параметров в [модели обучения](train-model.md) и [вычисления модулей модели](evaluate-model.md) .

В этом сценарии выполняется обучение и тестирование модели с помощью перекрестной проверки модели.

1. Добавьте модуль перекрестная проверка модели в конвейер. Его можно найти в Машинное обучение Azure конструкторе в категории **Оценка модели & оценки** . 

2. Соедините выходные данные любой модели классификации или регрессии. 

    Например, если для классификации используется **два компьютера с точкой Байеса класса** , настройте модель с нужными параметрами. Затем перетащите соединитель из порта **обученной модели** классификатора в соответствующий порт модели перекрестной проверки. 

    > [!TIP] 
    > Обучение модели не требуется, поскольку модель перекрестной проверки автоматически обучает модель в ходе оценки.  
3.  В параметре порт **набора данных** для модели перекрестной проверки подключите набор обучающих данных с метками.  

4.  На панели **Свойства** модели перекрестной проверки выберите пункт **запустить селектор столбцов**. Выберите один столбец, содержащий метку класса, или прогнозируемое значение. 

5. Задайте значение для параметра **случайного начального значения** , если вы хотите повторить результаты перекрестной проверки между последовательными выполнениями для одних и тех же данных.  

6. Запустили конвейер.

7. Описание отчетов см. в разделе [результатов](#results) .

    Чтобы получить копию модели для повторного использования, щелкните правой кнопкой мыши выходные данные модуля, содержащего алгоритм (например, 2-я **классовый компьютер**с упрощенной точкой). Затем выберите **Сохранить как обученную модель**.

## <a name="results"></a>Результаты

После завершения всех итераций перекрестная проверка модели создает оценки для всего набора данных. Он также создает метрики производительности, которые можно использовать для оценки качества модели.

### <a name="scored-results"></a>Оцененные результаты

Первый выход модуля предоставляет исходные данные для каждой строки, а также некоторые прогнозируемые значения и связанные с ними вероятности. 

Чтобы просмотреть эти результаты, в конвейере щелкните модуль перекрестная проверка модели правой кнопкой мыши. Выберите оцененные **результаты**, а затем щелкните **визуализировать**.

| Имя нового столбца      | Description (Описание)                              |
| -------------------- | ---------------------------------------- |
| Оцененные метки        | Этот столбец добавляется в конец набора данных. Он содержит прогнозируемое значение для каждой строки. |
| Оцененные вероятности | Этот столбец добавляется в конец набора данных. Указывает предполагаемую вероятность значения в вычисляемых **метках**. |
| Номер сгиба          | Указывает начинающийся с нуля индекс сгиба, который был назначен каждой строке данных во время перекрестной проверки. |

 ### <a name="evaluation-results"></a>Результаты оценки

Второй отчет сгруппирован по сгибам. Помните, что во время выполнения перекрестная проверка модели случайным образом разделяет обучающие данные на *n* (по умолчанию 10). В каждом проходе по набору данных модель перекрестной проверки использует один сгиб в качестве набора данных для проверки. Он использует оставшиеся сгибы *n-1* для обучения модели. Каждая из *n* моделей тестируется на основе данных во всех остальных сверток.

В этом отчете свертывание перечисляются по значению индекса в возрастающем порядке.  Чтобы упорядочить данные в любом другом столбце, можно сохранить результаты в виде набора данных.

Чтобы просмотреть эти результаты, в конвейере щелкните модуль перекрестная проверка модели правой кнопкой мыши. Выберите **результаты вычисления по сгибу**, а затем выберите **визуализировать**.


|Имя столбца| Description (Описание)|
|----|----|
|Номер сгиба| Идентификатор для каждого из сверток. Если было создано пять сверток, будет пять подмножества данных с номерами от 0 до 4.
|Число примеров в виде сгиба|Число строк, назначенных каждому из сверток. Они должны быть примерно одинаковыми. |


Модуль также включает в себя следующие метрики для каждого из сверток в зависимости от типа модели, которую вы оцениваете: 

+ **Модели классификации**: точность, отзыв, F-Оценка, AUC, точность  

+ **Модели регрессии**: среднее значение абсолютной ошибки, корневое среднее значение ошибки, относительная абсолютная ошибка, относительная квадратная ошибка и коэффициент определения


## <a name="technical-notes"></a>Технические примечания  

+ Рекомендуется нормализовать наборы данных перед их использованием для перекрестной проверки. 

+ Модель перекрестной проверки гораздо более требовательна к вычислительным операциям и занимает больше времени, чем при проверке модели с помощью набора данных с произвольным разделением. Причина заключается в том, что перекрестная проверка модели обучает и проверяет модель несколько раз.

+ Нет необходимости разбивать набор данных на обучающие и проверочные наборы при использовании перекрестной проверки для измерения точности модели. 


## <a name="next-steps"></a>Дальнейшие действия

См. [набор модулей, доступных](module-reference.md) для службы машинное обучение Azure. 

