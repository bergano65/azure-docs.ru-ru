---
title: Справочник по модулю хэширования компонентов
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль хэширования функций в Машинное обучение Azure, чтобы создание признаков текстовые данные.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 09/01/2019
ms.openlocfilehash: 48960eae4941bb744a937639e1308e1b5f6aaf9f
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73497827"
---
# <a name="feature-hashing-module-reference"></a>Справочник по модулю хэширования компонентов

В этой статье описывается модуль, который входит в Машинное обучение Azure Designer (Предварительная версия).

Используйте модуль хэширования функций для преобразования потока текста на английском языке в набор целочисленных функций. Затем этот хэшированный набор функций можно передать в алгоритм машинного обучения для обучения модели текстовой аналитики.

Функции хэширования функций, предоставляемые в этом модуле, основаны на платформе нимбусмл. Дополнительные сведения см. в разделе [класс нграмхаш](https://docs.microsoft.com/python/api/nimbusml/nimbusml.feature_extraction.text.extractor.ngramhash?view=nimbusml-py-latest).

## <a name="what-is-feature-hashing"></a>Что такое хэширование функций?

Хэширование признаков позволяет преобразовать уникальные токены в целые числа. Он работает с точной строками, предоставленными в качестве входных данных, и не выполняет лингвистического анализа или предварительной обработки. 

Например, возьмем ряд простых предложений, таких как эти, а затем тональности оценку. Предположим, что вы хотите использовать этот текст для построения модели.

|Пользовательский текст|Мнение|
|--------------|---------------|
|Я обожаю эту книгу|3|
|Я ненавидели эту книгу|1|
|Эта книга была отличной|3|
|Я люблю книги|2|

На внутреннем уровне модуль хэширования функций создает словарь n-грамм. Например, список биграмм для этого набора данных будет выглядеть примерно так:

|Термин (биграмм)|Frequency|
|------------|---------------|
|Эта книга|3|
|Я обожаю|1|
|Я ненавидели|1|
|Я люблю|1|

Размер n-грамм можно контролировать с помощью свойства **n-грамм** . При выборе биграмм также вычисляются униграмм. Словарь также будет включать в себя следующие термины:

|Термин (униграмм)|Frequency|
|------------|---------------|
|Журнал|3|
|I|3|
|Некоторые|1|
|был|1|

После сборки словаря модуль хэширования функций преобразует термины словаря в хэш-значения. Затем он определяет, использовалась ли функция в каждом случае. Для каждой строки текстовых данных модуль выводит набор столбцов, по одному столбцу для каждой хэшированной функции.

Например, после хэширования столбцы функций могут выглядеть примерно так:

|Rating|Функция хэширования 1|Функция хэширования 2|Функция хэширования 3|
|-----|-----|-----|-----|
|4\.|1|1|0|
|5|0|0|0|

* Если значение в столбце равно 0, строка не содержит хэшированного компонента.
* Если значение равно 1, строка содержит эту функцию.

Хэширование признаков позволяет представлять текстовые документы с переменной длиной как числовые векторы признаков одинаковой длины для снижения размерности. Если вы попытались использовать текстовый столбец для обучения как есть, он будет рассматриваться как столбец возможностей категоризации с множеством различных значений.

Числовые выходы также позволяют использовать распространенные методы машинного обучения, включая классификацию, кластеризацию и извлечение сведений. Так как операции уточняющего запроса могут использовать целочисленные хэши, а не сравнения строк, получение весовых коэффициентов функций также выполняется гораздо быстрее.

## <a name="configure-the-feature-hashing-module"></a>Настройка модуля хэширования компонентов

1.  Добавьте модуль хэширования компонентов в конвейер в конструкторе.

1. Подключите набор данных, содержащий текст, который необходимо проанализировать.

    > [!TIP]
    > Поскольку хэширование признаков не выполняет лексические операции, такие как извлечение корней или усечение, иногда можно получить лучшие результаты путем предварительной обработки текста перед применением хэширования компонентов. 

1. Задайте **целевые столбцы** для текстовых столбцов, которые необходимо преобразовать в хэшированные функции. Помните, что:

    * Столбцы должны быть строковыми типами данных.
    
    * Выбор нескольких столбцов текста может оказать значительное влияние на размерность компонентов. Например, число столбцов для 10-разрядного хэша поступает от 1 024 для одного столбца в 2 048 для двух столбцов.

1. Используйте **хэширование bitsize меняется** , чтобы указать количество битов, используемых при создании хэш-таблицы.
    
    Бит по умолчанию равен 10. Для многих проблем это значение достаточно. Чтобы избежать конфликтов, может потребоваться больше пространства, в зависимости от размера словаря n-грамм в обучающем тексте.
    
1. Для **n-грамм**введите число, определяющее максимальную длину N-грамм, добавляемых в обучающий словарь. N-грамма — это последовательность из *n* слов, которая рассматривается как уникальная единица.

    Например, если ввести 3, униграмм, биграмм и триграммов будут созданы.

1. Запустили конвейер.

## <a name="results"></a>Результаты

После завершения обработки модуль Выводит преобразованный набор данных, в котором исходный текстовый столбец преобразуется в несколько столбцов. Каждый столбец представляет функцию в тексте. В зависимости от значимости словаря результирующий набор данных может быть большим:

|Имя столбца 1|Тип столбца 2|
|-------------------|-------------------|
|усертекст|Столбец исходных данных|
|ТОНАЛЬНОСТИ|Столбец исходных данных|
|УСЕРТЕКСТ-функция хэширования 1|Столбец хэшированного компонента|
|УСЕРТЕКСТ-функция хэширования 2|Столбец хэшированного компонента|
|УСЕРТЕКСТ — функция хэширования n|Столбец хэшированного компонента|
|УСЕРТЕКСТ-функция хэширования 1024|Столбец хэшированного компонента|

После создания преобразованного набора данных его можно использовать в качестве входных данных для модуля обучение модели.
 
### <a name="best-practices"></a>Рекомендации

Следующие рекомендации помогут вам максимально эффективно использовать модуль хэширования функций:

* Добавьте модуль предварительной обработки текста перед использованием хэширования признаков для предварительной обработки входного текста. 

* Добавьте модуль Select Columns (выбор столбцов) после модуля хэширования компонентов, чтобы удалить текстовые столбцы из выходного набора данных. Текстовые столбцы не нужны после создания функций хэширования.
    
* Рассмотрите возможность использования этих параметров предварительной обработки текста для упрощения результатов и повышения точности:

    * Разбивка слов
    * Остановка удаления Word
    * Нормализация вариантов
    * Удаление знаков препинания и специальных символов
    * Морфология  

Оптимальный набор методов предварительной обработки, применяемых в любом решении, зависит от домена, словаря и потребности бизнеса. конвейер с данными, чтобы узнать, какие методы обработки текста наиболее эффективны.

## <a name="next-steps"></a>Дальнейшие действия
            
См. [набор модулей, доступных](module-reference.md) для машинное обучение Azure 
