---
title: Управление ресурсами и квотами
titleSuffix: Azure Machine Learning
description: Сведения о квотах и ограничениях на ресурсы для Машинное обучение Azure и о том, как запросить увеличение квоты.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.reviewer: jmartens
author: SimranArora904
ms.author: siarora
ms.date: 12/1/2020
ms.topic: conceptual
ms.custom: troubleshooting,contperf-fy20q4, contperf-fy21q2
ms.openlocfilehash: 78cc0aa6beb9ab83fea2039b271b071de1662fc1
ms.sourcegitcommit: 484f510bbb093e9cfca694b56622b5860ca317f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/21/2021
ms.locfileid: "98629186"
---
# <a name="manage-and-increase-quotas-for-resources-with-azure-machine-learning"></a>Управление и увеличение квот для ресурсов с помощью Машинное обучение Azure

Azure использует ограничения и квоты, чтобы предотвратить переполнение бюджета из-за мошенничества и учитывать ограничения емкости Azure. Учитывайте эти ограничения при масштабировании рабочих нагрузок. В этой статье вы узнаете о следующих возможностях:

> [!div class="checklist"]
> + Ограничения по умолчанию для ресурсов Azure, связанных с [машинное обучение Azure](overview-what-is-azure-ml.md).
> + Создание квот уровня рабочей области.
> + Просмотр квот и ограничений.
> + Запрос на увеличение квоты.
> + Частные конечные точки и квоты DNS.

Наряду с управлением квотами вы можете научиться [планировать и управлять затратами на машинное обучение Azure](concept-plan-manage-cost.md) или узнать об [ограничениях службы в машинное обучение Azure](resource-limits-quotas-capacity.md).

## <a name="special-considerations"></a>Специальные рекомендации

+ Квота — это кредитный лимит, а не гарантия наличия ресурсов. Если требуются крупномасштабные ресурсы, [обратитесь в службу поддержки Azure, чтобы увеличить квоту](#request-quota-increases).

+ Квота является общей для всех служб в подписках, включая Машинное обучение Azure. Вычислите использование во всех службах при оценке емкости.
 
  Машинное обучение Azure COMPUTE является исключением. Она имеет отдельную квоту на базовую квоту вычислений. 

+ Ограничения по умолчанию зависят от типа категории, например бесплатной пробной версии, оплаты по мере использования и серии виртуальных машин (например, Dv2, F и G).

## <a name="default-resource-quotas"></a>Квоты ресурсов по умолчанию

В этом разделе вы узнаете об ограничениях по умолчанию и максимальных квот для следующих ресурсов:

+ Ресурсы Машинное обучение Azure
  + Вычислительная среда Машинного обучения Azure
  + Конвейеры Машинное обучение Azure
+ Виртуальные машины
+ Экземпляры контейнеров Azure
+ Хранилище Azure

> [!IMPORTANT]
> Границы могут измениться. Последние сведения см. в статье  [ограничения службы в машинное обучение Azure](resource-limits-quotas-capacity.md).



### <a name="azure-machine-learning-assets"></a>Ресурсы Машинное обучение Azure
Для каждой рабочей области применяются следующие ограничения на ресурсы. 

| **Ресурс** | **Максимальное ограничение** |
| --- | --- |
| Наборы данных | 10 млн |
| Запуски | 10 млн |
| Модели | 10 млн|
| Artifacts | 10 млн |

Кроме того, максимальное **время выполнения** составляет 30 дней, а максимальное количество **зарегистрированных для каждого запуска метрик** — 1 000 000.

### <a name="azure-machine-learning-compute"></a>Вычислительная среда Машинного обучения Azure;
[Машинное обучение Azure COMPUTE](concept-compute-target.md#azure-machine-learning-compute-managed) имеет квоту по умолчанию на количество ядер (разделенных каждым СЕМЕЙСТВОМ виртуальных машин и совокупное количество ядер), а также количество уникальных ресурсов вычислений, разрешенных для каждого региона в подписке. Эта квота отличается от квоты ядра виртуальной машины, указанной в предыдущем разделе, так как она применяется только к управляемым ресурсам вычислений Машинное обучение Azure.

[Запросите увеличение квоты](#request-quota-increases) , чтобы увеличить ограничения для различных квот ядра семейства виртуальных машин, общие квоты и ресурсы для подписки в этом разделе.

Доступные ресурсы:
+ Число **выделенных ядер на регион** по умолчанию составляет 24 – 300, в зависимости от типа предложения подписки. Вы можете увеличить количество выделенных ядер на подписку для каждого семейства виртуальных машин. Специализированные семейства виртуальных машин, такие как NCv2, NCv3 или ND, начинаются с 0 ядер по умолчанию.

+ Для **ядер с низким приоритетом на регион** по умолчанию установлено ограничение в 100 3 000 в зависимости от типа предложения подписки. Количество ядер с низким приоритетом для каждой подписки можно увеличить, и оно является одним значением в разных семействах виртуальных машин.

+ Количество **кластеров на регион** по умолчанию равно 200. Они являются общими для обучающего кластера и вычислительного экземпляра. (Вычислительный экземпляр считается кластером с одним узлом в целях квоты.)

> [!TIP]
> Чтобы узнать больше о том, какое семейство виртуальных машин запрашивает увеличение квоты для, изучите [размеры виртуальных машин в Azure](https://docs.microsoft.com/azure/virtual-machines/sizes). В случае экземпляров семейства виртуальных машин GPU начинаются с "N" в имени семейства (например, Серия NCv3)

В следующей таблице приведены дополнительные ограничения платформы. Обратитесь к группе разработчиков AzureML по **технической** поддержке, чтобы запросить исключение.

| **Ресурс или действие** | **Максимальное ограничение** |
| --- | --- |
| Рабочие области на группу ресурсов | 800 |
| Узлы в **кластере** с одной машинное обучение Azure Compute (амлкомпуте) в качестве пула с поддержкой без связи (т. е. не могут выполнять задания MPI). | 100 узлов, но можно настроить до 65000 узлов |
| Узлы в одном параллельном шаге выполнения **выполняются** в кластере машинное обучение Azure Compute (амлкомпуте) | 100 узлов, но можно настроить до 65000 узлов, если кластер настроен для масштабирования в соответствии с |
| Узлы в одной Машинное обучение Azure Compute (Амлкомпуте) **кластера** в качестве пула с поддержкой связи | 300 узлов, но можно настроить до 4000 узлов |
| Узлы в **кластере** с одной машинное обучение Azure Compute (амлкомпуте) в качестве пула с поддержкой связи в СЕМЕЙСТВЕ виртуальных машин с поддержкой RDMA | 100 узлов |
| Узлы в **одном MPI-приложении в** кластере машинное обучение Azure Compute (амлкомпуте) | 100 узлов, но их можно увеличить до 300 узлов |
| Процессов MPI GPU на узел | 1–4 |
| Число рабочих потоков GPU на узел | 1–4 |
| Время существования задания | 21 день<sup>1</sup> |
| Время существования задания на узле с низким приоритетом | 7 дней<sup>2</sup> |
| Серверов параметров на узел | 1 |

<sup>1</sup> максимальное время существования — это длительность между запуском и завершением выполнения. Завершенные запуски сохраняются в течение неограниченного времени. Данные для запусков, которые не были завершены в течение максимального времени существования, недоступны.
<sup>2</sup> задания на узле с низким приоритетом могут быть вытеснены при наличии ограничения емкости. Рекомендуется реализовать контрольные точки в задании.

#### <a name="azure-machine-learning-pipelines"></a>Конвейеры Машинное обучение Azure
[Машинное обучение Azure конвейеров](concept-ml-pipelines.md) имеют следующие ограничения.

| **Ресурс** | **Ограничение** |
| --- | --- |
| Шаги в конвейере | 30 000 |
| Рабочие области на группу ресурсов | 800 |

### <a name="virtual-machines"></a>Виртуальные машины
Каждая подписка Azure имеет ограничение на количество виртуальных машин во всех службах. Для ядер виртуальных машин предусмотрено региональное общее ограничение и региональный предел для каждого ряда. Оба ограничения применяются отдельно.

Например, рассмотрим подписку с ограничением до 30 ядер виртуальных машин с восточной части США, 30 ядер серии A и 30 ядер серии D. Этой подписке разрешено развертывание 30 виртуальных машин a1 или 30 виртуальных машин D1 или сочетание двух, которое не превышает 30 ядер.

Вы не можете создавать ограничения для виртуальных машин, превышающих значения, приведенные в следующей таблице.

[!INCLUDE [azure-subscription-limits-azure-resource-manager](../../includes/azure-subscription-limits-azure-resource-manager.md)]

### <a name="container-instances"></a>Экземпляры контейнеров

Дополнительные сведения см. в разделе [ограничения экземпляров контейнеров](../azure-resource-manager/management/azure-subscription-service-limits.md#container-instances-limits).

### <a name="storage"></a>Служба хранилища
В службе хранилища Azure предусмотрено ограничение в 250 учетных записей хранения на регион для каждой подписки. Это ограничение включает учетные записи хранения уровня "Стандартный" и "Премиум".

Чтобы увеличить это ограничение, выполните запрос через [службу поддержки Azure](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest/). Команда разработчиков службы хранилища Azure просматривает ваш случай и может утвердить до 250 учетных записей хранения для региона.


## <a name="workspace-level-quotas"></a>Квоты уровня рабочей области

Квоты на уровне рабочей области используются для управления распределением целевых объектов Машинное обучение Azure вычислений между несколькими [рабочими областями](concept-workspace.md) в одной подписке.

По умолчанию все рабочие области используют ту же квоту, что и квота уровня подписки для семейств виртуальных машин. Однако можно задать максимальную квоту для отдельных семейств виртуальных машин в рабочих областях в подписке. Это позволяет предоставлять общий доступ к емкости и избежать проблем с состязанием за ресурсы.

1. Перейдите к любой рабочей области в подписке.
1. В левой области выберите **использование + квоты**.
1. Перейдите на вкладку **Настройка квот** , чтобы просмотреть квоты.
1. Разверните семейство виртуальных машин.
1. Установите предельную квоту для любой рабочей области, указанной в этом семействе виртуальных машин.

Нельзя задать отрицательное значение или значение выше квоты уровня подписки.

[![Снимок экрана, на котором показана квота Машинное обучение Azure уровня рабочей области.](./media/how-to-manage-quotas/azure-machine-learning-workspace-quota.png)](./media/how-to-manage-quotas/azure-machine-learning-workspace-quota.png)

> [!NOTE]
> Для задания квоты на уровне рабочей области необходимы разрешения уровня подписки.

## <a name="view-your-usage-and-quotas"></a>Просмотр сведений об использовании и квотах

Чтобы просмотреть квоты для различных ресурсов Azure, таких как виртуальные машины, хранилище или сеть, используйте портал Azure:

1. На левой панели выберите **все службы** , а затем щелкните **подписки** в категории **Общие** .

2. В списке подписок выберите подписку, для которой вы хотите найти нужную квоту.

3. Выберите **использование и квоты** , чтобы просмотреть текущие ограничения и использование квоты. Используйте фильтры для выбора поставщика и расположений. 

Вы управляете квотой на Машинное обучение Azure вычислений в подписке отдельно от других квот Azure: 

1. Перейдите в рабочую область **машинное обучение Azure** в портал Azure.

2. В области слева в разделе Поддержка и **Устранение неполадок** выберите использование и **квоты** , чтобы просмотреть текущие ограничения квот и их использование.

3. Выберите подписку, для которой нужно просмотреть квоты. Примените фильтр к интересующему региону.

4. Можно переключаться между представлением уровня подписки и представлением уровня рабочей области.

## <a name="request-quota-increases"></a>Запрос на увеличение квоты

Чтобы увеличить лимит или квоту выше ограничения по умолчанию, отправьте [запрос в службу поддержки по сети](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest/) бесплатно.

Вы не можете увеличить ограничения, превышающие максимальное значение, показанное в предыдущих таблицах. Если максимальное ограничение отсутствует, изменить ограничение для ресурса нельзя.

При запросе увеличения квоты выберите службу, которую необходимо учитывать. Например, выберите Машинное обучение Azure, экземпляры контейнеров или хранилище. Для Машинное обучение Azure вычислений можно нажать кнопку **запросить квоту** при просмотре квоты на предыдущих шагах.

> [!NOTE]
> [Бесплатные пробные подписки](https://azure.microsoft.com/offers/ms-azr-0044p) не подходят для увеличения лимита или квоты. Если у вас бесплатная пробная подписка, вы можете перейти на подписку с [оплатой по мере](https://azure.microsoft.com/offers/ms-azr-0003p/) использования. Дополнительные сведения см. в статье об [обновлении бесплатной пробной версии Azure до подписки с оплатой по мере](../cost-management-billing/manage/upgrade-azure-subscription.md) использования и [бесплатной учетной записи Azure](https://azure.microsoft.com/free/free-account-faq).

## <a name="private-endpoint-and-private-dns-quota-increases"></a>Увеличение квоты для частной конечной точки и Частной зоны DNS

Существуют ограничения на количество частных конечных точек и частных зон DNS, которые можно создать в подписке.

Машинное обучение Azure создает ресурсы в подписке (клиенте), но некоторые сценарии создают ресурсы в подписке, принадлежащей корпорации Майкрософт.

 В следующих сценариях может потребоваться запросить квоту для подписки, принадлежащей корпорации Майкрософт:

* Рабочая область с включенной виртуальной частной связью Azure с ключом, управляемым клиентом (CMK)
* Реестр контейнеров Azure для рабочей области, находящейся за виртуальной сетью
* Подключение кластера Службы Kubernetes Azure с поддержкой Приватного канала к рабочей области

Чтобы запросить скидку для этих сценариев, выполните следующие действия.

1. [Создайте запрос в службу поддержки Azure](../azure-portal/supportability/how-to-create-azure-support-request.md#create-a-support-request) и выберите следующие параметры в разделе __Основные сведения__ .

    | Поле | Выбранное |
    | ----- | ----- |
    | Тип проблемы | **Технические требования** |
    | Служба | **Мои службы**. Выберите __машинное обучение__ в раскрывающемся списке. |
    | Тип проблемы | **Конфигурация и безопасность рабочей области** |
    | Подтип проблемы | **Частная конечная точка и запрос на вычет зоны Частная зона DNS** |

2. В разделе __сведения__ используйте поле __Описание__ , чтобы указать регион Azure и сценарий, который планируется использовать. Если необходимо запросить увеличение квоты для нескольких подписок, перечислите идентификаторы подписок в этом поле.

3. Выберите __создать__ , чтобы создать запрос.

:::image type="content" source="media/how-to-manage-quotas/quota-increase-private-endpoint.png" alt-text="Снимок экрана закрытой конечной точки и запроса на увеличение квоты частного DNS.":::

## <a name="next-steps"></a>Дальнейшие действия

+ [Планирование и управление затратами для Машинное обучение Azure](concept-plan-manage-cost.md)
+ [Ограничения службы в Машинное обучение Azure](resource-limits-quotas-capacity.md)
