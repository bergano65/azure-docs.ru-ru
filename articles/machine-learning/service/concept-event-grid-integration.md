---
title: Использование событий Машинное обучение Azure
titleSuffix: Azure Machine Learning
description: Из этой статьи вы узнаете, как использовать службу "Сетка событий Azure" для подписки, реагирования и отмены подписки на события, создаваемые Машинное обучение Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: andyxu
author: gogowings
ms.date: 11/04/2019
ms.openlocfilehash: 2fe2d07b29b8799712d59cdf21aeb3ce989ca3b2
ms.sourcegitcommit: 28688c6ec606ddb7ae97f4d0ac0ec8e0cd622889
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/18/2019
ms.locfileid: "74158459"
---
# <a name="consume-azure-machine-learning-events-preview"></a>Использование событий Машинное обучение Azure (Предварительная версия)

Машинное обучение Azure управляет всем жизненным циклом процесса машинного обучения, включая обучение модели, развертывание модели и мониторинг. События Машинное обучение Azure позволяют приложениям реагировать на события в течение жизненного цикла машинного обучения, такие как завершение обучающих запусков, регистрация и развертывание моделей, а также обнаружение смещения данных с помощью современных бессерверных архитектуры. 

Эти события публикуются с помощью службы " [Сетка событий Azure](https://azure.microsoft.com/services/event-grid/)". С помощью портал Azure, PowerShell или Azure CLI клиенты могут легко подписываться на события, [указывая один или несколько типов событий, а также фильтровать условия](/azure/event-grid/event-filtering). Клиенты также имеют возможность создавать широкий спектр обработчиков событий, таких как функции Azure, Azure Logic Apps или универсальные веб-перехватчики. Машинное обучение Azure, а также служба "Сетка событий Azure" предоставляет высокодоступную, надежную и отказоустойчивую платформу доставки событий для создания приложений, управляемых событиями.

Сведения об использовании Машинное обучение Azure с таблицей событий см. в разделе [создание рабочих процессов, управляемых событиями машинное обучение (Предварительная версия)](how-to-use-event-grid.md).

## <a name="the-event-model"></a>Модель событий 

Служба "Сетка событий Azure" считывает события из источников, таких как Машинное обучение Azure и другие службы Azure. Затем эти события отправляются в обработчики событий, такие как концентраторы событий Azure, функции Azure, Logic Apps и другие. На следующей схеме показано, как сетка событий соединяет источники и обработчики, но не является исчерпывающим списком поддерживаемых интеграций.

![Функциональная модель Сетки событий Azure](./media/concept-event-grid-integration/azure-event-grid-functional-model.png)

Дополнительные сведения об источниках событий и обработчиках событий см. в статье [что такое сетка событий](/azure/event-grid/overview).

## <a name="azure-machine-learning-event-types"></a>Типы событий Машинное обучение Azure

Машинное обучение Azure предоставляет события в различных точках жизненного цикла машинного обучения: 

| Тип события | ОПИСАНИЕ |
| ---------- | ----------- |
| `Microsoft.MachineLearningServices.RunCompleted` | Вызывается после завершения запуска эксперимента машинного обучения |
| `Microsoft.MachineLearningServices.ModelRegistered` | Возникает при регистрации модели машинного обучения в рабочей области |
| `Microsoft.MachineLearningServices.ModelDeployed` | Возникает при завершении развертывания службы вывода с одной или несколькими моделями |
| `Microsoft.MachineLearningServices.DatasetDriftDetected` | Возникает при завершении задания обнаружения смещения данных для двух наборов данных |

## <a name="subscribe-to-machine-learning-events"></a>Подпишитесь на Машинное обучение события

Подписки для Машинное обучение Azure событий защищаются с помощью управления доступом на основе ролей (RBAC). Только [участник или владелец](how-to-assign-roles.md#default-roles) рабочей области может создавать, обновлять и удалять подписки на события.

Подписки на события можно фильтровать на основе различных условий. Фильтры могут применяться к подпискам на события во время [создания](/cli/azure/eventgrid/event-subscription?view=azure-cli-latest) подписки на событие или [позже](/cli/azure/eventgrid/event-subscription?view=azure-cli-latest). 

### <a name="filter-by-event-type"></a>Фильтрация по типу события
Подписка на события может указывать один или несколько Машинное обучение Azure типов событий.

### <a name="filter-by-event-subject"></a>Фильтр по теме события
Служба "Сетка событий Azure" поддерживает фильтры субъектов, основанные на __начале__ и __конце__ совпадений, поэтому события с соответствующей темой доставляются подписчику. Разные события машинного обучения имеют другой формат темы.

| Тип события | Формат субъекта | Образец темы |
| ---------- | ----------- | ----------- |
| `Microsoft.MachineLearningServices.RunCompleted` | `experiments/{ExperimentId}/runs/{RunId}` | `experiments/b1d7966c-f73a-4c68-b846-992ace89551f/runs/my_exp1_1554835758_38dbaa94` |
| `Microsoft.MachineLearningServices.ModelRegistered` | `models/{modelName}:{modelVersion}` | `models/sklearn_regression_model:3` |
| `Microsoft.MachineLearningServices.ModelDeployed` | `endpoints/{serviceId}` | `endpoints/my_sklearn_aks` |
| `Microsoft.MachineLearningServices.DatasetDriftDetected` | `datadrift/{data.DataDriftId}/run/{data.RunId}` | `datadrift/4e694bf5-712e-4e40-b06a-d2a2755212d4/run/my_driftrun1_1550564444_fbbcdc0f` |

### <a name="advanced-filtering"></a>Расширенная фильтрация

Служба "Сетка событий Azure" также поддерживает расширенную фильтрацию на основе схемы опубликованных событий. Машинное обучение Azure сведения о схеме событий можно найти в [схеме событий службы "Сетка событий Azure" для машинное обучение Azure](../../event-grid/event-schema-machine-learning.md).

Ниже приведены некоторые примеры расширенных фильтров, которые можно выполнять.

* Для `Microsoft.MachineLearningServices.ModelRegistered` события, чтобы отфильтровать значение тега модели:

    ```
    --advanced-filter data.ModelTags.key1 StringIn ('value1')
    ```

Дополнительные сведения о применении фильтров см. в разделе [Фильтрация событий для сетки событий](https://docs.microsoft.com/azure/event-grid/how-to-filter-events).

## <a name="consume-machine-learning-events"></a>Использование событий Машинное обучение

Приложения, обрабатывающие события Машинное обучение, должны следовать следующим рекомендациям:

> [!div class="checklist"]
> * Так как несколько подписок можно настроить для маршрутизации событий в один обработчик событий, важно, чтобы события из определенного источника не предполагались, а проверить раздел сообщения, чтобы убедиться, что он поступает из ожидаемой рабочей области машинного обучения.
> * Подобным образом убедитесь, что вы готовы к обработке этого типа событий (eventType), а также не следует предполагать, что все получаемые события будут иметь ожидаемый тип.
> * Так как сообщения могут поступать не по порядку и после некоторой задержки, используйте поля ETag, чтобы понять, являются ли сведения об объектах актуальными.  Используйте поля sequencer для понимания последовательности событий для каждого отдельного объекта.
> * Игнорируйте поля, которые вам непонятны. Такой подход поможет обеспечить устойчивость к новым функциям, которые могут быть добавлены в будущем.
> * Операции, завершившиеся сбоем или отмененные Машинное обучение Azure, не активируют событие. Например, если развертывание модели завершается сбоем, Microsoft. Мачинелеарнингсервицес. Моделдеплойед не будет запущено. При проектировании приложений рекомендуется использовать такой режим сбоя. Вы всегда можете использовать Машинное обучение Azure SDK, CLI или портал, чтобы проверить состояние операции и ознакомиться с подробными причинами сбоя.

Служба "Сетка событий Azure" позволяет клиентам создавать несвязанные обработчики сообщений, которые могут запускаться Машинное обучение Azure событиями. Ниже приведены некоторые важные примеры обработчиков сообщений.
* Функции Azure
* Azure Logic Apps
* Центры событий Azure
* Конвейер фабрики данных Azure
* Универсальные веб-перехватчики, которые могут размещаться на платформе Azure или в других местах

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о сетке событий и предоставлении Машинное обучение Azure событий.

- [An introduction to Azure Event Grid](../../event-grid/overview.md) (Общие сведения о службе "Сетка событий Azure")
- [Схема событий службы "Сетка событий Azure" для Машинное обучение Azure](../../event-grid/event-schema-machine-learning.md)
- [Создание рабочих процессов, управляемых событиями, с помощью Машинное обучение Azure](how-to-use-event-grid.md)
