---
title: Создание эксперимента автоматизированного машинного обучения с классификацией
titleSuffix: Azure Machine Learning
description: Узнайте, как обучить и развернуть модель классификации в службе автоматического машинного обучения с помощью Студии машинного обучения Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: tzvikei
author: tsikiksr
ms.reviewer: nibaccam
ms.date: 11/04/2019
ms.openlocfilehash: 98ebc8d9408d937730643056f65c3d8011c1fdc4
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73493413"
---
# <a name="tutorial-create-your-first-classification-model-with-automated-machine-learning"></a>Руководство по созданию первой модели классификации в службе автоматического машинного обучения
[!INCLUDE [applies-to-skus](../../../includes/aml-applies-to-enterprise-sku.md)]

Из этого руководства вы узнаете, как создать свой первый эксперимент автоматического машинного обучения с помощью Студии машинного обучения Azure, не создавая ни единой строки кода. Этот пример создает модель классификации, которая прогнозирует согласие клиента на депозит с фиксированным сроком, предложенный финансовым учреждением.

Автоматическое машинное обучение позволяет автоматизировать задачи, которые занимают много времени. Автоматическое машинное обучение позволяет быстро выполнить итерацию множества сочетаний алгоритмов и гиперпараметров, пока не будет найдена лучшая модель на основе выбранных удачных метрик.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создайте рабочую область машинного обучения Azure.
> * Выполнение эксперимента автоматического машинного обучения.
> * Просмотр сведений об эксперименте.
> * Развертывание модели.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://aka.ms/AMLFree).

* Скачайте файл данных [**bankmarketing_train.csv**](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv). Столбец **y** в нем указывает, подписан ли клиент на депозит с фиксированным сроком. Впоследствии он будет выбран в этом учебнике как целевой столбец для прогнозов. 

## <a name="create-a-workspace"></a>Создание рабочей области

Рабочая область машинного обучения Azure — это основной ресурс в облаке для экспериментов, обучения и развертывания моделей машинного обучения. Она связывает подписку и группу ресурсов Azure с легко используемым объектом в службе. 

Вы создаете рабочую область с помощью Студии машинного обучения Azure — веб-консоли для управления ресурсами Azure.

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal-enterprise.md)]

>[!IMPORTANT] 
> Запишите **рабочую область** и **подписку**. Они понадобятся вам для того, чтобы создать эксперимент в нужном месте. 

## <a name="create-and-run-the-experiment"></a>Создание и запуск эксперимента

Выполните следующие действия по настройке и выполнению эксперимента в студии машинного обучения Azure — объединенном интерфейсе, включающем в себя средства машинного обучения для выполнения сценариев обработки и анализа данных, основанных на всех уровнях навыков. Студия не поддерживается в браузерах Internet Explorer.

1. Войдите в [Студию машинного обучения Azure](https://ml.azure.com).

1. Выберите свою подписку и рабочую область, которую создали.

1. Выберите **Начать**.

1. На панели слева выберите **Automated ML** (Автоматизированное ML) в разделе **Автор**.

   Так как это ваш первый эксперимент автоматизированного машинного обучения, вы увидите пустой список и ссылки на документацию.

   ![Студия машинного обучения Azure.](media/tutorial-1st-experiment-automated-ml/get-started.png)

1. Выберите **New automated ML run** (Новое выполнение автоматизированного машинного обучения). 

1. Создайте набор данных, выбрав из раскрывающегося списка **+ Create DataSet** (+Создать набор данных) пункт **From local files** (Из локальных файлов). 

    1. Щелкните **Обзор**.
    
    1. Выберите файл **bankmarketing_train.csv** на локальном компьютере. Это тот файл, который вы скачали при подготовке [необходимых компонентов](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv).

    1. Выберите **Tabular** (Табличный) в качестве типа набора данных. 

    1. Присвойте набору данных уникальное имя и укажите дополнительное описание. 

    1. Нажмите кнопку **Далее** внизу слева, чтобы отправить его в контейнер по умолчанию, который был автоматически настроен при создании рабочей области.  
    
       Когда загрузка завершится, форма "Settings and preview" (Настройки и предварительный просмотр) будет автоматически заполнена в зависимости от типа файла. 
       
    1. Убедитесь, что форма **Settings and preview** (Настройки и предварительный просмотр) заполнена, как описано ниже, и щелкните **Далее**.
        
        Поле|ОПИСАНИЕ| Значение для руководства
        ---|---|---
        Формат файла|Свойство определяет структуру и тип данных, хранящихся в файле.| С разделителями
        Разделитель|Один или несколько символов для указания границы между&nbsp; отдельными, независимыми регионами в виде простого текста или других потоков данных. |Запятая
        Кодирование|Определяет, какой бит следует использовать в таблице схемы символов, чтобы считать набор данных.| UTF-8
        Заголовки столбцов| Указывает, как будут обрабатываться заголовки набора данных, если таковые имеются.| Все файлы имеют одинаковые заголовки
        Пропустить строки | Указывает, сколько строк, если таковые имеются, пропускается в наборе данных.| Нет

    1. Форма **Схема** позволяет выполнять дальнейшую настройку данных для этого эксперимента. В этом примере выберите переключатель для функции **day_of_week**, чтобы не включать его в этот эксперимент. Щелкните **Далее**.

        ![Конфигурация на вкладке "Предварительный просмотр"](media/tutorial-1st-experiment-automated-ml/schema-tab-config.gif)

    1. В форме **Confirm details** (Подтверждение сведений) проверьте правильность сведений, которые ранее были введены в формах **Basic info** (Базовые сведения) и **Settings and preview** (Параметры и просмотр).
    1. Выберите **Создать**, чтобы завершить создание набора данных.
    1. Выберите набор данных, когда он появится в списке.
    1. Используйте **Просмотр данных**, чтобы убедиться, что вы не включили **day_of_week**, затем выберите **ОК**.

    1. Нажмите кнопку **Далее**.

1. Заполните форму **Configure Run** (Настройка выполнения) следующим образом.
    1. Введите для эксперимента имя `my-1st-automl-experiment`.

    1. Выберите **y** в качестве столбца целевого объекта, для которого будут выполняться прогнозы. Этот столбец содержит сведения о том, подписан ли клиент на срочный депозит или нет.
    1. Щелкните **Create a new compute** (Создать новую вычислительную среду) и настройте целевой объект вычислений. Целевым объектом вычислений называется локальная или облачная среда, в которой будет запущен сценарий обучения или размещена развернутая служба. Для этого эксперимента мы используем облачный вычислительный ресурс. 

        Поле | ОПИСАНИЕ | Значение для руководства
        ----|---|---
        Имя вычислительной среды |Уникальное имя для идентификации контекста вычислительной среды.|automl-compute
        Virtual&nbsp;machine&nbsp;size| Выберите размер виртуальной машины для вычислительной среды.|Standard_DS12_V2
        Минимальное и максимальное кол-во узлов (в дополнительных параметрах)| Для профилирования данных необходимо указать один или больше узлов.|Min nodes (Минимум узлов): 1<br>Max nodes (Максимум узлов): 6
  
        1. Выберите **Создать**, чтобы получить целевой объект вычислений. 

            **Операция займет несколько минут.** 

        1. Когда создание целевого объекта вычислений завершится, выберите его из раскрывающегося списка.

    1. Щелкните **Далее**.

1. В форме **Тип и параметры задачи** в качестве типа задачи машинного обучения выберите **Классификация**.

    1. Выберите **View additional configuration settings** (Просмотреть дополнительные параметры конфигурации) и заполните поля следующим образом. Эти настройки предназначены для лучшего управления заданием для обучения. В противном случае применяются значения по умолчанию, основанные на выборе эксперимента и данных.

        >[!NOTE]
        > В рамках этого руководства не нужно задавать метрику или максимальное количество ядер для каждого порога итерации. Также не требуется блокировать тестирование алгоритмов.
   
        Дополнительные&nbsp;конфигурации|ОПИСАНИЕ|Значение&nbsp;для&nbsp;руководства
        ------|---------|---
        Основная метрика| Оценочная метрика, по которой будет проверяться алгоритм машинного обучения.|AUC_weighted
        Автоматическое выделение признаков| Обеспечивает предварительную обработку. Сюда входит автоматическая очистка данных, подготовка и преобразование для создания синтетических функций.| Включение
        Запрещенные алгоритмы | Алгоритмы, которые вы хотите исключить из задания обучения.| Нет
        Критерий выхода| Если условия соблюдены, задание обучения останавливается. |Время&nbsp;задания&nbsp;обучения (ч): 1 <br> Порог&nbsp;оценки&nbsp;метрики: Нет
        Проверка | Выберите тип перекрестной проверки и число тестов.|Тип проверки:<br>перекрестная проверка в &nbsp;k-кратном порядке&nbsp;. <br> <br> Количество проверок: 2
        Параллелизм| Максимальное число выполняемых параллельных итераций и ядер, используемых на итерацию.| Максимальное число&nbsp;параллельных&nbsp;итераций: 5<br> Максимальное число ядер&nbsp;на&nbsp;итерацию&nbsp;: Нет
        
        Нажмите кнопку **ОК**.

1. Нажмите кнопку **Создать**, чтобы запустить эксперимент. Откроется экран **Сведения о выполнении**, содержащий значение **Состояние выполнения** после начала подготовки эксперимента.

>[!IMPORTANT]
> Подготовка к запуску эксперимента занимает **10-15 минут**.
> С начала эксперимента на каждую итерацию уходит **2-3 минуты**.  
> Чтобы увидеть состояние выполнения в ходе выполнения эксперимента, периодически щелкайте **Обновить**.
>
> В рабочей среде у вас будет время заняться другими делами. Но в рамках этого руководства мы рекомендуем начинать изучение протестированных алгоритмов на вкладке "Модели" сразу по мере их появления, пока остальные алгоритмы еще выполняются. 

##  <a name="explore-models"></a>Изучение моделей

Перейдите на вкладку **Модели**, чтобы просмотреть протестированные алгоритмы (модели). По умолчанию модели упорядочиваются по оценке метрики по мере их завершения. В этом учебнике в начале списка отображается модель, имеющая наибольшее значение по выбранной метрике **AUC_weighted**.

В ожидании завершения всех моделей эксперимента вы можете щелкнуть **Algorithm name** (Имя алгоритма) для любой завершенной модели, чтобы просмотреть сведения о ее эффективности. 

Чтобы просмотреть свойства, метрики и диаграммы эффективности выбранной модели, воспользуйтесь вкладками **Сведения о модели** и **Визуализации**. 

![Сведения о выполнении итераций](media/tutorial-1st-experiment-automated-ml/run-detail.gif)

## <a name="deploy-the-model"></a>Развертывание модели

Автоматизированное машинное обучение в Студии машинного обучения Azure позволяет развернуть лучшую модель как веб-службу всего с помощью нескольких действий. Развертывание — это интеграция модели для прогнозирования по новым данным и определения потенциальных новых возможностей. 

Для этого эксперимента развертывание в веб-службе предоставит финансовому учреждению итеративное и масштабируемое решение для определения потенциальных клиентов по депозитам с фиксированным сроком. 

После завершения выполнения вернитесь на страницу **Сведения о выполнении** и выберите вкладку **Модели**. Выберите **Обновить**. 

В контексте этого эксперимента лучшей моделью принимается **VotingEnsemble**, исходя из значения метрики **AUC_weighted**.  Мы развернем эту модель. Учитывайте, что процесс развертывания занимает около 20 минут. Процесс развертывания выполняется за несколько шагов, включая регистрацию модели, создание ресурсов и их настройку для веб-службы.

1. Нажмите кнопку **Deploy Best Model** (Развернуть лучшую модель) в нижнем левом углу.

1. Заполните панель **Deploy Best Model** (Развертывание лучшей модели), как показано ниже.

    Поле| Значение
    ----|----
    Deployment name (Имя развертывания)| my-automl-deploy
    Deployment description (Описание развертывания)| My first automated machine learning experiment deployment (Первое развертывание эксперимента автоматического машинного обучения)
    Scoring script (Скрипт оценки)| Autogenerate (Создавать автоматически)
    Environment script (Скрипт среды)| Autogenerate (Создавать автоматически)
    
1. Выберите **Развернуть**.  

    В области **Recommended model** (Рекомендуемая модель) в разделе **Deploy status** (Состояние развертывания) отображается сообщение об успешном завершении развертывания. Периодически щелкайте **Обновить**, чтобы проверять состояние развертывания.
    
Теперь у вас есть рабочая веб-служба для создания прогнозов. 

Перейдите к [**дальнейшим действиям**](#next-steps), чтобы узнать больше о том, как использовать новую веб-службу, и протестируйте прогнозы, используя встроенную поддержку Power BI в Машинном обучении Azure.

## <a name="clean-up-resources"></a>Очистка ресурсов

Файлы развертывания имеют больший размер, чем файлы данных и экспериментов, поэтому их хранение обходится дороже. Вы можете удалить только файлы развертывания, чтобы снизить затраты на учетную запись, если хотите сохранить рабочую области и файлы экспериментов. В противном случае, если вы не планируете дальше использовать эти файлы, удалите всю группу ресурсов.  

### <a name="delete-the-deployment-instance"></a>Удаление промежуточного развертывания

Чтобы сохранить группу ресурсов и рабочую область для изучения других руководств и собственных исследований, удалите из Студии машинного обучения Azure только экземпляр развертывания. 

1. Перейдите в [Студию машинного обучения Azure](https://ml.azure.com/). Перейдите в свою рабочую область и слева под областью **Ресурсы** выберите **Конечные точки**. 

1. Выберите развертывание для удаления и щелкните **Удалить**. 

1. Выберите **Продолжить**.

### <a name="delete-the-resource-group"></a>удаление группы ресурсов.

[!INCLUDE [aml-delete-resource-group](../../../includes/aml-delete-resource-group.md)]

## <a name="next-steps"></a>Дополнительная информация

В ходе работы с этим руководством по автоматизированному машинному обучению вы создали и развернули модель классификации с помощью Студии машинного обучения Azure. Дополнительные сведения и дальнейшие процедуры вы найдете в следующих статьях:

> [!div class="nextstepaction"]
> [Использование веб-службы](how-to-consume-web-service.md#consume-the-service-from-power-bi)

+ Подробная информация [о предварительной обработке](how-to-create-portal-experiments.md#preprocess).
+ Подробная информация [о профилировании данных](how-to-create-portal-experiments.md#profile).
+ Дополнительные сведения [об автоматическом машинном обучении](concept-automated-ml.md).
+ Дополнительные сведения о классификационных метриках и графиках см. в статье [Общие сведения об автоматических результатах машинного обучения](how-to-understand-automated-ml.md#classification).

>[!NOTE]
> Этот набор данных о банковском маркетинге предоставляется на условиях лицензии [Creative Commons (CCO: Public Domain)](https://creativecommons.org/publicdomain/zero/1.0/). Все права на отдельное содержимое базы данных предоставляются на условиях [лицензии на содержимое базы данных](https://creativecommons.org/publicdomain/zero/1.0/) и доступны в [Kaggle](https://www.kaggle.com/janiobachmann/bank-marketing-dataset). Этот набор данных изначально предоставлялся в [базе данных UCI для машинного обучения](https://archive.ics.uci.edu/ml/datasets/bank+marketing).<br><br>
> [Moro et al., 2014] S. Moro, P. Cortez and P. Rita. A Data-Driven Approach to Predict the Success of Bank Telemarketing. (Основанный на данных подход, позволяющий прогнозировать успешность телемаркетинга в банке.) Decision Support Systems (Системы поддержки принятия решений), Elsevier, 62:22-31, Июнь 2014 г.
