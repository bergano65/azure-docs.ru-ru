---
title: Использование Аутомл для создания моделей & развертывания
titleSuffix: Azure Machine Learning
description: Создание, проверка и развертывание автоматических моделей машинного обучения с помощью Машинное обучение Azure Studio.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.author: nibaccam
author: aniththa
ms.reviewer: nibaccam
ms.date: 12/20/2020
ms.topic: conceptual
ms.custom: how-to, automl
ms.openlocfilehash: 1a40fe01240474c2a6df3e028b7d03f3e8bb73fc
ms.sourcegitcommit: aaa65bd769eb2e234e42cfb07d7d459a2cc273ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98879753"
---
# <a name="create-review-and-deploy-automated-machine-learning-models-with-azure-machine-learning"></a>Создание, проверка и развертывание моделей автоматизированного машинного обучения с помощью Машинного обучения Azure


В этой статье вы узнаете, как создавать, изучать и развертывать автоматизированные модели машинного обучения без единой строки кода в Машинное обучение Azure Studio.

Автоматизированное машинное обучение — это процесс выбора оптимального алгоритма машинного обучения для конкретных данных. Этот процесс позволяет быстро создавать модели машинного обучения. [Узнайте больше об автоматизированном машинном обучении](concept-automated-ml.md).
 
Полный пример см. в [учебнике по созданию модели классификации с помощью интерфейса автоматизированного ML в Машинном обучении Azure](tutorial-first-experiment-automated-ml.md). 

Чтобы воспользоваться функцией создания кода на Python, [настройте эксперименты машинного обучения](how-to-configure-auto-train.md) с помощью пакета SDK для Машинного обучения Azure.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись, прежде чем начинать работу. Опробуйте [бесплатную или платную версию Машинного обучения Azure](https://aka.ms/AMLFree) уже сегодня.

* Рабочая область машинного обучения Azure. См. сведения о [создании рабочей области машинного обучения Azure](how-to-manage-workspace.md). 

## <a name="get-started"></a>Начало работы

1. Войдите в Машинное обучение Azure по адресу https://ml.azure.com. 

1. Выберите подписку и рабочую область. 

1. Перейдите в область слева. В разделе **Автор** выберите **Автоматизированное машинное обучение**.

[![Область навигации в Студии машинного обучения Azure](media/how-to-use-automated-ml-for-ml-models/nav-pane.png)](media/how-to-use-automated-ml-for-ml-models/nav-pane-expanded.png)

 Если вы впервые создаете эксперимент, вы увидите пустой список и ссылки на документацию. 

В противном случае вы увидите список последних экспериментов для автоматизированного машинного обучения, включая созданные с помощью пакета SDK. 

## <a name="create-and-run-experiment"></a>Создание и запуск эксперимента

1. Выберите **+ New automated ML run** (+ Новое выполнение автоматизированного машинного обучения) и заполните форму.

1. Выберите набор данных из контейнера хранилища или создайте новый набор данных. Наборы данных можно создавать на основе локальных файлов, URL-адресов в Интернете, хранилищ данных или открытых наборов данных Azure. Дополнительные сведения о [создании наборов данных](how-to-create-register-datasets.md).  

    >[!Important]
    > Требования к данным для обучения:
    >* Данные должны иметь табличный формат.
    >* В данных должно присутствовать прогнозируемое значение (целевой столбец).

    1. Чтобы создать новый набор данных из файла на локальном компьютере, выберите **+ создать набор данных** , а затем выберите **из локального файла**. 

    1. В форме **Основная информация** присвойте набору данных уникальное имя и укажите необязательное описание. 

    1. Нажмите **Далее**, чтобы открыть **форму выбора хранилища данных и файлов**. В этой форме следует выбрать, куда отправить набор данных: в контейнер хранилища по умолчанию, который автоматически создается вместе с рабочей областью, или другой контейнер хранилища, который вы хотите использовать для эксперимента. 
    
        1. Если данные находятся за виртуальной сетью, необходимо включить функцию **пропустить проверку** , чтобы убедиться, что Рабочая область может получать доступ к данным. Дополнительные сведения см. [в статье использование машинное обучение Azure Studio в виртуальной сети Azure](how-to-enable-studio-virtual-network.md). 
    
    1. Нажмите кнопку **Обзор** , чтобы отправить файл данных для набора данных. 

    1. Проверьте точность заполнения **формы параметров и предварительного просмотра**. Для формы применяется интеллектуальное заполнение на основе типа файла. 

        Поле| Описание
        ----|----
        Формат файла| Свойство определяет структуру и тип данных, хранящихся в файле.
        Разделитель| Один или несколько символов для указания границы между отдельными, независимыми регионами в виде простого текста или других потоков данных.
        Кодирование| Определяет, какой бит следует использовать в таблице схемы символов, чтобы считать набор данных.
        Заголовки столбцов| Указывает, как будут обрабатываться заголовки набора данных, если таковые имеются.
        Пропустить строки | Указывает, сколько строк, если таковые имеются, пропускается в наборе данных.
    
        Выберите **Далее**.

    1. Для **формы схемы** используется интеллектуальное заполнение с учетом выбора в **форме параметров и предварительного просмотра**. Здесь можно настроить тип данных для каждого столбца, проверить имена столбцов и выбрать столбцы, которые **не следует включать** в эксперимент. 
            
        Выберите **Далее**.

    1. В **форме подтверждения сведений** приведена сводка по данным, которые были ранее введены в формах **общих сведений** и **параметров и предварительного просмотра**. С помощью вычислений среды с поддержкой профилирования вы также можете создать профиль данных для набора данных. Подробная информация [о профилировании данных](how-to-connect-data-ui.md#profile).

        Выберите **Далее**.
1. Выберите только что созданный набор данных, когда он появится в списке. Вы также можете воспользоваться предварительным просмотром набора данных и просмотреть пример статистики. 

1. В форме **Настройка запуска** выберите **создать** и введите **Tutorial-аутомл-Deploy** для имени эксперимента.

1. Выберите целевой столбец. Это столбец, по которому необходимо выполнить прогнозирование.

1. Выберите вычисление для задания обучения и профилирования данных. Список имеющихся вычислительных сред доступен в раскрывающемся списке. Чтобы создать вычислительную среду, следуйте инструкциям для шага 7.

1. Щелкните **Create a new compute** (Создать вычислительную среду) и настройте контекст вычислений для этого эксперимента.

    Поле|Описание
    ---|---
    Имя вычислительной среды| Введите уникальное имя для идентификации контекста вычислительной среды.
    Приоритет виртуальной машины| Виртуальные машины с низким приоритетом являются более дешевыми, но не гарантируют расчетные узлы. 
    Тип виртуальной машины| Выберите ЦП или GPU для типа виртуальной машины.
    размер виртуальной машины;| Выберите размер виртуальной машины для вычислительной среды.
    Min/Max nodes (Минимальное и максимальное количество узлов)| Для профилирования данных необходимо указать один или больше узлов. Введите максимальное число узлов для вычислительной среды. Значение по умолчанию — 6 узлов для вычислительной среды AML.
    Дополнительные параметры | Эти параметры позволяют настроить учетную запись пользователя и существующую виртуальную сеть для эксперимента. 
    
    Нажмите кнопку **создания**. Создание вычислительной среды может занять несколько минут.

    >[!NOTE]
    > По имени созданной или выбранной вычислительной среды можно определить, *поддерживает ли она профилирование*. (Дополнительные сведения см. в разделе о [профилировании данных](how-to-connect-data-ui.md#profile).)

    Выберите **Далее**.

1. В **форме типа и параметров задачи** выберите тип задачи: классификация, регрессия или прогнозирование. Дополнительные сведения см. в разделе [Поддерживаемые типы задач](concept-automated-ml.md#when-to-use-automl-classify-regression--forecast) .

    1. Для **классификации** можно также включить глубокое обучение.
    
        Если включено глубокое обучение, то проверка ограничена _train_validation разделением_. Дополнительные [сведения о параметрах проверки](how-to-configure-cross-validation-data-splits.md).


    1. Для **прогнозирования** можно 
    
        1. Включить глубокое обучение.
    
        1. Выберите *столбец времени*: этот столбец содержит данные времени для использования.

        1. Выбор *прогнозируемого горизонта*: укажите количество единиц времени (минут/ч/дней/недель/месяцев/лет), которое модель сможет прогнозировать в будущем. Чем дальше будущее, которое должна прогнозировать модель, тем менее точной она будет. [Узнайте больше о прогнозе и горизонте прогнозирования](how-to-auto-train-forecast.md).

1. Необязательно. Просмотрите дополнительные параметры конфигурации, которые можно использовать для лучшего управления заданием обучения. В противном случае применяются значения по умолчанию, основанные на выборе эксперимента и данных. 

    Дополнительные конфигурации|Описание
    ------|------
    Основная метрика| Основная метрика, используемая для оценки модели. [Узнайте больше о метриках модели](how-to-configure-auto-train.md#primary-metric).
    Пояснения для наилучшей модели | Выберите этот параметр для включения или отключения, чтобы отобразить объяснения для рекомендованной лучшей модели. <br> Эта функция в настоящее время недоступна для [определенных алгоритмов прогнозирования](how-to-machine-learning-interpretability-automl.md#interpretability-during-training-for-the-best-model). 
    Запрещенные алгоритмы| Выберите алгоритмы, которые вы хотите исключить из задания обучения. <br><br> Разрешение алгоритмов доступно только для [экспериментов с пакетом SDK](how-to-configure-auto-train.md#supported-models). <br> См. [Поддерживаемые модели для каждого типа задачи](/python/api/azureml-automl-core/azureml.automl.core.shared.constants.supportedmodels?preserve-view=true&view=azure-ml-py).
    Критерий выхода| Если выполняется любое из этих условий, задание обучения останавливается. <br> *Training job time (hours)* (Время задания обучения (в часах)). Продолжительность выполнения задания обучения. <br> *Metric score threshold* (Порог оценки метрики).  Минимальный показатель метрики для всех конвейеров. Гарантирует, что при наличии определенной целевой метрики вы не потратите на задание обучения больше времени, чем это нужно.
    Проверка| Выберите один из вариантов перекрестной проверки, чтобы использовать его в задании обучения. <br> [Узнайте больше о перекрестных проверках](how-to-configure-cross-validation-data-splits.md#prerequisites).<br> <br>Прогнозирование поддерживается только для перекрестной проверки на k.
    Параллелизм| *Max concurrent iterations* (Максимальное число одновременных итераций). Максимальное количество конвейеров (итераций) для тестирования в задании обучения. Число итераций при выполнении задания не будет больше указанного числа. Узнайте больше о том, как автоматизированное ML выполняет [несколько дочерних операций в кластерах](how-to-configure-auto-train.md#multiple-child-runs-on-clusters).

1. Используемых Просмотреть параметры Добавление признаков: Если вы решили включить **Автоматическое добавление признаков** в форме **дополнительных параметров конфигурации** , применяются методики Добавление признаков по умолчанию. В окне **Просмотр параметров Добавление признаков** можно изменить эти значения по умолчанию и соответствующим образом настроить. Узнайте, как [настроить феатуризатионс](#customize-featurization). 

    ![На снимке экрана показано диалоговое окно Выбор типа задачи с вызываемыми параметрами View Добавление признаков.](media/how-to-use-automated-ml-for-ml-models/view-featurization-settings.png)

## <a name="customize-featurization"></a>Настройка Добавление признаков

В форме **Добавление признаков** можно включить или отключить автоматическое добавление признаков и настроить параметры автоматического Добавление признаков для своего эксперимента. Чтобы открыть эту форму, см. шаг 10 в разделе [Создание и запуск эксперимента](#create-and-run-experiment) . 

В следующей таблице приведена сводка настроек, доступных в данный момент в студии. 

Столбец| Настройка
---|---
Включено | Указывает, какие столбцы следует включить в обучение.
Тип компонента| Изменение типа значения для выбранного столбца.
Аппроксимация с| Выберите, какое значение аппроксимация отсутствующие значения в данных.

![Машинное обучение Azure Studio Custom Добавление признаков](media/how-to-use-automated-ml-for-ml-models/custom-featurization.png)

## <a name="run-experiment-and-view-results"></a>Запуск эксперимента и просмотр результатов

Выберите **Готово**, чтобы запустить эксперимент. Подготовка эксперимента может занять до 10 мин. Выполнение заданий обучения может занять еще 2–3 минуты для завершения работы каждого конвейера.

> [!NOTE]
> Алгоритмы, применяемые автоматизированным МАШИНным шифрованием, имеют случайное значение, что может привести к незначительной вариации в окончательной оценке метрик в рекомендуемой модели, такой как точность. При необходимости автоматизированное ML выполняет операции с данными, такими как разбиение по учению и проверке, разбиение на действия по обучению или перекрестная проверка. Поэтому, если вы запускаете эксперимент с теми же параметрами конфигурации и основной метрикой несколько раз, вы, вероятно, увидите вариант в последних метриках каждого эксперимента в соответствии с этими факторами. 

### <a name="view-experiment-details"></a>Просмотр сведений об эксперименте

Откроется экран **Run Detail** (Сведения о запуске) на вкладке **Details** (Сведения). На этом экране отображается сводка по запуску эксперимента, в том числе строка состояния в верхней части рядом с количеством выполнений. 

Вкладка **Модели** содержит список созданных моделей в порядке оценки метрики. По умолчанию модель с наивысшей оценкой, полученной на основе выбранной метрики, будет в верхней части списка. По мере того как задание обучения использует дополнительные модели, они добавляются в список. Используйте это для быстрого сравнения метрик созданных моделей.

![Сведения о запуске](./media/how-to-use-automated-ml-for-ml-models/explore-models.gif)

### <a name="view-training-run-details"></a>Просмотр сведений о выполнении обучения

Детализируйте углублением все завершенные модели, чтобы просмотреть сведения о выполнении обучения, такие как сводка по модели на вкладке " **модель** " или диаграммы метрики производительности на вкладке " **метрики** ". Дополнительные [сведения о диаграммах](how-to-understand-automated-ml.md).

[![Сведения об итерациях](media/how-to-use-automated-ml-for-ml-models/iteration-details.png)](media/how-to-use-automated-ml-for-ml-models/iteration-details-expanded.png)

## <a name="deploy-your-model"></a>Развертывание модели

Теперь, когда у вас есть лучшая модель, можно развернуть ее как веб-службу для прогнозирования новых данных.

Автоматизированное машинное обучение позволяет с легкостью развернуть модель без написания кода.

1. Доступно несколько вариантов развертывания. 

    + Вариант 1. Развертывание лучшей модели в соответствии с заданными критериями метрики. 
        1. После завершения эксперимента перейдите на страницу родительский запуск, выбрав **Запуск 1** в верхней части экрана. 
        1.  Выберите модель, указанную в разделе « **Лучшая сводка по модели** ». 
        1. Выберите **развернуть** в левом верхнем углу окна. 

    + Вариант 2. развертывание определенной итерации модели из этого эксперимента.
        1. Выберите нужную модель на вкладке **Модели**.
        1. Выберите **развернуть** в левом верхнем углу окна.

1. Заполните область **Развернуть модель**, как показано ниже.

    Поле| Значение
    ----|----
    Имя| Введите уникальное имя развертывания.
    Описание| Введите описание, чтобы лучше понять, для чего предназначено это развертывание.
    Тип вычисления| Выберите тип конечной точки для развертывания: *Azure Kubernetes Service (AKS)* или *экземпляр контейнера Azure (ACI)* .
    Имя вычислительной среды| *Применимо только к AKS.* Выберите имя кластера AKS для развертывания.
    Включить проверку подлинности | Выберите этот параметр, чтобы разрешить проверку подлинности на основе токенов или на основе ключей.
    Использовать настраиваемые ресурсы развертывания| Включите эту возможность, если хотите отправить собственный скрипт оценки и файл среды. [Узнайте больше о скриптах оценки](how-to-deploy-and-where.md).

    >[!Important]
    > Имена файлов должны быть длиной не более 32 символов, а также начинаться и заканчиваться буквой или цифрой. Они могут включать в себя дефисы, символы подчеркивания, точки, буквы и цифры. Пробелы недопустимы.

    В меню *Дополнительно* содержатся признаки развертывания по умолчанию, например [коллекция данных](how-to-enable-app-insights.md) и параметры использования ресурсов. Если вы хотите переопределить эти значения по умолчанию, это можно сделать в данном меню.

1. Выберите **Развернуть**. Развертывание может занять около 20 минут.
    После начала развертывания появится вкладка **Сводка по модели**. Сведения о ходе развертывания см. в разделе **Состояние развертывания**. 

Теперь у вас есть рабочая веб-служба для создания прогнозов! Вы можете проверить прогнозы, запросив соответствующую услугу с помощью [встроенной функции поддержки Машинного обучение Azure в Power BI](/power-bi/connect-data/service-aml-integrate?context=azure%2fmachine-learning%2fcontext%2fml-context).

## <a name="next-steps"></a>Дальнейшие действия

* [Узнайте, как использовать веб-службу](how-to-consume-web-service.md).
* [Ознакомьтесь с общими сведениями о результатах автоматизированного машинного обучения](how-to-understand-automated-ml.md).
* [Узнайте больше об автоматизированном машинном обучении](concept-automated-ml.md) и Машинном обучении Azure.