---
title: Возможности безопасности Базы данных SQL Azure
description: В этой статье представлено общее описание Базы данных SQL Azure, которая защищает данные клиентов в Azure.
services: security
documentationcenter: na
author: TerryLanfear
manager: barbkess
editor: TomSh
ms.assetid: 61e95a87-39c5-48f5-aee6-6f90ddcd336e
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/09/2020
ms.author: terrylan
ms.openlocfilehash: e0e7089e7c674f324c2c3d293661c518b41731b9
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84021863"
---
# <a name="azure-sql-database-security-features"></a>Возможности безопасности Базы данных SQL Azure    
База данных SQL Azure предоставляет службу реляционной базы данных в Azure. Чтобы защитить данные клиентов и обеспечить надежные функции безопасности, которые клиенты ожидают от службы реляционной базы данных, База данных SQL имеет свои собственные наборы возможностей обеспечения безопасности. Эти возможности основаны на элементах управления, которые унаследованы от Azure.

## <a name="security-capabilities"></a>Возможности системы безопасности

### <a name="usage-of-the-tds-protocol"></a>Использование протокола TDS
База данных SQL Azure поддерживает только протокол табличных данных (TDS), который требует, чтобы по умолчанию база данных была доступна только через порт TCP/1433.

### <a name="azure-sql-database-firewall"></a>Брандмауэр Базы данных SQL Azure
Для защиты данных клиентов база данных SQL Azure включает функцию брандмауэра, которая по умолчанию предотвращает доступ к базе данных SQL, как показано ниже.

![Брандмауэр Базы данных SQL Azure](./media/infrastructure-sql/sql-database-firewall.png)

Шлюз брандмауэра может ограничить адреса, что позволяет детализировать контроль клиентов для определения диапазона допустимых IP-адресов. Брандмауэр предоставляет доступ на основе исходного IP-адреса каждого запроса.

Клиенты могут выполнить конфигурацию брандмауэра с помощью портала управления или программно с использованием REST API управления Базой данных SQL Azure. Брандмауэр шлюза базы данных SQL Azure по умолчанию предотвращает доступ всех клиентов TDS к базе данных SQL Azure. Клиенты должны настроить доступ с помощью списков управления доступом (ACL), чтобы разрешать подключения к базе данных SQL Azure по исходным и целевым интернет-адресам, протоколам и номерам портов.

### <a name="dosguard"></a>DoSGuard
Атаки типа "отказ в обслуживании" (DoS) уменьшаются за счет службы "Шлюз Базы данных SQL" под названием DoSGuard. DoSGuard активно отслеживает неудачные попытки входа с IP-адресов. Если в течение определенного периода времени существует несколько неудачных попыток входа с определенного IP-адреса, блокируется доступ этого IP-адреса к любым ресурсам службы в течение заранее определенного периода времени.

Кроме того, шлюз Базы данных SQL Azure выполняет следующее:

- Согласование возможностей безопасного канала для реализации проверенных зашифрованных соединений TDS FIPS 140-2 при подключении к серверам баз данных.
- Проверка пакета TDS с отслеживанием состояния при выполнении соединений с клиентами. Шлюз проверяет информацию о соединении и передает пакеты TDS на соответствующий физический сервер на основании имени базы данных, указанного в строке подключения.

Ключевой принцип сетевой безопасности предложения для Базы данных SQL Azure заключается в том, чтобы разрешать только подключение и связь, которые необходимы для работы службы. Все остальные порты, протоколы и соединения блокируются по умолчанию. Виртуальные локальные сети и списки управления доступом используются для ограничения сетевой связи по исходным и целевым сетям, протоколам и номерам портов.

Механизмы, утвержденные для реализации списков управления доступом на основе сети, включают в себя: списки ACL на маршрутизаторах и подсистемах балансировки нагрузки. Эти механизмы управляются правилами сети Azure, брандмауэра гостевой виртуальной машины и брандмауэра шлюза Базы данных SQL Azure, которые настроил клиент.

## <a name="data-segregation-and-customer-isolation"></a>Разделение данных и изоляция клиентов
Рабочая сеть Azure структурирована таким образом, что общедоступные системные компоненты отделены от внутренних ресурсов. Существуют физические и логические границы между веб-серверами, обеспечивающими доступ к публичному объекту портала Azure, и базовой виртуальной инфраструктурой Azure, где находятся экземпляры клиентских приложений и данные клиента.

Вся общедоступная информация управляется в рабочей сети Azure. Производственная сеть подчиняется двухфакторным механизмам аутентификации и граничной защиты, использует набор функций брандмауэра и защиты, описанный в предыдущем разделе, и использует функции изоляции данных, как указано в следующих разделах.

### <a name="unauthorized-systems-and-isolation-of-the-fc"></a>Неавторизованные системы и изоляция контроллера структуры
Так как контроллер структуры является центральным оркестратором структуры Azure, для него существуют значительные средства для уменьшения угроз, особенно из потенциально скомпрометированных FA в клиентских приложениях. Контроллер структуры не распознает аппаратное обеспечение, информация об устройстве которого (например, MAC-адрес) предварительно не загружена в него. DHCP-серверы в контроллере структуры имеют настроенные списки MAC-адресов узлов, которые готовы к загрузке. Даже если подключены несанкционированные системы, они не включены в реестр Fabric и поэтому не связаны или не разрешены для связи с какой-либо системой в реестре Fabric. Это уменьшает риск связи несанкционированных систем с контроллером структуры и доступом к виртуальным локальным сетям и Azure.

### <a name="vlan-isolation"></a>Изоляция виртуальных локальных сетей
Рабочая сеть Azure логически разделяется на три основные виртуальные локальные сети.

- Основная виртуальная локальная сеть: соединяет ненадежные узлы клиента между собой.
- Виртуальная локальная сеть контроллера структуры: содержит доверенные контроллеры структуры и вспомогательные системы.
- Виртуальная локальная сеть устройств: содержит доверенные сетевые и другие устройства инфраструктуры.

### <a name="packet-filtering"></a>Фильтрация пакетов
IPFilter и брандмауэры программного обеспечения, реализованные в корневой ОС и гостевой ОС узлов, обеспечивают ограничения подключения и предотвращают несанкционированный трафик между виртуальными машинами.

### <a name="hypervisor-root-os-and-guest-vms"></a>Гипервизор, корневая ОС и гостевые виртуальные машины
Изоляция корневой ОС от гостевых виртуальных машин и гостевых виртуальных машин одна от другой управляется гипервизором и корневой ОС.

### <a name="types-of-rules-on-firewalls"></a>Типы правил для брандмауэров
Правило определяется следующим образом.

{SRC IP, порт src, IP-адрес назначения, порт назначения, протокол назначения, вход/с отслеживанием состояния, без отслеживания состояния, время ожидания потока с отслеживанием состояния}.

Пакетам SYN разрешено входить или выходить только в том случае, если это разрешено одним из правил. Для TCP Azure использует правила без отслеживания состояния, где принцип заключается в том, что он разрешает входить в виртуальную машину или выходить из нее всему, что не есть SYN-пакетами. Локальная безопасность заключается в том, что любой стек узла устойчив к игнорированию того,что не есть SYN-пакетами, если ранее он не видел пакета SYN. Протокол TCP сам по себе отслеживает состояние, и в сочетании с правилом на основе SYN, имеющим статус "без отслеживания состояния", достигается общее поведение реализации с отслеживанием состояния.

Azure использует правило отслеживания состояния для протокола пользовательских датаграмм (UDP). Каждый раз, когда UDP-пакет соответствует правилу, создается обратный поток в другом направлении. Этот поток имеет встроенное время ожидания.

Клиенты несут ответственность за настройку собственных брандмауэров поверх того, что предоставляет Azure. Здесь клиенты могут определять правила для входящего и исходящего трафика.

### <a name="production-configuration-management"></a>Производственное управление конфигурацией
Стандартные конфигурации безопасности поддерживаются соответствующими командами операций в Azure и в Базе данных SQL Azure. Все изменения конфигурации рабочих систем документируются и отслеживаются через центральную систему отслеживания. Изменения в программном и аппаратном обеспечении отслеживаются через центральную систему отслеживания. Изменения в сети, связанные с ACL, отслеживаются с использованием службы управления ACL (AMS).

Все изменения конфигурации в Azure разработаны и протестированы в промежуточной среде, а затем развернуты в рабочей среде. Сборка программного обеспечения рассматривается как часть тестирования. Проверки безопасности и конфиденциальности рассматриваются как часть критериев контрольного списка. Изменения будут развернуты по расписанию соответствующей группой развертывания. Выпуски проверяются и подписываются соответствующим персоналом команды развертывания до их развертывания в рабочей среде.

Изменения отслеживаются для успешного завершения. В случае сбоя сценария изменение отменяется до предыдущего состояния или развертывается исправление для устранения сбоя с утверждением назначенного персонала. Хранилище исходного кода, Git, TFS, Master Data Services (MDS), средство запуска, мониторинг безопасности Azure, контроллер структуры и платформа WinFabric используются для централизованного управления, применения и проверки параметров конфигурации в виртуальной среде Azure.

Аналогичным образом, аппаратные и сетевые изменения установили шаги проверки, чтобы оценить их соответствие требованиям сборки. Выпуски рассматриваются и авторизуются через скоординированный совет по изменениям (CAB) соответствующих групп по всему стеку.

## <a name="next-steps"></a>Дальнейшие шаги
Дополнительные сведения о действиях корпорации Майкрософт в сфере защиты инфраструктуры Azure приведены в следующих статьях:

- [Объекты, локальная среда и физическая безопасность в Azure](physical-security.md)
- [Доступность инфраструктуры Azure](infrastructure-availability.md)
- [Компоненты и границы информационной системы Azure](infrastructure-components.md)
- [Сетевая архитектура Azure](infrastructure-network.md)
- [Рабочая сеть Azure](production-network.md)
- [Операции и управление в рабочей среде Azure](infrastructure-operations.md)
- [Мониторинг инфраструктуры Azure](infrastructure-monitoring.md)
- [Целостность инфраструктуры Azure](infrastructure-integrity.md)
- [Защита данных клиентов в Azure](protection-customer-data.md)
