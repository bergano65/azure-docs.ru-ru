---
title: Измеряемая Загрузка встроенного по и аттестация узла — безопасность Azure
description: Технический обзор измеряемой загрузки встроенного по Azure и аттестации узла.
author: yosharm
ms.service: security
ms.subservice: security-fundamentals
ms.topic: article
ms.author: terrylan
manager: rkarlin
ms.date: 11/10/2020
ms.openlocfilehash: 73ae811c17a578cafc557b0cda9e98b101dd5c03
ms.sourcegitcommit: dc342bef86e822358efe2d363958f6075bcfc22a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2020
ms.locfileid: "94557825"
---
# <a name="measured-boot-and-host-attestation"></a>Измеряемая Загрузка и аттестация узла
В этой статье описывается, как корпорация Майкрософт обеспечивает целостность и безопасность узлов с помощью измеряемой загрузки и аттестации узлов.

## <a name="measured-boot"></a>Измеряемая Загрузка

[Доверенный платформенный модуль (TPM)](https://docs.microsoft.com/windows/security/information-protection/tpm/trusted-platform-module-top-node) доверенного платформенного модуля (TPM) — это криптографически безопасный компонент аудита с встроенным по, предоставляемым доверенным сторонним лицом. В журнале конфигурации загрузки содержатся связанные с хэшированием измерения, записанные в реестры конфигурации платформы (PCR), когда узел последний раз помещается в последовательность начальной загрузки. Этот процесс записи показан на следующем рисунке. Постепенное добавление ранее хэшированного измерения к хэшу следующего измерения и запуск алгоритма хэширования в объединении приводят к цепочке хэширования.

![Схема, показывающая хэш-цепочку службы аттестации узла.](./media/measured-boot-host-attestation/hash-chaining.png)

Аттестация выполняется, когда узел представляет собой подтверждение состояния конфигурации с помощью журнала конфигурации загрузки (Ткглог). Подделка журнала загрузки сложнее, так как доверенный платформенный модуль не предоставляет значения PCR, отличные от операций чтения и расширения. Более того, учетные данные, предоставляемые службой аттестации узла, запечатаны с конкретными значениями PCR. Использование хэш-цепочек позволяет вычислительно нецелесообразно подменить или распечатывать учетные данные по внешнему каналу.

## <a name="host-attestation-service"></a>Служба аттестации узлов

Служба аттестации узлов — это мера по превентивной проверке, которая проверяет надежность компьютеров размещения, прежде чем они смогут взаимодействовать с данными или рабочими нагрузками клиента. Проверка службы аттестации узлов выполняется путем проверки заявления о соответствии (проверяемого подтверждения соответствия узла), отправляемого каждым узлом на политику аттестации (определение безопасного состояния). Целостность этой системы гарантирована [корневым доверием](https://www.uefi.org/sites/default/files/resources/UEFI%20RoT%20white%20paper_Final%208%208%2016%20%28003%29.pdf) , обеспечиваемым доверенным платформенным модулем.

Служба аттестации узла содержится в каждом кластере Azure в специализированной заблокированной среде. Заблокированная среда включает в себя другие службы привратника, которые участвуют в протоколе начальной загрузки главного компьютера. Инфраструктура открытых ключей (PKI) выступает в качестве посредника для проверки проверенных запросов аттестации и как издателя удостоверений (в зависимости от успешной аттестации узла). Учетные данные после аттестации, выданные узлу аттестации, запечатаны по идентификатору. Только запрашивающий узел может распечатывать учетные данные и использовать их для получения добавочных разрешений. Это предотвращает атаки "злоумышленник в середине" и "подмена".

Если узел Azure поступает от фабрики с неправильной конфигурацией безопасности или изменен в центре обработки данных, его Ткглог содержит индикаторы компрометации, отмеченных службой аттестации узла при следующей аттестации, что приводит к сбою аттестации. Сбои аттестации не позволяют парку Azure доверять узлу, вызвавшему ошибку. Эта защита эффективно блокирует все обмен данными с узлом и запускает рабочий процесс инцидента. Исследование и подробный анализ после неустранимой проблемы выполняются для определения основных причин и любых потенциальных появления угроз. Это происходит только после того, как анализ завершен, что узел исправляется и имеет возможность присоединиться к парку Azure и взять на себя клиентские рабочие нагрузки.

Ниже приведена высокоуровневая архитектура службы аттестации узла.

![Схема, показывающая архитектуру службы аттестации узла.](./media/measured-boot-host-attestation/host-attestation-arch.png)

## <a name="attestation-measurements"></a>Измерения аттестации

Ниже приведены примеры многих измерений, зарегистрированных сегодня.

### <a name="secure-boot-and-secure-boot-keys"></a>Защищенная загрузка и ключи безопасной загрузки
При проверке правильности дайджестов базы данных подписей и отозванных хэш-кодов служба аттестации узла гарантирует, что агент клиента считает правильное программное обеспечение доверенным. Проверив сигнатуры базы данных ключа регистрации открытого ключа и ключа общедоступной платформы, служба аттестации узла подтверждает, что только доверенные стороны имеют разрешение на изменение определений программного обеспечения, которое считается доверенным. Наконец, убедившись в том, что безопасная загрузка активна, служба аттестации узла проверяет, применяются эти определения.

### <a name="debug-controls"></a>Элементы управления отладкой
Отладчики являются мощными инструментами для разработчиков. Тем не менее, неограниченный доступ к памяти и другим командам отладки может ослабить защиту данных и целостность системы, если это предоставлено недоверенной стороной. Служба аттестации узла обеспечивает отключать любые виды отладки при загрузке на рабочих компьютерах.

### <a name="code-integrity"></a>Целостность кода
[Безопасная загрузка](secure-boot.md) UEFI гарантирует, что во время загрузки может выполняться только доверенное программное обеспечение низкого уровня. Одни и те же проверки должны также применяться в среде после загрузки для драйверов и других исполняемых файлов с доступом в режиме ядра. Для этого используется политика целостности кода (CI), определяющая, какие драйверы, двоичные файлы и другие исполняемые файлы считаются доверенными, указывая допустимые и недопустимые подписи. Эти политики применяются принудительно. Нарушения политики создают предупреждения для расследования в группе реагирования на инциденты безопасности.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о том, что мы делаем для обеспечения целостности и безопасности платформы, см. в следующих статьях:

- [Безопасность встроенного по](firmware.md)
- [Безопасная загрузка](secure-boot.md)
- [Проект Cerberus](project-cerberus.md)
- [Шифрование при хранении](encryption-atrest.md)
- [Безопасность гипервизора](hypervisor.md)