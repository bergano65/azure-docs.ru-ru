---
title: Устранение неполадок центра Интернета вещей Azure 403004 Девицемаксимумкуеуедепсексцеедед
description: Сведения об исправлении ошибки 403004 Девицемаксимумкуеуедепсексцеедед
author: jlian
manager: briz
ms.service: iot-hub
services: iot-hub
ms.topic: troubleshooting
ms.date: 01/30/2020
ms.author: jlian
ms.custom:
- amqp
- mqtt
ms.openlocfilehash: fc5029f26e5d615502925c4def4e2973c118f38d
ms.sourcegitcommit: 3fc3457b5a6d5773323237f6a06ccfb6955bfb2d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2020
ms.locfileid: "90029993"
---
# <a name="403004-devicemaximumqueuedepthexceeded"></a>403004 DeviceMaximumQueueDepthExceeded

В этой статье описываются причины и решения для ошибок **403004 девицемаксимумкуеуедепсексцеедед** .

## <a name="symptoms"></a>Симптомы

При попытке отправить сообщение из облака на устройство происходит сбой запроса с ошибкой **403004** или **девицемаксимумкуеуедепсексцеедед**.

## <a name="cause"></a>Причина

Основная причина заключается в том, что количество сообщений, поставленных в очередь для устройства, превышает [ограничение очереди (50)](./iot-hub-devguide-quotas-throttling.md#other-limits).

Наиболее вероятной причиной этого является то, что вы используете протокол HTTPS для получения сообщения, что ведет к непрерывному опросу с помощью `ReceiveAsync` , что приводит к регулированию запроса центром Интернета вещей.

## <a name="solution"></a>Решение

Схема сообщений, передаваемых из облака на устройство с помощью HTTPS, может использоваться на периодически подключаемых устройствах, которые редко проверяют наличие новых сообщений (реже, чем раз в 25 минут). Чтобы уменьшить вероятность выполнения ограничения очереди, переключитесь на AMQP или MQTT для сообщений, отправляемых из облака на устройство.

Кроме того, можно улучшить логику устройства, чтобы быстро завершить, отклонять или отменять сообщения в очереди, сократить время жизни или отсылать меньше сообщений. См. о [сроке жизни сообщений, отправляемых из облака на устройство](./iot-hub-devguide-messages-c2d.md#message-expiration-time-to-live).

Наконец, рассмотрите возможность использования [API очистки очереди](https://docs.microsoft.com/azure/iot-hub/iot-c-sdk-ref/iothub-registrymanager-h/iothubregistrymanager-deletedevice) для периодической очистки ожидающих сообщений до достижения предела.