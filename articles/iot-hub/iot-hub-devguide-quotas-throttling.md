---
title: Общие сведения о квотах и регулировании в Центре Интернета вещей | Документация Майкрософт
description: Руководство разработчика. Описание квот, применимых к Центру Интернета вещей, и ожидаемого поведения регулирования.
author: robinsh
manager: philmea
ms.author: robin.shahan
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 09/05/2018
ms.openlocfilehash: 20e92317e748ebe19661a7c35d68829229b62378
ms.sourcegitcommit: d89b679d20ad45d224fd7d010496c52345f10c96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2019
ms.locfileid: "57791381"
---
# <a name="reference---iot-hub-quotas-and-throttling"></a>Руководство. Квоты и регулирование в Центре Интернета вещей

## <a name="quotas-and-throttling"></a>Квоты и регулирование

Каждая подписка Azure может использовать не более 50 Центров Интернета вещей и не более 1 центра уровня "Бесплатный".

Каждый центр Интернета вещей подготавливается с определенным количеством единиц для каждого конкретного уровня. Уровень и число единиц определяют максимальную дневную квоту сообщений, которые вы можете отправить. Размер сообщения, используемый для расчета дневной квоты, составляет 0,5 КБ для центра уровня "Бесплатный" и 4 КБ для других уровней. Дополнительные сведения см. на странице с [ценами на Центр Интернета вещей Azure](https://azure.microsoft.com/pricing/details/iot-hub/).

Уровень также определяет пределы регулирования, устанавливаемые Центром Интернета вещей для выполнения всех операций.

## <a name="operation-throttles"></a>Регулирование операций

Регулирование операции — это ограничение скорости, выражаемое в виде диапазона (в минутах). Оно нужно для того, чтобы избежать применения не по назначению. Центр Интернета вещей пытается избежать ошибок возврата, когда это возможно. Однако если регулирование нарушается слишком долго, он начинает возвращать `429 ThrottlingException`.

В любой момент времени можно увеличить квоты или лимиты регулирования, увеличив количество подготовленных единиц в Центре Интернета вещей.

В следующей таблице показаны варианты принудительного регулирования. Значения обозначают тот или иной концентратор.

| Регулирование | Бесплатный, B1 и S1 | В2 и S2 | B3 и S3 | 
| -------- | ------- | ------- | ------- |
| Операции с реестром удостоверений (создание, извлечение, перечисление, обновление и удаление) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 83,33 операций в секунду на единицу (5000 операций в минуту на единицу) |
| Подключение новых устройств (это ограничение касается частоты _новых подключений_, а не общего числа подключений) | Более 100 в секунду или 12 в секунду на единицу <br/> Например, две единицы S1 — это 2\*12 = 24 новых подключений в секунду, но для ваших единиц имеется не менее 100 новых подключений в секунду. Для девяти единиц S1 мы получим 108 новых подключений в секунду (9\*12) для всех единиц. | 120 новых подключений/с/ед. | 6000 новых подключений/с/ед. |
| Передачи с устройства в облако | Более 100 в секунду или 12 в секунду на единицу <br/> Например, для двух единиц S1 это 2\*12 = 24 в секунду, но в вашем случае для всех единиц это значение составляет не менее 100 в секунду. Для девяти единиц S1 мы получим 108/с (9\*12) для всех единиц. | 120 в секунду на единицу | 6000 в секунду на единицу |
| Передачи из облака на устройство <sup>1</sup> | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 83,33 операций в секунду на единицу (5000 операций в минуту на единицу) |
| Прием из облака на устройство <sup>1</sup> <br/> (только если устройство использует HTTPS)| 16,67 операций в секунду на единицу (1000 операций в минуту на единицу) | 16,67 операций в секунду на единицу (1000 операций в минуту на единицу) | 833,33 операций в секунду на единицу (50 000 операций в минуту на единицу) |
| Передача файла | 1,67 уведомлений о передаче файлов в секунду на единицу (100 уведомлений в минуту на единицу) | 1,67 уведомлений о передаче файлов в секунду на единицу (100 уведомлений в минуту на единицу) | 83,33 уведомлений о передаче файлов в секунду на единицу (5000 уведомлений в минуту на единицу) |
| Прямые методы<sup>1</sup> | 160 КБ/сек/единицу<sup>2</sup> | 480 КБ/сек/единицу<sup>2</sup> | 24 МБ/сек/единицу<sup>2</sup> | 
| Операции чтения двойников устройств и модулей<sup>1</sup> | 100 в секунду | Более 100 в секунду или 10 в секунду на единицу | 500 в секунду на единицу |
| Обновление двойников устройств и двойников модулей<sup>1</sup> | 50 в секунду | Более 50 в секунду или 5 в секунду на единицу | 250 в секунду на единицу |
| Операции заданий<sup>1,3</sup> <br/> (создание, обновление, перечисление и удаление) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 83,33 операций в секунду на единицу (5000 операций в минуту на единицу) |
| Операции с заданиями на устройстве<sup>1</sup> <br/> (обновление двойника, вызов прямого метода) | 10 в секунду | Более 10 в секунду или 1 в секунду на единицу | 50 в секунду на единицу |
| Конфигурации и развертывания Edge<sup>1</sup> <br/> (создание, обновление, перечисление и удаление) | 0,33/с/ед. (мин/20/ед.) | 0,33/с/ед. (мин/20/ед.) | 0,33/с/ед. (мин/20/ед.) |
| Скорость инициирования потока устройств<sup>4</sup> | 5 новых потоков в секунду | 5 новых потоков в секунду | 5 новых потоков в секунду |
| Максимальное количество одновременно подключенных потоков устройств<sup>4</sup> | 50 | 50 | 50 |
| Передача данных потока устройств<sup>4</sup> (совокупный объем за день) | 300 МБ | 300 МБ | 300 МБ |


<sup>1</sup>Эта функция недоступна на базовом уровне Центра Интернета вещей. Дополнительные сведения см. в статье [Масштабирование решения для Центра Интернета вещей](iot-hub-scaling.md). <br/><sup>2</sup>единица измерения регулирования — 4 КБ. <br/><sup>3</sup>Одновременно можно задавать только одно активное задание импорта или экспорта. <br/><sup>4</sup>Потоки устройств Центра Интернета вещей доступны только для следующих номеров SKU: S1, S2, S3 и F1.

Регулирование *подключений устройств* определяет скорость, с которой можно установить новые подключения устройства к Центру Интернета вещей. Регулирование *подключений устройства* не влияет на максимальное число одновременно подключенных устройств. Регулирование скорости *подключений устройства* зависит от числа единиц, подготовленных для Центра Интернета вещей.

Например, если вы приобретаете одну единицу S1, то получаете регулирование 100 соединений в секунду. Поэтому для подключения 100 000 устройств потребуется по меньшей мере 1000 секунд (около 16 минут). Однако вы можете иметь столько одновременно подключенных устройств, сколько устройств зарегистрировано в вашем реестре удостоверений.

В записи блога, посвященной [регулированию в Центре Интернета вещей](https://azure.microsoft.com/blog/iot-hub-throttling-and-you/), приводится подробное описание стратегии регулирования в Центре Интернета вещей.

> [!IMPORTANT]
> Операции с реестром удостоверений следует использовать только для управления устройствами и в сценариях подготовки. Чтение или обновление большого количества удостоверений устройств поддерживается с помощью [заданий импорта и экспорта](iot-hub-devguide-identity-registry.md#import-and-export-device-identities).
> 
> 

## <a name="other-limits"></a>Другие ограничения

Центр Интернета вещей применяет другие операционные ограничения:

| Операция | Ограничение |
| --------- | ----- |
| Коды URI передачи файлов | Допускается одновременная выдача 10 000 универсальных кодов ресурса (URI) SAS для учетной записи хранения. <br/>  Допускается одновременная выдача до 10 универсальных кодов ресурса (URI) SAS на устройство. |
| Задания<sup>1</sup> | Журнал заданий хранится до 30 дней <br/> Максимальное количество одновременных заданий: 1 (для уровней "Бесплатный" и S1), 5 (для S2), 10 (для S3). |
| Дополнительные конечные точки | Платные центры SKU могут иметь 10 дополнительных конечных точек. Бесплатные центры SKU могут иметь одну дополнительную конечную точку. |
| Правила маршрутизации сообщений | Платные центры SKU могут иметь 100 правил маршрутизации. Бесплатные центры SKU могут иметь пять правил маршрутизации. |
| Передача сообщений с устройства в облако | Максимальный размер сообщения — 256 КБ |
| Передача сообщений из облака на устройство<sup>1</sup> | Максимальный размер сообщения — 64 КБ. Максимальное количество сообщений, ожидающих доставки — 50. |
| Прямой метод<sup>1</sup> | Максимальный размер полезных данных прямого метода — 128 КБ. |
| Автоматическая конфигурация устройств<sup>1</sup> | 100 конфигураций на платный центр SKU. 20 конфигураций на бесплатный центр SKU. |
| Автоматические развертывания Edge<sup>1</sup> | 20 модулей на развертывание. 100 развертываний на платный центр SKU. 20 развертываний на бесплатный центр SKU. |
| Двойники<sup>1</sup> | Максимальный размер на раздел двойников (теги, требуемые и сообщаемые свойства) — 8 КБ |

<sup>1</sup>Эта функция недоступна на базовом уровне Центра Интернета вещей. Дополнительные сведения см. в статье [Масштабирование решения для Центра Интернета вещей](iot-hub-scaling.md).

> [!NOTE]
> Сейчас максимальное число устройств, которые можно подключить к одному Центру Интернета вещей, составляет 1 000 000. Если вам необходимо увеличить это ограничение, обратитесь в [службу поддержки Майкрософт](https://azure.microsoft.com/support/options/).

## <a name="latency"></a>Latency
Центр Интернета вещей стремится обеспечить малую задержку при выполнении всех операций. Однако из-за условий работы сети и других непредсказуемых факторов он не может гарантировать максимально низкую задержку. При разработке решения учитывайте следующее:

* Не делайте никаких предположений о максимально низкой задержке любой операции Центра Интернета вещей.
* Подготовьте Центр Интернета вещей в ближайшем к вашим устройствам регионе Azure.
* Рассмотрите возможность использования Azure IoT Edge для выполнения чувствительных к задержке операций на устройстве или в шлюзе рядом с устройством.

Несколько единиц Центра Интернета вещей влияют на регулирование, как описано выше, но не обеспечивают дополнительные преимущества или гарантии относительно задержки.

Обратитесь в [службу поддержки Майкрософт](https://azure.microsoft.com/support/options/) в случае непредвиденного увеличения задержки операций.

## <a name="next-steps"></a>Дальнейшие действия

Другие справочные статьи в руководстве разработчика для Центра Интернета вещей:

* [Конечные точки Центра Интернета вещей](iot-hub-devguide-endpoints.md)
