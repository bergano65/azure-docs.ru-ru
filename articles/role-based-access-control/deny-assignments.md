---
title: Общие сведения о назначении Deny в Azure — Azure RBAC
description: Сведения о назначении отказа в Azure в управлении доступом на основе ролей в Azure (Azure RBAC).
services: active-directory
documentationcenter: ''
author: rolyon
manager: mtillman
ms.assetid: ''
ms.service: role-based-access-control
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 03/26/2020
ms.author: rolyon
ms.reviewer: bagovind
ms.custom: ''
ms.openlocfilehash: a5f17f009caa9306631debf511f2c890f8f2a450
ms.sourcegitcommit: 4499035f03e7a8fb40f5cff616eb01753b986278
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2020
ms.locfileid: "82733780"
---
# <a name="understand-azure-deny-assignments"></a>Общие сведения о назначении Deny в Azure

*Запрет назначений*, как и назначение ролей, привязывает набор запрещающих действий к пользователю, группе или субъекту-службе в определенной области с целью отказа в доступе. Запрещающие назначения блокируют выполнение определенных действий ресурсов Azure пользователями, даже если назначение роли предоставляет им доступ.

В этой статье описывается, как определять запреты назначений.

## <a name="how-deny-assignments-are-created"></a>Как создаются запрещенные назначения

Отклонить назначения создаются и управляются Azure для защиты ресурсов. В схемах Azure и управляемых приложениях Azure для защиты управляемых системой ресурсов используются запрещенные назначения. Схемы Azure и управляемые приложения Azure — это единственный способ, которым могут быть созданы отклонения назначений. Вы не можете напрямую создавать собственные назначения Deny. Дополнительные сведения о том, как схемы используют запрещенные назначения для блокировки ресурсов, см. [в статье сведения о блокировке ресурсов в чертежах Azure](../governance/blueprints/concepts/resource-locking.md).

> [!NOTE]
> Вы не можете напрямую создавать собственные назначения Deny.

## <a name="compare-role-assignments-and-deny-assignments"></a>Сравнение назначений ролей и запрета назначений

Запрет назначений соответствует шаблону, аналогичному назначению ролей, но также имеет некоторые различия.

| Возможности | Назначение роли | Запретить назначение |
| --- | --- | --- |
| Предоставление доступа | :heavy_check_mark: |  |
| Запрет доступа |  | :heavy_check_mark: |
| Можно создать напрямую | :heavy_check_mark: |  |
| Применить к области | :heavy_check_mark: | :heavy_check_mark: |
| Исключить субъекты |  | :heavy_check_mark: |
| Запретить наследование для дочерних областей |  | :heavy_check_mark: |
| Применить к [классическим](rbac-and-directory-admin-roles.md) назначениям администратора подписки |  | :heavy_check_mark: |

## <a name="deny-assignment-properties"></a>Свойства запретов назначений

 Запрет назначений имеет следующие свойства:

> [!div class="mx-tableFixed"]
> | Свойство | Обязательно | Тип | Описание |
> | --- | --- | --- | --- |
> | `DenyAssignmentName` | Да | Строка | Отображаемое имя запрета назначения. Имена должны быть уникальными в пределах области. |
> | `Description` | нет | Строка | Описание запрета назначения. |
> | `Permissions.Actions` | Минимум один Actions или один DataActions. | String[] | Массив строк, определяющих операции управления, к которым запрет назначения блокирует доступ. |
> | `Permissions.NotActions` | нет | String[] | Массив строк, определяющих операции управления, освобожденные от запрета назначения. |
> | `Permissions.DataActions` | Минимум один Actions или один DataActions. | String[] | Массив строк, определяющих операции данных, к которым запрет назначения блокирует доступ. |
> | `Permissions.NotDataActions` | нет | String[] | Массив строк, определяющих операции данных, исключенные из запрета назначения. |
> | `Scope` | нет | Строка | Строка, определяющая область применения запрета назначения. |
> | `DoNotApplyToChildScopes` | нет | логический | Указывает, применяется ли запрет назначения к дочерним областям. Значение по умолчанию — false. |
> | `Principals[i].Id` | Да | String[] | Массив идентификаторов объектов для субъектов Azure AD (пользователь, группа, субъект-служба или управляемое удостоверение), к которым применяется запрет назначения. Чтобы охватить все субъекты, оставьте GUID пустым (`00000000-0000-0000-0000-000000000000`). |
> | `Principals[i].Type` | нет | String[] | Массив типов объектов, представленных участниками [i]. ID. Задайте для `SystemDefined` представления всех субъектов. |
> | `ExcludePrincipals[i].Id` | нет | String[] | Массив идентификаторов объектов для субъектов Azure AD (пользователь, группа, субъект-служба или управляемое удостоверение), к которым не применяется запрет назначения. |
> | `ExcludePrincipals[i].Type` | нет | String[] | Массив типов объектов, представленный ExcludePrincipals[i].Id. |
> | `IsSystemProtected` | нет | логический | Указывает, был ли запрет назначения создан Azure, а значит, не может быть изменен или удален. В настоящее время все запреты назначений защищаются системой. |

## <a name="the-all-principals-principal"></a>Участник всех участников

Для поддержки отклонения назначений был введен определенный системой участник с именем *все субъекты* . Этот субъект представляет всех пользователей, группы, субъекты-службы и управляемые удостоверения в каталоге Azure AD. Если идентификатор субъекта имеет нулевое значение GUID (`00000000-0000-0000-0000-000000000000`), а тип субъекта — `SystemDefined`, субъект представляет все субъекты. В Azure PowerShell выходных данных все субъекты имеют следующий вид:

```azurepowershell
Principals              : {
                          DisplayName:  All Principals
                          ObjectType:   SystemDefined
                          ObjectId:     00000000-0000-0000-0000-000000000000
                          }
```

Все участники могут сочетаться с `ExcludePrincipals` , чтобы запретить все субъекты, кроме пользователей. Все субъекты имеют следующие ограничения.

- Может использоваться только в `Principals` и не может использоваться в `ExcludePrincipals`.
- Для параметра `Principals[i].Type` нужно задать значение `SystemDefined`.

## <a name="next-steps"></a>Дальнейшие действия

* [Руководство. Защита новых ресурсов с помощью блокировок ресурсов в проекте Azure](../governance/blueprints/tutorials/protect-new-resources.md)
* [Список запрещенных назначений в Azure с помощью портал Azure](deny-assignments-portal.md)
