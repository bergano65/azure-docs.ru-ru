---
title: Архитектура клиента и сервера
titleSuffix: An Azure Communication Services concept document
description: Узнайте об архитектуре служб связи.
author: mikben
manager: mikben
services: azure-communication-services
ms.author: mikben
ms.date: 03/10/2020
ms.topic: conceptual
ms.service: azure-communication-services
ms.openlocfilehash: 38d6b131c972b4fd890af53624fdd6a36b3ecb6c
ms.sourcegitcommit: 53acd9895a4a395efa6d7cd41d7f78e392b9cfbe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90938141"
---
# <a name="client-and-server-architecture"></a>Архитектура клиента и сервера

[!INCLUDE [Public Preview Notice](../includes/public-preview-include.md)]

<!--
> [!WARNING]
> This document is under construction and needs the following items to be addressed: 
> - Need to add security best practices for token management here
> - Reference docs:
> - https://docs.microsoft.com/windows/security/threat-protection/security-policy-settings/create-a-token-object
> - https://docs.microsoft.com/azure/aks/operator-best-practices-identity
> - https://docs.microsoft.com/cloud-app-security/api-tokens?view=gestures-1.0-->

Каждое приложение служб связи Azure будет иметь **клиентские приложения** , использующие **службы** для упрощения подключения "человек-человек". На этой странице показаны распространенные элементы архитектуры в различных сценариях.

## <a name="user-access-management"></a>Управление доступом пользователей

Клиентские библиотеки служб связи Azure должны `user access tokens` безопасно получать доступ к ресурсам служб связи. `User access tokens` должен создаваться и управляться доверенной службой из-за конфиденциальной природы маркера и строки подключения, необходимой для их создания. Неправильное управление маркерами доступа может привести к дополнительной оплате из-за неправильного использования ресурсов. Настоятельно рекомендуется использовать доверенную службу для управления пользователями. Доверенная служба создаст токены и передаст их обратно клиенту с помощью правильного шифрования. Пример последовательности архитектуры можно найти ниже:

:::image type="content" source="../media/scenarios/archdiagram-access.png" alt-text="Схема, демонстрирующая архитектуру маркера доступа пользователя.":::

Дополнительные сведения см. в рекомендациях по [управлению удостоверениями](https://docs.microsoft.com/azure/security/fundamentals/identity-management-best-practices) .

## <a name="browser-communication"></a>Взаимодействие с браузером

Клиентские библиотеки JavaScript для связи Azure позволяют веб-приложениям с богатым текстом, голосовым и видео. Приложение напрямую взаимодействует со службами связи Azure через клиентскую библиотеку для доступа к плоскости данных и передачи текста, голоса и видео в режиме реального времени. Пример последовательности архитектуры можно найти ниже:

:::image type="content" source="../media/scenarios/archdiagram-browser.png" alt-text="Схема, демонстрирующая архитектуру браузера для служб связи.":::

## <a name="native-app-communication"></a>Взаимодействие собственного приложения

Многие сценарии лучше обслуживаются в собственных приложениях. Службы связи Azure поддерживают взаимодействие "браузер-приложение" и "приложение-приложение".  При создании собственного приложения с помощью push-уведомлений пользователи могут получать вызовы, даже если приложение не выполняется. Службы связи Azure упрощают это с помощью интегрированных push-уведомлений в Google Firebase, Cлужба push-уведомлений Apple и Push-уведомления Windows. Пример последовательности архитектуры можно найти ниже:

:::image type="content" source="../media/scenarios/archdiagram-app.png" alt-text="Схема, демонстрирующая архитектуру служб связи для взаимодействия с собственным приложением.":::

## <a name="voice-and-sms-over-the-public-switched-telephony-network-pstn"></a>Голосовой связи и SMS через общедоступную коммутируемую сеть (PSTN)

Взаимодействие по телефонной системе может значительно повысить уровень доступности вашего приложения. Для поддержки сценариев Voice и SMS службы связи Azure помогают [получать номера телефонов](../quickstarts/telephony-sms/get-phone-number.md) непосредственно из портал Azure или с помощью интерфейсов API и клиентских библиотек. После получения телефонных номеров их можно использовать для доступа клиентов, использующих как PSTN, так и SMS в сценариях входящего и исходящего трафика. Пример последовательности архитектуры можно найти ниже:

> [!Note]
> Во время общедоступной предварительной версии подготовка телефонных номеров США доступна клиентам с адресами для выставления счетов, расположенными в США и Канаде. 

:::image type="content" source="../media/scenarios/archdiagram-pstn.png" alt-text="Схема, показывающая архитектуру PSTN служб связи.":::

Дополнительные сведения о решениях PSTN и SMS см. в статье [Планирование решения PSTN и SMS](../concepts/telephony-sms/plan-solution.md) .

## <a name="humans-communicating-with-bots-and-other-services"></a>Люди взаимодействуют с программы-роботы и другими службами

Службы связи Azure поддерживают обмен данными между системами, а также текстовыми и голосовыми каналами со службами, которые напрямую обращаются к плоскости данных служб связи Azure. Например, программа-робот может отвечать на входящие телефонные звонки или участвовать в чате. Службы связи Azure предоставляют клиентские библиотеки, которые позволяют использовать эти сценарии для вызова и разговора. Пример последовательности архитектуры можно найти ниже:

:::image type="content" source="../media/scenarios/archdiagram-bot.png" alt-text="Схема, показывающая архитектуру "службы связи" (Bot).":::

## <a name="networking"></a>Сеть

Может потребоваться обмен произвольными данными между пользователями, например для синхронизации общего опыта смешанной реальности или игр. Плоскость данных в режиме реального времени, используемая для обмена текстовыми, голосовыми и видеосообщениями, доступна непосредственно двумя способами:

- **Вызов клиентской библиотеки** — устройства в вызове имеют доступ к интерфейсам API для отправки и получения данных через канал вызова. Это самый простой способ добавить обмен данными с существующим взаимодействием.
- **Стун/turn** . службы связи Azure делают Стун, совместимые со стандартами, и включают службы, доступные вам. Это позволяет создавать сильно настроенный транспортный уровень поверх этих стандартизованных примитивов. Вы можете создать собственный клиент, совместимый с стандартов, или использовать библиотеки с открытым кодом, такие как [винртк](https://github.com/microsoft/winrtc).

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Создание маркеров доступа пользователей](../quickstarts/access-tokens.md)

Дополнительные сведения см. в следующих статьях:

- Дополнительные сведения о [проверке подлинности](../concepts/authentication.md)
- Сведения о [решениях PSTN и SMS](../concepts/telephony-sms/plan-solution.md)

- [Добавление разговора в приложение](../quickstarts/chat/get-started.md)
- [Добавление в приложение речевого вызова](../quickstarts/voice-video-calling/getting-started-with-calling.md)
