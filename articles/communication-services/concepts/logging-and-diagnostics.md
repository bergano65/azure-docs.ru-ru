---
title: Журналы Служб коммуникации
titleSuffix: An Azure Communication Services concept document
description: Сведения о ведении журналов в Службах коммуникации Azure
author: mikben
manager: jken
services: azure-communication-services
ms.author: mikben
ms.date: 10/15/2020
ms.topic: overview
ms.service: azure-communication-services
ms.openlocfilehash: aad4cdfe38ee9dd7530cb8ebe21cded18cb0a1ec
ms.sourcegitcommit: 7dacbf3b9ae0652931762bd5c8192a1a3989e701
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2020
ms.locfileid: "92128624"
---
# <a name="communication-services-logs"></a>Журналы Служб коммуникации

Службы коммуникации Azure предоставляют возможности ведения журналов, которые можно использовать для мониторинга и отладки решения Служб коммуникации. Эти возможности можно настроить с помощью портала Azure.

## <a name="enable-diagnostic-logs-in-your-resource"></a>Включение журналов диагностики в ресурсе

Ведение журнала по умолчанию отключено при создании ресурса. Чтобы включить ведение журнала, перейдите в колонку **Параметры диагностики** в меню ресурсов в разделе **Мониторинг** . Затем щелкните **Add diagnostic setting** (Добавить параметр диагностики).

Затем выберите целевой объект архива. Сейчас в качестве целевых объектов архива поддерживаются учетные записи хранения и Log Analytics. После выбора типов журналов, которые вы хотите записать, сохраните параметры диагностики.
 
Новые параметры вступят в силу в течение 10 минут. Журналы будут отображаться в настроенном целевом объекте архивации на панели "Журналы" в ресурсе Служб коммуникации.

:::image type="content" source="./media/diagnostic-settings.png" alt-text="Параметры диагностики ACS.":::

Дополнительные сведения о настройке системы диагностики доступны в [обзоре журналов ресурса Azure](https://docs.microsoft.com/azure/azure-monitor/platform/platform-logs-overview).

## <a name="resource-log-categories"></a>Категории журналов ресурсов

Службы коммуникации предлагают три типа журналов, которые можно включить.

* **Журналы использования**  — предоставляют данные об использовании, связанные с каждым предложением платной услуги.
* **Рабочие журналы чата**  — содержат основные сведения, относящиеся к службе чата.
* **Рабочие журналы SMS**  — предоставляют основные сведения, относящиеся к службе SMS.

### <a name="usage-logs-schema"></a>Схема журналов использования

| Свойство | Описание |
| -------- | ---------------|
| Отметка времени | Метка времени создания журнала (в формате UTC). |
| Имя операции | Операция, связанная с записью журнала. |
| Версия операции | `api-version`, связанного с операцией, если операция operationName выполнялась с помощью API. Если для этой операции не существует соответствующего API, то версия представляет версию этой операции, чтобы в дальнейшем изменить свойства, связанные с операцией. |
| Категория | Категория журнала для события. Категория — степень детализации, при которой можно включать или отключать журналы для определенного ресурса. Свойства, которые отображаются в свойствах BLOB-объекта события, одинаковы в пределах определенной категории журнала и типа ресурса. |
| Идентификатор корреляции | Идентификатор для коррелированных событий. Может использоваться для обнаружения коррелированных событий между несколькими таблицами. |
| Свойства | Другие данные, применимые к различным режимам Служб коммуникации. |
| Идентификатор записи | Уникальный идентификатор для данной записи использования. |
| Тип потребления | Режим использования. (например, чат, PSTN, NAT и т. д.) |
| Тип Unit | Тип единицы использования для данного режима использования. (например, минуты, мегабайты, число сообщений и т. д.). |
| Количество | Количество единиц, использованных или потребленных для данной записи. |

### <a name="chat-operational-logs"></a>Журналы операций чата

| Свойство | Описание |
| -------- | ---------------|
| TimeGenerated | Метка времени создания журнала (в формате UTC). |
| OperationName | Операция, связанная с записью журнала. |
| CorrelationID | Идентификатор для коррелированных событий. Может использоваться для обнаружения коррелированных событий между несколькими таблицами. |
| OperationVersion | Версия API, связанного с операцией, если операция operationName выполнялась с помощью API. Если для этой операции не существует соответствующего API, то версия представляет версию этой операции, чтобы в дальнейшем изменить свойства, связанные с операцией. |
| Категория | Категория журнала для события. Категория — степень детализации, при которой можно включать или отключать журналы для определенного ресурса. Свойства, которые отображаются в свойствах BLOB-объекта события, одинаковы в пределах определенной категории журнала и типа ресурса. |
| ResultType | Состояние операции. |
| ResultSignature | Подсостояние операции. Если эта операция соответствует вызову REST API, то это поле содержит код состояния HTTP соответствующего вызова REST. |
| ResultDescription | Статическое текстовое описание этой операции. |
| DurationMs | Время выполнения операции в миллисекундах. |
| CallerIpAddress | IP-адрес вызывающего объекта, если операция соответствует вызову API, который будет приходить с объекта с общедоступным IP-адресом. |
| Level | Уровень серьезности события. |
| URI | URI-адрес запроса. |
| UserId | Идентификатор пользователя отправителя запроса. |
| ChatThreadId | Идентификатор потока чата, связанного с запросом. |
| ChatMessageId | Идентификатор сообщения чата, связанного с запросом. |
| SdkType | Тип пакета SDK, используемый в запросе. |
| PlatformType | Тип платформы, используемый в запросе. |

### <a name="sms-operational-logs"></a>Журналы операций SMS

| Свойство | Описание |
| -------- | ---------------|
| TimeGenerated | Метка времени создания журнала (в формате UTC). |
| OperationName | Операция, связанная с записью журнала. |
| CorrelationID | Идентификатор для коррелированных событий. Может использоваться для обнаружения коррелированных событий между несколькими таблицами. |
| OperationVersion | Версия API, связанного с операцией, если операция operationName выполнялась с помощью API. Если для этой операции не существует соответствующего API, то версия представляет версию этой операции, чтобы в дальнейшем изменить свойства, связанные с операцией. |
| Категория | Категория журнала для события. Категория — степень детализации, при которой можно включать или отключать журналы для определенного ресурса. Свойства, которые отображаются в свойствах BLOB-объекта события, одинаковы в пределах определенной категории журнала и типа ресурса. |
| ResultType | Состояние операции. |
| ResultSignature | Подсостояние операции. Если эта операция соответствует вызову REST API, то это поле содержит код состояния HTTP соответствующего вызова REST. |
| ResultDescription | Статическое текстовое описание этой операции. |
| DurationMs | Время выполнения операции в миллисекундах. |
| CallerIpAddress | IP-адрес вызывающего объекта, если операция соответствует вызову API, который будет приходить с объекта с общедоступным IP-адресом. |
| Level | Уровень серьезности события. |
| URI | URI-адрес запроса. |
| OutgoingMessageLength | Количество символов в исходящем сообщении. |
| IncomingMessageLength | Количество символов во входящем сообщении. |
| DeliveryAttempts | Количество попыток доставить это сообщение. |
| PhoneNumber | Номер телефона, на который отправляется SMS-сообщение. |
| SdkType | Тип пакета SDK, используемый в запросе. |
| PlatformType | Тип платформы, используемый в запросе. |
| Метод | Метод, используемый в запросе. |
