---
title: Руководство по созданию статического веб-приложения с помощью Blazor в службе "Статические веб-приложений Azure"
description: Сведения о том, как создать веб-сайт в службе "Статические веб-приложения Azure" с помощью Blazor.
services: static-web-apps
author: craigshoemaker
ms.service: static-web-apps
ms.topic: tutorial
ms.date: 09/10/2020
ms.author: cshoe
ms.openlocfilehash: 0086f7f68fd05d6925d19c7ab457fbc125e36be4
ms.sourcegitcommit: 9eda79ea41c60d58a4ceab63d424d6866b38b82d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2020
ms.locfileid: "96350234"
---
# <a name="tutorial-building-a-static-web-app-with-blazor-in-azure-static-web-apps"></a>Руководство по созданию статического веб-приложения с помощью Blazor в службе "Статические веб-приложений Azure"

Служба "Статические веб-приложения Azure" публикует веб-сайты в рабочей среде, создавая приложения из репозитория GitHub. В этом руководстве показано, как развернуть веб-приложение в службе "Статические веб-приложения Azure" с помощью портала Azure.

Если у вас еще нет подписки Azure, создайте [бесплатную пробную учетную запись](https://azure.microsoft.com/free).

## <a name="prerequisites"></a>Предварительные требования

- [GitHub](https://github.com) .
- Учетная запись [Azure](https://portal.azure.com)

## <a name="application-overview"></a>Обзор приложений

Служба "Статические веб-приложения Azure" позволяет создавать статические веб-приложения на основе бессерверной внутренней части. В следующем руководстве показано, как развернуть веб-приложение Blazor на языке C#, которое возвращает данные о погоде.

:::image type="content" source="./media/deploy-blazor/blazor-app-complete.png" alt-text="Готовое приложение Blazor":::

Описанное в этом руководстве приложение состоит из трех разных проектов Visual Studio.

- **Api**. Приложение Функций Azure на языке C#, которое реализует конечную точку API для предоставления статическому приложению сведений о погоде. **WeatherForecastFunction** возвращает массив объектов `WeatherForecast`.

- **Клиент** — интерфейсная часть проекта веб-сборки Blazor. Здесь реализован [резервный маршрут](#fallback-route), чтобы файл _index.html_ обрабатывал все маршруты без исключения.

- **Shared**. Содержит общие классы, на которые есть ссылки в обоих проектах (API и Client), что позволяет передавать данные из конечной точки API в интерфейсное веб-приложение. Класс [`WeatherForecast`](https://github.com/staticwebdev/blazor-starter/blob/main/Shared/WeatherForecast.cs) является общим для обоих приложений.

Эти проекты представляют все необходимые части для создания приложения веб-сборки Blazor, которое работает через любой браузер, поддерживаемый серверной частью API.

## <a name="fallback-route"></a>Резервный маршрут

Приложение предоставляет такие URL-адреса, как _/counter_ и _/fetchdata_, сопоставленные с конкретными маршрутами приложения. Это приложение реализовано как одностраничное, поэтому каждый маршрут обрабатывается единым файлом _index.html_. Чтобы запрос по любому пути всегда возвращал файл _index.html_, здесь реализован [резервный маршрут](./routes.md#fallback-routes) в файле _routes.json_ в папке _wwwroot_ проекта Client.

```json
{
  "routes": [
    {
      "route": "/*",
      "serve": "/index.html",
      "statusCode": 200
    }
  ]
}
```

Приведенная выше конфигурация гарантирует, что запросы по любому маршруту в приложении всегда возвращают страницу _index.html_.

## <a name="create-a-repository"></a>Создание репозитория

В этой статье для простоты используются шаблон из репозитория GitHub. В этом шаблоне содержится базовое приложение для развертывания в службе "Статические веб-приложения Azure".

1. Чтобы создать репозиторий, войдите в учетную запись GitHub и перейдите в следующее расположение:
    - [https://github.com/staticwebdev/blazor-starter/generate](https://github.com/login?return_to=/staticwebdev/blazor-starter/generate)
1. Присвойте репозиторию имя **my-first-static-blazor-app**.

## <a name="create-a-static-web-app"></a>Создание статического веб-приложения

Теперь, когда репозиторий создан, создайте статическое веб-приложение на портале Azure.

1. Перейдите на [портал Azure](https://portal.azure.com).
1. Выберите **Создать ресурс**.
1. Найдите **Статические веб-приложения**.
1. Выберите **Статические веб-приложения (предварительная версия)** .
1. Нажмите кнопку **Создать**

В разделе _Основные сведения_ настройте новое приложение и свяжите его с репозиторием GitHub.

:::image type="content" source="media/deploy-blazor/basics.png" alt-text="Вкладка &quot;Основные сведения&quot;":::

1. Выберите _подписку Azure_.
1. Выберите или создайте _группу ресурсов_.
1. Присвойте приложению имя **my-first-static-blazor-app**.
    - Допустимые символы: `a-z` (без учета регистра), `0-9`и `-`.
1. Выберите ближайший к вам _регион_.
1. Выберите **Бесплатный** в поле _Номер SKU_.
1. Выберите **Войти по учетным данным GitHub** и выполните проверку подлинности с помощью GitHub.

После входа с помощью GitHub введите сведения о репозитории.

:::image type="content" source="media/deploy-blazor/repository-details.png" alt-text="Сведения о репозитории":::

1. Выберите предпочитаемую _организацию_.
1. Выберите **my-first-static-blazor-app** из раскрывающегося списка _Репозиторий_.
1. Выберите **main** в раскрывающемся списке _Ветвь_.

    Если вы не видите какие-либо репозитории, вам может потребоваться авторизовать Статические веб-приложения Azure на сайте GitHub. Перейдите к своему репозиторию GitHub и выберите **Параметры > Приложения > Авторизованные приложения OAuth**. Выберите **Azure Static Web Apps** (Статические веб-приложения Azure), а затем — **Предоставление права**. Чтобы предоставить разрешения для репозиториев организации, необходимо быть владельцем организации.

1. В разделе _Сведения о сборке_ добавьте информацию о конфигурации для Blazor.

    - Выберите **Blazor** в раскрывающемся списке _Предварительно заданные параметры сборок_ и оставьте все значения по умолчанию.

1. Выберите **Review + create** (Просмотреть и создать).

    :::image type="content" source="media/deploy-blazor/review-create.png" alt-text="Кнопка &quot;Просмотр и создание&quot;":::

1. Нажмите кнопку **Создать**.

    :::image type="content" source="media/deploy-blazor/create-button.png" alt-text="Кнопка &quot;Создать&quot;":::

1. Выберите **Перейти к ресурсу**.

    :::image type="content" source="media/deploy-blazor/resource-button.png" alt-text="Кнопка &quot;Перейти к ресурсу&quot;":::

## <a name="view-the-website"></a>Просмотр веб-сайта

При развертывании статического приложения следует учитывать два фактора. Первый — подготовка базовых ресурсов Azure, из которых состоит приложение. Второй — рабочий процесс GitHub Actions, который создает и публикует приложение.

Прежде чем можно будет переходить к новому статическому сайту, сначала необходимо завершить сборку развертывания.

В окне обзора службы "Статические веб-приложения" отображается ряд ссылок, которые помогут вам взаимодействовать с веб-приложением.

:::image type="content" source="./media/deploy-blazor/overview-window.png" alt-text="Окно обзора":::

1. Если щелкнуть баннер с текстом _Click here to check the status of your GitHub Actions runs (Щелкните здесь, чтобы проверить состояние выполняемых действий GitHub)_ , отобразятся действия GitHub, выполняемым для вашего репозитория. Убедившись, что задание развертывания завершено, можно переходить к веб-сайту по созданному URL-адресу.

2. Когда рабочий процесс GitHub Actions завершится, щелкните ссылку на _URL-адрес_, чтобы открыть веб-сайт на новой вкладке.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы не собираетесь использовать это приложение в дальнейшем, вы можете удалить экземпляр службы "Статические веб-приложения Azure", выполнив следующие действия:

1. Откройте [портал Azure](https://portal.azure.com).
1. Выполните поиск по строке **my-first-static-blazor-app** в верхней строке поиска.
1. Выберите имя приложения.
1. Нажмите кнопку **Удалить**.
1. Нажмите кнопку **Да**, чтобы подтвердить действие удаления.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Аутентификация и авторизация](./authentication-authorization.md)
