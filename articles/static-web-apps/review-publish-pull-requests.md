---
title: Проверка запросов на вытягивание в подготовительных средах Статических веб-приложений Azure
description: Сведения об использовании подготовительной среды для проверки изменений запросов на вытягивание в Статических веб-приложениях Azure.
services: static-web-apps
author: sinedied
ms.service: static-web-apps
ms.topic: conceptual
ms.date: 05/08/2020
ms.author: yolasors
ms.openlocfilehash: 61c5917c1e4cb9dbf96e90af9a30777ea7c2e66c
ms.sourcegitcommit: bb0afd0df5563cc53f76a642fd8fc709e366568b
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2020
ms.locfileid: "83594113"
---
# <a name="review-pull-requests-in-pre-production-environments-in-azure-static-web-apps-preview"></a>Проверка запросов на вытягивание в подготовительных средах в предварительной версии Статических веб-приложений Azure

В этой статье показано, как использовать подготовительные среды для проверки изменений в приложениях, развернутых с помощью [Статических веб-приложений Azure](overview.md).

Подготовительная (промежуточная) среда — это полнофункциональная промежуточная версия приложения, которая содержит изменения, недоступные в рабочей среде.

Статические веб-приложения Azure создают рабочий процесс GitHub Actions в репозитории. При создании запроса на вытягивание для ветви, которую отслеживает рабочий процесс, создается подготовительная среда. Подготовительная среда подготавливает приложение и позволяет выполнять проверки перед отправкой в рабочую среду.

При использовании Статических веб-приложений Azure может существовать одновременно несколько подготовительных сред. Каждый раз при создании запроса на вытягивание в отслеживаемую ветвь промежуточная версия с изменениями развертывается в отдельной подготовительной среде.

Существует множество преимуществ использования подготовительных сред. Например, администратор может сделать следующее:

- Проверить визуальные изменения между рабочей и промежуточной средами. Например, просмотреть обновления содержимого и макета.
- Показать изменения, внесенные в команду.
- Сравнить различные версии приложения.
- Проверить изменения с помощью приемочных тестов.
- Выполнить проверки работоспособности перед развертыванием в рабочую среду.

> [!NOTE]
> Во время предварительной версии допускается [максимум одна промежуточная среда](quotas.md).

## <a name="prerequisites"></a>Предварительные требования

- Существующий репозиторий GitHub, настроенный с помощью Статических веб-приложений Azure. Если у вас их нет, см. статью [Краткое руководство. Создание первого статического веб-приложения](getting-started.md).

## <a name="make-a-change"></a>Внесение изменения

Начните с внесения изменений в репозиторий. Это можно сделать непосредственно на GitHub, как показано ниже.

1. Перейдите к репозиторию проекта на GitHub, а затем нажмите кнопку **Branch** (Ветвь), чтобы создать ветвь.

    :::image type="content" source="./media/review-publish-pull-requests/create-branch.png" alt-text="Создание ветви с помощью интерфейса GitHub":::]

    Введите имя ветви и нажмите кнопку **Create branch** (Создать ветвь).

1. Перейдите в папку _app_ и измените некоторое текстовое содержимое. Например, можно изменить заголовок или абзац. Найдя файл, который нужно изменить, нажмите кнопку **Edit** (Изменить), чтобы внести изменения.

    :::image type="content" source="./media/review-publish-pull-requests/edit-file.png" alt-text="Кнопка Edit file (Изменить файл) в интерфейсе GitHub":::

1. После внесения изменений нажмите кнопку **Commit changes** (Принять изменения), чтобы зафиксировать изменения в ветви.

    :::image type="content" source="./media/review-publish-pull-requests/commit-changes.png" alt-text="Кнопка Commit changes (Принять изменения) в интерфейсе GitHub":::

## <a name="create-a-pull-request"></a>Создание запроса на вытягивание

Затем создайте запрос на вытягивание на основе этого изменения.

1. Откройте вкладку проекта **Pull request** (Запрос на вытягивание) в GitHub:

    :::image type="content" source="./media/review-publish-pull-requests/tab.png" alt-text="Вкладка Pull request (Запрос на вытягивание) в репозитории GitHub":::

1. Нажмите кнопку **Compare & pull request** (Сравнение и запрос на вытягивание) своей ветви.

1. При необходимости заполните некоторые сведения об изменениях, а затем нажмите кнопку **Create pull request** (Создать запрос на вытягивание).

    :::image type="content" source="./media/review-publish-pull-requests/open.png" alt-text="Создание запроса на вытягивание в GitHub":::

При необходимости вы можете назначить рецензентов и добавить комментарии для обсуждения изменений.

> [!NOTE]
> Вы можете внести несколько изменений, отправляя новые фиксации в ветвь. Затем запрос на вытягивание автоматически обновляется, чтобы отразить все изменения.

## <a name="review-changes"></a>Проверка изменений

После создания запроса на вытягивание рабочий процесс развертывания [GitHub Actions](https://github.com/features/actions) выполняет и развертывает изменения в подготовительной среде.

Когда рабочий процесс завершит сборку и развертывание приложения, бот GitHub добавит комментарий в запрос на вытягивание, содержащий URL-адрес подготовительной среды. Вы можете щелкнуть эту ссылку, чтобы просмотреть подготовленное изменение.

:::image type="content" source="./media/review-publish-pull-requests/bot-comment.png" alt-text="Комментарий запроса на вытягивание с URL-адресом подготовительной среды":::

Щелкните созданный URL-адрес, чтобы просмотреть изменения.

Если подробнее рассмотреть URL-адрес, можно увидеть, что он выглядит следующим образом: `https://<SUBDOMAIN-PULL_REQUEST_ID>.<AZURE_REGION>.azurestaticapps.net`.

Для данного запроса на вытягивание URL-адрес остается прежним, даже если вы отправляете новые обновления. Помимо URL-адреса, в течение выполнения запроса на вытягивание используется одна и та же подготовительная среда.

## <a name="publish-changes"></a>Публикация изменений

После утверждения изменений можно опубликовать изменения в рабочей среде, объединив запрос на вытягивание.

Нажмите кнопку **Merge pull request** (Слияние запроса на вытягивание):

:::image type="content" source="./media/review-publish-pull-requests/merge.png" alt-text="Кнопка Merge pull request (Слияние запроса на вытягивание) в интерфейсе GitHub":::

При объединении изменения копируются в отслеживаемую ветвь (в рабочую ветвь). Затем в отслеживаемой ветви запускается рабочий процесс развертывания, а изменения вступают в силу после перестроения приложения.

Чтобы проверить изменения в рабочей среде, откройте рабочий URL-адрес, чтобы загрузить текущую версию веб-сайта.

## <a name="limitations"></a>Ограничения

Промежуточные версии приложения в настоящее время публично доступны по URL-адресу, даже если репозиторий GitHub является частным.

> [!WARNING]
> Будьте внимательны при публикации конфиденциального содержимого в промежуточных версиях, так как доступ к подготовительным средам не ограничен.

Количество подготовительных сред, доступных для каждого приложения, развернутого с помощью Статических веб-приложений, зависит от используемого уровня SKU. Например, на уровне "Бесплатный" помимо рабочей среды может быть 1 подготовительная среда.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Настройка личного домена](custom-domain.md)
