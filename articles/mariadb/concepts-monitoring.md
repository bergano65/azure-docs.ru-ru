---
title: Мониторинг — база данных Azure для MariaDB
description: В этой статье описываются метрики для мониторинга и создания предупреждений в Базе данных Azure для MariaDB, включая ЦП, хранилище и статистику подключений.
author: ajlam
ms.author: andrela
ms.service: mariadb
ms.topic: conceptual
ms.date: 06/25/2020
ms.openlocfilehash: 708b243d9db16ee8454b4bc0f5c136b9f4399916
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85413201"
---
# <a name="monitoring-in-azure-database-for-mariadb"></a>Мониторинг в Базе данных Azure для MariaDB
Мониторинг данных о серверах помогает устранять неполадки и оптимизировать рабочую нагрузку. База данных Azure для MariaDB предоставляет различные метрики, позволяющие понять действия сервера.

## <a name="metrics"></a>Метрики
Все метрики Azure записываются ежеминутно, и каждая из них предоставляет данные за последние 30 дней. Вы можете настроить оповещения на основе метрик. Другие задачи включают настройку автоматических действий, выполнение расширенной аналитики и архивирование журнала. Дополнительные сведения см. в статье [Обзор метрик в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).

Пошаговые инструкции см. в статье [Использование портала Azure для настройки оповещений на основе метрик для базы данных Azure для MySQL](howto-alert-metric.md).

### <a name="list-of-metrics"></a>Список метрик
Для Базы данных Azure для MariaDB доступны следующие метрики:

|Метрика|Отображаемое имя метрики|Единицы|Описание:|
|---|---|---|---|
|cpu_percent|Нагрузка ЦП|Процент|Процент используемого ЦП.|
|memory_percent|Процент памяти|Процент|Процент используемой памяти.|
|io_consumption_percent|Процент ввода-вывода данных|Процент|Процент используемых операций ввода-вывода. (Неприменимо для серверов уровня Basic.)|
|storage_percent|Storage percentage|Процент|Процент использованного объема хранилища сервера (от максимального объема).|
|storage_used|Storage used|Байты|Используемый объем хранилища. Хранилище, используемое службой, может содержать файлы базы данных, журналы транзакций и журналы сервера.|
|serverlog_storage_percent|Процент хранилища для журнала сервера|Процент|Процент использованного объема хранилища журнала сервера (от максимального объема).|
|serverlog_storage_usage|Используемый объем хранилища для журнала сервера|Байты|Используемый объем хранилища журнала сервера.|
|serverlog_storage_limit|Максимальный объем хранилища для журнала сервера|Байты|Максимальный объем хранилища журнала сервера для этого сервера.|
|storage_limit|Storage limit|Байты|Максимальный объем хранилища для этого сервера.|
|active_connections|Активные подключения|Count|Число активных подключений к серверу.|
|connections_failed|Неудачные подключения|Count|Число неудачных попыток подключения к серверу.|
|network_bytes_egress|Сеть (исходящий трафик)|Байты|Исходящий сетевой трафик по активным подключениям.|
|network_bytes_ingress|Сеть (входящий трафик)|Байты|Входящий сетевой трафик по активным подключениям.|

## <a name="server-logs"></a>Журналы сервера

Можно включить ведение журнала медленных запросов на сервере. Эти журналы также доступны в журналах диагностики Azure в Azure Monitor журналов, концентраторах событий и учетной записи хранения. Дополнительные сведения о ведении журналов см. в разделе  [Журналы сервера в базе данных Azure для MySQL](concepts-server-logs.md).

## <a name="query-store"></a>Хранилище запросов

[Хранилище запросов](concepts-query-store.md) отслеживает производительность запросов с течением времени, включая статистику времени выполнения запросов и события ожидания. Эта функция сохраняет сведения о производительности среды выполнения запросов в схеме **MySQL** . Вы можете управлять процессами сбора и хранения данных с помощью различных приспособлений конфигурации.

## <a name="query-performance-insight"></a>Анализ производительности запросов

Средство [Анализ производительности запросов](concepts-query-performance-insight.md) работает совместно с хранилищем запросов для предоставления визуализаций, доступных на портале Azure. Эти диаграммы позволяют определить основные запросы, влияющие на производительность. Анализ производительности запросов доступен в разделе **интеллектуальные Performance** на странице портала сервера базы данных Azure для MariaDB.

## <a name="performance-recommendations"></a>Рекомендации по производительности

Функция [Рекомендации по производительности](concepts-performance-recommendations.md) определяет возможности для повышения производительности рабочей нагрузки. Рекомендации по производительности предоставляют рекомендации по созданию новых индексов, которые могут повысить производительность рабочих нагрузок. Для создания рекомендаций по индексам эта функция учитывает различные характеристики базы данных, включая ее схемы и рабочую нагрузку по данным хранилища запросов. После реализации любой из рекомендаций по повышению производительности клиенты должны протестировать производительность, чтобы оценить результаты внесенных изменений.

## <a name="planned-maintenance-notification"></a>Уведомление о плановом обслуживании

**Уведомления о плановом обслуживании** позволяют получать оповещения о запланированном обслуживании базы данных Azure для MariaDB. Эти уведомления интегрируются с плановым обслуживанием [работоспособности служб](../service-health/overview.md) и позволяют просматривать все запланированные профилактические работы для подписок в одном месте. Он также помогает масштабировать уведомление до нужных аудиторий для разных групп ресурсов, так как у вас могут быть разные контакты, ответственные за различные ресурсы. Вы получите уведомление о предстоящем обслуживании 72 часов перед событием.

> [!Note]
> Мы сделаем все попытки предоставить **уведомление о плановом обслуживании** 72 часов для всех событий. Однако в случае критических обновлений или исправлений безопасности уведомления могут быть отправлены ближе к событию или пропущены.

### <a name="to-receive-planned-maintenance-notification"></a>Получение уведомления о запланированном обслуживании

1. На [портале](https://portal.azure.com)выберите **Работоспособность службы**.
2. В разделе **Оповещения** выберите **Оповещения о работоспособности**.
3. Выберите **+ Добавить оповещение о работоспособности службы** и заполните поля.
4. Заполните обязательные поля. 
5. Выберите **Тип события**, выберите **плановое техническое обслуживание** или **выберите все** .
6. В **группе действий** определите, как вы хотите получать оповещение (получить электронное письмо, активировать приложение логики и т. д.).  
7. Убедитесь, что для параметра Включить правило при создании задано значение Да.
8. Выберите **создать правило генерации оповещений** , чтобы завершить оповещение.

Подробные инструкции по созданию **оповещений о работоспособности службы**см. в статье [Создание оповещений журнала действий для уведомлений службы](../service-health/alerts-activity-log-service-notifications.md).

> [!IMPORTANT]
> Уведомления о плановом обслуживании в настоящее время доступны в предварительной версии во всех регионах, **за исключением** западной центральной части США

## <a name="next-steps"></a>Дальнейшие шаги

- Дополнительные сведения о доступе к метрикам и их экспорте с помощью портала Azure, REST API или интерфейса командной строки см. в статье [Обзор метрик в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).
  - См. рекомендации по созданию оповещений для метрики в статье [Как настраивать оповещения](howto-alert-metric.md).
