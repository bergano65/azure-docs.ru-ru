---
title: Выбор правильного типа развертывания — база данных Azure для MariaDB
description: В этой статье описываются факторы, которые следует учитывать перед развертыванием базы данных Azure для MariaDB в качестве инфраструктуры как службы (IaaS) или платформы как услуги (PaaS).
author: kummanish
ms.author: manishku
ms.service: mariadb
ms.topic: conceptual
ms.date: 3/18/2020
ms.openlocfilehash: 47aff04dfd44ea7fd892fdee763e93d7fd13a9d1
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91542399"
---
# <a name="choose-the-right-mariadb-server-option-in-azure"></a>Выбор правильного сервера MariaDB в Azure

В Azure рабочие нагрузки сервера MariaDB могут работать в размещенной инфраструктуре виртуальной машины как услуга (IaaS) или в качестве службы (PaaS). PaaS имеет несколько вариантов развертывания, и в каждом варианте развертывания существуют уровни служб. Выбор варианта IaaS или PaaS в первую очередь зависит от того, хотите ли вы управлять базой данных, применять исправления и создавать резервные копии или же вы хотите делегировать эти операции Azure.

При принятии решения примите во внимание следующие два варианта:

- **База данных Azure для MariaDB:** Этот параметр является полностью управляемым ядром СУБД MariaDB на основе стабильной версии MariaDB Community Edition. Эта реляционная база данных как услуга (DBaaS), размещенная на облачной платформе Azure, попадает в категорию PaaS в отрасли.

  С помощью управляемого экземпляра MariaDB в Azure можно использовать встроенные функции, которые в противном случае нуждаются в расширенной конфигурации, если MariaDB Server находится локально или на виртуальной машине Azure.

  При использовании MariaDB в качестве службы вы платите по мере использования вариантов увеличения или уменьшения масштаба для большего контроля без прерывания. В отличие от автономного сервера MariaDB, база данных Azure для MariaDB обладает дополнительными функциями, такими как встроенная высокая доступность, аналитика и управление.

- **MariaDB на виртуальных машинах Azure:** Этот вариант относится к категории отрасли IaaS. С помощью этой службы можно запустить MariaDB Server внутри полностью управляемой виртуальной машины на облачной платформе Azure. Все последние версии и выпуски MariaDB можно установить на виртуальную машину IaaS.

  В наиболее значительном отличие от базы данных Azure для MariaDB, MariaDB на виртуальных машинах Azure обеспечивает контроль над ядром СУБД. Однако эти возможности контроля означают дополнительные обязанности по управлению виртуальными машинами и многими задачами администрирования баз данных (DBA). Эти задачи включают в себя обслуживание и исправление серверов баз данных, восстановление баз данных и проектирование высокого уровня доступности.

Основные различия между этими вариантами показаны в приведенной ниже таблице.

| attribute          | База данных Azure для MariaDB | MariaDB на виртуальных машинах Azure    |
|:-------------------|:-----------------------------|:--------------------|
| Соглашение об уровне обслуживания                | Предлагает соглашение об уровне обслуживания для уровня доступности 99,99%| До 99,95% доступности с двумя или более экземплярами в одной группе доступности.<br/><br/>доступность на 99,9% для виртуальной машины с одним экземпляром, использующей хранилище класса Premium.<br/><br/>99,99% использования Зоны доступности с несколькими экземплярами в нескольких группах доступности.<br/><br/>Ознакомьтесь с [соглашением об уровне обслуживания виртуальных машин](https://azure.microsoft.com/support/legal/sla/virtual-machines/v1_8/). |
| Установка исправлений операционной системы        | Автоматически  | Управляется клиентами |
| Исправление MariaDB     | Автоматически  | Управляется клиентами |
| Высокий уровень доступности | Модель высокой доступности (HA) основана на встроенных механизмах отработки отказа, когда происходит прерывание на уровне узла. В таких случаях служба автоматически создает новый экземпляр и прикрепляет хранилище к этому экземпляру. | Клиентский архитектор, внедрение, тестирование и поддержка высокого уровня доступности. Возможности могут включать постоянно включенную отказоустойчивую кластеризацию, постоянную репликацию групп, доставку журналов или репликацию транзакций.|
| Избыточность в пределах зоны | Сейчас не поддерживаются: | Виртуальные машины Azure можно настроить для работы в разных зонах доступности. Для локального решения клиенты должны создавать и обслуживать собственные дополнительные центры обработки данных, а также управлять ими.|
| Гибридные сценарии | С помощью [репликация входных данных](https://docs.microsoft.com/azure/MariaDB/concepts-data-in-replication)можно синхронизировать данные из внешнего сервера MariaDB в службу "база данных Azure для MariaDB". Внешний сервер может быть локальным, на виртуальных машинах или в службе базы данных, размещенной другими поставщиками облачных служб.<br/><br/> С помощью функции [чтения реплики](https://docs.microsoft.com/azure/mariadb/concepts-read-replicas) можно реплицировать данные с исходного сервера базы данных Azure для MariaDB на пять серверов-реплик только для чтения. Реплики находятся в одном регионе Azure или в разных регионах. Реплики только для чтения асинхронно обновляются с помощью технологии репликации бинлог.<br/><br/>Репликация чтения между регионами в настоящее время доступна в общедоступной предварительной версии.| Управляется клиентами
| Резервное копирование и восстановление | Автоматически создает [резервные копии сервера](https://docs.microsoft.com/azure/MariaDB/concepts-backup#backups) и сохраняет их в пользовательском хранилище, которое может быть локально избыточным или географически избыточным. Служба принимает полные, разностные резервные копии и журналы транзакций. | Управляется клиентами |
| Мониторинг операций базы данных | Предоставляет клиентам возможность [устанавливать предупреждения](https://docs.microsoft.com/azure/MariaDB/concepts-monitoring) для операции базы данных и выполнять действия при достижении пороговых значений. | Управляется клиентами |
| Расширенная защита от угроз | Обеспечивает [расширенную защиту от угроз](https://docs.microsoft.com/azure/MariaDB/howto-database-threat-protection-portal). Эта защита обнаруживает аномальные действия, которые указывают на необычные и потенциально опасные попытки доступа к базам данных или их использования.<br/><br/>Расширенная защита от угроз в настоящее время доступна в общедоступной предварительной версии.| Клиенты должны самостоятельно создавать эту защиту.
| Аварийное восстановление | Хранит автоматические резервные копии в настроенном пользователем [локально избыточном или геоизбыточном хранилище](https://docs.microsoft.com/azure/MariaDB/howto-restore-server-portal). Резервные копии также могут восстанавливать сервер до точки во времени. Срок хранения составляет от 7 до 35 дней. Восстановление выполняется с помощью портал Azure. | Полностью управляется клиентами. Обязанности включают в себя не только планирование, тестирование, архивацию, хранение и хранение. Дополнительным вариантом является использование хранилища служб восстановления Azure для резервного копирования виртуальных машин и баз данных Azure на виртуальных машинах. Этот параметр доступен в режиме предварительной версии. |
| Рекомендации по повышению производительности | Предоставляет клиентам [рекомендации по производительности](https://techcommunity.microsoft.com/t5/Azure-Database-for-MariaDB/Azure-brings-intelligence-and-high-performance-to-Azure-Database/ba-p/769110) на основе созданных системой файлов журнала использования. Рекомендации помогут оптимизировать рабочие нагрузки.<br/><br/>В настоящее время рекомендации по производительности доступны в общедоступной предварительной версии. | Управляется клиентами |

## <a name="business-motivations-for-choosing-paas-or-iaas"></a>Бизнес-мотивация для выбора PaaS или IaaS

Существует несколько факторов, которые могут повлиять на выбор PaaS или IaaS для размещения баз данных MariaDB.

### <a name="cost"></a>Cost

Ограниченное финансирование часто является основным фактором, определяющим лучшее решение для размещения баз данных. Это верно независимо от того, являетесь ли вы начинающим разработчиком, стесненным в деньгах, либо группой в солидной организации с ограниченным бюджетом. В этом разделе описываются основы выставления счетов и лицензирования в Azure, которые применяются к базе данных Azure для MariaDB и MariaDB на виртуальных машинах Azure.

#### <a name="billing"></a>Выставление счетов

В настоящее время база данных Azure для MariaDB доступна в виде службы на нескольких уровнях с различными ценами на ресурсы. Счета за все ресурсы выставляются ежечасно по фиксированной ставке. Последние сведения о поддерживаемых в настоящее время уровнях служб, размерах вычислений и объемах хранения см. в разделе [модель приобретения на основе виртуальное ядро](https://docs.microsoft.com/azure/MariaDB/concepts-pricing-tiers). Вы можете динамически изменять уровни служб и размеры вычислений в соответствии с различными потребностями в пропускной способности приложения. Счета выставляются за исходящий интернет-трафик по обычным [тарифам на передачу данных](https://azure.microsoft.com/pricing/details/data-transfers/).

С помощью базы данных Azure для MariaDB Корпорация Майкрософт автоматически настраивает, исследует обновления и обновляет программное обеспечение базы данных. Эти автоматизированные действия снижают затраты на администрирование. Кроме того, база данных Azure для MariaDB имеет [встроенные возможности резервного копирования](https://docs.microsoft.com/azure/MariaDB/concepts-backup) . Эти функции помогают значительно экономить средства, особенно при наличии большого количества баз данных. В отличие от этого, с MariaDB на виртуальных машинах Azure можно выбрать и запустить любую версию MariaDB. Независимо от используемой версии MariaDB вы платите за подготовленную виртуальную машину и затраты на конкретный тип лицензии MariaDB.

База данных Azure для MariaDB предоставляет встроенную высокую доступность для любого рода прерываний на уровне узла, сохраняя при этом гарантию соглашения об уровне обслуживания 99,99% для службы. Однако для обеспечения высокого уровня доступности базы данных в виртуальных машинах клиенты должны использовать такие параметры высокого уровня доступности, как [MariaDB Replication](https://mariadb.com/kb/en/library/setting-up-replication/) , доступные в базе данных MariaDB. Использование параметра высокой доступности не дает дополнительных гарантий уровня обслуживания. Однако это позволяет достичь более чем 99,99 % доступности базы данных за дополнительную плату и за счет повышения затрат на администрирование.

Дополнительную информацию см. в следующих статьях:
* [Цены на службу "база данных Azure для MariaDB"](https://azure.microsoft.com/pricing/details/MariaDB/)
* [Цены на виртуальные машины Azure](https://azure.microsoft.com/pricing/details/virtual-machines/)
* [Калькулятор цен Azure](https://azure.microsoft.com/pricing/calculator/)

### <a name="administration"></a>Администрирование

Для многих компаний решение о переходе в облачную службу позволит уменьшить не только расходы, но и сложность администрирования системы. С помощью IaaS и PaaS Корпорация Майкрософт:

- Управляет базовой инфраструктурой.
- Автоматически реплицирует все данные для обеспечения аварийного восстановления.
- Настраивает и обновляет программное обеспечение базы данных.
- Управляет балансировкой нагрузки.
- Выполняет прозрачную отработку отказа при сбое сервера.

В следующем списке приведены рекомендации по администрированию для каждого параметра.

* С помощью базы данных Azure для MariaDB можно продолжить Администрирование базы данных. При этом больше не требуется управлять ядром СУБД, операционной системой или оборудованием. Ниже перечислены примеры элементов, которые можно продолжить администрировать.

  - Базы данных
  - Вход
  - Настройка индексов
  - Настройка запросов
  - Аудит
  - Безопасность

  Кроме того, при настройке высокой доступности для другого центра обработки данных требуется минимальная (или вовсе не требуется) конфигурация и администрирование.

* С MariaDB на виртуальных машинах Azure вы имеете полный контроль над операционной системой и конфигурацией экземпляра сервера MariaDB. С помощью виртуальной машины вы решаете, когда следует обновлять операционную систему и программное обеспечение базы данных. Вы также определяете, когда устанавливать дополнительное программное обеспечение, например антивирусное приложение. Некоторые предлагаемые функции автоматизации позволяют значительно упростить процессы исправления, резервного копирования и обеспечения высокой доступности. Вы можете контролировать размер виртуальной машины, количество дисков и их конфигурации хранения. Дополнительные сведения см. в статье [Размеры виртуальных машин в Azure](https://docs.microsoft.com/azure/virtual-machines/windows/sizes).

### <a name="time-to-move-to-azure"></a>Пора переходить на Azure

* База данных Azure для MariaDB — это подходящее решение для приложений, разработанных в облаке, когда производительность разработки и быстрый доступ к рынкам для новых решений очень важны. Благодаря функциональным возможностям, схожим с возможностями администратора базы данных, она идеально подходит для разработчиков облачных служб, так как позволяет уменьшить необходимость управления базовой операционной системой и базой данных.

* Если вы хотите избежать времени и расходов на приобретение нового локального оборудования, MariaDB на виртуальных машинах Azure — это подходящее решение для приложений, которым требуется база данных MariaDB или доступ к функциям MariaDB в Windows или Linux. Это решение также подходит для переноса существующих локальных приложений и баз данных в Azure без изменений, в случаях, когда база данных Azure для MariaDB неудовлетворительна.

  Поскольку нет необходимости изменять уровни представления, приложения и данных, вы экономите время и бюджеты при изменении архитектуры существующего решения. Вместо этого вы можете сосредоточиться на переносе всех ваших решений в Azure и устранении некоторых оптимизаций производительности, которые могут потребоваться для платформы Azure.

## <a name="next-steps"></a>Дальнейшие шаги

* См. [цены на службу "база данных Azure для MariaDB](https://azure.microsoft.com/pricing/details/MariaDB/)".
* Приступить к работе, [создав первый сервер](https://docs.microsoft.com/azure/MariaDB/quickstart-create-MariaDB-server-database-using-azure-portal).
