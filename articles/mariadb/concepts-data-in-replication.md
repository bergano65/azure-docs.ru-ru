---
title: Репликация данных — база данных Azure для MariaDB
description: Сведения об использовании репликации данных для синхронизации с внешнего сервера в службе "база данных Azure для MariaDB".
author: ajlam
ms.author: andrela
ms.service: mariadb
ms.topic: conceptual
ms.date: 3/18/2020
ms.openlocfilehash: db85892115f345039353cd90eeedbe809eb6ae67
ms.sourcegitcommit: 6906980890a8321dec78dd174e6a7eb5f5fcc029
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2020
ms.locfileid: "92425568"
---
# <a name="replicate-data-into-azure-database-for-mariadb"></a>Репликация данных в базу данных Azure для MariaDB

Репликация входных данных позволяет синхронизировать данные сервера MariaDB, работающего локально, на виртуальных машинах или в службах баз данных, размещенных другими облачными поставщиками, со службой Базы данных Azure для MariaDB. Репликация входных данных основана на функции собственной репликации в MariaDB на основе позиции файла двоичного журнала (binlog). Дополнительные сведения о репликации binlog см. в [этой статье](https://mariadb.com/kb/en/library/replication-overview/).

## <a name="when-to-use-data-in-replication"></a>Когда следует использовать репликацию входных данных
Ниже приведены основные сценарии применения репликации входных данных.

- **Гибридная синхронизация данных**. С помощью репликации входных данных можно обеспечить синхронизацию данных между локальными серверами и базой данных Azure для MariaDB. Эта синхронизация полезна при создании гибридных приложений. Этот метод удобен, если у вас есть существующий локальный сервер базы данных, но вы хотите переместить данные в регион, который расположен ближе к пользователям.
- **Многооблачная синхронизация**. Для сложных облачных решений репликацию входных данных можно использовать, чтобы синхронизировать данные между базой данных Azure для MariaDB и различными облачными поставщиками, включая виртуальные машины и службы баз данных, размещенные в этих облаках.

## <a name="limitations-and-considerations"></a>Рекомендации и ограничения

### <a name="data-not-replicated"></a>Нереплицируемые данные
[*Системная база данных MySQL*](https://mariadb.com/kb/en/library/the-mysql-database-tables/) на исходном сервере не реплицируется. Изменения учетных записей и разрешений на исходном сервере не реплицируются. Если создается учетная запись на исходном сервере, и этой учетной записи требуется доступ к серверу реплики, то можно вручную создать ту же учетную запись на стороне сервера реплики. Чтобы узнать, какие таблицы хранятся в системной базе данных, ознакомьтесь с [документацией по MariaDB](https://mariadb.com/kb/en/library/the-mysql-database-tables/).

### <a name="requirements"></a>Требования
- Версия исходного сервера должна быть не ниже MariaDB версии 10,2.
- Версии сервера исходной и реплики должны быть одинаковыми. Например, обе версии должны быть MariaDB 10.2.
- Каждая таблица должна иметь первичный ключ.
- Исходный сервер должен использовать подсистему InnoDB.
- Пользователь должен иметь разрешения на настройку ведения журнала в двоичном формате и создание новых пользователей на исходном сервере.
- Если на исходном сервере включен протокол SSL, убедитесь, что сертификат ЦС SSL, предоставленный для домена, включен в `mariadb.az_replication_change_master` хранимую процедуру. См. следующие [примеры](howto-data-in-replication.md#link-the-source-and-replica-servers-to-start-data-in-replication) и `master_ssl_ca` параметр.
- Убедитесь, что IP-адрес исходного сервера добавлен в правила брандмауэра сервера-реплики базы данных Azure для MariaDB. Измените правила брандмауэра на [портале Azure](howto-manage-firewall-portal.md) или с помощью [Azure CLI](howto-manage-firewall-cli.md).
- Убедитесь, что компьютер, на котором размещается исходный сервер, допускает входящий и исходящий трафик через порт 3306.
- Убедитесь, что исходный сервер имеет **общедоступный IP-адрес**, DNS является общедоступным или имеет полное доменное имя (FQDN).

### <a name="other"></a>Другое
- Репликация данных поддерживается только в ценовых категориях общего назначения и с оптимизацией для операций в памяти.

## <a name="next-steps"></a>Дальнейшие действия
- Узнайте, как [настроить репликацию входных данных](howto-data-in-replication.md).
