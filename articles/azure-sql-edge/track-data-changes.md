---
title: Мониторинг изменений данных в Azure SQL (Предварительная версия)
description: Сведения об отслеживании изменений и системе отслеживания измененных данных в Azure SQL (Предварительная версия).
keywords: ''
services: sql-edge
ms.service: sql-edge
ms.topic: conceptual
author: SQLSourabh
ms.author: sourabha
ms.reviewer: sstein
ms.date: 05/19/2020
ms.openlocfilehash: 6d0a081f2b0adb143a6b37a647a00014846f8fe2
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84669602"
---
# <a name="track-data-changes-in-azure-sql-edge-preview"></a>Мониторинг изменений данных в Azure SQL (Предварительная версия)

Azure SQL ребро поддерживает две функции SQL Server, которые отслеживают изменения в данных в базе данных: [Отслеживание изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/track-data-changes-sql-server#Tracking) и [запись измененных данных](https://docs.microsoft.com/sql/relational-databases/track-changes/track-data-changes-sql-server#Capture). Эти функции позволяют приложениям определять изменения языка модификации данных (операции вставки, обновления и удаления), внесенные в пользовательские таблицы в базе данных. В одной базе данных можно включить функцию отслеживания измененных данных и отслеживание изменений. Никаких особых предосторожностей не требуется.

Возможность выполнять запросы к измененным данным в базе данных — важное условие для эффективной работы некоторых приложений. Обычно для определения изменений данных разработчикам приложений приходилось реализовывать в своих приложениях специальный метод отслеживания, использующий сочетание триггеров, столбцов отметок времени и дополнительных таблиц. Создание таких приложений обычно связано с большими трудозатратами, требует обновлений схемы и часто вызывает серьезное снижение производительности.

В случае решения IoT, в котором необходимо периодически перемещать данные из пограничной в облако или центр обработки данных, отслеживание изменений может оказаться очень полезным. Пользователи могут быстро и эффективно запрашивать только изменения, внесенные при последней синхронизации, и отправлять эти изменения в облако или в целевой центр обработки данных. Дополнительные сведения см. в статье [преимущества использования системы отслеживания измененных данных или отслеживание изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/track-data-changes-sql-server#benefits-of-using-change-data-capture-or-change-tracking). 

Эти две функции не совпадают. Дополнительные сведения см. в разделе [различия в функциях между системой отслеживания измененных данных и отслеживанием изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/track-data-changes-sql-server#feature-differences-between-change-data-capture-and-change-tracking) .

## <a name="change-data-capture"></a>система отслеживания измененных данных

Сведения о том, как работает эта функция, см. в разделе [об отслеживании измененных данных](https://docs.microsoft.com/sql/relational-databases/track-changes/about-change-data-capture-sql-server).

Сведения о том, как включить или отключить эту функцию, см. в разделе [Включение и отключение системы отслеживания измененных данных](https://docs.microsoft.com/sql/relational-databases/track-changes/enable-and-disable-change-data-capture-sql-server).

Сведения об администрировании и мониторинге этой функции см. в разделе [Администрирование и мониторинг системы отслеживания измененных данных](https://docs.microsoft.com/sql/relational-databases/track-changes/administer-and-monitor-change-data-capture-sql-server).

Сведения о том, как выполнять запросы и работать с измененными данными, см. в разделе [Работа с данными изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/work-with-change-data-sql-server).

## <a name="change-tracking"></a>Change tracking

Сведения о том, как работает эта функция, см. в разделе [об отслеживании изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/about-change-tracking-sql-server).

Сведения о включении и отключении этой функции см. в разделе [Включение и отключение отслеживания изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/enable-and-disable-change-tracking-sql-server).

Сведения об администрировании, мониторинге и управлении этой функцией см. в разделе [Администрирование и мониторинг отслеживания изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/manage-change-tracking-sql-server).

Сведения о том, как выполнять запросы и работать с измененными данными, см. в разделе [Работа с данными изменений](https://docs.microsoft.com/sql/relational-databases/track-changes/work-with-change-tracking-sql-server).

## <a name="temporal-tables"></a>Темпоральные таблицы

Azure SQL ребра также поддерживает функцию временных таблиц SQL Server. Эта функция (также известная как *темпоральной таблицы с системным управлением версиями*) предоставляет встроенную поддержку предоставления сведений о данных, хранящихся в таблице, в любой момент времени. Эта функция не просто предоставляет сведения только о данных, которые верны на текущий момент времени.

Темпоральная таблица с системным управлением версиями — это тип пользовательской таблицы, предназначенной для сохранения полного журнала изменений данных и для обеспечения простого анализа на момент времени. Этот тип темпоральной таблицы называется темпоральной таблицей с системным управлением версиями, так как период действия для каждой строки управляется системой (то есть ядром СУБД).

Каждая Темпоральная таблица имеет два явно определенных столбца, каждый из которых имеет `datetime2` тип данных. Эти столбцы называются столбцами *периода* . Система использует только эти столбцы периода, чтобы записывать срок действия каждой строки при каждом изменении строки.

Наряду со столбцами периода темпоральная таблица содержит ссылку на другую таблицу с зеркальным отображением схемы. Система использует эту таблицу для автоматического сохранения предыдущей версии строки при каждом обновлении или удалении строки в темпоральной таблице. Эта дополнительная таблица называется таблицей *журнала* , а основная таблица, в которой хранятся текущие (фактические) версии строк, называется *текущей* таблицей или просто в качестве темпоральной таблицы. Во время создания темпоральной таблицы пользователи могут указать существующую таблицу журнала (она должна соответствовать схеме) или позволить системе создать таблицу журнала по умолчанию.

Дополнительные сведения см. в разделе [временные таблицы](https://docs.microsoft.com/sql/relational-databases/tables/temporal-tables).

## <a name="next-steps"></a>Дальнейшие шаги

- [Потоковая передача данных в Azure SQL (Предварительная версия)](stream-data.md)
- [Машинное обучение и ИИ с применением ONNX в SQL для пограничных вычислений (предварительная версия)](onnx-overview.md)
- [Настройка репликации в Azure SQL (Предварительная версия)](configure-replication.md)
- [Резервное копирование и восстановление баз данных в Azure SQL ребро (Предварительная версия)](backup-restore.md)



