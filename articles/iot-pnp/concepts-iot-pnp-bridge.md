---
title: Мост самонастраивающийся IoT | Документация Майкрософт
description: Сведения о Bridge самонастраивающийся центра Интернета вещей и о том, как использовать его для подключения существующих устройств, подключенных к шлюзу Windows или Linux, в качестве устройств IoT самонастраивающийся.
author: usivagna
ms.author: ugans
ms.date: 1/20/2021
ms.topic: conceptual
ms.service: iot-pnp
services: iot-pnp
ms.custom: mvc
ms.openlocfilehash: a45efd90043ecb4d457db7ed39651f1a9b5bbd4d
ms.sourcegitcommit: 100390fefd8f1c48173c51b71650c8ca1b26f711
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98890613"
---
# <a name="iot-plug-and-play-bridge"></a>Мост для IoT Plug and Play

Мост IoT самонастраивающийся — это приложение с открытым исходным кодом для подключения существующих устройств, подключенных к шлюзу Windows или Linux, в качестве устройств IoT самонастраивающийся. После установки и настройки приложения на компьютере под управлением Windows или Linux его можно использовать для подключения подключенных устройств к центру Интернета вещей. С помощью моста можно сопоставлять интерфейсы Интернета вещей самонастраивающийся с данными телеметрии, отправляемыми подключенными устройствами, работать со свойствами устройств и вызывать команды.

:::image type="content" source="media/concepts-iot-pnp-bridge/iot-pnp-bridge-high-level.png" alt-text="В левой части существует несколько подключенных датчиков (как проводные, так и беспроводные) на компьютер под управлением Windows или Linux, содержащий мост Интернета вещей самонастраивающийся. Затем мост IoT самонастраивающийся соединяется с центром Интернета вещей справа":::

Мост Интернета вещей самонастраивающийся можно развернуть в виде автономного исполняемого файла на любом устройстве Интернета вещей, промышленном ПК, сервере или шлюзе под управлением Windows 10 или Linux. Его также можно скомпилировать в код приложения. Простой JSON-файл конфигурации сообщает центру Интернета вещей самонастраивающийся Bridge, какие подключенные устройства и периферийное устройство должны быть доступны в Azure.

## <a name="supported-protocols-and-sensors"></a>Поддерживаемые протоколы и датчики

Мост IoT самонастраивающийся поддерживает следующие типы периферийных устройств по умолчанию со ссылками на документацию по адаптеру:

|Периферийные устройства|Windows|Linux|
|---------|---------|---------|
|[Адаптер датчика Bluetooth](https://github.com/Azure/iot-plug-and-play-bridge/blob/master/pnpbridge/docs/bluetooth_sensor_adapter.md) подключается к обнаруженным датчикам Bluetooth с низким энергопотреблением (BLE).       |Да|Нет|
|[Адаптер камеры](https://github.com/Azure/iot-plug-and-play-bridge/blob/master/pnpbridge/docs/camera_adapter.md) подключает камеры на устройстве с Windows 10.               |Да|Нет|
|[Адаптер Modbus](https://github.com/Azure/iot-plug-and-play-bridge/blob/master/pnpbridge/docs/modbus_adapters.md) подключает датчики на устройстве Modbus.              |Да|Да|
|[Адаптер MQTT](https://github.com/Azure/iot-plug-and-play-bridge/blob/master/pnpbridge/docs/mqtt_adapter.md) подключает устройства, ИСПОЛЬЗУЮЩИЕ брокер MQTT.                  |Да|Да|
|[Адаптер сериалпнп](https://github.com/Azure/iot-plug-and-play-bridge/blob/master/serialpnp/Readme.md) подключает устройства, взаимодействующие по последовательному подключению.               |Да|Да|
|[Периферийные устройства Windows USB](https://github.com/Azure/iot-plug-and-play-bridge/blob/master/pnpbridge/docs/coredevicehealth_adapter.md) используют список классов интерфейсов устройств, поддерживаемых адаптером, для подключения устройств с указанным идентификатором оборудования.  |Да|Неприменимо|

Дополнительные сведения о расширении моста самонастраивающийся IoT для поддержки дополнительных протоколов устройств см. в разделе [расширение моста Самонастраивающийся IOT](howto-author-pnp-bridge-adapter.md). Чтобы узнать, как создать и развернуть мост Интернета вещей самонастраивающийся, см. статью [Создание и развертывание моста Самонастраивающийся IOT](howto-build-deploy-extend-pnp-bridge.md).

## <a name="iot-plug-and-play-bridge-architecture"></a>Архитектура моста самонастраивающийся IoT

:::image type="content" source="media/concepts-iot-pnp-bridge/iot-pnp-bridge-components.png" alt-text="В левой части есть несколько флажков, указывающих на различные периферийные устройства, подключенные к компьютеру под управлением Windows или Linux, который содержит мост IoT самонастраивающийся. В верхней части — поле, обозначенное точками конфигурации в отношении моста. Затем мост соединяется с центром Интернета вещей в правой части схемы.":::

### <a name="iot-plug-and-play-bridge-adapters"></a>Адаптеры для мостов самонастраивающийся IoT

Мост IoT самонастраивающийся поддерживает набор адаптеров моста Интернета вещей самонастраивающийся для различных типов устройств. *Манифест адаптера* статически определяет адаптеры для моста.

Диспетчер адаптеров моста использует манифест для обнаружения и вызова функций адаптера. Диспетчер адаптеров вызывает только функцию Create для адаптеров моста, необходимых компонентам интерфейса, перечисленным в файле конфигурации. Для каждого компонента самонастраивающийся IoT создается экземпляр адаптера.

Адаптер моста создает и получает обработчик цифрового двойниканого интерфейса. Адаптер использует этот обработчик для привязки функции устройства к цифровому двойника.

Используя сведения в файле конфигурации, адаптер моста использует следующие методы для включения передачи данных с устройства в цифровое двойника через мост:

- Устанавливает коммуникационный канал напрямую.
- Создает наблюдатель устройств, чтобы ждать, пока канал связи станет доступным.

### <a name="configuration-file"></a>Файл конфигурации

Мост Интернета вещей самонастраивающийся использует файл конфигурации на основе JSON, который указывает:

- Как подключиться к центру Интернета вещей или IoT Central приложению: параметры включают строки подключения, параметры проверки подлинности или службу подготовки устройств (DPS).
- Расположение моделей возможностей центра Интернета вещей самонастраивающийся, используемых мостом. Модель определяет возможности устройства IoT самонастраивающийся, а также является статичной и неизменяемой.
- Список компонентов интерфейса Интернета вещей самонастраивающийся и следующие сведения для каждого компонента:
- Идентификатор интерфейса и имя компонента.
- Адаптер моста, необходимый для взаимодействия с компонентом.
- Сведения об устройстве, необходимые адаптеру моста для установления связи с устройством. Например, идентификатор оборудования или конкретные сведения о адаптере, интерфейсе или протоколе.
- Дополнительный подтип адаптера моста или Конфигурация интерфейса, если адаптер поддерживает несколько типов связи с аналогичными устройствами. В примере показано, как можно настроить компонент датчика Bluetooth:

    ```json
    {
      "_comment": "Component BLE sensor",
      "pnp_bridge_component_name": "blesensor1",
      "pnp_bridge_adapter_id": "bluetooth-sensor-pnp-adapter",
      "pnp_bridge_adapter_config": {
        "bluetooth_address": "267541100483311",
        "blesensor_identity" : "Blesensor1"
      }
    }
    ```

- Необязательный список параметров адаптера глобальных мостов. Например, адаптер моста датчика Bluetooth имеет словарь поддерживаемых конфигураций. Компонент интерфейса, для которого требуется адаптер датчика Bluetooth, может выбрать одну из следующих конфигураций `blesensor_identity` :

    ```json
    {
      "pnp_bridge_adapter_global_configs": {
        "bluetooth-sensor-pnp-adapter": {
          "Blesensor1" : {
            "company_id": "0x499",
            "endianness": "big",
            "telemetry_descriptor": [
              {
                "telemetry_name": "humidity",
                "data_parse_type": "uint8",
                "data_offset": 1,
                "conversion_bias": 0,
                "conversion_coefficient": 0.5
              },
              {
                "telemetry_name": "temperature",
                "data_parse_type": "int8",
                "data_offset": 2,
                "conversion_bias": 0,
                "conversion_coefficient": 1.0
              },
              {
                "telemetry_name": "pressure",
                "data_parse_type": "int16",
                "data_offset": 4,
                "conversion_bias": 0,
                "conversion_coefficient": 1.0
              },
              {
                "telemetry_name": "acceleration_x",
                "data_parse_type": "int16",
                "data_offset": 6,
                "conversion_bias": 0,
                "conversion_coefficient": 0.00980665
              },
              {
                "telemetry_name": "acceleration_y",
                "data_parse_type": "int16",
                "data_offset": 8,
                "conversion_bias": 0,
                "conversion_coefficient": 0.00980665
              },
              {
                "telemetry_name": "acceleration_z",
                "data_parse_type": "int16",
                "data_offset": 10,
                "conversion_bias": 0,
                "conversion_coefficient": 0.00980665
              }
            ]
          }
        }
      }
    }
    ```

## <a name="download-iot-plug-and-play-bridge"></a>Скачивание моста самонастраивающийся IoT

Вы можете скачать предварительно созданную версию моста с поддерживаемыми адаптерами в [IoT Самонастраивающийся мостовыми выпусками](https://github.com/Azure/iot-plug-and-play-bridge/releases) и расширить список ресурсов для самого последнего выпуска. Скачайте последнюю версию приложения для вашей операционной системы.

Кроме того, вы можете загрузить и просмотреть исходный код [центра Интернета вещей Самонастраивающийся Bridge на GitHub](https://github.com/Azure/iot-plug-and-play-bridge).

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда у вас есть общие сведения об архитектуре центра Интернета вещей самонастраивающийся, выполните следующие действия, чтобы получить дополнительные сведения:

- [Как подключить пример моста IoT самонастраивающийся под управлением Linux или Windows в центр Интернета вещей](./howto-use-iot-pnp-bridge.md)
- [Создание и развертывание моста IoT Plug and Play](howto-build-deploy-extend-pnp-bridge.md)
- [Расширение моста IoT Plug and Play](howto-author-pnp-bridge-adapter.md)
- [Мост IoT самонастраивающийся на GitHub](https://github.com/Azure/iot-plug-and-play-bridge)
