---
title: Архитектура Plug and Play IoT | Документация Майкрософт
description: Как построитель решений, вы ознакомитесь с ключевыми элементами архитектуры IoT Plug and Play.
author: ridomin
ms.author: rmpablos
ms.date: 09/15/2020
ms.topic: conceptual
ms.custom: mvc
ms.service: iot-pnp
services: iot-pnp
manager: philmea
ms.openlocfilehash: 32e67bd7f30fecee3449935a35235844a047957b
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91574333"
---
# <a name="iot-plug-and-play-architecture"></a>Архитектура IoT Plug and Play

IoT Plug and Play позволяет разработчикам решений интегрировать интеллектуальные устройства в решения без необходимости выполнять настройку вручную. В основе центра Интернета вещей Plug and Play — это _модель_ устройства, которая описывает возможности устройства для приложения, поддерживающего Plug and Play IOT. Эта модель структурирована как набор интерфейсов, определяющих:

- _Свойства_, которые отражают характеристики состояния устройства или другой сущности, доступные только для чтения или только для записи. Например, серийный номер устройства может быть свойством только для чтения, а требуемая температура для термостата — свойством только для записи.
- _Данные телеметрии_, которые отправляются устройством, например поток показаний датчика, сообщения об ошибках или информационные сообщения.
- _Команды_ описывают функции или операции, которые можно выполнить на устройстве. Например, можно определить команду для перезапуска шлюза или создания снимка дистанционно управляемой камерой.

У каждой модели и интерфейса есть уникальный идентификатор.

На следующей схеме показаны ключевые элементы решения IoT Plug and Play.

:::image type="content" source="media/concepts-architecture/pnp-architecture.png" alt-text="Архитектура IoT Plug and Play":::

## <a name="model-repository"></a>Репозиторий моделей

Хранилище [модели](./concepts-model-repository.md) — это хранилище для определений моделей и интерфейсов. Модели и интерфейсы определяются с помощью [языка определения цифровых двойников (дтдл)](https://github.com/Azure/opendigitaltwins-dtdl).

Веб-интерфейс позволяет управлять моделями и интерфейсами.

В репозитории моделей используется RBAC, позволяющий ограничить доступ к определениям интерфейса.

## <a name="devices"></a>Устройства

Построитель устройств реализует код для запуска на интеллектуальном устройстве IoT с помощью одного из [пакетов SDK для устройств Azure IOT](./libraries-sdks.md). Пакеты SDK для устройств помогают построителю устройств:

- Безопасное подключение к центру Интернета вещей.
- Зарегистрируйте устройство в центре Интернета вещей и объявите идентификатор модели, определяющий коллекцию интерфейсов ДТДЛ, которые реализует устройство.
- Синхронизируйте свойства, определенные в интерфейсах ДТДЛ, между устройством и центром Интернета вещей.
- Добавьте обработчики команд для команд, определенных в интерфейсах ДТДЛ.
- Отправка данных телеметрии в центр Интернета вещей.

## <a name="iot-edge-gateway"></a>Шлюз IoT Edge

Шлюз IoT Edge выступает в качестве посредника для подключения устройств IoT Plug and Play, которые не могут напрямую подключаться к центру Интернета вещей. Дополнительные сведения см. в разделе [как можно использовать IOT Edge устройство в качестве шлюза](../iot-edge/iot-edge-as-gateway.md).

## <a name="iot-edge-modules"></a>Модули IoT Edge

_Модуль IOT Edge_ позволяет развертывать бизнес-логику на границе и управлять ею. Модуль Azure IoT Edge представляет собой наименьшую единицу вычислительных ресурсов, которыми управляет IoT Edge. Эти модули могут содержать службы Azure (например, Azure Stream Analytics) или пользовательский код для конкретного решения.

_Центр IOT Edge_ — это один из модулей, образующих среду выполнения Azure IOT Edge. Он действует в качестве локального прокси-сервера для Центра Интернета вещей, предоставляя те же конечные точки протокола, что и Центр Интернета вещей. Эта согласованность означает, что клиенты (устройства или модули) могут подключаться к среде выполнения IoT Edge так же, как к Центру Интернета вещей.

Пакеты SDK для устройств помогают конструктору модулей выполнять следующие задачи:

- Используйте центр IoT Edge для безопасного подключения к центру Интернета вещей.
- Зарегистрируйте модуль в центре Интернета вещей и объявите идентификатор модели, определяющий коллекцию интерфейсов ДТДЛ, которые реализует устройство.
- Синхронизируйте свойства, определенные в интерфейсах ДТДЛ, между устройством и центром Интернета вещей.
- Добавьте обработчики команд для команд, определенных в интерфейсах ДТДЛ.
- Отправка данных телеметрии в центр Интернета вещей.

## <a name="iot-hub"></a>Центр Интернета вещей

[Центр Интернета вещей](../iot-hub/about-iot-hub.md) — это размещенная в облаке служба, которая выступает в качестве центрального центра сообщений для двунаправленного обмена данными между решением Интернета вещей и устройствами, которыми он управляет.

Центр Интернета вещей:

- Делает идентификатор модели, реализованный устройством, доступным для серверного решения.
- Поддерживает цифровые двойника, связанные с каждым устройством Plug and Play, подключенным к концентратору.
- Пересылает потоки телеметрии другим службам для обработки или хранения.
- Направляет события изменения Digital двойника в другие службы для включения мониторинга устройств.

## <a name="backend-solution"></a>Серверное решение

Серверное решение наблюдает за подключенными устройствами и контролирует их, взаимодействуя с цифровыми двойников в центре Интернета вещей. Используйте один из пакетов SDK служб для реализации серверного решения. Чтобы понять возможности подключенного устройства, серверная часть решения:

1. Извлекает идентификатор модели, зарегистрированной для устройства в центре Интернета вещей.
1. Использует идентификатор модели для получения определений интерфейса из любого репозитория модели.
1. Использует средство синтаксического анализа модели для извлечения сведений из определений интерфейса.

Серверное решение может использовать сведения из определений интерфейса для:

- Чтение значений свойств, сообщаемых устройствами.
- Обновление свойств, доступных для записи, на устройстве.
- Вызывайте команды, реализованные устройством.
- Изучите формат данных телеметрии, отправляемых устройством.

## <a name="next-steps"></a>Дальнейшие шаги

Теперь, когда у вас есть общие сведения об архитектуре решения Plug and Play IoT, дальнейшие действия помогут получить дополнительные сведения:

- [Репозиторий модели](./concepts-model-repository.md)
- [Интеграция модели Digital двойника](./concepts-model-discovery.md)
- [Разработка для Plug and Play IoT](./concepts-developer-guide-device-csharp.md)
