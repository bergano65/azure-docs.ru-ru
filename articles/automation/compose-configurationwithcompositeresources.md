---
title: Создание конфигураций DSC
description: Эта статья содержит сведения о составлении конфигураций с помощью составных ресурсов в State Configuration службы автоматизации Azure.
keywords: powershell dsc, desired state configuration, powershell dsc для azure, составные ресурсы
services: automation
ms.subservice: dsc
ms.date: 08/21/2018
ms.topic: conceptual
ms.openlocfilehash: e7a190792714e1dd1a54da7e674e63d4453c548e
ms.sourcegitcommit: 0b80a5802343ea769a91f91a8cdbdf1b67a932d3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2020
ms.locfileid: "83835076"
---
# <a name="compose-dsc-configurations"></a>Создание конфигураций DSC

Если для управления ресурсом вам нужно более одной конфигурации требуемого состояния (DSC), лучше всего использовать [составные ресурсы](/powershell/scripting/dsc/resources/authoringresourcecomposite). Составной ресурс — это вложенная и параметризованная конфигурация, используемая как ресурс DSC в другой конфигурации. Использование составных ресурсов позволяет формировать сложные конфигурации, позволяя раздельно создавать и администрировать базовые составные ресурсы.

Служба автоматизации Azure позволяет [импортировать и компилировать составные ресурсы](automation-dsc-compile.md). Завершив импорт составных ресурсов в учетную запись службы автоматизации, вы можете применить возможность State Configuration службы автоматизации Azure, открыв на страницу **State Configuration (DSC)** на портале Azure.

## <a name="compose-a-configuration"></a>Создание конфигурации

Прежде чем назначать конфигурацию, сформированную из составных ресурсов на портале Azure, эту конфигурацию необходимо создать. Для этого используется средство **Составление конфигурации** на странице State Configuration (DSC), где есть вкладки **Конфигурации** или **Скомпилированные конфигурации**.

1. Войдите на [портал Azure](https://portal.azure.com).
1. Слева щелкните **Все ресурсы**, а затем — имя учетной записи службы автоматизации.
1. На странице учетной записи службы автоматизации выберите **State Configuration (DSC)** в разделе **Управление конфигурацией**.
1. На странице "State Configuration (DSC)" откройте вкладку **Конфигурации** или **Скомпилированные конфигурации**, а затем в меню в верхней части страницы выберите **Составить конфигурацию**.
1. В шаге **Основы** укажите имя новой конфигурации (обязательно), а затем щелкните в любом месте строки каждого составного ресурса, который следует включить в конфигурацию. Нажмите кнопку **Далее** или щелкните шаг **Исходный код**. Для последующих шагов мы выбрали составные ресурсы `PSExecutionPolicy` и `RenameAndDomainJoin`.
   ![Снимок экрана: шаг "Основы" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-basics.png)
1. В шаге **Исходный код** показано, как выглядит составленная из выбранных составных ресурсов конфигурация. Вы можете увидеть, как объединяются все параметры и как они передаются в составной ресурс. Просмотрев новый исходный код, нажмите кнопку **Далее** или щелкните шаг **Параметры**.
   ![Снимок экрана: шаг "Исходный код" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-sourcecode.png)
1. На шаге **Параметры** предоставляется параметр для каждого составного ресурса, который позволяет указать нужные значения. Если у параметра есть описание, оно приводится рядом с полем параметра. Если параметр имеет тип `PSCredential`, в раскрывающемся списке перечисляются объекты **Учетные данные** из текущей учетной записи службы автоматизации. Кроме того, доступно действие **+ Добавить учетные данные**. Указав все обязательные параметры, щелкните **Сохранить и скомпилировать**.
   ![Снимок экрана: шаг "Параметры" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-parameters.png)

## <a name="submit-the-configuration-for-compilation"></a>Отправка конфигурации для компиляции

После сохранения новой конфигурации она отправляется на компиляцию. Состояние задания компиляции можно просмотреть так же, как для любой импортированной конфигурации. Дополнительные сведения см. в разделе [Просмотр задания компиляции](automation-dsc-getting-started.md#view-a-compilation-job).

После успешного завершения компиляции новая конфигурация появляется на вкладке **Составленные конфигурации**. Теперь эту конфигурацию можно назначить управляемому узлу, выполнив инструкции в разделе [Переназначение узла другой конфигурации узла](automation-dsc-getting-started.md#reassign-a-node-to-a-different-node-configuration).

## <a name="next-steps"></a>Дальнейшие действия

- Сведения о том, как включить узлы, см. в статье [Включение службы State Configuration службы автоматизации Azure](automation-dsc-onboarding.md).
- Сведения о компилировании конфигураций DSC, которые затем можно назначить целевым узлам, см. в статье [Компилирование конфигураций DSC в службе State Configuration службы автоматизации Azure](automation-dsc-compile.md).
- Пример использования службы State Configuration в службе автоматизации Azure в конвейере непрерывного развертывания см. в статье [Настройка непрерывного развертывания с помощью Chocolatey](automation-dsc-cd-chocolatey.md).
- Сведения о ценах см. на странице [с ценами на использование State Configuration службы автоматизации Azure](https://azure.microsoft.com/pricing/details/automation/).
- Справочник по командлетам PowerShell см. в документации по [Az.Automation](https://docs.microsoft.com/powershell/module/az.automation/?view=azps-3.7.0#automation
).
