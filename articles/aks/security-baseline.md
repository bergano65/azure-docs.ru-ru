---
title: Базовый план безопасности Azure для службы Kubernetes Azure
description: В базовом плане безопасности службы Azure Kubernetes содержатся практические рекомендации и ресурсы для реализации рекомендаций по безопасности, указанных в статье о производительности системы безопасности Azure.
author: msmbaldwin
ms.service: container-service
ms.topic: conceptual
ms.date: 10/01/2020
ms.author: mbaldwin
ms.custom: subject-security-benchmark
ms.openlocfilehash: 818ae0b90b71b61c3b33676d81d9c783c577bdcc
ms.sourcegitcommit: c157b830430f9937a7fa7a3a6666dcb66caa338b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2020
ms.locfileid: "94683902"
---
# <a name="azure-security-baseline-for-azure-kubernetes-service"></a>Базовый план безопасности Azure для службы Kubernetes Azure

Базовый план безопасности Azure для службы Azure Kubernetes содержит рекомендации, которые помогут повысить уровень безопасности развертывания.

Базовый план безопасности для этой службы взят из [Эталона безопасности Azure версии 1.0](../security/benchmarks/overview.md), содержащего рекомендации по обеспечению безопасности облачных решений в Azure с помощью наших практических рекомендаций.

Дополнительные сведения см. в статье [Обзор базовой конфигурации безопасности Azure](/azure/security/benchmarks/security-baselines-overview).

## <a name="network-security"></a>Безопасность сети

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: безопасность сети](../security/benchmarks/security-control-network-security.md).*

### <a name="11-protect-azure-resources-within-virtual-networks"></a>1,1: защита ресурсов Azure в виртуальных сетях

**Руководство**. по умолчанию группа безопасности сети и таблица маршрутов автоматически создаются при создании кластера Microsoft Azure Kubernetes Service (AKS). AKS автоматически изменяет группы безопасности сети для соответствующего потока трафика, так как службы создаются с помощью подсистем балансировки нагрузки, сопоставления портов или входящих маршрутов. Группа безопасности сети автоматически связывается с виртуальными сетевыми адаптерами на узлах клиентов, а таблица маршрутов — с подсетью в виртуальной сети. 

Используйте политики сети AKS для ограничения сетевого трафика путем определения правил для входящего и исходящего трафика между модулями Linux в кластере на основе выбора пространств имен и селекторов меток. Для использования сетевой политики требуется подключаемый модуль Azure CNI с заданной виртуальной сетью и подсетями. его можно включить только при создании кластера. Они не могут быть развернуты в существующем кластере AKS.

Вы можете реализовать частный кластер AKS, чтобы гарантировать, что сетевой трафик между сервером API AKS и пулами узлов остается только в частной сети. Плоскость управления или сервер API находятся в подписке Azure, управляемой AKS, и использует внутренние IP-адреса (АДРЕСНЫЕ пространства RFC1918), тогда как кластер или пул узлов клиента находятся в собственной подписке. Сервер и кластер или пул узлов взаимодействуют друг с другом с помощью службы частной связи Azure в виртуальной сети сервера API и частной конечной точки, предоставляемой в подсети кластера AKS клиента.  Кроме того, можно использовать общедоступную конечную точку для сервера API AKS, но ограничить доступ с помощью функции разрешенных диапазонов IP-адресов сервера AKS API. 

- [Основные понятия безопасности для приложений и кластеров в Службе Azure Kubernetes (AKS)](concepts-security.md)

- [Защита трафика между группами pod с использованием политик сети в Службе Azure Kubernetes (AKS)](use-network-policies.md)

- [Создание частного кластера Службы Azure Kubernetes](private-clusters.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="12-monitor-and-log-the-configuration-and-traffic-of-virtual-networks-subnets-and-nics"></a>1,2. Мониторинг и запись конфигурации и трафика виртуальных сетей, подсетей и сетевых карт

**Рекомендации**. Используйте центр безопасности и следуйте рекомендациям по защите сети, чтобы защитить сетевые ресурсы, используемые кластерами Azure Kubernetes Service (AKS). 

Включите журналы потоков для групп безопасности сети и отправьте журналы в учетную запись хранения Azure для аудита. Можно также отправить журналы последовательностей в Log Analytics рабочую область, а затем использовать Аналитика трафика для предоставления ценных сведений о шаблонах трафика в облаке Azure для визуализации сетевых операций, выявления проблем с горячими разрешениями и угрозами безопасности, понимания шаблонов потоков трафика и определения параметров сети.

- [Общие сведения о безопасности сети, предоставляемой центром безопасности Azure](../security-center/security-center-network-recommendations.md)

- [Включение журналов потоков безопасности сети](../network-watcher/network-watcher-nsg-flow-logging-portal.md)

- [Как включать и использовать Аналитику трафика](../network-watcher/traffic-analytics.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="13-protect-critical-web-applications"></a>1.3. Защита критических веб-приложений

**Руководство**. Использование брандмауэра веб-приложения с поддержкой шлюза приложений Azure (WAF) перед кластером AKS для обеспечения дополнительного уровня безопасности путем фильтрации входящего трафика в веб-приложения. Azure WAF использует набор правил, предоставляемых открытым проектом безопасности веб-приложений (OWASP) для атак, таких как межсайтовые сценарии или файлы cookie, которые закрываются данным трафиком. 

Используйте шлюз API для проверки подлинности, авторизации, регулирования, кэширования, преобразования и мониторинга для API-интерфейсов, используемых в среде AKS. Шлюз API выступает в качестве передней дверцы микрослужб, отделяет клиентов от микрослужб и уменьшает сложность микрослужб за счет устранения проблем, связанных с обработкой перекрестных задач.

- [Рекомендации по сетевому подключению и безопасности в AKS](operator-best-practices-network.md)

- [Контроллер входящего трафика шлюза приложений ](../application-gateway/ingress-controller-overview.md)

- [Использование службы управления API Azure с микрослужбами, развернутыми в службе Kubernetes Azure](../api-management/api-management-kubernetes.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="14-deny-communications-with-known-malicious-ip-addresses"></a>1.4. Запрет взаимодействия с известными опасными IP-адресами

**Руководство**. Включение службы распределенного отказа в обслуживании Майкрософт (от атак DDoS) в виртуальных сетях, где компоненты службы Azure KUBERNETES (AKS) развертываются для защиты от атак от атак DDoS.
Установите модуль политики сети и создайте Kubernetes сетевые политики для управления потоком трафика между модулями Pod в AKS, как, по умолчанию, весь трафик разрешается между этими модулями. Политику сети следует использовать только для узлов под управлением Linux и групп pod в AKS. Определите правила, ограничивающие связь с Pod для повышения безопасности. 

Выберите разрешение или запрет трафика на основе таких параметров, как назначенные метки, пространство имен или порт трафика. Необходимые политики сети можно автоматически применять в качестве модулей Pod, динамически создаваемых в кластере AKS. 

- [Защита трафика между группами pod с использованием политик сети в Службе Azure Kubernetes (AKS)](use-network-policies.md)

- [Настройка защиты от атак DDoS](../virtual-network/manage-ddos-protection.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="15-record-network-packets"></a>1,5: запись сетевых пакетов

**Руководство**. Используйте запись пакетов наблюдателя за сетями, как это необходимо для изучения аномальных действий. 

Наблюдатель за сетями включается автоматически в регионе виртуальной сети при создании или обновлении виртуальной сети в подписке. Можно также создать новые экземпляры наблюдателя за сетями с помощью PowerShell, Azure CLI, REST API или метода ARMClient.

- [Как включить Наблюдатель за сетями](../network-watcher/network-watcher-create.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="16-deploy-network-based-intrusion-detectionintrusion-prevention-systems-idsips"></a>1,6: развертывание системы обнаружения вторжений на основе сети и предотвращения вторжения (ИДЕНТИФИКАТОРы и IP-адреса)

**Руководство**. Защита кластера Azure Kubernetes Service (AKS) с помощью шлюза приложений Azure с брандмауэром веб-приложения (WAF). 

Если обнаружение и/или предотвращение вторжения на основе анализа полезной нагрузки или аналитики поведения не является обязательным, шлюз приложений Azure с WAF можно использовать и настроить в "режиме обнаружения" для ведения журнала предупреждений и угроз, или "режим предотвращения" для активной блокировки обнаруженных вторжений и атак.

- [Ознакомьтесь с рекомендациями по защите кластера AKS с помощью WAF](operator-best-practices-network.md#secure-traffic-with-a-web-application-firewall-waf)

- [Развертывание шлюза приложений Azure (Azure WAF)](../web-application-firewall/ag/application-gateway-web-application-firewall-portal.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="17-manage-traffic-to-web-applications"></a>1.7. Управление трафиком к веб-приложениям

**Руководство**. Используйте брандмауэр веб-приложения Azure с поддержкой шлюза приложений (WAF) перед КЛАСТЕРом AKS, чтобы отфильтровать входящий трафик. Открытый проект безопасности веб-приложений (OWASP) предоставляет набор правил, которые используются в WAF Azure для отслеживания атак, таких как межсайтовые сценарии или подозрительные файлы cookie.

Применение тегов полного доменного имени (FQDN) к приложениям для простоты использования при настройке правил приложений в группе безопасности сети. После настройки сетевых правил. Добавьте правило приложения с помощью тега FQDN, например Азурекубернетессервице, который включает все необходимые полные доменные имена, доступные через TCP-порт 443 и порт 80. 

- [Рекомендации по сетевому подключению и безопасности в AKS](operator-best-practices-network.md)

- [Защита трафика между группами pod с использованием политик сети в Службе Azure Kubernetes (AKS)](use-network-policies.md)

- [Развертывание шлюза приложений Azure (Azure WAF)](../web-application-firewall/ag/application-gateway-web-application-firewall-portal.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Неприменимо

### <a name="18-minimize-complexity-and-administrative-overhead-of-network-security-rules"></a>1.8. Уменьшение сложности и дополнительных затрат на администрирование в правилах безопасности сети

**Руководство**. Использование тегов службы виртуальной сети для определения элементов управления доступом к сети для групп безопасности сети, связанных с экземплярами службы Azure Kubernetes Service (AKS). Теги службы можно использовать вместо конкретных IP-адресов при создании правил безопасности, чтобы разрешить или запретить трафик для соответствующей службы, указав имя тега службы. 

Корпорация Майкрософт управляет префиксами адресов, входящих в тег службы, и автоматически обновляет этот тег при изменении адресов.

Примените тег Azure к пулам узлов в кластере AKS. Они отличаются от тегов службы виртуальной сети и применяются к каждому узлу в пуле узлов и сохраняются с помощью обновлений. 

- [Общие сведения и использование тегов служб](../virtual-network/service-tags-overview.md)

- [Общие сведения о группы безопасности сети для AKS](support-policies.md)

- [Управление исходящим трафиком для узлов кластера в службе Azure Kubernetes (AKS)](limit-egress-traffic.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="19-maintain-standard-security-configurations-for-network-devices"></a>1.9. Поддержание стандартных конфигураций безопасности для сетевых устройств

**Руководство**. Определение и реализация стандартных конфигураций безопасности с помощью политики Azure для сетевых ресурсов, связанных с кластерами Azure Kubernetes Service (AKS). Используйте псевдонимы политик Azure в пространствах имен Microsoft. ContainerService и Microsoft. Network, чтобы создать настраиваемые политики для аудита или принудительного применения конфигурации сети кластеров AKS. 

Кроме того, используйте встроенные определения политик, связанные с AKS, например:

• Допустимые диапазоны IP-адресов должны быть определены в Kubernetes Services

• Принудительное применение HTTPS в кластере Kubernetes

• Убедитесь, что службы прослушивают только разрешенные порты в кластере Kubernetes

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

- [Примеры политик Azure для работы в сети](../governance/policy/samples/built-in-policies.md#network)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="110-document-traffic-configuration-rules"></a>1.10. Документация по правилам конфигурации трафика

**Руководство**. Использование тегов для групп безопасности сети и других ресурсов для передачи трафика в кластеры Azure Kubernetes Service (AKS) и из них. Используйте поле "Описание" для отдельных правил группы безопасности сети, чтобы указать потребности и/или длительность и т. д. для всех правил, которые разрешают трафик из сети в сеть.
Используйте любые встроенные определения, связанные с разметкой политики Azure, например "требовать тег и его значение", чтобы обеспечить создание всех ресурсов с помощью тегов и получать уведомления для существующих непомеченных ресурсов.

Выберите разрешение или запрет на определенные сетевые пути в кластере на основе пространств имен и селекторов меток с сетевыми политиками. Используйте эти пространства имен и метки в качестве дескрипторов для правил конфигурации трафика. Используйте Azure PowerShell или интерфейс командной строки Azure (CLI) для поиска или выполнения действий с ресурсами на основе их тегов.

- [Политика Azure с интерфейсом командной строки](/cli/azure/policy?view=azure-cli-latest)

- [Создание и использование тегов](../azure-resource-manager/management/tag-resources.md)

- [Создание группы безопасности сети с конфигурацией безопасности](../virtual-network/tutorial-filter-network-traffic.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="111-use-automated-tools-to-monitor-network-resource-configurations-and-detect-changes"></a>1.11. Использование автоматизированных средств для мониторинга конфигураций сетевых ресурсов и обнаружения изменений

**Руководство**. Использование журнала действий Azure для мониторинга конфигураций сетевых ресурсов и обнаружения изменений сетевых ресурсов, связанных с кластерами Azure Kubernetes Service (AKS). 

Создавайте оповещения в Azure Monitor, которые будут запускаться при изменении критических сетевых ресурсов. Все записи от пользователя Азуреконтаинерсервице в журналах действий регистрируются как действия платформы. 

Используйте журналы Azure Monitor, чтобы включить и запросить журналы из AKS основных компонентов, KUBE-аписервер и KUBE-Controller-Manager. Создание и администрирование узлов, на которых выполняется kubelet с помощью среды выполнения контейнеров, и развертывание приложений с помощью управляемого сервера API Kubernetes. 

- [Как просматривать и извлекать события журнала действий Azure](../azure-monitor/platform/activity-log.md#view-the-activity-log)

- [Как создать оповещения в службе Azure Monitor](../azure-monitor/platform/alerts-activity-log.md)

- [Enable and review Kubernetes master node logs in Azure Kubernetes Service (AKS)](view-master-logs.md) (Включение и просмотр журналов главного узла Kubernetes в Службе Azure Kubernetes (AKS))

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

## <a name="logging-and-monitoring"></a>Ведение журналов и мониторинг

*Дополнительные сведения см. в статье [производительность системы безопасности Azure: ведение журнала и мониторинг](../security/benchmarks/security-control-logging-monitoring.md).*

### <a name="21-use-approved-time-synchronization-sources"></a>2.1. Использование утвержденных источников синхронизации времени

**Руководство**. узлы Azure Kubernetes Service (AKS) используют NTP.Ubuntu.com для синхронизации времени, а также UDP-порт 123 и протокол NTP. 

При использовании пользовательских DNS-серверов убедитесь, что серверы NTP доступны для узлов кластера. 

- [Общие сведения о требованиях к домену и портам NTP для узлов кластера AKS](limit-egress-traffic.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Совмещаемая блокировка

### <a name="22-configure-central-security-log-management"></a>2.2. Настройка централизованного управления журналами безопасности

**Руководство**. Включение журналов аудита из главных компонентов Azure Kubernetes Services (AKS), KUBE-аписервер и KUBE-Controller-Manager, которые предоставляются как управляемая служба. 

• KUBE-Аудитакссервице: отображаемое имя в журнале аудита для операции плоскости управления (из Хкпсервице) 

• мастерклиент: отображаемое имя в журнале аудита для Мастерклиентцертификате, сертификат, полученный из команды AZ AKS Get-credentials. 

• нодеклиент: отображаемое имя для ClientCertificate, используемое узлами агента.

Включите также другие журналы аудита, например KUBE-Audit. 

Экспортируйте эти журналы в Log Analytics или на другую платформу хранения. В Azure Monitor используйте рабочие области Log Analytics для запроса и выполнения анализа и используйте учетные записи хранения Azure для долгосрочного и архивного хранения.

Разрешите и включите эти данные в Azure Sentinel или сторонние SIEM в соответствии с бизнес-требованиями Организации.

- [Ознакомьтесь со схемой журнала, включая роли журнала.](view-master-logs.md)

- [Общие сведения о Azure Monitor контейнерах](../azure-monitor/insights/container-insights-overview.md)

- [Включение Azure Monitor для контейнеров](../azure-monitor/insights/container-insights-onboard.md)

- [Enable and review Kubernetes master node logs in Azure Kubernetes Service (AKS)](view-master-logs.md) (Включение и просмотр журналов главного узла Kubernetes в Службе Azure Kubernetes (AKS))

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="23-enable-audit-logging-for-azure-resources"></a>2.3. Включение журналов аудита для ресурсов Azure

**Руководство**. Использование журналов действий для мониторинга действий в ресурсах Azure Kubernetes Service (AKS) для просмотра всех действий и их состояний. Определение операций, выполненных с ресурсами в подписке с помощью журналов действий: кто начал операцию

когда была выполнена операция;

состояние операции;

значения других свойств, которые могут помочь в изучении операции.

Получите сведения из журнала действий с помощью Azure PowerShell, интерфейса командной строки Azure (CLI), REST API Azure или портал Azure. 

Включите журналы аудита в основных компонентах AKS, например: 

• KUBE-Аудитакссервице: отображаемое имя в журнале аудита для операции плоскости управления (из Хкпсервице) 

• мастерклиент: отображаемое имя в журнале аудита для Мастерклиентцертификате, сертификат, полученный из команды AZ AKS Get-credentials. 

• нодеклиент: отображаемое имя для ClientCertificate, используемое узлами агента.

Включите также другие журналы аудита, например KUBE-Audit. 

- [Как включить и проверить журналы главного узла Kubernetes в AKS](view-master-logs.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="24-collect-security-logs-from-operating-systems"></a>2.4. Сбор журналов безопасности из операционных систем

**Руководство**. Включение автоматической установки агентов log Analytics для сбора данных с узлов кластера AKS. Кроме того, включите автоматическую подготовку агента мониторинга Log Analytics Azure из центра безопасности Azure. по умолчанию автоматическая подготовка отключена. Агент также можно установить вручную. При автоматической подготовке в центр безопасности развертывает агент Log Analytics на всех поддерживаемых виртуальных машинах Azure и новых созданных. Центр безопасности собирает данные из виртуальных машин Azure, масштабируемых наборов виртуальных машин и контейнеров IaaS, таких как узлы кластера Kubernetes, для отслеживания уязвимостей и угроз безопасности. Сбор данных выполняется с помощью агента Azure Log Analytics, который считывает различные конфигурации, связанные с безопасностью, и журналы событий с компьютера и копирует данные в рабочую область для анализа. 

Сбор данных необходим для предоставления сведений об отсутствующих обновлениях, неправильно настроенных параметрах безопасности ОС, состоянии Endpoint Protection и обнаружении работоспособности и угроз.

- [Включение автоматической подготовки агента Log Analytics](../security-center/security-center-enable-data-collection.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Совмещаемая блокировка

### <a name="25-configure-security-log-storage-retention"></a>2.5. Настройка хранения журнала безопасности

**Руководство**. Подключение экземпляров службы Azure Kubernetes Service (AKS) к Azure Monitor и настройка соответствующего срока хранения для рабочей области Azure log Analytics в соответствии с требованиями вашей организации к соответствию. 

- [Как задать параметры хранения журнала для рабочих областей Log Analytics](../azure-monitor/platform/manage-cost-storage.md#change-the-data-retention-period)

**Мониторинг Центра безопасности Azure**. Неприменимо

**Ответственность**: Customer

### <a name="26-monitor-and-review-logs"></a>2.6. Мониторинг и просмотр журналов

**Руководство**. Подключение экземпляров службы Azure Kubernetes Service (AKS) к Azure Monitor и Настройка параметров диагностики для кластера. 

Используйте рабочую область Log Analytics Azure Monitor, чтобы просматривать журналы и выполнять запросы к данным журнала. Журналы Azure Monitor включены и управляются в портал Azure или с помощью интерфейса командной строки, а также работают с Kubernetes управления доступом на основе ролей (Kubernetes RBAC), Azure RBAC и не поддерживающими RBAC AKS кластерами.

Просмотрите журналы, созданные AKS Master Components (KUBE-аписервер и KUBE-контроллерманажер) для устранения неполадок в приложении и службах. Включение и встроенные данные в Azure Sentinel или сторонние SIEM для централизованного управления журналами и мониторинга.

- [Как включить и проверить журналы главного узла Kubernetes в AKS](view-master-logs.md)

- [Подключение к Azure Sentinel](../sentinel/quickstart-onboard.md)

- [Выполнение пользовательских запросов в Azure Monitor](../azure-monitor/log-query/get-started-queries.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="27-enable-alerts-for-anomalous-activities"></a>2,7: Включение оповещений для аномальных действий

**Руководство**. Используйте службу Azure Kubernetes Service (AKS) вместе с центром безопасности, чтобы получить более подробную информацию об узлах AKS. Просмотрите оповещения центра безопасности об угрозах и вредоносных действиях, обнаруженных на узле и на уровне кластера. Центр безопасности реализует непрерывный анализ необработанных событий безопасности, происходящих в кластере AKS, таких как данные сети, создание процессов и журнал аудита Kubernetes. Определите, является ли действие ожидаемым или поведение приложения некорректным. Используйте метрики и журналы в Azure Monitor, чтобы субстантиате свои результаты. 

- [Общие сведения об интеграции Azure Kubernetes Services с центром безопасности](../security-center/defender-for-kubernetes-introduction.md)

- [Включение уровня "Стандартный" центра безопасности Azure](../security-center/security-center-get-started.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="28-centralize-anti-malware-logging"></a>2.8. Централизованное ведение журнала защиты от вредоносных программ

**Руководство**. Установка и включение защиты от вредоносных программ Майкрософт для виртуальных машин Azure Kubernetes Service (AKS) и узлов масштабируемых наборов виртуальных машин. Ознакомьтесь с оповещениями в центре безопасности для исправления.

- [Антивредоносное ПО Майкрософт для облачных служб и виртуальных машин Azure](../security/fundamentals/antimalware.md)

- [Справочное руководство по оповещениям системы безопасности](../security-center/alerts-reference.md)

- [Оповещения для контейнеров — кластеры службы Kubernetes Azure](../security-center/alerts-reference.md#alerts-akscluster)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="29-enable-dns-query-logging"></a>2.9. Включение ведения журнала запросов DNS

**Руководство**. Служба Kubernetes Azure (AKS) использует проект кореднс для управления и разрешения кластеров DNS.

Включите ведение журнала запросов DNS, применив задокументированную конфигурацию в кореднс-Custom ConfigMap. 

- [Настройка CoreDNS с использованием Службы Azure Kubernetes](coredns-custom.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="210-enable-command-line-audit-logging"></a>2.10. Включение ведения журнала аудита для командной строки

**Руководство**. Использование kubectl, клиента командной строки, в службе Kubernetes Azure (AKS) для управления кластером Kubernetes и получения журналов из AKS узла для устранения неполадок. Kubectl уже установлен, если используется Azure Cloud Shell. Чтобы установить kubectl локально, используйте командлет Install-Азакскубектл.

- [Краткое руководство. Развертывание кластера службы Kubernetes Azure с помощью PowerShell](kubernetes-walkthrough-powershell.md)

- [Get kubelet logs from Azure Kubernetes Service (AKS) cluster nodes](kubelet-logs.md) (Получение журналов kubelet из узлов кластера Службы Azure Kubernetes (AKS))

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

## <a name="identity-and-access-control"></a>Идентификаторы и управление доступом

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: идентификация и управление доступом](../security/benchmarks/security-control-identity-access-control.md).*

### <a name="31-maintain-an-inventory-of-administrative-accounts"></a>3.1. Инвентаризация учетных записей администраторов

**Руководство**. сама служба Azure Kubernetes Service (AKS) не предоставляет решение для управления удостоверениями, в котором хранятся обычные учетные записи пользователей и пароли. С помощью интеграции Azure Active Directory (Azure AD) можно предоставить пользователям или группам доступ к ресурсам Kubernetes в пространстве имен или в пределах кластера. 

Выполнение нерегламентированных запросов для обнаружения учетных записей, являющихся членами административных групп AKS, с помощью модуля Azure AD PowerShell

Используйте Azure CLI для таких операций, как "получить учетные данные доступа для управляемого кластера Kubernetes", чтобы упростить согласование доступа на регулярной основе. Реализуйте этот процесс, чтобы поддерживать обновленную инвентаризацию учетных записей служб, которые являются еще одним основным типом пользователей в AKS. Применяйте рекомендации по управлению удостоверениями и доступом в центре безопасности.

- [Как интегрировать AKS с Azure AD](./azure-ad-integration-cli.md)

- [Как получить членов роли каталога в Azure AD с помощью PowerShell](/powershell/module/azuread/get-azureaddirectoryrolemember?view=azureadps-2.0)

- [Мониторинг удостоверений и доступа с помощью центра безопасности Azure](../security-center/security-center-identity-access.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="32-change-default-passwords-where-applicable"></a>3.2. Изменение паролей по умолчанию, где применимо

**Руководство**. служба Azure KUBERNETES (AKS) не имеет концепции общих паролей по умолчанию и не предоставляет решение для управления удостоверениями, в котором можно хранить обычные учетные записи пользователей и пароли. С помощью интеграции Azure Active Directory (Azure AD) можно предоставить доступ на основе ролей к ресурсам AKS в пространстве имен или в пределах кластера. 

Выполнение нерегламентированных запросов для обнаружения учетных записей, являющихся членами административных групп AKS, с помощью модуля Azure AD PowerShell

- [Общие сведения о параметрах доступа и удостоверений для AKS](concepts-identity.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="33-use-dedicated-administrative-accounts"></a>3.3. Применение выделенных административных учетных записей

**Руководство**. Интеграция проверки подлинности пользователей для кластеров службы Azure Kubernetes Service (AKS) с Azure Active Directory (Azure AD). Войдите в кластер AKS с помощью маркера проверки подлинности Azure AD. Настройте управление доступом на основе ролей Kubernetes (Kubernetes RBAC) для административного доступа к сведениям и разрешениям конфигурации Kubernetes (kubeconfig), пространству имен и ресурсам кластера. 

Создание политик и процедур, связанных с использованием выделенных административных учетных записей. Реализуйте рекомендации по управлению удостоверениями и доступом в центре безопасности.

- [Мониторинг удостоверений и доступа с помощью центра безопасности Azure](../security-center/security-center-identity-access.md)

- [Управление доступом к ресурсам кластера](azure-ad-rbac.md)

- [Использование элементов управления доступом на основе ролей в Azure](control-kubeconfig-access.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="34-use-single-sign-on-sso-with-azure-active-directory"></a>3.4. Использование единого входа с Azure Active Directory

**Руководство**. Использование единого входа для службы Azure Kubernetes Service (AKS) с интегрированной проверкой подлинности Azure Active Directory (Azure AD) для кластера AKS.

- [Просмотр журналов Kubernetes, событий и метрик Pod в режиме реального времени](../azure-monitor/insights/container-insights-livedata-overview.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="35-use-multi-factor-authentication-for-all-azure-active-directory-based-access"></a>3.5. Использование многофакторной проверки подлинности для любого доступа на основе Azure Active Directory

**Руководство**. Интеграция проверки подлинности для службы Azure KUBERNETES (AKS) с Azure Active Directory (Azure AD). 

Включите многофакторную идентификацию Azure AD (MFA) и следуйте рекомендациям по управлению удостоверениями и доступом в центре безопасности.

- [Включение MFA в Azure](../active-directory/authentication/howto-mfa-getstarted.md)

- [Мониторинг идентификации и доступа в Центре безопасности Azure](../security-center/security-center-identity-access.md) 

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="36-use-dedicated-machines-privileged-access-workstations-for-all-administrative-tasks"></a>3.6. Использование выделенных компьютеров (рабочих станций с привилегированным доступом) для всех административных задач

**Руководство**. Использование рабочей станции привилегированного доступа (привилегированным доступом) с многофакторной проверкой подлинности (MFA), настроенной для входа в указанные кластеры Azure Kubernetes Service (AKS) и связанные ресурсы.
- [Использование рабочих станций с привилегированным доступом](/windows-server/identity/securing-privileged-access/privileged-access-workstations)

- [Включение MFA в Azure](../active-directory/authentication/howto-mfa-getstarted.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="37-log-and-alert-on-suspicious-activities-from-administrative-accounts"></a>3,7: журналы и оповещения о подозрительных действиях учетных записей администраторов

**Руководство**. Использование отчетов безопасности Azure Active Directory (Azure AD) с интегрированной проверкой подлинности Azure AD для службы Kubernetes Azure (AKS). Предупреждения могут создаваться при возникновении подозрительных или ненадежных действий в среде. Используйте центр безопасности для мониторинга активности удостоверений и доступа.

- [Как определить пользователей Azure AD, помеченных для события риска](../active-directory/identity-protection/overview-identity-protection.md)

- [Как отслеживать активность удостоверений и доступа пользователей в центре безопасности Azure](../security-center/security-center-identity-access.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="38-manage-azure-resources-only-from-approved-locations"></a>3,8: управление ресурсами Azure только из утвержденных расположений

**Руководство**. Используйте условный доступ с именованными расположениями, чтобы разрешить доступ к кластерам Azure Kubernetes Service (AKS) только из конкретных логических групп диапазонов IP-адресов или стран и регионов. Для этого требуется встроенная проверка подлинности для AKS с Azure Active Directory (Azure AD).

Ограничьте доступ к серверу API AKS из ограниченного набора диапазонов IP-адресов, так как он получает запросы на выполнение действий в кластере для создания ресурсов или масштабирования количества узлов. 

- [Безопасный доступ к серверу API с помощью диапазонов полномочных IP-адресов в службе Kubernetes Azure (AKS)](api-server-authorized-ip-ranges.md)

- [Настройка именованных расположений в Azure](../active-directory/reports-monitoring/quickstart-configure-named-locations.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="39-use-azure-active-directory"></a>3.9. Использование Azure Active Directory

**Руководство**. Использование Azure Active Directory (Azure AD) в качестве центральной системы проверки подлинности и авторизации для службы Azure KUBERNETES (AKS). Azure AD защищает данные с помощью надежного шифрования для неактивных и передаваемых данных, хэширования и безопасного хранения учетных данных пользователя.

Используйте встроенные роли AKS с контролем доступа на основе ролей Azure (Azure RBAC) — участник политики ресурсов и владелец для операций назначения политик в кластере Kubernetes.

- [Что такое служба "Политика Azure"](../governance/policy/overview.md)

- [Как интегрировать Azure AD с AKS](./azure-ad-integration-cli.md) 

- [Интеграция Azure AD с управляемым AKS](managed-aad.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="310-regularly-review-and-reconcile-user-access"></a>3.10. Регулярная проверка и согласование доступа пользователей

**Руководство**. Использование отчетов безопасности Azure Active Directory (Azure AD) с интегрированной проверкой подлинности Azure AD для службы Kubernetes Azure (AKS). Выполните поиск по журналам Azure AD, чтобы найти устаревшие учетные записи. 

Проверка доступа удостоверений Azure для эффективного управления членством в группах, доступом к корпоративным приложениям и назначениями ролей. Исправьте рекомендации по удостоверению и доступу из центра безопасности.

Помните о ролях, используемых для поддержки или устранения неполадок. Например, любые действия кластера, выполняемые службой поддержки Майкрософт (с согласия пользователя), выполняются во встроенной роли Kubernetes "Edit" с именем AKS-support-ролебиндинг. Поддержка AKS включена с этой ролью для изменения конфигурации кластера и ресурсов для устранения неполадок и диагностики проблем с кластером. Однако эта роль не может изменять разрешения, а также создавать роли или привязки ролей. Доступ к роли разрешен только в рамках активных запросов в службу поддержки с JIT-доступом.
 
- [Возможности контроля доступа и идентификации в Службе Azure Kubernetes (AKS)](concepts-identity.md)

- [Использование проверок доступа для идентификации Azure](../active-directory/governance/access-reviews-overview.md)

- [Как отслеживать действия пользователя и доступа в центре безопасности Azure](../security-center/security-center-identity-access.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="311-monitor-attempts-to-access-deactivated-credentials"></a>3,11: монитор пытается получить доступ к отключенным учетным данным

**Руководство**. Интеграция проверки подлинности пользователей для службы Azure KUBERNETES (AKS) с Azure Active Directory (Azure AD). Создайте параметры диагностики для Azure AD, отправив журналы аудита и входа в рабочую область Azure Log Analytics. Настройте нужные оповещения (например, когда деактивированная учетная запись пытается войти в систему) в рабочей области Azure Log Analytics.
- [Как интегрировать журналы действий Azure в Azure Monitor](../active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics.md)

- [Создание, просмотр и Управление оповещениями журнала с помощью Azure Monitor](../azure-monitor/platform/alerts-log.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="312-alert-on-account-login-behavior-deviation"></a>3.12. Предупреждение при подозрительном входе в учетную запись

**Руководство**. Интеграция проверки подлинности пользователей для службы Azure KUBERNETES (AKS) с Azure Active Directory (Azure AD). Используйте обнаружение рисков Azure AD и функцию защиты идентификации, чтобы настроить автоматические ответы на обнаруженные подозрительные действия, связанные с удостоверениями пользователей. Прием данных в Azure Sentinel для дальнейшего исследования в зависимости от бизнес-потребностей.

- [Просмотр рискованных входов в Azure AD](../active-directory/identity-protection/overview-identity-protection.md)

- [Как настроить и включить политики рисков с помощью защиты идентификации](../active-directory/identity-protection/howto-identity-protection-configure-risk-policies.md)

- [Подключение к Azure Sentinel](../sentinel/quickstart-onboard.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="313-provide-microsoft-with-access-to-relevant-customer-data-during-support-scenarios"></a>3.13. Предоставление корпорации Майкрософт доступа к соответствующим данным клиентов в рамках сценариев поддержки

**Руководство**: неприменимо к службе Azure KUBERNETES (AKS), так как она не поддерживается защищенное хранилище.
- [Список поддерживаемых защищенное хранилище служб](../security/fundamentals/customer-lockbox-overview.md#supported-services-and-scenarios-in-general-availability)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Неприменимо

## <a name="data-protection"></a>Защита данных

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: защита данных](../security/benchmarks/security-control-data-protection.md).*

### <a name="41-maintain-an-inventory-of-sensitive-information"></a>4.1. Инвентаризация конфиденциальных данных

**Руководство**. Используйте теги в ресурсах, связанных с развертываниями Azure Kubernetes Service (AKS), для помощи в отслеживании ресурсов Azure, в которых хранятся или обрабатываются конфиденциальные данные.

- [Создание и использование тегов](../azure-resource-manager/management/tag-resources.md)

- [Обновление тегов для управляемых кластеров](/rest/api/aks/managedclusters/updatetags)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="42-isolate-systems-storing-or-processing-sensitive-information"></a>4.2. Изолирование систем, хранящих или обрабатывающих конфиденциальные данные

**Руководство**. логически изолируйте команды и рабочие нагрузки в том же кластере с помощью службы Azure Kubernetes Service (AKS), чтобы предоставить минимальный набор привилегий для ресурсов, необходимых каждой группе. 

Используйте пространство имен в Kubernetes для создания границы логической изоляции. Рассмотрите возможность реализации дополнительных функций Kubernetes для изоляции и многопользовательской связи, таких как планирование, сеть, проверка подлинности, авторизация и контейнеры.

Реализуйте отдельные подписки и группы управления для сред разработки, тестирования и рабочей среды. Разделяйте кластеры AKS с помощью сети, развернув их в различных виртуальных сетях, которые имеют соответствующие метки.

- [Дополнительные сведения о рекомендациях по изоляции кластера в AKS](operator-best-practices-cluster-isolation.md)

- [Создание дополнительных подписок Azure](../cost-management-billing/manage/create-subscription.md)

- [Рекомендации по сетевому подключению и безопасности в AKS](operator-best-practices-network.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="43-monitor-and-block-unauthorized-transfer-of-sensitive-information"></a>4.3. Мониторинг и блокирование несанкционированной передачи конфиденциальной информации

**Руководство**. Используйте сторонние решения из Azure Marketplace на периметрах сети, которые отслеживают несанкционированную передачу конфиденциальной информации и блокируют такие передачи при оповещении специалистов по информационной безопасности.

Корпорация Майкрософт управляет базовой платформой и считает все содержимое клиента конфиденциальным и имеет большую длину, чтобы защититься от потери данных и доступности клиентов. Чтобы обеспечить безопасность данных клиентов в Azure, корпорация Майкрософт реализовала и поддерживает набор надежных элементов управления и возможностей защиты данных.

- [Список требуемых портов, адресов и доменных имен для функции AKS](limit-egress-traffic.md)

- [Настройка параметров диагностики для брандмауэра Azure](../firewall/firewall-diagnostics.md)

- [Общие сведения о защите данных клиентов в Azure](../security/fundamentals/protection-customer-data.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Совмещаемая блокировка

### <a name="44-encrypt-all-sensitive-information-in-transit"></a>4.4: Шифрование любой конфиденциальной информации при передаче

**Руководство**. Создание контроллера ВХОДЯЩЕГО трафика HTTPS и использование собственных сертификатов TLS (или, при необходимости, шифрование) для развертываний службы Azure Kubernetes Service (AKS). 

По умолчанию трафик выхода Kubernetes шифруется по протоколу HTTPS/TLS. Проверьте любой потенциально незашифрованный трафик исходящего трафика из экземпляров AKS для дополнительного мониторинга. В некоторых случаях это может включать NTP-трафик, трафик DNS, HTTP-трафик для получения обновлений. 

- [Создание контроллера входящего трафика HTTPS в AKS и использование собственных сертификатов TLS](ingress-own-tls.md)

- [Как создать входной контроллер HTTPS в AKS с шифрованием](ingress-tls.md)

- [Список возможных портов исходящей работы и протоколов, используемых AKS](limit-egress-traffic.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="45-use-an-active-discovery-tool-to-identify-sensitive-data"></a>4.5. Использование средства активного обнаружения для распознавания конфиденциальных данных

**Руководство**. функции для идентификации, классификации и предотвращения потерь данных пока недоступны для службы хранилища Azure или ресурсов для вычислений. Установите сторонние решения, если это необходимо для обеспечения соответствия требованиям.
Корпорация Майкрософт управляет базовой платформой и считает все содержимое клиента конфиденциальным и имеет большую длину, чтобы защититься от потери данных и доступности клиентов. 

Чтобы обеспечить безопасность данных клиентов в Azure, корпорация Майкрософт реализовала и поддерживает набор надежных элементов управления и возможностей защиты данных.

- [Общие сведения о защите данных клиентов в Azure](../security/fundamentals/protection-customer-data.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="46-use-azure-rbac-to-manage-access-to-resources"></a>4,6. Использование Azure RBAC для управления доступом к ресурсам

**Руководство**. Используйте систему авторизации управления доступом на основе ролей Azure (Azure RBAC), основанную на Azure Resource Manager, чтобы обеспечить точное управление доступом к ресурсам Azure.

Настройте службу Azure Kubernetes Service (AKS) для использования Azure Active Directory (Azure AD) для проверки подлинности пользователя. Войдите в кластер AKS с помощью маркера аутентификации Azure AD, используя эту конфигурацию. 

Используйте встроенные роли AKS с ролью Azure RBAC — участник политики ресурсов и владелец для операций назначения политик в кластере AKS.

- [Как управлять доступом к ресурсам кластера с помощью Azure RBAC и удостоверений Azure AD в AKS](azure-ad-rbac.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="47-use-host-based-data-loss-prevention-to-enforce-access-control"></a>4.7. Использование защиты от потери данных на основе узла для обеспечения контроля доступа

**Руководство**. функции для идентификации, классификации и предотвращения потерь данных пока недоступны для службы хранилища Azure или ресурсов для вычислений. Установите сторонние решения, если это необходимо для обеспечения соответствия требованиям.
Корпорация Майкрософт управляет базовой платформой и считает все содержимое клиента конфиденциальным и имеет большую длину, чтобы защититься от потери данных и доступности клиентов. Чтобы обеспечить безопасность данных клиентов в Azure, корпорация Майкрософт реализовала и поддерживает набор надежных элементов управления и возможностей защиты данных.

- [Общие сведения о защите данных клиентов в Azure](../security/fundamentals/protection-customer-data.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="48-encrypt-sensitive-information-at-rest"></a>4.8. Шифрование конфиденциальной информации при хранении

**Руководство**. два основных типа хранилища, предоставляемые для томов в службе Azure Kubernetes Service (AKS), поддерживаются дисками Azure или службой файлов Azure. Оба типа хранилища используют Azure Шифрование службы хранилища (SSE), который шифрует неактивных данных для повышения безопасности. По умолчанию данные шифруются с помощью ключей, управляемых корпорацией Майкрософт.

Шифрование неактивных данных с помощью управляемых клиентом ключей доступно для шифрования дисков операционной системы и диска с данными в кластерах AKS для дополнительного контроля над ключами шифрования. Клиенты ответственны за действия по управлению ключами, такие как резервное копирование и вращение ключа. Сейчас диски нельзя шифровать с помощью шифрования дисков Azure на уровне узлов Службы контейнеров Azure.

- [Рекомендации по хранению и резервному копированию в Службе Azure Kubernetes (AKS)](operator-best-practices-storage.md)

- [Перенесите собственные ключи (BYOK) с помощью дисков Azure в службе Kubernetes Azure (AKS)](azure-disk-customer-managed-keys.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**. Совмещаемая блокировка

### <a name="49-log-and-alert-on-changes-to-critical-azure-resources"></a>4.9. Включение в журнал и создание оповещений по изменениям критических ресурсов Azure

**Руководство**. Использование Azure Monitor для контейнеров для мониторинга производительности рабочих нагрузок контейнера, развернутых в управляемых кластерах Kubernetes, размещенных в службе Kubernetes Azure (AKS). 

Настройте оповещения для упреждающего создания уведомлений или журналов, когда загрузка ЦП и памяти на узлах или контейнерах превышает заданные пороговые значения или когда состояние работоспособности в кластере находится в свертке работоспособности инфраструктуры или узлов. 

Используйте журнал действий Azure для мониторинга кластеров AKS и связанных ресурсов на высоком уровне. Интегрируйтесь с Prometheus для просмотра метрик приложений и рабочих нагрузок, собираемых из узлов, и Kubernetes с помощью запросов для создания настраиваемых оповещений, панелей мониторинга и подробного анализа.

- [Общие сведения о Azure Monitor контейнерах](../azure-monitor/insights/container-insights-overview.md)

- [Включение Azure Monitor для контейнеров](../azure-monitor/insights/container-insights-onboard.md)

- [Как просматривать и извлекать события журнала действий Azure](../azure-monitor/platform/activity-log.md#view-the-activity-log)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

## <a name="vulnerability-management"></a>управление уязвимостями;

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: Управление уязвимостью](../security/benchmarks/security-control-vulnerability-management.md).*

### <a name="51-run-automated-vulnerability-scanning-tools"></a>5.1. Выполнение автоматизированных средства анализа уязвимостей

**Руководство**. Использование центра безопасности для мониторинга реестра контейнеров Azure, в том числе экземпляров Azure Kubernetes Service (AKS), для уязвимостей. Включите пакет реестров контейнеров в центре безопасности, чтобы обеспечить готовность центра безопасности к сканированию образов, помещаемых в реестр.

Получайте уведомления на панели мониторинга центра безопасности при обнаружении проблем в центре безопасности при сканировании образа с помощью Qualys. Функция пакета реестров контейнеров обеспечивает более глубокую видимость уязвимостей образов, используемых в реестре на основе Azure Resource Manager. 

Используйте центр безопасности для получения рекомендаций по каждой уязвимости. Эти рекомендации включают классификацию серьезности и рекомендации по исправлению. 

- [Рекомендации по управлению и защите образов контейнеров в Службе Azure Kubernetes (AKS)](../security-center/defender-for-container-registries-introduction.md)

- [Рекомендации по управлению образами и безопасности образов контейнеров в AKS](operator-best-practices-container-image-management.md)

- [Общие сведения об интеграции реестра контейнеров с центром безопасности Azure](../security-center/defender-for-container-registries-introduction.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="52-deploy-automated-operating-system-patch-management-solution"></a>5.2. Развертывание автоматизированного решения для управления исправлениями операционной системы

**Руководство**. обновления безопасности автоматически применяются к узлам Linux для защиты кластеров Azure Kubernetes Service (AKS) клиента. Учитываются такие обновления, как исправления безопасности для операционной системы и обновления ядра. 

Обратите внимание, что процесс обновления узлов Windows Server отличается от узлов под управлением Linux, так как узлы Windows Server не получают ежедневных обновлений. Вместо этого клиентам необходимо выполнить обновление пулов узлов Windows Server в их кластерах AKS, которые развертывают новые узлы с последним образом основного образа и исправлений сервера базового Window с помощью панели управления Azure или Azure CLI. Эти обновления содержат улучшения безопасности или функциональности для AKS.

- [Узнайте, как обновления применяются к узлам кластера AKS под управлением Linux.](node-updates-kured.md)

- [Обновление пула узлов AKS для кластеров AKS, использующих узлы Windows Server](use-multiple-node-pools.md#upgrade-a-node-pool)

- [Обновление образа узла службы Azure Kubernetes Service (AKS)](node-image-upgrade.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="53-deploy-an-automated-patch-management-solution-for-third-party-software-titles"></a>5,3: Развертывание автоматизированного решения по управлению исправлениями для программ сторонних разработчиков

**Рекомендации**. реализуйте ручной процесс, чтобы убедиться, что сторонние приложения узла кластера Azure Kubernetes Service (AKS) остаются исправленными в течение времени существования кластера. Для этого может потребоваться включить автоматическое обновление, отслеживать узлы или выполнять периодические перезагрузки.

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="54-compare-back-to-back-vulnerability-scans"></a>5.4. Сравнение проверок смежных уязвимостей

**Руководство**. Экспорт результатов проверки центра безопасности с одинаковыми интервалами и сравнение результатов для проверки того, что уязвимости исправлены. 

Используйте командлет PowerShell "Get-Азсекурититаск", чтобы автоматизировать получение сведений о задачах безопасности, которые центр безопасности рекомендует выполнить, чтобы усилить результаты проверки уязвимостей в области безопасности и исправления.

- [Использование PowerShell для просмотра уязвимостей, обнаруженных центром безопасности Azure](/powershell/module/az.security/get-azsecuritytask?view=azps-3.3.0)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="55-use-a-risk-rating-process-to-prioritize-the-remediation-of-discovered-vulnerabilities"></a>5.5. Использование процесса оценки рисков для определения приоритета в устранении обнаруженных уязвимостей

**Рекомендации**. Используйте уровень серьезности, предоставляемый центром безопасности, для определения приоритета исправления уязвимостей. 

Используйте общую систему оценки уязвимостей (CVSS) (или другие системы оценки, предоставляемые средством сканирования), если используется встроенное средство оценки уязвимостей (например, Qualys или Rapid7, предлагаемое Azure).

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

## <a name="inventory-and-asset-management"></a>Инвентаризация и управление ресурсами

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: Инвентаризация и управление активами](../security/benchmarks/security-control-inventory-asset-management.md).*

### <a name="61-use-automated-asset-discovery-solution"></a>6,1. Использование автоматизированного решения для обнаружения ресурсов

**Руководство**. Использование графа ресурсов Azure для запроса или обнаружения всех ресурсов (таких как вычисление, хранение, сеть и т. д.) в подписках. Убедитесь, что у вас есть соответствующие разрешения (на чтение) в клиенте и вы можете перечислить все подписки Azure, а также ресурсы в ваших подписках.

Хотя классические ресурсы Azure могут быть обнаружены с помощью графа ресурсов, настоятельно рекомендуется создавать и использовать ресурсы на основе Azure Resource Manager.

- [Как создавать запросы с помощью Azure Graph](../governance/resource-graph/first-query-portal.md)

- [Как просматривать подписки Azure](/powershell/module/az.accounts/get-azsubscription?view=azps-3.0.0)

- [Общие сведения об Azure RBAC](../role-based-access-control/overview.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="62-maintain-asset-metadata"></a>6.2. Ведение метаданных активов

**Руководство**. применение тегов к ресурсам Azure с помощью метаданных для логической организации их в таксономию.

- [Создание и использование тегов](../azure-resource-manager/management/tag-resources.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="63-delete-unauthorized-azure-resources"></a>6.3. Удаление неавторизованных ресурсов Azure

**Руководство**. Использование тегов, групп управления и отдельных подписок (при необходимости) для Организации и мониторинга ресурсов. 

Примените таинтс, метки или теги при создании пула узлов Azure Kubernetes Service (AKS). Все узлы в этом пуле узлов будут также наследовать эту таинт, метку или тег.

Таинтс, метки или теги можно использовать для регулярной согласования запасов и своевременного удаления неавторизованных ресурсов из подписок.

- [Создание дополнительных подписок Azure](../cost-management-billing/manage/create-subscription.md)

- [Создание групп управления](../governance/management-groups/create-management-group-portal.md)

- [Создание тегов и пользовательские теги](../azure-resource-manager/management/tag-resources.md)

- [Управляемые кластеры — обновление тегов](/rest/api/aks/managedclusters/updatetags)

- [Укажите таинт, метку или тег для пула узлов](use-multiple-node-pools.md#specify-a-taint-label-or-tag-for-a-node-pool)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="64-define-and-maintain-an-inventory-of-approved-azure-resources"></a>6,4: определение и обслуживание инвентаризации утвержденных ресурсов Azure

**Руководство**. Определение списка утвержденных ресурсов Azure и утвержденного программного обеспечения для вычислений ресурсов на основе бизнес-потребностей Организации.

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="65-monitor-for-unapproved-azure-resources"></a>6.5. Отслеживание неутвержденных ресурсов Azure

**Руководство**. Использование политики Azure для ограничения типа ресурсов, которые могут быть созданы в клиентских подписках, с помощью следующих встроенных определений политик:
-   Недопустимые типы ресурсов 

-   Допустимые типы ресурсов

Используйте граф ресурсов Azure для запроса или обнаружения ресурсов в ваших подписках. Убедитесь, что все ресурсы Azure, представленные в окружении, утверждены в соответствии с бизнес-требованиями Организации.

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

- [Как создавать запросы с помощью Azure Graph](../governance/resource-graph/first-query-portal.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="66-monitor-for-unapproved-software-applications-within-compute-resources"></a>6.6. Отслеживание неутвержденных программных приложений в рамках ресурсов вычислений

**Руководство**. Использование функций службы автоматизации Azure отслеживание изменений и инвентаризации для поиска программного обеспечения, установленного в вашей среде. 

Собирайте и просматривайте запасы на программное обеспечение, файлы, управляющие программы Linux, службы Windows и разделы реестра Windows на компьютерах и отслеживайте неодобренные программные приложения. 

Следите за конфигурациями компьютеров, чтобы помочь в выявлении проблем с работоспособностью в среде и лучше понять состояние компьютеров.

- [Включение инвентаризации виртуальных машин Azure](../automation/automation-tutorial-installed-software.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="67-remove-unapproved-azure-resources-and-software-applications"></a>6.7. Удаление неутвержденных ресурсов Azure и программных приложений

**Руководство**. Использование функций службы автоматизации Azure отслеживание изменений и инвентаризации для поиска программного обеспечения, установленного в вашей среде. 

Собирайте и просматривайте запасы на программное обеспечение, файлы, управляющие программы Linux, службы Windows и разделы реестра Windows на компьютерах и отслеживайте неодобренные программные приложения. 

Следите за конфигурациями компьютеров, чтобы помочь в выявлении проблем с работоспособностью в среде и лучше понять состояние компьютеров.

- [Включение инвентаризации виртуальных машин Azure](../automation/automation-tutorial-installed-software.md)

- [Использование мониторинга целостности файлов](../security-center/security-center-file-integrity-monitoring.md)

- [Общие сведения об Azure Отслеживание изменений](../automation/change-tracking/overview.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="68-use-only-approved-applications"></a>6.8. Использование только утвержденных приложений

**Руководство**. Использование функций службы автоматизации Azure отслеживание изменений и инвентаризации для поиска программного обеспечения, установленного в вашей среде. 

Собирайте и просматривайте запасы на программное обеспечение, файлы, управляющие программы Linux, службы Windows и разделы реестра Windows на компьютерах и отслеживайте неодобренные программные приложения. 

Следите за конфигурациями компьютеров, чтобы помочь в выявлении проблем с работоспособностью в среде и лучше понять состояние компьютеров.

Включите адаптивный анализ приложений в центре безопасности для приложений, которые существуют в вашей среде.

- [Включение инвентаризации виртуальных машин Azure](../automation/automation-tutorial-installed-software.md)

 
Как использовать адаптивное приложение центра безопасности Azure
- [Элементы управления](../security-center/security-center-adaptive-application.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="69-use-only-approved-azure-services"></a>6.9. Использование только утвержденных служб Azure

**Руководство**. Использование политики Azure для ограничения типа ресурсов, которые могут быть созданы в клиентских подписках, с помощью следующих встроенных определений политик:

- Недопустимые типы ресурсов

- Допустимые типы ресурсов

Используйте граф ресурсов Azure для запроса или обнаружения ресурсов в ваших подписках. Убедитесь в том, что все ресурсы Azure, представленные в среде, утверждены.

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

- [Как отказаться от определенного типа ресурса с помощью Политики Azure](../governance/policy/samples/index.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="610-maintain-an-inventory-of-approved-software-titles"></a>6,10: ведение инвентаризации утвержденных наименований программного обеспечения

**Руководство**. Использование политики Azure для ограничения типа ресурсов, которые могут быть созданы в подписках с помощью встроенных определений политик.

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="611-limit-users-ability-to-interact-with-azure-resource-manager"></a>6,11: ограничьте возможность пользователей работать с Azure Resource Manager

**Руководство**. Используйте условный доступ Azure, чтобы ограничить возможность пользователей взаимодействовать с Azure Resource Manager путем настройки "Блокировать доступ" для приложения "Управление Microsoft Azure".
- [Как настроить условный доступ для блокировки доступа к Azure Resource Manager](../role-based-access-control/conditional-access-azure-management.md)

**Мониторинг Центра безопасности Azure**. Неприменимо

**Ответственность**: Customer

### <a name="612-limit-users-ability-to-execute-scripts-in-compute-resources"></a>6,12: ограничьте возможность пользователей выполнять сценарии в ресурсах вычислений

**Руководство**. сама служба Azure Kubernetes Service (AKS) не предоставляет решение для управления удостоверениями, в котором хранятся обычные учетные записи пользователей и пароли. Вместо этого используйте Azure Active Directory (Azure AD) в качестве интегрированного решения для идентификации кластеров AKS. 

Предоставьте пользователям или группам доступ к ресурсам Kubernetes в пространстве имен или в кластере с помощью интеграции Azure AD. 

Используйте модуль Azure AD PowerShell для выполнения нерегламентированных запросов, чтобы обнаружить учетные записи, являющиеся членами административных групп AKS, и использовать их для регулярной согласования доступа. Используйте Azure CLI для таких операций, как "получить учетные данные доступа к управляемому кластеру Kubernetes. Реализуйте рекомендации по управлению удостоверениями и доступом в центре безопасности.

- [Управление AKS с помощью Azure CLI](/cli/azure/aks?view=azure-cli-latest)

- [Общие сведения об интеграции AKS и Azure AD](concepts-identity.md)

- [Как интегрировать AKS с Azure AD](./azure-ad-integration-cli.md)

- [Как получить роль каталога в Azure AD с помощью PowerShell](/powershell/module/azuread/get-azureaddirectoryrole?view=azureadps-2.0)

- [Как получить членов роли каталога в Azure AD с помощью PowerShell](/powershell/module/azuread/get-azureaddirectoryrolemember?view=azureadps-2.0)

- [Мониторинг удостоверений и доступа с помощью центра безопасности Azure](../security-center/security-center-identity-access.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="613-physically-or-logically-segregate-high-risk-applications"></a>6.13. Физическое или логическое разделение приложений с высоким риском

**Руководство**. Использование функций Azure Kubernetes Service (AKS) для логической изоляции команд и рабочих нагрузок в одном кластере с минимальным количеством привилегий, ограниченных ресурсами, необходимыми для каждой команды. 

Реализуйте пространство имен в Kubernetes для создания границы логической изоляции. Используйте псевдонимы политик Azure в пространстве имен Microsoft. ContainerService, чтобы создать настраиваемые политики для аудита или принудительного применения конфигурации экземпляров службы Azure Kubernetes (AKS). 

Изучите и реализуйте дополнительные функции Kubernetes и рекомендации по изоляции и мультитенантность, включая планирование, сеть, проверку подлинности, авторизацию и контейнеры. Кроме того, используйте отдельные подписки и группы управления для разработки, тестирования и производства. Разделяйте кластеры AKS с помощью виртуальных сетей, подсетей, которые помечаются соответствующим образом, и защищаются брандмауэром веб-приложения (WAF).

- [Дополнительные сведения о рекомендациях по изоляции кластера в AKS](operator-best-practices-cluster-isolation.md)

- [Создание дополнительных подписок Azure](../cost-management-billing/manage/create-subscription.md)

- [Создание групп управления](../governance/management-groups/create-management-group-portal.md)

- [Рекомендации по сетевому подключению и безопасности в AKS](operator-best-practices-network.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

## <a name="secure-configuration"></a>Безопасная конфигурация

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: безопасная конфигурация](../security/benchmarks/security-control-secure-configuration.md).*

### <a name="71-establish-secure-configurations-for-all-azure-resources"></a>7.1. Установка безопасных конфигураций для всех ресурсов Azure

**Руководство**. Использование псевдонимов политик Azure в пространстве имен Microsoft. ContainerService для создания настраиваемых политик для аудита или принудительного применения конфигурации экземпляров службы Azure KUBERNETES (AKS). Используйте встроенные определения политик Azure.

Примерами встроенных определений политик для AKS являются:

• Принудительное применение HTTPS в кластере Kubernetes

• Допустимые диапазоны IP-адресов должны быть определены в Kubernetes Services

• Управление доступом на основе ролей (RBAC) следует использовать в службах Kubernetes Services

• Убедитесь, что в кластере Kubernetes разрешены только образы контейнеров

Экспортируйте шаблон конфигурации AKS в нотация объектов JavaScript (JSON) с Azure Resource Manager. Периодически просматривайте его, чтобы убедиться, что эти конфигурации соответствуют требованиям безопасности вашей организации. Используйте рекомендации из центра безопасности Azure в качестве защищенного шаблона базовой конфигурации для ресурсов Azure. 

- [Настройка политик безопасности AKS Pod и управление ими](use-pod-security-policies.md)

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="72-establish-secure-operating-system-configurations"></a>7.2. Сохранение безопасных конфигураций для операционных систем

**Руководство**. кластеры кластеров Azure KUBERNETES (AKS) развертываются на виртуальных машинах с оптимизированной для системы безопасности ОС. Операционная система узла включает в нее дополнительные действия по усилению безопасности, что позволяет сократить контактную зону атаки и обеспечить безопасность развертывания контейнеров. 

Azure применяет ежедневные исправления (включая исправления безопасности) для AKS узлов виртуальных машин с некоторыми исправлениями, требующими перезагрузки. Клиенты отвечают за планирование перезагрузки узла виртуальной машины AKS по мере необходимости. 

- [Усиление безопасности для операционной системы узла агента AKS](security-hardened-vm-host-image.md)

- [Общие сведения о усилении безопасности в узлах виртуальных машин AKS](security-hardened-vm-host-image.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Совмещаемая блокировка

### <a name="73-maintain-secure-azure-resource-configurations"></a>7.3. Сохранение безопасных конфигураций для ресурсов Azure

**Руководство**. Защита кластера Azure Kubernetes Service (AKS) с помощью политик безопасности Pod.  Ограничьте возможности планирования модулей для повышения безопасности кластера. 

Модули Pod, которые запрашивают недопустимые ресурсы, не могут выполняться в кластере AKS. 

Кроме того, используйте политики Azure [Deny] и [развертывание, если не существует] для применения параметров безопасности для ресурсов Azure, относящихся к развертываниям AKS (таких как виртуальные сети, подсети, брандмауэры Azure, учетные записи хранения и т. д.). 

Создайте пользовательские определения политик Azure с помощью псевдонимов из следующих пространств имен: 

• Microsoft. ContainerService

• Microsoft. Network

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

- [Сведения о действии Политик Azure](../governance/policy/concepts/effects.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="74-maintain-secure-operating-system-configurations"></a>7.4. Сохранение безопасных конфигураций для операционных систем

**Руководство**. кластеры Azure Kubernetes Service (AKS) развертываются на виртуальных машинах с оптимизированной для системы безопасности ОС. Операционная система узла включает в нее дополнительные действия по усилению безопасности, что позволяет сократить контактную зону атаки и обеспечить безопасность развертывания контейнеров. 

См. список центров для элементов управления Internet Security (CIS), встроенных в ОС узла.  

- [Усиление безопасности для операционной системы узла агента AKS](security-hardened-vm-host-image.md)

- [Изучение конфигурации состояния кластеров AKS](concepts-clusters-workloads.md#control-plane)

- [Общие сведения о усилении безопасности в узлах виртуальных машин AKS](security-hardened-vm-host-image.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="75-securely-store-configuration-of-azure-resources"></a>7.5. Безопасное хранение конфигурации ресурсов Azure

**Руководство**. Использование Azure Repos для безопасного хранения конфигураций и управления ими, если используются пользовательские определения политик Azure. Экспортируйте шаблон конфигурации службы Azure Kubernetes Service (AKS) в нотация объектов JavaScript (JSON) с Azure Resource Manager. Периодически просматривайте его, чтобы убедиться, что конфигурации соответствуют требованиям безопасности вашей организации. 

Реализуйте сторонние решения, такие как terraform, чтобы создать файл конфигурации, объявляющий ресурсы для кластера Kubernetes. Вы можете защитить развертывание AKS, выполнив рекомендации по обеспечению безопасности и сохранить конфигурацию как код в безопасном месте.

- [Определение кластера Kubernetes](/azure/developer/terraform/create-k8s-cluster-with-tf-and-aks#define-a-kubernetes-cluster)

Усиление безопасности для операционной системы узла агента AKS

security-hardened-vm-host-image.md

- [Как хранить код в Azure DevOps](/azure/devops/repos/git/gitworkflow?view=azure-devops)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="76-securely-store-custom-operating-system-images"></a>7.6. Безопасное хранение пользовательских образов операционной системы

**Руководство**: неприменимо к службе Azure KUBERNETES (AKS). AKS предоставляет по умолчанию операционную систему сервера, оптимизированную для системы безопасности. Нет текущего варианта выбора альтернативной или настраиваемой операционной системы.

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="77-deploy-configuration-management-tools-for-azure-resources"></a>7,7: развертывание средств управления конфигурацией для ресурсов Azure

**Руководство**. Использование политики Azure для размещения ограничений на тип ресурсов, которые могут создаваться в подписках с помощью встроенных определений политик, а также псевдонимов политик Azure в пространстве имен Microsoft. ContainerService. 

Создание настраиваемых политик для аудита и принудительное применение конфигураций системы. Разработка процесса и конвейера для управления исключениями политик.

- [Настройка Политики Azure и управление ею](../governance/policy/tutorials/create-and-manage.md)

- [Использование псевдонимов](../governance/policy/concepts/definition-structure.md#aliases)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="78-deploy-configuration-management-tools-for-operating-systems"></a>7,8: развертывание средств управления конфигурацией для операционных систем

**Руководство**. кластеры Azure Kubernetes Service (AKS) развертываются на виртуальных машинах с оптимизированной для системы безопасности ОС. Операционная система узла включает в нее дополнительные действия по усилению безопасности, что позволяет сократить контактную зону атаки и обеспечить безопасность развертывания контейнеров. 

См. список центров для элементов управления Internet Security (CIS), встроенных в узлы AKS.  

- [Усиление безопасности для операционной системы узла агента AKS](security-hardened-vm-host-image.md)

- [Общие сведения о усилении безопасности в узлах виртуальных машин AKS](security-hardened-vm-host-image.md)

- [Изучение конфигурации состояния кластеров AKS](concepts-clusters-workloads.md#control-plane)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="79-implement-automated-configuration-monitoring-for-azure-resources"></a>7,9. Реализация автоматического мониторинга конфигурации для ресурсов Azure

**Руководство**. Использование центра безопасности для выполнения проверок базовых ресурсов, связанных с развертываниями службы Azure Kubernetes Service (AKS). Примеры ресурсов включают в себя, но не ограничиваются самим кластером AKS, виртуальную сеть, в которой развернут кластер AKS, учетную запись хранения Azure, используемую для отслеживания состояния terraform, или Azure Key Vault экземпляры, используемые для ключей шифрования в ОС и дисках данных кластера AKS.

- [Как исправить рекомендации в центре безопасности Azure](../security-center/security-center-remediate-recommendations.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="710-implement-automated-configuration-monitoring-for-operating-systems"></a>7.10. Реализация автоматизированного мониторинга конфигурации для операционных систем

**Руководство**. использование рекомендаций по контейнерам центра безопасности в &amp; разделе "приложения для вычислений" для выполнения проверок базовых показателей для кластеров службы Azure KUBERNETES Service (AKS). Получайте уведомления на панели мониторинга центра безопасности при обнаружении проблем конфигурации или уязвимостей. Это требует включения дополнительного набора реестров контейнеров, который позволяет центру безопасности сканировать образ.  

- [Общие сведения о рекомендациях центра безопасности Azure в отношении контейнеров](../security-center/container-security.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="711-manage-azure-secrets-securely"></a>7.11. Безопасное управление секретами Azure

**Руководство**. Интеграция Azure Key Vault с кластером Azure Kubernetes Service (AKS) с помощью диска флексволуме. Используйте Azure Key Vault для хранения и регулярного смены секретов, таких как учетные данные, ключи учетной записи хранения или сертификаты. Драйвер FlexVolume позволяет кластеру Службы контейнеров собственными средствами получать учетные данные из Key Vault и безопасно предоставлять их только запрашивающей группе pod. Используйте управляемое удостоверение Pod, чтобы запросить доступ к Key Vault и получить необходимые учетные данные с помощью драйвера Флексволуме. Убедитесь, что включено обратимое удаление в Azure Key Vault. 

Ограничьте раскрытие учетных данных, не определяя учетные данные в коде приложения. 

Избегайте использования фиксированных или общих учетных данных. 

- [Основные понятия безопасности для приложений и кластеров в Службе Azure Kubernetes (AKS)](concepts-security.md)

- [Использование Key Vault с кластером AKS](developer-best-practices-pod-security.md#limit-credential-exposure)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="712-manage-identities-securely-and-automatically"></a>7.12. Безопасное и автоматическое управление удостоверениями

**Рекомендации**. не определяйте учетные данные в коде приложения в качестве рекомендации по обеспечению безопасности. Используйте управляемые удостоверения для ресурсов Azure, чтобы позволить Pod пройти проверку подлинности для любой службы в Azure, которая поддерживает ее, включая Azure Key Vault. Модулю назначается удостоверение Azure для проверки подлинности в Azure Active Directory (Azure AD) и получения цифрового маркера, который можно представить другим службам Azure, которые проверяют, имеет ли модуль Pod права на доступ к службе и выполняют необходимые действия. 

Обратите внимание, что управляемые удостоверения Pod предназначены для использования только с ОС Linux и образами для образов контейнеров. Подготавливайте Azure Key Vault для хранения и получения цифровых ключей и учетных данных. Такие ключи, как те, которые используются для шифрования дисков ОС, AKS данные кластера могут храниться в Azure Key Vault.

Субъекты-службы также можно использовать в кластерах AKS. Однако в конечном итоге кластеры, использующие субъекты-службы, могут достичь состояния, в котором необходимо обновить субъект-службу, чтобы обеспечить работу кластера. Управление субъектами-службами повышает сложность, поэтому вместо этого проще использовать управляемые удостоверения. Те же требования к разрешениям применяются и к субъектам-службам, и к управляемым удостоверениям.

- [Общие сведения об управляемых удостоверениях и Key Vault с помощью службы Kubernetes Azure (AKS)](developer-best-practices-pod-security.md#limit-credential-exposure)

- [Удостоверение группы pod Azure Active Directory](https://github.com/Azure/aad-pod-identity)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="713-eliminate-unintended-credential-exposure"></a>7.13. Устранение непреднамеренного раскрытия учетных данных

**Руководство**. Реализуйте сканер учетных данных для обнаружения учетных данных в коде. Сканер учетных данных также способствует перемещению обнаруженных учетных данных в более безопасные расположения, например Azure Key Vault с рекомендациями.

Ограничьте раскрытие учетных данных, не определяя учетные данные в коде приложения. и Избегайте использования общих учетных данных. Azure Key Vault следует использовать для хранения и извлечения цифровых ключей и учетных данных. Используйте управляемые удостоверения ресурсов Azure, чтобы позволить группе pod запрашивать доступ к другим ресурсам. 

- [Как настроить сканер учетных данных](https://secdevtools.azurewebsites.net/helpcredscan.html)

- [Рекомендации для разработчиков по безопасности Pod](developer-best-practices-pod-security.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

## <a name="malware-defense"></a>Защита от вредоносных программ

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: защита от вредоносных программ](../security/benchmarks/security-control-malware-defense.md).*

### <a name="81-use-centrally-managed-antimalware-software"></a>8,1. Использование централизованно управляемого антивредоносного по

**Руководство**. AKS управляет жизненным циклом и операциями узлов агентов от вашего имени. изменение ресурсов IaaS, связанных с узлами агентов, не поддерживается. Тем не менее для узлов Linux можно использовать наборы управляющих программ для установки пользовательского по, например решения для защиты от вредоносных программ.

- [Справочное руководство по оповещениям системы безопасности](../security-center/alerts-reference.md)

- [Оповещения для контейнеров — кластеры службы Kubernetes Azure](../security-center/alerts-reference.md#alerts-akscluster)

- [AKS общей ответственности и наборов управляющих программ](support-policies.md#shared-responsibility)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Совмещаемая блокировка

### <a name="82-pre-scan-files-to-be-uploaded-to-non-compute-azure-resources"></a>8.2. Предварительная проверка файлов для отправки в ресурсы Azure, не являющиеся вычислительными

**Руководство**. Предварительная проверка всех файлов, передаваемых в ресурсы AKS. Обнаружение угроз в центре безопасности для служб данных используется для обнаружения вредоносных программ, переданных в учетные записи хранения, при использовании учетной записи хранения Azure в качестве хранилища данных или для отслеживания состояния terraform для кластера AKS. 

- [Сведения об обнаружении угроз для служб данных в центре безопасности Azure](../security-center/azure-defender.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="83-ensure-antimalware-software-and-signatures-are-updated"></a>8,3: Убедитесь, что антивредоносное по и подписи обновлены

**Руководство**. AKS управляет жизненным циклом и операциями узлов агентов от вашего имени. изменение ресурсов IaaS, связанных с узлами агентов, не поддерживается. Тем не менее для узлов Linux можно использовать наборы управляющих программ для установки пользовательского по, например решения для защиты от вредоносных программ.

- [Справочное руководство по оповещениям системы безопасности](../security-center/alerts-reference.md)

- [Оповещения для контейнеров — кластеры службы Kubernetes Azure](../security-center/alerts-reference.md#alerts-akscluster)

- [AKS общей ответственности и наборов управляющих программ](support-policies.md#shared-responsibility)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Совмещаемая блокировка

## <a name="data-recovery"></a>Восстановление данных

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: восстановление данных](../security/benchmarks/security-control-data-recovery.md).*

### <a name="91-ensure-regular-automated-back-ups"></a>9.1. Обеспечение регулярного автоматического резервного копирования

**Руководство**. Резервное копирование данных с помощью соответствующего средства для хранилища, такого как велеро, которое позволяет создавать резервные копии постоянных томов вместе с дополнительными ресурсами кластера и конфигурациями. Периодически проверяйте целостность и безопасность этих резервных копий. 

Перед резервным копированием удалите состояние из приложений. В тех случаях, когда это невозможно, создайте резервную копию данных из постоянных томов и регулярно протестируйте операции восстановления, чтобы проверить целостность данных и требуемые процессы.

- [Рекомендации по хранению и резервному копированию в AKS](operator-best-practices-storage.md)

- [Рекомендации по обеспечению непрерывности бизнес-процессов и аварийному восстановлению в AKS](operator-best-practices-multi-region.md)

- [Общие сведения о Azure Site Recovery](../site-recovery/site-recovery-overview.md)

- [Как настроить Велеро в Azure](https://github.com/vmware-tanzu/velero-plugin-for-microsoft-azure/blob/master/README.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="92-perform-complete-system-backups-and-backup-any-customer-managed-keys"></a>9,2: выполните полное резервное копирование системы и резервное копирование ключей, управляемых клиентом

**Руководство**. Резервное копирование данных с помощью соответствующего средства для хранилища, такого как велеро, которое позволяет создавать резервные копии постоянных томов вместе с дополнительными ресурсами кластера и конфигурациями. 

Выполняйте регулярное автоматическое резервное копирование Key Vault сертификатов, ключей, управляемых учетных записей хранения и секретов с помощью команд PowerShell. 

Пример:

Backup-AzKeyVaultCertificate Backup-AzKeyVaultKey Backup-AzKeyVaultManagedStorageAccount Backup-AzKeyVaultSecret

- [Резервное копирование Key Vault сертификатов](/powershell/module/azurerm.keyvault/backup-azurekeyvaultcertificate)

- [Резервное копирование ключей Key Vault](/powershell/module/azurerm.keyvault/backup-azurekeyvaultkey)

- [Резервное копирование Key Vault управляемых учетных записей хранения](/powershell/module/az.keyvault/add-azkeyvaultmanagedstorageaccount)

- [Резервное копирование Key Vault секретов](/powershell/module/azurerm.keyvault/backup-azurekeyvaultsecret)

- [Включение Azure Backup](../backup/index.yml)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="93-validate-all-backups-including-customer-managed-keys"></a>9,3: Проверьте все резервные копии, включая управляемые клиентом ключи.

**Руководство**. периодическое восстановление данных в велеро Backup. При необходимости протестируйте восстановление в изолированной виртуальной сети.

Периодически выполняйте восстановление данных Key Vault сертификатов, ключей, управляемых учетных записей хранения и секретов с помощью команд PowerShell. 

Пример:

Restore-AzKeyVaultCertificate Restore-AzKeyVaultKey Restore-AzKeyVaultManagedStorageAccount Restore-AzKeyVaultSecret

- [Восстановление сертификатов Key Vault](/powershell/module/azurerm.keyvault/restore-azurekeyvaultcertificate?view=azurermps-6.13.0)

- [Восстановление ключей Key Vault](/powershell/module/azurerm.keyvault/restore-azurekeyvaultkey?view=azurermps-6.13.0)

- [Восстановление Key Vault управляемых учетных записей хранения](/powershell/module/az.keyvault/backup-azkeyvaultmanagedstorageaccount)

- [Восстановление секретов Key Vault](/powershell/module/azurerm.keyvault/restore-azurekeyvaultsecret?view=azurermps-6.13.0)

- [Как восстановить файлы из резервной копии виртуальной машины Azure](../backup/backup-azure-restore-files-from-vm.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="94-ensure-protection-of-backups-and-customer-managed-keys"></a>9,4: Обеспечьте защиту резервных копий и ключей, управляемых клиентом

**Руководство**. Резервное копирование данных с помощью соответствующего средства для хранилища, такого как велеро, которое позволяет создавать резервные копии постоянных томов вместе с дополнительными ресурсами кластера и конфигурациями. 

Включите Soft-Delete в Key Vault, чтобы защитить ключи от случайного или вредоносного удаления, если Azure Key Vault используется с для развертываний службы Azure Kubernetes Service (AKS).

- [Общие сведения об Azure Шифрование службы хранилища](../storage/common/storage-service-encryption.md)

- [Как включить обратимое удаление в Key Vault](../storage/blobs/soft-delete-blob-overview.md?tabs=azure-portal)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

## <a name="incident-response"></a>Реагирование на инциденты

*Дополнительные сведения см. в статье о [производительности системы безопасности Azure: реагирование на инциденты](../security/benchmarks/security-control-incident-response.md).*

### <a name="101-create-an-incident-response-guide"></a>10.1. Создание руководства по реагированию на инциденты

**Руководство**. Создайте руководство по реагированию на инциденты для вашей организации. Убедитесь, что имеются письменные планы реагирования на инциденты, которые определяют все действия персонала, а также этапы обработки инцидентов и управления ими для проверки после инцидента.

- [Как настроить автоматизацию рабочих процессов в Центре безопасности Azure](../security-center/security-center-planning-and-operations-guide.md)

- [Руководство по созданию собственного процесса реагирования на инциденты безопасности](https://msrc-blog.microsoft.com/2019/07/01/inside-the-msrc-building-your-own-security-incident-response-process/)

- [Анатомия инцидента Центра Майкрософт по реагированию на угрозы](https://msrc-blog.microsoft.com/2019/07/01/inside-the-msrc-building-your-own-security-incident-response-process/)

- [Клиент также может воспользоваться руководством по обработке инцидентов безопасности компьютера NIST, чтобы помочь в создании собственного плана реагирования на инциденты.](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-61r2.pdf)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="102-create-an-incident-scoring-and-prioritization-procedure"></a>10.2. Создание процедуры оценки инцидента и определения приоритетов

**Руководство**. определение приоритетов предупреждений, которые должны быть исследованы первыми с помощью центра безопасности, которому назначено серьезность. Серьезность основывается на том, насколько уверен Центр безопасности в исследовании или аналитике, используемой для оповещения, а также на уровне достоверности злонамеренности события, приведшего к оповещению.
Четко Пометьте подписки (например, Рабочий, нерабочий) и создайте систему именования, чтобы четко определить и классифицировать ресурсы Azure.

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="103-test-security-response-procedures"></a>10.3. Проверка процедур реагирования на угрозы

**Рекомендации**. Выполните упражнения, чтобы периодически протестировать возможности ваших систем реагировать на угрозы. Ознакомьтесь с публикацией NIST для выявления слабых точек и пробелов и изменения плана по мере необходимости.

- [Руководства по тестированию, обучению и выполнению упражнений для ИТ-планов и возможностей](https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-84.pdf)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="104-provide-security-incident-contact-details-and-configure-alert-notifications-for-security-incidents"></a>10.4. Предоставление контактных сведений и настройка уведомлений по инцидентам безопасности

**Рекомендации**. Корпорация Майкрософт будет использовать информацию об инциденте безопасности для связи с вами, если центр Microsoft Security Response Center (MSRC) обнаружит, что к вашим пользовательским данным был получен незаконный или несанкционированный доступ. Проверьте инциденты после факта обращения, чтобы убедиться, что проблемы устранены.

- [Как задать контакт безопасности Центра безопасности Azure](../security-center/security-center-provide-security-contact-details.md)

**Мониторинг Центра безопасности Azure**: Да

**Ответственность**: Customer

### <a name="105-incorporate-security-alerts-into-your-incident-response-system"></a>10.5. Включение оповещений системы безопасности в систему реагирования на инциденты

**Руководство**. Экспорт оповещений и рекомендаций центра безопасности с помощью функции непрерывного экспорта. Непрерывный экспорт позволяет экспортировать предупреждения и рекомендации как вручную, так и в постоянном, непрерывном режиме. Вы также можете выбрать соединитель данных центра безопасности для потоковой передачи оповещений в Azure Sentinel в соответствии с бизнес-требованиями Организации.

- [Настройка непрерывного экспорта данных](../security-center/continuous-export.md)

- [Как выполнить потоковую передачу оповещений в Azure Sentinel](../sentinel/connect-azure-security-center.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

### <a name="106-automate-the-response-to-security-alerts"></a>10.6. Автоматизация реагирования на оповещения системы безопасности

**Руководство**. Используйте функцию автоматизации рабочих процессов в Центре безопасности Azure для автоматического запуска реагирования с помощью Logic Apps в оповещениях и рекомендациях системы безопасности.

- [Как настроить автоматизацию рабочего процесса и Logic Apps](../security-center/workflow-automation.md)

**Мониторинг Центра безопасности Azure**: Неприменимо

**Ответственность**: Customer

## <a name="penetration-tests-and-red-team-exercises"></a>Тесты на проникновение и попытки нарушения безопасности "красной командой"

*Дополнительные сведения см. в статье [тесты производительности системы безопасности Azure: испытания на проникновение и команды красных команд](../security/benchmarks/security-control-penetration-tests-red-team-exercises.md).*

### <a name="111-conduct-regular-penetration-testing-of-your-azure-resources-and-ensure-remediation-of-all-critical-security-findings"></a>11,1. Проведите регулярное тестирование на проникновение ресурсов Azure и обеспечьте исправление всех критических результатов безопасности.

**Рекомендации**. Следуйте правилам взаимодействия Майкрософт, чтобы убедиться, что тесты на проникновение не нарушают политики Майкрософт: https://www.microsoft.com/msrc/pentest-rules-of-engagement?rtc=1

- [Дополнительные сведения о стратегии корпорации Майкрософт и реализации "красной команды", а также о тестировании на основе уязвимости для облачной инфраструктуры, служб и приложений Майкрософт см. здесь](https://gallery.technet.microsoft.com/Cloud-Red-Teaming-b837392e)

**Мониторинг Центра безопасности Azure**. Неприменимо

**Ответственность**: Совмещаемая блокировка

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь со статьей [Тесты производительности системы безопасности Azure](../security/benchmarks/overview.md).
- Дополнительные сведения о [базовой конфигурации безопасности Azure](../security/benchmarks/security-baselines-overview.md).
