---
title: Защита данных, хранимых в Azure Data Lake Storage 1-го поколения | Документы Майкрософт
description: Узнайте, как защитить данные в Azure Data Lake Storage 1-го поколения с помощью групп и списков контроля доступа.
services: data-lake-store
documentationcenter: ''
author: twooley
manager: mtillman
editor: cgronlun
ms.assetid: ca35e65f-3986-4f1b-bf93-9af6066bb716
ms.service: data-lake-store
ms.devlang: na
ms.topic: how-to
ms.date: 03/26/2018
ms.author: twooley
ms.openlocfilehash: 2dc802166b605ad7853c0910f1bab2a51f1f7297
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91574149"
---
# <a name="securing-data-stored-in-azure-data-lake-storage-gen1"></a>Защита данных, хранимых в Azure Data Lake Storage 1-го поколения
Для защиты данных, хранимых в Azure Data Lake Storage 1-го поколения, необходимо выполнить три шага.  При управлении доступом на основе ролей (RBAC) и при использовании списков управления доступом (ACL) режим доступа должен обеспечивать пользователям и группам безопасности полный доступ к данным.

1. Начните с создания групп безопасности в Azure Active Directory (Azure AD). Эти группы безопасности используются для реализации управления доступом на основе ролей Azure (Azure RBAC) в портал Azure. Дополнительные сведения см. в разделе [Azure RBAC](../role-based-access-control/role-assignments-portal.md).
2. Назначьте группы безопасности Azure AD учетной записи Data Lake Storage 1-го поколения. Это позволит контролировать доступ к учетной записи Data Lake Storage 1-го поколения с портала и операции управления с портала или через API-интерфейсы.
3. Назначьте группы безопасности Azure AD в качестве списков управления доступом (ACL) в файловой системе Data Lake Storage 1-го поколения.
4. Кроме того, вы также можете задать диапазон IP-адресов для клиентов с доступом к данным в Data Lake Storage 1-го поколения.

В этой статье представлены инструкции по использованию портала Azure для выполнения указанных выше задач. Подробные сведения о реализации безопасности на уровне учетной записи и данных в Data Lake Storage 1-го поколения см. в статье [Обеспечение безопасности в Azure Data Lake Storage 1-го поколения](data-lake-store-security-overview.md). Подробные сведения о реализации списков ACL в Data Lake Storage 1-го поколения см. в статье [Обзор контроля доступа в Data Lake Storage 1-го поколения](data-lake-store-access-control.md).

## <a name="prerequisites"></a>Предварительные требования
Перед началом работы с этим учебником необходимо иметь следующее:

* **Подписка Azure**. См. страницу [бесплатной пробной версии Azure](https://azure.microsoft.com/pricing/free-trial/).
* **Учетная запись Data Lake Storage 1-го поколения**. Инструкции по ее созданию см. в статье [Приступая к работе с Azure Data Lake Storage 1-го поколения](data-lake-store-get-started-portal.md)

## <a name="create-security-groups-in-azure-active-directory"></a>Создание групп безопасности в Azure Active Directory
Инструкции по созданию групп безопасности Azure AD и добавлению пользователей в группу см. [в разделе Управление группами безопасности в Azure Active Directory](../active-directory/fundamentals/active-directory-groups-create-azure-portal.md).

> [!NOTE] 
> Добавить пользователей и другие группы в группу в Azure AD можно с помощью портала Azure. Тем не менее, чтобы добавить в группу субъект-службу, используйте [модуль PowerShell Azure AD](../active-directory/users-groups-roles/groups-settings-v2-cmdlets.md).
> 
> ```powershell
> # Get the desired group and service principal and identify the correct object IDs
> Get-AzureADGroup -SearchString "<group name>"
> Get-AzureADServicePrincipal -SearchString "<SPI name>"
> 
> # Add the service principal to the group
> Add-AzureADGroupMember -ObjectId <Group object ID> -RefObjectId <SPI object ID>
> ```
 
## <a name="assign-users-or-security-groups-to-data-lake-storage-gen1-accounts"></a>Назначение пользователей или групп безопасности учетным записям Data Lake Storage 1-го поколения
При назначении пользователей или групп безопасности учетной записи Data Lake Storage 1-го поколения вы контролируете доступ к операциям управления в учетной записи с помощью портала Azure и API Azure Resource Manager Azure. 

1. Откройте учетную запись Data Lake Storage 1-го поколения. На левой панели щелкните **Все ресурсы**, а затем в колонке "Все ресурсы" щелкните имя учетной записи, которой вы хотите назначить пользователя или группу безопасности.

2. В колонке учетной записи Data Lake Storage 1-го поколения щелкните **Управление доступом (IAM)**. В колонке по умолчанию перечисляются владельцы подписки под заголовком "Владелец".
   
    ![Назначение группы безопасности учетной записи Azure Data Lake Storage 1-го поколения](./media/data-lake-store-secure-data/adl.select.user.icon1.png "Назначение группы безопасности учетной записи Azure Data Lake Storage 1-го поколения")

3. В колонке **Управление доступом (IAM)** нажмите кнопку **Добавить**, чтобы открыть колонку **Добавить разрешения**. В колонке **Добавить разрешения** выберите **роль** пользователя или группы. Найдите группу безопасности, созданную ранее в Azure Active Directory, и выберите ее. Если у вас много пользователей и групп, среди которых нужно проводить поиск, воспользуйтесь текстовым полем **Выбрать**, чтобы отфильтровать список по названию группы. 
   
    ![Добавление роли для пользователя](./media/data-lake-store-secure-data/adl.add.user.1.png "Добавление роли для пользователя")
   
    Роли **Владелец** и **Участник** предоставляют доступ ко множеству функций администрирования учетной записи Data Lake. Пользователей, которые будут работать с данными в озере данных, но одновременно нуждаются в информации об учетной записи, можно добавить к роли **Читатель**. Область этих ролей ограничена операциями управления, относящимися к учетной записи Data Lake Storage 1-го поколения.
   
    Разрешения отдельной файловой системы определяют, какие операции с данными могут выполнять пользователи. Таким образом, пользователь с ролью «Читатель» может только просматривать параметры администрирования, связанные с учетной записью, но потенциально может считывать и записывать данные в зависимости от назначенных ему разрешений файловой системы. Разрешения файловой системы Data Lake Storage 1-го поколения описаны в разделе [Назначение группы безопасности в виде ACL в файловой системе Data Lake Storage 1-го поколения](#filepermissions).

    > [!IMPORTANT]
    > Только роль **Владелец** дает автоматический доступ к файловой системе. Для получения любого уровня доступа к папкам и файлам роли **Участник** и **Читатель**, а также все остальные, требуют включения пользователя в список управления доступом.  Роль **Владелец** предоставляет права суперпользователя на доступ к файлам и папкам, которые не могут быть переопределены через ACL. Дополнительные сведения о распространении политик RBAC на доступ к данным см. в разделе [RBAC для управления учетными записями](data-lake-store-security-overview.md#rbac-for-account-management).

4. Если нужно добавить группу или пользователя, не указанные в колонке **Добавить разрешения**, можно пригласить их, вписав их адрес электронной почты в текстовое поле **Выбрать** и выбрав их из списка.
   
    ![Добавление группы безопасности](./media/data-lake-store-secure-data/adl.add.user.2.png "Добавление группы безопасности")
   
5. Выберите команду **Сохранить**. Вы увидите группы безопасности, как показано ниже.
   
    ![Добавлена группа безопасности.](./media/data-lake-store-secure-data/adl.add.user.3.png "Добавлена группа безопасности.")

6. У пользователя или группы безопасности теперь есть доступ к учетной записи Data Lake Storage 1-го поколения. Если вы хотите предоставить доступ конкретным пользователям, их можно добавить в группу безопасности. Аналогично, если требуется отменить доступ для пользователя, его можно удалить из группы безопасности. Можно также назначить несколько групп безопасности для учетной записи. 

## <a name="assign-users-or-security-groups-as-acls-to-the-data-lake-storage-gen1-file-system"></a><a name="filepermissions"></a>Назначение пользователей или групп безопасности в виде списка контроля доступа в файловой системе Data Lake Storage 1-го поколения
Назначая пользователя или группы безопасности в файловой системе Data Lake Storage 1-го поколения, вы устанавливаете контроль доступа к данным, хранимым в Data Lake Storage 1-го поколения.

1. В колонке учетной записи Data Lake Storage 1-го поколения щелкните **Azure Data Explorer**.
   
    ![Просмотр данных с помощью обозреватель данных](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Просмотр данных с помощью обозреватель данных")
2. В колонке **Обозреватель данных** выберите папку, для которой нужно настроить список управления доступом, а затем нажмите кнопку **Доступ**. Чтобы назначить списки управления доступом для файла, выберите файл для предварительного просмотра и щелкните **Доступ** из колонки **Предварительный просмотр файла**.
   
    ![Настройка списков управления доступом в Data Lake Storage 1-го поколения файловой системе](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в Data Lake Storage 1-го поколения файловой системе")
3. В колонке **Доступ** перечислены владельцы и назначенные им права доступа, которые уже назначены администратору. Нажмите кнопку **Добавить**, чтобы добавить дополнительные списки ACL для доступа.
    > [!IMPORTANT]
    > При настройке прав доступа к одному файлу пользователю или группе не обязательно предоставляются права доступа к этому файлу. Необходимо также обеспечить доступность пути к файлу для этого пользователя или группы. Дополнительные сведения и примеры см. в разделе [Типовые сценарии при работе с разрешениями](data-lake-store-access-control.md#common-scenarios-related-to-permissions).
   
    ![Перечисление стандартных и пользовательских сценариев доступа](./media/data-lake-store-secure-data/adl.acl.2.png "Перечисление стандартных и пользовательских сценариев доступа")
   
   * **Владельцы** и **Все остальные** — доступ в стиле UNIX, согласно которому права на чтение, запись и выполнение (rwx) указываются для трех различных классов пользователей: владелец, группа и другие.
   * **Назначенные разрешения** соответствуют спискам управления доступом POSIX, в которых можно задать разрешения для конкретных именованных пользователей или групп, а не только для владельца файла или группы. 
     
     Дополнительные сведения см. в разделе [ACL HDFS](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html#ACLs_Access_Control_Lists). Дополнительные сведения о реализации списков управления доступом в контексте Data Lake Storage 1-го поколения см. в статье [Контроль доступа в Data Lake Storage 1-го поколения](data-lake-store-access-control.md).
4. Щелкните значок **Добавить**, чтобы открыть колонку **Назначение разрешений**. В этой колонке нажмите **Выберите пользователя или группу**, а затем в колонке **Выберите пользователя или группу** найдите созданную ранее группу безопасности в Azure Active Directory. Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы. Выберите группу, которую необходимо добавить, и нажмите кнопку **Выбрать**.
   
    ![Добавление группы](./media/data-lake-store-secure-data/adl.acl.3.png "Добавление группы")
5. Нажмите кнопку **Выберите разрешения**, выберите разрешения, а также любой из вариантов назначения разрешений — рекурсивно или в виде ACL для доступа, ACL по умолчанию или обоих одновременно. Нажмите кнопку **ОК**.
   
    ![Снимок экрана: колонка "Назначение разрешений" с вызываемым параметром "выбрать разрешения" и колонкой "Выбор разрешений" с параметром "ОК".](./media/data-lake-store-secure-data/adl.acl.4.png "Назначение разрешений для группы")
   
    Дополнительные сведения о разрешениях в Data Lake Storage 1-го поколения и списках ACL (по умолчанию и для доступа) см. в статье [Контроль доступа в Data Lake Storage 1-го поколения](data-lake-store-access-control.md).
6. После нажатия кнопки **ОК** в колонке **Назначьте разрешения** добавленная группа и связанные с ней разрешения будут перечислены в колонке **Доступ**.
   
    ![Снимок экрана колонки доступа с вызываемым параметром проектирования данных.](./media/data-lake-store-secure-data/adl.acl.5.png "Назначение разрешений для группы")
   
   > [!IMPORTANT]
   > В текущей версии можно внести до 28 записей в список **Назначенные разрешения**. Если нужно добавить больше 28 пользователей, необходимо создать группы безопасности, добавить в них пользователей и предоставить доступ этим группам безопасности к учетной записи хранения Data Lake Storage 1-го поколения.
   > 
   > 
7. При необходимости можно также изменить права доступа уже после добавления группы. Снимите или установите флажок для каждого типа разрешений (чтение, запись, выполнение) в зависимости от того, нужно ли удалить или назначить разрешение для группы безопасности. Щелкните **Сохранить**, чтобы сохранить изменения, или **Отменить** для их отмены.

## <a name="set-ip-address-range-for-data-access"></a>Назначение диапазона IP-адресов для доступа к данным
Data Lake Storage 1-го поколения позволяет дополнительно блокировать доступ к хранилищу данных на уровне сети. Вы можете включить брандмауэр, указать IP-адрес или определить диапазон IP-адресов для доверенных клиентов. После включения брандмауэра к хранилищу смогут подключаться только клиенты с IP-адресами из определенного диапазона.

![Параметры брандмауэра и доступ по IP-адресу](./media/data-lake-store-secure-data/firewall-ip-access.png "Параметры и IP-адрес брандмауэра")

## <a name="remove-security-groups-for-a-data-lake-storage-gen1-account"></a>Удаление групп безопасности из учетной записи Data Lake Storage 1-го поколения
При удалении групп безопасности из учетных записей Data Lake Storage 1-го поколения изменяется только доступ к операциям управления в учетной записи с помощью API-интерфейсов портал Azure и Azure Resource Manager.  

Права доступа к данным не меняются и по-прежнему управляются ACL.  Исключением являются пользователи и группы с ролью владельцев.  Пользователи и группы, удаленные из роли "Владельцы", больше не являются суперпользователями и их права доступа ограничиваются правами, предоставляемыми списком управления доступом. 

1. В колонке учетной записи Data Lake Storage 1-го поколения щелкните **Управление доступом (IAM)**. 
   
    ![Назначение группы безопасности учетной записи Data Lake Storage 1-го поколения](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи Data Lake Storage 1-го поколения")
2. В колонке **Управление доступом (IAM)** выберите группы безопасности, которые требуется удалить. Щелкните **Удалить**.
   
    ![Удалена группа безопасности.](./media/data-lake-store-secure-data/adl.remove.group.png "Удалена группа безопасности.")

## <a name="remove-security-group-acls-from-a-data-lake-storage-gen1-file-system"></a>Удаление ACL группы безопасности из файловой системы Data Lake Storage 1-го поколения
При удалении списка контроля доступа группы безопасности из файловой системы Data Lake Storage 1-го поколения вы меняете права доступа к данным в учетной записи Data Lake Storage 1-го поколения.

1. В колонке учетной записи Data Lake Storage 1-го поколения щелкните **Azure Data Explorer**.
   
    ![Создание каталогов в учетной записи Data Lake Storage 1-го поколения](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Создание каталогов в учетной записи Data Lake Storage 1-го поколения")
2. В колонке **Обозреватель данных** выберите папку, для которой нужно удалить список управления доступом, а затем нажмите кнопку **Доступ**. Для удаления списка управления доступом, созданного для файла, выберите файл для предварительного просмотра и нажмите кнопку **Доступ** в колонке **Предварительный просмотр файла**. 
   
    ![Настройка списков управления доступом в Data Lake Storage 1-го поколения файловой системе](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в Data Lake Storage 1-го поколения файловой системе")
3. В колонке **Доступ** выберите группу безопасности, которую необходимо удалить. В колонке **Сведения о доступе** щелкните **Удалить**.
   
    ![Снимок экрана колонки доступа с вызываемым параметром проектирования данных и колонкой сведений о доступе с вызываемым параметром remove.](./media/data-lake-store-secure-data/adl.remove.acl.png "Назначение разрешений для группы")

## <a name="see-also"></a>См. также
* [Общие сведения об Azure Data Lake Storage Gen1](data-lake-store-overview.md)
* [Копирование данных из больших двоичных объектов хранилища Azure в хранилище озера данных](data-lake-store-copy-data-azure-storage-blob.md)
* [Начало работы с Azure Data Lake Analytics с помощью портала Azure](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
* [Создание кластеров HDInsight, использующих Data Lake Store, с помощью портала Azure](data-lake-store-hdinsight-hadoop-use-portal.md)
* [Начало работы с Data Lake Storage 1-го поколения с помощью PowerShell](data-lake-store-get-started-powershell.md)
* [Начало работы с Data Lake Storage 1-го поколения с помощью пакета SDK для .NET](data-lake-store-get-started-net-sdk.md)
* [Доступ к журналам диагностики Data Lake Storage 1-го поколения](data-lake-store-diagnostic-logs.md)
