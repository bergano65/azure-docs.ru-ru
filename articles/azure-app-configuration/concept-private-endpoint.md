---
title: Использование частных конечных точек для настройки приложения Azure
description: Защита хранилища конфигураций приложений с помощью частных конечных точек
services: azure-app-configuration
author: lisaguthrie
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 3/12/2020
ms.author: lcozzens
ms.openlocfilehash: f18672b9e3a368a833fc8cba279d748dfe3c2a9e
ms.sourcegitcommit: 512d4d56660f37d5d4c896b2e9666ddcdbaf0c35
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "79366774"
---
# <a name="using-private-endpoints-for-azure-app-configuration"></a>Использование частных конечных точек для настройки приложения Azure

Вы можете использовать [частные конечные точки](../private-link/private-endpoint-overview.md) для настройки приложения Azure, чтобы разрешить клиентам в виртуальной сети (VNet) безопасный доступ к данным по [частной ссылке](../private-link/private-link-overview.md). Частная конечная точка использует IP-адрес из адресного пространства виртуальной сети для хранилища конфигурации приложения. Сетевой трафик между клиентами в виртуальной сети и хранилище конфигураций приложений проходит через виртуальную сеть с помощью частного канала в магистральной сети Майкрософт, что устраняет уязвимость в общедоступном Интернете.

Использование частных конечных точек для хранилища конфигурации приложений позволяет:
- Защитите сведения о конфигурации приложения, настроив брандмауэр так, чтобы он блокировал все подключения к конфигурации приложения в общедоступной конечной точке.
- Повышение уровня безопасности для виртуальной сети, гарантирующая, что данные не поменяют их в виртуальную сеть.
- Безопасное подключение к хранилищу конфигураций приложений из локальных сетей, которые подключаются к виртуальной сети с помощью [VPN](../vpn-gateway/vpn-gateway-about-vpngateways.md) или [которыми](../expressroute/expressroute-locations.md) с частными пиринга.

> [!NOTE]
> Конфигурация приложений Azure позволяет использовать частные конечные точки в качестве общедоступной предварительной версии. Предложения общедоступной предварительной версии позволяют клиентам поэкспериментировать с новыми функциями до официального выпуска.  Функции и службы общедоступной предварительной версии не предназначены для использования в рабочей среде.

## <a name="conceptual-overview"></a>Общие сведения

Частная конечная точка — это специальный сетевой интерфейс для службы Azure в [виртуальной сети](../virtual-network/virtual-networks-overview.md) (VNet). При создании закрытой конечной точки для хранилища конфигурации приложения обеспечивается безопасное подключение между клиентами в виртуальной сети и хранилищем конфигураций. Частной конечной точке назначается IP-адрес из диапазона IP-адресов виртуальной сети. Соединение между частной конечной точкой и хранилищем конфигурации использует защищенную закрытую ссылку.

Приложения в виртуальной сети могут подключаться к хранилищу конфигураций через частную конечную точку, **используя те же строки подключения и механизмы авторизации, которые в противном случае будут использоваться**. Частные конечные точки можно использовать со всеми протоколами, поддерживаемыми хранилищем конфигураций приложений.

В то время как конфигурация приложения не поддерживает конечные точки служб, частные конечные точки можно создавать в подсетях, использующих [конечные точки служб](../virtual-network/virtual-network-service-endpoints-overview.md). Клиенты в подсети могут безопасно подключаться к хранилищу конфигураций приложений с помощью частной конечной точки, а также использовать конечные точки службы для доступа к другим пользователям.  

При создании частной конечной точки для службы в виртуальной сети запрос согласия отправляется на утверждение владельцу учетной записи службы. Если пользователь, запрашивающий создание закрытой конечной точки, также является владельцем учетной записи, этот запрос на согласие автоматически утверждается.

Владельцы учетных записей служб могут управлять запросами на согласие и закрытыми конечными точками с помощью вкладки `Private Endpoints` хранилища конфигураций в [портал Azure](https://portal.azure.com).

### <a name="private-endpoints-for-app-configuration"></a>Частные конечные точки для конфигурации приложения 

При создании частной конечной точки необходимо указать хранилище конфигурации приложений, к которому оно подключается. Если в одной учетной записи есть несколько экземпляров конфигурации приложения, для каждого магазина потребуется отдельная частная конечная точка.

### <a name="connecting-to-private-endpoints"></a>Подключение к частным конечным точкам

Azure полагается на разрешение DNS для маршрутизации подключений из виртуальной сети в хранилище конфигураций по частному каналу. Строки подключения можно быстро найти в портал Azure, выбрав хранилище конфигураций приложений, а затем выбрав **параметры** > **ключи доступа**.  

> [!IMPORTANT]
> Используйте ту же строку подключения для подключения к хранилищу конфигураций приложений с помощью частных конечных точек, как и для общедоступной конечной точки. Не подключайтесь к учетной записи хранения, используя URL-адрес поддомена `privatelink`.

## <a name="dns-changes-for-private-endpoints"></a>Изменения DNS для частных конечных точек

При создании частной конечной точки запись ресурса CNAME DNS для хранилища конфигурации обновляется до псевдонима в поддомене с префиксом `privatelink`. Azure также создает [закрытую зону DNS](../dns/private-dns-overview.md) , соответствующую поддомену `privatelink`, с записями ресурсов DNS a для частных конечных точек.

При разрешении URL-адреса конечной точки за пределами виртуальной сети она разрешается в общедоступную конечную точку хранилища. При разрешении из виртуальной сети, в которой размещается частная конечная точка, URL-адрес конечной точки разрешается в частную конечную точку.

Вы можете управлять доступом клиентов за пределами виртуальной сети через общедоступную конечную точку с помощью службы брандмауэра Azure.

Такой подход обеспечивает доступ к хранилищу **, используя ту же строку подключения** для клиентов в виртуальной сети, где размещаются частные конечные точки, а также клиенты за пределами виртуальной сети.

При использовании пользовательского DNS-сервера в сети клиенты должны иметь возможность разрешить полное доменное имя (FQDN) конечной точки службы IP-адресу частной конечной точки. Настройте DNS-сервер для делегирования поддомена частной ссылки в частную зону DNS для виртуальной сети или настройте записи A для `AppConfigInstanceA.privatelink.azconfig.io` с IP-адресом частной конечной точки.

> [!TIP]
> При использовании пользовательского или локального DNS-сервера следует настроить DNS-сервер для разрешения имени хранилища в поддомене `privatelink` в IP-адрес частной конечной точки. Это можно сделать путем делегирования поддомена `privatelink` в частную зону DNS виртуальной сети или настройки зоны DNS на DNS-сервере и добавления записей A DNS.

## <a name="pricing"></a>Цены

Для включения частных конечных точек требуется хранилище конфигурации приложения [уровня "Стандартный](https://azure.microsoft.com/pricing/details/app-configuration/) ".  Дополнительные сведения о ценах на частную связь см. на странице [цен на частную связь Azure](https://azure.microsoft.com/pricing/details/private-link).

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о создании частной конечной точки для хранилища конфигураций приложений см. в следующих статьях:

- [Создание частной конечной точки с помощью частного центра ссылок в портал Azure](../private-link/create-private-endpoint-portal.md)
- [Создание частной конечной точки с помощью Azure CLI](../private-link/create-private-endpoint-cli.md)
- [Создание частной конечной точки с помощью Azure PowerShell](../private-link/create-private-endpoint-powershell.md)

Узнайте, как настроить DNS-сервер с помощью частных конечных точек:

- [Разрешение имен ресурсов в виртуальных сетях Azure](/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances#name-resolution-that-uses-your-own-dns-server)
- [Конфигурация DNS для частных конечных точек](/azure/private-link/private-endpoint-overview#dns-configuration)
