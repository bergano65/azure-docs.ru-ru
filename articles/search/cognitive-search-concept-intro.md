---
title: Концепции обогащения искусственного интеллекта
titleSuffix: Azure Cognitive Search
description: Извлечение содержимого, обработка на естественном языке (NLP) и обработка изображений используются для создания содержимого с возможностью поиска в Azure Когнитивный поиск индексы с предварительно определенными навыками и пользовательскими алгоритмами искусственного интеллекта.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 06/18/2020
ms.openlocfilehash: 09e7a39a2d97626dd01a00fdaef9bc4d711d557b
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91828091"
---
# <a name="ai-enrichment-in-azure-cognitive-search"></a>Обогащение с помощью ИИ в службе "Когнитивный поиск Azure"

Обогащение искусственного интеллекта — это расширение [индексаторов](search-indexer-overview.md) , которое можно использовать для извлечения текста из изображений, больших двоичных объектов и других неструктурированных источников данных. Обогащение и извлечение делают содержимое более подходящего для поиска в выходных объектах индексатора — в [индексе поиска](search-what-is-an-index.md) или в [хранилище знаний](knowledge-store-concept-intro.md). 

Извлечение и дополнение реализуются с помощью « *автообучение* », присоединенных к конвейеру, управляемому индексатором. Вы можете использовать встроенные навыки корпорации Майкрософт или внедрить внешнюю обработку в создаваемый вами [*Пользовательский навык*](cognitive-search-create-custom-skill-example.md) . Примерами пользовательского навыка может быть пользовательский модуль сущностей или классификатор документов, предназначенный для определенного домена, такого как финансы, научные публикации или медицина.

Встроенные навыки делятся на следующие категории: 

+ Навыки **обработки естественного языка** включают в себя [распознавание сущностей](cognitive-search-skill-entity-recognition.md), [распознавание языка](cognitive-search-skill-language-detection.md), [извлечение ключевых фраз](cognitive-search-skill-keyphrases.md), обработку текста, [определение тональности](cognitive-search-skill-sentiment.md), и [обнаружение персональных данных](cognitive-search-skill-pii-detection.md). С этими навыками неструктурированный текст отображается в индексе в виде полей с возможностью поиска и фильтрации.

+ Навыки **обработки изображений** включают [оптическое распознавание символов (OCR)](cognitive-search-skill-ocr.md) и идентификацию [визуальных функций](cognitive-search-skill-image-analysis.md), таких как обнаружение лиц, интерпретация изображений, распознавание изображений (знаменитые люди и ориентиры) или атрибуты, такие как ориентация изображения. Эти навыки создают текстовые представления содержимого изображений, позволяя выполнять поиск с помощью возможностей запросов Когнитивный поиск Azure.

![Схема конвейера обогащения](./media/cognitive-search-intro/cogsearch-architecture.png "обзор конвейера обогащения")

Встроенные навыки в Azure Когнитивный поиск основаны на предварительно обученных моделях машинного обучения в API-интерфейсы Cognitive Services: [компьютерное зрение](../cognitive-services/computer-vision/index.yml) и [анализ текста](../cognitive-services/text-analytics/overview.md). Вы можете подключить Cognitive Services ресурс, если вы хотите использовать эти ресурсы во время обработки содержимого.

На этапе приема данных применяется обработка естественного языка и изображений, при этом результаты становятся частью структуры документа в индексе поиска службы "Когнитивный поиск Azure". Данные получают в виде набора данных Azure, после чего они передаются по конвейеру индексирования с использованием необходимых [встроенных навыков](cognitive-search-predefined-skills.md).  

## <a name="when-to-use-ai-enrichment"></a>Когда следует использовать обогащение искусственного интеллекта

Рекомендуем использовать встроенные когнитивные навыки, если необработанное содержимое является неструктурированным текстом, содержимым изображения или содержимым, для которого требуется распознавание языка и перевод. Применение искусственного интеллекта с помощью встроенных когнитивных навыков может помочь распознать содержимое, что расширяет его ценность и возможности применения в приложениях поиска и обработки и анализа данных. 

Кроме того, вы можете добавить пользовательский навык, если у вас сторонний или собственный открытый исходный код, который нужно интегрировать в конвейер. Модели классификации, которые позволяют определять характеристики ключевые различных типов документов, попадают в эту категорию, но можно использовать любой пакет, который добавляет значение в содержимое.

### <a name="more-about-built-in-skills"></a>Дополнительные сведения о встроенных навыках

Набор [знаний](cognitive-search-defining-skillset.md) , собранных с помощью встроенных навыков, хорошо подходит для следующих сценариев приложений:

+ Отсканированные документы (JPEG), которые нужно сделать доступными для полнотекстового поиска. Вы можете присоединить навык оптического распознавания символов (OCR) для идентификации, извлечения и приема текста из файлов JPEG.

+ Файлы PDF с изображением и текстом. Текст в файлах PDF можно извлечь во время индексирования, не выполняя шаги обогащения, но добавление обработки изображений и естественного языка часто может обеспечить лучший результат, чем стандартное индексирование.

+ Многоязычное содержимое, к которому необходимо применить распознавание языка и, возможно, перевод текста.

+ Неструктурированные или частично структурированные документы с содержимым, которое имеет присущее значение или контекст, скрытые в большом документе. 

  Большие двоичные объекты в частности часто содержат большой текст содержимого, упакованного в одно «поле». Присоединив навыки обработки изображения и естественного языка к индексатору, можно сформировать сведения, существующие в необработанном содержимом, но не предоставленные в виде отдельных полей. Некоторые полезные, готовые к использованию встроенные когнитивные навыки включают в себя: извлечение ключевых фраз, анализ тональности и распознавание сущностей (людей, организаций и расположений).

  Кроме того, встроенные навыки также можно использовать для реструктуризации содержимого с помощью операций разделения текста, слияния и формирования фигур.

### <a name="more-about-custom-skills"></a>Дополнительные сведения о пользовательских навыках

Пользовательские навыки могут поддерживать более сложные сценарии, такие как распознавание форм или обнаружение настраиваемых сущностей с использованием модели, которую вы предоставляете и переносите в [веб-интерфейс пользовательских навыков](cognitive-search-custom-skill-interface.md). Несколько примеров пользовательских навыков включают в себя [Распознаватель документов](../cognitive-services/form-recognizer/overview.md), интеграцию [API Поиска сущностей Bing](./cognitive-search-create-custom-skill-example.md) и [распознавание настраиваемых сущностей](https://github.com/Microsoft/SkillsExtractorCognitiveSearch).

## <a name="steps-in-an-enrichment-pipeline"></a>Шаги в конвейере обогащения <a name="enrichment-steps"></a>

Конвейер обогащения основан на [*индексаторах*](search-indexer-overview.md). Индексаторы заполняют индекс на основе сопоставлений полей по полям между индексом и источником данных для взлома документов. Навыки, теперь присоединенные к индексаторам, перехватывать и расширять документы в соответствии с определяемыми навыками. После индексации созданное содержимое будет доступно через поисковые запросы [любых типов, поддерживаемых в службе "Когнитивный поиск Azure"](search-query-overview.md).  Если вы еще не знакомы с индексаторами, ознакомьтесь с простым примером, представленным в этом разделе.

### <a name="step-1-connection-and-document-cracking-phase"></a>Шаг 1. фаза взлома подключения и документа

В начале конвейера имеется неструктурированное текстовое или нетекстовое содержимое (например, изображения, отсканированные документы или JPEG-файлы). Эти данные нужно разместить в службе хранилища данных Azure, доступной для индексатора. Индексаторы умеют открывать исходные документы и извлекать из них текстовые данные. Взлом документов — это процесс извлечения или создания текстового содержимого из источников, не являющихся текстовыми, во время индексирования.

![Этап распознавания документов](./media/cognitive-search-intro/document-cracking-phase-blowup.png "распознавание документов")

 В качестве источников данных поддерживаются хранилища больших двоичных объектов Azure, хранилища таблиц Azure, база данных SQL Azure и Azure Cosmos DB. Текстовое содержимое можно извлечь из файлов следующих типов: PDF, Word, PowerPoint и CSV. Дополнительные сведения см. в разделе [Поддерживаемые форматы документов](search-howto-indexing-azure-blob-storage.md#SupportedFormats). Индексирование занимает немало времени, поэтому лучше начать с небольшого репрезентативного набора данных, который вы будете поэтапно развивать параллельно с разработкой решения.

### <a name="step-2-cognitive-skills-and-enrichment-phase"></a>Шаг 2. развитие навыков и фаза обогащения

Обогащение *выполняется с помощью функций,* выполняющих атомарные операции. Например, после взлома документа PDF можно применить распознавание сущностей, определение языка или извлечение ключевых фраз для создания новых полей в индексе, которые недоступны в исходном коде. Совокупность таких возможностей, реализованная в вашем конвейере, называется *набором навыков*.  

![Этап обогащения](./media/cognitive-search-intro/enrichment-phase-blowup.png "этап обогащения")

Набор навыков основывается на [встроенных когнитивных навыках](cognitive-search-predefined-skills.md) или [пользовательских навыках](cognitive-search-create-custom-skill-example.md), которые вы создаете и подключаете к нему. Можно использовать как минимальные, так и очень сложные наборы навыков. Они определяют не только типы обработки, но и порядок операций. Набор навыков в сочетании с сопоставлением полей, которые включены в индексатор, полностью определяют весь конвейер обогащения данных. Дополнительные сведения о том, как собрать все эти фрагменты в единое целое, вы найдете в статье [Создание набора навыков в конвейере обогащения](cognitive-search-defining-skillset.md).

В конвейере создается коллекция обогащенных документов. Вы можете выбрать, какие из элементов этих обогащенных документов нужно сопоставить с индексируемыми полями в индексе поиска. Например, если вы применили извлечение ключевых фраз и навыков распознавания сущностей, эти новые поля станут частью обогащенного документа и могут быть сопоставлены с полями в индексе. В статье [Создание ссылок на аннотации в наборе навыков когнитивного поиска](cognitive-search-concept-annotations-syntax.md) вы найдете дополнительные сведения о структурах ввода и вывода.

#### <a name="add-a-knowledgestore-element-to-save-enrichments"></a>Добавление элемента knowledgeStore для сохранения обогащений

[API-версия поиска для RESTful — Version = 2020-06-30](/rest/api/searchservice/) расширяет навыков с `knowledgeStore` определением, предоставляющим подключение к службе хранилища Azure и проекциями, которые описывают, как хранятся дополнения. Это дополнение к индексу. В стандартном конвейере на основе ИИ обогащенные документы являются временными и используются только во время индексирования, а затем удаляются. В хранилище знаний сохраняются обогащенные документы. Дополнительные сведения см. в [статье хранилище знаний](knowledge-store-concept-intro.md).

### <a name="step-3-search-index-and-query-based-access"></a>Шаг 3. Поиск по индексу и доступу на основе запросов

Когда обработка завершится, в службе "Когнитивный поиск Azure" будет создан индекс поиска, состоящий из обогащенных документов с возможностью текстового поиска по ним. [Запросы по индексу](search-query-overview.md) позволяют разработчикам и пользователям получить доступ к обогащенному содержимому, созданному конвейером индексирования. 

![Индекс со значком поиска](./media/cognitive-search-intro/search-phase-blowup.png "индекс со значком поиска")

Такой индекс действует так же, как любой другой индекс в службе "Когнитивный поиск Azure", и вы можете дополнить его пользовательскими анализаторами, применить поисковые запросы нечетких соответствий, добавить фильтрацию или настроить профили оценки, чтобы сформировать результаты поиска.

Индексы создаются на основе схемы индекса, в которой определены поля, атрибуты и другие конструкции для конкретного индекса, в том числе профили оценки и карты синонимов. После создания и первичного заполнения индекса можно выполнять индивидуальные операции индексирования для учета новых и обновленных исходных документов. Некоторые изменения данных потребуют полного перестроения индекса. Пока структура схемы не будет достаточно стабильной, ограничьтесь небольшим набором данных. Дополнительные сведения см. в статье [How to rebuild an Azure Search index](search-howto-reindex.md) (Как перестроить индекс для службы "Поиск Azure").

**Контрольный список: стандартный рабочий процесс**

1. Выделите репрезентативную выборку из набора исходных данных в Azure. Индексирование занимает немало времени, поэтому лучше начать с небольшого репрезентативного набора данных, который вы будете поэтапно развивать параллельно с разработкой решения.

1. Создайте [объект источника данных](/rest/api/searchservice/create-data-source) в службе "Когнитивный поиск Azure", чтобы указать строку подключения для получения данных.

1. Создайте [набор навыков](/rest/api/searchservice/create-skillset) с действиями для обогащения.

1. Определите [схему индекса](/rest/api/searchservice/create-index). Коллекция *Поля* содержит поля источника данных. Также здесь нужно предусмотреть заглушки для дополнительных полей, в которых будет сохраняться содержимое, созданное на этапе обогащения.

1. Определите [индексатор](/rest/api/searchservice/create-indexer) со ссылками на источник данных, набор навыков и индекс.

1. Добавьте в этот индексатор *outputFieldMappings*. Этот раздел сопоставляет выходные данные, полученные от набора навыков (шаг 3), с полями входных данных в схеме индекса (шаг 4).

1. Отправьте только что созданный запрос на *создание индексатора* (запрос POST с определением индексатора в тексте запроса), чтобы определить индексатор в службе "Когнитивный поиск Azure". Именно этот шаг запускает ваш индексатор и начинает работу конвейера.

1. Выполните тестовые запросы для оценки результатов, и при необходимости измените код, обновив набор навыков, схемы или конфигурацию индексатора.

1. Выполните [сброс индексатора](search-howto-reindex.md), прежде чем перестроить конвейер.

## <a name="next-steps"></a>Дальнейшие шаги

+ [Ссылки на документацию по обогащению ИИ](cognitive-search-resources-documentation.md)
+ [Пример. Создание пользовательского навыка для обогащения искусственного интеллекта (C#)](cognitive-search-create-custom-skill-example.md)
+ [Краткое руководство. пробное изучение искусственного интеллекта на портале](cognitive-search-quickstart-blob.md)
+ [Учебник. изучение API-интерфейсов обогащения искусственного интеллекта](cognitive-search-tutorial-blob.md)
+ [Хранилище знаний](knowledge-store-concept-intro.md)
+ [Создание хранилища знаний в REST](knowledge-store-create-rest.md)
+ [Советы по устранению неполадок](cognitive-search-concept-troubleshooting.md)
