---
title: Средство обработки запросов проводника поиска на портале Azure
titleSuffix: Azure Cognitive Search
description: В этом кратком руководстве по порталу Azure вы будете использовать проводник поиска, чтобы получить сведения о синтаксисе запроса, проверить выражения запроса или документ поиска. Проводник поиска запрашивает индексы в Когнитивном поиске Azure.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: quickstart
ms.date: 06/07/2020
ms.openlocfilehash: 19d46c034d56c1c54f8a00f08a7e3e72e758984f
ms.sourcegitcommit: 20e246e86e25d63bcd521a4b4d5864fbc7bad1b0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2020
ms.locfileid: "84488211"
---
# <a name="quickstart-use-search-explorer-to-run-queries-in-the-portal"></a>Краткое руководство. Использование проводника поиска для выполнения запросов на портале

**Проводник поиска** — это встроенное средство обработки запросов, используемое для выполнения запросов к индексу поиска в Когнитивном поиске Azure. Это средство упрощает изучение синтаксиса запроса, проверку выражения запроса или фильтра, а также подтверждение результатов обновления с помощью проверки наличия в индексе нового содержимого.

Для демонстрации проводника поиска в этом кратком руководстве используется существующий индекс. Запросы формулируются с помощью [REST API поиска](https://docs.microsoft.com/rest/api/searchservice/), а ответы возвращаются в виде документов JSON.

## <a name="prerequisites"></a>Предварительные требования

Перед началом работы убедитесь, что у вас есть такие компоненты.

+ Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/) бесплатно.

+ Служба "Когнитивный поиск Azure". [Создайте службу](search-create-service-portal.md) или [найдите имеющуюся службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices) в рамках текущей подписки. Вы можете использовать бесплатную службу для выполнения инструкций, описанных в этом кратком руководстве. 

+ В этом кратком руководстве используется *realestate-us-sample-index*. Используйте мастер [**импорта данных**](search-import-data-portal.md) для создания индекса. На первом шаге при запросе источника данных выберите **Примеры**, а затем выберите источник данных **realestate-us-sample**. Примите все параметры мастера по умолчанию, чтобы создать индекс.

## <a name="start-search-explorer"></a>Запуск проводника поиска

1. На [портале Azure](https://portal.azure.com) откройте страницу службы поиска на панели мониторинга или [найдите свою службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices).

1. Щелкните проводник поиска на панели команд:

   ![Команда проводника поиска на портале](./media/search-explorer/search-explorer-cmd2.png "Команда проводника поиска на портале")

    Или используйте встроенную вкладку **проводника поиска** в открытом индексе:

   ![Вкладка проводника поиска](./media/search-explorer/search-explorer-tab.png "Вкладка проводника поиска")

## <a name="unspecified-query"></a>Неуказанный запрос

Для первого просмотра содержимого выполните поиск с пустыми условиями. Нажмите кнопку **Найти**, не указывая каких-либо условий поиска. Такой поиск удобно использовать в качестве первого запроса, так как он возвращает все документы. Это позволяет ознакомиться со структурой документов. При поиске с пустыми условиями документы не ранжируются и возвращаются в произвольном порядке (`"@search.score": 1` для всех документов). По умолчанию для запроса поиска возвращаются 50 документов.

Аналогичный синтаксис поиска с пустыми условиями: `*` или `search=*`.
   
   ```http
   search=*
   ```

   **Результаты**
   
   ![Пример запроса с пустыми условиями](./media/search-explorer/search-explorer-example-empty.png "Пример запроса поиска с неполными или пустыми условиями")

## <a name="free-text-search"></a>Поиск произвольного текста

Запросы в свободной форме, содержащие или не содержащие операторы, удобны для имитации пользовательских запросов, отправляемых из настраиваемого приложения в Когнитивный поиск Azure. На совпадения проверяются только те поля, которые имеют атрибут **Доступный для поиска** в определении индекса. 

Обратите внимание, что при указании условий поиска, например терминов или выражений запроса, вступает в действие рейтинг поиска. В следующем примере показан поиск произвольного текста.

   ```http
   Seattle apartment "Lake Washington" miele OR thermador appliance
   ```

   **Результаты**

   С помощью клавиш CTRL-F можно искать определенные условия в результатах поиска.

   ![Пример запроса поиска произвольного текста](./media/search-explorer/search-explorer-example-freetext.png "Пример запроса поиска произвольного текста")

## <a name="count-of-matching-documents"></a>Количество соответствующих документов 

Добавьте **$count=true** для получения числа совпадений, найденных в индексе. При поиске с пустыми условиями это значение равно общему количеству документов в индексе. При поиске с полными условиями это значение равно количеству документов, соответствующих входному запросу.

   ```http
   $count=true
   ```

   **Результаты**

   ![Пример количества документов](./media/search-explorer/search-explorer-example-count.png "Количество соответствующих документов в индексе")

## <a name="limit-fields-in-search-results"></a>Ограничение полей в результатах поиска

Добавьте [ **$select**](search-query-odata-select.md), чтобы результаты содержали только явно указанные поля. Это позволит сделать понятнее выходные данные в **Проводнике поиска**. Чтобы сохранить строку поиска и **$count=true**, добавьте к аргументам префикс **&** . 

   ```http
   search=seattle condo&$select=listingId,beds,baths,description,street,city,price&$count=true
   ```

   **Результаты**

   ![Пример ограничения полей](./media/search-explorer/search-explorer-example-selectfield.png "Ограничение полей в результатах поиска")

## <a name="return-next-batch-of-results"></a>Возвращение следующего пакета результатов

Когнитивный поиск Azure возвращает первые 50 совпадений в соответствии с рейтингом поиска. Чтобы получить следующий набор соответствующих документов, добавьте в запрос **$top=100,&$skip=50**. Это позволит увеличить результирующий набор до 100 документов (значение по умолчанию — 50, максимальное значение — 1000), пропустив первые 50 документов. Как вы помните, чтобы получить ранжированные результаты, необходимо указать критерии поиска, например термин запроса или выражение. Обратите внимание на то, что рейтинг поиска уменьшается по мере углубления в результаты поиска.

   ```http
   search=seattle condo&$select=listingId,beds,baths,description,street,city,price&$count=true&$top=100&$skip=50
   ```

   **Результаты**

   ![Пакет результатов поиска](./media/search-explorer/search-explorer-example-topskip.png "Возвращение следующего пакета результатов поиска")

## <a name="filter-expressions-greater-than-less-than-equal-to"></a>Выражения фильтра (больше, меньше, равно)

Используйте параметр [ **$filter**](search-query-odata-filter.md), если вы хотите указать точные условия, а не произвольный текст для поиска. Поле должно иметь атрибут **Фильтруемый** в индексе. В этом примере выполняется поиск квартир, в которых больше 3 спален:

   ```http
   search=seattle condo&$filter=beds gt 3&$count=true
   ```
   
   **Результаты**

   ![Выражение фильтра](./media/search-explorer/search-explorer-example-filter.png "Фильтрация по критериям")

## <a name="order-by-expressions"></a>Выражения OrderBy

Добавьте параметр [ **$orderby**](search-query-odata-orderby.md), чтобы отсортировать результаты не только по рейтингу поиска, а и по другому полю. Поле должно иметь атрибут **Сортируемый** в индексе. Пример выражения, который можно использовать, чтобы протестировать этот параметр:

   ```http
   search=seattle condo&$select=listingId,beds,price&$filter=beds gt 3&$count=true&$orderby=price asc
   ```
   
   **Результаты**

   ![Выражение OrderBy](./media/search-explorer/search-explorer-example-ordery.png "Изменение порядка сортировки")

Выражения **$filter** и **$orderby** являются конструкциями OData. Дополнительные сведения см. в статье [OData Expression Syntax for Azure Search](https://docs.microsoft.com/rest/api/searchservice/odata-expression-syntax-for-azure-search) (Синтаксис выражений OData для службы поиска Azure).

<a name="start-search-explorer"></a>

## <a name="takeaways"></a>Общие выводы

В этом кратком руководстве вы использовали **проводник поиска** для выполнения запроса к индексу с помощью REST API.

+ Результаты возвращаются в виде подробных документов JSON, чтобы можно было полностью просмотреть структуру и содержимое документа. Можно использовать выражения запросов, как показано в примерах, чтобы ограничить возвращаемые поля.

+ Документы содержат все поля, помеченные как **Доступный для получения** в индексе. Чтобы просмотреть атрибуты индекса на портале, на странице "Общие сведения о поиске" в списке **Индексы** щелкните *realestate-us-sample*.

+ Запросы в свободной форме, аналогичные вводимым в коммерческом веб-браузере, можно использовать для тестирования взаимодействия с пользователем. Например, при использовании встроенного примера индекса недвижимости, можно ввести "Seattle apartments lake washington", а затем с помощью клавиш CTRL-F искать условия в результатах поиска. 

+ Синтаксис выражений запросов и фильтров поддерживается Когнитивным поиском Azure. По умолчанию используется [простой синтаксис](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search), но при необходимости можно использовать [полный запрос Lucene](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search), чтобы создавать более эффективные запросы. Для [выражений фильтров](https://docs.microsoft.com/rest/api/searchservice/odata-expression-syntax-for-azure-search) используется синтаксис OData.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы работаете в своей подписке, по окончании проекта рекомендуем решить, нужны ли вам созданные ресурсы. Работающие ресурсы могут означать лишние затраты. Можно удалить отдельные ресурсы или удалить группу ресурсов, что позволит удалить весь набор ресурсов.

Просматривать ресурсы и управлять ими можно на портале с помощью ссылок **Все ресурсы** или **Группы ресурсов** на панели навигации слева.

При работе с бесплатной версией службы помните о том, что вам доступно максимум три индекса, индексатора и источника данных. Вы можете удалить отдельные элементы на портале, чтобы не превысить лимит. 

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше о структурах запросов и синтаксисе, используйте Postman или аналогичное средство для создания выражений запросов, использующих больше элементов API. [REST API поиска](https://docs.microsoft.com/rest/api/searchservice/) особенно полезно для обучения и исследований.

> [!div class="nextstepaction"]
> [Создание простого запроса в Postman](search-query-simple-examples.md)