---
title: Службы данных с поддержкой дуги Azure — заметки о выпуске
description: Последние заметки о выпуске
author: twright-msft
ms.author: twright
ms.reviewer: mikeray
services: azure-arc
ms.service: azure-arc
ms.subservice: azure-arc-data
ms.date: 02/11/2021
ms.topic: conceptual
ms.openlocfilehash: f303ddb4d32da4c4cb6609f3ceec34e5c83529a8
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100391462"
---
# <a name="release-notes---azure-arc-enabled-data-services-preview"></a>Заметки о выпуске — службы данных с поддержкой ARC в Azure (Предварительная версия)

[!INCLUDE [azure-arc-data-preview](../../../includes/azure-arc-data-preview.md)]

## <a name="january-2021"></a>Январь 2021 г.

### <a name="new-capabilities-and-features"></a>Новые возможности и возможности

Номер версии Azure Data CLI ( `azdata` ): 20.3.0. Скачайте по адресу [https://aka.ms/azdata](https://aka.ms/azdata) . Вы можете установить `azdata` из программы [установки Azure Data CLI ( `azdata` )](/sql/azdata/install/deploy-install-azdata).


К дополнительным обновлениям относятся:
- Доступ к локализованному порталу для 17 новых языков
- Незначительные изменения в файлах KUBE-Native. YAML
- Новые версии Grafana и Kibana
- Проблемы с окружениями Python при использовании аздата в записных книжках в Azure Data Studio разрешены
- Расширение pg_audit теперь доступно для PostgreSQLного масштабирования.
- При полном восстановлении базы данных PostgreSQL с масштабированием больше не требуется идентификатор резервного копирования
- Состояние (состояние работоспособности) указывается для каждого экземпляра PostgreSQL, составляющего группу серверов.

   В более ранних выпусках состояние было агрегировано на уровне группы серверов и не было детализировано на уровне узла PostgreSQL.

- Развертывания PostgreSQL теперь учитывают параметры размера тома, указанные в командах Create Commands.
- Параметры версии подсистемы теперь учитываются при редактировании группы серверов.
- Изменилось соглашение об именовании модулей Pod для PostgreSQL с поддержкой ARC в Azure

    Теперь он имеет вид: `ServergroupName{c, w}-n` . Например, группа серверов с тремя узлами, одним узлом координатора и двумя рабочими узлами, представлена следующим образом:
   - `Postgres01c-0` (узел координатора)
   - `Postgres01w-0` (рабочий узел)
   - `Postgres01w-1` (рабочий узел)

## <a name="december-2020"></a>Декабрь 2020 г.

### <a name="new-capabilities--features"></a>Новые возможности & функции

Номер версии Azure Data CLI ( `azdata` ): 20.2.5. Скачайте по адресу [https://aka.ms/azdata](https://aka.ms/azdata) .

Просмотр конечных точек для SQL Управляемый экземпляр и PostgreSQL с помощью интерфейса командной строки () в Azure Data CLI ( `azdata` ) с `azdata arc sql endpoint list` `azdata arc postgres endpoint list` командами и.

Изменение запросов и ограничений для ресурсов SQL Управляемый экземпляр (ЦП и памяти) с помощью Azure Data Studio.

В дополнение к полному восстановлению до полного восстановления для версий 11 и 12 PostgreSQL служба "Дуга Azure" с поддержкой PostgreSQL теперь поддерживает восстановление на момент времени. Функция восстановления на момент времени позволяет указать конкретную дату и время для восстановления.

Изменилось соглашение об именовании модулей Pod для PostgreSQL с поддержкой ARC в Azure. Теперь он имеет вид: Серверграупнаме {r, s}-_n_. Например, группа серверов с тремя узлами, одним узлом координатора и двумя рабочими узлами, представлена следующим образом:
- `postgres02r-0` (узел координатора)
- `postgres02s-0` (рабочий узел)
- `postgres02s-1` (рабочий узел)

### <a name="breaking-change"></a>Критическое изменение

#### <a name="new-resource-provider"></a>Новый поставщик ресурсов

В этом выпуске появился обновленный [поставщик ресурсов](../../azure-resource-manager/management/azure-services-resource-providers.md) с названием `Microsoft.AzureArcData`. Прежде чем использовать эту функцию, необходимо зарегистрировать этот поставщик ресурсов. 

Чтобы зарегистрировать этот поставщик ресурсов, сделайте следующее: 

1. В портал Azure выберите **подписки** . 
2. Выберите свою подписку
3. В разделе **Параметры** с помощью пункта **Поставщики ресурсов** 
4. Посредством поиска по `Microsoft.AzureArcData` и выбора **Зарегистрировать** 

Вы можете ознакомиться с подробными инструкциями [поставщиков и типов ресурсов Azure](../../azure-resource-manager/management/resource-providers-and-types.md). Это изменение также приведет к удалению всех существующих ресурсов Azure, отправленных в портал Azure. Чтобы использовать поставщик ресурсов, необходимо обновить контроллер данных и использовать последнюю версию `azdata` интерфейса командной строки.  

### <a name="platform-release-notes"></a>Заметки о выпуске платформы

#### <a name="direct-connectivity-mode"></a>Режим прямого подключения

В этом выпуске появился режим прямого подключения. Режим прямого подключения позволяет контроллеру данных автоматически передавать сведения об использовании в Azure. В рамках отправки сведений об использовании на портале автоматически создается ресурс контроллера данных Arc, если он еще не создан с помощью `azdata` upload.  

При создании контроллера данных можно указать прямую связь. В следующем примере создается контроллер данных с `azdata arc dc create` именем с `arc` помощью режима прямого подключения ( `connectivity-mode direct` ). Перед выполнением примера замените `<subscription id>` его идентификатором подписки.

```console
azdata arc dc create --profile-name azure-arc-aks-hci --namespace arc --name arc --subscription <subscription id> --resource-group my-resource-group --location eastus --connectivity-mode direct
```

### <a name="known-issues"></a>Известные проблемы

- В службе Azure Kubernetes Service (AKS) версия Kubernetes 1.19. x не поддерживается.
- В Kubernetes 1,19 `containerd` не поддерживается.
- Ресурс контроллера данных в Azure сейчас является ресурсом Azure. Любые обновления, такие как DELETE, не передаются обратно в кластер kubernetes.
- Имена экземпляров не могут быть длиннее 13 символов
- Нет обновления на месте для контроллера данных ARC в Azure или экземпляров базы данных.
- Образы контейнеров служб данных с поддержкой Arc не подписаны.  Возможно, потребуется настроить узлы Kubernetes так, чтобы разрешить извлечь неподписанные образы контейнера.  Например, если в качестве среды выполнения контейнера используется DOCKER, можно задать переменную среды DOCKER_CONTENT_TRUST = 0 и перезапустить.  Другие среды выполнения контейнеров имеют аналогичные параметры, например в [OpenShift](https://docs.openshift.com/container-platform/4.5/openshift_images/image-configuration.html#images-configuration-file_image-configuration).
- Не удается создать на основе портал Azure службы "Дуга Azure", управляемые экземпляры SQL или группы серверов PostgreSQL.
- Пока вы используете NFS, `allowRunAsRoot` `true` перед созданием контроллера данных ARC в Azure необходимо задать в файле профиля развертывания.
- Только проверка подлинности входа SQL и PostgreSQL.  Отсутствует поддержка Azure Active Directory или Active Directory.
- Создание контроллера данных в OpenShift требует ослабления ограничений безопасности.  Дополнительные сведения см. в документации.
- Если вы используете подсистему Azure Kubernetes Service (AKS) в центре Azure Stack с контроллером данных Arc и экземплярами базы данных Azure, обновление до более новой версии Kubernetes не поддерживается. Удалите контроллер данных ARC в Azure и все экземпляры базы данных перед обновлением кластера Kubernetes.
- Кластеры AKS, охватывающие [несколько зон доступности](../../aks/availability-zones.md) , в настоящее время не поддерживаются для служб данных, поддерживающих службу "Дуга Azure". Чтобы избежать этой проблемы, при создании кластера AKS в портал Azure при выборе региона, в котором доступны зоны, удалите все зоны из элемента управления выбором. См. следующее изображение:

   :::image type="content" source="media/release-notes/aks-zone-selector.png" alt-text="Снимите флажки для каждой зоны, чтобы указать значение нет.":::

#### <a name="postgresql"></a>PostgreSQL

- Функция "PostgreSQL" в службе "Дуга Azure" возвращает неточное сообщение об ошибке, когда оно не может восстановиться на относительную точку во времени. Например, если вы указали точку во времени для восстановления, которая старше, чем резервная копия, восстановление завершится с сообщением об ошибке следующего вида: ошибка: (404). Причина: не найден. Текст ответа HTTP: {"Code": 404, "Интерналстатус": "NOT_FOUND", "причина": "не удалось восстановить резервную копию для сервера...}
В этом случае перезапустите команду, указав момент времени в диапазоне дат, для которого имеются резервные копии. Чтобы определить этот диапазон, необходимо составить список резервных копий и просмотреть даты их съемки.
- Восстановление на момент времени поддерживается только в разных группах серверов. Целевым сервером операции восстановления на момент времени не может быть сервер, с которого была выполнена архивация. Она должна быть другой группой серверов. Однако полное восстановление поддерживается для одной и той же группы серверов.
- При выполнении полного восстановления требуется идентификатор резервного копирования. По умолчанию, если вы не указываете идентификатор резервной копии, будет использоваться последняя резервная копия. Это не работает в этом выпуске.

## <a name="october-2020"></a>Октябрь 2020 г. 

Номер версии Azure Data CLI ( `azdata` ): 20.2.3. Скачайте по адресу [https://aka.ms/azdata](https://aka.ms/azdata) .

### <a name="breaking-changes"></a>Критические изменения

В этом выпуске представлены следующие критические изменения. 

* В определении настраиваемого ресурса PostgreSQL (CRD) термин `shards` переименовывается в `workers` . Этот термин ( `workers` ) соответствует имени параметра командной строки.

* `azdata arc postgres server delete` запрашивает подтверждение перед удалением экземпляра postgres.  Используйте `--force` , чтобы пропустить запрос.

### <a name="additional-changes"></a>Дополнительные изменения

* К вызову был добавлен новый необязательный параметр `azdata arc postgres server create` `--volume-claim mounts` . Это значение представляет собой разделенный запятыми список подключений, исключающих требования к тому. Подключение с утверждением тома — это пара типов томов и ПОСТОЯННЫХ имен. В настоящее время поддерживается только тип тома `backup` .  В PostgreSQL, если тип тома — `backup` , PVC монтируется в `/mnt/db-backups` .  Это обеспечивает общий доступ к резервным копиям между экземплярами PostgresSQL, чтобы можно было восстановить резервную копию одного экземпляра PostgresSQL в другом экземпляре.

* Новые короткие имена для пользовательских определений ресурсов PostgresSQL: 
  * `pg11` 
  * `pg12`
* Передача телеметрии предоставляет пользователю:
   * Количество точек, отправленных в Azure или 
   * Если в Azure не были загружены данные, выводится приглашение повторить попытку.
* `azdata arc dc debug copy-logs` Теперь также считывает из `/var/opt/controller/log` папки и собирает журналы ядра PostgreSQL в Linux.
*   Отображать рабочий индикатор во время создания и восстановления резервной копии с помощью PostgreSQLного масштабирования.
* `azdata arc postrgres backup list` теперь содержит сведения о размере резервной копии.
* Свойство SQL Управляемый экземпляр Admin Name добавлено в столбец "правый" в колонке "Обзор" в портал Azure.
* Azure Data Studio поддерживает настройку количества рабочих узлов, виртуальное ядро и параметров памяти для PostgreSQLного масштабирования. 
* Предварительная версия поддерживает резервное копирование и восстановление для postgres версии 11 и 12.

## <a name="september-2020"></a>Сентябрь 2020 г.

Службы данных, включенные в службу Arc Azure, выпущены для общедоступной предварительной версии. Службы данных с поддержкой Arc позволяют управлять службами данных где угодно.

- Управляемый экземпляр SQL
- Гипермасштабирование PostgreSQL.

Инструкции см. в статье [что такое службы данных с поддержкой дуги Azure?](overview.md)

## <a name="next-steps"></a>Следующие шаги

> **Хотите попробовать?**  
> Быстро Начните работу с помощью [Azure Arc JumpStart](https://azurearcjumpstart.io/azure_arc_jumpstart/azure_arc_data/) в AKS, AWS эластичной Kubernetes службы (ЕКС), Google Cloud Kubernetes Engine (гке) или на виртуальной машине Azure.

- [Установка клиентских средств](install-client-tools.md)
- [Создание контроллера данных Azure Arc](create-data-controller.md) (сначала необходимо установить клиентские средства)
- [Создание управляемого экземпляра SQL Azure в Azure Arc](create-sql-managed-instance.md) (сначала требуется создать контроллер данных Azure Arc)
- [Создание группы серверов с уровнем "Гипермасштабирование" Базы данных Azure для PostgreSQL в Azure Arc ](create-postgresql-hyperscale-server-group.md) (сначала необходимо создать контроллер данных Azure Arc)
- [Поставщики ресурсов для служб Azure](../../azure-resource-manager/management/azure-services-resource-providers.md)
