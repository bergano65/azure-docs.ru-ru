---
title: Автономное развертывание
description: Автономное развертывание позволяет извлечь образы контейнеров из закрытого реестра контейнеров, а не из реестра контейнеров Майкрософт.
services: azure-arc
ms.service: azure-arc
ms.subservice: azure-arc-data
author: twright-msft
ms.author: twright
ms.reviewer: mikeray
ms.date: 09/22/2020
ms.topic: how-to
ms.openlocfilehash: 575903654a165bef0d09ac6abf0793af3f6784e8
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "90940607"
---
# <a name="offline-deployment-overview"></a>Обзор автономного развертывания

Как правило, образы контейнеров, используемые при создании контроллера данных ARC в Azure, управляемых экземплярах SQL и PostgreSQLных групп серверов, напрямую извлекаются из реестра контейнеров Майкрософт (мкр). В некоторых случаях среда, в которой выполняется развертывание, не будет иметь подключения к реестру контейнеров Microsoft.  В таких ситуациях можно извлечь образы контейнеров с помощью компьютера _, который имеет_ доступ к реестру контейнеров Майкрософт, а затем пометить его и отправить в закрытый реестр контейнеров, который можно подключить из _среды, в_ которой требуется развернуть службы данных, поддерживающие службу "Дуга Azure".

Так как ежемесячные обновления предоставляются для служб данных с поддержкой службы "Дуга Azure", и существует большое количество образов контейнеров, лучше всего выполнить этот процесс, отметив и размещая образы контейнеров в частном реестре контейнеров с помощью скрипта.  Скрипт можно либо автоматизировать, либо запустить вручную.

[Пример скрипта](https://raw.githubusercontent.com/microsoft/azure_arc/master/arc_data_services/deploy/scripts/pull-and-push-arc-data-services-images-to-private-registry.py) можно найти в репозитории GitHub Azure ARC.

> [!NOTE]
> Для этого скрипта требуется установка Python и [DOCKER CLI](https://docs.docker.com/install/).

Сценарий будет интерактивно запрашивать следующую информацию.  Кроме того, если вы хотите, чтобы скрипт выполнялся без интерактивных запросов, можно задать соответствующие переменные среды перед выполнением скрипта.

|prompt|Переменная среды|Примечания|
|---|---|---|
|Укажите реестр исходного контейнера — нажмите клавишу ВВОД для использования `mcr.microsoft.com`|SOURCE_DOCKER_REGISTRY|Как правило, изображения извлекаются из реестра контейнеров Майкрософт, но если вы участвуете в закрытой предварительной версии с другим реестром, то можете использовать сведения, предоставленные вам в рамках программы предварительной версии.|
|Укажите репозиторий исходного реестра контейнеров — нажмите клавишу ВВОД для использования `arcdata` :|SOURCE_DOCKER_REPOSITORY|Если вы извлечете из реестра контейнеров Майкрософт, репозиторий будет иметь значение `arcdata` .|
|Укажите имя пользователя для исходного реестра контейнеров — нажмите клавишу ВВОД, чтобы использовать параметр Нет:|SOURCE_DOCKER_USERNAME|Предоставьте значение только при извлечении образов контейнеров из источника, для которого требуется вход.  Реестр контейнеров Microsoft не требует имени входа.|
|Укажите пароль для исходного реестра контейнеров — нажмите клавишу ВВОД, чтобы использовать параметр Нет:|SOURCE_DOCKER_PASSWORD|Предоставьте значение только при извлечении образов контейнеров из источника, для которого требуется вход.  Реестр контейнеров Microsoft не требует имени входа. Это запрос на маскировку пароля.  Пароль не будет отображаться, если ввести или вставить его в.|
|Укажите тег образа контейнера для изображений в источнике — нажмите клавишу ВВОД для использования " `<current monthly release tag>` ":|SOURCE_DOCKER_TAG|Имя тега по умолчанию будет обновляться ежемесячно, чтобы отражать месяц и год текущего выпуска в реестре контейнеров Microsoft.|
|Укажите DNS-имя или IP-адрес реестра целевых контейнеров:|TARGET_DOCKER_REGISTRY|DNS-имя или IP-адрес целевого реестра.  Это реестр, _в_который будут отправлены образы.|
|Укажите репозиторий реестра целевых контейнеров:|TARGET_DOCKER_REPOSITORY|Репозиторий в целевом реестре для отправки образов.|
|Укажите имя пользователя для реестра целевых контейнеров. Нажмите клавишу ВВОД, чтобы использовать параметр Нет:|TARGET_DOCKER_USERNAME|Имя пользователя, которое используется для входа в целевой реестр контейнеров.|
|Укажите пароль для целевого реестра контейнеров. Нажмите клавишу ВВОД, чтобы использовать параметр Нет:|TARGET_DOCKER_PASSWORD|Пароль (при наличии), который используется для входа в целевой реестр контейнеров. Это запрос на маскировку пароля.  Пароль не будет отображаться, если ввести или вставить его в.|
|Укажите тег образа контейнера для образов на целевом объекте:|TARGET_DOCKER_TAG|Как правило, для предотвращения путаницы следует использовать тот же тег, что и у источника.|