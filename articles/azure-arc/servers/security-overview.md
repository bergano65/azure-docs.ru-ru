---
title: Общие сведения о безопасности
description: Сведения о безопасности серверов с поддержкой ARC в Azure (Предварительная версия).
ms.topic: conceptual
ms.date: 08/31/2020
ms.openlocfilehash: 17641fab9933d9d6a60c2b21912f755acc01a6dd
ms.sourcegitcommit: bf1340bb706cf31bb002128e272b8322f37d53dd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2020
ms.locfileid: "89447862"
---
# <a name="azure-arc-for-servers-preview-security-overview"></a>Обзор безопасности для Azure ARC для серверов (Предварительная версия)

В этой статье описывается настройка безопасности и рекомендации, которые следует оценить перед развертыванием серверов с поддержкой ARC в Azure на предприятии.

## <a name="identity-and-access-control"></a>Идентификаторы и управление доступом

Каждый сервер с поддержкой Arc Azure имеет управляемое удостоверение в составе группы ресурсов в подписке Azure, представляющей сервер, работающий в локальной среде или в другой облачной среды. Доступом к этому ресурсу управляет Стандартный [Контроль доступа на основе ролей Azure](../../role-based-access-control/overview.md). На странице [**управления доступом (IAM)**](../../role-based-access-control/role-assignments-portal.md#access-control-iam) в портал Azure можно проверить, кто имеет доступ к серверу с поддержкой Arc Azure.

:::image type="content" source="./media/security-overview/access-control-page.png" alt-text="Управление доступом на сервере с поддержкой ARC в Azure" border="false" lightbox="./media/security-overview/access-control-page.png":::

Пользователи и приложения, которым предоставлен доступ роли [участника](../../role-based-access-control/built-in-roles.md#contributor) или администратора к ресурсу, могут вносить изменения в ресурс, включая развертывание или удаление [расширений](manage-vm-extensions.md) на компьютере. Расширения могут включать произвольные скрипты, выполняемые в привилегированном контексте, поэтому рекомендуется, чтобы любой участник ресурса Azure был непрямым администратором сервера, не являющегося сервером Azure.

Роль **подключения компьютера, подключенного к Azure** , доступна для адаптации с масштабированием, и она может только считывать или создавать новые серверы с поддержкой ARC в Azure. Его нельзя использовать для удаления уже зарегистрированных или управляемых расширений серверов. Рекомендуется только назначить эту роль субъекту-службе Azure Active Directory (Azure AD), используемому для адаптации компьютеров в масштабе.

Пользователи, как члены роли **администратора ресурсов на компьютере, подключенном к Azure** , могут читать, изменять, повторно подключитесь и удалять машины. Эта роль предназначена для поддержки управления серверами с поддержкой Arc, но не другими ресурсами в группе ресурсов или подписке.

## <a name="agent-security-and-permissions"></a>Безопасность агента и разрешения

Для управления агентом подключенного компьютера Azure (азкмажент) в Windows ваша учетная запись пользователя должна быть членом локальной группы администраторов, а в Linux необходимо иметь права доступа root.

Агент подключенного компьютера Azure состоит из трех служб, которые работают на вашем компьютере.

* Служба метаданных гибридного экземпляра (химдс) отвечает за все основные функции дуги. Сюда входит отправка пакетов пульса в Azure, предоставление локальной службе метаданных экземпляров для других приложений для получения сведений об ИДЕНТИФИКАТОРе ресурса Azure и получение маркеров Azure AD для проверки подлинности в других службах Azure. Эта служба работает как учетная запись непривилегированной виртуальной службы в Windows и как пользователь **химдс** в Linux.

* Служба настройки гостя (Гксервице) отвечает за оценку политики Azure на компьютере.

* Служба расширения конфигурации гостя (ExtensionService) отвечает за установку, обновление и удаление расширений (агентов, сценариев или другого программного обеспечения) на компьютере.

Гостевая конфигурация и службы расширения запускаются как локальные системы в Windows и как корневые в Linux.

## <a name="using-a-managed-identity-with-arc-enabled-servers"></a>Использование управляемого удостоверения с серверами с поддержкой Arc

По умолчанию Azure Active Directory назначенное системой удостоверение, используемое Arc, может использоваться только для обновления состояния сервера с поддержкой ARC в Azure. Например, *Последнее замеченное* состояние пульса. При необходимости можно назначить дополнительные роли удостоверениям, если приложение на сервере использует назначенное системой удостоверение для доступа к другим службам Azure.

Хотя служба метаданных гибридного экземпляра может быть доступна для любого приложения, работающего на компьютере, только разрешенные приложения могут запросить маркер Azure AD для назначенного системой удостоверения. При первой попытке доступа к URI маркера служба создаст созданный случайным образом криптографический BLOB-объект в расположении в файловой системе, которое могут читать только доверенные вызывающие объекты. Затем вызывающий объект должен прочитать файл (подтверждающий, что он имеет соответствующее разрешение), и повторить запрос с содержимым файла в заголовке авторизации, чтобы успешно получить маркер Azure AD.

* В Windows для чтения большого двоичного объекта вызывающая сторона должна быть членом локальной группы **администраторов** или группы **приложений расширения гибридного агента** .

* В Linux для чтения большого двоичного объекта вызывающий объект должен быть членом группы **химдс** .

## <a name="using-disk-encryption"></a>Использование шифрования дисков

Агент подключенного компьютера Azure использует проверку подлинности с открытым ключом для взаимодействия со службой Azure. После подключения сервера к службе "Дуга Azure" закрытый ключ сохраняется на диске и используется всякий раз, когда агент взаимодействует с Azure. В случае кражи закрытый ключ можно использовать на другом сервере для взаимодействия со службой и действовать так, как если бы он был исходным сервером. Это включает в себя получение доступа к удостоверению, назначенному системой, и всем ресурсам, к которым имеет доступ удостоверение. Файл закрытого ключа защищен, чтобы разрешить доступ к учетной записи **химдс** только для чтения. Чтобы предотвратить атаки в автономный режим, настоятельно рекомендуется использовать полное шифрование диска (например, BitLocker, DM-encryption и т. д.) на томе операционной системы сервера.

## <a name="next-steps"></a>Дальнейшие действия

Прежде чем оценивать или включать серверы с поддержкой Arc (предварительная версия) на нескольких гибридных виртуальных машинах, ознакомьтесь со статьей [Общие сведения об агенте серверов с поддержкой Azure Arc](agent-overview.md), чтобы узнать о требованиях и методах развертывания, а также получить технические сведения об агенте.
