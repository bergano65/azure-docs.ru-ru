---
title: Устранение неполадок с расширением виртуальной машины на серверах с поддержкой Arc Azure
description: В этой статье рассказывается, как устранять неполадки и устранять проблемы с расширениями виртуальной машины Azure, которые возникают на серверах с поддержкой Arc Azure.
ms.date: 09/24/2020
ms.topic: conceptual
ms.openlocfilehash: 799e5c8ec00a894c6a54c64494edd8f259faf2dc
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100584679"
---
# <a name="troubleshoot-arc-enabled-servers-vm-extension-issues"></a>Устранение неполадок с расширением виртуальной машины на серверах с поддержкой Arc

Эта статья содержит сведения об устранении неполадок и способах устранения проблем, которые могут возникнуть при попытке развернуть или удалить расширения виртуальной машины Azure на серверах с поддержкой ARC. Общие сведения см. в статье [Управление и использование расширений виртуальной машины Azure](./manage-vm-extensions.md).

## <a name="general-troubleshooting"></a>Общие действия по устранению неполадок

Данные о состоянии развертываний расширений можно получить из портал Azure.

Следующие инструкции по устранению неполадок применимы ко всем расширениям виртуальных машин.

1. Чтобы проверить журнал гостевого агента, просмотрите действие при подготовке расширения в `%SystemDrive%\ProgramData\GuestConfig\ext_mgr_logs` для Windows и для Linux в `/var/lib/GuestConfig/ext_mgr_logs` .

2. Дополнительные сведения см. в журналах расширений для конкретного расширения `%SystemDrive%\ProgramData\GuestConfig\extension_logs\<Extension>` . Выходные данные расширения записываются в файл для каждого расширения, установленного в Linux в `/var/lib/GuestConfig/extension_logs` .

3. Дополнительные сведения о кодах ошибок, известных проблемах и т. д. см. в разделах, посвященных конкретным расширениям. Дополнительные сведения об устранении неполадок для каждого расширения можно найти в разделе **Устранение неполадок и поддержка** в обзоре расширения. Сюда входит описание кодов ошибок, записанных в журнал. Статьи расширений связаны в [таблице Extensions](manage-vm-extensions.md#extensions).

4. Просмотрите системные журналы. Проверьте наличие других операций, которые могут мешать работе расширения, например длительные установки других приложений, требующие монопольного доступа к диспетчеру пакетов.

## <a name="troubleshooting-specific-extension-scenarios"></a>Устранение неполадок конкретных сценариев расширения

### <a name="vm-insights"></a>Аналитика виртуальных машин

- При включении Application Insights для сервера с поддержкой Arc Azure устанавливается зависимость и агент Log Analytics. На низком компьютере или в одном из-за незначительного сетевого подключения можно увидеть время ожидания в процессе установки. Корпорация Майкрософт предпринимает меры для решения этой проблемы в агенте подключенного компьютера, чтобы помочь улучшить это условие. В промежуточной области повторная попытка установки может быть выполнена.

### <a name="log-analytics-agent-for-linux"></a>Агент Log Analytics для Linux

- Версия агента Log Analytics 1.13.9 (соответствующая версия расширения — 1.13.15) неправильно помечает отправленные данные ИДЕНТИФИКАТОРом ресурса сервера с поддержкой Arc Azure. Хотя журналы отправляются в службу, при попытке просмотра данных с выбранного включенного сервера после выбора **журналов** или **аналитических** данных никакие данные не возвращаются. Данные можно просмотреть, запустив запросы из журналов Azure Monitor или из Azure Monitor для виртуальных машин, которые входят в область действия рабочей области.

- Некоторые дистрибутивы в настоящее время не поддерживаются агентом Log Analytics для Linux. Агент требует установки дополнительных зависимостей, включая Python 2. Ознакомьтесь с матрицей поддержки и предварительными требованиями [здесь](../../azure-monitor/agents/agents-overview.md#supported-operating-systems).

- Код ошибки 52 в сообщении о состоянии указывает на отсутствие зависимости. Проверьте выходные данные и журналы для получения дополнительных сведений о том, какая зависимость отсутствует.

- В случае сбоя установки ознакомьтесь с разделом **Устранение неполадок и поддержки** в обзоре расширения. В большинстве случаев в сообщении о состоянии содержится код ошибки. Для агента Log Analytics для Linux [здесь](../../virtual-machines/extensions/oms-linux.md#troubleshoot-and-support)объясняются сообщения о состоянии, а также общие сведения об устранении неполадок для этого расширения виртуальной машины.

## <a name="next-steps"></a>Дальнейшие действия

Если вы не нашли здесь свою проблему или рекомендации не позволили ее решить, попробуйте использовать один из следующих каналов для получения дополнительной поддержки.

- Получите ответы от экспертов Azure через [Microsoft Q&а](/answers/topics/azure-arc.html).

- Подпишитесь на [@AzureSupport](https://twitter.com/azuresupport) — официальный канал Microsoft Azure для работы с клиентами. Служба поддержки Azure взаимодействует с сообществом Azure, предоставляя ответы, поддержку и советы экспертов.

- Отправьте запрос в службу поддержки Azure Перейдите на [сайт поддержки Azure](https://azure.microsoft.com/support/options/) и выберите **Получить поддержку**.
