---
title: Настройка агрегированного пространства имен для кэша HPC Azure
description: Как создать клиентские пути для серверной части хранилища с помощью кэша HPC Azure
author: ekpgh
ms.service: hpc-cache
ms.topic: how-to
ms.date: 09/30/2020
ms.author: v-erkel
ms.openlocfilehash: a39b6973767b72e69a82750ab8d0d487c733eda0
ms.sourcegitcommit: 8e7316bd4c4991de62ea485adca30065e5b86c67
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2020
ms.locfileid: "94657114"
---
# <a name="set-up-the-aggregated-namespace"></a>Настройка агрегированного пространства имен

После создания целевых объектов хранилища необходимо также создать для них пути к пространству имен. Клиентские компьютеры используют эти виртуальные пути для доступа к файлам через кэш вместо прямого подключения к внутреннему хранилищу. Эта система позволяет администраторам кэша изменять серверные системы хранения без необходимости переписывать инструкции клиента.

Дополнительные сведения об этой функции см. в статье [планирование обобщенного пространства имен](hpc-cache-namespace.md) .

На странице **пространство имен** в портал Azure показаны пути, используемые клиентами для доступа к данным через кэш. Эта страница используется для создания, удаления или изменения путей к пространству имен. Кроме того, можно настроить пути к пространству имен с помощью Azure CLI.

Все существующие пути клиента перечислены на странице **пространство имен** . Если у целевого объекта хранилища нет путей, он не отображается в таблице.

Столбцы таблицы можно отсортировать, щелкнув стрелки, чтобы лучше понять агрегированное пространство имен кэша.

![снимок экрана страницы пространства имен портала с двумя путями в таблице. Заголовки столбцов: путь к пространству имен, целевой объект хранилища, путь экспорта и подкаталог экспорта. Элементы в первом столбце являются ссылками, которые щелкают. Верхние кнопки: Добавление пути к пространству имен, обновление, удаление](media/namespace-page.png)

## <a name="add-or-edit-client-facing-namespace-paths"></a>Добавление или изменение путей к пространству имен, ориентированному на клиента

Чтобы клиенты могли получить доступ к целевому хранилищу, необходимо создать по крайней мере один путь к пространству имен. (Для получения дополнительных сведений о клиентском доступе см. [в статье подключение кэша HPC для Azure](hpc-cache-mount.md) .)

### <a name="blob-namespace-paths"></a>Пути к пространству имен BLOB-объектов

У целевого объекта хранилища BLOB-объектов Azure может быть только один путь к пространству имен.

Следуйте приведенным ниже инструкциям, чтобы задать или изменить путь с помощью портал Azure или Azure CLI.

### <a name="portal"></a>[Портал](#tab/azure-portal)

В портал Azure загрузите страницу параметры **пространства имен** . На этой странице можно добавлять, изменять и удалять пути к пространству имен.

* **Добавить новый путь:** Нажмите кнопку **+ Добавить** вверху и введите сведения на панели Правка.

  * Выберите целевой объект хранилища в раскрывающемся списке. (На этом снимке экрана невозможно выбрать целевой объект хранилища BLOB-объектов, так как у него уже есть путь к пространству имен.)

    ![Снимок экрана: поля "Изменить" нового пространства имен с видимым средством выбора целевого объекта хранилища](media/namespace-select-storage-target.png)

  * Для целевого объекта хранилища BLOB-объектов Azure в качестве путей экспорта и подкаталогов автоматически устанавливается значение ``/`` .

* **Изменить существующий путь:** Щелкните путь к пространству имен. Откроется панель "Правка", в которой можно изменить путь.

  ![Снимок экрана страницы пространства имен после щелчка по пути к пространству имен BLOB-объектов. поля "Изменить" отображаются на панели справа](media/edit-namespace-blob.png)

* **Удалить путь к пространству имен:** Установите флажок слева от пути и нажмите кнопку **Удалить** .

### <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

[Настройте Azure CLI для кэша HPC Azure](./az-cli-prerequisites.md).

При использовании Azure CLI необходимо добавить путь к пространству имен при создании целевого объекта хранилища. Дополнительные сведения см. [в статье Добавление нового целевого объекта хранилища BLOB-объектов Azure](hpc-cache-add-storage.md?tabs=azure-cli#add-a-new-azure-blob-storage-target) .

Чтобы обновить путь к пространству имен целевого объекта, используйте команду [AZ HPC-Cache BLOB-хранилище-целевой объект обновления](/cli/azure/ext/hpc-cache/hpc-cache/blob-storage-target#ext-hpc-cache-az-hpc-cache-blob-storage-target-update) . Аргументы команды Update похожи на аргументы в команде CREATE, за исключением того, что вы не передаете имя контейнера или учетную запись хранения.

Невозможно удалить путь к пространству имен из целевого объекта хранилища BLOB-объектов с Azure CLI, но можно перезаписать путь другим значением.

---

### <a name="nfs-namespace-paths"></a>Пути к пространству имен NFS

Целевой объект хранилища NFS может иметь несколько виртуальных путей, если каждый путь представляет отдельный экспорт или подкаталог в одной системе хранения.

При планировании пространства имен для целевого объекта хранилища NFS следует помнить, что каждый путь должен быть уникальным и не может быть подкаталогом другого пути к пространству имен. Например, если имеется путь к пространству имен, то ``/parent-a`` нельзя также создавать пути пространств имен, такие как ``/parent-a/user1`` и ``/parent-a/user2`` . Эти пути к каталогам уже доступны в пространстве имен как подкаталоги ``/parent-a`` .

Все пути пространств имен для системы хранения NFS создаются на одном целевом объекте хранилища. Большинство конфигураций кэша может поддерживать до десяти путей к пространству имен на целевое хранилище, но более крупные конфигурации могут поддерживать до 20.

В этом списке показано максимальное число путей к пространству имен на конфигурацию.

* Пропускная способность до 2 ГБ/с:

  * 3 ТБ кэша — 10 путей к пространству имен
  * 6 ТБ кэш-пространства имен — 10
  * 23 ТБ кэша-20 путей к пространству имен

* Пропускная способность до 5 ГБ/с:

  * 6 ТБ кэш-пространства имен — 10
  * 12 ТБ кэша — 10 путей к пространству имен
  * 24 ТБ кэша-20 путей к пространству имен

* Пропускная способность до 8 ГБ/с:

  * 12 ТБ кэша — 10 путей к пространству имен
  * путь к пространству имен в 24 ТБ из кэша-10
  * 48 ТБ кэша-20 путей к пространству имен

Для каждого пути к пространству имен NFS укажите путь к клиенту, экспорт системы хранения и, при необходимости, подкаталог экспорта.

### <a name="portal"></a>[Портал](#tab/azure-portal)

В портал Azure загрузите страницу параметры **пространства имен** . На этой странице можно добавлять, изменять и удалять пути к пространству имен.

* **Чтобы добавить новый путь, выполните следующие действия.** Нажмите кнопку **+ Добавить** вверху и введите сведения на панели Правка.
* **Чтобы изменить существующий путь, выполните следующие действия.** Щелкните путь к пространству имен. Откроется панель "Правка", в которой можно изменить путь.
* **Чтобы удалить путь к пространству имен, сделайте следующее:** Установите флажок слева от пути и нажмите кнопку **Удалить** .

Заполните эти значения для каждого пути к пространству имен:

* **Путь к пространству имен** — путь к файлу клиента.

* **Целевой объект хранилища** . при создании нового пути к пространству имен выберите целевое хранилище в раскрывающемся меню.

* **Путь экспорта** — введите путь к экспорту NFS. Убедитесь, что имя экспорта правильно введено. портал проверяет синтаксис этого поля, но не проверяет его, пока не будет отправлено изменение.

* **Export подкаталог** — если вы хотите, чтобы этот путь подключились к конкретному вложенному каталогу экспорта, введите его здесь. Если нет, оставьте это поле пустым.

![снимок экрана страницы пространства имен портала с открытой страницей обновления справа](media/update-namespace-nfs.png)

### <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

[Настройте Azure CLI для кэша HPC Azure](./az-cli-prerequisites.md).

При использовании Azure CLI необходимо добавить по крайней мере один путь к пространству имен при создании целевого объекта хранилища. Дополнительные сведения см. [в статье Добавление нового целевого объекта хранилища NFS](hpc-cache-add-storage.md?tabs=azure-cli#add-a-new-nfs-storage-target) .

Чтобы обновить путь к пространству имен целевого объекта или добавить дополнительные пути, используйте команду [AZ HPC-Cache NFS-Storage-Target Update](/cli/azure/ext/hpc-cache/hpc-cache/nfs-storage-target#ext-hpc-cache-az-hpc-cache-nfs-storage-target-update) . Используйте ``--junction`` параметр, чтобы указать все необходимые пути к пространству имен.

Параметры, используемые для команды Update, похожи на команду CREATE, за исключением того, что не передаются сведения о системе хранения (IP-адрес или имя узла), а модель использования является необязательной. Дополнительные сведения о синтаксисе параметра см. в статье [Добавление нового целевого объекта хранилища NFS](hpc-cache-add-storage.md?tabs=azure-cli#add-a-new-nfs-storage-target) ``--junction`` .

---

## <a name="next-steps"></a>Дальнейшие действия

После создания Объединенного пространства имен для целевых объектов хранилища можно подключить клиенты к кэшу. Дополнительные сведения см. в этих статьях.

* [Mount the Azure HPC Cache](hpc-cache-mount.md) (Подключение Azure HPC Cache)
* [Перемещение данных в хранилище BLOB-объектов Azure](hpc-cache-ingest.md)
