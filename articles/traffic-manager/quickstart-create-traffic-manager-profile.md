---
title: Краткое руководство. Создание профиля диспетчера трафика для обеспечения высокодоступных приложений с помощью портала Azure
description: В этом кратком руководстве показано, как создать профиль диспетчера трафика для сборки высокодоступных веб-приложений.
services: traffic-manager
dauthor: kumudd
Customer intent: As an IT admin, I want to direct user traffic to ensure high availability of web applications.
ms.service: traffic-manager
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/28/2018
ms.author: kumud
ms.openlocfilehash: f24bcebb04c3cb17b5e0420695504541c54e88f3
ms.sourcegitcommit: d4f728095cf52b109b3117be9059809c12b69e32
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2019
ms.locfileid: "54198225"
---
# <a name="quickstart-create-a-traffic-manager-profile-for-a-highly-available-web-application"></a>Краткое руководство. Создание профиля диспетчера трафика для веб-приложения высокого уровня доступности

В этом кратком руководстве показано, как создать профиль диспетчера трафика, который обеспечивает высокий уровень доступности веб-приложения.

В этом кратком руководстве вы узнаете о двух экземплярах веб-приложения. Каждый из них выполняется в разном регионе Azure. Будет создан профиль диспетчера трафика, который основывается на [приоритете конечной точки](traffic-manager-routing-methods.md#priority). Профиль будет направлять пользовательский трафик к первичному сайту, который запускает веб-приложение. Диспетчер трафика постоянно отслеживает веб-приложение. Если основной сайт недоступен, он предоставляет автоматический переход на резервный сайт.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).

## <a name="sign-in-to-azure"></a>Вход в Azure

Войдите на [портале Azure](https://portal.azure.com).

## <a name="prerequisites"></a>Предварительные требования

Для этого краткого руководства необходимо развернуть два экземпляра веб-приложения в разных регионах Azure (*восточная часть США* и *Западная Европа*). Каждый будет использоваться в качестве основных конечных точек и конечных точек отработки отказа для диспетчера трафика.

1. Вверху с левой стороны экрана выберите **Создать ресурс** > **Интернет** > **Веб-приложение**.
2. На панели **Веб-приложение** введите или выберите следующие параметры:

    | Параметр | Значение |
    | ------- | ----- |
    | Имя приложения. | Введите уникальное имя для вашего веб-приложения.  |
    | Подписка | Выберите подписку, которая будет использоваться в веб-приложении. |
    | Группа ресурсов | Выберите **Создать новую**, а затем введите *myResourceGroupTM1*. |
    | ОС | Выберите **Windows** в качестве операционной системы. |
    | Опубликовать | Выберите **Код** как формат, который следует опубликовать. |

3. Выберите **План службы приложений или расположение**.
4. В **План службы приложений** выберите команду **Создать**.
5. В **Новый план службы приложений** введите или выберите следующие параметры:

    | Параметр | Значение |
    | ------- | ----- |
    | План службы приложений | Введите *myAppServicePlanEastUS*. |
    | Расположение | Восточная часть США |
    | Ценовой уровень | Стандартный S1 |

6. Нажмите кнопку **ОК**.

7. На панели **Веб-приложение** выберите **Создать**. Если веб-приложение развертывается успешно, создается веб-сайт по умолчанию.

8. Повторите шаги 1–7 с приведенными ниже параметрами, чтобы создать второй веб-сайт в другом регионе Azure.

    | Параметр | Значение |
    | --------| ----- |
    | ИМЯ | Введите уникальное имя для вашего веб-приложения. |
    | Подписка | Выберите подписку, которая будет использоваться в веб-приложении. |
    | Группа ресурсов | Выберите **Создать**, а затем введите *myResourceGroupTM2*. |
    | ОС | Выберите **Windows** в качестве операционной системы. |
    | Опубликовать | Выберите **Код** как формат, который следует опубликовать. |
    | Расположение или план службы приложений | Введите *myAppServicePlanWestEurope*. |
    | Расположение | Западная Европа |
    | Ценовой уровень | Стандартный S1 |

## <a name="create-a-traffic-manager-profile"></a>Создание профиля диспетчера трафика

Создайте профиль диспетчера трафика, который направляет пользовательский трафик по приоритету конечной точки.

1. В верхней левой части экрана выберите **Создать ресурс** > **Сети** > **Профиль диспетчера трафика**.
2. В разделе **Создать профиль диспетчера трафика** введите или выберите следующие параметры:

    | Параметр | Значение |
    | --------| ----- |
    | ИМЯ | Для профиля диспетчера трафика введите уникальное имя.|
    | Метод маршрутизации | Выберите **Приоритет**.|
    | Подписка | Выберите подписку, к которой будет применяться профиль диспетчера трафика. |
    | Группа ресурсов | Выберите *myResourceGroupTM1*.|
    | Расположение |Эти параметры касаются расположения группы ресурсов. Это не влияет на профиль диспетчера трафика, который будет развернут глобально.|

3. Нажмите кнопку **Создать**.

## <a name="add-traffic-manager-endpoints"></a>Добавление конечных точек диспетчера трафика

Добавьте веб-сайт в регионе *Восточная часть США* как основную конечную точку для маршрутизации всего пользовательского трафика. Добавьте веб-сайт в регионе *Западная Европа* как конечную точку отработки отказа. Если основная конечная точка недоступна, трафик автоматически направляется на конечную точку отработки отказа.

1. На панели поиска портала введите имя созданного в предыдущем разделе профиля диспетчера трафика.
2. В результатах поиска выберите профиль.
3. В колонке **Профиль диспетчера трафика** в разделе **Параметры** щелкните **Конечные точки**, а затем выберите **Добавить**.
4. Введите или выберите следующие параметры:

    | Параметр | Значение |
    | ------- | ------|
    | type | Выберите **Конечная точка Azure**. |
    | ИМЯ | Введите *myPrimaryEndpoint*. |
    | Тип целевого ресурса | Выберите **Служба приложений Azure**. |
    | Целевой ресурс | Щелкните **Выбрать службу приложений** > **Восточная часть США**. |
    | Приоритет | Выберите **1**. Если трафик находится в работоспособном состоянии, он направляется к этой конечной точке. |

    ![Снимок экрана: где в профиле диспетчера трафика добавить конечную точку.](./media/quickstart-create-traffic-manager-profile/add-traffic-manager-endpoint.png)

5. Нажмите кнопку **ОК**.
6. Для создания конечной точки отработки отказа для своего второго региона Azure повторите шаги 3 и 4, используя следующие параметры:

    | Параметр | Значение |
    | ------- | ------|
    | type | Выберите **Конечная точка Azure**. |
    | ИМЯ | Введите *myFailoverEndpoint*. |
    | Тип целевого ресурса | Выберите **Служба приложений Azure**. |
    | Целевой ресурс | Щелкните **Выбрать службу приложений** > **Западная Европа**. |
    | Приоритет | Выберите **2**. Если основная конечная точка находится в неработоспособном состоянии, весь трафик направляется к конечной точке отработки отказа. |

7. Нажмите кнопку **ОК**.

После добавления двух конечных точек, они отображаются на панели **Профиль диспетчера трафика**. Обратите внимание, что теперь их состояние мониторинга — **В сети**.

## <a name="test-traffic-manager-profile"></a>Тестирование профиля диспетчера трафика

В этом разделе произойдет проверка доменного имени профиля диспетчера трафика. Основная конечная точка должна быть недоступной. В результате вы увидите, что веб-приложение по-прежнему доступно. Причиной этого является отправление трафика к конечной точке отработки отказа диспетчером трафика.

### <a name="check-the-dns-name"></a>Проверка DNS-имени

1. На панели поиска портала выполните поиск имени **профиля диспетчера трафика**, созданного в предыдущем разделе.
2. Выберите профиль диспетчера трафика. Появится страница **Обзор**.
3. В **профиле диспетчера трафика** отображается DNS-имя только что созданного профиля диспетчера трафика.
  
   ![Снимок экрана о расположении DNS-имени диспетчера трафика](./media/quickstart-create-traffic-manager-profile/traffic-manager-dns-name.png)

### <a name="view-traffic-manager-in-action"></a>Просмотр диспетчера трафика в действии

1. В веб-браузере введите DNS-имя вашего профиля диспетчера трафика, чтобы просмотреть веб-сайт по умолчанию для веб-приложения.

    > [!NOTE]
    > В этом кратком сценарии все запросы направляются к основной конечной точке, которой присваивается **Приоритет 1**.

    ![Снимок экрана веб-страницы для подтверждения доступности профиля диспетчера трафика](./media/quickstart-create-traffic-manager-profile/traffic-manager-test.png)

2. Чтобы просмотреть отработку отказа диспетчера трафика в действии, отключите ваш основной сайт.
    1. На странице профиля диспетчера трафика из раздела **Обзор** выберите **myPrimaryEndpoint**.
    2. Для *MyPrimaryEndpoint* выберите **Отключить** > **Сохранить**.
    3. Закройте **myPrimaryEndpoint**. Убедитесь, что для состояния установлено значение **Отключено**.
3. Скопируйте DNS-имя вашего профиля диспетчера трафика из предыдущего шага, чтобы просмотреть веб-сайт в новом сеансе веб-браузера.
4. Убедитесь, что веб-приложение по-прежнему доступно.

Основная конечная точка недоступна, поэтому вас направили к конечной точки отработки отказа.

## <a name="clean-up-resources"></a>Очистка ресурсов

Выполнив все, удалите группы ресурсов, веб-приложения и все связанные ресурсы. Чтобы сделать это, отдельно выберите каждый элемент из панели мониторинга и щелкните **Удалить** в верхней части каждой страницы.

## <a name="next-steps"></a>Дополнительная информация

В этом кратком руководстве был создан профиль диспетчера трафика. Он позволяет перенаправлять трафик пользователя для веб-приложений высокого уровня доступности. Дополнительные сведения о маршрутизации трафика см. в руководствах по диспетчеру трафика.

> [!div class="nextstepaction"]
> [Руководства по диспетчеру трафика](tutorial-traffic-manager-improve-website-response.md)