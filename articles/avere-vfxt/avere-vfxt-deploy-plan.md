---
title: Планирование системы Avere vFXT — Azure
description: Здесь описывается планирование, которое нужно выполнить перед развертыванием системы Avere vFXT для Azure
author: ekpgh
ms.service: avere-vfxt
ms.topic: conceptual
ms.date: 01/29/2019
ms.author: v-erkell
ms.openlocfilehash: e60c92c22382112558307062afdeb87e08075765
ms.sourcegitcommit: a7331d0cc53805a7d3170c4368862cad0d4f3144
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2019
ms.locfileid: "55298931"
---
# <a name="plan-your-avere-vfxt-system"></a>Планирование системы Avere vFXT

В этой статье описывается, как спланировать новую систему Avere vFXT для кластера Azure, чтобы расположение и размер создаваемого кластера соответствовали вашим требованиям. 

Прежде чем перейти в Azure Marketplace или к созданию виртуальных машин, подумайте, как кластер будет взаимодействовать с другими элементами в Azure. Спланируйте, где в частной сети и подсети будут находиться ресурсы кластера, а также решите, где будет ваше серверное хранилище. Создаваемые узлы кластера должны обладать достаточной производительностью для поддержки рабочих процессов. 

Ознакомьтесь с дополнительными сведениями, чтобы узнать больше.

## <a name="resource-group-and-network-infrastructure"></a>Группа ресурсов и инфраструктура сети

Определите, где будут находиться элементы развертывания Avere vFXT для Azure. На схеме ниже показано возможное упорядочение компонентов Avere vFXT для Azure:

![На схема отображается контроллер кластера и виртуальные машины кластера в одной подсети. Вокруг периметра подсети находится периметр виртуальной сети. Внутри виртуальной сети есть шестиугольник, представляющий конечную точку службы хранилища. Он связан с хранилищем BLOB-объектов за пределами виртуальной сети с помощью пунктирной стрелки.](media/avere-vfxt-components-option.png)

При планировании сетевой инфраструктуры системы Avere vFXT нужно следовать таким рекомендациям:

* Управление всеми элементами должно осуществляться с помощью новой подписки, созданной для развертывания Avere vFXT. Основные преимущества: 
  * Упрощенное отслеживание расходов — просмотр и аудит всех расходов на ресурсы, инфраструктуру и вычислительные циклы в одной подписке.
  * Более простая очистка — возможность удалить всю подписку по завершении работы с проектом.
  * Удобное секционирование квот ресурсов — защита других критически важных рабочих нагрузок от возможного регулирования ресурсов при подключении большого числа клиентов, используемых для высокопроизводительных вычислений, путем изоляции клиентов и кластера Avere vFXT в рамках одной подписки.

* Разместите клиентские системы вычисления близко к кластеру vFXT. Серверное хранилище может находиться на более дальнем расстоянии.  

* Для упрощения разместите кластер vFXT и виртуальную машину контроллера кластера в той же виртуальной сети и в той же группе ресурсов. Они также должны использовать одну учетную запись хранения. (Контроллер кластера создает кластер, а также может использоваться для управления кластером из командной строки.)  

* Кластер должен быть расположен в собственной подсети, чтобы избежать конфликтов IP-адресов с клиентскими или вычислительными ресурсами. 

## <a name="ip-address-requirements"></a>Требования к IP-адресам 

Убедитесь, что у кластера подсети есть достаточно большой диапазон IP-адресов для поддержки кластера. 

Кластер Avere vFXT использует следующие IP-адреса:

* IP-адрес для управления одним кластером. Этот адрес можно перемещать между узлами в кластере, но он всегда доступен, что позволяет подключаться к средству настройки на панели управления Avere.
* Для каждого узла кластера требуется:
  * По крайней мере один IP-адрес, ориентированный на клиента. (Все адреса, ориентированные на клиента, управляются кластером *vserver*, который при необходимости может перемещать их между узлами.)
  * Один IP-адрес для взаимодействия с кластером.
  * Один IP-адрес экземпляра (назначенный виртуальной машине).

Если вы используете хранилище BLOB-объектов Azure, также могут потребоваться IP-адреса из виртуальной сети кластера.  

* Учетной записи хранилища BLOB-объектов Azure нужно по крайней мере пять IP-адресов. Помните об этом требовании, если хранилище BLOB-объектов находится в той же виртуальной сети, что и кластер.
* Если для кластера вы используете хранилище BLOB-объектов Azure, которое находится за пределами виртуальной сети, необходимо создать конечную точку службы хранилища внутри виртуальной сети. Эта конечная точка не использует IP-адрес.

У вас есть возможность найти сетевые ресурсы и хранилище BLOB-объектов (если используется) в разных группах ресурсов кластера.

## <a name="vfxt-node-sizes"></a>Размеры узлов vFXT 

Виртуальные машины, выступающие в качестве узлов кластера, определяют пропускную способность запросов и емкость хранилища кэша. Вы можете выбрать из двух типов экземпляров с разной памятью, числом процессоров и характеристиками локального хранилища. 

Каждый узел vFXT будет идентичен. То есть если вы создаете кластер с тремя узлами, вы получите три виртуальные машины одинакового типа и размера. 

| Тип экземпляра | Число виртуальных ЦП | Память  | Локальное хранилище на SSD-накопителях  | Максимальное число дисков данных | Пропускная способность диска без кэширования | Сетевая карта (количество) |
| --- | --- | --- | --- | --- | --- | --- |
| Standard_D16s_v3 | 16  | 64 Гиб  | 128 ГБ  | 32 | 25 600 операций ввода-вывода в секунду <br/> 384 Мбит/с | 8000 Мбит/с (8) |
| Standard_E32s_v3 | 32  | 256 Гиб | 512 ГБ  | 32 | 51 200 операций ввода-вывода в секунду <br/> 768 Мбит/с | 16 000 Мбит/с (8)  |

Кэш диска на каждый узел настраивается и может быть размером от 1000 до 8000 ГБ. 1 ТБ на узел — это рекомендуемый размер кэша для узлов Standard_D16s_v3, а 4 ТБ на узел — для узлов Standard_E32s_v3.

Дополнительные сведения об этих виртуальных машинах см. в следующих статьях Microsoft Azure:

* [Размеры виртуальных машин общего назначения](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-general)
* [Размеры виртуальных машин, оптимизированных для операций в памяти](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-memory)

## <a name="account-quota"></a>Квота учетной записи

Убедитесь, что в вашей подписке достаточно ресурсов для запуска кластера Avere vFXT, а также используемых вычислительных или клиентских систем. Дополнительные сведения см. в разделе [Quota for the vFXT cluster](avere-vfxt-prereqs.md#quota-for-the-vfxt-cluster) (Квота для кластера vFXT).

## <a name="back-end-data-storage"></a>Серверное хранилище данных

Где кластер Avere vFXT должен хранить ваши данные, если их нет в кэше? Определите, где будет храниться ваш рабочий набор долгосрочно: в новом контейнере больших двоичных объектов или в существующей облачной или аппаратной системе хранения. 

Если вы хотите использовать хранилище BLOB-объектов Azure для серверной части, в процессе разработки кластера vFXT следует создать контейнер. Этот сценарий создает и настраивает новый контейнер так, что его можно использовать сразу после создания. 

Дополнительные сведения см. в разделе о [создании Avere vFXT для Azure](avere-vfxt-deploy.md#create-the-avere-vfxt-for-azure).

> [!NOTE]
> Только пустые контейнеры хранилища BLOB-объектов можно использовать в качестве основных файловых хранилищ для системы Avere vFXT. В vFXT должна быть возможность управления хранилищем объектов без необходимости сохранения существующих данных. 
>
> Чтобы узнать, как эффективно копировать данные в новый контейнер кластера с использованием клиентских компьютеров и кэша vFXT Avere, обратитесь к статье [Moving data to the vFXT cluster - Parallel data ingest](avere-vfxt-data-ingest.md) (Перемещение данных в кластер vFXT. Прием параллельных данных).

Если вы хотите использовать существующую локальную систему хранения, ее необходимо добавить в кластер vFXT после его создания. Подробные инструкции о том, как добавить существующую систему хранения в кластер vFXT Avere, см. в разделе [Configure storage](avere-vfxt-add-storage.md) (Настройка контейнера).

## <a name="cluster-access"></a>Доступ к кластеру 

Кластер Avere vFXT для Azure расположен в частной подсети и не имеет общедоступного IP-адреса. У вас должен быть какой-либо метод доступа к частной подсети для администрирования кластера и клиентских подключений. 

Варианты доступа включают в себя:

* Узел перехода — назначьте общедоступный IP-адрес отдельной виртуальной машине в частной сети и используйте его для создания туннеля SSL к узлам кластера. 

  > [!TIP]
  > Если вы настроите общедоступный IP-адрес на контроллере кластера, контроллер можно использовать в качестве узла перехода. Дополнительные сведения см. в разделе [Контроллер кластера как узел перехода](#cluster-controller-as-jump-host).

* Виртуальная частная сеть (VPN) — настройте VPN типа "точка — сеть" или "сеть — сеть" для частной сети.

* Azure ExpressRoute — настройте частное подключение через партнер ExpressRoute. 

Дополнительные сведения об этих параметрах см. в разделе [Обмен данными через Интернет](../virtual-network/virtual-networks-overview.md#communicate-with-the-internet).

### <a name="cluster-controller-as-jump-host"></a>Контроллер кластера как узел перехода

Контроллер кластера с настроенным общедоступным IP-адресом можно использовать в качестве узла перехода для подключения к кластеру Avere vFXT за пределами частной подсети. Однако, так как контроллер имеет права доступа для изменения узлов кластера, это создает небольшую угрозу безопасности.  

Для повышения безопасности при использовании общедоступного IP-адреса создайте группу безопасности сети, чтобы разрешить входящий трафик только через порт 22.

При создании кластера можно выбрать, следует ли создавать общедоступный IP-адрес на контроллере кластера. 

* Если вы создадите виртуальную сеть или подсеть, контроллеру кластера будет назначен общедоступный IP-адрес.
* При выборе существующей виртуальной сети и подсети контроллер кластера будет иметь только частные IP-адреса. 

## <a name="next-step-understand-the-deployment-process"></a>Следующий шаг: ознакомление с процессом развертывания

В статье с [общими сведениями о развертывании](avere-vfxt-deploy-overview.md) дается общее представление всех шагов, необходимых для создания системы Avere vFXT для Azure и ее подготовки для обработки данных.  