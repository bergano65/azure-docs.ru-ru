---
title: Настройка и администрирование проектов службы "Записные книжки Azure"
description: Сведения об управлении метаданными проекта, файлами проекта, средой проекта, а также о настройке с помощью пользовательского интерфейса службы "Записные книжки Azure" и прямого доступа через терминал.
services: app-service
documentationcenter: ''
author: kraigb
manager: douge
ms.assetid: 35dd6ff1-a14a-4a2e-b173-6d8467de3e89
ms.service: azure-notebooks
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/25/2019
ms.author: kraigb
ms.openlocfilehash: d1f94c5fd774b51f57da2885d1ccd8eb909cd3c0
ms.sourcegitcommit: c174d408a5522b58160e17a87d2b6ef4482a6694
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59268013"
---
# <a name="manage-and-configure-projects"></a>Администрирование и настройка проектов

Проект в службе "Записные книжки Azure" — это по сути конфигурация базовой виртуальной машины Linux, в которой выполняются записные книжки Jupyter, а также папка с файлами и описательные метаданные. Панель мониторинга проекта в службе "Записные книжки Azure" позволяет управлять файлами и настраивать при необходимости характеристики проекта:

- Уровень вычислений, на котором выполняется проект. Это может быть бесплатный уровень или виртуальная машина Azure.
- Метаданные проекта включают в себя имя, описание, идентификатор, который используется при общем доступе к проекту, а также параметр, определяющий, является проект открытым или закрытым.
- Управление записной книжкой, данными и другими файлами проекта осуществляется так же, как и с любой файловой системой.
- Настройка среды проекта осуществляется либо путем запуска сценариев, либо напрямую с помощью терминала.
- Журналы, доступ к которым осуществляется в окне терминала.

> [!Note]
> Описанные здесь возможности управления и настройки доступны только для владельца проекта, который изначально его создал. Тем не менее вы можете клонировать проект в собственную учетную запись. В этом случае вы станете владельцем и сможете при необходимости настраивать проект.

Служба "Записные книжки Azure" запускает базовую виртуальную машину при каждом выполнении записной книжки или другого файла. Сервер автоматически сохраняет файлы и завершает работу после 60 минут бездействия. Сервер также можно остановить в любое время с помощью команды **Shutdown** (Завершить работу) (сочетание клавиш: h).

## <a name="compute-tier"></a>Уровень вычислений

В раскрывающемся списке **Выполнение** на панели мониторинга проекта указывается уровень вычислений, на котором выполняется проект. По умолчанию проекты выполняются на уровне **бесплатных вычислений**, который ограничен 4 ГБ памяти и 1 ГБ данных, чтобы избежать злонамеренного использования:

![Раскрывающийся список уровня вычисления на панели мониторинга проекта](media/project-compute-tier-list.png)

Вы можете обойти эти ограничения, используя другую виртуальную машину, подготовленную в подписке Azure. Необходимо установить и запустить JupyterHub на этой виртуальной машине. Хорошими вариантами являются образы Виртуальных машин для обработки и анализа (любые операционные системы), так как в них по умолчанию включен JupyterHub.

Когда виртуальная машина Azure будет настроена подходящим образом, в раскрывающемся списке выберите вариант **Direct Compute** (Прямые вычисления). Вам понадобится ввести имя (для отображения в списке), IP-адрес, порт (обычно 8000, порт по умолчанию, который прослушивает JupyterHub) и учетные данные виртуальной машины.

![Запрос на сбор данных о сервере для варианта прямого вычисления](media/project-compute-tier-direct.png)

Если выполняются следующие условия, в раскрывающемся списке также отображаются экземпляры [Виртуальной машины для обработки и анализа данных](/azure/machine-learning/data-science-virtual-machine). (Если любое из этих условий не соблюдается, вы все еще можете подключиться к DSVM с помощью варианта прямого вычисления и ввести значения, полученные с портала Azure.)

- Вы вошли в Записные книжки Azure с помощью учетной записи, использующей Azure Active Directory, например учетной записи компании.
- Ваша учетная запись подключена к подписке Azure.
- В этой подписке имеется одна или несколько виртуальных машин с доступом читателя, которые используют образ Виртуальной машины для обработки и анализа данных для Linux (Ubuntu).

![Экземпляры Виртуальной машины для обработки и анализа данных в раскрывающемся списке на панели мониторинга проекта](media/project-compute-tier-dsvm.png)

При выборе экземпляра DSVM Записные книжки Azure могут запросить учетные данные конкретного компьютера, используемые при создании виртуальной машины.

Чтобы создать экземпляр DSVM, следуйте инструкциям в статье [Подготовка виртуальной машины Linux (Ubuntu) для обработки и анализа данных](/azure/machine-learning/data-science-virtual-machine/dsvm-ubuntu-intro). Используйте образ **Виртуальная машина для обработки и анализа данных для Linux (Ubuntu)**, если вы хотите, чтобы DSVM отображалась в раскрывающемся списке в Записных книжках Azure.  Если по каким-либо другим причинам вам требуется использовать образ Windows или CentOS, вы можете использовать вариант **Direct Compute** (Прямые вычисления), чтобы подключиться к DSVM вручную.

> [!IMPORTANT]
> При использовании виртуальных машин прямой вычислений или обработки и анализа данных, записные книжки, выполняющихся на них должен быть полностью автономными. В настоящее время, записных книжек Azure копирует только *.ipynb* файла к виртуальной Машине, но не копируются все остальные файлы в проекте. Таким образом записных книжек на другие виртуальные машины не смогут найти другие файлы проекта.
>
> Можно обойти это поведение двумя способами:
>
> 1. Скопируйте файлы проекта вручную к виртуальной Машине.
>
> 2. Внедрить файлы записной книжки установки запустить до основного записную книжку. В записной книжке установки создайте ячейку кода для каждого файла, где ячейка содержит содержимое файла. Затем в верхней части каждой ячейки, вставьте команду `%%writefile <filename>`, где `<filename>` — это имя файла для получения содержимого. При запуске записной книжки, он создает все эти файлы на виртуальной Машине. Например, см. в разделе [файл setup.ipynb в демонстрации Microsoft Pet обнаружения](https://github.com/Microsoft/connect-petdetector/blob/master/setup.ipynb) (GitHub).
>
>     ![С помощью %% writefile команды в начале ячейку кода](media/setup-notebook-writefile-command.png)

## <a name="edit-project-metadata"></a>Редактирование метаданных проекта

На панели мониторинга проекта щелкните **Project Settings** (Параметры проекта), а затем выберите вкладку **Information** (Сведения), которая содержит метаданные проекта, описанные в следующей таблице. Метаданные проекта можно изменить в любое время.

| Параметр | ОПИСАНИЕ |
| --- | --- |
| Имя проекта | Понятное имя проекта, которое служба "Записные книжки Azure" будет отображать в соответствующих представлениях. Например, Hello World на Python. |
| Идентификатор проекта | Пользовательский идентификатор, который включается в URL-адрес для общего доступа к проекту. Этот идентификатор можно использовать только буквы, цифры и дефисы, должно превышать 30 символов и не может быть [зарезервировано идентификатор проекта](create-clone-jupyter-notebooks.md#reserved-project-ids). Если вам сложно выбрать идентификатор, рекомендуем самый распространенный вариант — преобразовать в нижний регистр имя проекта и заменить все пробелы дефисами, например так: my-notebook-project (при необходимости усекая до ограничения по длине). |
| Public project (Общедоступный проект) | Если задан этот параметр, доступ к проекту разрешается любому пользователю, у которого есть ссылка. В случае создания закрытого проекта снимите этот флажок. |
| Hide clones (Скрыть клоны) | Если задан этот параметр, другим пользователям не будет виден список клонов, созданных для этого проекта. Скрывать клоны удобно для проектов, которые совместно используют разные люди, не являющихся частью одной и той же организации, например, при использовании записной книжки для урока в классе. |

> [!Important]
>
> Изменение идентификатора проекта делает недействительными все ссылки на проект, которыми вы ранее могли поделиться.

## <a name="manage-project-files"></a>Управление файлами проекта

На панели мониторинга проекта отображается содержимое системы папок проекта. Используя различные команды, можно управлять этими файлами.

### <a name="create-new-files-and-folders"></a>Создание файлов и папок

Команда **+New** (+ Создать) (сочетание клавиш: n) создает файлы или папки. При использовании этой команды сначала выберите тип создаваемого элемента:

| Тип элемента | ОПИСАНИЕ | Поведение команды |
| --- | --- | --- |
| **Записная книжка** | Записная книжка Jupyter | Отображает всплывающее окно, в котором нужно указать имя файла и язык записной книжки. |
| **Папка** | Вложенная папка | Создает редактируемое поле в списке файлов проекта, в которое следует ввести имя папки. |
| **Пустой файл** | Файл, в котором можно хранить любое содержимое, например текст, данные, и т. д. | Создает редактируемое поле в списке файлов проекта, в которое следует ввести имя файла. |
| **Markdown** | Файл Markdown. | Создает редактируемое поле в списке файлов проекта, в которое следует ввести имя файла. |

### <a name="upload-files"></a>Отправка файлов

Команда **Upload** (Отправить) позволяет импортировать данные из других расположений двумя способами: **From URL** (С URL-адреса) и **From Computer** (С компьютера). Дополнительные сведения см. в статье [Work with data files in Azure Notebook projects](work-with-project-data-files.md) (Работа с файлами данных в проектах службы "Записные книжки Azure").

### <a name="select-file-specific-commands"></a>Выбор команд для работы с файлами

Для каждого элемента в списке файлов проекта доступны команды контекстного меню, открываемого щелчком правой кнопкой мыши:

![Команды в контекстном меню файла](media/project-file-commands.png)

| Get-Help | Сочетания клавиш | Действие |
| --- | --- | --- |
| Run (Запустить) | r (или щелчок) | Запускает файл записной книжки. Другие типы файлов открываются для просмотра.  |
| Copy Link (Копировать ссылку) | y | Копирует ссылку на файл в буфер обмена. |
| Run in Jupyter Lab (Запустить в лаборатории Jupyter) | j | Запускает записную книжку в JupyterLab — интерфейсе, более ориентированном на разработчиков, чем обычный интерфейс Jupyter. |
| Preview (Предварительный просмотр) | p | Открывает предварительную HTML-версию файла. Для записных книжек предварительная версия — это отображение записной книжки только для чтения. Дополнительные сведения см. в разделе [Предварительный просмотр](#preview). |
| Edit file (Изменить файл) | i | Открывает файл для редактирования. |
| Download (Скачать) | d | Загружает ZIP-файл, содержащий файл или содержимое папки. |
| Rename (Переименовать) | a | Запрашивает новое имя для файла или папки. |
| Delete (Удалить) | x | Запрашивает подтверждение, а затем окончательно удаляет файл из проекта. Такое удаление невозможно отменить. |
| Move (Переместить) | m | Перемещает файл в другую папку в том же проекте. |

#### <a name="preview"></a>Предварительный просмотр

Версия файла или записной книжки для предварительного просмотра — это отображение содержимого только для чтения. Выполнение ячеек записной книжки отключено. Такая версия отображается любому пользователю, у которого есть ссылка на файл или записную книжку, но который не выполнил вход в службу "Записные книжки Azure". Выполнив вход, пользователь может клонировать записную книжку в собственную учетную запись или скачать ее на локальный компьютер.

Страница предварительного просмотра поддерживает несколько команд панели инструментов с сочетаниями клавиш:

| Команда | Сочетания клавиш | Действие |
| --- | --- | --- |
| Share (Предоставить общий доступ) | s | Отображает всплывающее окно общего доступа, в котором можно получить ссылку, предоставить общий досуп в социальных сетях, получить HTML-код для встраивания и отправить сообщение электронной почты. |
| Clone (Клонировать) | c  | Клонирует записную книжку в вашу учетную запись. |
| Run (Запустить) | r | Запускает записную книжку, если вам это разрешено. |
| Download (Скачать) | d | Скачивает копию записной книжки. |

## <a name="configure-the-project-environment"></a>Настройка среды проекта

Существует три способа настроить среду базовой виртуальной машины, в которой выполняются записные книжки:

- включение скрипта однократной инициализации;
- указание шагов настройки с помощью параметров среды проекта;
- доступ к виртуальной машине через терминал.

Все формы конфигурации проекта применяются всякий раз при запуске виртуальной машины, затрагивая все записные книжки в проекте.

### <a name="one-time-initialization-script"></a>Скрипт однократной инициализации

При первом создании сервера для проекта служба "Записные книжки Azure" выполняет поиск файла в проекте с именем *aznbsetup.sh*. Если этот файл присутствует, служба "Записные книжки Azure" его запускает. Выходные данные скрипта сохраняются в папке проекта в виде файла *.aznbsetup.log*.

### <a name="environment-setup-steps"></a>Шаги настройки среды

С помощью параметров среды проекта можно создать отдельные шаги для настройки среды.

На панели мониторинга проекта выберите **Project Settings** (Параметры проекта), а затем выберите вкладку **Environment** (Среда), на которой можно добавить, удалить и изменить шаги настройки для проекта:

![Всплывающее окно параметров проекта с выбранной вкладкой Environment (Среда)](media/project-settings-environment-steps.png)

Чтобы добавить шаг, сначала выберите **+Add** (+Добавить), затем выберите тип шага в раскрывающемся списке **Operation** (Операция):

![Селектор операций для нового шага настройки среды](media/project-settings-environment-details.png)

Сведения, которые затем указываются в проекте, зависят от выбранного типа операции:

- **Requirements.txt**. Во втором раскрывающемся списке выберите файл *requirements.txt*, который уже содержится в проекте. Затем выберите версию Python в третьем раскрывающемся списке, который появится. С помощью файла *requirements.txt* служба "Записные книжки Azure" выполняет команду `pip install -r` с файлом *requirements.txt* при запуске сервера записной книжки. Пакеты из самой записной книжки явно устанавливать не нужно.

- **Скрипт оболочки**. Во втором раскрывающемся списке выберите скрипт оболочки bash в проекте (обычно это файл с расширением *.sh*), содержащий все команды, которые следует запустить для инициализации среды.

- **Environment.yml**. Во втором раскрывающемся списке выберите файл *environments.yml* для проектов Python в среде conda.

Добавив шаги,в выберите **Save** (Сохранить).

### <a name="use-the-terminal"></a>Использование терминала

На панели мониторинга проекта команда **Terminal** (Терминал) открывает окно терминала Linux, который обеспечивает прямой доступ к серверу. В окне терминала можно скачивать данные, изменять или администрировать файлы, инспектировать процессы и даже использовать такие средства, как vi и nano.

> [!Note]
> Если в среде проекта есть скрипты запуска, при открытии терминала может отображаться сообщение о том, что программа установки все еще выполняется.

В окне терминала можно выполнить любые стандартные команды Linux. Также можно использовать команду `ls` в домашней папке для просмотра других сред в виртуальной машине, например *anaconda2_501*, *anaconda3_420*, *anaconda3_501*, *IfSharp* и *R*, наряду с папкой *project*, которая содержит проект:

![Терминал проекта в службе "Записные книжки Azure"](media/project-terminal.png)

Чтобы изменить определенную среду, перейдите сначала в соответствующую папку среды.

Для сред Python можно найти `pip` и `conda` в папке *bin* каждой среды. Также можно использовать встроенные псевдонимы для сред:

```bash
# Anaconda 2 5.3.0/Python 2.7: python27
python27 -m pip install <package>

# Anaconda 3 4.2.0/Python 3.5: python35
python35 -m pip install <package>

# Anaconda 3 5.3.0/Python 3.6: python36
python36 -m pip install <package>
```

Изменения, внесенные на сервере, применяются только к текущему сеансу, за исключением файлов и папок, создаваемых в самой папке *project*. Например, редактирование файла в папке проекта сохраняется между сеансами, а пакеты с `pip install` — нет.

> [!Note]
> Если вы используете `python` или `python3`, вы вызываете установленные системой версии Python, которые не используются для записных книжек. У вас также нет разрешений на такие операции, как `pip install`, поэтому не забудьте использовать псевдонимы для определенной версии.

## <a name="access-notebook-logs"></a>Доступ к журналам записной книжки

Если при запуске записной книжки возникают проблемы, выходные данные Jupyter можно найти в папке с именем *.nb.log*. Доступ к этим журналам можно получить с помощью команды **Terminal** (Терминал) или панели мониторинга проекта.

Обычно при локальном запуске Jupyter уже может выполняться после запуска из окна терминала. В окне терминала отображаются выходные данные, такие как состояние ядра.

Для просмотра журналов воспользуйтесь следующей командой в окне терминала:

```bash
cat .nb.log
```

Также можно использовать команду из ячейки кода в записной книжке Python:

```bash
!cat .nb.log
```

## <a name="next-steps"></a>Дополнительная информация

- [How to: Work with project data files](work-with-project-data-files.md) (Руководство. Работа с файлами данных проекта)
- [Access cloud data in a notebook](access-data-resources-jupyter-notebooks.md) (Доступ к облачным данным в записной книжке)
