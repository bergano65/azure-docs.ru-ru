---
title: Рекомендации по безопасности для хранилища очередей
titleSuffix: Azure Storage
description: Сведения о рекомендациях по обеспечению безопасности для хранилища очередей. Реализация этого руководства поможет вам выполнить обязательства по обеспечению безопасности, как описано в нашей общей модели ответственности.
services: storage
author: tamram
ms.service: storage
ms.subservice: queues
ms.topic: conceptual
ms.date: 03/11/2020
ms.author: tamram
ms.custom: security-recommendations
ms.openlocfilehash: 9ec7dcc12b7452ee4bd40fab9b2bc53b5cca9be3
ms.sourcegitcommit: 99955130348f9d2db7d4fb5032fad89dad3185e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2020
ms.locfileid: "93348814"
---
# <a name="security-recommendations-for-queue-storage"></a>Рекомендации по безопасности для хранилища очередей

Эта статья содержит рекомендации по обеспечению безопасности для хранилища очередей. Реализация этих рекомендаций поможет вам выполнить обязательства по обеспечению безопасности, которые описаны в нашей модели общей ответственности. Дополнительные сведения о принимаемых Майкрософт мерах для выполнения обязанностей поставщика услуг см. в статье [об общей ответственности в отрасли облачных вычислений](https://gallery.technet.microsoft.com/Shared-Responsibilities-81d0ff91/file/225366/1/Shared%20Responsibility%20for%20Cloud%20Computing-2019-10-25.pdf).

Выполнение некоторых из описанных в этой статье рекомендаций можно автоматически отслеживать с помощью Центра безопасности Azure. Центр безопасности Azure служит первой линией обороны ваших ресурсов в Azure. Сведения о центре безопасности Azure см. в статье [что такое центр безопасности Azure?](../../security-center/security-center-introduction.md).

Центр безопасности Azure периодически анализирует состояние безопасности ресурсов Azure для выявления потенциальных уязвимостей системы безопасности. Затем он предоставляет рекомендации по их устранению. Дополнительные сведения о рекомендациях Центра безопасности Azure см. в [этой статье](../../security-center/security-center-recommendations.md).

## <a name="data-protection"></a>Защита данных

| Рекомендация | Комментарии | Центр безопасности |
|-|----|--|
| Использование модели развертывания Azure Resource Manager | Создайте новые учетные записи хранения с помощью модели развертывания Azure Resource Manager для важных улучшений безопасности, включая управление доступом на основе ролей Azure (Azure RBAC) и аудит, развертывание на основе диспетчер ресурсов и управление, доступ к управляемым удостоверениям, доступ к Azure Key Vault для секретов, а также аутентификацию и авторизацию на основе Azure AD для доступа к данным и ресурсам службы хранилища Azure. По возможности перенесите существующие учетные записи хранения, использующие классическую модель развертывания, для использования Azure Resource Manager. Дополнительные сведения о Azure Resource Manager см. в разделе Общие сведения о [Azure Resource Manager](../../azure-resource-manager/management/overview.md). | - |
| Включить расширенную защиту от угроз для всех учетных записей хранения | Расширенная защита от угроз для службы хранилища Azure предоставляет дополнительный уровень логики безопасности, который обнаруживает необычные и потенциально опасные попытки доступа или использования учетных записей хранения. Оповещения системы безопасности активируются в центре безопасности Azure при возникновении аномалий в работе, а также отправляются по электронной почте администраторам подписки с подробными сведениями о подозрительных действиях и рекомендациями по исследованию и устранению угроз. Дополнительные сведения см. в статье [Расширенная защита от угроз для службы хранилища Azure](../common/azure-defender-storage-configure.md). | [Да](../../security-center/security-center-remediate-recommendations.md) |
| Ограничить токены подписанного URL-адресом (SAS) только HTTPS-подключениями | Обязательное использование HTTPS, если клиент использует маркер SAS для доступа к данным очереди, помогая снизить риск перехвата. Дополнительные сведения см. [в статье предоставление ограниченного доступа к ресурсам службы хранилища Azure с помощью подписанных URL-адресов (SAS)](../common/storage-sas-overview.md). | - |

## <a name="identity-and-access-management"></a>Управление удостоверениями и доступом

| Рекомендация | Комментарии | Центр безопасности |
|-|----|--|
| Использование Azure Active Directory (Azure AD) для авторизации доступа к данным очереди | Azure AD обеспечивает более высокую безопасность и простоту использования общего ключа для авторизации запросов к хранилищу очередей. Дополнительные сведения см. [в статье авторизация доступа к BLOB-объектам и очередям Azure с помощью Azure Active Directory](../common/storage-auth-aad.md). | - |
| Не забывайте при назначении разрешений субъекту безопасности Azure AD через Azure RBAC. | При назначении роли пользователю, группе или приложению предоставьте этому субъекту безопасности только те разрешения, которые необходимы им для выполнения своих задач. Ограничение доступа к ресурсам помогает предотвратить непреднамеренное и вредоносное неправильное использование данных. | - |
| Защита ключей доступа к учетной записи с помощью Azure Key Vault | Корпорация Майкрософт рекомендует использовать Azure AD для авторизации запросов к службе хранилища Azure. Однако, если необходимо использовать авторизацию с общим ключом, защитите ключи учетной записи с помощью Azure Key Vault. Вы можете получить ключи из хранилища ключей во время выполнения, а не сохранять их вместе с приложением. | - |
| Периодическое повторное создание ключей учетной записи | Вращение ключей учетной записи периодически снижает риск предоставления данных вредоносным субъектам. | - |
| При назначении разрешений для SAS следует помнить о минимальных правах доступа | При создании SAS укажите только те разрешения, которые требуются клиенту для выполнения своей функции. Ограничение доступа к ресурсам помогает предотвратить непреднамеренное и вредоносное неправильное использование данных. | - |
| Наличие плана отзыва для любого SAS, который вы выдаете клиентам | В случае компрометации SAS необходимо как можно скорее отозвать этот SAS. Чтобы отозвать SAS пользователя, отмените ключ делегирования пользователя, чтобы быстро сделать недействительными все подписи, связанные с этим ключом. Чтобы отозвать SAS службы, связанный с хранимой политикой доступа, можно удалить хранимую политику доступа, переименовать политику или изменить время окончания срока действия на время в прошлом. Дополнительные сведения см. [в статье предоставление ограниченного доступа к ресурсам службы хранилища Azure с помощью подписанных URL-адресов (SAS)](../common/storage-sas-overview.md).  | - |
| Если ПОДПИСАНный URL-адрес службы не связан с хранимой политикой доступа, установите время истечения до одного часа или меньше. | ПОДПИСАНный URL-адрес службы, который не связан с хранимой политикой доступа, нельзя отозвать. Поэтому рекомендуется ограничить срок действия, чтобы SAS был действителен в течение одного часа или меньше. | - |

## <a name="networking"></a>Сеть

| Рекомендация | Комментарии | Центр безопасности |
|-|----|--|
| Настройте минимальную требуемую версию протокола TLS для учетной записи хранения.  | Требовать, чтобы клиенты использовали более безопасную версию TLS для выполнения запросов к учетной записи хранения Azure, настроив минимальную версию TLS для этой учетной записи. Дополнительные сведения см. в статье [Настройка минимальной требуемой версии протокола TLS для учетной записи хранения](../common/transport-layer-security-configure-minimum-version.md?toc=%2fazure%2fstorage%2fqueues%2ftoc.json) .| - |
| Включение параметра " **требуется безопасное перемещение** " для всех учетных записей хранения | При включении параметра " **требуется безопасное перемещение** " все запросы к учетной записи хранения должны выполняться по защищенным соединениям. Любые запросы, выполненные по протоколу HTTP, завершатся ошибкой. Дополнительные сведения см. [в статье обязательное безопасное перемещение в службе хранилища Azure](../common/storage-require-secure-transfer.md?toc=%2fazure%2fstorage%2fqueues%2ftoc.json). | [Да](../../security-center/security-center-remediate-recommendations.md) |
| Включение правил брандмауэра | Настройте правила брандмауэра, чтобы ограничить доступ к учетной записи хранения для запросов, исходящих из указанных IP-адресов или диапазонов, или из списка подсетей в виртуальной сети Azure. Дополнительные сведения о настройке правил брандмауэра см. в статье [Настройка брандмауэров службы хранилища Azure и виртуальных сетей](../common/storage-network-security.md?toc=%2fazure%2fstorage%2fqueues%2ftoc.json). | - |
| Разрешить доверенным службам Майкрософт доступ к учетной записи хранения | Включение правил брандмауэра для учетной записи хранения по умолчанию блокирует входящие запросы данных, за исключением запросов от служб, работающих внутри виртуальной сети Azure (VNet), или запросов, поступающих из разрешенных общедоступных IP-адресов. Запросы от других служб Azure, в том числе портала Azure, служб метрики и ведения журналов, блокируются. Вы можете разрешить запросы от других служб Azure, добавив исключение, чтобы разрешить доверенным службам Майкрософт доступ к учетной записи хранения. Дополнительные сведения о добавлении исключений для доверенных служб Майкрософт см. в статье [Настройка брандмауэров службы хранилища Azure и виртуальных сетей](../common/storage-network-security.md?toc=%2fazure%2fstorage%2fqueues%2ftoc.json).| - |
| Использование частных конечных точек | Частная конечная точка назначает в учетной записи хранения частный IP-адрес из виртуальной сети Azure (VNet). Он обеспечивает безопасность всего трафика между виртуальной сетью и учетной записью хранения по частному каналу. Дополнительные сведения о частных конечных точках см. в статье VPN [-Подключение к учетной записи хранения с помощью частной конечной точки Azure](../../private-link/tutorial-private-endpoint-storage-portal.md). | - |
| Использование тегов службы виртуальной сети | Тег службы представляет группу префиксов IP-адресов из определенной службы Azure. Корпорация Майкрософт управляет префиксами адресов, входящих в тег службы, и автоматически обновляет этот тег при изменении адресов. Дополнительные сведения о тегах служб, поддерживаемых службой хранилища Azure, см. в статье [Общие сведения о тегах служб Azure](../../virtual-network/service-tags-overview.md). Руководство, в котором показано, как использовать теги службы для создания правил исходящей сети, см. в разделе [ограничение доступа к ресурсам PaaS](../../virtual-network/tutorial-restrict-network-access-to-resources.md). | - |
| Ограничение сетевого доступа к конкретным сетям | Ограничение сетевого доступа к сетям, в которых размещаются клиенты, которым требуется доступ, снижает уязвимость ресурсов для сетевых атак. | [Да](../../security-center/security-center-remediate-recommendations.md) |

## <a name="loggingmonitoring"></a>Ведение журнала и мониторинг

| Рекомендация | Комментарии | Центр безопасности |
|-|----|--|
| Контроль авторизации запросов | Включите ведение журнала службы хранилища Azure, чтобы отслеживание авторизации каждого запроса к службе хранилища Azure. Журналы указывают, был ли запрос анонимно, с помощью маркера OAuth 2,0, с помощью общего ключа или подписанного URL-адрес (SAS). Дополнительные сведения см. в статье [ведение журнала аналитики хранилища Azure](../common/storage-analytics-logging.md). | - |

## <a name="next-steps"></a>Дальнейшие действия

- [Документация по безопасности Azure](../../security/index.yml)
- [Документация по разработке безопасности](../../security/develop/index.yml).
