---
title: Ускорение запросов Azure Data Lake Storage
description: Ускорение запросов позволяет приложениям и платформам аналитики значительно оптимизировать обработку данных, получая только те данные, которые необходимы для выполнения операции обработки.
author: normesta
ms.topic: conceptual
ms.author: normesta
ms.reviewer: jamesbak
ms.date: 09/09/2020
ms.service: storage
ms.subservice: data-lake-storage-gen2
ms.openlocfilehash: ae92828f08ae4abf9cc28f18872cca27ce747be4
ms.sourcegitcommit: f8d2ae6f91be1ab0bc91ee45c379811905185d07
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2020
ms.locfileid: "89657651"
---
# <a name="azure-data-lake-storage-query-acceleration"></a>Ускорение запросов Azure Data Lake Storage

Ускорение запросов позволяет приложениям и платформам аналитики значительно оптимизировать обработку данных, получая только те данные, которые необходимы для выполнения определенной операции. Это сокращает время и вычислительную мощность, необходимую для получения важной информации о хранимых данных.

## <a name="overview"></a>Обзор

Ускорение запросов принимает *предикаты* фильтрации и *проекции столбцов* , которые позволяют приложениям фильтровать строки и столбцы во время считывания данных с диска. Только данные, соответствующие условиям предиката, передаются в приложение по сети. Это сокращает задержку в сети и стоимость вычислений.  

Вы можете использовать SQL для указания предикатов фильтра строк и проекций столбцов в запросе ускорения запроса. Запрос обрабатывает только один файл. Поэтому не поддерживаются расширенные реляционные функции SQL, такие как объединения и группирование по статистическим выражениям. Ускорение запросов поддерживает данные в формате CSV и JSON в качестве входных данных для каждого запроса.

Функция ускорения запросов не ограничена Data Lake Storage (учетные записи хранения, на которых включено иерархическое пространство имен). Ускорение запросов полностью совместимо с большими двоичными объектами в учетных записях хранения, на которых **не** включено иерархическое пространство имен. Это означает, что можно добиться того же сокращения задержки сети и затрат на вычисление при обработке данных, которые уже сохранены в учетных записях хранения в виде больших двоичных объектов.

Пример использования ускорения запросов в клиентском приложении см. в разделе [Фильтрация данных с помощью Azure Data Lake Storageного ускорения запросов](data-lake-storage-query-acceleration-how-to.md).

## <a name="data-flow"></a>Поток данных

На следующей схеме показано, как типичное приложение использует ускорение запросов для обработки данных.

> [!div class="mx-imgBorder"]
> ![Общие сведения об ускорении запросов](./media/data-lake-storage-query-acceleration/query-acceleration.png)

1. Клиентское приложение запрашивает данные файла, указывая предикаты и проекции столбцов.

2. Ускорение запросов Анализирует указанный запрос SQL и распространяет работу на анализ и фильтрацию данных.

3. Процессоры считывают данные с диска, анализируют данные с помощью соответствующего формата, а затем отфильтровывают данные, применяя указанные предикаты и проекции столбцов.

4. Ускорение запросов объединяет сегменты ответа для потоковой передачи в клиентское приложение.

5. Клиентское приложение получает и анализирует потоковый ответ. Приложению не нужно фильтровать дополнительные данные и применять требуемое вычисление или преобразование напрямую.

## <a name="better-performance-at-a-lower-cost"></a>Повышение производительности с более низкими затратами

Ускорение запросов оптимизирует производительность, уменьшая объем данных, которые передаются и обрабатываются приложением.

Чтобы вычислить агрегированное значение, приложения часто извлекают **все** данные из файла, а затем обрабатывают и фильтруют данные локально. Анализ шаблонов ввода-вывода для рабочих нагрузок аналитики показывает, что приложениям, как правило, требуется только 20% данных, которые считываются для выполнения любого конкретного вычисления. Эта статистика имеет значение true даже после применения таких методов, как [Удаление секций](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-optimize-hive-query#hive-partitioning). Это означает, что 80% этих данных не передается по сети, анализируется и фильтруется приложениями. Этот шаблон, по сути, предназначенный для удаления ненужных данных, требует значительной стоимости вычислений.  

Несмотря на то, что в Azure есть ведущие в отрасли сети с точки зрения пропускной способности и задержки, ненужное перемещение данных по этой сети все еще требует значительных затрат на производительность приложений. Отфильтровывая ненужные данные во время запроса на хранение, ускорение запросов устраняет эту стоимость.

Кроме того, загрузка ЦП, необходимая для анализа и фильтрации ненужных данных, требует, чтобы приложение подготовило большее число и более крупные виртуальные машины для выполнения своей работы. При передаче этой нагрузки вычислений в ускорение запросов приложения могут значительно сократить затраты.

## <a name="applications-that-can-benefit-from-query-acceleration"></a>Приложения, которые могут выиграть от ускорения запросов

Ускорение запросов предназначено для распределенных сред аналитики и приложений для обработки данных. 

Такие платформы распределенной аналитики, как Apache Spark и Apache Hive, включают уровень абстракции хранилища в пределах платформы. Эти модули также включают в себя оптимизаторы запросов, которые могут включать знания о возможностях базовой службы ввода-вывода при определении оптимального плана запроса для пользовательских запросов. Эти платформы начали интегрировать ускорение запросов. В результате пользователи этих платформ увидят улучшенную задержку запросов и более низкую общую стоимость владения без необходимости вносить изменения в запросы. 

Ускорение запросов также предназначено для приложений обработки данных. Эти типы приложений обычно выполняют крупномасштабные преобразования данных, которые могут не привести непосредственно к аналитическим аналитикам, поэтому они не всегда используют созданные структуры распределенной аналитики. Эти приложения часто имеют более прямую связь с базовой службой хранения, поэтому они могут получить преимущество непосредственно от таких функций, как ускорение запросов. 

Пример того, как приложение может интегрировать ускорение запросов, см. в разделе [Фильтрация данных с помощью Azure Data Lake Storageного ускорения запросов](data-lake-storage-query-acceleration-how-to.md).

## <a name="pricing"></a>Цены

В связи с увеличенной нагрузкой вычислений в рамках службы Azure Data Lake Storage модель ценообразования для использования ускорения запросов отличается от обычной Azure Data Lake Storageной модели транзакций. При ускорении запросов взимается плата за объем данных, просканированных, а также затраты на объем данных, возвращаемых вызывающему объекту. Дополнительные сведения см. в разделе [цены на Azure Data Lake Storage 2-го поколения](https://azure.microsoft.com/pricing/details/storage/data-lake/).

Несмотря на изменение модели выставления счетов, модель ценообразования для ускорения запросов предназначена для снижения совокупной стоимости владения рабочей нагрузкой, учитывая снижение затрат на виртуальные машины гораздо более затратным.

## <a name="next-steps"></a>Дальнейшие действия

- [Фильтрация данных с помощью ускорения запросов Azure Data Lake Storage](data-lake-storage-query-acceleration-how-to.md)
- [Справочник по языку SQL для ускорения запросов](query-acceleration-sql-reference.md)


