---
title: Интеграция статического веб-сайта с Azure CDN — хранилищем Azure
description: Узнайте, как кэшировать статическое содержимое веб-сайта из учетной записи хранения Azure с помощью сети доставки содержимого (CDN) Azure.
author: normesta
ms.service: storage
ms.subservice: blobs
ms.topic: how-to
ms.author: normesta
ms.date: 04/07/2020
ms.openlocfilehash: 02b7e02c33161db33420e2efe1ef4b70a138d127
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84465224"
---
# <a name="integrate-a-static-website-with-azure-cdn"></a>Интеграция статического веб-сайта с Azure CDN

Вы можете включить [сеть доставки содержимого (CDN) Azure](../../cdn/cdn-overview.md) для кэширования содержимого со [статического веб-сайта](storage-blob-static-website.md) , размещенного в учетной записи хранения Azure. Azure CDN можно использовать для настройки конечной точки пользовательского домена для статического веб-сайта, подготовки настраиваемых сертификатов TLS/SSL и настройки настраиваемых правил перезаписи. Настройка Azure CDN приводит к дополнительным расходам, но обеспечивает постоянно низкую задержку при доступе к веб-сайту из любой точки мира. Azure CDN также предоставляет шифрование TLS с помощью собственного сертификата. 

Сведения о ценах на Azure CDN см. на [этой странице](https://azure.microsoft.com/pricing/details/cdn/).

## <a name="enable-azure-cdn-for-your-static-website"></a>Включение Azure CDN для статического веб-сайта

Вы можете включить Azure CDN для статического веб-сайта непосредственно из вашей учетной записи хранения. Если для конечной точки CDN нужно указать дополнительные параметры, например [оптимизировать скачивание больших файлов](../../cdn/cdn-optimization-overview.md#large-file-download), создайте конечную точку CDN или профиль CDN с помощью [расширения Azure CDN](../../cdn/cdn-create-new-endpoint.md).

1. Найдите свою учетную запись хранения на портале Azure и отобразите общие сведения о ней.

1. В меню **Служба BLOB-объектов** выберите **Azure CDN** , чтобы открыть **Azure CDN** страницу:

    ![Создание конечной точки CDN](media/storage-blob-static-website-custom-domain/cdn-storage-new.png)

1. В разделе **профиль CDN** укажите, следует ли создать новый профиль CDN или использовать существующий. Профиль CDN — это коллекция конечных точек CDN, имеющих общую ценовую категорию и поставщик. Затем введите имя CDN, уникальное в пределах вашей подписки.

1. Укажите ценовую категорию для конечной точки CDN. Дополнительные сведения о ценах см. в разделе [цены на сеть доставки содержимого](https://azure.microsoft.com/pricing/details/cdn/). Дополнительные сведения о функциях, доступных для каждого уровня, см. в разделе [Compare Azure CDN Feature Products](../../cdn/cdn-features.md).

1. В поле **Имя конечной точки в сети доставки содержимого** укажите имя своей конечной точки CDN. Конечная точка CDN должна быть уникальной в Azure и предоставляет первую часть URL-адреса конечной точки. Форма проверяет уникальность имени конечной точки.

1. Укажите конечную точку статической веб-сайта в поле **имя узла источника** . 

   Чтобы узнать конечную точку статического веб-сайта, перейдите к параметрам **Статический веб-сайт** для своей учетной записи хранения.  Скопируйте основную конечную точку и вставьте ее в конфигурацию CDN.

   > [!IMPORTANT]
   > Не забудьте удалить идентификатор протокола (*например*, HTTPS) и косую черту в URL-адресе. Например, если статическая конечная точка веб-сайта — `https://mystorageaccount.z5.web.core.windows.net/` , то `mystorageaccount.z5.web.core.windows.net` в поле **имя узла источника** следует указать.

   На следующем изображении показан пример конфигурации конечной точки.

   ![Снимок экрана с примером конфигурации конечной точки CDN](media/storage-blob-static-website-custom-domain/add-cdn-endpoint.png)

1. Выберите **создать**и подождите, пока сеть CDN не будет подготавливаться. Созданная конечная точка отображается в списке конечных точек. (Если в форме имеются ошибки, рядом с этим полем появится восклицательный знак.)

1. Чтобы убедиться, что конечная точка CDN настроена правильно, щелкните конечную точку, чтобы перейти к ее параметрам. В разделе общих сведений о конечной точке CDN для вашей учетной записи хранения найдите имя узла конечной точки и перейдите к конечной точке, как показано на следующем рисунке. Формат конечной точки CDN будет примерно таким: `https://staticwebsitesamples.azureedge.net`.

    ![Снимок экрана с разделом общих сведений о конечной точке CDN](media/storage-blob-static-website-custom-domain/verify-cdn-endpoint.png)

1. После подготовки конечной точки CDN переход к конечной точке CDN отображает содержимое файла index.html, который ранее был отправлен на статический веб-сайт.

1. Чтобы просмотреть параметры источника для конечной точки CDN, перейдите в подраздел **Источник** раздела **Параметры** конечной точки CDN. Вы увидите, что параметр **Тип источника** имеет значение *Настраиваемый источник*, а в поле **Имя узла источника** отображается конечная точка статического веб-сайта.

    ![Снимок экрана с параметрами источника для конечной точки CDN](media/storage-blob-static-website-custom-domain/verify-cdn-origin.png)

## <a name="remove-content-from-azure-cdn"></a>Удаление содержимого из Azure CDN

Если кэширование объекта в сети CDN Azure больше не требуется, можно выполнить одно из следующих действий:

* Сделать контейнер закрытым, а не общедоступным. Дополнительные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](storage-manage-access-to-resources.md).
* Отключить или удалить конечную точку CDN с помощью портала Azure.
* Изменить размещенную службу, чтобы она перестала отвечать на запросы объекта.

Объект, кэшированный в сети Azure CDN, сохраняется в кэше до истечения срока жизни для этого объекта или до [очистки](../../cdn/cdn-purge-endpoint.md) конечной точки. По истечении срока действия Azure CDN проверит, действует ли еще конечная точка CDN и возможен ли анонимный доступ к этому объекту. Если это не так, объект больше не будет кэшироваться.

## <a name="next-steps"></a>Дальнейшие шаги

Используемых Добавьте личный домен в конечную точку Azure CDN. См. раздел [учебник. Добавление пользовательского домена в конечную точку Azure CDN](../../cdn/cdn-map-content-to-custom-domain.md).
