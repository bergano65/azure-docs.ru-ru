---
title: azcopy Bench | Документация Майкрософт
description: В этой статье содержатся справочные сведения о команде azcopy Bench.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 07/24/2020
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: c1028d0a4a458746c08fd6fa4f16aa952d9962a2
ms.sourcegitcommit: dccb85aed33d9251048024faf7ef23c94d695145
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87282013"
---
# <a name="azcopy-benchmark"></a>тест производительности azcopy

Запускает нагрузочный тест производительности путем передачи или загрузки тестовых данных в указанное место назначения или из него. Для отправки тестовые данные создаются автоматически.

Команда тестирования производительности выполняет тот же процесс, что и Copy, за исключением того, что: 

  - Вместо параметров как источника, так и назначения, тест производительности принимает только один. Это контейнер больших двоичных объектов, общий ресурс службы файлов Azure или Azure Data Lake Storage 2-го поколения файловая система, которую вы хотите отправить или скачать из.

  - Параметр mode описывает, следует ли AzCopy проверять отправку или загрузку из данного целевого объекта. Допустимые значения: "Upload" и "Download". Значение по умолчанию — "Upload".

  - Для отправки тестов производительности полезные данные описываются параметрами командной строки, которые управляют количеством автоматически создаваемых файлов и степенью значимости файлов. Процесс создания полностью выполняется в памяти. Диск не используется.

  - Для загрузки полезная нагрузка состоит из любого файла, уже существующего в источнике. (См. пример ниже, чтобы создать тестовые файлы, если это необходимо).
  
  - Поддерживается только несколько необязательных параметров, доступных для команды Copy.
  
  - Измеряется и сообщается дополнительная диагностика.
  
  - Для отправки по умолчанию в конце тестового запуска будет удалена переданная передача данных.  Для загрузки данные никогда не сохраняются локально.

Режим тестирования будет автоматически настроен на число параллельных TCP-подключений, обеспечивающих максимальную пропускную способность. Это число будет отображаться в конце. Чтобы предотвратить автоматическую настройку, задайте для переменной среды AZCOPY_CONCURRENCY_VALUE определенное число соединений. 

Поддерживаются все обычные типы проверки подлинности. Однако наиболее удобным подходом к отправке производительности обычно является создание пустого контейнера с маркером SAS и использование проверки подлинности SAS. (Режим загрузки требует, чтобы набор тестовых данных присутствовал в целевом контейнере.)

## <a name="examples"></a>Примеры

```azcopy
azcopy benchmark [destination] [flags]
```

Запустите тест производительности с параметрами по умолчанию (подходящими для тестирования производительности в сети до 1 Гбит/с): "

```azcopy
azcopy bench "https://[account].blob.core.windows.net/[container]?<SAS>"
```
Запустите тест производительности, который отправляет 100 файлов, размер каждого из которых составляет 2 гиб: (подходит для тестирования производительности в быстрой сети, например 10 Гбит/с):

```azcopy
azcopy bench "https://[account].blob.core.windows.net/[container]?<SAS>"--file-count 100 --size-per-file 2G
```
Запустите тест производительности, но используйте 50 000 файлов, размер каждого 8 MiB и вычислите их хэши MD5 (аналогично тому, как `--put-md5` это делается флагом в команде Copy). При тестировании `--put-md5` производительности необходимо проверить, влияет ли вычисление MD5 на пропускную способность для выбранного числа и размера файла:

```azcopy
azcopy bench --mode='Upload' "https://[account].blob.core.windows.net/[container]?<SAS>" --file-count 50000 --size-per-file 8M --put-md5
```

Запуск теста производительности, который скачивает существующие файлы из целевого объекта

```azcopy
azcopy bench --mode='Download' "https://[account].blob.core.windows.net/[container]?<SAS?"
```

Выполните передачу, которая не удаляет переданные файлы. (Эти файлы затем могут использоваться в качестве полезных данных для теста загрузки).

```azcopy
azcopy bench "https://[account].blob.core.windows.net/[container]?<SAS>" --file-count 100 --delete-test-data=false
```

## <a name="options"></a>Параметры

**--BLOB-тип** строка определяет тип большого двоичного объекта в месте назначения. Используется для разрешения производительности различных типов больших двоичных объектов. Идентично параметру с одним и тем же именем в команде Copy (по умолчанию "Обнаружение").

**--Block-Size-МБ с** плавающей запятой используйте этот размер блока (указанный в MIB). Значение по умолчанию вычисляется автоматически на основе размера файла. Десятичные дроби разрешены, например 0,25. Идентично параметру с одним и тем же именем в команде Copy.

**--Check-length**  Проверьте длину файла в месте назначения после перемещения. В случае несоответствия между источником и назначением перемещение помечается как Failed. (по умолчанию true)

**--Delete-Test-Data**  Если значение — true, данные теста производительности будут удалены в конце тестового запуска.  Задайте значение false, если необходимо, чтобы данные находились в месте назначения, например, чтобы использовать их для ручных тестов вне режима производительности (по умолчанию true).

**--число файлов** uint.  Число используемых автоматически создаваемых файлов данных (по умолчанию 100).

**--Справка**  Справка по Bench

**--строка на уровне журнала** определяет уровень детализации журнала для файла журнала, доступные уровни: сведения (все запросы и ответы), предупреждение (медленные ответы), ошибка (только неудачные запросы) и нет (нет выходных журналов). (по умолчанию "INFO")

**--режим** строка определяет, должна ли Azcopy проверять отправку или загрузку из этого целевого объекта. Допустимые значения: "Upload" и "Download". Параметр по умолчанию — upload. (отправка по умолчанию)

**--число-папок** uint, если значение больше 0, создает папки для разделения данных.

**--Размещение-MD5**  Создайте хэш MD5 для каждого файла и сохраните хэш как свойство Content-MD5 целевого большого двоичного объекта или файла. (По умолчанию хэш не создается.) Идентично параметру с одним и тем же именем в команде Copy.

**—** размер строки по каждому файлу для каждого автоматически сформированного файла данных. Должно быть числом сразу за презнаком K, M или G. Например, 12k или 200G (по умолчанию — "250M").

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

**--Cap-Мбит/с, с плавающей запятой**  Скорость передачи с прописными буквами в мегабит в секунду. Посекундная пропускная способность может немного отличаться от ограничения. Если этот параметр имеет значение 0 или пропущен, пропускная способность не ограничена.

**--выходной** формат строки выходных данных команды. Среди вариантов: Text, JSON. Значение по умолчанию — Text. ("текст" по умолчанию).

**--Trusted-Microsoft-суффиксы** указывает дополнительные суффиксы домена, в которых могут отправляться Azure Active Directory токены входа.  Значение по умолчанию — "*. Core.Windows.NET;*". core.chinacloudapi.cn; *. Core.cloudapi.de;*. core.usgovcloudapi.net ". Все перечисленные здесь значения добавляются к значениям по умолчанию. В целях безопасности следует размещать только Microsoft Azureные домены. Несколько записей разделяются точкой с запятой.


## <a name="see-also"></a>См. также статью

- [azcopy](storage-ref-azcopy.md)
