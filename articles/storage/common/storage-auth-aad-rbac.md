---
title: Управлять правами доступа Azure AD к контейнерам и очереди с помощью RBAC - хранилища Azure с помощью портала Azure | Документация Майкрософт
description: Используйте элемент управления доступом на основе ролей (RBAC) на портале Azure для предоставления доступа к контейнерам и очередей для субъектов безопасности. Хранилище Azure поддерживает встроенные и пользовательские роли RBAC для проверки подлинности с помощью Azure AD.
services: storage
author: tamram
ms.service: storage
ms.topic: article
ms.date: 03/21/2019
ms.author: tamram
ms.subservice: common
ms.openlocfilehash: 66e6cff40d71842ef19f99d7c96219af83fc9b4e
ms.sourcegitcommit: 49c8204824c4f7b067cd35dbd0d44352f7e1f95e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2019
ms.locfileid: "58368244"
---
# <a name="grant-access-to-azure-containers-and-queues-with-rbac-in-the-azure-portal"></a>Предоставление доступа к контейнерам Azure и очереди с RBAC на портале Azure

Azure Active Directory (Azure AD) разрешает права доступа к защищенным ресурсам с помощью [управления доступом на основе ролей (RBAC)](../../role-based-access-control/overview.md). Служба хранилища Azure определяет набор встроенных ролей RBAC, которые охватывают общие наборы разрешений, используемые для доступа к контейнерам или очередям. 

При назначении роли RBAC для субъекта безопасности Azure AD, Azure предоставляет доступ к этим ресурсам для этого участника безопасности. Доступ может ограничиваться уровнем подписки, группой ресурсов, учетной записью хранения или отдельным контейнером или очередью. Субъект безопасности Azure AD может быть пользователь, группы, субъекта-службы приложения, или [управляемое удостоверение для ресурсов Azure](../../active-directory/managed-identities-azure-resources/overview.md).

В этой статье описывается назначение ролей RBAC с помощью портала Azure. Портал Azure предоставляет простой интерфейс для назначение ролей RBAC и управление доступом к ресурсам хранилища. Можно также назначить роли RBAC для ресурсов больших двоичных объектов и очереди, с помощью программ командной строки Azure или API управления службы хранилища Azure. Дополнительные сведения о роли RBAC для ресурсов хранилища, см. в разделе [проверка подлинности доступа к Azure BLOB-объекты и очереди, используя Azure Active Directory](storage-auth-aad.md). 

## <a name="rbac-roles-for-blobs-and-queues"></a>Роли RBAC для больших двоичных объектов и очередей

[!INCLUDE [storage-auth-rbac-roles-include](../../../includes/storage-auth-rbac-roles-include.md)]

## <a name="determine-resource-scope"></a>Определение области действия ресурсов 

Прежде чем назначить роль RBAC субъекту безопасности, определите область доступа, который должен иметь субъекта безопасности. Рекомендации по определяют, что всегда лучше предоставить только наиболее узкой возможной области.

Ниже перечислены уровни, по которым можно ограничить доступ к ресурсам Azure BLOB-объектов и очередей, начиная с самой узкой областью.

- **Если отдельный контейнер.** В этой области участника безопасности имеет доступ ко всем больших двоичных объектов в контейнере, а также свойствам и метаданным контейнера.
- **Одной очереди.** В этой области участника безопасности имеет доступ к сообщениям в очереди, а также свойств очередей и метаданных.
- **Учетная запись хранения.** В этой области субъект безопасности имеет доступ для всех контейнеров и их больших двоичных объектов или все очереди и сообщения об ошибках.
- **Группа ресурсов.** В этой области участника безопасности имеет доступ ко всем контейнерам или очередей во всех учетных записей хранения в группе ресурсов.
- **Подписка.** В этой области участника безопасности имеет доступ ко всем контейнерам или очередей во всех учетных записей хранения во всех группах ресурсов в подписке.

После определения требуемой области для назначения роли, перейдите к соответствующий ресурс на портале Azure. Отображение **управление доступом (IAM)** параметры для ресурса и следуйте инструкциям в следующих разделах для управления назначением ролей.

## <a name="assign-rbac-roles-using-the-azure-portal"></a>Назначение ролей RBAC с помощью портала Azure

Предоставление доступа к ресурсам больших двоичных объектов и очереди с учетными данными Azure AD на портале Azure включает следующие действия: 

1. Назначьте соответствующую роль RBAC хранилища Azure для предоставления доступа к контейнерам или очереди. Доступ на чтение, назначить **модуль чтения данных больших двоичных объектов** или **модуль чтения данных очереди** роли. Для чтения, записи и доступ на удаление, назначение **участник для данных больших двоичных объектов** или **участник для данных очереди** роли. Можно также назначить пользовательскую роль.

1. Назначить Azure Resource Manager [чтения](../../role-based-access-control/built-in-roles.md#reader) роли для пользователей, которым необходим доступ к контейнерам или очереди с помощью портала Azure, используя свои учетные данные Azure AD. 

Каждое из этих действий более подробно в следующих разделах.

### <a name="assign-a-built-in-rbac-role"></a>Назначение встроенной роли RBAC

Прежде чем назначить роль субъекту безопасности, убедитесь, что Определите область действия разрешений, которые вы предоставляете. Просмотрите [определения области действия ресурсов](#determine-resource-scope) раздел, чтобы решить, соответствующей области.

В приведенной здесь процедуре назначается роль, ограниченная областью контейнера, но вы можете выполнить те же действия для назначения роли, ограниченной областью очереди: 

1. Перейдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com) и откройте **Обзор** для учетной записи.
1. В разделе "Службы" выберите **BLOB-объекты**. 
1. Найдите контейнер, для которого нужно назначить роль, и откройте его параметры. 
1. Выберите **Управление доступом (IAM)**, чтобы отобразить параметры управления доступом для контейнера. Выберите вкладку **Назначения ролей**, чтобы просмотреть список назначений ролей.

    ![Снимок экрана, показывающий параметры управления доступом контейнера](media/storage-auth-aad-rbac/portal-access-control-container.png)

1. Нажмите кнопку **Добавить назначение ролей**, чтобы добавить новую роль.
1. В **добавить назначение роли** окно, выберите роль хранилища Azure, которую вы хотите назначить. Затем найдите участника безопасности, к которому вы хотите назначить эту роль.

    ![Снимок экрана, на котором показано, как назначить роль RBAC](media/storage-auth-aad-rbac/add-rbac-role.png)

1. Выберите команду **Сохранить**. Удостоверение, которому назначена роль RBAC, будет отображаться в списке под этой ролью. Например, на следующем изображении показано, что у добавленных пользователей теперь есть разрешения на чтение для данных в контейнере с именем *sample-container*.

    ![Снимок экрана: Отображение списка пользователей, назначенных роли](media/storage-auth-aad-rbac/container-scoped-role.png)

Необходимо выполнить аналогичные шаги, чтобы назначить роль ограничена учетной записи хранения, группу ресурсов или подписку.

> [!NOTE]
> Как владельцу учетной записи хранения Azure вам автоматически не назначаются разрешения на доступ к данным. Для службы хранилища Azure вы должны назначить себе роль RBAC явным образом. Вы можете назначить ее на уровне подписки, группы ресурсов, учетной записи хранения, контейнера или очереди.
> 
> Не удается назначить роль ограничена в контейнер или очередь, если вашей учетной записи хранения содержит иерархическое пространство имен включено.

### <a name="assign-the-reader-role-for-portal-access"></a>Назначьте роль читателя для доступа к порталу

Когда вы назначаете встроенные или пользовательские роли для службы хранилища Azure для субъекта безопасности, вы предоставляете разрешения субъекта безопасности, чтобы выполнять операции с данными в вашей учетной записи хранения. Встроенная **модуль чтения данных** роли предоставляют разрешения на чтение для данных в контейнере или очереди, при встроенной **участник Data** роли предоставляют чтение, запись и удаление разрешений на контейнер или очередь. Разрешения действуют в указанный ресурс.  

Например, если вы назначаете **участник для данных больших двоичных объектов хранилища** роли для пользователя Mary на уровне контейнера с именем **образец контейнера**, затем Мэри предоставляются разрешения на чтение, запись и удаление доступ ко всем больших двоичных объектов в Этот контейнер.

Тем не менее, если Владимир хочет просмотреть большой двоичный объект на портале Azure, то **участник для данных больших двоичных объектов хранилища** роли сама по себе не будет предоставлять достаточные разрешения на доступ к на портале в большой двоичный объект, чтобы просмотреть его. Дополнительные необходимые разрешения Azure AD для перемещения по порталу и просматривать другие ресурсы, существуют ли видимым.

Если пользователям нужно иметь возможность доступа к BLOB-объектов на портале Azure, а затем назначить их дополнительная роль RBAC, [чтения](../../role-based-access-control/built-in-roles.md#reader) роли, тем пользователям, на уровне учетной записи хранения или более поздней версии. **Чтения** — роль Azure Resource Manager, которая позволяет пользователям просматривать ресурсам учетной записи хранения, но не изменять их. Она предоставляет разрешения на чтение к данным в службе хранилища Azure, но только к ресурсам управления учетной записью.

Выполните следующие действия, чтобы назначить **чтения** роли пользователя можно получить доступ к BLOB-объектов с помощью портала Azure. В этом примере назначение ограничено в учетную запись хранения:

1. Войдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com).
1. Выберите **управление доступом (IAM)** чтобы отобразить параметры управления доступом для учетной записи хранения. Выберите вкладку **Назначения ролей**, чтобы просмотреть список назначений ролей.
1. В **добавить назначение роли** выберите **чтения** роли. 
1. Из **назначение доступа к** выберите **пользователя, группы или субъекта-службы Azure AD**.
1. Выполнять поиск субъекта безопасности, к которому вы хотите назначить роль.
1. Сохраните назначение роли.

> [!NOTE]
> Назначение роли модуля чтения необходим только для пользователей, которым необходим доступ к BLOB-объектов или очередей, с помощью портала Azure. 

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения см. в статье [Что такое управление доступом на основе ролей (RBAC)?](../../role-based-access-control/overview.md)
- Чтобы узнать, как назначать роли RBAC и управлять назначениями ролей с помощью Azure PowerShell, Azure CLI или REST API, см. сведения в статьях ниже:
    - [Управление доступом на основе ролей с помощью Azure PowerShell](../../role-based-access-control/role-assignments-powershell.md)
    - [Управление доступом на основе ролей с помощью интерфейса командной строки Azure](../../role-based-access-control/role-assignments-cli.md)
    - [Управление доступом на основе ролей с помощью REST API](../../role-based-access-control/role-assignments-rest.md)
- Чтобы узнать об авторизации доступа к контейнерам и очередям из приложений службы хранилища, ознакомьтесь со статьей об [аутентификации с помощью Azure Active Directory из приложения службы хранилища Azure (предварительная версия)](storage-auth-aad-app.md).
