---
title: Проверка свойства "Время последней синхронизации" для учетной записи хранения
titleSuffix: Azure Storage
description: Узнайте, как проверить свойство "Время последней синхронизации" для геореплицированной учетной записи хранения. Свойство "Время последней синхронизации" указывает время последней успешной записи всех записываемых данных из основного в дополнительный регион.
services: storage
author: tamram
ms.service: storage
ms.topic: how-to
ms.date: 04/16/2020
ms.author: tamram
ms.reviewer: artek
ms.subservice: common
ms.openlocfilehash: 02f7d7e2735717a7a6e7a56273551197c16b77aa
ms.sourcegitcommit: fdec8e8bdbddcce5b7a0c4ffc6842154220c8b90
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2020
ms.locfileid: "83659252"
---
# <a name="check-the-last-sync-time-property-for-a-storage-account"></a>Проверка свойства "Время последней синхронизации" для учетной записи хранения

При настройке учетной записи хранения можно указать, что данные копируются в дополнительный регион, который находится в сотнях километров от основного региона. Георепликация обеспечивает устойчивость данных при значительном сбое в основном регионе, например, в случае стихийного бедствия. Если дополнительно включить доступ на чтение к дополнительному региону, то данные останутся доступными для операций чтения, если основной регион станет недоступным. Вы можете разработать приложение таким образом, чтобы оно могло легко переключаться на чтение из дополнительного региона, если основной регион перестает отвечать.

Геоизбыточное хранилище (GRS) и хранилище, геоизбыточное между зонами (GZRS), асинхронно реплицируют данные в дополнительный регион. Чтобы получить доступ на чтение к дополнительному региону, включите геоизбыточное хранилище с доступом на чтение (RA-GRS) или хранилище, геоизбыточное между зонами, с доступом на чтение (RA-GZRS). Дополнительные сведения о вариантах обеспечения избыточности в службе хранилища Azure см. в разделе [Избыточность хранилища Azure](storage-redundancy.md).

В этой статье описывается, как проверить свойство **Время последней синхронизации** для учетной записи хранения, чтобы можно было оценить несоответствие данных между основным и дополнительным регионами.

## <a name="about-the-last-sync-time-property"></a>О свойстве "Время последней синхронизации"

Так как георепликация является асинхронной, возможна ситуация, когда в момент сбоя данные, записанные в основной регион, еще не будут записаны в дополнительный регион. Свойство **Время последней синхронизации** указывает время последней успешной записи данных из основного в дополнительный регион. Все данные, записанные в основной регион до последней синхронизации, доступны для чтения из дополнительного региона. Данные, записанные в основной регион после времени, указанного в свойстве "Время последней синхронизации", могут быть как доступны, так и не доступны для чтения.

Свойство **Время последней синхронизации** содержит значение даты и времени по Гринвичу (в формате GMT).

## <a name="get-the-last-sync-time-property"></a>Получение свойства "Время последней синхронизации"

Вы можете использовать PowerShell или Azure CLI, чтобы получить значение свойства **Время последней синхронизации**.

# <a name="powershell"></a>[PowerShell](#tab/azure-powershell)

Чтобы получить время последней синхронизации для учетной записи хранения с помощью PowerShell, установите версию модуля AZ.Storage, которая поддерживает получение статистики георепликации. Пример:

```powershell
Install-Module Az.Storage –Repository PSGallery -RequiredVersion 1.14.0 –AllowClobber –Force
```

Затем проверьте свойство учетной записи хранения **GeoReplicationStats.LastSyncTime**. Не забудьте заменить значения заполнителей собственными значениями.

```powershell
$lastSyncTime = $(Get-AzStorageAccount -ResourceGroupName <resource-group> `
    -Name <storage-account> `
    -IncludeGeoReplicationStats).GeoReplicationStats.LastSyncTime
```

# <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

Чтобы получить время последней синхронизации для учетной записи хранения с помощью Azure CLI, проверьте свойство **geoReplicationStats.lastSyncTime** учетной записи хранения. Используйте параметр `--expand`, чтобы получить значения свойств, вложенных в **geoReplicationStats**. Не забудьте заменить значения заполнителей собственными значениями.

```azurecli-interactive
$lastSyncTime=$(az storage account show \
    --name <storage-account> \
    --resource-group <resource-group> \
    --expand geoReplicationStats \
    --query geoReplicationStats.lastSyncTime \
    --output tsv)
```

---

## <a name="see-also"></a>См. также раздел

- [Репликация службы хранилища Azure](storage-redundancy.md)
- [Изменение параметров избыточности для учетной записи хранения](redundancy-migration.md)
- [Разработка высокодоступных приложений с геоизбыточностью](geo-redundant-design.md)