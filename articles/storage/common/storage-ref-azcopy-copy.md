---
title: azcopy Copy | Документация Майкрософт
description: В этой статье содержатся справочные сведения о команде azcopy Copy.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 10/16/2019
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: 0c1b09fbc425a80fe1f8d075c5a83455167073c3
ms.sourcegitcommit: 49cf9786d3134517727ff1e656c4d8531bbbd332
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2019
ms.locfileid: "74029988"
---
# <a name="azcopy-copy"></a>azcopy copy

Копирует исходные данные в целевое расположение.

## <a name="synopsis"></a>Краткий обзор

Копирует исходные данные в целевое расположение. Поддерживаются следующие направления.

  - локальный < — > большой двоичный объект Azure (проверка подлинности SAS или OAuth)
  - локальные < — > файлы Azure (проверка подлинности SAS общего доступа или каталога)
  - Local <-> ADLS Gen 2 (проверка подлинности SAS, OAuth или SharedKey)
  - BLOB-объект Azure (SAS или public) — > большой двоичный объект Azure (проверка подлинности SAS или OAuth)
  - BLOB-объект Azure (SAS или public) — > файлы Azure (SAS)
  - Службы файлов Azure (SAS) — > файлы Azure (SAS)
  - Служба файлов Azure (SAS) — > большой двоичный объект Azure (SAS или OAuth Authentication)
  - AWS S3 (ключ доступа) — > блочный BLOB-объект Azure (проверка подлинности SAS или OAuth)

Дополнительные сведения см. в примерах.

## <a name="related-conceptual-articles"></a>Связанные концептуальные статьи

- [Get started with AzCopy](storage-use-azcopy-v10.md) (Начало работы с AzCopy)
- [Перенос данных с помощью AzCopy и хранилища BLOB-объектов](storage-use-azcopy-blobs.md)
- [Transfer data with AzCopy and file storage](storage-use-azcopy-files.md) (Передача данных с помощью AzCopy и хранилища файлов)
- [Configure, optimize, and troubleshoot AzCopy](storage-use-azcopy-configure.md) (Настройка, оптимизация и устранение неполадок с AzCopy)

## <a name="advanced"></a>Расширенная

AzCopy автоматически определяет тип содержимого файлов при отправке с локального диска на основе расширения или содержимого файла (если не указано расширение).

Встроенная таблица подстановки является небольшой, но в UNIX она дополняется файлами MIME локальной системы, если она доступна по одному или нескольким из следующих имен:

- /етк/миме.типес
- /etc/apache2/mime.types
- /етк/апаче/миме.типес

В Windows типы MIME извлекаются из реестра. Эта функция может быть отключена с помощью флага. См. раздел Flag.

Если задать переменную среды с помощью командной строки, эта переменная будет доступна для чтения в журнале командной строки. Рассмотрите возможность очистки переменных, содержащих учетные данные из журнала командной строки. Чтобы переменные отображались в журнале, можно использовать сценарий, чтобы запросить у пользователя учетные данные и задать переменную среды.

```
azcopy copy [source] [destination] [flags]
```

## <a name="examples"></a>Примеры

Отправка одного файла с помощью проверки подлинности OAuth. Если вы еще не выполнили вход в AzCopy, выполните команду AzCopy login перед выполнением следующей команды.

- azcopy CP "/Пас/то/филе.ткст" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект]"

То же, что и выше, но на этот раз можно также вычислить хэш MD5 содержимого файла и сохранить его как свойство Content-MD5 объекта BLOB:

- azcopy CP "/Пас/то/филе.ткст" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект]"--Протокол-MD5

Отправьте один файл с помощью маркера SAS:

- azcopy CP "/Пас/то/филе.ткст" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект]? [SAS] "

Отправка одного файла с помощью маркера SAS и конвейера (только блочные BLOB-объекты):
  
- Cat "/Пас/то/филе.ткст" | azcopy CP "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/BLOB-объект]? [SAS] "

Отправьте весь каталог с помощью маркера SAS:
  
- azcopy CP "/Пас/то/Дир" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/Каталог]? [SAS] "--recursive = true

или

- azcopy CP "/Пас/то/Дир" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/Каталог]? [SAS] "--recursive = true--размещение-MD5

Отправьте набор файлов с помощью маркера SAS и подстановочных знаков (*):

- azcopy CP "/Пас/*foo/* Bar/*. PDF" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/Каталог]? [SAS] "

Отправьте файлы и каталоги с помощью маркера SAS и подстановочных знаков (*):

- azcopy CP "/Пас/*foo/* Bar *" "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/Каталог]? [SAS] "--recursive = true

Скачайте один файл с помощью проверки подлинности OAuth. Если вы еще не выполнили вход в AzCopy, выполните команду AzCopy login перед выполнением следующей команды.

- azcopy CP "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект]" "/Пас/то/филе.ткст"

Скачайте один файл с помощью маркера SAS:

- azcopy CP "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/BLOB-объект]? [SAS] ""/Пас/то/филе.ткст "

Скачайте один файл с помощью маркера SAS, а затем направляете выходные данные в файл (только блочные BLOB-объекты):
  
- azcopy CP "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/BLOB-объект]? [SAS] ">"/Пас/то/филе.ткст "

Скачайте весь каталог с помощью маркера SAS:
  
- azcopy CP "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]/[путь/папка]? [SAS] ""/Пас/то/Дир "--recursive = true

Примечание об использовании подстановочного знака (*) в URL-адресах:

Существует два поддерживаемых способа использования подстановочных знаков в URL-адресе. 

- Можно использовать один из них сразу после последней косой черты (/) URL-адреса. При этом все файлы в каталоге копируются непосредственно в место назначения, не помещая их в подкаталог.

- Можно также использовать один из имен контейнера, если URL-адрес относится только к контейнеру, а не к большому двоичному объекту. Этот подход можно использовать для получения файлов из подмножества контейнеров.

Скачайте содержимое каталога без копирования самого содержащего его каталога.

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/папка]/*? [SAS] ""/Пас/то/Дир "

Скачайте всю учетную запись хранения.

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET/" "/Пас/то/Дир"--recursive

Скачайте подмножество контейнеров в учетной записи хранения, используя символ-шаблон (*) в имени контейнера.

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET/[контейнер * имя]" "/Пас/то/Дир"--recursive

Скопируйте один большой двоичный объект в другой большой двоичный объект с помощью маркера SAS.

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/BLOB-объект]? [SAS] "" https://[дестаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект]? [SAS] "

Скопируйте один большой двоичный объект в другой большой двоичный объект с помощью маркера SAS и токена OAuth. Необходимо использовать маркер SAS в конце URL-адреса исходной учетной записи, но при входе в AzCopy с помощью команды AzCopy login в качестве целевой учетной записи не требуется. 

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/BLOB-объект]? [SAS] "" https://[дестаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект] "

Скопируйте один виртуальный каталог больших двоичных объектов в другой с помощью маркера SAS:

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/папка]? [SAS] "" https://[дестаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/папка]? [SAS] "--recursive = true

Скопируйте все контейнеры больших двоичных объектов, каталоги и большие двоичные объекты из учетной записи хранения в другую с помощью маркера SAS:

- azcopy CP "https://[сркаккаунт]. BLOB. Core. Windows. NET? [SAS] "" https://[дестаккаунт]. BLOB. Core. Windows. NET? [SAS] "--recursive = true

Копирование одного объекта в хранилище BLOB-объектов из Amazon Web Services (AWS) S3 с помощью ключа доступа и маркера SAS. Сначала задайте переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3 AWS.
  
- azcopy CP "https://s3.amazonaws.com/[сегмент]/[объект]" "https://[дестаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/к/большой двоичный объект]? [SAS] "

Скопируйте весь каталог в хранилище BLOB-объектов из AWS S3 с помощью ключа доступа и маркера SAS. Сначала задайте переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3 AWS.

- azcopy CP "https://s3.amazonaws.com/[контейнер]/[Папка]" "https://[дестаккаунт]. BLOB. Core. Windows. NET/[контейнер]/[путь/папка]? [SAS] "--recursive = true

Дополнительные сведения о заполнителье [Folder] см. в https://docs.aws.amazon.com/AmazonS3/latest/user-guide/using-folders.html.

Скопируйте все контейнеры в хранилище BLOB-объектов из Amazon Web Services (AWS) с помощью ключа доступа и маркера SAS. Сначала задайте переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3 AWS.

- azcopy CP "https://s3.amazonaws.com/" "https://[дестаккаунт]. BLOB. Core. Windows. NET? [SAS] "--recursive = true

Скопируйте все контейнеры в хранилище BLOB-объектов из области Amazon Web Services (AWS) с помощью ключа доступа и маркера SAS. Сначала задайте переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3 AWS.

- azcopy CP "https://s3-[регион]. амазонавс. com/" "https://[дестаккаунт]. BLOB. Core. Windows. NET? [SAS] "--recursive = true

Скопируйте подмножество контейнеров, используя символ-шаблон (*) в имени контейнера. Как и в предыдущих примерах, вам потребуется ключ доступа и маркер SAS. Убедитесь, что задана переменная среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3 AWS.

- azcopy CP "https://s3.amazonaws.com/[имя контейнера]/" "https://[дестаккаунт]. BLOB. Core. Windows. NET? [SAS] "--recursive = true

## <a name="options"></a>Параметры

**--BLOB-тип** строка определяет тип большого двоичного объекта в месте назначения. Используется для отправки больших двоичных объектов и при копировании между учетными записями (по умолчанию "Обнаружение"). Допустимые значения: "Detect", "BlockBlob", "PageBlob" и "Аппендблоб". При копировании между учетными записями значение "обнаружить" заставляет AzCopy использовать тип исходного большого двоичного объекта для определения типа целевого большого двоичного объекта. При отправке файла параметр "обнаружить" определяет, является ли файл VHD или VHDX-файлом, основанным на расширении файла. Если файл является Ether VHD или VHDX-файлом, AzCopy обрабатывает файл как страничный BLOB-объект. (по умолчанию "Обнаружение")

**--Block-BLOB-** передача блочного большого двоичного объекта в хранилище Azure с помощью этого уровня BLOB-объектов. (по умолчанию "нет")

**--Block-Size-МБ** float используйте этот размер блока (указанный в MIB) при отправке в службу хранилища Azure и скачивании из службы хранилища Azure. Значение по умолчанию вычисляется автоматически на основе размера файла. Десятичные дроби разрешены (например: 0,25).

**--Cache-Control** строка задает заголовок Cache-Control. Возвращается при скачивании.

**--Check-length**                         Проверьте длину файла в месте назначения после перемещения. В случае несоответствия между источником и назначением перемещение помечается как Failed. (по умолчанию true)

**--Check-Md5** определяет, насколько строго следует проверять хэши MD5 при скачивании. Доступно только при скачивании. Доступные варианты: "не проверять", "вход", "Фаилифдифферент", "Фаилифдифферентормиссинг". (по умолчанию "Фаилифдифферент")

**--Content-Disposition** строка задает заголовок Content-Disposition. Возвращается при скачивании.

**--Content-Encoding** строка задайте заголовок Content-Encoding. Возвращается при скачивании.

**--Content — Строка языка** задайте заголовок Content-Language. Возвращается при скачивании.

**--Content-Type** строка указывает тип содержимого файла. Подразумевает отсутствие предположения-типа MIME. Возвращается при скачивании.

**--распаковка**                           Автоматически распаковать файлы при скачивании, если их кодировка содержимого указывает на то, что они сжаты. Поддерживаемые значения кодировки содержимого: gzip и Deflate. Расширения файлов ". gz"/". gzip" и ". ZZ" не требуются, но будут удалены при их наличии.

**--Exclude-Attributes** String (только для Windows) исключает файлы, атрибуты которых соответствуют списку атрибутов. Например: A; #D0 Cерверный

**--Exclude-BLOB-тип** строка. дополнительно указывает тип большого двоичного объекта (BlockBlob/PageBlob/аппендблоб), который следует исключить при копировании больших двоичных объектов из контейнера или учетной записи. Использование этого флага неприменимо для копирования данных из службы, не являющейся службой Azure, в службу. Несколько больших двоичных объектов должны быть разделены символом ";".

**--Строка исключения-путь** исключает эти пути при копировании. Этот параметр не поддерживает подстановочные знаки (*). Проверяет префикс относительного пути (например: myFolder; myFolder/Субдирнаме/File. PDF). При использовании в сочетании с обходом учетной записи пути не включают имя контейнера.

**--исключение-шаблон** строка исключит эти файлы при копировании. Этот параметр поддерживает подстановочные знаки (*)

**--следовать за символических ссылок**                      При отправке из локальной файловой системы используйте символические ссылки.

Строка **--from-to** дополнительно задает комбинацию назначения источника. Например: Локалблоб, Блоблокал, Локалблобфс.

**-h,--** Справка по копированию

**--include-Attributes** строка (только для Windows) включает файлы, атрибуты которых соответствуют списку атрибутов. Например: A; #D0 Cерверный

Строка **--include-Path** включает в себя только эти пути при копировании. Этот параметр не поддерживает подстановочные знаки (*). Проверяет префикс относительного пути (например: myFolder; myFolder/Субдирнаме/File. PDF).

**--include-шаблон** строки включает в себя только эти файлы при копировании. Этот параметр поддерживает подстановочные знаки (*). Отдельные файлы с помощью ";".

**--строка на уровне журнала** определяет уровень детализации журнала для файла журнала, доступные уровни: сведения (все запросы и ответы), предупреждение (медленные ответы), ошибка (только неудачные запросы) и нет (нет выходных журналов). (по умолчанию "INFO")

**—** Отправка строки метаданных в службу хранилища Azure со следующими парами "ключ — значение" в качестве метаданных.

**--No-Guess-MIME-тип**                   Предотвращает обнаружение типа содержимого в AzCopy на основе расширения или содержимого файла.

**--Перезаписать** строку перезаписать конфликтующие файлы и большие двоичные объекты в назначении, если этот флаг установлен в значение true. Возможные значения: "true", "false" и "prompt". (по умолчанию "true")

**--Page-BLOB —** страничный BLOB-объект, отправляемый в службу хранилища Azure с помощью этого уровня больших двоичных объектов. (по умолчанию "нет")

**--Сохранение-Последнее изменение времени**          Доступно только в том случае, если целевым объектом является файловая система.

**--Размещение-MD5**                             Создайте хэш MD5 для каждого файла и сохраните хэш как свойство Content-MD5 целевого большого двоичного объекта или файла. (По умолчанию хэш не создается.) Доступно только при отправке.

**--recursive**                            Рекурсивно искать подкаталоги при отправке из локальной файловой системы.

**--S2S-Detect-Source-Changed**           Проверьте, изменился ли источник после перечисления.

**--S2S-handle-недопустимо — строка метаданных** указывает, как обрабатываются недопустимые ключи метаданных. Доступные варианты: Ексклудеифинвалид, Фаилифинвалид, Ренамеифинвалид. (по умолчанию "Ексклудеифинвалид")

**--S2S-Preserve-уровень доступа**             Сохранение уровня доступа во время копирования службы в службу. Дополнительные сведения см. в статье [хранилище BLOB-объектов Azure: горячий, холодный и архивный уровни доступа](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers) , чтобы гарантировать, что Целевая учетная запись хранения поддерживает настройку уровня доступа. В случаях, когда установка уровня доступа не поддерживается, используйте s2sPreserveAccessTier = false, чтобы обойти копирование уровня доступа. (по умолчанию true)

**--S2S-Preserve-свойства**              Сохранять полные свойства во время копирования службы в службу. Для AWS S3 и файлов Azure, не являющихся файлами в одном файле, операция List не возвращает полные свойства объектов и файлов. Чтобы сохранить полные свойства, AzCopy должен отправить один дополнительный запрос на объект или файл. (по умолчанию true)

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

**--Cap-Мбит/с UInt32**      Скорость передачи с прописными буквами в мегабит в секунду. Посекундная пропускная способность может немного отличаться от ограничения. Если этот параметр имеет значение 0 или пропущен, пропускная способность не ограничена.

**--выходной** формат строки выходных данных команды. Среди вариантов: Text, JSON. Значение по умолчанию — Text. ("текст" по умолчанию)

## <a name="see-also"></a>См. также

- [azcopy](storage-ref-azcopy.md)
