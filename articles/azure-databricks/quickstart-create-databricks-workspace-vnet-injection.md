---
title: Краткое руководство по созданию рабочей области Azure Databricks в собственной виртуальной сети
description: В этой статье описывается, как развернуть Azure Databricks в виртуальной сети.
services: azure-databricks
author: mamccrea
ms.author: mamccrea
ms.reviewer: jasonh
ms.service: azure-databricks
ms.topic: conceptual
ms.date: 12/04/2019
ms.openlocfilehash: 404aa1d345bb1e30a0fe55d033d49d7dd8ba5a1b
ms.sourcegitcommit: 8bd85510aee664d40614655d0ff714f61e6cd328
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2019
ms.locfileid: "74893457"
---
# <a name="quickstart-create-an-azure-databricks-workspace-in-your-own-virtual-network"></a>Краткое руководство. Создание рабочей области Azure Databricks в своей виртуальной сети

Развертывание Azure Databricks по умолчанию создает новую виртуальную сеть, управляемую модулями данных. В этом кратком руководстве показано, как создать рабочую область Azure Databricks в своей виртуальной сети. В этой рабочей области также создается кластер Apache Spark. 

Дополнительные сведения о том, почему вы можете создать Azure Databricks рабочую область в своей виртуальной сети, см. в разделе [развертывание Azure Databricks в виртуальной сети Azure (внедрение VNet)] (/датабриккс/Администратион-гуиде/Клауд-конфигуратионс/Азуре/внет-Инжект).

Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free/databricks/).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портале Azure](https://portal.azure.com/).

> [!Note]
> Инструкции из этого руководство нельзя выполнять с **бесплатной пробной версией подписки**.
> Если у вас есть бесплатная учетная запись, перейдите к профилю и измените подписку на подписку с **оплатой по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/). Затем [удалите предельную сумму расходов](https://docs.microsoft.com/azure/billing/billing-spending-limit#why-you-might-want-to-remove-the-spending-limit) и [запросите увеличение квоты](https://docs.microsoft.com/azure/azure-supportability/resource-manager-core-quotas-request) на ЦП в своем регионе. При создании рабочей области Azure Databricks можно выбрать ценовую категорию **Пробная версия ("Премиум" — 14 дней бесплатно (DBU))** для предоставления рабочей области доступа к бесплатным DBU Azure Databricks уровня "Премиум" на 14 дней.

## <a name="create-a-virtual-network"></a>Создание виртуальной сети

1. В меню портала Azure выберите **Создать ресурс**. Затем выберите **сетевые > виртуальная сеть**.

    ![Создание виртуальной сети на портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network-portal.png)

2. В разделе **Создание виртуальной сети**примените следующие параметры. 

    |Параметр|Рекомендуемое значение|Описание|
    |-------|---------------|-----------|
    |Name|Пошаговые руководства по работе с модулями|Выберите имя виртуальной сети.|
    |Пространство адресов|10.1.0.0/16|Диапазон адресов виртуальной сети в нотации CIDR. Диапазон CIDR должен находиться в диапазоне от/16 до/24.|
    |Subscription|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |группа ресурсов.|Пошаговые руководства по работе с модулями|Выберите **создать** и введите имя новой группы ресурсов для своей учетной записи.|
    |Location|\<Выберите ближайший к пользователям регион\>|Выберите географическое расположение, в котором можно разместить виртуальную сеть. Используйте ближайшее к пользователям расположение.|
    |Имя подсети|по умолчанию|Выберите имя подсети по умолчанию в виртуальной сети.|
    |Диапазон адресов подсети|10.1.0.0/24|Диапазон адресов подсети в нотации CIDR. Он должен содержаться в адресном пространстве виртуальной сети. Невозможно изменить диапазон адресов используемой подсети.|

    ![Создание виртуальной сети на портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network.png)

3. После завершения развертывания перейдите к виртуальной сети и выберите **адресное пространство** в разделе **Параметры**. В поле с текстом *добавить дополнительный диапазон адресов*, вставьте `10.179.0.0/16` и выберите **сохранить**.

    ![Адресное пространство виртуальной сети Azure](./media/quickstart-create-databricks-workspace-vnet-injection/add-address-space.png)

## <a name="create-an-azure-databricks-workspace"></a>Создание рабочей области Azure Databricks

1. В меню портала Azure выберите **Создать ресурс**. Затем выберите **аналитика > кирпичи**.

    ![Создание Azure Databricks рабочей области на портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace-portal.png)

2. В разделе **Azure Databricks служба**примените следующие параметры.

    |Параметр|Рекомендуемое значение|Описание|
    |-------|---------------|-----------|
    |имя рабочей области.|Пошаговые руководства по работе с модулями|Выберите имя рабочей области Azure Databricks.|
    |Subscription|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |группа ресурсов.|Пошаговые руководства по работе с модулями|Выберите ту же группу ресурсов, которая использовалась для виртуальной сети.|
    |Location|\<Выберите ближайший к пользователям регион\>|Выберите то же расположение, что и для виртуальной сети.|
    |Уровень цен|Выберите уровень "Стандартный" или "Премиум".|Дополнительные сведения о ценовых категориях см. на [странице цен](https://azure.microsoft.com/pricing/details/databricks/)на сведения о модулях данных.|
    |Развертывание рабочей области Azure Databricks в виртуальной сети (VNet)|ДА|Этот параметр позволяет развернуть рабочую область Azure Databricks в виртуальной сети.|
    |Виртуальная сеть|Пошаговые руководства по работе с модулями|Выберите виртуальную сеть, созданную в предыдущем разделе.|
    |Имя общедоступной подсети|общедоступная — подсеть|Используйте имя общедоступной подсети по умолчанию.|
    |Диапазон CIDR общедоступной подсети|10.179.64.0/18|Используйте диапазон CIDR вплоть до, включая/26.|
    |Имя частной подсети|частный — подсеть|Используйте имя частной подсети по умолчанию.|
    |Диапазон CIDR для частной подсети|10.179.0.0/18|Используйте диапазон CIDR вплоть до, включая/26.|

    ![Создание Azure Databricks рабочей области на портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace.png)

3. После завершения развертывания перейдите к ресурсу Azure Databricks. Обратите внимание, что пиринг виртуальной сети отключен. Также обратите внимание на группу ресурсов и управляемую группу ресурсов на странице Обзор. 

    ![Обзор Azure Databricks в портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-overview-portal.png)

    Управляемая группа ресурсов не может быть изменена и не используется для создания виртуальных машин. Виртуальные машины можно создавать только в группе ресурсов, которыми вы управляете.

    ![Управляемая группа ресурсов Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group.png)

## <a name="create-a-cluster"></a>Создание кластера

> [!NOTE]
> Чтобы использовать бесплатную учетную запись для создания кластера Azure Databricks, перед созданием кластера перейдите в свой профиль и измените свою подписку на **оплату по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

1. Вернитесь в службу Azure Databricks и выберите **запустить рабочую область** на странице **Обзор** .

2. Выберите **кластеры** >  **+ создать кластер**. Затем создайте имя кластера, например " *кирпичы", "Краткое руководство-кластер*", и примите оставшиеся параметры по умолчанию. Выберите **Создать кластер**.

    ![Создание кластера Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/create-cluster.png)

3. После запуска кластера вернитесь в управляемую группу ресурсов в портал Azure. Обратите внимание на новые виртуальные машины, диски, IP-адреса и сетевые интерфейсы. Сетевой интерфейс создается в каждой общедоступной и частной подсетях с IP-адресами.  

    ![Azure Databricks управляемую группу ресурсов после создания кластера](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group2.png)

4. Вернитесь в рабочую область Azure Databricks и выберите созданный кластер. Затем перейдите на вкладку **исполнители** на странице **пользовательского интерфейса Spark** . Обратите внимание, что адреса драйвера и исполнителей находятся в диапазоне частных подсетей. В этом примере драйвер — 10.179.0.6, а исполнители — 10.179.0.4 и 10.179.0.5. IP-адреса могут отличаться.

    ![Azure Databricks исполнителей пользовательского интерфейса Spark](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-sparkui-executors.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Когда вы выполните задачи в статье, можно будет завершить работу кластера. Для этого в рабочей области Azure Databricks на левой панели выберите **Кластеры**. Для кластера, работу которого необходимо завершить, переместите указатель мыши на многоточие в столбце **Actions** (Действия) и выберите значок **Завершить**. Кластер будет остановлен.

Если не завершить работу кластера вручную, она завершится автоматически, если во время создания кластера вы установили флажок **Terminate after \_\_ minutes of inactivity** (Завершать работу после \_\_ мин бездействия). В этом случае работа кластера автоматически завершается, если он был неактивным в течение определенного времени.

Если вы не хотите повторно использовать кластер, можно удалить группу ресурсов, созданную в портал Azure.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы создали кластер Spark в Azure Databricks, который был развернут в виртуальной сети. Перейдите к следующей статье, чтобы узнать, как выполнить запрос к контейнеру SQL Server Linux DOCKER в виртуальной сети с помощью JDBC из записной книжки Azure Databricks.  

> [!div class="nextstepaction"]
>[Запрос SQL Server контейнера DOCKER для Linux в виртуальной сети из записной книжки Azure Databricks](vnet-injection-sql-server.md)
