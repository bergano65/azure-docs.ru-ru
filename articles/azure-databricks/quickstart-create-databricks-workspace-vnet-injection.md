---
title: Создание рабочей области Azure Databricks в виртуальной сети
description: В этой статье описывается развертывание Azure Databricks к виртуальной сети.
services: azure-databricks
author: mamccrea
ms.author: mamccrea
ms.reviewer: jasonh
ms.service: azure-databricks
ms.topic: conceptual
ms.date: 04/02/2019
ms.openlocfilehash: 295b64b10f9f78ca6224d60fb84c6d1310aaa42e
ms.sourcegitcommit: 62d3a040280e83946d1a9548f352da83ef852085
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59288206"
---
# <a name="quickstart-create-an-azure-databricks-workspace-in-a-virtual-network"></a>Краткое руководство. Создание рабочей области Azure Databricks в виртуальной сети

В этом кратком руководстве показано, как создать рабочую область Azure Databricks в виртуальной сети. Кроме того, вы создадите кластер Apache Spark в этой рабочей области.

Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free/).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портале Azure](https://portal.azure.com/).

## <a name="create-a-virtual-network"></a>Создать виртуальную сеть

1. На портале Azure выберите **создать ресурс** > **сети** > **виртуальная сеть**.

2. В разделе **Создание виртуальной сети**, применяются следующие параметры: 

    |Настройка|Предлагаемое значение|Описание|
    |-------|---------------|-----------|
    |Название|Краткое руководство databricks|Выберите имя виртуальной сети.|
    |Адресное пространство|10.1.0.0/16|Диапазон адресов виртуальной сети в нотации CIDR.|
    |Подписка|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |Группа ресурсов|Краткое руководство databricks|Выберите **Create New** и введите новое имя группы ресурсов для вашей учетной записи.|
    |Размещение|\<Выберите ближайший к пользователям регион\>|Выберите географическое расположение, где можно разместить виртуальной сети. Используйте ближайшее к пользователям расположение.|
    |Имя подсети|по умолчанию|Выберите имя подсети по умолчанию в виртуальной сети.|
    |Диапазон адресов подсети|10.1.0.0/24|Диапазон адресов подсети в нотации CIDR. Он должен входить в адресное пространство виртуальной сети. Невозможно изменить диапазон адресов подсети, который уже используется.|

    ![Создание виртуальной сети на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network.png)

3. После завершения развертывания перейдите к виртуальной сети и выберите **адресное пространство** под **параметры**. В поле с текстом *добавить дополнительный диапазон адресов*, вставить `10.179.0.0/16` и выберите **Сохранить**.

    ![Адресное пространство виртуальной сети Azure](./media/quickstart-create-databricks-workspace-vnet-injection/add-address-space.png)

## <a name="create-an-azure-databricks-workspace"></a>Создание рабочей области Azure Databricks

1. На портале Azure выберите **создать ресурс** > **Analytics** > **Databricks**.

2. В разделе **службы Azure Databricks**, применяются следующие параметры:

    |Настройка|Предлагаемое значение|Описание|
    |-------|---------------|-----------|
    |Имя рабочей области|Краткое руководство databricks|Выберите имя рабочей области Azure Databricks.|
    |Подписка|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |Группа ресурсов|Краткое руководство databricks|Выберите ту же группу ресурсов, которая использовалась для виртуальной сети.|
    |Размещение|\<Выберите ближайший к пользователям регион\>|Выберите то же расположение вашей виртуальной сети.|
    |Ценовая категория|Выбор между "стандартный" или "премиум".|Дополнительные сведения о ценовых категориях см. в разделе [странице цен на Databricks](https://azure.microsoft.com/pricing/details/databricks/).|
    |Развертывание рабочей области Azure Databricks в виртуальной сети|Да|Этот параметр позволяет развернуть рабочую область Azure Databricks в виртуальной сети.|
    |Виртуальная сеть|Краткое руководство databricks|Выберите виртуальную сеть, созданную в предыдущем разделе.|
    |Имя общедоступной подсети|Public — подсети|Используйте имя по умолчанию общедоступной подсети.|
    |Диапазон CIDR подсети Public|10.179.64.0/18|Диапазон CIDR для подсети должен быть между /18 и /26.|
    |Имя подсети Private|частные подсети|Используйте имя по умолчанию частной подсети.|
    |Диапазон CIDR подсети Private|10.179.0.0/18|Диапазон CIDR для подсети должен быть между /18 и /26.|

    ![Создание рабочей области Azure Databricks на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace.png)

3. После завершения развертывания перейдите к ресурсу Azure Databricks. Обратите внимание на то, отключенное пиринга виртуальных сетей. Также Обратите внимание, что группа ресурсов и управляемой группы ресурсов на странице "Обзор". 

    ![Обзор Azure Databricks на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-overview-portal.png)

    Управляемая группа ресурсов содержит физическое расположение учетной записи хранения (DBFS), рабочей роли sg (группы безопасности сети), рабочих ролей — виртуальная сеть (виртуальная сеть). Это также расположение, где будут создаваться виртуальные машины, диска, IP-адрес и сетевой интерфейс. Эта группа ресурсов заблокирована по умолчанию. Однако когда кластер запускается в виртуальной сети, между рабочих ролей — виртуальная сеть в управляемой группе ресурсов и виртуальной сети «концентратор» создается сетевой интерфейс.

    ![Azure Databricks из управляемой группы ресурсов](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group.png)

## <a name="create-a-cluster"></a>Создание кластера

> [!NOTE]
> Чтобы использовать бесплатную учетную запись для создания кластера Azure Databricks, перед созданием кластера перейдите в свой профиль и измените свою подписку на **оплату по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

1. Вернитесь к службе Azure Databricks и выберите **запуска рабочей области** на **Обзор** страницы.

2. Выберите **кластеров** > **+ создание кластера**. Затем создайте имя кластера, например *databricks-quickstart-cluster*и Примите остальные значения по умолчанию. Выберите **Создать кластер**.

    ![Создание кластера Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/create-cluster.png)

3. После запуска кластера, вернитесь к управляемой группе ресурсов на портале Azure. Обратите внимание, что новые виртуальные машины, диски, IP-адреса и сетевые интерфейсы. Сетевой интерфейс создается в каждой из подсетей общедоступные и частные IP-адреса.  

    ![Azure Databricks из управляемой группы ресурсов после создания кластера](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group2.png)

4. Вернитесь в рабочую область Azure Databricks и выберите кластер, который вы создали. Затем перейдите к **исполнителей** вкладке **пользовательский Интерфейс Spark** страницы. Обратите внимание на то, что адреса для драйвера и исполнителя находятся в диапазоне частной подсети. В этом примере драйвер является 10.179.0.6 и исполнители — 10.179.0.4 и 10.179.0.5. IP-адреса может отличаться.

    ![Azure исполнителей пользовательский Интерфейс Spark Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-sparkui-executors.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Когда вы выполните задачи в статье, можно будет завершить работу кластера. Для этого в рабочей области Azure Databricks на панели слева выберите **Кластеры**. Для кластера, работу которого необходимо завершить, переместите указатель мыши на многоточие в столбце **Actions** (Действия) и выберите значок **Завершить**. Это предотвратит кластера.

Если не завершить работу кластера вручную, она завершится автоматически, если во время создания кластера вы установили флажок **Terminate after \_\_ minutes of inactivity** (Завершать работу после \_\_ мин бездействия). В этом случае работа кластера автоматически завершается, если он был неактивным в течение определенного времени.

Если вы не хотите повторно использовать кластер, можно удалить группу ресурсов, созданной на портале Azure.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы создали кластер Spark в Azure Databricks, который был развернут в виртуальной сети. Перейдите к следующей статье, чтобы узнать, как запросить контейнера Docker в Linux SQL Server в виртуальной сети с помощью JDBC из записной книжки Azure Databricks.  

> [!div class="nextstepaction"]
>[Запрос контейнера Docker в Linux SQL Server в виртуальной сети с Azure Databricks notebook](vnet-injection-sql-server.md)
