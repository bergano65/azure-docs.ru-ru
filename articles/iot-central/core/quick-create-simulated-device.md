---
title: Краткое руководство. Добавление имитированного устройства в Azure IoT Central
description: В этом кратком руководстве содержатся сведения о создании шаблона устройства и добавлении имитированного устройства в приложение IoT Central.
author: dominicbetts
ms.author: dobett
ms.date: 11/16/2020
ms.topic: quickstart
ms.service: iot-central
services: iot-central
ms.custom: mvc
ms.openlocfilehash: 488de7114d80e6a88cc619ba3b42f867c985ea11
ms.sourcegitcommit: d1b0cf715a34dd9d89d3b72bb71815d5202d5b3a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99833921"
---
# <a name="quickstart-add-a-simulated-device-to-your-iot-central-application"></a>Краткое руководство. Добавление имитированного устройства в приложение IoT Central

*Эта статья предназначена для операторов, разработчиков и администраторов.*

Шаблон устройства определяет возможности устройства, которое подключается к приложению IoT Central. К возможностям относятся отправляемые устройством данные телеметрии, свойства этого устройства и команды, на которые оно реагирует. Из шаблона устройства построитель или оператор может добавлять в приложение как реальные, так и имитированные устройства. Имитация устройств полезна для тестирования поведения приложения IoT Central перед подключением реальных устройств.

В этом кратком руководстве показано, как добавить шаблон устройства для макетной платы ESP32-Azure IoT Kit и создать имитированное устройство. Для выполнения задач этого краткого руководства не требуется реальное устройство. Вы работаете только с имитацией устройства. Устройство ESP32:

* отправляет данные телеметрии, например температуру;
* информирует о свойствах самого устройства, например о максимальной температуре после его перезагрузки;
* реагирует на такие команды, как перезагрузка;
* информирует о базовых свойствах устройств, таких как версия встроенного ПО и серийный номер.

## <a name="prerequisites"></a>Предварительные требования

Выполните инструкции из краткого руководства [Создание приложения Azure IoT Central](./quick-deploy-iot-central.md), чтобы создать приложение IoT Central с помощью шаблона **Пользовательское приложение > Пользовательское приложение**.

## <a name="create-a-device-template"></a>создать шаблон устройства;

Вы как разработчик можете создавать и редактировать шаблоны устройств в приложении IoT Central. После публикации шаблона устройства вы можете создать имитированное устройство или подключить реальные устройства, реализующие шаблон устройства. Имитированные устройства позволяют проверять поведение приложения перед подключением реального устройства.

Чтобы добавить в приложение новый шаблон устройства, выберите **Шаблоны устройств** в области слева.

:::image type="content" source="media/quick-create-simulated-device/device-definitions.png" alt-text="Снимок экрана: пустой список шаблонов устройств":::

Шаблон устройства содержит модель устройства, которая определяет:

* данные телеметрии, отправляемые устройством;
* свойства устройства;
* команды, на которые отвечает устройство.

### <a name="add-a-device-template"></a>Добавление шаблона устройства

Есть несколько способов добавить модель устройства в приложение IoT Central. Вы можете создать модель с нуля, импортировать модель из файла или выбрать устройство из каталога устройств. Также IoT Central поддерживает подход *сначала устройство*. Это означает, что приложение автоматически импортирует модель из репозитория при первом подключении реального устройства.

При работе с этим кратким руководством вы выбираете устройство из каталога устройств, чтобы создать шаблон устройства.

Ниже приведены инструкции по импорту модели устройства **ESP32** с помощью каталога устройств. Эти устройства отправляют в приложение данные телеметрии, например показатели температуры и давления.

1. Чтобы добавить новый шаблон устройства, щелкните **Создать** на странице **Шаблоны устройств**.

1. На странице **выбора типа** прокрутите содержимое вниз, пока не найдете плитку **ESP32-Azure IoT Kit** в разделе **Use a preconfigured device template** (Использовать предварительно настроенный шаблон устройства).

1. Выберите плитку **ESP32-Azure IoT Kit** и щелкните **Next: Review** (Далее: проверка).

1. На странице **Отзыв** выберите **Создать**.

1. Через несколько секунд отобразится новый шаблон устройства:

    :::image type="content" source="media/quick-create-simulated-device/devkit-template.png" alt-text="Снимок экрана: шаблон для устройства ESP32":::

    Имя шаблона — **Контроллер датчика**. Модель содержит такие компоненты, как **Sensor Controller** (Контроллер датчика), **SensorTemp** и **Device Information interface** (Интерфейс со сведениями об устройстве). Компоненты определяют возможности устройства ESP32. К этим возможностям относятся данные телеметрии, свойства и команды.

### <a name="add-cloud-properties"></a>Добавление свойств облака

Шаблон устройства может содержать свойства облака. Свойства облака существуют только в приложении IoT Central и никогда не отправляются на устройство и не принимаются с него. Чтобы добавить два свойства облака, выполните указанные ниже действия.

1. Выберите **Свойства облака**, а затем — **+ Добавить облачное свойство**. Воспользуйтесь сведениями из следующей таблицы, чтобы добавить в шаблон устройства два свойства облака.

    | Отображаемое имя      | Семантический тип | схема |
    | ----------------- | ------------- | ------ |
    | Дата последнего обслуживания | None          | Дата   |
    | Имя клиента     | None          | Строка |

1. Щелкните **Сохранить**, чтобы сохранить изменения.

    :::image type="content" source="media/quick-create-simulated-device/cloud-properties.png" alt-text="Снимок экрана: два свойства облака":::

## <a name="views"></a>Представления

Вы как разработчик можете настроить в приложении отображение для оператора сведений о подключенном устройстве. Ваши настройки позволят оператору управлять устройствами, подключенными к приложению. Вы можете создать два типа представлений, которые позволят оператору взаимодействовать с устройствами.

* Формы для просмотра и редактирования свойств устройства и облака.
* панели мониторинга для визуализации устройств, включая отправленные ими данные телеметрии.

### <a name="default-views"></a>Представления по умолчанию

Представления по умолчанию позволяют быстро приступить к визуализации важной информации об устройстве. Для шаблона устройства можно создать до трех представлений по умолчанию.

* Представление **Команды** позволяет оператору отправлять команды на устройство.
* В представлении **Обзор** отображаются данные телеметрии с устройства в виде схем и метрик.
* В представлении **Сведения** отображаются свойства устройства.

Выберите в шаблоне устройства узел **Представления**. Как видите, при добавлении шаблона в IoT Central автоматически создаются представления **Обзор** и **Сведения**.

Чтобы добавить для оператора новую форму **Управление устройством**, выполните следующее.

1. Выберите узел **Представления**, а затем щелкните плитку **Изменение устройства и облачных данных**, чтобы добавить новое представление.

1. Укажите для него имя **Управление устройством**.

1. Выделите свойства облака **Customer name** (Имя клиента) и **Last Service Date** (Дата последнего обслуживания), а также свойство **Target Temperature** (Целевая температура). Затем щелкните **Добавить раздел**:

    :::image type="content" source="media/quick-create-simulated-device/new-form.png" alt-text="Снимок экрана: новая форма, добавленная в шаблон устройства":::

1. Щелкните **Сохранить**, чтобы сохранить новую форму.

## <a name="publish-device-template"></a>Публикация шаблона устройства

Прежде чем создавать имитированное устройство или подключать реальное, необходимо опубликовать шаблон устройства. IoT Central автоматически публикует шаблон при его создании, но теперь вам нужно опубликовать обновленную версию.

Для публикации шаблона устройства сделайте следующее:

1. Откройте шаблон устройства **Sensor Controller** (Контроллер датчика) на странице **шаблонов устройств**.

1. Выберите **Опубликовать**.

    :::image type="content" source="media/quick-create-simulated-device/published-model.png" alt-text="Снимок экрана: расположение значка публикации":::

1. В диалоговом окне **Опубликовать этот шаблон устройства в приложении** щелкните **Опубликовать**.

Когда публикация шаблона устройства завершится, он появится на странице **Устройства**. В опубликованном шаблоне устройства уже нельзя изменить модель устройства без создания версии. Но вы можете изменять свойства облака, настройки и представления в шаблоне опубликованного устройства, не создавая новых версий. После внесения изменений щелкните **Опубликовать**, чтобы передать эти изменения оператору.

## <a name="add-a-simulated-device"></a>Добавление имитированного устройства

Чтобы добавить в приложение имитированное устройство, примените созданный ранее шаблон устройства **ESP32**.

1. Чтобы добавить новое устройство, оператору нужно выбрать элемент **Устройства** на панели слева. На вкладке **Устройства** отображаются представление **Все устройства** и шаблон **Sensor Controller** (Контроллер датчика) для устройства ESP32. Выберите **Sensor Controller** (Контроллер датчика).

1. Чтобы добавить имитированное устройство DevKit, щелкните **Создать**. Используйте рекомендуемый **код устройства**. Код устройства может содержать только буквы, цифры и символ `-`. Ви также можете ввести имя для нового устройства. Убедитесь, что для параметра **Simulate this device** (Имитировать это устройство) установлено значение **Да**, а затем выберите **Создать**.

    :::image type="content" source="media/quick-create-simulated-device/simulated-device.png" alt-text="Снимок экрана: имитированное устройство Sensor Controller (Контроллер датчика)":::

Теперь вы можете взаимодействовать с представлениями, которые разработчик создал для шаблона устройства, используя имитированные данные:

1. Выберите имитированное устройство на странице **Устройства**.

    * Представление **Обзор** демонстрирует график данных телеметрии, поступающих с имитированного устройства.

        :::image type="content" source="media/quick-create-simulated-device/simulated-telemetry.png" alt-text="Снимок экрана: страница обзора имитированного устройства":::

    * В представлении **Сведения** отображаются значения свойств.

    * Представление **Команды** позволяет выполнять на устройстве команды, например **reboot** (перезагрузка).

    * Представление **Управление устройствами** содержит форму управления устройством, которую вы создали для оператора.

    * Представление **Необработанные данные** позволяет просматривать необработанные значения данных телеметрии и свойств, отправленные устройством. Это представление удобно использовать для отладки устройств.

## <a name="use-a-simulated-device-to-improve-views"></a>Использование имитированного устройства для улучшения представлений

После того как вы создадите имитированное устройство, сборщик сможет использовать это устройство для улучшения имеющихся и создания других представлений для шаблона устройства.

1. В левой панели навигации щелкните **Шаблоны устройств** и выберите шаблон **Sensor Controller** (Контроллер датчика).

1. Выберите любое представление, которые вы хотите изменить, например **Обзор**, или создайте представление. Выберите **Configure preview device** (Настроить предварительный просмотр устройства) и щелкните **Select from a running device** (Выбрать из запущенных устройств). Здесь вы можете отключить использование устройств для предварительного просмотра, настроить реальное устройство для тестирования или выбрать уже существующее устройство, которое вы добавили в IoT Central.

1. Выберите имитированное устройство из списка. Затем выберите **Применить**. Теперь вы можете увидеть то же самое имитированное устройство в процессе сборки представлений для шаблона устройства. Это представление полезно для диаграмм и других визуализаций.

    :::image type="content" source="media/quick-create-simulated-device/configure-preview.png" alt-text="Снимок экрана: настроенная предварительная версия устройства":::

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [iot-central-clean-up-resources](../../../includes/iot-central-clean-up-resources.md)]

## <a name="next-steps"></a>Дальнейшие действия

Поработав с этим кратким руководством, вы научились создавать шаблон **Sensor Controller** (Контроллер датчика) для устройства ESP32 и добавлять имитированное устройство в приложение.

Дополнительные сведения о мониторинге подключенных к приложению устройств см. в разделе краткого руководства:

> [!div class="nextstepaction"]
> [Настройка правил и действий](./quick-configure-rules.md)
