---
title: Руководство по созданию приложения для интерактивного управления отходами с использованием Azure IoT Central
description: Руководство по созданию приложения для интерактивного управления отходами с помощью шаблонов приложений Azure IoT Central.
author: miriambrus
ms.author: miriamb
ms.date: 11/12/2019
ms.topic: tutorial
ms.service: iot-central
services: iot-central
ms.openlocfilehash: 38da444779a56f39d4119f3797ddb5bd2f31aeae
ms.sourcegitcommit: 598c5a280a002036b1a76aa6712f79d30110b98d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2019
ms.locfileid: "74112639"
---
# <a name="tutorial-create-a-connected-waste-management-application-in-iot-central"></a>Руководство по созданию приложения для интерактивного управления отходами с использованием IoT Central

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

В этом учебнике описано, как создать приложение Azure IoT Central для интерактивного управления отходами на основе шаблона приложения IoT Central **Интерактивное управление отходами**. 

В этом учебнике рассмотрены следующие темы: 

> [!div class="checklist"]
> * Создание приложения для интерактивного управления отходами с помощью **соответствующего шаблона** Azure IoT Central.
> * Изучение и настройка панели мониторинга оператора. 
> * Изучение шаблона устройства для интерактивного мусорного бака.
> * Изучение имитированных устройств.
> * Изучение и настройка правил.
> * Настройка заданий
> * Настройка фирменной символики приложения с использованием белых меток.

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим учебником требуется:
-  подписка Azure (рекомендуется). При необходимости можно использовать бесплатную пробную версию в течение семи дней. Если у вас еще нет подписки, создайте ее на [странице регистрации в Azure](https://aka.ms/createazuresubscription);

## <a name="create-connected-waste-management-app-in-iot-central"></a>Создание приложения для интерактивного управления отходами с использованием IoT Central

В этом разделе для создания нужного приложения в IoT Central мы будем использовать шаблон **Интерактивное управление отходами** Azure IoT Central.

Чтобы создать приложение для интерактивного управления отходами в Azure IoT Central:  

1. Перейдите на [домашнюю страницу Azure IoT Central](https://aka.ms/iotcentral).

    Если у вас есть подписка Azure, выполните вход с учетными данными для доступа к ней. Если ее нет, используйте учетную запись Майкрософт:

    ![Ввод учетной записи организации](./media/tutorial-connectedwastemanagement/sign-in.png)

2. Выберите раздел **Сборка** на панели слева, а затем вкладку **Государственные организации**. На странице государственных учреждений будут показаны несколько шаблонов приложений для соответствующих организаций.

    ![Шаблоны для сборки приложений для государственных организаций](./media/tutorial-connectedwastemanagement/iotcentral-government-tab-overview.png)

1. Выберите шаблон приложения **Интерактивное управление отходами**. Он предусматривает шаблон устройства для интерактивного управления отходами, имитированное устройство, панель мониторинга оператора и предварительно настроенные правила мониторинга.    

2. Щелкните **Создать приложение**. Откроется форма создания приложения **Новое приложение** с такими полями:
    * **Имя приложения**. По умолчанию для приложения используется имя *Интерактивное управление отходами*. За именем следует строка уникального идентификатора, который создает Azure IoT Central. При желании выберите понятное имя для приложения. Имя приложения также можно изменить позже.
    * **URL-адрес** — при необходимости можно выбрать нужный URL-адрес. Его также можно изменить позже. 
    * Если у вас есть подписка Azure, укажите *каталог, подписку Azure и регион*. Если у вас нет подписки, вы можете включить **семидневную бесплатную пробную версию** и указать необходимые контактные данные.  

    Дополнительные сведения о каталогах и подписках см. в статье [Создание приложения Azure IoT Central](../preview/quick-deploy-iot-central.md).

5. Нажмите кнопку **Создать** внизу страницы. 

    ![Страница создания приложения Azure IoT Central для интерактивного управления отходами](./media/tutorial-connectedwastemanagement/new-application-connectedwastemanagement.png)

6. Вы создали приложение для интерактивного управления отходами с помощью **соответствующего шаблона** Azure IoT Central. 

Поздравляем! Созданное приложение состоит из таких предварительно настроенных компонентов:
* примеров панелей мониторинга для операторов;
* предварительно определенных примеров шаблонов устройств для интерактивных мусорных баков;
* имитированных устройств для интерактивных мусорных баков;
* предварительно настроенных правил и заданий;
* фирменной символики с использованием белых меток. 

Вы можете в любое время вносить изменения в свое приложение. Теперь изучим приложение и настроим его.  

## <a name="explore-and-customize-operator-dashboard"></a>Изучение и настройка панели мониторинга оператора 
После создания приложения вы перейдете на панель мониторинга **интерактивного управления отходами для службы Wide World Waste**.

   ![Панель мониторинга интерактивного управления отходами](./media/tutorial-connectedwastemanagement/connectedwastemanagement-dashboard1.png)

Как сборщик вы можете создавать и настраивать на панели мониторинга представления, которые будут использовать операторы. Но прежде чем что-то настроить, сначала ознакомимся с панелью мониторинга. 

> [!NOTE]
> Все данные, которые отображаются на панели мониторинга, основаны на данных с имитированного устройства, речь о котором пойдет в следующем разделе. 

Панель мониторинга состоит из плиток различных видов:

* Первая на панели мониторинга ***плитка с изображением службы управления отходами Wide World Waste*** — это плитка вымышленной службы Wide World Waste. Вы можете настроить эту плитку и добавить свое изображение или вовсе удалить ее. 

* ***Плитка изображения мусорного бака***. Вы можете использовать плитки изображения и содержимого для создания визуального представления отслеживаемого устройства вместе с описательным текстом. 

* ***Плитка ключевого показателя эффективности уровня заполнения***. На плитке отображается значение, сообщаемое *датчиком заполнения* в мусорном баке. Датчик *уровня заполнения* и другие датчики, такие как *анализатор запаха* или *веса*, в мусорном баке можно контролировать удаленно. Оператор может принимать меры, например вызывать мусоровоз. 

*  ***Карта области мониторинга отходов***. Использует Azure Maps, что можно настроить прямо в Azure IoT Central. На фрагменте карты отображается расположение устройства. Попробуйте навести указатель мыши на карте и использовать на ней элементы управления, такие как увеличение, уменьшение и развертывание.

     ![Карта панели мониторинга интерактивного управления отходами](./media/tutorial-connectedwastemanagement/connectedwastemanagement-dashboard-map.png)


* ***Линейчатая диаграмма уровня заполнения, запаха и веса**. На диаграмме можно визуализировать один или несколько экземпляров данных телеметрии устройства. Линейчатую диаграмму также можно развернуть.  

  ![Диаграмма на панели мониторинга интерактивного управления отходами](./media/tutorial-connectedwastemanagement/connectedwastemanagement-dashboard-barchart.png)


* **Плитка содержимого Field Services**. Панель мониторинга содержит ссылку на интеграцию со службами Dynamics 365 Field Services из приложения Azure IoT Central. Например, можно использовать службы Field Services для создания запросов в службу вывоза отходов. 


### <a name="customize-dashboard"></a>Настройка панели мониторинга 

Как сборщик вы можете настроить представления на панели мониторинга для операторов. Вы можете сделать следующее:
1. Щелкните меню **Правка**, чтобы настроить **панель мониторинга интерактивного управления отходами службы Wide World Waste**. Вы можете настроить панель мониторинга, выбирая команды в меню **Правка**. Когда панель мониторинга находится в режиме **правки**, можно добавлять новые плитки или настраивать существующие. 

    ![Изменение панели мониторинга](./media/tutorial-connectedwastemanagement/edit-dashboard.png)

2. Вы также можете нажать кнопку **+ Создать**, чтобы создать панель мониторинга и настроить ее с нуля. Вы можете создать несколько панелей мониторинга и перемещаться между ними с помощью меню панелей. 

## <a name="explore-connected-waste-bin-device-template"></a>Изучение шаблона устройства для интерактивного мусорного бака

В шаблоне устройства в Azure IoT Central определены возможности устройства, например телеметрия, свойства или команда. Как сборщик вы можете определить шаблоны, которые представляют возможности подключаемых устройств. 
 

Приложение **для интерактивного управления отходами** поставляется с примером шаблона интерактивного мусорного бака.

Чтобы просмотреть шаблон устройства, сделайте следующее:

1. В приложении в IoT Central в области навигации слева щелкните раздел **Шаблоны устройств**. 

    ![Шаблон устройства](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devicetemplate.png)

2. В списке шаблонов устройств вы увидите запись для **интерактивного мусорного бака**. Откройте шаблон, щелкнув его имя.

3. Ознакомьтесь с возможностями шаблона устройства. Вы увидите определяемые шаблоном датчики, такие как *уровень заполнения*, *анализатор запаха*, *вес*, *расположение* и т. д.

   ![Шаблон устройства](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devicetemplate-connectedbin.png)

   

### <a name="customizing-the-device-template"></a>Настройка шаблона устройства

Чтобы настроить шаблон, сделайте следующее:
1. В меню шаблона устройства выберите пункт **Настроить**.
2. Найдите тип телеметрии `Odor meter`.
3. Замените имя `Odor meter` в столбце **Отображаемое имя** на `Odor level`.
4. Вы можете изменить единицу измерения или установить *минимальное* и *максимальное значения*.
5. Нажмите кнопку **Сохранить**, чтобы сохранить изменения. 

### <a name="add-a-cloud-property"></a>Добавление свойства облака 

1. В меню шаблона устройства перейдите в раздел **Облачное свойство**.
2. Щелкните **+ Добавить облачное свойство**, чтобы добавить новое свойство облака. В IoT Central можно добавить свойство, которое относится к устройству, но не должно быть отправлено устройством. Одним из примеров такого свойства является пороговое значение для оповещения, относящееся к области установки, сведениям о ресурсе или обслуживании и т. п. 
3. Нажмите кнопку **Сохранить**, чтобы сохранить изменения. 
 
### <a name="views"></a>Представления 
* Шаблон интерактивного мусорного бака поставляется с предварительно определенными представлениями. Ознакомьтесь с ними и внесите изменения. В представлениях определяется, как операторы будут видеть данные устройства, и вводятся облачные свойства. 

  ![Представления для шаблона устройства](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devicetemplate-views.png)

### <a name="publish"></a>Публикация 

* Если вы внесли изменения, обязательно **опубликуйте** шаблон устройства. 

### <a name="create-a-new-device-template"></a>Создание шаблона нового устройства 

* Нажмите кнопку **+ Создать**, чтобы создать шаблон устройства, и выполните всю процедуру. Вы сможете создать настраиваемый шаблон устройства с нуля или выбрать шаблон в каталоге устройств Azure. 

## <a name="explore-simulated-devices"></a>Изучение имитированных устройств

В IoT Central вы также можете создавать имитированные устройства для тестирования шаблона устройства и приложения. 

Приложение **для интерактивного управления отходами** поставляется с двумя имитированными устройствами, сопоставляемыми с шаблоном интерактивного мусорного бака. 

### <a name="to-view-the-devices"></a>Чтобы просмотреть устройства, сделайте следующее:

1. В IoT Central на панели навигации слева перейдите в раздел **Устройство**. 

   ![Устройства](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devices.png)

2. Выберите и щелкните устройство интерактивного мусорного бака.  

     ![Устройство 1](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devices-bin1.png)

3. Перейдите на вкладку **Свойства облака** и попробуйте обновить значение `Bin full alert threshold` с `95` на `100`. 
* Ознакомьтесь со вкладками **Свойства устройства** и **Device Dashboard** (Панель мониторинга устройств). 

> [!NOTE]
> Обратите внимание, что все вкладки настроены с помощью **представлений шаблонов устройств**.

### <a name="add-new-devices"></a>Добавление новых устройств

* Вы можете добавить новые устройства, нажав кнопку **+ Создать** на вкладке **Устройства**. 

## <a name="explore-and-configure-rules"></a>Изучение и настройка правил

В Azure IoT Central можно создавать правила для автоматических мониторинга телеметрии устройств и активации действий при выполнении одного или нескольких условий. Действия могут включать в себя отправку уведомлений по электронной почте либо активацию действия Microsoft Flow или веб-перехватчика для отправки данных в другие службы.

В **приложении для интерактивного управления отходами** есть четыре примера правил.

### <a name="to-view-rules"></a>Чтобы просмотреть правила, сделайте следующее:
1. В IoT Central на панели навигации слева перейдите в раздел **Правила**.

   ![Правила](./media/tutorial-connectedwastemanagement/connectedwastemanagement-rules.png)

2. Выберите оповещение **о заполнении бака**.

     ![Оповещение о заполнении бака](./media/tutorial-connectedwastemanagement/connectedwastemanagement-binfullalert.png)

 3. `Bin full alert` проверяет, когда параметр **Условие** принимает значение `Fill level is greater than or equal to Bin full alert threshold`.

    `Bin full alert threshold` является *свойством облака*, определенным в шаблоне устройства `Connected waste bin`. 

Теперь создадим действие отправки сообщения.

### <a name="create-an-email-action"></a>Создание действия отправки сообщения
Чтобы настроить действие отправки сообщения в списке действий правила, сделайте следующее:
1. Нажмите **+ Электронная почта**. 
2. Задайте *Уведомление о высоком уровне pH* в качестве понятного **отображаемого имени** для действия.
3. Введите адрес электронной почты, связанный с вашей учетной записью IoT Central, в поле **Кому**. 
4. При необходимости введите заметку, которая будет включена в текст сообщения электронной почты.
5. Нажмите кнопку **Готово**, чтобы завершить создание действия.
6. Выберите **Сохранить**, чтобы сохранить и активировать новое правило. 

Вы получите сообщение электронной почты, если будет выполнено настроенное **условие**.

> [!NOTE]
> Приложение будет отправлять сообщения электронной почты при каждом выполнении условия. **Отключите** правило, чтобы прекратить получение сообщений при соблюдении условия автоматического правила. 
  
Чтобы создать правило, сделайте следующее: 
1. В области навигации слева в разделе **Правила** нажмите кнопку **+ Создать**.

## <a name="configure-jobs"></a>Настройка заданий

В IoT Central с помощью заданий можно активировать обновления свойств устройства или облака на нескольких устройствах. В дополнение к активации свойств, можно также использовать задания для активации команд устройства на нескольких устройствах. IoT Central автоматизирует рабочий процесс. 

1. В области навигации слева выберите раздел **Задания**. 
2. Нажмите кнопку **+ Создать** и настройте одно или несколько заданий. 


## <a name="customize-your-application"></a>Настройка приложения 

Создатель приложения может изменить несколько параметров, чтобы настроить взаимодействие с пользователем в приложении.

### <a name="to-change-the-application-theme"></a>Чтобы изменить тему приложения, сделайте следующее:

1. Выберите **Администрирование > Настройка приложения**.
3. Используйте кнопку **Изменить**, чтобы выбрать изображение для отправки в качестве **логотипа приложения**.
4. Используйте кнопку **Изменить**, чтобы выбрать изображение как **значок браузера**, который будет отображаться на вкладках браузера.
5. Вы также можете заменить цвета по умолчанию в разделе **Цвета браузера**, добавив шестнадцатеричные коды цветов HTML.

   ![Настройка приложения в Azure IoT Central](./media/tutorial-connectedwastemanagement/connectedwastemanagement-customize-your-application.png)

6. Вы также можете изменить изображения приложения. Для этого выберите **Администрирование > Параметры приложения** и нажмите кнопку **Выберите изображение**, чтобы указать изображение и отправить его.
7. Наконец, можно также изменить **тему**, щелкнув **Параметры** в заголовке приложения.

  
## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы не собираетесь дальше использовать это приложение, удалите его, выполнив следующие действия.

1. Откройте вкладку "Администрирование" в приложении IoT Central на панели слева.
2. Выберите параметры приложения и нажмите кнопку "Удалить" в нижней части страницы.

  

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения об [основных понятиях интерактивного приложения для управления отходами](./concepts-connectedwastemanagement-architecture.md)
