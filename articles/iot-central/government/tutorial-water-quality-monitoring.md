---
title: Руководство по созданию приложения для мониторинга качества воды с помощью Azure IoT Central
description: Руководство по созданию приложения для мониторинга качества воды с помощью шаблонов приложений Azure IoT Central.
author: miriambrus
ms.author: miriamb
ms.date: 11/12/2019
ms.topic: tutorial
ms.service: iot-central
services: iot-central
manager: abjork
ms.openlocfilehash: 7014882e7da9eb7ab7df65cd20403982a46018a3
ms.sourcegitcommit: 598c5a280a002036b1a76aa6712f79d30110b98d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2019
ms.locfileid: "74112607"
---
# <a name="tutorial-create-a-water-quality-monitoring-application-in-azure-iot-central"></a>Руководство по созданию приложения для мониторинга качества воды в Azure IoT Central

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

В этом учебнике описывается создание приложения для мониторинга качества воды в Azure IoT Central. Вы создадите приложение на основе шаблона приложения **Мониторинг качества воды** Azure IoT Central.

Из этого руководства вы узнаете, как выполнять такие задачи.

> [!div class="checklist"]
> * Использование шаблона **Мониторинг качества воды** для создания соответствующего приложения.
> * Изучение и настройка панели мониторинга оператора.
> * Изучение шаблона устройства для мониторинга качества воды.
> * Изучение имитированных устройств.
> * Изучение и настройка правил.
> * Настройка заданий.
> * Настройка фирменной символики приложений с использованием белых меток.

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим учебником мы рекомендуем использовать подписку Azure. Если у вас еще нет подписки, создайте ее на [странице регистрации в Azure](https://aka.ms/createazuresubscription);

## <a name="create-a-water-quality-monitoring-application-in-azure-iot-central"></a>Создание приложения для мониторинга качества воды в Azure IoT Central

В этом разделе вы используете шаблон **Мониторинг качества воды** Azure IoT Central, чтобы создать соответствующее приложение.

1. Перейдите на [домашнюю страницу Azure IoT Central](https://aka.ms/iotcentral).

    Если у вас есть подписка Azure, выполните вход с ее учетными данными. В противном случае используйте учетную запись Майкрософт.

    ![Вход в учетную запись организации](./media/tutorial-waterqualitymonitoring/sign-in.png)

1. Выберите **Сборка** в крайней левой области Azure IoT Central и перейдите на вкладку **Государственные учреждения**. В области государственных учреждений будут показаны несколько шаблонов приложений для государственных организаций.

    ![Шаблоны приложений для государственных организаций](./media/tutorial-waterqualitymonitoring/iotcentral-government-tab-overview1.png)

1. Выберите шаблон приложения **Мониторинг качества воды**. Он предусматривает шаблон устройства для анализа качества воды, имитированные устройства, панель мониторинга операторов и предварительно настроенные правила мониторинга.

1. Выберите **Создать приложение**. Откроется область **Новое приложение**, в которой отобразятся следующие элементы:

    * **Имя приложения**: имя приложения по умолчанию — **Мониторинг качества воды**. За именем следует строка уникального идентификатора, создаваемая Azure IoT Central. При необходимости можно ввести отображаемое имя. Вы также можете изменить имя приложения позже.
    * **URL-адрес**. Вы можете ввести любой URL-адрес или изменить его позже.
    * Если у вас есть подписка Azure, укажите значения **каталога**, **подписки Azure** и **региона**. Если у вас нет подписки, вы можете включить **семидневную бесплатную пробную версию** и указать необходимые контактные данные.

    Дополнительные сведения о каталогах и подписках см. в кратком руководстве по [созданию приложения Azure IoT Central](../core/quick-deploy-iot-central-pnp.md?toc=/azure/iot-central-pnp/toc.json&bc=/azure/iot-central-pnp/breadcrumb/toc.json).

1. Нажмите кнопку **Создать** в нижней левой части страницы.

    ![Страница нового приложения Azure IoT Central](./media/tutorial-waterqualitymonitoring/new-application-waterqualitymonitoring1.png)

Вы создали приложение для мониторинга качества воды с помощью шаблона **Мониторинг качества воды** Azure IoT Central.

Новое приложение поставляется с такими предварительно настроенными компонентами:

* панели мониторинга для операторов;
* шаблоны устройств для мониторинга качества воды;
* имитированные устройства для мониторинга качества воды;
* правила и задания;
* фирменная символика, использующая белые метки.

Приложение можно изменить в любое время.

Теперь перейдем к изучению приложения и его настройке.

## <a name="explore-and-customize-the-operator-dashboard"></a>Изучение и настройка панели мониторинга оператора

После создания приложения откроется область **панели мониторинга качества воды Wide World Water**.

   ![Панель мониторинга качества воды](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-dashboard1.png)

Как сборщик вы можете создать и настроить на панели мониторинга представления, которые будут использовать операторы. Но прежде чем пытаться что-то настроить, сначала изучите панель мониторинга.

Все данные, отображаемые на панели мониторинга, основаны на данных имитированного устройства, речь о котором пойдет ниже.

Панель мониторинга содержит следующие виды плиток.

* **Плитка с изображением службы водоснабжения Wide World Water**. Первая плитка в левом верхнем углу панели мониторинга — это изображение вымышленной службы водоснабжения с именем Wide World Water. Вы можете настроить для плитки использование собственного изображения или и вовсе удалить ее.

* **Плитки ключевых показателей эффективности по среднему уровню pH**. Плитки ключевых показателей эффективности, например по **среднему уровню pH в течение последних 30 минут**, находятся в верхней части панели мониторинга. Вы можете настроить плитки КПЭ и задать для них различные типы и диапазоны времени.

* **Карта области мониторинга воды**. Azure IoT Central использует для отображения расположения устройства службу Azure Maps, которую можно напрямую задать в приложении. Вы также можете сопоставлять сведения о расположении из приложения с устройством, а затем использовать Azure Maps для отображения информации на карте. Наведите курсор на карту и ознакомьтесь с элементами управления.

* **Диаграмма в виде тепловой карты для среднего значения распределения pH**. Вы можете выбрать различные диаграммы визуализации, чтобы отобразить данные телеметрии устройства наиболее подходящим для вашего приложения способом.

* **График критических индикаторов качества**. Вы можете визуализировать данные телеметрии устройства в виде графика за нужный диапазон времени.  

* **Линейчатая диаграмма концентрации химических агентов**. Вы можете визуализировать данные телеметрии устройства в виде линейчатой диаграммы.

* **Кнопка действия**. Панель мониторинга содержит плитку для действий, которые оператор может инициировать непосредственно с панели, например сброс свойств устройства.

* **Плитки списка свойств**. Панель мониторинга содержит несколько плиток свойств, которые представляют пороговую информацию, сведения об обслуживании и работоспособности устройства.

### <a name="customize-the-dashboard"></a>Настройка панели мониторинга

Как сборщик вы можете настроить на панели мониторинга представления, которые будут использовать операторы.

1. Выберите **Правка** для настройки области **панели мониторинга качества воды Wide World Water**. Вы можете настроить панель мониторинга, выбрав команды в меню **Правка**. Когда панель мониторинга находится в режиме правки, можно добавить новые плитки или настроить существующие.

    ![Редактирование панели мониторинга](./media/tutorial-waterqualitymonitoring/edit-dashboard.png)

1. Выберите **+ Создать**, чтобы создать и настроить новую панель мониторинга. Вы можете создать несколько панелей мониторинга и перемещаться между ними с помощью меню панелей.

## <a name="explore-a-water-quality-monitoring-device-template"></a>Изучение шаблона устройства для мониторинга качества воды

Шаблон устройства в Azure IoT Central определяет возможности устройства. Доступные возможности — это данные телеметрии, свойства и команды. Как сборщик вы можете определить в Azure IoT Central шаблоны устройств, которые представляют возможности подключенных устройств. Вы также можете создать имитированные устройства для тестирования шаблона устройства и приложения.

Созданное приложение для мониторинга качества воды поставляется с соответствующим шаблоном устройства.

Чтобы просмотреть шаблон устройства, сделайте следующее:

1. Выберите **Шаблоны устройств** в крайней левой области приложения в Azure IoT Central.
1. В списке шаблонов устройств выберите **Мониторинг качества воды**. Откроется этот шаблон устройства.

    ![Шаблон устройства](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-devicetemplate.png)

### <a name="customize-the-device-template"></a>Настройка шаблона устройства

Рекомендуется настроить следующие параметры шаблона устройства:

1. Выберите **Настроить** в меню шаблона устройства.
1. Перейдите к типу телеметрии **Температура**.
1. Измените значение в поле **Отображаемое имя** на **Сообщаемая температура**.
1. Измените единицу измерения или установите **минимальное** и **максимальное значения**.
1. Щелкните **Сохранить**.

#### <a name="add-a-cloud-property"></a>Добавление свойства облака

1. В меню шаблона устройства выберите **Облачное свойство**.
1. Выберите **+ Добавить облачное свойство**, чтобы добавить новое свойство облака. В Azure IoT Central можно добавить свойство, которое относится к устройству, но не должно быть отправлено устройством. Одним из примеров такого свойства является пороговое значение для оповещения, относящееся к области установки, сведениям о ресурсе или обслуживании.
1. Щелкните **Сохранить**.

### <a name="explore-views"></a>Просмотр представлений

Шаблон устройства для мониторинга качества воды поставляется с предопределенными представлениями. В представлениях определяется, как операторы видят данные устройства и задают облачные свойства. Изучите представления и попробуйте внести изменения.

  ![Представления для шаблона устройства](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-devicetemplate-views.png)

### <a name="publish-the-device-template"></a>Публикация шаблона устройства

Если вы вносите изменения, обязательно нажмите кнопку **Опубликовать**, чтобы опубликовать шаблон устройства.

### <a name="create-a-new-device-template"></a>Создание шаблона нового устройства

1. Нажмите кнопку **+ Создать**, чтобы создать шаблон устройства, и выполните всю процедуру.
1. Создайте настраиваемый шаблон устройства или выберите шаблон устройства из каталога устройства Интернета вещей Azure IoT.

## <a name="explore-simulated-devices"></a>Изучение имитированных устройств

Приложение для мониторинга качества воды, созданное на основе шаблона приложения, содержит два имитированных устройства. Эти устройства сопоставляются с шаблоном устройства для мониторинга качества воды.

### <a name="view-the-devices"></a>Просмотр устройств

1. Выберите **Устройства** в крайней левой области приложения.

   ![Устройства](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-devices.png)

1. Выберите одно имитированное устройство.

    ![Выбор устройства 1](./media/tutorial-waterqualitymonitoring/waterqualitymonitor-device1.png)

1. На вкладке **Свойства облака** измените значение **порога кислотности (pH)** с **8** на **9**.
1. Изучите вкладку **Свойства устройства** и вкладку **Панель мониторинга устройства**.

> [!NOTE]
> Все вкладки настроены с помощью **представлений для шаблона устройства**.

### <a name="add-new-devices"></a>Добавление новых устройств

На вкладке **Устройства** выберите **+ Создать**, чтобы добавить новое устройство.

## <a name="explore-and-configure-rules"></a>Изучение и настройка правил

В Azure IoT Central можно создавать правила, которые автоматически отслеживают данные телеметрии устройства. При выполнении условий какого-либо правила активируется действие. Одно из возможных действий — отправка уведомлений по электронной почте. Это также может быть действие Microsoft Flow или веб-перехватчика для отправки данных в другие службы.

Созданное приложение для мониторинга качества воды содержит два предварительно настроенных правила.

### <a name="view-rules"></a>Просмотр правил

1. Выберите **Правила** в крайней левой области приложения.

   ![Правила](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-rules.png)

1. Выберите **High pH alert** (Оповещение о высоком уровне pH), которое является одним из предварительно настроенных правил в приложении.

   ![Правило генерации оповещений о высоком уровне pH](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-highphalert.png)

   Правило **High pH alert** (Оповещение о высоком уровне pH) настроено для проверки того, превышает ли значение кислотности (pH) 8.

Затем добавьте в правило действие для отправки электронного сообщения:

1. Нажмите **+ Электронная почта**.
1. В поле **Отображаемое имя** введите **Оповещение о высоком уровне pH**.
1. В поле **Кому** введите адрес электронной почты, связанный с вашей учетной записью Azure IoT Central.
1. При необходимости введите заметку, которая будет включена в текст сообщения электронной почты.
1. Нажмите кнопку **Готово**, чтобы завершить создание действия.
1. Выберите **Сохранить**, чтобы сохранить и активировать новое правило.

В течение нескольких минут вы получите сообщение электронной почты, если будет выполнено настроенное условие.

> [!NOTE]
> Приложение отправляет сообщения электронной почты при каждом выполнении условия. **Отключите** правило, чтобы прекратить получать автоматические сообщения при выполнении условий правила.
  
Для создания правила выберите **Правила** в крайней левой области приложения, а затем — **+ Создать**.

## <a name="configure-jobs"></a>Настройка заданий

С помощью заданий Azure IoT Central можно активировать обновления свойств устройства или облака на нескольких устройствах. Вы также можете использовать задания для активации команд устройства на нескольких устройствах. Azure IoT Central автоматизирует для вас рабочий процесс.

1. Выберите **Задания** в крайней левой области приложения.
1. Выберите **+ Создать** и настройте одно или несколько заданий.

## <a name="customize-your-application"></a>Настройка приложения

Создатель приложения может изменить несколько параметров, чтобы настроить взаимодействие с пользователем в приложении.

1. Выберите **Администрирование** > **Настройка приложения**.
1. В разделе **Логотип приложения** нажмите кнопку **Изменить**, чтобы выбрать изображение для отправки в качестве логотипа.
1. В разделе **Значок браузера** нажмите кнопку **Изменить**, чтобы выбрать изображение, которое отобразится на вкладках браузера.
1. В разделе **Цвета браузера** можно заменить цвета по умолчанию с помощью шестнадцатеричных кодов цвета HTML.
1. Выберите **Параметры**, чтобы изменить значение параметра **Тема**.

   ![Настройка приложения](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-customize-your-application1.png)

### <a name="update-the-application-image"></a>Обновление изображения для приложения

1. Выберите **Администрирование** > **Параметры приложения**.

1. Используйте кнопку **Выбрать изображение**, чтобы выбрать изображение для отправки в качестве логотипа приложения.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы не собираетесь использовать приложение, удалите его, как показано ниже:

1. Откройте вкладку **Администрирование** в крайней левой области приложения.
1. Выберите **Параметры приложения** и нажмите кнопку **Удалить**.

    ![Удаление приложения](./media/tutorial-waterqualitymonitoring/waterqualitymonitoring-application-settings-delete-app1.png)

## <a name="next-steps"></a>Дополнительная информация

* [Эталонная архитектура решения для мониторинга качества воды](./concepts-waterqualitymonitoring-architecture.md)
