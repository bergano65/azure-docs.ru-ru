---
title: Планирование среды Gen2 в Azure Time Series Insights | Документация Майкрософт
description: Рекомендации по настройке, управлению, планированию и развертыванию среды Gen2 службы "аналитика временных рядов Azure".
author: deepakpalled
ms.author: dpalled
manager: diviso
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 06/30/2020
ms.custom: seodec18
ms.openlocfilehash: 1788eba0ef9be781fb7cf23f1eb86b48c9c360e1
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91287426"
---
# <a name="plan-your-azure-time-series-insights-gen2-environment"></a>Планирование среды Аналитики временных рядов Azure 2-го поколения

В этой статье описываются рекомендации по планированию и быстрому началу работы с помощью Gen2 временных рядов Azure.

## <a name="best-practices-for-planning-and-preparation"></a>Рекомендации для планирования и подготовки

Рекомендации по планированию и подготовке среды описаны далее в следующих статьях:

* Что вы получаете при [подготовке среды Gen2 "аналитика временных рядов Azure](#the-gen2-environment)".
* [Идентификаторы временных рядов и свойства отметок времени](#configure-time-series-ids-and-timestamp-properties).
* Новые [модели временных рядов](#understand-the-time-series-model)и способы создания собственных.
* Как [эффективно отправить события в JSON](#shape-your-events).
* [Параметры аварийного восстановления бизнес-](#business-disaster-recovery)аналитики временных рядов Azure.

Служба "аналитика временных рядов Azure" использует бизнес-модель с оплатой по мере использования. Дополнительные сведения о расходах и пропускной способности см. в статье цены на службу " [аналитика временных рядов Azure](https://azure.microsoft.com/pricing/details/time-series-insights/)".

## <a name="the-gen2-environment"></a>Среда Gen2

При подготовке среды Gen2 "аналитика временных рядов Azure" вы создадите два ресурса Azure:


* Среда Gen2 "аналитика временных рядов Azure"
* Учетная запись хранения Azure

В рамках процесса подготовки необходимо указать, следует ли включить горячее хранение. Горячий магазин предоставляет возможности многоуровневого запроса. Если этот параметр включен, необходимо указать срок хранения в диапазоне от 7 до 30 дней. Запросы, выполняемые в период хранения для горячего хранения, обычно обеспечивают более быстрое время ответа. Когда запрос посекается с периодом хранения теплого хранилища, он обслуживается из холодного хранилища.

Запросы в горячий магазин предоставляются бесплатно, а запросы в холодном магазине требуют затрат. Важно понимать шаблоны запросов и соответствующим образом спланировать конфигурацию "горячий". Рекомендуется, чтобы интерактивная аналитика в самых последних данных находилась в горячий магазин, анализ шаблонов и долгосрочные тенденции находились в холодном состоянии.

> [!NOTE]
> Дополнительные сведения о запросах к горячим данным см. в [справочнике по API](https://docs.microsoft.com/rest/api/time-series-insights/dataaccessgen2/query/execute#uri-parameters).

Для начала работы вам понадобятся три дополнительных элемента:

* [Модель временных рядов](./concepts-model-overview.md)
* [Источник событий, подключенный к службе "Аналитика временных рядов Azure"](./concepts-streaming-ingestion-event-sources.md)
* [События, поступающие в источник событий ](./time-series-insights-send-events.md), которые сопоставлены с моделью и имеют допустимый формат JSON

## <a name="review-azure-time-series-insights-gen2-limits"></a>Проверка ограничений Gen2 для временных рядов Azure

[!INCLUDE [Review Azure Time Series Insights Gen2 limits](../../includes/time-series-insights-preview-limits.md)]

## <a name="configure-time-series-ids-and-timestamp-properties"></a>Настройка идентификаторов временных рядов и свойств отметок времени

Для создания новой среды службы "аналитика временных рядов Azure" выберите идентификатор временного ряда. Это действует как логический раздел для ваших данных. Как уже говорилось, убедитесь в том, что у вас есть готовые идентификаторы временных рядов.

> [!IMPORTANT]
> Идентификаторы временных рядов *нельзя изменить позже*. Перед окончательным выбором и первым использованием проверьте каждый их них.

Можно выбрать до трех ключей, чтобы уникальным образом отличать ресурсы. Дополнительные сведения см. в статье рекомендации [по выбору идентификатора временного ряда](./time-series-insights-update-how-to-id.md) и [правил приема](concepts-json-flattening-escaping-rules.md).

Свойство **timestamp** также имеет важное значение. Вы можете назначить это свойство при добавлении источников событий. Каждый источник событий имеет дополнительное свойство метки времени, которое используется для отслеживания источников событий с течением времени. Значения метки времени учитывают регистр и должны быть отформатированы в соответствии с индивидуальной спецификацией каждого источника события.

Если оставить это поле пустым, то время, когда событие было поставлено в центр Интернета вещей или концентратор событий, используется в качестве метки времени события. Как правило, пользователи должны настроить свойство метки времени и использовать время, когда датчик или тег создавали чтение, а не время в очереди. Дополнительные сведения и чтение сведений о смещениях часовых поясов см. в статье о смещении времени [источника события](./concepts-streaming-ingestion-event-sources.md#event-source-timestamp).

## <a name="understand-the-time-series-model"></a>Понимание модели временного ряда

Теперь вы можете настроить модель временных рядов в среде службы "аналитика временных рядов Azure". Новая модель позволяет легко находить и анализировать данные Центра Интернета вещей. Это позволяет осуществлять обработку, обслуживание и обогащение данных временных рядов и помогает подготовить наборы данных готовые для потребителей. Модель использует идентификаторы временных рядов, которые сопоставляются с экземпляром, который связывает уникальный ресурс с переменными, известными как типы, и иерархиями. Дополнительные сведения см. в статье Общие сведения о [модели временных рядов](./concepts-model-overview.md) .

Модель является динамичной, поэтому ее можно построить в любое время. Чтобы быстро приступить к работе, создайте и отправьте его перед отправкой данных в службу "аналитика временных рядов Azure". Для создания модели прочтите статью [Использование модели временных рядов](/azure/time-series-insights/concepts-model-overview).

Для многих клиентов модель временных рядов сопоставляется с уже существующей моделью активов или системой ERP. Если у вас нет существующей модели, [предоставляется](https://github.com/Microsoft/tsiclient) предварительно созданный пользовательский интерфейс для быстрого запуска и выполнения. Чтобы представить, как модель может вам помочь, посмотрите [демонстрационный пример среды](https://insights.timeseries.azure.com/preview/demo).

## <a name="shape-your-events"></a>Формирование ваших событий

Вы можете проверить способ отправки событий в службу "аналитика временных рядов Azure". В идеале, ваши мероприятия денормализуются хорошо и эффективно.

Хорошее правило:

* Храните метаданные в модели временных рядов.
* Убедитесь, что режим временного ряда, поля экземпляра и события содержат только необходимые сведения, например идентификатор временных рядов или свойство метки времени.

Чтобы получить дополнительные сведения и понять, как будут сведены и храниться события, прочтите [правила обработки](./concepts-json-flattening-escaping-rules.md)и преобразования JSON.

[!INCLUDE [business-disaster-recover](../../includes/time-series-insights-business-recovery.md)]

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь с [помощником по Azure](../advisor/advisor-overview.md) , чтобы спланировать параметры конфигурации бизнес-восстановления.
- Ознакомьтесь с [помощником по Azure](../advisor/advisor-overview.md) , чтобы спланировать параметры конфигурации бизнес-восстановления.
- Дополнительные сведения о приеме [данных см](./concepts-ingestion-overview.md) . в статье о службе "аналитика временных рядов Azure" Gen2.
- Ознакомьтесь с статьей о [хранении данных](./concepts-storage.md) в службе "аналитика временных рядов Azure" Gen2.
- Сведения о [моделировании данных](./concepts-model-overview.md) в Azure Time Series Insights Gen2.
