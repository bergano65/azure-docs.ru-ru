---
title: Добавление источника событий концентраторов событий в службу "аналитика временных рядов Azure" | Документация Майкрософт
description: Узнайте, как добавить источник событий концентраторов событий Azure в среду службы "аналитика временных рядов Azure".
ms.service: time-series-insights
services: time-series-insights
author: deepakpalled
ms.author: dpalled
manager: diviso
ms.reviewer: v-mamcge, jasonh, kfile
ms.workload: big-data
ms.topic: conceptual
ms.date: 09/30/2020
ms.custom: seodec18
ms.openlocfilehash: c7f811991cdc325a3901a696216af21883f02fdb
ms.sourcegitcommit: ffa7a269177ea3c9dcefd1dea18ccb6a87c03b70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/30/2020
ms.locfileid: "91596249"
---
# <a name="add-an-event-hub-event-source-to-your-azure-time-series-insights-environment"></a>Добавление источника событий концентратора событий в среду службы "аналитика временных рядов Azure"

В этой статье описывается, как добавить источник событий, считывающий данные из Центров событий Azure, в среду "Аналитика временных рядов" с помощью портала Azure.

> [!NOTE]
> Действия, описанные в этой статье, относятся к средам Azure Time Series Insights Gen 1 и Azure Time Series Insights 2.

## <a name="prerequisites"></a>Предварительные требования

- Создайте среду службы "аналитика временных рядов Azure", как описано в статье [Создание среды службы "аналитика временных рядов Azure](./time-series-insights-update-create-environment.md)".
- Создайте концентратор событий. Прочитайте [раздел Создание пространства имен концентраторов событий и концентратора событий с помощью портал Azure](../event-hubs/event-hubs-create.md).
- В концентратор событий должны отправляться активные события сообщений. Узнайте, как [Отправить события в концентраторы событий Azure с помощью .NET Framework](../event-hubs/event-hubs-dotnet-framework-getstarted-send.md).
- Создайте выделенную группу потребителей в концентраторе событий, который может использоваться средой "аналитика временных рядов Azure". Каждый источник событий "аналитика временных рядов Azure" должен иметь собственную выделенную группу потребителей, которая не является общей для других потребителей. Если несколько модулей чтения используют события из одной группы потребителей, все читатели, скорее всего, будут работать с ошибками. У каждого концентратора событий должно быть не более 20 групп объектов-получателей. Дополнительные сведения см. в статье [по программированию концентраторов событий](../event-hubs/event-hubs-programming-guide.md).

### <a name="add-a-consumer-group-to-your-event-hub"></a>Добавление группы объектов-получателей в концентратор событий

Группы объектов-получателей используются приложениями для извлечения данных из Центров событий Azure. Чтобы обеспечить надежное чтение данных из концентратора событий, предоставьте выделенную группу потребителей, которая используется только в этой среде службы "аналитика временных рядов Azure".

Чтобы добавить новую группу объектов-получателей в концентратор событий, выполните следующие действия.

1. В [портал Azure](https://portal.azure.com)перейдите к экземпляру концентратора событий из панели **Обзор** пространства имен концентратора событий и откройте его. Выберите **сущности > концентраторы событий** или найдите свой экземпляр в поле **имя**.

    [![Открытие пространства имен концентратора событий](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-connect-event-hub-namespace.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-connect-event-hub-namespace.png#lightbox)

1. В экземпляре концентратора событий выберите **сущности > группы потребителей**. Затем выберите **+ Группа потребителей** , чтобы добавить новую группу потребителей.

   [![Концентратор событий — Добавление группы потребителей](media/time-series-insights-how-to-add-an-event-source-eventhub/add-event-hub-consumer-group.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/add-event-hub-consumer-group.png#lightbox)

   В противном случае выберите существующую группу потребителей и перейдите к следующему разделу.

1. На странице **Группы потребителей** введите новое уникальное значение для параметра **Имя**.  Используйте это же имя при создании нового источника событий в среде службы "аналитика временных рядов Azure".

1. Выберите **Создать**.

## <a name="add-a-new-event-source"></a>Добавление нового источника событий

1. Войдите на [портал Azure](https://portal.azure.com).

1. Нахождение существующей среды службы "аналитика временных рядов Azure". В меню слева выберите **все ресурсы**, а затем выберите среду службы "аналитика временных рядов Azure".

1. Выберите **источники событий**, а затем нажмите кнопку **Добавить**.

   [![Нажмите кнопку "Добавить" в разделе "Источники событий"](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-add-an-event-source.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-add-an-event-source.png#lightbox)

1. Введите значение для **имени источника события** , которое является уникальным для этой среды службы "аналитика временных рядов Azure", например `Contoso-TSI-Gen 1-Event-Hub-ES` .

1. Для параметра **Источник** выберите значение **Концентратор событий**.

1. Выберите подходящие значения для параметра **Вариант импорта**:

   - Выберите **Использовать концентратор событий из доступных подписок**, если в одной из подписок уже есть концентратор событий. Этот вариант — самый простой подход.

     [![Выбор параметра импорта источника события](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-event-hub-select-import-option.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-event-hub-select-import-option.png#lightbox)

   - Если выбран параметр **Использовать концентратор событий из доступных подписок**, см. описание каждого из обязательных свойств в следующей таблице:

       [![Сведения о подписке и концентраторе событий](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-configure-create-confirm.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-configure-create-confirm.png#lightbox)

       | Свойство | Описание |
       | --- | --- |
       | Подписка | Подписка, к которой принадлежит требуемый экземпляр концентратора событий и пространство имен. |
       | пространство имен концентратора событий; | Пространство имен концентратора событий, которому принадлежит требуемый экземпляр концентратора событий. |
       | имя концентратора событий; | Имя нужного экземпляра концентратора событий. |
       | Значение политики концентратора событий | Выберите нужную политику общего доступа. Политику общего доступа можно создать на вкладке **Настройка** концентратора событий. Каждая политика общего доступа имеет имя, разрешения, заданные пользователем, и ключи доступа. Политика общего доступа для источника событий *должна* иметь разрешения на **чтение**. |
       | Ключ политики концентратора событий | Предварительно заполнено из выбранного значения политики концентратора событий. |

   - Выберите **Ввести параметры концентратора событий вручную**, если концентратор событий находится за пределами подписок или требуется выбрать дополнительные параметры.

       В следующей таблице описаны обязательные свойства для параметра **Ввести параметры концентратора событий вручную**:

       | Свойство | Описание |
       | --- | --- |
       | Идентификатор подписки | Подписка, к которой принадлежит требуемый экземпляр концентратора событий и пространство имен. |
       | Группа ресурсов | Группа ресурсов, к которой принадлежит нужный экземпляр концентратора событий и пространство имен. |
       | пространство имен концентратора событий; | Пространство имен концентратора событий, которому принадлежит требуемый экземпляр концентратора событий. |
       | имя концентратора событий; | Имя нужного экземпляра концентратора событий. |
       | Значение политики концентратора событий | Выберите нужную политику общего доступа. Политику общего доступа можно создать на вкладке **Настройка** концентратора событий. Каждая политика общего доступа имеет имя, разрешения, заданные пользователем, и ключи доступа. Политика общего доступа для источника событий *должна* иметь разрешения на **чтение**. |
       | Ключ политики концентратора событий | Ключ общего доступа, используемый для аутентификации доступа к пространству имен Служебной шины. Введите первичный или вторичный ключ здесь. |

   - Оба параметра имеют следующие параметры конфигурации:

       | Свойство | Описание |
       | --- | --- |
       | Группа потребителей концентратора событий | Группа объектов-получателей, которая считывает события из концентратора событий. Мы настоятельно рекомендуем использовать выделенную группу объектов-получателей для источника событий. |
       | Формат сериализации событий | В настоящее время JSON — это единственный доступный формат сериализации. Сообщения о событиях должны быть в этом формате, или данные не могут быть прочитаны. |
       | Имя свойства для метки времени | Чтобы определить это значение, необходимо понимать формат данных сообщения, отправляемого в концентратор событий. Это значение представляет собой **имя** определенного свойства события в данных сообщения, которое нужно использовать в качестве метки времени для события. Для этого значения учитывается регистр. Если оставить значение пустым, в качестве метки времени события будет использоваться **время постановки события в очередь** в пределах источника событий. |

1. Добавьте выделенное имя группы потребителей "аналитика временных рядов Azure", добавленное в концентратор событий.

1. Выберите **Создать**.

   После создания источника событий служба "аналитика временных рядов Azure" автоматически начинает потоковую передачу данных в вашу среду.

## <a name="next-steps"></a>Дальнейшие действия

- [Определите политики доступа к данным](time-series-insights-data-access.md), чтобы защитить ваши данные.

- [Отправка событий](time-series-insights-send-events.md) в источник событий.

- Доступ к своей среде в [обозревателе службы "аналитика временных рядов Azure](https://insights.timeseries.azure.com)".
