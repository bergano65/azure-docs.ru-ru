---
title: Мониторинг временных рядов | Документация Майкрософт
description: Отслеживайте временные ряды данных о доступности, производительности и работе.
author: deepakpalled
ms.author: lyhughes
manager: diviso
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 12/10/2020
ms.custom: lyrana
ms.openlocfilehash: 940f7efc7130ef80817be3b42e3c0eff83588a90
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100587988"
---
# <a name="monitoring-time-series-insights"></a>Мониторинг анализа временных рядов

При наличии критически важных приложений и бизнес-процессов, использующих ресурсы Azure, необходимо отслеживать эти ресурсы на предмет их доступности, производительности и работы. В этой статье описываются данные мониторинга, созданные с помощью службы "аналитика временных рядов", а также способы использования функций Azure Monitor для анализа и оповещения об этих данных.

## <a name="monitor-overview"></a>Общие сведения о мониторинге

На странице **Обзор** в портал Azure для каждой среды "аналитика временных рядов" содержится краткое представление об использовании ресурсов, например число полученных сообщений и число хранимых байтов. Эта информация полезна, но на этой панели доступен только небольшой объем данных мониторинга. Некоторые из этих данных собираются автоматически и доступны для анализа сразу после создания ресурса. Вы можете включить дополнительные типы сбора данных с помощью определенной конфигурации.

## <a name="what-is-azure-monitor"></a>Что такое Azure Monitor

Служба "аналитика временных рядов" создает данные мониторинга с помощью [Azure Monitor](../azure-monitor/overview.md), которая представляет собой полную службу мониторинга стека в Azure, которая предоставляет полный набор функций для мониторинга ресурсов Azure в дополнение к ресурсам в других облаках и локальных средах.

Начните со статьи [Мониторинг ресурсов Azure с помощью Azure Monitor](../azure-monitor/essentials/monitor-azure-resource.md), в которой описаны следующие понятия:

- Общие сведения об Azure Monitor
- затраты, связанные с мониторингом;
- данные мониторинга, собираемые в Azure;
- настройка сбора данных;
- стандартные средства Azure для анализа данных мониторинга и оповещения.

Следующие разделы посвящены этой статье, в которой описываются конкретные данные, собранные для службы "аналитика временных рядов Azure". В этих разделах также приведены примеры настройки сбора данных и анализа этих данных с помощью средств Azure.

> [!TIP]
> Сведения о затратах, связанных с Azure Monitor, см. в разделе [использование и оценка затрат](../azure-monitor//usage-estimated-costs.md). Сведения о времени, которое требуется для отображения данных в Azure Monitor, см. в разделе [время приема данных журнала](../azure-monitor/logs/data-ingestion-time.md).

## <a name="monitoring-data-from-azure-time-series-insights"></a>Мониторинг данных из службы "аналитика временных рядов Azure"

Служба "аналитика временных рядов Azure" собирает те же данные мониторинга, что и другие ресурсы Azure, описанные в разделе [мониторинг данных из ресурсов Azure](../azure-monitor/essentials/monitor-azure-resource.md#monitoring-data). 

Подробные сведения о журналах и метриках, которые вы можете получать, см. в [справочнике по данным мониторинга службы "аналитика временных рядов Azure](how-to-monitor-tsi-reference.md) ".

## <a name="collection-and-routing"></a>Сбор и маршрутизация

Метрики платформы собираются и сохраняются автоматически, но могут маршрутизироваться в другие расположения с помощью параметра диагностики.

Журналы ресурсов не собираются и не сохраняются, пока вы не создадите параметр диагностики и не направите их в одно или несколько расположений.
Подробный процесс создания параметров диагностики с помощью портала Azure, интерфейса командной строки или PowerShell см. в статье [Создание параметров диагностики для отправки журналов платформы и метрик в разные места назначения](../azure-monitor/essentials/diagnostic-settings.md). Создавая параметр диагностики, нужно указать, какие категории журналов должны собираться.

Вы можете получать журналы из следующих категорий для службы "аналитика временных рядов Azure":

   | Категория | Описание |
   |---|---|
   | Входящий трафик  | Категория входящих данных отслеживает ошибки, происходящие в конвейере входящих данных. Эта категория включает ошибки, возникающие при получении событий (например, ошибок для подключения к источнику событий) и обработке событий (например, ошибок при анализе полезных данных события). |

## <a name="analyzing-metrics"></a>Анализ метрик

Вы можете анализировать метрики для службы "аналитика временных рядов Azure" вместе с метриками из других служб Azure, открыв метрики из меню Azure Monitor. Подробные сведения об использовании этого средства см. в статье [Начало работы с обозревателем метрик Azure](../azure-monitor/platform/metrics-getting-started.md).

Список собранных метрик платформы см. в разделе [мониторинг справочника по данным Azure Time Series Insights](how-to-monitor-tsi-reference.md#metrics) .

В этом примере показано число байтов, полученных от всех источников событий в среде службы "аналитика временных рядов Azure".

**Получено байтов** входящего трафика [ ![ временных рядов Azure получено байт](media/how-to-monitor-tsi/ingress-received-bytes.png)](media/how-to-monitor-tsi/ingress-received-bytes.png#lightbox)

В этом примере показано число успешно обработанных байтов, доступных для запроса в среде службы "аналитика временных рядов Azure".

Входящие **хранимые байты** [ ![ временные ряды Azure исходящие байты](media/how-to-monitor-tsi/ingress-stored-bytes.png)](media/how-to-monitor-tsi/ingress-stored-bytes.png#lightbox)

## <a name="analyzing-logs"></a>анализ журналов;
Доступ к журналам ресурсов можно получить с помощью большого двоичного объекта в учетной записи хранения, данных событий или запросов Log Analytic.

Данные в журналах Azure Monitor хранятся в таблицах, каждая из которых имеет собственный набор уникальных свойств.

Все журналы ресурсов в Azure Monitor имеют те же поля, за которыми следуют поля, связанные со службой. Общая схема описана в [Azure Monitor схеме журнала ресурсов](../azure-monitor/essentials/resource-logs-schema.md#top-level-common-schema). Список типов журналов ресурсов, собранных для службы "аналитика временных рядов Azure", см. в статье [Справочник по данным мониторинга службы "аналитика временных рядов Azure](how-to-monitor-tsi-reference.md#resource-logs)".

Служба "аналитика временных рядов Azure" хранит данные в следующих таблицах.

| Таблица | Описание |
|:---|:---|
| TSIIngress | Таблица, в которой хранятся данные из категории входящих данных. Категория входящих данных отслеживает ошибки, происходящие в конвейере входящих данных. Эта категория включает ошибки, возникающие при получении событий (например, ошибок для подключения к источнику событий) и обработке событий (например, ошибок при анализе полезных данных события).

Чтобы направить данные в журналы Azure Monitor, необходимо создать параметр диагностики для отправки журналов ресурсов или метрик платформы в Log Analytics рабочую область. Дополнительные сведения см. в разделе [сбор и маршрутизация](../iot-hub/monitor-iot-hub.md#collection-and-routing).

## <a name="sample-queries"></a>Примеры запросов

Ниже приведены запросы, которые можно использовать для мониторинга среды службы "аналитика временных рядов Azure".

+ Получение сведений о сбоях подключения к источнику событий за последние пять дней:

    ```Kusto
   TSIIngress
   | where OperationName == "Microsoft.TimeSeriesInsights/environments/eventsources/ingress/connect"
   | where _ResourceId contains "<your environment name, event source name, or the full event source resource URL>"
   | where TimeGenerated > ago(5d)

    ```
+ Получение сведений о недопустимых сообщениях, полученных за последние пять дней:

    ```Kusto
   TSIIngress
   | where OperationName == "Microsoft.TimeSeriesInsights/environments/eventsources/ingress/deserialize"
   | where _ResourceId contains "<your environment name, event source name, or the full event source resource URL>"
   | where TimeGenerated > ago(5d)

    ```

## <a name="alerts"></a>видны узлы

Оповещения Azure Monitor заблаговременно уведомляют вас при обнаружении важных условий в данных мониторинга. Они позволяют выявлять и устранять проблемы в системе до того, как ваши клиенты заметят их. Оповещения можно настроить для [метрик](../azure-monitor/platform/alerts-metric-overview.md), [журналов](../azure-monitor/platform/alerts-unified-log.md) и [журнала действий](../azure-monitor/platform/activity-log-alerts.md). Различные типы оповещений имеют преимущества и недостатки.

При создании правила генерации оповещений на основе метрик платформы имейте в виду, что для метрик платформы "аналитика временных рядов", собранных в единицах счетчика, некоторые агрегаты могут быть недоступны или использоваться.

## <a name="next-steps"></a>Next Steps

* Справочник по журналам и метрикам, созданным службой "аналитика временных рядов Azure", см. в [справочнике по данным мониторинга "аналитика временных рядов Azure](how-to-monitor-tsi-reference.md) ".
* Подробные сведения о мониторинге ресурсов Azure см. в статье [Мониторинг ресурсов Azure с помощью Azure Monitor](../azure-monitor/essentials/monitor-azure-resource.md).