---
title: Руководство по Создание среды Azure Time Series Insights | Документация Майкрософт
description: Узнайте, как создать среду Аналитики временных рядов и заполнить ее данными из имитированных устройств.
services: time-series-insights
author: ashannon7
ms.service: time-series-insights
ms.topic: tutorial
ms.date: 10/16/2019
ms.author: dpalled
manager: cshankar
ms.custom: seodec18
ms.openlocfilehash: 518847db727c9d8c527d272f9122ef9850ca9135
ms.sourcegitcommit: ae461c90cada1231f496bf442ee0c4dcdb6396bc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "72552997"
---
# <a name="tutorial-create-an-azure-time-series-insights-environment"></a>Руководство по Создание среды службы "Аналитика временных рядов Azure"

Это руководство поможет создать среду Аналитики временных рядов Azure, заполненную данными из имитированных устройств. Из этого руководства вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создайте среду "Аналитика временных рядов".
> * Создание решения для имитации устройств, содержащего Центр Интернета вещей.
> * Подключение среды Аналитики временных рядов к центру Интернета вещей.
> * Запуск имитации устройств для потоковой передачи данных в среду Аналитики временных рядов.
> * Проверка имитированных данных телеметрии.

> [!IMPORTANT]
> Зарегистрируйтесь для [бесплатной подписки Azure](https://azure.microsoft.com/free/), если у вас ее еще нет.

## <a name="prerequisites"></a>Предварительные требования

* Ваша учетная запись Azure должна быть участником роли **Владелец** для подписки. Дополнительные сведения см. в статье [Управление доступом к ресурсам Azure с помощью RBAC и портала Azure](../role-based-access-control/role-assignments-portal.md).

## <a name="review-video"></a>Просмотр видео

### <a name="learn-how-to-use-an-azure-iot-solution-accelerator-to-generate-data-and-get-started-with-time-series-insights-br"></a>Узнайте, как с помощью акселератора решений Интернета вещей Azure создать данные и приступить к работе с Аналитикой временных рядов. </br>

> [!VIDEO https://www.youtube.com/embed/6ehNf6AJkFo]

## <a name="overview"></a>Обзор

Среда Аналитики временных рядов собирает и хранит данные устройств. После сохранения к данным можно применять запросы и анализ с помощью [обозревателя Аналитики временных рядов Azure](time-series-quickstart.md) и [API запросов Аналитики временных рядов](/rest/api/time-series-insights/ga-query-api).

Центр Интернета вещей Azure представляет собой источник события, к которому все устройства (имитированные или физические) в этом учебнике подключаются для защищенной передачи данных в облако Azure.

В этом учебнике также применяется [акселератор решений Интернета вещей](https://www.azureiotsolutions.com) для создания и потоковой передачи тестовых данных телеметрии в Центр Интернета вещей.

>[!TIP]
> [Акселераторы решений Интернета вещей](https://www.azureiotsolutions.com) предоставляют готовые настроенные решения корпоративного уровня, позволяя ускорить разработку настраиваемых решений Интернета вещей.

## <a name="create-a-device-simulation"></a>Создание имитации устройств

Сначала вам нужно создать решение для имитации устройств, которое будет создавать тестовые данные для заполнения среды Аналитики временных рядов.

1. В отдельном окне или вкладке перейдите по адресу [azureiotsolutions.com](https://www.azureiotsolutions.com). Выполните вход с той же учетной записью подписки Azure и выберите акселератор решения **Имитация устройств**. Щелкните **Попробовать сейчас**.

   [![Запуск акселератора "Имитация устройств"](media/tutorial-create-populate-tsi-environment/sa-main.png)](media/tutorial-create-populate-tsi-environment/sa-main.png#lightbox)

1. Введите необходимые параметры на странице **Create Device Simulation solution** (Создание решения для имитации устройств).

   Параметр|ОПИСАНИЕ
   ---|---
   **Имя развертывания** | Это уникальное значение используется для создания группы ресурсов. В эту группу помещаются все выбранные ресурсы Azure после их создания.
   **Подписка Azure.** | Укажите ту же подписку, которую вы использовали в предыдущем разделе для создания среды Аналитики временных рядов.
   **Варианты развертывания** | Выберите **Provision new IoT Hub** (Подготовить к работе новый Центр Интернета вещей), чтобы создать Центр Интернета вещей для этого учебника.
   **Расположение Azure** | Укажите тот же регион, который вы использовали в предыдущем разделе для создания среды Аналитики временных рядов.

   По завершении выберите параметр **Создать**, чтобы подготовить ресурсы решения Azure. Этот процесс может занять около 20 минут.

   [![Подготовка решения для имитации устройств](media/tutorial-create-populate-tsi-environment/sa-create-device-sim-solution.png)](media/tutorial-create-populate-tsi-environment/sa-create-device-sim-solution.png#lightbox)

1. Когда подготовка завершится, текст над новым решением **Подготовка** изменится на **Готово**.

   >[!IMPORTANT]
   > Еще не время щелкать **Запуск**! Оставьте эту веб-страницу открытой, так как она вам понадобится позже.

   [![Подготовка решения для имитации устройств завершена](media/tutorial-create-populate-tsi-environment/sa-create-device-sim-solution-dashboard-ready.png)](media/tutorial-create-populate-tsi-environment/sa-create-device-sim-solution-dashboard-ready.png#lightbox)

1. Теперь можно проверить созданные ресурсы на портале Azure. На странице **Группы ресурсов** вы увидите новую группу ресурсов с именем, которое совпадает с указанным выше **именем решения**. Запишите ресурсы, созданные для имитации устройства.

   [![Ресурсы для имитации устройств](media/tutorial-create-populate-tsi-environment/ap-device-sim-solution-resources.png)](media/tutorial-create-populate-tsi-environment/ap-device-sim-solution-resources.png#lightbox)

## <a name="create-an-environment"></a>Создание среды

Затем создайте среду Аналитики временных рядов в подписке Azure, сделав следующее.

1. Войдите на [портал Azure](https://portal.azure.com), используя учетную запись подписки Azure. 
1. Щелкните **+Создать ресурс** слева вверху. 
1. Выберите категорию **Интернет вещей**, а затем щелкните **Аналитика временных рядов**. 

   [![Выбор ресурса среды Time Series Insights](media/tutorial-create-populate-tsi-environment/ap-create-resource-tsi.png)](media/tutorial-create-populate-tsi-environment/ap-create-resource-tsi.png#lightbox)

1. На странице **Окружение аналитики временных рядов** введите значения для обязательных параметров.

   Параметр|ОПИСАНИЕ
   ---|---
   **Имя среды** | Выберите уникальное имя для среды Аналитики временных рядов. Это имя используется в обозревателе Аналитики временных рядов и [интерфейсах API запросов](https://docs.microsoft.com/rest/api/time-series-insights/ga-query).
   **подписка** | Подписки служат контейнерами для ресурсов Azure. Выберите подписку для создания среды Аналитики временных рядов.
   **группа ресурсов** | Группа ресурсов Azure служит контейнером для ресурсов Azure. Выберите имеющуюся группу ресурсов для ресурсов среды Аналитики временных рядов или создайте новую.
   **Местоположение.** | Выберите регион для центра обработки данных для среды Аналитики временных рядов. Чтобы избежать дополнительной задержки, создайте среду Аналитики временных рядов в одном регионе с остальными ресурсами Интернета вещей.
   **Уровень** | Выберите необходимую пропускную способность. Выберите **S1**.
   **Производительность** | Производительность обозначает коэффициент, на который умножаются характеристики скорости для поступления данных и емкости хранилища выбранной категории SKU. Вы можете изменить емкость после создания. Выберите значение производительности **1**.

   Когда завершите, выберите **Далее: источник события**, чтобы перейти к следующему шагу.

   [![Создание ресурса среды Аналитики временных рядов](media/tutorial-create-populate-tsi-environment/ap-create-resource-tsi-params.png)](media/tutorial-create-populate-tsi-environment/ap-create-resource-tsi-params.png#lightbox)

1. Теперь подключите среду Аналитики временных рядов к Центру Интернета вещей, созданному акселератором решений. Задайте значение `Select existing` для параметра **Выберите концентратор**. Затем выберите Центр Интернета вещей, созданный акселератором решений, при настройке параметра **Имя Центра Интернета вещей**.

   [![Подключение среды Аналитики временных рядов к созданному Центру Интернета вещей](media/tutorial-create-populate-tsi-environment/ap-create-resource-iot-hub.png)](media/tutorial-create-populate-tsi-environment/ap-create-resource-iot-hub.png#lightbox)

   Наконец, выберите **Просмотр + создание**.

1. Используйте панель **Уведомления**, чтобы отслеживать выполнение развертывания. 

   [![Успешное развертывание среды Аналитики временных рядов](media/tutorial-create-populate-tsi-environment/ap-create-resource-tsi-deployment-succeeded.png)](media/tutorial-create-populate-tsi-environment/ap-create-resource-tsi-deployment-succeeded.png#lightbox)

## <a name="run-device-simulation"></a>Запуск имитации устройства

Теперь, когда развертывание и начальная настройка завершены, заполните среду Аналитики временных рядов примерами данных из [имитированных устройств, созданных акселератором](#create-a-device-simulation).

Помимо Центра Интернета вещей создано веб-приложение Службы приложений Azure для формирования и передачи данных телеметрии от имитированных устройств.

1. Вернитесь на [панель мониторинга акселератора решений](https://www.azureiotsolutions.com/Accelerators#dashboard). При необходимости войдите в систему с той же учетной записью Azure, которую вы использовали ранее в этом руководстве. Выберите свое "решение устройства", а затем **перейдите к акселератору решений**, чтобы запустить развернутое решение.

     [![Панель мониторинга акселераторов решений](media/tutorial-create-populate-tsi-environment/sa-create-device-sim-solution-dashboard.png)](media/tutorial-create-populate-tsi-environment/sa-create-device-sim-solution-dashboard.png#lightbox)

1. Веб-приложение имитации устройства начинается с отправления запроса на предоставление веб-приложению разрешения на вход и чтение своего профиля. Это разрешение позволяет приложению получать сведения о профиле пользователя, требуемые для работы приложения.

     [![Согласие для веб-приложения имитации устройств](media/tutorial-create-populate-tsi-environment/sawa-signin-consent.png)](media/tutorial-create-populate-tsi-environment/sawa-signin-consent.png#lightbox)

1. Когда загрузится страница **Simulation setup** (Настройка имитации), введите обязательные параметры.

   Параметр|ОПИСАНИЕ
   ---|---
   **Целевой Центр Интернета вещей** | Выберите **Use pre-provisioned IoT Hub** (Использовать предварительно подготовленный Центр Интернета вещей).
   **Модель устройства** | Выберите **Chiller**.
   **Количество устройств**  | Введите значение `1000` в поле **Количество**.
   **Частота получения телеметрии** | Введите `10` секунд.
   **Длительность имитации** | Выберите **End in:** (Завершается через) и введите `5` минут.

   По завершении выберите **Start Simulation** (Запустить имитацию). Имитация выполняется в течение 5 минут. Каждые 10 секунд создаются данные из 1000 имитированных устройств. 

   [![Настройка имитация устройств](media/tutorial-create-populate-tsi-environment/sawa-simulation-setup.png)](media/tutorial-create-populate-tsi-environment/sawa-simulation-setup.png#lightbox)

1. В процессе имитации вы увидите, что значения в полях **Total messages** (Общее количество сообщений) и **Messages per second** (Сообщений в секунду) изменяются примерно каждые 10 секунд. Процесс имитации завершится через 5 минут, и вы вернетесь на страницу **Simulation setup** (Настройка имитации).

   [![Выполнение имитации устройств](media/tutorial-create-populate-tsi-environment/sawa-simulation-running.png)](media/tutorial-create-populate-tsi-environment/sawa-simulation-running.png#lightbox)

## <a name="verify-the-telemetry-data"></a>Проверка данных телеметрии

Это последний раздел, в котором вы убедитесь, что данные телеметрии успешно созданы и сохранены в среде Аналитики временных рядов. Чтобы проверить данные, используйте обозреватель службы "Аналитика временных рядов", который позволяет создавать запросы и аналитические отчеты по данным телеметрии.

1. Вернитесь на страницу **Обзор** группы ресурсов среды Аналитики временных рядов. Выберите среду Time Series Insights.

   [![Среда Аналитики временных рядов и группа ресурсов для этой среды](media/tutorial-create-populate-tsi-environment/ap-view-tsi-env-rg.png)](media/tutorial-create-populate-tsi-environment/ap-view-tsi-env-rg.png#lightbox)

1. На странице **Обзор** для среды Аналитики временных рядов щелкните **URL-адрес обозревателя Аналитики временных рядов**, чтобы открыть обозреватель Аналитики временных рядов.

   [![Обозреватель Аналитики временных рядов](media/tutorial-create-populate-tsi-environment/ap-view-tsi-env-explorer-url.png)](media/tutorial-create-populate-tsi-environment/ap-view-tsi-env-explorer-url.png#lightbox)

1. Обозреватель Аналитики временных рядов загрузится и выполнит аутентификацию с использованием вашей учетной записи для портала Azure. На начальной странице есть область диаграмм, в которой вы увидите наличие имитированных данных телеметрии в среде Аналитики временных рядов. Чтобы отфильтровать данные по сокращенному периоду времени, выберите раскрывающийся список в левом верхнем углу. Затем укажите диапазон времени, достаточный, чтобы охватить время выполнения имитации устройств. Затем выберите значок увеличительного стекла для поиска.

   [![Фильтр по диапазону времени в обозревателе Аналитики временных рядов](media/tutorial-create-populate-tsi-environment/tsie-filter-time-range.png)](media/tutorial-create-populate-tsi-environment/tsie-filter-time-range.png#lightbox)

1. Вы можете сократить диапазон времени, чтобы подробнее рассмотреть на диаграмме отдельные пакеты передачи данных в центр Интернета вещей и в среду Аналитики временных рядов. Также обратите внимание на текст **Streaming complete** (Потоковая передача завершена) в правом верхнем углу, где отображается общее количество обнаруженных событий. Также вы можете перетащить ползунок **Interval size** (Размер интервала), чтобы изменять степень детализации на этой диаграмме.

   [![Отображение с фильтрацией по диапазону времени в обозревателе Аналитики временных рядов](media/tutorial-create-populate-tsi-environment/tsie-view-time-range.png)](media/tutorial-create-populate-tsi-environment/tsie-view-time-range.png#lightbox)

1. Наконец, можно щелкнуть регион левой кнопкой мыши, чтобы отфильтровать диапазон. Затем щелкните его правой кнопкой мыши и выберите действие **Просмотр событий**, чтобы открыть табличное представление **События** с информацией о событиях в этом регионе.

   [![Отображение с фильтрацией по диапазону времени и списком событий в обозревателе Аналитики временных рядов](media/tutorial-create-populate-tsi-environment/tsie-view-time-range-events.png)](media/tutorial-create-populate-tsi-environment/tsie-view-time-range-events.png#lightbox)

## <a name="clean-up-resources"></a>Очистка ресурсов

В этом руководстве описано, как создать несколько действующих служб Azure для поддержки среды Аналитики временных рядов и решения для имитации устройств. Чтобы удалить их, вернитесь на портал Azure.

В меню слева на портале Azure сделайте следующее.

1. Щелкните значок **Группы ресурсов**. Выберите группу ресурсов, которую вы создали для среды Аналитики временных рядов. В верхней части страницы выберите **Удалить группу ресурсов**, введите имя группы ресурсов и щелкните **Удалить**.

1. Щелкните значок **Группы ресурсов**. Выберите группу ресурсов, автоматически созданную акселератором решений для имитации устройств. В верхней части страницы выберите **Удалить группу ресурсов**, введите имя группы ресурсов и щелкните **Удалить**.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

> [!div class="checklist"]
> * Создайте среду "Аналитика временных рядов".
> * Создание решения для имитации устройств, содержащего Центр Интернета вещей.
> * Подключение среды Аналитики временных рядов к центру Интернета вещей.
> * Запуск имитации устройств для потоковой передачи данных в среду Аналитики временных рядов.
> * Проверка имитированных данных телеметрии.

Теперь, когда вы знаете, как создать среду Аналитики временных рядов, перейдите к сведениям о создании веб-приложения, которое использует данные из среды Аналитики временных рядов:

> [!div class="nextstepaction"]
> [См. примеры визуализаций для размещенных клиентских пакетов SDK](https://tsiclientsample.azurewebsites.net/)
