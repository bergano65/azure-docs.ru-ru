---
title: Диагностирование и устранение неполадок с помощью службы "Аналитика временных рядов Azure" (предварительная версия) | Документация Майкрософт
description: Сведения о диагностировании и устранении неполадок с помощью службы "Аналитика временных рядов Azure" (предварительная версия).
author: ashannon7
ms.author: anshan
ms.workload: big-data
manager: cshankar
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 12/06/2018
ms.custom: seodec18
ms.openlocfilehash: eb1c302bf1954492ba2a7a78d16fc697fdf4b687
ms.sourcegitcommit: 2d0fb4f3fc8086d61e2d8e506d5c2b930ba525a7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2019
ms.locfileid: "58080443"
---
# <a name="diagnose-and-troubleshoot"></a>Диагностирование и устранение неполадок

В этой статье описаны распространенные проблемы, с которыми вы можете столкнуться при работе со средой службы "Аналитика временных рядов Azure" (предварительная версия). Здесь также описаны потенциальные причины и решения каждой проблемы.

## <a name="problem-i-cant-find-my-environment-in-the-time-series-insights-preview-explorer"></a>Проблема. Я не могу получить доступ к своей среде в обозревателе службы "Аналитика временных рядов" (предварительная версия)

Эта проблема может возникнуть, если у вас нет прав доступа к среде службы "Аналитика временных рядов". Для просмотра такой среды пользователям необходима роль доступа на уровне читателя. Чтобы проверить текущие уровни доступа и предоставить дополнительные разрешения на доступ, перейдите в раздел "Политики доступа к данным" ресурса "Аналитика временных рядов" на [портале Azure](https://portal.azure.com/).

  ![Среда][1]

## <a name="problem-no-data-is-seen-in-the-time-series-insights-preview-explorer"></a>Проблема. В обозревателе службы "Аналитика временных рядов" (предварительная версия) не отображаются данные

Существует несколько причин, по которым данные могут не отображаться в [обозревателе службы "Аналитика временных рядов Azure" (предварительная версия)](https://insights.timeseries.azure.com/preview).

- Ваш источник события может не получать данные.

    Убедитесь, что источник события, представляющий собой концентратор событий или центр Интернета вещей, получает данные из ваших тегов или экземпляров. Для этого перейдите к странице обзора вашего ресурса на портале Azure.

    ![Панель мониторинга с аналитическими сведениями][2]

- Источник события не содержит данные в формате JSON.

    Среда службы "Аналитика временных рядов" поддерживает только данные в формате JSON. Примеры JSON см. в разделе [Поддерживаемые формы JSON](./how-to-shape-query-json.md).

- Для вашего ключа источника события отсутствует необходимое разрешение.

  * Для Центра Интернета вещей необходимо указать ключ с разрешением на **подключение службы**.

    ![Параметр Configuration][3]

  * Как показано на предыдущем рисунке, можно использовать политики **iothubowner** и **service**, так как обеим назначено разрешение на **подключение службы**.
  * Для концентратора событий необходимо указать ключ с разрешением на **прослушивание**.
  
    ![Разрешения][4]

  * Как показано на предыдущем рисунке, можно использовать политики **read** и **manage**, так как обеим назначено разрешение на **прослушивание**.

- Указанная группа объектов-получателей не является уникальной для службы "Аналитика временных рядов".

    Во время регистрации центра Интернета вещей или концентратора событий нужно указать группу объектов-получателей, которая используется для чтения данных. Не предоставляйте к ней общий доступ. Иначе базовый концентратор событий автоматически отключит один из модулей чтения в случайном порядке. Укажите уникальную группу получателей, из которой должна считывать данные среда службы "Аналитика временных рядов".

- Ваше свойство идентификатора временного ряда, указанное во время подготовки, неверно, отсутствует или имеет значение NULL.

    Эта проблема может возникнуть, если во время подготовки среды свойство идентификатора временного ряда настроено неправильно. Дополнительные сведения см. в статье [Лучшие методики при выборе идентификатора временного ряда](./time-series-insights-update-how-to-id.md). В настоящее время вы не можете обновить имеющуюся среду службы "Аналитика временных рядов", чтобы использовать другой идентификатор временного ряда.

## <a name="problem-some-data-shows-but-some-is-missing"></a>Проблема. Отображаются не все данные

Возможно, вы отправляете данные без идентификатора временного ряда.

- Эта проблема может возникнуть при отправке событий без поля идентификатора временного ряда в полезных данных. Дополнительные сведения см. в статье [Формирование JSON для достижения максимальной производительности запросов](./how-to-shape-query-json.md).

- Эта проблема может возникнуть из-за регулирования вашей среды.

    > [!NOTE]
    > В настоящее время служба "Аналитика временных рядов" поддерживает максимальную скорость приема данных 6 Мбит/с.

## <a name="problem-my-event-sources-timestamp-property-name-setting-doesnt-work"></a>Проблема. Параметр имени свойства метки времени источника события не работает

Убедитесь, что имя и значение соответствуют следующим правилам:

* В имени свойства метки времени учитывается регистр.
* Значение свойства метки времени, полученное из источника события в виде строки JSON, имеет формат `yyyy-MM-ddTHH:mm:ss.FFFFFFFK`. Пример такой строки — `“2008-04-12T12:53Z”`.

Самый простой способ убедиться, что имя свойства метки времени зафиксировано и работает правильно, — использовать обозреватель службы "Аналитика временных рядов" (предварительная версия). В этом обозревателе с помощью схемы выберите период времени после предоставления имени свойства метки времени. Щелкните выделение правой кнопкой мыши и выберите параметр **обзора событий**. Заголовок первого столбца — это имя вашего свойства метки времени. Рядом со словом `Timestamp` должен находиться аргумент `($ts)` вместо приведенных ниже вариантов:

* `(abc)` указывает на то, что служба "Аналитика временных рядов" считывает значения данных в виде строк.
* Значок календаря, который указывает, что служба "Аналитика временных рядов" считывает значение данных в качестве типа datetime.
* `#` указывает, что служба "Аналитика временных рядов" считывает значения данных как целое число.

Если свойство метки времени не указано явным образом, в качестве метки времени по умолчанию используется время постановки в очередь центра Интернета вещей или концентратора событий.

## <a name="problem-i-cant-edit-or-view-my-time-series-model"></a>Проблема. Я не могу изменять или просматривать модель временного ряда

- Возможно, вы пытаетесь получить доступ к среде службы "Аналитика временных рядов" S1 или S2.

   Модели временных рядов поддерживаются только в средах PAYG. Дополнительные сведения о получении доступа к среде S1 или S2 из обозревателя службы "Аналитика временных рядов" (предварительная версия) см. в [этой статье](./time-series-insights-update-explorer.md).

   ![Access][5]

- Возможно, у вас нет прав на просмотр и изменение модели.

   Для изменения и просмотра модели временных рядов пользователям необходим доступ на уровне участника. Чтобы проверить текущие уровни доступа и предоставить дополнительные разрешения на доступ, перейдите в раздел "Политики доступа к данным" ресурса "Аналитика временных рядов" на портале Azure.

## <a name="problem-all-my-instances-in-the-time-series-insights-preview-explorer-dont-have-a-parent"></a>Проблема. Во всех экземплярах в обозревателе службы "Аналитика временных рядов" (предварительная версия) отсутствует родительский объект

Эта проблема может возникнуть, если в вашей среде не определена иерархия модели временных рядов. Дополнительные сведения см. в статье о [работе с моделями временных рядов](./time-series-insights-update-how-to-tsm.md).

  ![Модели временных рядов][6]

## <a name="next-steps"></a>Дальнейшие действия

- [Data modeling in Azure Time Series Insights Preview](./time-series-insights-update-how-to-tsm.md) (Моделирование данных в службе "Аналитика временных рядов Azure" (предварительная версия))
- [Формирование JSON для достижения максимальной производительности запросов](./how-to-shape-query-json.md)

<!-- Images -->
[1]: media/v2-update-diagnose-and-troubleshoot/environment.png
[2]: media/v2-update-diagnose-and-troubleshoot/dashboard-insights.png
[3]: media/v2-update-diagnose-and-troubleshoot/configuration.png
[4]: media/v2-update-diagnose-and-troubleshoot/permissions.png
[5]: media/v2-update-diagnose-and-troubleshoot/access.png
[6]: media/v2-update-diagnose-and-troubleshoot/tsm.png