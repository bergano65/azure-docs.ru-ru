---
title: Основные сведения об объектных моделях и пространственном интеллектуальном графе в Digital Twins | Документация Майкрософт
description: Моделирование связей между пользователями, расположениями и устройствами с помощью Azure Digital Twins
author: alinamstanciu
manager: bertvanhoof
ms.service: digital-twins
services: digital-twins
ms.topic: conceptual
ms.date: 11/13/2018
ms.author: alinast
ms.openlocfilehash: 95f01c9338afbf2ab5381001e4ab480185cedaeb
ms.sourcegitcommit: 542964c196a08b83dd18efe2e0cbfb21a34558aa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2018
ms.locfileid: "51636889"
---
# <a name="understand-digital-twins-object-models-and-spatial-intelligence-graph"></a>Основные сведения об объектных моделях и пространственном интеллектуальном графе в Digital Twins

Azure Digital Twins — это служба Интернета вещей Azure, которая обладает полными виртуальными представлениями физических сред и связанных устройств, датчиков и пользователей. Она улучшает разработку, объединяя предметно-ориентированные концепции в полезные модели. Эти модели размещаются в пространственном интеллектуальном графе. Такие понятия эффективно моделируют взаимосвязи и взаимодействия между людьми, пространствами и устройствами.

Объектные модели Digital Twins описывают понятия, категории и свойства по предметной области. Модели создают пользователи, которые хотят адаптировать решение к своим конкретным потребностям. Вместе эти предварительно определенные объектные модели Digital Twins составляют _онтологию_. В онтологии умного здания описаны регионы, площадки, этажи, офисы, зоны, конференц-залы и фокус-комнаты. В онтологии энергетической сети описаны разные электростанции, подстанции, энергетические ресурсы и потребители. Объектные модели и онтологии Digital Twins позволяют персонализировать разные сценарии и потребности.

После создания объектных моделей и онтологий Digital Twins можно переходить к заполнению _пространственного графа_. Пространственные графы — это виртуальные представления множества взаимосвязей между пространствами, устройствами и людьми, имеющими отношение к решению Интернета вещей. На приведенной ниже схеме показан пример пространственного графа, который использует онтологию умного здания.

![Создание пространственного графа Digital Twins][1]

<a id="model"></a>

Пространственный граф объединяет пространства, устройства, датчики и пользователей. Связи между ними воспроизводят зависимости из реального мира. В этом примере представлен объект 43 с четырьмя этажами, на каждом из которых есть много разных областей. Пользователи связаны со своими рабочими станциями и имеют доступ к частям графа. Администратор имеет право вносить изменения в пространственный граф, а посетитель может только просматривать определенные сведения о здании.

## <a name="digital-twins-object-models"></a>Объектные модели Digital Twins

Объектные модели Digital Twins поддерживают следующие основные категории объектов:

- **Пространства** являются виртуальными или физическими расположениями, например `Tenant`, `Customer`, `Region` или `Venue`.
- **Устройства** являются виртуальными или физическими единицами оборудования, например `AwesomeCompany Device` или `Raspberry Pi 3`.
- **Датчики** являются объектами, которые позволяют обнаруживать события, например `AwesomeCompany Temperature Sensor` или `AwesomeCompany Presence Sensor`.
- **Пользователи** представляют собой жильцов и их характеристики.

Другие категории объектов:

- **Ресурсы** присоединены к пространству и обычно представляют ресурсы Azure для использования объектами в пространственном графе, например `IoTHub`.
- **Большие двоичные объекты** присоединяются к объектам (к пространствам, устройствам, датчикам и пользователям). Они используются как файлы с определенным типом mime и метаданными, например, `maps`, `pictures` и `manuals`.
- **Расширенные типы** являются расширяемыми перечислениями, которые дополняют сущности определенными характеристиками, например `SpaceType` или `SpaceSubtype`.
- **Онтологии** представляют наборы расширенных типов, например `Default`, `Building`, `BACnet` или `EnergyGrid`.
- **Ключи и значения свойств** являются пользовательскими характеристиками пространств, устройств, датчиков и пользователей. Они могут дополнять встроенные характеристики, например ключ `DeltaProcessingRefreshTime` со значением `10`.
- **Роли** — это наборы разрешений, которые назначаются пользователям и устройствам в пространственном графе, например `Space Administrator`, `User Administrator` или `Device Administrator`.
- **Назначения ролей** обозначают связь между ролью и объектом в пространственном графе. Например, пользователь или субъект-служба могут получить разрешение на управление пространством в пространственном графе.
- **Хранилища ключей безопасности** предоставляют ключи безопасности для всех устройств в иерархии в рамках заданного объекта пространства, чтобы обеспечить безопасное взаимодействие устройства с Digital Twins.
- **Определяемые пользователем функции** позволяют настраивать обработку телеметрии датчика в пространственном графе. Например, с помощью определяемой пользователем функции можно: 
    - задать значение датчика; 
    - выполнить пользовательскую логику для показаний датчика и сохранить результат в пространстве; 
    - присвоить пространству метаданные; 
    - отправлять уведомления, когда выполняются предварительно определенные условия. Сейчас определяемые пользователем функции можно создать на языке JavaScript.
- **Сопоставители** являются объектами, которые определяют, какие определяемые пользователем функции выполняются для заданного сообщения телеметрии.
- **Конечные точки** — это расположения, в которые направляются сообщения телеметрии и события Digital Twins, например `Event Hub`, `Service Bus` или `Event Grid`.

<a id="graph"></a>

## <a name="spatial-intelligence-graph"></a>Пространственный интеллектуальный граф

Пространственный граф — это иерархический граф пространств, устройств и людей, определенных в объектной модели Digital Twins. Пространственный граф поддерживает наследование, фильтрацию, обход, масштабируемость и расширяемость. Вы можете взаимодействовать с пространственным графом и управлять им с помощью коллекции REST API.

Развернув службу Digital Twins в подписке, вы становитесь глобальным администратором корневого узла. Вы автоматически получаете полный доступ ко всей структуре. Пространства в графе предоставляются через API Space. API Device позволяет предоставлять службы, а API Sensor — датчики. Кроме того, для подготовки графа в пакетном режиме доступны [инструменты с открытым кодом](https://github.com/Azure-Samples/digital-twins-samples-csharp).

**Наследование в графе.** Наследование применяется к разрешениям и свойствам, которые распространяются с родительского узла на все дочерние. Например, пользователю на узле назначается определенная роль. Этот пользователь получает соответствующие разрешения как для этого узла, так и для всех его дочерних узлов. Дочерние узлы также наследуют все ключи свойств и расширенные типы, определенные для родительского узла.

**Фильтрация графа.** Фильтрация позволяет сузить результаты запроса. Вы можете фильтровать данные по идентификаторам, именам, типам, подтипам, родительским пространствам и связанным пространствам. Кроме того, можно применить фильтры по типам данных датчиков, ключам и значениям свойств, *traverse*, *minLevel*, *maxLevel*, а также другим параметрам фильтра OData.

**Обход графа.** Вы можете выполнять обход пространственного графа вертикально или горизонтально. Вертикальный обход графа сверху вниз или снизу вверх выполняется с помощью параметров *traverse*, *minLevel* и *maxLevel*. При горизонтальном обходе графа перебираются одноуровневые узлы, прикрепленные к родительскому пространству непосредственно или через его потомков. Запрос объекта позволяет получить все связанные с ним объекты с помощью параметра *includes* API-интерфейсов GET.

**Масштабируемость графа**. Digital Twins гарантирует масштабируемость графа для обработки реальных рабочих нагрузок. Azure Digital Twins можно использовать для представления больших портфелей недвижимости, инфраструктуры, устройств, датчиков, телеметрии и многого другого.

**Расширяемость графа.** Расширяемость графа позволяет настраивать базовые объектные модели Digital Twins, используя новые типы и онтологии. Данные Digital Twins также можно обогатить за счет расширяемых свойств и значений.

### <a name="spatial-intelligence-graph-management-apis"></a>API управления пространственного интеллектуального графа

После развертывания Digital Twins с [портала Azure](https://portal.azure.com) автоматически создается URL-адрес [Swagger](https://swagger.io/tools/swagger-ui/) для API управления. Он отображается в разделе **Обзор** портала Azure в указанном ниже формате.

```plaintext
https://YOUR_INSTANCE_NAME.YOUR_LOCATION.azuresmartspaces.net/management/swagger
```

| ИМЯ | Заменить на |
| --- | --- |
| YOUR_INSTANCE_NAME | Имя экземпляра Digital Twins |
| YOUR_LOCATION | Регион сервера, в котором размещен ваш экземпляр |

 На этом изображении представлен полный формат URL-адреса.

![API управления на портале Digital Twins][2]

Дополнительные сведения об использовании пространственных интеллектуальных графов см. в кратком обзоре интерфейсов API управления Azure Digital Twins.

> [!TIP]
> Для демонстрации набора функций API предоставляется краткий обзор предварительной версии Swagger.
> Он размещен по адресу [docs.westcentralus.azuresmartspaces.net/management/swagger](https://docs.westcentralus.azuresmartspaces.net/management/swagger).

Дополнительные сведения об использовании [Swagger](how-to-use-swagger.md).

Все вызовы API должны пройти аутентификацию с помощью [OAuth](https://docs.microsoft.com/azure/active-directory/develop/v1-protocols-oauth-code). В API-интерфейсах выполняются [рекомендации по REST API от корпорации Майкрософт](https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md). Большинство API-интерфейсов, возвращающих коллекции, поддерживают параметры системного запроса [OData](http://www.odata.org/getting-started/basic-tutorial/#queryData).

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о подключении к устройству и отправке сообщений телеметрии в Digital Twins см. в статье [Возможность подключения устройств и входящие данные телеметрии](concepts-device-ingress.md).

* Дополнительные сведения об ограничениях и регулировании API управления см. в статье [Ограничения в общедоступной предварительной версии службы](concepts-service-limits.md).

<!-- Images -->
[1]: media/concepts/digital-twins-spatial-graph-building.png
[2]: media/concepts/digital-twins-spatial-graph-management-api-url.png
