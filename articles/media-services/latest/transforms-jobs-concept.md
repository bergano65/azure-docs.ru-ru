---
title: Преобразования и задания в службах мультимедиа
titleSuffix: Azure Media Services
description: Узнайте, как создать преобразования для описания правил обработки видео в службах мультимедиа Azure.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 08/19/2019
ms.author: juliako
ms.openlocfilehash: ab99b974aed6f8cd5e1da2ee9b427f593b405889
ms.sourcegitcommit: f4d8f4e48c49bd3bc15ee7e5a77bee3164a5ae1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73571238"
---
# <a name="transforms-and-jobs-in-media-services"></a>Преобразования и задания в службах мультимедиа

В этом разделе приводятся сведения о [преобразованиях](https://docs.microsoft.com/rest/api/media/transforms) и [заданиях](https://docs.microsoft.com/rest/api/media/jobs) , а также объясняется связь между этими сущностями.

## <a name="overview"></a>Обзор

### <a name="transformsjobs-workflow"></a>Рабочий процесс преобразования и задания

На следующей диаграмме показан рабочий процесс преобразования и задания.

![Преобразование и рабочий процесс заданий в службах мультимедиа Azure](./media/encoding/transforms-jobs.png)

#### <a name="typical-workflow"></a>Стандартный рабочий процесс

1. Создайте преобразование.
2. Отправка заданий с этим преобразованием.
3. Преобразования списка.
4. Удалите преобразование, если вы не планируете его использовать в будущем.

#### <a name="example"></a>Пример

Предположим, что вы хотели извлечь первый кадр всех видео в виде эскиза:

1. Определите рецепт или правило для обработки видео: "использовать первый кадр видео в качестве эскиза".
2. Для каждого видео необходимо сообщить службе:
    1. Где найти это видео.
    2. место для записи выходных данных (например, эскиза).

Шаблон **Преобразования** позволяет создать набор инструкций один раз (шаг 1) и отправить задания с использованием этой инструкции (шаг 2).

> [!NOTE]
> Свойства **преобразования** и **задания** типа DateTime всегда имеют формат UTC.

## <a name="transforms"></a>Преобразования

**Преобразования** можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждое **Преобразование** описывает рецепт или рабочий процесс выполнения задач по обработке видео-или звуковых файлов. Одно преобразование может применять несколько правил. Например, преобразование может указать, что каждое видео кодируется в MP4-файл с заданной скоростью и что эскиз будет создан из первого кадра видео. Необходимо добавить одну запись TransformOutput для каждого правила, которое требуется включить в преобразование. Используйте предустановки, чтобы сообщить преобразованию, каким образом должны обрабатываться входные файлы мультимедиа.

### <a name="viewing-schema"></a>Просмотр схемы

В службах мультимедиа v3 предустановки являются строго типизированными сущностями в самом API. Определение схемы для этих объектов можно найти в [спецификации Open API (или Swagger)](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01). Предварительные определения (например, **стандарденкодерпресет**) можно также просмотреть в справочной документации по пакету SDK [REST API](https://docs.microsoft.com/rest/api/media/transforms/createorupdate#standardencoderpreset)для служб мультимедиа версии 3 или [.NET](https://docs.microsoft.com/dotnet/api/microsoft.azure.management.media.models.standardencoderpreset?view=azure-dotnet).

### <a name="creating-transforms"></a>Создание преобразований

Можно создавать преобразования с помощью функции RESTFUL, интерфейса командной строки или любого из опубликованных пакетов SDK. Так как API Служб мультимедиа версии 3 управляется с помощью Azure Resource Manager, вы можете использовать шаблоны Resource Manager для создания и развертывания преобразований в учетной записи Служб мультимедиа. Управление доступом на основе ролей можно использовать для блокировки доступа к преобразованиям.

### <a name="updating-transforms"></a>Обновление преобразований

Если необходимо обновить [Преобразование](https://docs.microsoft.com/rest/api/media/transforms), используйте операцию **обновления** . Он предназначен для внесения изменений в описание или приоритетов базовых Трансформаутпутс. Рекомендуется выполнять такие обновления после завершения всех текущих заданий. Если вы планируете переписать рецепт, необходимо создать новое преобразование.

### <a name="transform-object-diagram"></a>Преобразование диаграммы объектов

На следующей диаграмме показан объект **Transform** и объекты, на которые он ссылается, в том числе производные связи. Серые стрелки показывают тип, на который ссылается задание, и зеленые стрелки показывают отношения наследования класса.

Выберите изображение, чтобы просмотреть его полный размер.  

<a href="./media/api-diagrams/transform-large.png" target="_blank"><img src="./media/api-diagrams/transform-small.png"></a>

## <a name="jobs"></a>Задания

**Задание** — это фактический запрос к службам мультимедиа для применения **преобразования** к заданному входному видео или звуковому содержимому. После создания преобразования можно отправлять задания с помощью API Служб мультимедиа или любого из опубликованных пакетов SDK. **Задание** указывает сведения, такие как расположение входного видео и расположение выходных данных. Расположение входного видео можно указать с помощью URL-адресов HTTPS, URL-адресов SAS или [ресурсов](https://docs.microsoft.com/rest/api/media/assets).  

### <a name="job-input-from-https"></a>Входные данные задания из HTTPS

Используйте [входные данные задания из HTTPS](job-input-from-http-how-to.md) , если содержимое уже доступно через URL-адрес и вам не нужно хранить исходный файл в Azure (например, импортировать из S3). Этот метод также подходит, если вы используете содержимое в хранилище BLOB-объектов Azure, но не хотите, чтобы файл находился в ресурсе. В настоящее время этот метод поддерживает только один файл для ввода.

### <a name="asset-as-job-input"></a>Ресурс в качестве входных данных задания

Использовать [ресурс-контейнер в качестве входных данных задания](job-input-from-local-file-how-to.md) , если входное содержимое уже находится в ресурсе или содержимое хранится в локальном файле. Это также хороший вариант, если вы планируете опубликовать входной ресурс для потоковой передачи или загрузки (предположим, что вы хотите опубликовать файл MP4 для загрузки, но также хотите выполнить распознавание речи в тексте или распознавание лиц). Этот метод поддерживает Многофайловые ресурсы (например, наборы потоковых передач MBR, которые были закодированы локально).

### <a name="checking-job-progress"></a>Проверка хода выполнения задания

Ход выполнения и состояние заданий можно получить, отслеживая события с помощью Сетки событий. Дополнительные сведения см. в статье [Создание и мониторинг событий Служб мультимедиа Azure с помощью Сетки событий и Azure CLI](job-state-events-cli-how-to.md).

### <a name="updating-jobs"></a>Обновление заданий

Операцию обновления для сущности [Job](https://docs.microsoft.com/rest/api/media/jobs) можно использовать для изменения *описания* и свойств *приоритета* после отправки задания. Изменение свойства *priority* вступает в силу только в том случае, если задание все еще находится в очереди. Если задание приступило к обработке или завершено, изменение приоритета не оказывает какого-либо влияния.

### <a name="job-object-diagram"></a>Диаграмма объектов заданий

На следующей диаграмме показан объект **задания** и объекты, на которые он ссылается, включая отношения производности.

Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/api-diagrams/job-large.png" target="_blank"><img src="./media/api-diagrams/job-small.png"></a>

## <a name="configure-media-reserved-units"></a>Настройка зарезервированных единиц мультимедиа

Для заданий анализа аудио и анализа видео, активируемых индексатором служб мультимедиа V3 или Video, настоятельно рекомендуется подготавливать учетную запись с 10 зарезервированными единицами мультимедиа S3 (Мрус). Если вам требуется более 10 единиц MRU S3, отправьте запрос в службу поддержки с помощью [портала Azure](https://portal.azure.com/).

Дополнительные сведения см. в разделе [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="see-also"></a>Дополнительные материалы

* [Коды ошибок](https://docs.microsoft.com/rest/api/media/jobs/get#joberrorcode)
* [Фильтрация, упорядочение, подкачка сущностей служб мультимедиа](entities-overview.md)

## <a name="next-steps"></a>Дальнейшие действия

- Перед началом разработки ознакомьтесь [с разработкой с помощью API-интерфейсов служб мультимедиа v3](media-services-apis-overview.md) (содержит сведения о доступе к API, соглашения об именовании и т. д.).
- Ознакомьтесь с этими учебниками:

    - [Руководство. кодирование удаленного файла на основе URL-адреса и потоковая передача видео](stream-files-tutorial-with-rest.md)
    - [Учебник. Отправка, кодирование и потоковая передача видео](stream-files-tutorial-with-api.md)
    - [Учебник. Анализ видео с помощью служб мультимедиа v3](analyze-videos-tutorial-with-api.md)
