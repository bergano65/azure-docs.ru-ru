---
title: Кодировщики для потоковых трансляций, рекомендуемые Службами мультимедиа в Azure | Документация Майкрософт
description: Узнайте о локальных кодировщиках потоковой трансляции, рекомендованных Службами мультимедиа
services: media-services
keywords: encoding;encoders;media
author: johndeu
manager: johndeu
ms.author: johndeu
ms.date: 04/16/2020
ms.topic: article
ms.service: media-services
ms.openlocfilehash: 53d68a18c5904b8b7e2f6145ae26221e99395a82
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84749932"
---
# <a name="verified-on-premises-live-streaming-encoders"></a>Проверенные локальные кодировщики динамической потоковой передачи

В Службах мультимедиа Azure [трансляция](https://docs.microsoft.com/rest/api/media/liveevents) (канал) представляет собой конвейер для обработки содержимого потоковой трансляции. Трансляция получает входные потоки одним из двух способов.

* Локальный динамический кодировщик передает содержимое в формате RTMP или Smooth Streaming (фрагментированный MP4-файл) с несколькими скоростями в трансляцию, для которой не включена поддержка кодирования в реальном времени с помощью Служб мультимедиа. Полученные потоки передаются через трансляции без дальнейшей обработки. Этот способ называется **сквозной передачей**. Рекомендуется использовать динамический кодировщик для отправки потоков с несколькими скоростями вместо односкоростного потока в сквозное событие, чтобы обеспечить потоковую передачу с адаптивной скоростью на клиент. 

    Если для транзитного мероприятия используются потоки с несколькими скоростями, то размер видео GOP и фрагменты видео с различной скоростью должны быть синхронизированы во избежание непредвиденного поведения на стороне воспроизведения.

  > [!TIP]
  > Использование сквозной передачи является наиболее экономичным способом потоковой передачи в реальном времени.
 
* Локальный динамический кодировщик отправляет поток с односкоростной передачей в динамическое событие, которое включено для выполнения кодирования в реальном времени с помощью служб мультимедиа в одном из следующих форматов: RTMP или Smooth Streaming (фрагментированный MP4). Затем трансляция выполняет кодирование в реальном времени входящего односкоростного потока в видеопоток с несколькими скоростями (адаптивный алгоритм).

В этой статье рассматриваются проверенные локальные кодировщики динамической потоковой передачи. Проверка выполняется с помощью самостоятельной проверки или проверка клиента. Cлужбы мультимедиа Microsoft Azure не выполняет полное или жесткое тестирование каждого кодировщика и не выполняет повторную проверку обновлений. Инструкции по проверке локального динамического кодировщика см. в статье [Проверка локального кодировщика](become-on-premises-encoder-partner.md) .

Подробные сведения о кодировании в реальном времени с помощью Служб мультимедиа см. в статье [Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md).

## <a name="encoder-requirements"></a>Требования к кодировщику

Кодировщики должны поддерживать TLS 1,2 при использовании протоколов HTTPS или РТМПС.

## <a name="live-encoders-that-output-rtmp"></a>Динамические кодировщики, выдающие RTMP

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают содержимое в формате RTMP. Поддерживаемые схемы URL-адрес — `rtmp://` или `rtmps://`.

При потоковой передаче через RTMP проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 1935 и 1936 открыты.<br/><br/>
При потоковой передаче через RTMPS проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 2935 и 2936 открыты.

> [!NOTE]
> Кодировщики должны поддерживать TLS 1,2 при использовании протоколов РТМПС.

- Adobe Flash Media Live Encoder 3.2;
- [Блаккмагик Атем Mini и Атем Mini PRO](https://www.blackmagicdesign.com/products/atemmini)
- [Cambria Live 4.3](https://www.capellasystems.net/products/cambria-live/)
- Элемент Live (версия 2.14.15 и более поздние)
- [FFmpeg](https://www.ffmpeg.org)
- [GoPro](https://gopro.com/help/articles/block/getting-started-with-live-streaming) Hero 7 и Hero 8
- Haivision KB
- Haivision Makito X HEVC;
- [Restream.io](https://restream.io/)
- OBS Studio
- [Стреамлабс OBS](https://streamlabs.com/)
- [Switcher Studio (iOS)](https://www.switcherstudio.com/)
- Wirecast аудиопотока (версия 13.0.2 или более поздняя из-за требования TLS 1,2)
- Wirecast (потоковая передача) (поддерживается только RTMP. Нет поддержки РТМПС из-за отсутствия TLS 1.2 +)
- Teradek Slice 756;
- VMIX
- xStream

> [!WARNING]
> Приведенный выше список кодировщиков — это просто список рекомендаций. Кодировщики не тестируются и не проверяются корпорацией Майкрософт на непрерывной основе, а обновления или критические изменения могут быть введены поставщиками кодировщиков или проектами с открытым кодом, которые могут нарушить совместимость. 

## <a name="live-encoders-that-output-fragmented-mp4-smooth-streaming-ingest"></a>Динамические кодировщики, которые выводят фрагментированный MP4 (Smooth Streaming приема)

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают потоковую передачу Smooth Streaming (фрагментированный MP4) с несколькими скоростями. Поддерживаемые схемы URL-адрес — `http://` или `https://`.

> [!NOTE]
> Кодировщики должны поддерживать TLS 1,2 при использовании протоколов HTTPS.

- Ateme TITAN Live;
- Cisco Digital Media Encoder 2200;
- В режиме реального времени (версия 2.14.15 и выше из-за требования TLS 1,2)
- Envivio 4Caster C4 Gen III; 
- [FFmpeg](https://www.ffmpeg.org)
- Imagine Communications Selenio MCP3;
- Media Excel Hero Live и Hero 4K (UHD/HEVC)

> [!TIP]
>  Если вы выполняете потоковую передачу событий в реальном времени на нескольких языках (например, одна звуковая дорожка на английском языке и одна Испанская звуковая дорожка), это можно сделать с помощью кодировщика мультимедиа Excel Live Encoder, настроенного для отправки реального веб-канала в интерактивное событие Pass.

> [!WARNING]
> Приведенный выше список кодировщиков — это просто список рекомендаций. Кодировщики не тестируются и не проверяются корпорацией Майкрософт постоянно, а поддержка или ошибки могут быть введены поставщиками кодировщиков или проектами с открытым кодом, которые нарушают совместимость в любое время. 

## <a name="configuring-on-premises-live-encoder-settings"></a>Настройка параметров локального динамического кодировщика

Сведения о том, какие параметры являются допустимыми для вашего типа трансляции, см. в разделе [Сравнение типов событий потоковой трансляции](live-event-types-comparison.md).

### <a name="playback-requirements"></a>Требования к воспроизведению

Для воспроизведения содержимого обязательно наличие аудио- и видеопотока. Воспроизведение видео без аудиопотока не поддерживается.

### <a name="configuration-tips"></a>Советы по настройке

- По возможности используйте проводное подключение к Интернету.
- Для получения необходимой пропускной способности удвойте скорость потоковой передачи. Это не обязательное требование, но оно помогает уменьшить влияние перегрузки сети на пропускную способность.
- При использовании программных кодировщиков закройте все ненужные программы.
- Изменение конфигурации кодировщика после начала отправки негативно сказывается на событии и может привести к его нестабильной работе. 
- Всегда тестируйте и проверяйте более новые версии программного обеспечения кодировщика, чтобы обеспечить непрерывную совместимость со службами мультимедиа Azure. Корпорация Майкрософт не выполняет повторную проверку кодировщиков в этом списке, и большинство проверок выполняется поставщиками программного обеспечения непосредственно как самостоятельная сертификация.
- Выделите достаточно времени для настройки события. Для крупномасштабных событий мы рекомендуем начать настройку за час до события.
- Используйте выходные данные аудио кодека H. 264 Video и AAC-LC.
- Придерживайтесь поддерживаемых разрешений и частот кадров для типа действующего события, к которому вы ведете вещание (например, 60fps в настоящее время отклонено).
- Убедитесь, что имеется ключевой кадр или GOPе Временное выравнивание по качеству видео.
- Убедитесь, что для каждого качества видео существует уникальное имя потока.
- Для оптимальной производительности с адаптивной скоростью рекомендуется использовать CBR кодирование.

> [!IMPORTANT]
> Просмотрите физическое состояние компьютера (ЦП, памяти и т. д.), так как передача фрагментов в облако включает в себя операции ЦП и ввода-вывода. При изменении каких-либо параметров в кодировщике необходимо сбросить событие каналы/Live, чтобы изменения вступили в силу.

## <a name="see-also"></a>См. также

[Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md)

## <a name="next-steps"></a>Дальнейшие шаги

[Проверка кодировщика](become-on-premises-encoder-partner.md)
