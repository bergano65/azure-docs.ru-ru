---
title: Сцены, снимки и опорные кадры индексатора видео
titleSuffix: Azure Media Services
description: В этом разделе приводятся общие сведения о сценах, снимках и опорных кадрах индексатора видео.
services: media-services
author: Juliako
manager: femila
ms.service: media-services
ms.subservice: video-indexer
ms.topic: article
ms.date: 07/05/2019
ms.author: juliako
ms.openlocfilehash: a833fd808049cfce95b182910e50e38d3c39f4e5
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2019
ms.locfileid: "74976610"
---
# <a name="scenes-shots-and-keyframes"></a>Сцены, снимки и опорные кадры

Индексатор видео поддерживает сегментирование видео в временные единицы на основе структурных и семантических свойств. Эта возможность позволяет клиентам легко просматривать видеосодержимое, управлять им и изменять его на основе различной детализации. Например, на основе сцен, снимков и опорных кадров, описанных в этом разделе.   

![Сцены, снимки и опорные кадры](./media/scenes-shots-keyframes/scenes-shots-keyframes.png)
 
## <a name="scene-detection"></a>Обнаружение сцены  
 
Индексатор видео определяет, когда сцена изменяется в видео на основе визуальных подсказок. Сцена описывает одно событие и состоит из последовательности последовательных снимков, которые семантически связаны. Эскиз сцены — это первый ключевой кадр его базового снимка. Индексатор видео разделяет видео на сцены на основе согласованности цветов в последовательных снимках и получает время начала и окончания каждой сцены. Обнаружение сцены считается сложной задачей, так как в ней используются количественные показатели семантических аспектов видео.

> [!NOTE]
> Применимо к видеороликам, содержащим не менее трех сцен.

## <a name="shot-detection"></a>Обнаружение сюжетов

Индексатор видео определяет, когда снимок изменяется в видеоролике на основе визуальных подсказок, отслеживая внезапное и постепенное переходы в цветовой схеме смежных кадров. Метаданные этого снимка включают время начала и окончания, а также список опорных кадров, включенных в этот снимок. Снимки — это последовательные кадры, взятые из одной камеры в одно и то же время.

## <a name="keyframe-detection"></a>Определение опорного кадра

Индексатор видео выбирает кадры, которые лучше представлять каждый снимок. Опорные кадры — это репрезентативные кадры, выбранные из всего видео на основе свойств Aesthetic (например, контрастность и стабильность). Индексатор видео получает список идентификаторов опорных кадров как часть метаданных снимка, в зависимости от того, какие клиенты могут извлекать ключевой кадр как изображение с высоким разрешением.  

### <a name="extracting-keyframes"></a>Извлечение опорных кадров

Чтобы извлечь ключевые кадры с высоким разрешением для видео, необходимо сначала отправить и проиндексировать видео.

![Опорные кадры](./media/scenes-shots-keyframes/extracting-keyframes.png)

#### <a name="with-the-video-indexer-website"></a>С веб-сайтом индексатора видео

Чтобы извлечь опорные кадры с помощью веб-сайта индексатора видео, отправьте и проиндексировать видео. После завершения задания индексации нажмите кнопку **скачать** и выберите **артефакты (ZIP)** . Будет загружена папка артефактов на компьютер. 

![Опорные кадры](./media/scenes-shots-keyframes/extracting-keyframes2.png)
 
Распакуйте и откройте папку. В папке *_KeyframeThumbnail* и вы увидите все ключевые кадры, извлеченные из видео. 

#### <a name="with-the-video-indexer-api"></a>С помощью API индексатора видео

Чтобы получить опорные кадры с помощью API индексатора видео, отправьте и проиндексировать видео с помощью вызова для [отправки видео](https://api-portal.videoindexer.ai/docs/services/Operations/operations/Upload-Video?) . После завершения задания индексации вызовите [получить индекс видео](https://api-portal.videoindexer.ai/docs/services/Operations/operations/Get-Video-Index?). В результате вы получите все аналитические сведения о том, что индексатор видео извлечен из содержимого в JSON-файле.  

Будет получен список идентификаторов опорных кадров в составе метаданных каждого снимка. 

```json
"shots":[  
    {  
      "id":0,
      "keyFrames":[  
          {  
            "id":0,
            "instances":[  
                {  
                  "thumbnailId":"00000000-0000-0000-0000-000000000000",
                  "start":"0:00:00.209",
                  "end":"0:00:00.251",
                  "duration":"0:00:00.042"
                }
            ]
          },
          {  
            "id":1,
            "instances":[  
                {  
                  "thumbnailId":"00000000-0000-0000-0000-000000000000",
                  "start":"0:00:04.755",
                  "end":"0:00:04.797",
                  "duration":"0:00:00.042"
                }
            ]
          }
      ],
      "instances":[  
          {  
            "start":"0:00:00",
            "end":"0:00:06.34",
            "duration":"0:00:06.34"
          }
      ]
    },

]
```

Теперь вам потребуется выполнить каждый из этих идентификаторов опорных кадров в вызове [получения эскизов](https://api-portal.videoindexer.ai/docs/services/Operations/operations/Get-Video-Thumbnail?) . Это приведет к скачиванию каждого образа опорного кадра на компьютер. 

## <a name="editorial-shot-type-detection"></a>Обнаружение типа редакционной приобнаружения

Опорные кадры связаны с снимками в выходных данных JSON. 

Тип снимка, связанный с отдельным снимком в JSON Insights, представляет его редакционный тип. Эти характеристики типа снимка могут пригодиться при редактировании видео в виде клипов, в трейлерах или при поиске определенного стиля опорного кадра для художественных целей. Различные типы определяются на основе анализа первого опорного кадра каждого снимка. Снимки определяются по масштабу, размеру и расположению лиц, отображаемых в первом опорном кадре. 

Размер и масштаб снимка определяется на основе расстояния между камерой и лицами, отображаемыми в кадре. Используя эти свойства, индексатор видео обнаруживает следующие типы снимка:

* Широкие: отображает текст всего человека.
* Средний: показывает верхнюю часть и лицо человека.
* Закрыть. в основном показывает лицо человека.
* Экстремальное замыкание: показывает изображение, заполняемое на экране лицом. 

Типы снимка также можно определить по расположению символов субъекта относительно центра рамки. Это свойство определяет следующие типы снимка в индексаторе видео:

* Левая сторона. в левой части окна отображается человек.
* Центральная грань: пользователь отображается в центральном регионе рамки.
* Правая сторона. в правой части окна отображается человек.
* Наружный: пользователь отображается в настройном воздухе.
* Внутренний: пользователь отображается в параметре.

Дополнительные характеристики:

* Два снимка: показывает два лица со средним размером.
* Несколько граней: более двух лиц.


## <a name="next-steps"></a>Дальнейшие действия

[Изучите выходные данные индексатора видео, созданные API](video-indexer-output-json-v2.md#scenes)
