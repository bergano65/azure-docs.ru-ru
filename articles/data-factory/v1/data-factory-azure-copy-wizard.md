---
title: Мастер копирования фабрики данных Azure
description: Из этой статьи вы узнаете, как с помощью мастера копирования фабрики данных Azure копировать данные из поддерживаемых источников данных в приемники.
services: data-factory
documentationcenter: ''
author: linda33wj
manager: ''
editor: ''
ms.assetid: 0974eb40-db98-4149-a50d-48db46817076
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.date: 10/26/2020
ms.author: jingwang
robots: noindex
ms.openlocfilehash: 99c7490c4bf842da119a3a0abd4623c64d720ac8
ms.sourcegitcommit: 6a350f39e2f04500ecb7235f5d88682eb4910ae8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2020
ms.locfileid: "96462213"
---
# <a name="azure-data-factory-copy-wizard"></a>Мастер копирования фабрики данных Azure

> [!NOTE]
> В этой статье рассматривается служба "Фабрика данных Azure" версии 1. 

Мастер копирования фабрики данных Azure предназначен для упрощения процесса приема данных, что обычно является первым шагом сценария комплексной интеграции данных. Во время работы в мастере копирования фабрики данных Azure вам не требуется изучать какие-либо определения JSON для связанных служб, наборов данных и конвейеров. Мастер автоматически создает конвейер для копирования данных из выбранного источника данных в указанное место назначения. Кроме того, он позволяет проверить данные, полученные во время разработки. Это экономит время, особенно, если данные получаются из источника данных впервые. Чтобы запустить мастер копирования, на домашней странице фабрики данных щелкните плитку **Копировать данные** .

![Мастер копирования](./media/data-factory-copy-wizard/copy-data-wizard.png)

## <a name="designed-for-big-data"></a>Предназначен для больших объемов данных
Этот мастер позволяет легко переместить данные из разнообразных источников в места назначения за считаные минуты. После выполнения всех действий мастера автоматически создается конвейер с действием копирования вместе с зависимыми сущностями фабрики данных (связанные службы и наборы данных). Для создания конвейера никаких дополнительных действий не требуется.   

![Выбор источника данных](./media/data-factory-copy-wizard/select-data-source-page.png)

> [!NOTE]
> Пошаговые инструкции по созданию примера конвейера для копирования данных из большого двоичного объекта Azure в таблицу базы данных SQL Azure см. в [руководстве по работе с мастером копирования](data-factory-copy-data-wizard-tutorial.md).

Мастер изначально предназначен для работы с большими объемами данных и поддерживает разнообразные данные и типы объектов. Вы можете создавать конвейеры фабрики данных для перемещения сотен папок, файлов или таблиц. Мастер позволяет выполнять автоматический предварительный просмотр данных, собирать и сопоставлять схемы, а также фильтровать данные.

## <a name="automatic-data-preview"></a>Автоматический предварительный просмотр данных
В мастере вы можете предварительно просмотреть данные из определенного источника, чтобы проверить, эти ли данные нужно скопировать. Кроме того, если исходные данные находятся в текстовом файле, мастер копирования анализирует его, чтобы автоматически получить сведения о разделителях строк и столбцов, а также о схемах.

![Параметры формата файла](./media/data-factory-copy-wizard/file-format-settings.png)

## <a name="schema-capture-and-mapping"></a>Сбор и сопоставление схем
В некоторых случаях схема входных данных может не совпадать со схемой выходных данных. В этом случае необходимо сопоставить столбцы в исходной схеме со столбцами в целевой схеме.

> [!TIP]
> При копировании данных из SQL Server или базы данных SQL Azure в Azure синапсе Analytics, если таблица не существует в целевом хранилище, фабрика данных поддерживает автоматическое создание таблиц с помощью схемы источника. Дополнительные сведения см. [в статье перемещение данных в Azure синапсе Analytics и обратно с помощью фабрики данных Azure](./data-factory-azure-sql-data-warehouse-connector.md).

Выберите в раскрывающемся списке столбец из исходной схемы, чтобы сопоставить его со столбцом в целевой схеме. Мастер копирования попытается понять ваш шаблон для сопоставления столбцов. Он применяет тот же шаблон к остальным столбцам, поэтому вам не нужно выбирать каждый столбец по отдельности, чтобы завершить сопоставление схемы. При необходимости этот шаблон сопоставления можно переопределить, выбирая в раскрывающихся списках столбцы по отдельности. Чем больше столбцов сопоставлено, тем более точным становится шаблон. Мастер копирования постоянно обновляет шаблон сопоставления столбцов, и в конечном счете он становится таким, как нужно вам.     

![Сопоставление схем](./media/data-factory-copy-wizard/schema-mapping.png)

## <a name="filtering-data"></a>Фильтрация данных
Исходные данные можно отфильтровать, чтобы выбрать только те, которые необходимо скопировать в хранилище данных-приемник. Благодаря фильтрации объем данных, которые необходимо скопировать в хранилище данных-приемник, уменьшается, и, таким образом, повышается пропускная способность операции копирования. В мастере предусмотрен гибкий способ фильтрации данных в реляционной базе данных с помощью языка запросов SQL или файлов в папке больших двоичных объектов Azure с помощью [функций и переменных фабрики данных](data-factory-functions-variables.md).   

### <a name="filtering-of-data-in-a-database"></a>Фильтрация данных в базе данных
На следующем снимке экрана показан SQL-запрос с функцией `Text.Format` и переменной `WindowStart`.

![Проверка выражений](./media/data-factory-copy-wizard/validate-expressions.png)

### <a name="filtering-of-data-in-an-azure-blob-folder"></a>Фильтрация данных в папке больших двоичных объектов Azure
Вы можете использовать переменные в пути к папке, чтобы скопировать данные из папки, определенной в среде выполнения, на основе [системных переменных](data-factory-functions-variables.md#data-factory-system-variables). Поддерживаемые переменные: **{year}**, **{month}**, **{day}**, **{hour}**, **{minute}** и **{custom}**. Пример: inputfolder/{year}/{month}/{day}.

Предположим, что у вас есть входные каталоги с именами в следующем формате:

```text
2016/03/01/01
2016/03/01/02
2016/03/01/03
...
```

Нажмите кнопку **Обзор** в разделе **Файл или папка**, перейдите к любой из этих папок, например 2016->03->01->02, и щелкните **Выбрать**. В текстовом поле появится такое значение: `2016/03/01/02`. Измените в нем **2016** на **{year}**, **03** на **{month}**, **01** на **{day}**, **02** на **{hour}** и нажмите клавишу **TAB**. Вы увидите раскрывающиеся списки, в которых можно выбрать формат для этих четырех переменных, как показано ниже.

![Использование системных переменных](./media/data-factory-copy-wizard/blob-standard-variables-in-folder-path.png)   

Кроме того, можно использовать переменную **custom**, как показано ниже, и любые [поддерживаемые строки формата](/dotnet/standard/base-types/custom-date-and-time-format-strings). Чтобы выбрать папку с такой структурой, сначала нажмите кнопку **Обзор**. Затем замените нужное значение на **{custom}** и нажмите клавишу **TAB**. Вы увидите текстовое поле для ввода строки формата.     

![Использование пользовательской переменной](./media/data-factory-copy-wizard/blob-custom-variables-in-folder-path.png)

## <a name="scheduling-options"></a>Параметры планирования
Операцию копирования можно выполнить однократно или запускать по расписанию (ежечасно, ежедневно и т. д.). Оба варианта можно использовать с любыми соединителями в средах, в том числе в локальных средах или в облаке, а также с копиями на локальном компьютере.

Однократная операция копирования позволяет один раз переместить данные из источника в целевое расположение. Ее можно применять к данным любого размера и любого из поддерживаемых форматов. Запланированное копирование позволяет копировать данные с определенной периодичностью. Для запланированного копирования можно задать широкий набор настроек (повторение, время ожидания, предупреждения и т. д.).

![Планирование свойств](./media/data-factory-copy-wizard/scheduling-properties.png)

## <a name="troubleshooting"></a>Устранение неполадок

В этом разделе рассматриваются распространенные методы устранения неполадок в мастере копирования в фабрике данных Azure.

> [!NOTE] 
> Эти советы по устранению неполадок относятся к мастеру копирования в версии 1 фабрики данных. Сведения о фабрике данных версии 2 см. в статье Руководство по устранению неполадок в [фабрике данных Azure](../data-factory-ux-troubleshoot-guide.md).

### <a name="error-code-unable-to-validate-in-copy-wizard"></a>Код ошибки: не удалось проверить в мастере копирования

- **Симптомы**. на первом шаге мастера копирования вы столкнулись с предупреждением "не удалось проверить".
- **Причины**: это может произойти, если все сторонние файлы cookie отключены.
- **Решение**. 
    - Используйте Internet Explorer или браузер Microsoft ребр.
    - Если вы используете браузер Chrome, следуйте приведенным ниже инструкциям, чтобы добавить исключение "cookies" для *microsoftonline.com* и *Windows.NET*.
        1.  Откройте браузер Chrome.
        2.  Щелкните гаечного ключа или три строки справа (Настройка и управление Google Chrome).
        3.  Щелкните **Параметры**.
        4.  Поиск **файлов cookie** или переход к **конфиденциальности** в разделе Дополнительные параметры.
        5.  Выберите **Параметры содержимого**.    
        6.  Для файлов cookie должно быть задано **значение "разрешить установку локальных данных" (рекомендуется)**.
        7.  Щелкните **Управление исключениями**. В разделе **шаблон имени узла** введите следующее и убедитесь, что параметр **allow** является набором поведения.
            - login.microsoftonline.com
            - login.windows.net
        8.  Закройте браузер и перезапустите.
    - Если вы используете браузер Firefox, следуйте приведенным ниже инструкциям, чтобы добавить исключение "файлы cookie".
        1. В меню Firefox выберите **Сервис**  >  **Параметры**.
        2. В **Privacy** разделе  >  **Журнал** конфиденциальности можно увидеть, что текущая настройка **использует настраиваемые параметры для журнала**.
        3. Если вы **принимаете сторонние файлы cookie**, текущий параметр может быть **никогда не** выбран, а затем следует щелкнуть **исключения** справа, чтобы добавить следующие сайты.
            - https://login.microsoftonline.com
            - https://login.windows.net
        4.  Закройте браузер и перезапустите. 


### <a name="error-code-unable-to-open-login-page-and-enter-password"></a>Код ошибки: не удается открыть страницу входа и ввести пароль

- **Симптомы**. Мастер копирования перенаправляет вас на страницу входа, но страница входа не отображается.
- **Причины**. Эта проблема может возникнуть, если вы изменили сетевую среду с Office Network на домашнюю сеть. В браузерах есть несколько кэшей. 
- **Решение**. 
    1.  Закройте браузер и повторите попытку. Если ошибка все еще существует, перейдите к следующему шагу.   
    2.  Если вы используете браузер Internet Explorer, попробуйте открыть его в частном режиме (нажмите клавиши "Ctrl" + "Shift" + "P"). Если вы используете браузер Chrome, попробуйте открыть его в режиме режиме инкогнито (нажмите клавиши "Ctrl" + "Shift" + "N"). Если ошибка все еще существует, перейдите к следующему шагу. 
    3.  Попробуйте использовать другой браузер. 


## <a name="next-steps"></a>Дальнейшие действия
Краткое пошаговое руководство по созданию конвейера с действием копирования с помощью мастера копирования фабрики данных см. в [этой статье](data-factory-copy-data-wizard-tutorial.md).