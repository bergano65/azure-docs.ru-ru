---
title: Визуальный мониторинг фабрики данных Azure
description: Узнайте, как осуществлять визуальный мониторинг фабрик данных Azure.
services: data-factory
documentationcenter: ''
author: djpmsft
ms.author: daperlov
ms.reviewer: maghan
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.date: 06/30/2020
ms.openlocfilehash: ecb066c7269217af3f8cc84e0f59ab29b4b39a9e
ms.sourcegitcommit: 46c5ffd69fa7bc71102737d1fab4338ca782b6f1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2020
ms.locfileid: "94331618"
---
# <a name="visually-monitor-azure-data-factory"></a>Визуальный мониторинг фабрики данных Azure

[!INCLUDE[appliesto-adf-xxx-md](includes/appliesto-adf-xxx-md.md)]

Создав и опубликовав конвейер в фабрике данных Azure, его можно связать с триггером или вручную запустить прямое выполнение. В пользовательском интерфейсе фабрики данных Azure по умолчанию можно отслеживать все выполнения конвейера. Чтобы открыть интерфейс мониторинга, выберите плитку **Мониторинг и управление** в колонке фабрики данных на [портале Azure](https://portal.azure.com/). Если вы уже находитесь в пользовательском интерфейсе ADF, щелкните значок **Монитор** на левой боковой панели.

По умолчанию все запуски фабрики данных отображаются в местном часовом поясе браузера. Если вы измените настройки часового пояса, все поля даты и времени автоматически переключатся на новый часовой пояс.

## <a name="monitor-pipeline-runs"></a>Мониторинг выполнений конвейера

Представление мониторинга по умолчанию — это список запущенных запусков конвейера за выбранный период времени. Можно изменить диапазон времени и выполнить фильтрацию по состоянию, имени конвейера или заметке. Наведите указатель мыши на конкретный запуск конвейера, чтобы получить действия, связанные с выполнением, такие как перезапуск и отчет о потреблении.

![Представление списка для мониторинга выполнений конвейера](media/monitor-visually/pipeline-runs.png)

Сетка выполнение конвейера содержит следующие столбцы.

| **Имя столбца** | **Описание** |
| --- | --- |
| Pipeline Name | Имя конвейера. |
| Run Start | Дата и время начала выполнения конвейера (ММ/ДД/ГГГГ ЧЧ:ММ:СС). |
| Завершение выполнения | Дата и время окончания выполнения конвейера (мм/дд/гггг, чч: мм: сс AM/PM) |
| Duration | Длительность выполнения (ЧЧ:ММ:СС) |
| Triggered By | Имя триггера, который запускает конвейер. |
| Состояние | **Сбой** , **Выполнено** , **Выполняется** , **Отменено** или **В очереди**. |
| Заметки | Фильтруемые теги, связанные с конвейером.  |
| Параметры | Параметры для выполнения конвейера (пары "имя-значение"). |
| Error | Если конвейер завершился сбоем, возникнет ошибка выполнения. |
| Run ID | Идентификатор выполнения конвейера. |

Нажмите кнопку **Обновить** , чтобы обновить список выполнений конвейера и действия. Автоматическое обновление сейчас не поддерживается.

![Кнопка "Обновить"](media/monitor-visually/refresh.png)

Чтобы просмотреть результаты выполнения отладки, перейдите на вкладку **Отладка** .

![Щелкните значок просмотра активных запусков отладки](media/iterative-development-debugging/view-debug-runs.png)

## <a name="monitor-activity-runs"></a>Мониторинг выполнений действий

Чтобы получить подробные сведения о выполнении отдельных действий конкретного конвейера, щелкните имя конвейера.

![Просмотр выполнений действий](media/monitor-visually/view-activity-runs.png)

Представление списка отображает выполнения действия, относящихся к каждому выполнению конвейера. Наведите указатель мыши на конкретное выполнение действия, чтобы получить сведения, относящиеся к запуску, такие как входные данные JSON, выходные данные JSON и подробные данные мониторинга, относящиеся к действиям.

![Представление списка для мониторинга выполнений действия](media/monitor-visually/activity-runs.png)

| **Имя столбца** | **Описание** |
| --- | --- |
| Activity Name | Имя действия в конвейере |
| Activity Type | Тип действия, например **Copy** , **ExecuteDataFlow** или **AzureMLExecutePipeline**. |
| Действия | Значки, позволяющие просматривать входные данные JSON, выходные данные JSON или подробные сведения о мониторинге действий. | 
| Run Start | Дата и время начала выполнения конвейера (ММ/ДД/ГГГГ ЧЧ:ММ:СС). |
| Duration | Длительность выполнения (ЧЧ:ММ:СС) |
| Состояние | **Сбой** , **Выполнено** , **В очереди** или **Отменено**. |
| Integration Runtime | Тип Integration Runtime, использованный для запуска действия. |
| Свойства пользователя | Свойства действия, определяемые пользователем. |
| Error | Если действие завершилось сбоем, возникнет ошибка выполнения. |
| Run ID | Идентификатор выполнения действия. |

Если действие завершилось сбоем, можно просмотреть подробное сообщение об ошибке, щелкнув значок в столбце ошибка. 

![Представление списка для мониторинга выполнений действия](media/monitor-visually/activity-run-error.png)

### <a name="promote-user-properties-to-monitor"></a>Распространение свойств пользователя для отслеживания

Можно повысить уровень любого свойства действия конвейера как свойства пользователя, чтобы сделать его сущностью, которую вы можете отслеживать. Например, можно повысить уровень свойств **Источник** и **Назначение** действия копирования в конвейере как свойств пользователя.

> [!NOTE]
> В качестве свойств пользователя можно повысить уровень только для пяти свойств действия конвейера.

![Создание свойств пользователя](media/monitor-visually/promote-user-properties.png)

Создав свойства пользователя, их можно отслеживать в представлениях списка мониторинга.

![Добавление столбцов для свойств пользователя в список выполнений действия](media/monitor-visually/choose-user-properties.png)

 Если источник действия копирования является именем таблицы, можно отслеживать имя исходной таблицы как столбца в представлении списка выполнений действия.

![Список выполнений действия со столбцами для свойств пользователя](media/monitor-visually/view-user-properties.png)

## <a name="rerun-pipelines-and-activities"></a>Повторный запуск конвейеров и действий

Чтобы повторно запустить конвейер, который ранее выполнялся с самого начала, наведите указатель мыши на конкретный запуск конвейера и выберите **повторно запустить**. Если выбрано несколько конвейеров, для их выполнения можно использовать кнопку **повторного** запуска.

![Повторный запуск конвейера](media/monitor-visually/rerun-pipeline.png)

Если вы хотите повторить запуск в определенной точке, это можно сделать в представлении выполнения действий. Выберите действие, с которого вы хотите начать, и нажмите кнопку **перезапустить из действия**. 

![Повторное выполнение действия](media/monitor-visually/rerun-activity.png)

### <a name="rerun-from-failed-activity"></a>Перезапуск с действия, завершившегося сбоем

Если действие завершилось сбоем, было отменено или время его ожидания истекло, выполнение конвейера можно повторно запустить с этого действия, завершившегося сбоем, выбрав пункт **Rerun from failed activity** (Перезапустить с действия, завершившегося сбоем).

![Повторное выполнение действия, завершившегося сбоем](media/monitor-visually/rerun-failed-activity.png)

### <a name="view-rerun-history"></a>Просмотр журнала повторного выполнения

Вы можете просмотреть журнал повторного выполнения для всех выполнений конвейера в представлении списка.

![Просмотр истории](media/monitor-visually/rerun-history-1.png)

Вы также можете просмотреть журнал повторного выполнения для запуска определенного конвейера.

![Просмотр журнала для выполнения конвейера](media/monitor-visually/view-rerun-history.png)

## <a name="monitor-consumption"></a>Мониторинг потребления

Чтобы просмотреть ресурсы, потребляемые при выполнении конвейера, щелкните значок потребления рядом с выполнением. 

![Снимок экрана, на котором показано, где можно просмотреть ресурсы, используемые конвейером.](media/monitor-visually/monitor-consumption-1.png)

При щелчке значка откроется отчет о потреблении ресурсов, используемых при выполнении конвейера. 

![Мониторинг потребления](media/monitor-visually/monitor-consumption-2.png)

Эти значения можно ввести в [калькулятор цен Azure](https://azure.microsoft.com/pricing/details/data-factory/), чтобы оценить затраты на выполнение конвейера. Дополнительные сведения о ценообразовании для фабрики данных Azure см. в статье [Изучение ценообразования Фабрики данных Azure посредством примеров](pricing-concepts.md).

> [!NOTE]
> Значения, возвращаемые калькулятором цен, являются приблизительными. Он не отражает точную сумму оплаты, которая будет взиматься за фабрику данных Azure. 

## <a name="gantt-views"></a>Представления диаграммы Ганта

Диаграмма Ганта — это представление, которое позволяет просматривать журнал выполнения за временной диапазон. Переходя к представлению Ганта, вы увидите, что все запуски конвейеров группируются по имени, отображаемым в виде отрезков, относящихся к продолжительности выполнения. Можно также группировать по заметкам или тегам, созданным в конвейере. Представление диаграммы Ганта также доступно на уровне выполнения действия.

![Пример диаграммы Ганта](media/monitor-visually/select-gantt.png)

Длина строки указывает длительность конвейера. Можно также выбрать строку, чтобы просмотреть дополнительные сведения.

![Длительность диаграммы Ганта](media/monitor-visually/view-gantt-run.png)

## <a name="alerts"></a>видны узлы

Вы можете создавать оповещения на основе поддерживаемых метрик фабрики данных. Чтобы приступить к работе, выберите **Монитор** > **Оповещения и метрики** на странице мониторинга Фабрики данных.

![Страница "Монитор" Фабрики данных](media/monitor-visually/start-page.png)

Уделите 7 минут своего времени, чтобы просмотреть следующее видео с кратким обзором и демонстрацией этой функции.

> [!VIDEO https://channel9.msdn.com/shows/azure-friday/Monitor-your-Azure-Data-Factory-pipelines-proactively-with-alerts/player]

### <a name="create-alerts"></a>Создание оповещений

1.  Выберите **Новое правило генерации оповещения** , чтобы создать новое оповещение.

    ![Кнопка "Новое правило генерации оповещения"](media/monitor-visually/new-alerts.png)

1.  Укажите имя правила и выберите уровень серьезности оповещения.

    ![Поля для ввода имени правила и уровня серьезности](media/monitor-visually/name-and-severity.png)

1.  Выберите критерии оповещения.

    ![Поле для целевого критерия](media/monitor-visually/add-criteria-1.png)

    ![Снимок экрана, на котором показано, где выбирается одна метрика для настройки условия оповещения.](media/monitor-visually/add-criteria-2.png)

    ![Список критериев](media/monitor-visually/add-criteria-3.png)

    Вы можете создавать оповещения для различных метрик, в том числе для объектов ADF (количество и размер), активности, конвейера и триггеров, Integration Runtime (IR) загрузка ЦП, количество узлов и очередь, а также для выполнения пакетов служб SSIS и операций запуска и отмены служб SSIS.

1.  Настройте логику оповещения. Можно создать оповещение для выбранной метрики для всех конвейеров и соответствующих действий. Можно также выбрать определенный тип действия, имя действия, имя конвейера или тип сбоя.

    ![Параметры для настройки логики оповещения](media/monitor-visually/alert-logic.png)

1.  Настройте сообщения электронной почты, SMS, push-уведомления и голосовые уведомления для этого оповещения. Создайте группу действий или выберите существующую группу, чтобы получать уведомления об оповещениях.

    ![Параметры для настройки уведомлений](media/monitor-visually/configure-notification-1.png)

    ![Параметры для добавления уведомления](media/monitor-visually/configure-notification-2.png)

1.  Создайте правило генерации оповещений.

    ![Параметры для создания правила генерации оповещений](media/monitor-visually/create-alert-rule.png)

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о мониторинге конвейеров и управлении ими см. в статье [Отслеживание фабрики данных Azure с помощью программных средств](./monitor-programmatically.md).