---
title: Частная ссылка Azure для фабрики данных Azure
description: Узнайте, как работает частная ссылка Azure в фабрике данных Azure.
services: data-factory
ms.author: abnarain
author: nabhishek
manager: shwang
ms.reviewer: douglasl
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 09/01/2020
ms.openlocfilehash: 8d28a1f2040cfec7b81081754a6abd3bc3e14439
ms.sourcegitcommit: df66dff4e34a0b7780cba503bb141d6b72335a96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2020
ms.locfileid: "96511480"
---
# <a name="azure-private-link-for-azure-data-factory"></a>Частная ссылка Azure для фабрики данных Azure

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-xxx-md.md)]

С помощью частной связи Azure можно подключаться к развертыванию различных платформ как служб (PaaS) в Azure с помощью частной конечной точки. Частная конечная точка — это частный IP-адрес в определенной виртуальной сети и подсети. Список развертываний PaaS, поддерживающих функции закрытых ссылок, см. в [документации по частным ссылкам](../private-link/index.yml). 

## <a name="secure-communication-between-customer-networks-and-azure-data-factory"></a>Защита обмена данными между сетями клиентов и фабрикой данных Azure 
Виртуальную сеть Azure можно настроить как логическое представление сети в облаке. Это обеспечивает следующие преимущества:
* Вы помогаете защитить ресурсы Azure от атак в общедоступных сетях.
* Сети и фабрика данных позволяют безопасно взаимодействовать друг с другом. 

Вы также можете подключить локальную сеть к виртуальной сети, настроив подключение VPN ("сеть — сеть") или подключение Azure ExpressRoute (частный пиринг). 

Можно также установить локальную среду выполнения интеграции на локальном компьютере или в виртуальной машине в виртуальной сети. Это позволит вам:
* Выполнение действий копирования между облачным хранилищем данных и хранилищем данных в частной сети.
* Отправка действий преобразования в ресурсы вычислений в локальной сети или в виртуальной сети Azure. 

Между фабрикой данных Azure и виртуальной сетью клиента требуется несколько коммуникационных каналов, как показано в следующей таблице.

| Домен | Порт | Описание |
| ---------- | -------- | --------------- |
| `adf.azure.com` | 443 | Плоскость управления, необходимая для создания и мониторинга фабрики данных. |
| `*.{region}.datafactory.azure.net` | 443 | Требуется локальной среде выполнения интеграции для подключения к службе фабрики данных. |
| `*.servicebus.windows.net` | 443 | Требуется локальной среде выполнения интеграции для интерактивной разработки. |
| `download.microsoft.com` | 443 | Требуется локальной среде выполнения интеграции для скачивания обновлений. |

Благодаря поддержке частного канала для фабрики данных Azure вы можете:
* Создайте частную конечную точку в виртуальной сети.
* Включите частное подключение к определенному экземпляру фабрики данных. 

Связь со службой фабрики данных Azure осуществляется с помощью частной ссылки и обеспечивает безопасную закрытую связь. Вам не нужно настраивать предыдущий домен и порт в виртуальной сети или корпоративном брандмауэре, чтобы обеспечить более безопасный способ защиты ресурсов.  

![Схема частной ссылки на архитектуру фабрики данных Azure.](./media/data-factory-private-link/private-link-architecture.png)

Включение службы Private Link для каждого из предыдущих каналов связи обеспечивает следующие функциональные возможности:
- **Поддерживается**:
   - Вы можете создавать и отслеживать фабрику данных в виртуальной сети, даже если вы блокируете все исходящие подключения.
   - Взаимодействие между локальной средой выполнения интеграции и службой фабрики данных Azure может быть безопасно выполнено в среде частной сети. Трафик между локальной средой выполнения интеграции и службой фабрики данных Azure переходит по частной ссылке. 
- **Сейчас не поддерживается**:
   - Интерактивная разработка, в которой используется локальная среда выполнения интеграции, например проверка подключения, просмотр списка папок и список таблиц, получение схемы и предварительный просмотр данных, осуществляется через частную ссылку.
   - Новая версия локальной среды выполнения интеграции может быть автоматически загружена из центра загрузки Майкрософт, если включено автоматическое обновление.

   > [!NOTE]
   > Для функций, которые в настоящее время не поддерживаются, необходимо настроить ранее упомянутый домен и порт в виртуальной сети или в корпоративном брандмауэре. 

> [!WARNING]
> При создании связанной службы убедитесь, что учетные данные хранятся в хранилище ключей Azure. В противном случае учетные данные не будут работать при включении частного канала в фабрике данных Azure.

## <a name="dns-changes-for-private-endpoints"></a>Изменения DNS для частных конечных точек
При создании частной конечной точки запись ресурса CNAME DNS для фабрики данных обновляется до псевдонима в поддомене с префиксом "привателинк". По умолчанию также создается [Частная зона DNS](https://docs.microsoft.com/azure/dns/private-dns-overview), соответствующая поддомену "привателинк", с записями ресурсов DNS a для частных конечных точек.

При разрешении URL-адреса конечной точки фабрики данных, расположенной за пределами виртуальной сети с частной конечной точкой, она разрешается в общедоступную конечную точку службы фабрики данных. При разрешении из виртуальной сети, в которой размещается частная конечная точка, URL-адрес конечной точки хранилища разрешается в IP-адрес частной конечной точки.

В приведенном выше примере записи ресурсов DNS для фабрики данных "Factory" (при разрешении из-за пределов виртуальной сети, в которой размещается частная конечная точка) будут:

| Название | Тип | Значение |
| ---------- | -------- | --------------- |
| Фабрика. {Region}. факт. Azure. NET | CNAME   | Фабрика. {Region}. привателинк. факт. Azure. NET |
| Фабрика. {Region}. привателинк. факт. Azure. NET | CNAME   | < общедоступной конечной точки службы фабрики данных > |
| < общедоступной конечной точки службы фабрики данных >  | Объект | < общедоступный IP-адрес службы фабрики данных > |

Записи ресурсов DNS для фабрики (если они разрешаются в виртуальной сети, в которой размещается частная конечная точка) будут:

| Название | Тип | Значение |
| ---------- | -------- | --------------- |
| Фабрика. {Region}. факт. Azure. NET | CNAME   | Фабрика. {Region}. привателинк. факт. Azure. NET |
| Фабрика. {Region}. привателинк. факт. Azure. NET   | Объект | < IP-адрес частной конечной точки > |

При использовании пользовательского DNS-сервера в сети клиенты должны иметь возможность разрешить полное доменное имя конечной точки фабрики данных на IP-адрес частной конечной точки. Необходимо настроить DNS-сервер для делегирования поддомена частной связи в частную зону DNS для виртуальной сети или настроить записи A для "фабрики". {Region}. привателинк. факт. Azure. NET "с IP-адресом частной конечной точки.

Дополнительные сведения о настройке собственного DNS-сервера для поддержки частных конечных точек см. в следующих статьях:
- [Разрешение имен ресурсов в виртуальных сетях Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances#name-resolution-that-uses-your-own-dns-server)
- [Конфигурация DNS для частных конечных точек](https://docs.microsoft.com/azure/private-link/private-endpoint-overview#dns-configuration)


## <a name="set-up-private-link-for-azure-data-factory"></a>Настройка частной ссылки для фабрики данных Azure
Частные конечные точки можно создать с помощью [портал Azure](../private-link/create-private-endpoint-portal.md).

Вы также можете зайти в фабрику данных Azure в портал Azure и создать закрытую конечную точку, как показано ниже:

![Снимок экрана: панель "подключения к частным конечным точкам" для создания частной конечной точки.](./media/data-factory-private-link/create-private-endpoint.png)


Если вы хотите заблокировать общий доступ к фабрике данных Azure и разрешить доступ только через закрытую ссылку, отключите сетевой доступ к фабрике данных Azure в портал Azure, как показано ниже:

![Снимок экрана: область "сетевой доступ" для создания частной конечной точки.](./media/data-factory-private-link/disable-network-access.png)

> [!NOTE]
> Отключение доступа к общедоступной сети применимо только к локальной среде выполнения интеграции, а не к Azure Integration Runtime и SQL Server Integration Services (SSIS) Integration Runtime.

> [!NOTE]
> Вы по-прежнему можете получить доступ к порталу фабрики данных Azure через общедоступную сеть после отключения доступа к общедоступной сети.

## <a name="next-steps"></a>Следующие шаги

- [Создание фабрики данных с помощью пользовательского интерфейса фабрики данных Azure](quickstart-create-data-factory-portal.md)
- [Общие сведения о службе фабрики данных Azure, службе интеграции данных в облаке](introduction.md)
- [Визуальная разработка в фабрике данных Azure](author-visually.md)