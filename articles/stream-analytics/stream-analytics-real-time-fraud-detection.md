---
title: Руководство. Анализ данных телефонных звонков, осуществляемых в мошеннических целях, с помощью Azure Stream Analytics и визуализация результатов на панели мониторинга Power BI
description: В этом руководстве содержится комплексное описание использования Azure Stream Analytics для анализа мошеннических вызовов в потоке телефонных звонков.
author: enkrumah
ms.author: ebnkruma
ms.service: stream-analytics
ms.topic: tutorial
ms.custom: contperf-fy21q2
ms.date: 12/17/2020
ms.openlocfilehash: 1e26159c07ca551a78ee2f83a0ca64779c60f7b4
ms.sourcegitcommit: 42a4d0e8fa84609bec0f6c241abe1c20036b9575
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "98018876"
---
# <a name="tutorial-analyze-fraudulent-call-data-with-stream-analytics-and-visualize-results-in-power-bi-dashboard"></a>Руководство по Анализ данных телефонных звонков, осуществляемых в мошеннических целях, с помощью Stream Analytics и визуализация результатов на панели мониторинга Power BI

В этом руководстве показано, как анализировать данные телефонных звонков с помощью Azure Stream Analytics. Данные телефонных звонков, поступившие от клиентского приложения, содержат сведения о мошеннических звонках, которые фильтруются с помощью задания Stream Analytics. Вы можете использовать описанные в этом руководстве способы для обнаружения мошенничества других типов, например мошеннических операций с кредитными картами или кражи личных данных.

Из этого руководства вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * создание примера данных телефонных звонков и их отправка в Центры событий Azure;
> * создание задания Stream Analytics;
> * настройка входных и выходных данных для задания;
> * определение запросов для фильтрации звонков, осуществляемых в мошеннических целях;
> * тестирование и запуск задания;
> * визуализация результатов в Power BI.

## <a name="prerequisites"></a>Предварительные требования

Прежде чем начать работу, нужно сделать следующее:

* Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free/).
* Загрузите приложение генератора событий телефонных вызовов [TelcoGenerator.zip](https://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) из Центра загрузки Майкрософт или получите исходный код на сайте [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).
* Вам потребуется учетная запись Power BI.

## <a name="sign-in-to-azure"></a>Вход в Azure

Войдите на [портал Azure](https://portal.azure.com).

## <a name="create-an-azure-event-hub"></a>Создание концентратора событий Azure

Чтобы Stream Analytics смогла проанализировать поток данных мошеннических вызовов, необходимо отправить данные в Azure. В этом руководстве данные будут отправлены в Azure с помощью [Центров событий Azure](../event-hubs/event-hubs-about.md).

Следуйте инструкциям ниже, чтобы создать концентратор событий и отправить в него данные вызовов:

1. Войдите на [портал Azure](https://portal.azure.com/).
2. Выберите **Создать ресурс** > **Интернет вещей** > **Центры событий**.

   ![Создание концентратора событий на портале Azure](media/stream-analytics-real-time-fraud-detection/find-event-hub-resource.png)
3. Заполните область **Создание пространства имен** следующими значениями:

   |**Параметр**  |**Рекомендуемое значение** |**Описание**  |
   |---------|---------|---------|
   |Имя     | asaTutorialEventHub        |  Уникальное имя для идентификации пространства имен концентратора событий.       |
   |Подписка     |   \<Your subscription\>      |   Выберите подписку Azure, в которой нужно создать концентратор событий.      |
   |Группа ресурсов     |   MyASADemoRG      |  Выберите **Создать** и введите новое имя группы ресурсов для учетной записи.       |
   |Расположение     |   Западная часть США 2      |    Расположение, в которое можно развернуть пространство имен концентратора событий.     |

4. Используйте значения по умолчанию для оставшихся параметров и нажмите кнопку **Просмотреть и создать**. Затем нажмите кнопку **Создать**, чтобы начать развертывание.

   ![Создание пространства имен концентратора событий на портале Azure](media/stream-analytics-real-time-fraud-detection/create-event-hub-namespace.png)

5. После завершения развертывания пространства имен перейдите в колонку **Все ресурсы** и найдите пространство имен *asaTutorialEventHub* в списке ресурсов Azure. Выберите пространство имен *asaTutorialEventHub*, чтобы открыть его.

6. Затем выберите **+Концентратор событий** и укажите **имя** концентратора событий. Установите для параметра **Количество разделов** значение 2.  Используйте значения по умолчанию для оставшихся параметров и нажмите кнопку **Создать**. Дождитесь успешного завершения развертывания.

   ![Настройка концентратора событий на портале Azure](media/stream-analytics-real-time-fraud-detection/create-event-hub-portal.png)

### <a name="grant-access-to-the-event-hub-and-get-a-connection-string"></a>Предоставление доступа к концентратору событий и получение строки подключения

Чтобы приложение могло отправлять данные в Центры событий Azure, в концентраторе событий должна быть политика, обеспечивающая доступ. Политика доступа создает строку подключения, которая включает сведения об авторизации.

1. Перейдите к концентратору событий *MyEventHub*, созданному на предыдущем шаге. Выберите **Политика общего доступа** в разделе **Параметры**, а затем — **+ Добавить**.

2. Назовите политику **MyPolicy** и убедитесь, что флажок **Управление** установлен. Щелкните **Создать**.

   ![Создание политики общего доступа к концентратору событий](media/stream-analytics-real-time-fraud-detection/create-event-hub-access-policy.png)

3. После создания политики выберите ее имя, чтобы открыть ее. Найдите поле **Строка подключения — первичный ключ**. Нажмите кнопку **копирования** рядом со строкой подключения.

   ![Сохранение строки подключения политики общего доступа](media/stream-analytics-real-time-fraud-detection/save-connection-string.png)

4. Вставьте строку подключения в текстовый редактор. Эта строка подключения вам понадобится в следующем разделе.

   Строка подключения выглядит следующим образом:

   `Endpoint=sb://<Your event hub namespace>.servicebus.windows.net/;SharedAccessKeyName=<Your shared access policy name>;SharedAccessKey=<generated key>;EntityPath=<Your event hub name>`

   Обратите внимание, что строка подключения содержит несколько пар "ключ — значение", которые разделены точкой с запятой: **Endpoint**, **SharedAccessKeyName**, **SharedAccessKey** и **EntityPath**.

## <a name="start-the-event-generator-application"></a>Запуск приложения генератора событий

Перед запуском приложения TelcoGenerator необходимо настроить его для отправки данных в созданный ранее концентратор событий Azure.

1. Извлеките содержимое файла [TelcoGenerator.zip](https://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip).
2. Откройте файл `TelcoGenerator\TelcoGenerator\telcodatagen.exe.config` в текстовом редакторе по своему выбору. Файлов с расширением `.config` несколько, поэтому убедитесь, что открываете нужный файл.

3. Обновите элемент `<appSettings>` в файле конфигурации, указав следующие сведения:

   * Задайте для ключа *EventHubName* значение EntityPath в строке подключения.
   * Задайте для ключа *Microsoft.ServiceBus.ConnectionString* строку подключения без значения EntityPath. Обязательно удалите точку с запятой перед значением EntityPath.

4. Сохраните файл.

5. Далее откройте командное окно и перейдите в папку, в которой распаковано приложение TelcoGenerator. Затем введите следующую команду:

   ```cmd
   .\telcodatagen.exe 1000 0.2 2
   ```

   Эта команда принимает следующие параметры:
   * Число записей данных звонков в час.
   * Вероятность мошенничества, которая представляет частоту моделирования приложением мошеннических вызовов. Значение 0,2 означает, что около 20 % записей вызовов будут мошенническими.
   * Продолжительность в часах, которая соответствует количеству часов, на протяжении которых должно выполняться приложение. Вы также можете в любое время остановить выполнение приложения, завершив процесс (**CTRL+C**) в командной строке.

   Через несколько секунд приложение запустит отображение записей вызовов на экране, так как будет отправлять их в концентратор событий. Данные телефонных звонков содержат следующие поля:

   |**Запись**  |**Определение**  |
   |---------|---------|
   |CallrecTime    |  Метка времени начала вызова.       |
   |SwitchNum     |  Телефонный переключатель, используемый для совершения вызова. В этом примере переключатели выражены строками, представляющими страну или регион происхождения (США, Китай, Соединенное Королевство, Германия или Австралия).       |
   |CallingNum     |  Номер телефона звонящего.       |
   |CallingIMSI     |  Идентификатор абонента международной мобильной связи (IMSI). Это уникальный идентификатор звонящего.       |
   |CalledNum     |   Номер телефона получателя.      |
   |CalledIMSI     |  Идентификатор IMSI. Это уникальный идентификатор получателя звонка.       |

## <a name="create-a-stream-analytics-job"></a>Создание задания Stream Analytics

Теперь, когда у вас есть поток событий звонков, можно создать задание Stream Analytics, которое считывает данные из концентратора событий.

1. Чтобы создать задание Stream Analytics, перейдите на [портал Azure](https://portal.azure.com/).

2. Выберите **Создать ресурс** и выполните поиск по фразе **Задание Stream Analytics**. Выберите плитку **Задание Stream Analytics**, а затем — *Создать**.

3. Заполните форму **Новое задание Stream Analytics** такими значениями:

   |**Параметр**  |**Рекомендуемое значение**  |**Описание**  |
   |---------|---------|---------|
   |Имя задания     |  ASATutorial       |   Уникальное имя для идентификации пространства имен концентратора событий.      |
   |Подписка    |  \<Your subscription\>   |   Выберите подписку Azure, в которой нужно создать задание.       |
   |Группа ресурсов   |   MyASADemoRG      |   Выберите **Use existing** (Использовать существующую) и введите новое имя группы ресурсов для учетной записи.      |
   |Расположение   |    Западная часть США 2     |      Расположение, в котором можно развернуть задание. Рекомендуется поместить задание и концентратор событий в одном регионе, чтобы достичь оптимальной производительности и не оплачивать передачу данных между регионами.      |
   |Среда размещения    | Cloud        |     Задания Stream Analytics можно развернуть в облаке или на граничных устройствах. Значение "Облако" позволяет выполнять развертывание в облаке Azure, а "Edge" — на устройстве IoT Edge.    |
   |Единицы потоковой передачи     |    1       |      Единица потоковой передачи предоставляет вычислительные ресурсы, которые необходимы для выполнения задания. По умолчанию установлено значение 1. Чтобы узнать о масштабировании единиц потоковой передачи, ознакомьтесь со статьей [Обзор и настройка единиц потоковой передачи](stream-analytics-streaming-unit-consumption.md).      |

4. Используйте значения по умолчанию для оставшихся параметров и нажмите кнопку **Создать**, а затем ожидайте, пока развертывание не будет завершено.

   ![Создание задания Azure Stream Analytics](media/stream-analytics-real-time-fraud-detection/create-stream-analytics-job.png)

## <a name="configure-job-input"></a>Настройка входных данных для задания

Следующий шаг — определить источник входных данных, откуда задание будет считывать данные с помощью концентратора событий, созданного в предыдущем разделе.

1. На портале Azure откройте страницу **Все ресурсы** и найдите задание Stream Analytics *ASATutorial*.

2. В разделе **Топология задания** задания Stream Analytics выберите **Входные данные**.

3. Выберите **+ Добавить потоковый вход** и **Концентратор событий**. Заполните форму входных данных следующими значениями:

   |**Параметр**  |**Рекомендуемое значение**  |**Описание**  |
   |---------|---------|---------|
   |Псевдоним входных данных     |  CallStream       |  Введите понятное имя для идентификации входных данных. Входной псевдоним может содержать только буквенно-цифровые символы, дефисы и знаки подчеркивания. Длина должна составлять от 3 до 63 символов.       |
   |Подписка    |   \<Your subscription\>      |   Выберите подписку Azure, в которой вы создали концентратор событий. Концентратор событий может находиться в той же подписке, что и задание Stream Analytics, или в другой.       |
   |Пространство имен концентратора событий    |  asaTutorialEventHub       |  Выберите пространство имен концентратора событий, созданного в предыдущем разделе. Все пространства имен концентраторов событий, доступные в текущей подписке, перечислены в раскрывающемся меню.       |
   |имя концентратора событий;    |   MyEventHub      |  Выберите концентратор событий, который был создан в предыдущем разделе. Все концентраторы событий, доступные в текущей подписке, перечислены в раскрывающемся меню.       |
   |Имя политики концентратора событий   |  MyPolicy       |  Выберите политику общего доступа концентратора событий, созданную в предыдущем разделе. Все политики концентраторов событий, доступные в текущей подписке, перечислены в раскрывающемся меню.       |

4. Используйте значения по умолчанию для оставшихся параметров и нажмите кнопку **Сохранить**.

   ![Настройка входных данных Azure Stream Analytics](media/stream-analytics-real-time-fraud-detection/configure-stream-analytics-input.png)

## <a name="configure-job-output"></a>Настройка выходных данных для задания

Осталось определить приемник выходных данных, в котором задание сможет записывать преобразованные данные. В этом руководстве данные выводятся и визуализируются с помощью Power BI.

1. На портале Azure откройте **Все ресурсы** и выберите задание Stream Analytics *ASATutorial*.

2. В разделе **Топология задания** задания Stream Analytics выберите вариант **Выходные данные**.

3. Выберите **+ Добавить** > **Power BI**. Затем выберите **Авторизовать** и следуйте инструкциям на экране, чтобы выполнить проверку подлинности Power BI.

:::image type="content" source="media/stream-analytics-real-time-fraud-detection/authorize-power-bi.png" alt-text="Кнопка авторизации для Power BI":::

4. Заполните форму следующими сведениями и нажмите кнопку **Сохранить**:

   |**Параметр**  |**Рекомендуемое значение**  |
   |---------|---------|
   |Псевдоним выходных данных  |  MyPBIoutput  |
   |Рабочая область группы| Моя рабочая область |
   |Имя набора данных  |   ASAdataset  |
   |Имя таблицы |  ASATable  |
   | Режим проверки подлинности | Токен пользователя |

   ![Настройка выходных данных Stream Analytics](media/stream-analytics-real-time-fraud-detection/configure-stream-analytics-output.png)

   В этом учебнике используется *токен проверки подлинности* пользователей. Сведения об использовании управляемого удостоверения см. в статье [Использование управляемого удостоверения для проверки подлинности задач Azure Stream Analytics для вывода данных в Power BI](powerbi-output-managed-identity.md).

## <a name="create-queries-to-transform-real-time-data"></a>Создание запросов для преобразования данных в режиме реального времени

На этом этапе задание Stream Analytics настроено на считывание входящего потока данных. Далее необходимо создать запрос для анализа данных в режиме реального времени. В запросах используется язык на основе SQL, который содержит некоторые расширения, характерные для Stream Analytics.

В этом разделе руководства вы создадите и проверите несколько запросов, чтобы ознакомиться с несколькими способами преобразования входного потока для анализа. 

Запросы, созданные в рамках этого руководства, выведут преобразованные данные на экран. При работе с одним из следующих разделов вы запишете преобразованные данные в Power BI.

Дополнительные сведения о языке см. в разделе [Справочник по языку запросов Azure Stream Analytics](/stream-analytics-query/stream-analytics-query-language-reference).

### <a name="test-using-a-pass-through-query"></a>Проверка с помощью запроса к серверу

Чтобы архивировать все события, вы можете использовать запрос к серверу для считывания всех полей в полезных данных события.

1. Перейдите к заданию Stream Analytics на портале Azure и выберите элемент **Запрос** в разделе *Топология задания*. 

2. В окне запроса введите следующий запрос:

   ```SQL
   SELECT 
       *
   FROM 
       CallStream
   ```

    >[!NOTE]
    >Как и при использовании SQL, регистр ключевых слов не учитывается, пробел не имеет значения.

    В этом запросе `CallStream` — это входной псевдоним, указанный при создании входных данных для задания. Если вы использовали другой псевдоним, используйте его, соответственно.

3. Выберите **Пробный запрос**.

    Задание Stream Analytics выполнит запрос примера данных из входных данных и отобразит выходные данные в нижней части окна. Такой результат означает, что концентратор событий и задание Stream Analytics настроены правильно.

    :::image type="content" source="media/stream-analytics-real-time-fraud-detection/sample-output-passthrough.png" alt-text="Пример выходных данных из пробного запроса":::

    Точное число отображаемых записей будет зависеть от числа записей, собранных в примере.

### <a name="reduce-the-number-of-fields-using-a-column-projection"></a>Уменьшение числа полей с помощью заполнения столбцов

Во многих случаях анализу не требуются все столбцы из входного потока. Вы можете использовать запрос, чтобы создать меньший набор возвращаемых полей по сравнению с набором в запросе к серверу.

Выполните указанный ниже запрос и обратите внимание на выходные данные.

```SQL
SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNumCalledNum 
FROM 
    CallStream
```

### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a>Количество входящих вызовов по региону: "переворачивающееся" окно с агрегированием

Предположим, вам нужно посчитать число входящих вызовов на регион. При потоковой передаче данных, если вы хотите использовать агрегатные функции, например подсчет, вам нужно сегментировать поток на временные единицы, так как сам поток данных является цельным. Это можно сделать с помощью [функции окна](stream-analytics-window-functions.md) Streaming Analytics. Затем вы сможете работать с данными в этом окне как с отдельными единицами.

Для такого преобразования нужна последовательность временных окон, которые не перекрываются. У каждого окна будет дискретный набор данных, которые можно группировать и статистически обрабатывать. Такой тип окна называется *"переворачивающимся" окном*. В "переворачивающемся" окне вы можете получить число входящих вызовов, сгруппированных `SwitchNum` — переключателем, который представляет страну/регион (расположение) вызова.

1. Вставьте в редактор запросов следующий запрос:

    ```SQL
    SELECT 
        System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
    FROM
        CallStream TIMESTAMP BY CallRecTime 
    GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum
    ```

    Этот запрос использует ключевое слово `Timestamp By` в предложении `FROM`, чтобы указать, какое поле метки времени использовать во входном потоке для определения "переворачивающегося" окна. В этом случае окно делит данные на сегменты по полю `CallRecTime` в каждой записи. Если поле не указано, при выполнении операций с окнами будет использоваться время поступления каждого события в концентратор событий. Дополнительные сведения см. в разделе о времени поступления и времени приложения в [справочнике по языку запросов Stream Analytics](/stream-analytics-query/stream-analytics-query-language-reference). 

    Проектирование включает запрос `System.Timestamp`, возвращающий метку времени конца каждого окна. 

    Чтобы указать, что вы хотите использовать "переворачивающееся" окно, используйте функцию [TUMBLINGWINDOW](/stream-analytics-query/tumbling-window-azure-stream-analytics) в предложении `GROUP BY`. В функции укажите единицу времени (от микросекунд до 24 часов) и размер окна (количество единиц). В этом примере "переворачивающееся" окно состоит из пятисекундных интервалов, поэтому вы получите количество вызовов по странам/регионам за 5 секунд.

2. Выберите **Пробный запрос**. В результатах обратите внимание на то, что метки времени в **WindowEnd** формируются с шагом приращения в 5 секунд.

### <a name="detect-sim-fraud-using-a-self-join"></a>Выявление мошенничества в отношении SIM-карт с помощью самосоединения

В этом примере мы рассмотрим мошеннические вызовы, выполненные одним пользователем из различных регионов с интервалом в 5 секунд. Например, один и тот же пользователь не может законным путем сделать звонок из США и Австралии одновременно.

Чтобы проверить такие случаи, вы можете использовать самосоединение потоковой передачи данных, чтобы выполнить самосоединение потока на основе значения `CallRecTime`. Затем вы можете найти записи вызовов, в которых значение `CallingIMSI` (исходящий номер) остается неизменным, а значение `SwitchNum` (страна/регион происхождения) изменяется.

При использовании соединения с потоковой передачей данных соединение должно предоставить некоторые ограничения в отношении того, насколько совпадающие строки могут быть разделены по времени. Как уже отмечалось выше, потоковая передача данных является цельной. Пределы времени для такой связи задаются в предложении соединения `ON` с помощью функции `DATEDIFF`. В этом случае соединение основано на 5-секундном интервале данных вызова.

1. Вставьте в редактор запросов следующий запрос:

    ```SQL
    SELECT System.Timestamp AS WindowEnd, COUNT(*) AS FraudulentCalls
    INTO "MyPBIoutput"
    FROM "CallStream" CS1 TIMESTAMP BY CallRecTime
    JOIN "CallStream" CS2 TIMESTAMP BY CallRecTime
    ON CS1.CallingIMSI = CS2.CallingIMSI
    AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5
    WHERE CS1.SwitchNum != CS2.SwitchNum
    GROUP BY TumblingWindow(Duration(second, 1))
    ```

    Этот запрос напоминает любое другое соединение SQL за исключением функции в соединении `DATEDIFF`. Эта версия функции `DATEDIFF` предназначена для Stream Analytics и должна присутствовать в предложении `ON...BETWEEN`. Параметры представлены единицей времени (в этом примере — секундами) и псевдонимами двух источников для соединения. В этом она отличается от стандартной функции SQL `DATEDIFF`.

    Предложение `WHERE` содержит условие, которое помечает мошеннический вызов — исходящие переключатели не совпадают.

2. Выберите **Пробный запрос**. Просмотрите выходные данные и выберите элемент **Сохранить запрос**.

## <a name="start-the-job-and-visualize-output"></a>Запуск задания и визуализация выходных данных

1. Перейдите к панели задания **Обзор** и выберите **Запуск**, чтобы запустить задание.

2. Выберите время начала создания выходных данных задания **Сейчас**, а затем — **Запуск**. Вы можете просматривать состояние задания на панели уведомлений.

3. После успешного выполнения задания перейдите на сайт [Power BI](https://powerbi.com/) и войдите с помощью рабочей или учебной учетной записи. Если запрос задания Stream Analytics выдает результаты, то созданный набор данных *ASAdataset* находится на вкладке **Наборы данных**.

4. В рабочей области Power BI выберите **+ Создать**, чтобы создать панель мониторинга с именем *Мошеннические вызовы*.

5. В верхней части окна выберите **Изменить** и **Добавить плитку**. Затем выберите **Пользовательские данные потоковой передачи** и нажмите кнопку **Далее**. Выберите **ASAdataset** в разделе **Ваши наборы данных**. Выберите **Карточка** из раскрывающегося списка **Тип визуализации** и добавьте **fraudulent calls** в **Поля**. Нажмите кнопку **Далее**, чтобы ввести имя для плитки, а затем выберите **Применить** для создания плитки.

   ![Создание плитки панели мониторинга Power BI](media/stream-analytics-real-time-fraud-detection/create-power-bi-dashboard-tiles.png)

6. Выполните шаг 5 снова, выбрав следующие параметры:
   * В поле "Тип визуализации" выберите "График".
   * Добавьте ось и выберите **windowend**.
   * Добавьте значение и выберите **fraudulentcalls**.
   * В списке **Отображаемый интервал времени** укажите последние 10 минут.

7. После добавления обеих плиток панель мониторинга должна выглядеть как в приведенном ниже примере. Обратите внимание, что если приложение отправки концентратора событий и приложение Streaming Analytics запущены, панель мониторинга Power BI будет периодически обновляться по мере поступления новых данных.

   ![Просмотр результатов на панели мониторинга Power BI](media/stream-analytics-real-time-fraud-detection/power-bi-results-dashboard.png)

## <a name="embedding-your-power-bi-dashboard-in-a-web-application"></a>Внедрение панели мониторинга Power BI в веб-приложение

В этой части руководства для внедрения панели мониторинга используется пример веб-приложения [ASP.NET](https://asp.net/), созданный командой Power BI. Дополнительные сведения о внедрении панелей мониторинга см. в [этой статье](/power-bi/developer/embedding).

Чтобы настроить приложение, перейдите к репозиторию GitHub [PowerBI-Developer-Samples](https://github.com/Microsoft/PowerBI-Developer-Samples) и следуйте инструкциям из раздела о **владении данными** (используйте URL-адреса переадресации и домашней страницы в подразделе **integrate-web-app**). Так как мы используем пример панели мониторинга, используйте пример кода **integrate-web-app**, который находится в [репозитории GitHub](https://github.com/microsoft/PowerBI-Developer-Samples/tree/master/.NET%20Framework/Embed%20for%20your%20organization/).
Когда приложение будет запущено в браузере, выполните следующие действия, чтобы вставить созданную ранее панель инструментов на веб-страницу:

1. Выберите **Sign in to Power BI** (Вход в Power BI), что предоставит приложению доступ к панелям мониторинга в учетной записи Power BI.

2. Нажмите кнопку **Get Dashboards** (Получить панели мониторинга), после чего панели мониторинга учетной записи отобразятся в таблице. Найдите имя панели мониторинга, которая была создана ранее **powerbi-embedded-dashboard**, и скопируйте соответствующий **EmbedUrl**.

3. Наконец, вставьте **EmbedUrl** в соответствующее текстовое поле и выберите **Embed Dashboard** (Внедрение панели мониторинга). Теперь та же панель мониторинга будет внедрена в веб-приложение.

## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве был создан пример задания Stream Analytics, проанализированы входные данные и представлены результаты на панели мониторинга Power BI. Чтобы узнать больше о заданиях Stream Analytics, перейдите к следующему руководству:

> [!div class="nextstepaction"]
> [Запуск решения "Функции Azure" из заданий Azure Stream Analytics](stream-analytics-with-azure-functions.md)
