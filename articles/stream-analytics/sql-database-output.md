---
title: Выходные данные базы данных SQL Azure от Azure Stream Analytics
description: В этой статье описывается база данных SQL Azure в качестве результата для Azure Stream Analytics.
author: mamccrea
ms.author: mamccrea
ms.reviewer: mamccrea
ms.service: stream-analytics
ms.topic: conceptual
ms.date: 08/25/2020
ms.openlocfilehash: 4310bd94edd5ebe14eab40b6d19e2bacbdd1b03c
ms.sourcegitcommit: 53acd9895a4a395efa6d7cd41d7f78e392b9cfbe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90906229"
---
# <a name="azure-sql-database-output-from-azure-stream-analytics"></a>Выходные данные базы данных SQL Azure от Azure Stream Analytics

[База данных SQL Azure](https://azure.microsoft.com/services/sql-database/) может служить местом назначения для выходных реляционных данных, а также для выходных данных приложений, которые зависят от содержимого, размещенного в реляционной базе данных. Azure Stream Analyticsные задания записываются в существующую таблицу в базе данных SQL. Схема таблицы должна в точности соответствовать полям и их типам в выходных данных задания. Вы также можете указать [Azure синапсе Analytics](https://azure.microsoft.com/documentation/services/sql-data-warehouse/) в качестве выходных данных с помощью параметра вывода базы данных SQL. Сведения о способах улучшения пропускной способности операций записи см. в статье [Azure Stream Analytics output to Azure SQL Database](stream-analytics-sql-output-perf.md) (Запись выходных данных Azure Stream Analytics в службу "База данных SQL Azure").

Вы также можете использовать [управляемый экземпляр Azure SQL](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) в качестве выходных данных. Необходимо [настроить общедоступную конечную точку в управляемый экземпляр SQL](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-public-endpoint-configure) , а затем вручную настроить следующие параметры в Azure Stream Analytics. Виртуальная машина Azure, на которой работает SQL Server с подключенной базой данных, также дополнительно настраивается вручную с использованием параметров ниже.

## <a name="output-configuration"></a>Конфигурация выходных данных

В таблице ниже приведены имена и описание свойств для создания выходных данных Базы данных SQL.

| Имя свойства | Описание |
| --- | --- |
| Псевдоним выходных данных |Понятное имя, которое используется в запросах для направления выходных данных запроса в соответствующую базу данных. |
| База данных | Имя базы данных, в которую отправляются выходные данные. |
| Имя сервера | Логическое имя сервера SQL Server или имя управляемого экземпляра. Для SQL Управляемый экземпляр необходимо указать порт 3342. Например, *sampleserver.public.database.windows.net,3342* |
| Имя пользователя | Имя пользователя, имеющего доступ к базе данных на запись. Stream Analytics поддерживает только проверку подлинности SQL. |
| Пароль | Пароль для подключения к базе данных. |
| Таблица | Имя таблицы, в которую записываются выходные данные. В имени таблицы учитывается регистр. Схема этой таблицы должна точно соответствовать количеству полей и их типов, формируемых выходными данными задания. |
|Наследование схемы секционирования| Это свойство позволяет наследовать схему разделов, используемую на предыдущем шаге запроса, для включения топологии полной параллельной обработки с несколькими модулями записи для таблицы. Дополнительные сведения см. в статье [Вывод данных Azure Stream Analytics в базу данных SQL Azure](stream-analytics-sql-output-perf.md).|
|Максимальное количество пакетов| Рекомендованное максимальное число записей, отправляемых с каждой транзакцией массовой вставки.|

Существует два адаптера, которые позволяют выводить данные из Azure Stream Analytics в Azure Synapse Analytics (ранее — хранилище данных SQL): База данных SQL и Azure Synapse. Рекомендуется выбрать адаптер Azure синапсе Analytics вместо адаптера базы данных SQL, если выполняется одно из следующих условий.

* **Пропускная способность**. Если ожидаемая пропускная способность сейчас или в будущем больше 10 Мбит/с, используйте параметр вывода данных Azure Synapse для повышения производительности.

* **Входные разделы**: Если у вас есть восемь или более входных разделов, используйте параметр вывода данных Azure Synapse, чтобы улучшить горизонтальное увеличение масштаба.

## <a name="partitioning"></a>Секционирование

Секционирование должно быть включено и основано на предложении PARTITION BY в запросе. Если включен параметр наследования секционирования, он следует за входным секционированием для [полностью параллелизуемые запросов](stream-analytics-scale-jobs.md). Дополнительные сведения об улучшении пропускной способности операций записи при загрузке данных в базу данных SQL Azure см. в статье [Вывод данных Azure Stream Analytics в базу данных SQL Azure](stream-analytics-sql-output-perf.md).

## <a name="output-batch-size"></a>Размер выходного пакета

Максимальный размер сообщения можно настроить с помощью **максимального числа пакетов**. По умолчанию максимальное значение равно 10 000, а минимальное значение по умолчанию — 100 строк на одну операцию инструкции INSERT. Дополнительные сведения см. в статье [ограничения SQL Azure](../sql-database/sql-database-resource-limits.md). Каждый пакет первоначально вставляется с максимальным количеством пакетов. Пакет разделяется надвое (до достижения минимального количества пакетов) в зависимости от повторяемых ошибок SQL.

## <a name="next-steps"></a>Дальнейшие действия

* [Краткое руководство. по созданию задания Stream Analytics с помощью портала Azure](stream-analytics-quick-create-portal.md)
* [Краткое руководство. Создание задания Azure Stream Analytics с помощью Azure CLI](quick-create-azure-cli.md)
* [Краткое руководство. Создание задания Azure Stream Analytics с помощью шаблона ARM](quick-create-azure-resource-manager.md)
* [Краткое руководство. Создание задания Stream Analytics с помощью Azure PowerShell](stream-analytics-quick-create-powershell.md)
* [Краткое руководство. Создание задания Azure Stream Analytics с помощью Visual Studio](stream-analytics-quick-create-vs.md)
* [Краткое руководство. Создание задания Azure Stream Analytics в Visual Studio Code](quick-create-visual-studio-code.md)
