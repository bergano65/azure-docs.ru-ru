---
title: Регистрация и сканирование Azure Data Lake Storage (ADLS) Gen1
description: В этом руководстве описывается, как проверить данные из Azure Data Lake Storage 1-го поколения в Azure зрения.
author: kchandra
ms.author: kchandra
ms.service: data-catalog
ms.subservice: data-catalog-gen2
ms.topic: how-to
ms.date: 11/30/2020
ms.openlocfilehash: ee0b9238deb7805113f0cbfa28d0b60a114820a9
ms.sourcegitcommit: 65db02799b1f685e7eaa7e0ecf38f03866c33ad1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2020
ms.locfileid: "96555097"
---
# <a name="register-and-scan-azure-data-lake-storage-gen1"></a>Регистрация и сканирование Azure Data Lake Storage 1-го поколения

В этой статье описано, как зарегистрировать Azure Data Lake Storage 1-го поколения в качестве источника данных в Azure зрения и настроить на нем проверку.

> [!Note]
> Платформа Azure Data Lake Storage 2-го поколения теперь общедоступна. Мы рекомендуем приступить к ее использованию уже сегодня. См. сведения на [странице продукта](https://azure.microsoft.com/services/storage/data-lake-storage/).

## <a name="supported-capabilities"></a>Поддерживаемые возможности

Источник данных Azure Data Lake Storage 1-го поколения поддерживает следующие функциональные возможности:

- **Полные и добавочные Просмотры** для записи метаданных и классификации в Azure Data Lake Storage 1-го поколения

- **Журнал преобразований** между ресурсами данных для операций копирования и потока ADF

## <a name="prerequisites"></a>Предварительные требования

- Перед регистрацией источников данных создайте учетную запись Azure зрения. Дополнительные сведения о создании учетной записи зрения см. в разделе [Краткое руководство. Создание учетной записи Azure зрения](create-catalog-portal.md).
- Необходимо быть администратором источника данных Azure зрения.

## <a name="setting-up-authentication-for-a-scan"></a>Настройка проверки подлинности при проверке

Для Azure Data Lake Storage 1-го поколения поддерживаются следующие методы проверки подлинности:

- Управляемое удостоверение
- Субъект-служба

### <a name="managed-identity-recommended"></a>Управляемое удостоверение (рекомендуется)

Для простоты и безопасности может потребоваться использовать зрения MSI для проверки подлинности в хранилище данных.

Чтобы настроить проверку с помощью MSI каталога данных, необходимо сначала предоставить учетной записи зрения разрешение на проверку источника данных. Этот шаг необходимо выполнить *до* настройки проверки, иначе проверка завершится ошибкой.

#### <a name="adding-the-data-catalog-msi-to-an-azure-data-lake-storage-gen1-account"></a>Добавление MSI каталога данных в учетную запись Azure Data Lake Storage 1-го поколения

Вы можете добавить MSI каталога на уровне подписки, группы ресурсов или ресурса в зависимости от того, для чего он должен иметь разрешения на проверку.

> [!Note]
> Чтобы добавить управляемое удостоверение в ресурсе Azure, необходимо быть владельцем подписки.

1. На [портал Azure](https://portal.azure.com)Найдите подписку, группу ресурсов или ресурс (например, учетную запись хранения Azure Data Lake Storage 1-го поколения), которую вы хотите разрешить для проверки каталога.

2. Щелкните **Обзор** , а затем выберите **Обозреватель данных** .

   :::image type="content" source="./media/register-scan-adls-gen1/access-control.png" alt-text="Выбор управления доступом":::

3. Щелкните **Access (доступ** ) в верхней области навигации.

   :::image type="content" source="./media/register-scan-adls-gen1/access.png" alt-text="Щелкните &quot;доступ&quot;.":::

4. Щелкните **Добавить**. Добавьте **Каталог зрения** в выбранном списке выбрать пользователя или группу. Выберите разрешения **Чтение** и **выполнение** . Обязательно выберите **эту папку и все дочерние элементы** в параметре добавить в, как показано на снимке экрана ниже, и щелкните **ОК** 
    :::image type="content" source="./media/register-scan-adls-gen1/managed-instance-authentication.png" alt-text="сведения о проверке подлинности MSI"::: .

5. Если хранилище ключей еще не подключено к зрения, необходимо [создать новое подключение к хранилищу ключей](manage-credentials.md#create-azure-key-vaults-connections-in-your-azure-purview-account).

6. Наконец, [Создайте новые учетные данные](manage-credentials.md#create-a-new-credential) с помощью субъекта-службы для настройки проверки.
> [!Note]
> После добавления MSI-файла каталога в источник данных подождите до 15 минут, пока разрешения будут распространяться перед настройкой проверки.

Через 15 минут каталог должен иметь соответствующие разрешения, чтобы иметь возможность сканировать ресурсы.

### <a name="service-principal"></a>Субъект-служба

Чтобы использовать субъект-службу, необходимо сначала создать один из следующих шагов:

1. Перейдите на [портал Azure](https://portal.azure.com).

2. Выберите **Azure Active Directory** в меню слева.

3. Щелкните **Регистрация приложений**.

4. Выберите **Регистрация нового приложения**.

5. Введите имя **приложения** (имя субъекта-службы).

6. Выберите **учетные записи только в этом каталоге Организации**.

7. Для **URI перенаправления** выберите **Интернет** и введите любой URL-адрес. Он не должен быть реальным или работать.

8. Нажмите кнопку **Зарегистрировать**.

9. Скопируйте значения из отображаемого имени и идентификатора приложения.

#### <a name="adding-the-data-catalog-service-principal-to-an-azure-data-lake-storage-gen1-account"></a>Добавление субъекта-службы каталога данных в учетную запись Azure Data Lake Storage 1-го поколения
1. На [портал Azure](https://portal.azure.com)Найдите подписку, группу ресурсов или ресурс (например, учетную запись хранения Azure Data Lake Storage 1-го поколения), которую вы хотите разрешить для проверки каталога.

2. Щелкните **Обзор** , а затем выберите **Обозреватель данных** .

   :::image type="content" source="./media/register-scan-adls-gen1/access-control.png" alt-text="Выбор управления доступом":::

3. Щелкните **Access (доступ** ) в верхней области навигации.

   :::image type="content" source="./media/register-scan-adls-gen1/access.png" alt-text="Щелкните &quot;доступ&quot;.":::

4. Щелкните **Добавить**. Добавьте **приложение субъекта-службы** в выбранном списке выберите пользователя или группу. Выберите разрешения **Чтение** и **выполнение** . Обязательно выберите **эту папку и все дочерние элементы** в параметре добавить в, как показано на снимке экрана ниже, и щелкните **ОК** 
    :::image type="content" source="./media/register-scan-adls-gen1/service-principal-authentication.png" alt-text="сведения о проверке подлинности субъекта-службы"::: .

5. Если хранилище ключей еще не подключено к зрения, необходимо [создать новое подключение к хранилищу ключей](manage-credentials.md#create-azure-key-vaults-connections-in-your-azure-purview-account).

6. Наконец, [Создайте новые учетные данные](manage-credentials.md#create-a-new-credential) с помощью субъекта-службы, чтобы настроить проверку.

## <a name="register-azure-data-lake-storage-gen1-data-source"></a>Регистрация Azure Data Lake Storage 1-го поколения источника данных

Чтобы зарегистрировать новую учетную запись ADLS 1-го поколения в каталоге данных, выполните следующие действия.

1. Перейдите к каталогу данных зрения.
2. В области навигации слева выберите **источники** .
3. Нажмите кнопку **Зарегистрировать**.
4. В меню **Регистрация источников** выберите **Azure Data Lake Storage 1-го поколения**. 
5. Выберите **Continue** (Продолжить).

На экране регистрация источников (Azure Data Lake Storage 1-го поколения) выполните следующие действия.

1. Введите **имя** , в котором будет указан источник данных в каталоге.
2. Выберите подписку, чтобы отфильтровать учетные записи хранения
3. Выбор учетной записи хранения
4. Выберите или создайте новую коллекцию (необязательно)
5. Готово для регистрации источника данных.

[!INCLUDE [create and manage scans](includes/manage-scans.md)]

## <a name="next-steps"></a>Дальнейшие шаги

- [Обзор каталога данных Azure зрения](how-to-browse-catalog.md)
- [Поиск в каталоге данных Azure зрения](how-to-search-catalog.md)
