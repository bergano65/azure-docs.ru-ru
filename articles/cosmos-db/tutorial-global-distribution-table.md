---
title: Руководство по настройке глобального распределения Azure Cosmos DB с помощью API таблиц | Документация Майкрософт
description: Узнайте, как работает глобальное распространение в учетных записях API таблиц Azure Cosmos DB и как настроить список предпочитаемых регионов.
author: sakash279
ms.author: akshanka
ms.service: cosmos-db
ms.subservice: cosmosdb-table
ms.topic: tutorial
ms.date: 01/30/2020
ms.reviewer: sngun
ms.openlocfilehash: f0d62ae3909bc886fa6a56ba7ed32d55d27302dd
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91568654"
---
# <a name="set-up-azure-cosmos-db-global-distribution-using-the-table-api"></a>Настройка глобального распределения Azure Cosmos DB с помощью API таблицы

В этой статье рассматриваются следующие задачи: 

> [!div class="checklist"]
> * настроили глобальное распределение на портале Azure;
> * настройка глобального распределения с помощью [API таблицы](table-introduction.md).

[!INCLUDE [cosmos-db-tutorial-global-distribution-portal](../../includes/cosmos-db-tutorial-global-distribution-portal.md)]


## <a name="connecting-to-a-preferred-region-using-the-table-api"></a>Подключение к предпочтительному региону с помощью API таблицы

Чтобы воспользоваться преимуществами [глобального распределения](distribute-data-globally.md), клиентские приложения должны указать текущее расположение, в котором выполняется приложение. Это можно сделать, задав свойство `CosmosExecutorConfiguration.CurrentRegion`. Свойство `CurrentRegion` должно содержать одно расположение. Каждый экземпляр клиента может указывать собственный регион для чтения с минимальной задержкой. Региону необходимо присвоить имя, используя их [отображаемые имена](https://msdn.microsoft.com/library/azure/gg441293.aspx) например "Западная часть США". 

Пакет SDK для API таблиц в Azure Cosmos DB автоматически выбирает лучшую конечную точку для взаимодействия на основе конфигурации учетной записи и текущей доступности региона. Он назначает приоритет для ближайшего региона, чтобы обеспечить минимальную задержку для клиентов. После задания текущего свойства `CurrentRegion` запросы на чтение и запись направляются следующим образом:

* **Запросы на чтение:** все запросы на чтение отправляются в настроенный `CurrentRegion`. В зависимости от сходства пакет SDK автоматически выбирает резервный геореплицированный регион для обеспечения высокого уровня доступности.

* **Запросы на запись:** пакет SDK автоматически отправляет все запросы на запись в текущий регион записи. В учетной записи с выполнением операций записи в нескольких регионах текущий регион также будет обслуживать запросы на запись. В зависимости от сходства пакет SDK автоматически выбирает резервный геореплицированный регион для обеспечения высокого уровня доступности.

Если не указать свойство `CurrentRegion`, пакет SDK будет использовать текущий регион записи для всех операций.

Например, если учетная запись Azure Cosmos находится в регионах "Западная часть США" и "Восточная часть США". Если "Западная часть США" — регион записи, а приложение — "Восточная часть США". Если свойство CurrentRegion не настроено, все запросы на чтение и запись всегда направляются в регион "Западная часть США". Если настроено свойство CurrentRegion, все запросы на чтение обслуживаются в регионе "Восточная часть США".

## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве вы выполнили следующее:

> [!div class="checklist"]
> * настроили глобальное распределение на портале Azure;
> * настроили глобальное распределение с помощью API таблиц в Azure Cosmos DB.

