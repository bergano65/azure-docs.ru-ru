---
title: Глобально распределенное хранилище транзакций и аналитические хранилища для контейнеров Azure Cosmos
description: Сведения о хранении транзакций и аналитических хранилища и их параметрах конфигурации для контейнеров Azure Cosmos.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 09/30/2019
ms.reviewer: sngun
ms.openlocfilehash: 22bb36e3b22f65bbf9922bd31e4b2e041cdb8979
ms.sourcegitcommit: c62a68ed80289d0daada860b837c31625b0fa0f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2019
ms.locfileid: "73601233"
---
# <a name="globally-distributed-transactional-and-analytical-storage-for-azure-cosmos-containers"></a>Глобально распределенное хранилище транзакций и аналитические хранилища для контейнеров Azure Cosmos

Контейнер Azure Cosmos внутренне поддерживается двумя ядрами хранилища — транзакционным подсистемой хранилища и обновляемым подсистемой аналитического хранилища. Оба ядра хранилища имеют структуру журналов и оптимизированы для записи для ускорения обновлений. Однако каждый из них кодируется по-разному:

* **Транзакционная система хранения данных** — она кодируется в формате, ориентированном на строки, для быстрого транзакционного чтения и запросов.

* **Модуль аналитического хранилища** — он кодируется в формате столбцов для быстрых аналитических запросов и проверок.

![Механизмы хранилища и сопоставление Azure Cosmos DB API](./media/globally-distributed-transactional-analytical-storage/storage-engines-api-mapping.png)

Транзакционная подсистема хранения данных поддерживается локальными твердотельными накопителями, а аналитическое хранилище хранится в недорогом хранилище SSD с некластеризованным кластером. В следующей таблице записаны важные различия между транзакционным и аналитическим хранилищем.


|Функция  |Хранилище транзакций  |Аналитическое хранилище |
|---------|---------|---------|
|Максимальный объем хранилища на контейнер Azure Cosmos |   Без ограничений      |    Без ограничений     |
|Максимальный объем хранилища на ключ логической секции   |   10 ГБ      |   Без ограничений      |
|Кодирование хранилища  |   По строкам, используя внутренний формат.   |   Ориентированные на столбцы, с использованием формата Apache Parquet. |
|Локальность хранилища |   Реплицированное хранилище, созданное локально или внутри кластера твердотельных накопителей. |  Реплицированное хранилище, созданное с помощью недорогых твердотельных накопителей удаленного и недоступного кластера.       |
|Устойчивость  |    99,99999 (7-9 с)     |  99,99999 (7-9 с)       |
|Интерфейсы API, обращающиеся к данным  |   SQL, MongoDB, Cassandra, Gremlin, Tables и etcd.       | Apache Spark         |
|Хранение (срок жизни или TTL)   |  На основе политики, настроенной в контейнере Azure Cosmos, с помощью свойства `DefaultTimeToLive`.       |   На основе политики, настроенной в контейнере Azure Cosmos, с помощью свойства `ColumnStoreTimeToLive`.      |
|Цена за ГБ    |   Откройте [страницу цен](https://azure.microsoft.com/pricing/details/cosmos-db/)     |   Откройте [страницу цен](https://azure.microsoft.com/pricing/details/cosmos-db/)        |
|Цена за транзакции в хранилище    |  Откройте [страницу цен](https://azure.microsoft.com/pricing/details/cosmos-db/)         |   Откройте [страницу цен](https://azure.microsoft.com/pricing/details/cosmos-db/)        |

## <a name="benefits-of-transactional-and-analytical-storage"></a>Преимущества транзакционных и аналитических хранилищ

### <a name="no-etl-operations"></a>Нет операций ETL

Традиционные аналитические конвейеры сложны с несколькими этапами, каждый из которых требует операций извлечения-преобразования и загрузки (ETL) на уровнях вычислений и хранилища. Это приводит к комплексным архитектурам обработки данных. Это означает высокую стоимость для нескольких стадий хранения и вычислений, а высокая задержка — из-за больших объемов данных, передаваемых между различными этапами хранения и вычислений.  

Дополнительные издержки на выполнение операций ETL с Azure Cosmos DB отсутствуют. Каждый контейнер Azure Cosmos поддерживает транзакционные и аналитические хранилища, а передача данных между транзакционными и аналитическими подсистемами хранилища выполняется в ядре СУБД и без каких-либо прыжков сети. Результирующие задержки и затраты значительно ниже по сравнению с традиционными аналитическими решениями. И вы получаете единую глобальную распределенную систему хранения как для транзакционных, так и для аналитических рабочих нагрузок.  

### <a name="store-multiple-versions-update-and-query-the-analytical-storage"></a>Хранение нескольких версий, обновление и выполнение запросов к аналитическим хранилищам

Аналитическое хранилище является полностью обновляемым и содержит полный журнал версий всех обновлений транзакций, произошедших в контейнере Azure Cosmos.

Все обновления, внесенные в хранилище транзакций, гарантированно видимы для аналитического хранилища в течение 30 секунд. 

### <a name="globally-distributed-multi-master-analytical-storage"></a>Глобально распределенное аналитическое хранилище с несколькими хозяевами

Если ваша учетная запись Azure Cosmos ограничена одним регионом, хранящиеся в контейнерах данные (в транзакционном и аналитическом хранилище) также ограничены одним регионом. С другой стороны, если учетная запись Azure Cosmos глобально распределена, данные, хранящиеся в контейнерах, также глобально распределены.

Для учетных записей Azure Cosmos, настроенных с несколькими регионами записи, запись в контейнер (как для транзакций, так и для аналитического хранилища) всегда выполняется в локальном регионе, поэтому они выполняются быстро.

Для учетных записей Cosmos или нескольких регионов Azure, независимо от того, какой регион записи (один главный) или несколько регионов записи (также называемых несколькими хозяевами), как транзакционные, так и аналитические операции чтения и запросы выполняются локально в заданном регионе.

### <a name="performance-isolation-between-transactional-and-analytical-workloads"></a>Изоляция производительности между транзакционными и аналитическими рабочими нагрузками

В заданном регионе рабочие нагрузки транзакций работают с транзакционным хранилищем или хранилищами транзакций контейнера. С другой стороны, аналитические рабочие нагрузки работают с аналитическим хранилищем контейнера или столбцом. Два ядра хранилища работают независимо и обеспечивают изоляцию производительности между рабочими нагрузками.

Транзакционные рабочие нагрузки используют подготовленную пропускную способность (RUs). В отличие от транзакционных рабочих нагрузок, пропускная способность аналитических рабочих нагрузок основана на фактическом потреблении. Аналитические рабочие нагрузки потребляют ресурсы по требованию.

## <a name="next-steps"></a>Дальнейшие действия

* [Срок жизни в Azure Cosmos DB](time-to-live.md)
