---
title: Основные сведения о различиях между Azure Cosmos DB NoSQL и реляционными базами данных
description: В этой статье перечисляются различия между NoSQL и реляционными базами данных
author: TheovanKraay
ms.author: thvankra
ms.service: cosmos-db
ms.subservice: cosmosdb-sql
ms.topic: conceptual
ms.date: 12/16/2019
ms.reviewer: sngun
ms.openlocfilehash: d986106337eb1ede2f6d61303d8a4c487bbed276
ms.sourcegitcommit: 3bdeb546890a740384a8ef383cf915e84bd7e91e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2020
ms.locfileid: "93088477"
---
# <a name="understanding-the-differences-between-nosql-and-relational-databases"></a>Основные сведения о различиях между NoSQL и реляционными базами данных
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

В этой статье будут перечислены некоторые ключевые преимущества баз данных NoSQL в реляционных базах данных. Мы также поговорим о некоторых проблемах, возникающих при работе с NoSQL. Подробные сведения о различных существующих хранилищах данных см. в статье Выбор подходящего [хранилища](/azure/architecture/guide/technology-choices/data-store-overview)данных.

## <a name="high-throughput"></a>Высокая пропускная способность

Одной из наиболее очевидных проблем при обслуживании реляционной базы данных является то, что большинство реляционных механизмов применяют блокировки и кратковременные блокировки для обеспечения строгой [семантики ACID](https://en.wikipedia.org/wiki/ACID). Этот подход имеет преимущества в плане обеспечения стабильного состояния данных в базе данных. Однако существуют высокие компромиссы относительно параллелизма, задержки и доступности. В связи с этими фундаментальными ограничениями на архитектуру большие объемы транзакций могут привести к необходимости вручную сегментирования данных. Реализация сегментирования вручную может занять много времени.

В этих сценариях [распределенные базы данных](https://en.wikipedia.org/wiki/Distributed_database) могут предлагать более масштабируемое решение. Однако обслуживание по-прежнему может быть дорогостоящим и длительным. Администраторам может потребоваться выполнить дополнительные действия, чтобы обеспечить прозрачность распределенного характера системы. Они также могут учитывать «отключенную» природу базы данных.

[Azure Cosmos DB](./introduction.md) упрощает эти задачи, развертывая по всему миру во всех регионах Azure. Диапазоны секций могут быть динамически разбиты на разделы, чтобы легко увеличивать базу данных в соответствии с приложением, одновременно обеспечивая высокий уровень доступности. Комплексное управление ресурсами с высокой наработкой и жестко управляемое Облако обеспечивает [поразительнойную задержку](./consistency-levels.md#consistency-levels-and-latency) и предсказуемую производительность. Секционирование полностью управляется, поэтому администраторам не нужно писать код или управлять секциями.

Если транзакционные тома достигли экстремальных уровней, например, количество тысяч транзакций в секунду, следует рассмотреть распределенную базу данных NoSQL. Рассмотрите возможность Azure Cosmos DB для максимальной эффективности, простоты обслуживания и снижения совокупной стоимости владения.

:::image type="content" source="./media/relational-or-nosql/backend-scaled.png" alt-text="Серверная часть" border="false":::

## <a name="hierarchical-data"></a>Иерархические данные

Существует значительное количество случаев использования, когда транзакции в базе данных могут содержать множество связей типа «родители-потомки». Эти связи могут значительно увеличиваться со временем и быть сложными в управлении. Формы [иерархических баз данных](https://en.wikipedia.org/wiki/Hierarchical_database_model) создавались во время 1980-х, но они не были популярными из-за неэффективного использования хранилища. Они также потеряют возможность вычитания, так как [реляционная модель](https://en.wikipedia.org/wiki/Relational_model) "\ Кодд" стала стандартом де факто, используемым практически всеми системными системами управления базами данных.

Однако на сегодняшний день популярность баз данных в стиле документа значительно увеличилась. Эти базы данных могут считаться пересчетом парадигмы иерархической базы данных, что не запрещено затратами на хранение данных на диске. Таким образом, поддержание большого количества сложных связей между сущностями типа "родители-потомки" в реляционной базе данных теперь можно считать антишаблоном по сравнению с современными подходами, ориентированными на документы.

[Воссоздание объектно-ориентированного проектирования](https://en.wikipedia.org/wiki/Object-oriented_design)и [несоответствие](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) , возникающее при объединении его с реляционными моделями, также выделяет относительный шаблон в реляционных базах данных для определенных вариантов использования. В результате могут возникнуть скрытые, но часто существенные затраты на обслуживание. Несмотря на то, что [подходы ORM](https://en.wikipedia.org/wiki/Object-relational_mapping) были изменены для частичного устранения этой проблемы, базы данных, ориентированные на документы,, тем не менее, гораздо лучше, чем объектно-ориентированные При таком подходе разработчики не будут вынуждены зафиксироваться в драйверах ORM или для [ооных ядер](https://en.wikipedia.org/wiki/Object_database), относящихся к конкретным языкам. Если данные содержат много связей типа «родители-потомки» и уровней иерархии, можно использовать базу данных документов NoSQL, например [API-интерфейс SQL Azure Cosmos DB](./introduction.md).

:::image type="content" source="./media/relational-or-nosql/order-orderdetails.jpg" alt-text="Серверная часть":::

## <a name="complex-networks-and-relationships"></a>Сложные сети и отношения

По иронии, учитывая их имя, реляционные базы данных представляют собой менее оптимальное решение для моделирования глубоких и сложных связей. Причина в том, что связи между сущностями фактически не существуют в реляционной базе данных. Они должны вычисляться во время выполнения, а сложные связи требуют декартовые подключения, чтобы разрешить сопоставление с помощью запросов. В результате операции по вычислению связей становятся экспоненциально более затратными в плане вычислений. В некоторых случаях реляционная база данных, пытающаяся управлять такими сущностями, станет непригодной для использования.

Во время появлении реляционных баз данных возникают различные формы сетевых баз данных, но, как и в случае с иерархическими базами данных, эти системы сталкивались с ростом популярности. Снижение скорости внедрения было обусловлено нехваткой вариантов использования и неэффективностью хранилища. В настоящее время ядра СУБД Graph можно рассматривать как повторное появление парадигмы сетевой базы данных. Ключевым преимуществом этих систем является то, что связи хранятся в базе данных как "первый класс граждан". Таким же путем прохождение связей может осуществляться за постоянное время, вместо того чтобы увеличивать сложность во времени при каждом новом соединении или перекрестном продукте.

Если вы обслуживаете сложную сеть связей в базе данных, вам может потребоваться рассмотреть базу данных Graph, например [Azure Cosmos DB API Gremlin](./graph-introduction.md) для управления этими данными.

:::image type="content" source="./media/relational-or-nosql/graph.png" alt-text="Серверная часть":::

Azure Cosmos DB — это многомодельная служба базы данных, которая предоставляет проекцию API для всех основных типов моделей NoSQL; Семейство столбцов, документ, граф и ключ-значение. Уровни API документов [Gremlin (Graph)](./gremlin-support.md) и SQL (Core) полностью совместимы. Это дает преимущества для переключения между различными моделями на уровне программирования. Хранилища графов можно запрашивать в виде как сложных обходов сети, так и транзакций, смоделированных как записи документов в одном хранилище.

## <a name="fluid-schema"></a>Жидкие схемы

Другая конкретная характеристика реляционных баз данных заключается в том, что схемы должны определяться во время разработки. Это дает преимущества в отношении ссылочной целостности и соответствия данных. Однако оно также может быть максимальным по мере роста приложения. Реагирование на изменения схемы в логически отдельных моделях, совместно использующих одну и ту же таблицу или определение базы данных, может значительно усложнить работу с течением времени. Такие сценарии часто используют схему, которая применяется к приложению для управления на основе каждой записи. Для этого требуется, чтобы база данных была "независимо от схемы", а записи были "самоописывающимися" в терминах данных, содержащихся в них.

Если вы управляете данными, структуры которых постоянно меняются с высокой частотой, особенно если транзакции могут поступать из внешних источников, в которых трудно обеспечить соответствие между базами данных, можно рассмотреть более независимый от схемы подход, использующий управляемую службу базы данных NoSQL, например Azure Cosmos DB.

## <a name="microservices"></a>Микрослужбы

Шаблон [микрослужб](https://en.wikipedia.org/wiki/Microservices) значительно увеличился в последние годы. Этот шаблон имеет корни в [архитектуре, ориентированной на службы](https://en.wikipedia.org/wiki/Service-oriented_architecture). Стандарт де-факто для передачи данных в современных архитектурах микрослужб — это [JSON](https://en.wikipedia.org/wiki/JSON), который также является носителем для большинства баз данных NoSQL, ориентированных на документы. Благодаря этому документ NoSQL хранит гораздо более гладко, как сохраняемость и синхронизация (с использованием [шаблонов источников событий](https://en.wikipedia.org/wiki/Event-driven_architecture)) в сложных реализациях микрослужб. Более сложные реляционные базы данных могут быть намного сложнее поддерживать в этих архитектурах. Это обусловлено большим объемом преобразований, необходимых для состояния и синхронизации между API. Azure Cosmos DB в частности, имеет ряд функций, которые делают его еще более плавным для архитектур микрослужб на основе JSON, чем многие базы данных NoSQL:

* вариант использования чистого типа данных JSON
* механизм JavaScript и [API запросов](./javascript-query-api.md) , встроенные в базу данных.
* штатный [канал изменений](./change-feed.md) , на который клиенты могут подписываться для получения уведомлений об изменениях в контейнере.

## <a name="some-challenges-with-nosql-databases"></a>Некоторые трудности с базами данных NoSQL

Хотя при реализации баз данных NoSQL есть некоторые очевидные преимущества, существуют некоторые проблемы, которые следует учитывать. При работе с реляционной моделью они могут присутствовать в одном и том же степени:

* транзакции с множеством связей указывают на одну и ту же сущность.
* транзакции, для которых необходима строгая согласованность во всем наборе данных.

Глядя на первую задачу, правило-of-Thumb в базах данных NoSQL обычно денормализацию, которая, как было написано ранее, создает более эффективные операции чтения в распределенной системе. Однако при таком подходе возникают некоторые проблемы проектирования. Возьмем пример продукта, который связан с одной категорией и несколькими тегами:

:::image type="content" source="./media/relational-or-nosql/many-joins.png" alt-text="Серверная часть":::

Лучшим подходом в базе данных документов NoSQL будет Денормализация имен категорий и тегов непосредственно в «документе продукта». Однако, чтобы обеспечить синхронизацию категорий, тегов и продуктов, параметры проектирования, облегчающие эту задачу, применяют сложность обслуживания, так как данные дублируются по нескольким записям в продукте, а не просто обновляются в связи «один ко многим» и соединение для получения данных. 

Компромисс заключается в том, что операции чтения более эффективны в денормализованной записи и становятся все более эффективными по мере увеличения числа концептуально соединяемых сущностей. Тем не менее, так же, как повышение эффективности чтения с увеличением числа соединяемых сущностей в денормализованной записи, это также усложняет обслуживание синхронизации сущностей. Одним из способов устранения этого компромисса является создание [гибридной модели данных](./modeling-data.md#hybrid-data-models).

Хотя в базах данных NoSQL доступно больше гибкости для решения этих компромиссов, повышенная гибкость также может привести к повышению уровня проектирования. Ознакомьтесь со статьей [как моделировать и секционировать данные на Azure Cosmos DB с помощью практического примера](./how-to-model-partition-example.md), который включает подход к хранению [денормализованных данных пользователя в синхронизации](./how-to-model-partition-example.md#denormalizing-usernames) , где пользователи не только находятся в разных разделах, но и в разных контейнерах.

В отношении строгой согласованности это случается редко, так как оно потребуется для всего набора данных. Однако в тех случаях, когда это необходимо, это может быть трудной задачей в распределенных базах данных. Чтобы обеспечить строгую согласованность, данные необходимо синхронизировать во всех репликах и регионах, прежде чем разрешить клиентам читать их. Это может увеличить задержку операций чтения.

Опять же, Azure Cosmos DB предлагает больше гибкости, чем реляционные базы данных, для различных компромиссов, которые важны здесь, но для небольших реализаций такой подход может добавить дополнительные рекомендации по проектированию. Дополнительные сведения по этой теме см. в нашей статье о [согласованности, доступности и компромиссах производительности](./consistency-levels.md) .

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как управлять учетной записью Azure Cosmos и другими концепциями:

* [Управление учетными записями базы данных в Azure Cosmos DB](how-to-manage-database-account.md)
* [Глобальное распределение](distribute-data-globally.md)
* [Уровни согласованности](consistency-levels.md)
* [Работа с базами данных, контейнерами и элементами Azure Cosmos](account-databases-containers-items.md)
* [Безопасный доступ к учетной записи Azure Cosmos DB с использованием конечной точки службы виртуальной сети Azure](how-to-configure-vnet-service-endpoint.md)
* [Поддержка брандмауэра для Azure Cosmos DB](how-to-configure-firewall.md)
* [Добавление и удаление регионов из учетной записи базы данных](how-to-manage-database-account.md)
* [Соглашение об уровне обслуживания для Azure Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db/v1_2/)