---
title: Секционирование и горизонтальное масштабирование в Azure Cosmos DB
description: Дополнительные сведения о работе секционирования в Azure Cosmos DB, как настроить секционирование и ключей секций и как выбрать правильный ключ секции для вашего приложения.
ms.author: rimman
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 03/31/2019
ms.openlocfilehash: cf454d6504f0433d7ac7ca883982ae317b14f814
ms.sourcegitcommit: c174d408a5522b58160e17a87d2b6ef4482a6694
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59797829"
---
# <a name="partitioning-and-horizontal-scaling-in-azure-cosmos-db"></a>Секционирование и горизонтальное масштабирование в Azure Cosmos DB

В этой статье объясняется физических и логических секциях в Azure Cosmos DB. Здесь также рассматриваются рекомендации для масштабирования и секционирования. 

## <a name="logical-partitions"></a>Логические секции

Логический раздел состоит из набора элементов, имеющих один и тот же ключ секции. Например, в контейнере, где все элементы содержат `City` свойство, можно использовать `City` как ключ раздела для контейнера. Группы элементов с определенными значениями для `City`, такие как `London`, `Paris`, и `NYC`, образуют отдельные логические секции. Не нужно беспокоиться об удалении секции при удалении базовых данных.

В Azure Cosmos DB контейнер — это фундаментальная единица масштабируемости. Данные, которые добавляются к контейнеру и пропускной способности, которая подготавливается для контейнера, автоматически (по горизонтали) секционированных распределяется между набором логические разделы. Данных и пропускной способности секционируются на основе ключа секции, указываемые для контейнера Azure Cosmos. Дополнительные сведения см. в разделе [создает контейнер Azure Cosmos](how-to-create-container.md).

Логический раздел также определяет области транзакций базы данных. Вы можете обновить элементы в логической секции, с помощью [транзакции с изоляцией моментального снимка](database-transactions-optimistic-concurrency.md). Когда новые элементы добавляются в контейнер, новые логические разделы прозрачно создаются системой.

## <a name="physical-partitions"></a>Физические секции

Контейнер Azure Cosmos масштабируется путем распределения данных и пропускной способности между большим количеством логических разделов. На внутреннем уровне одну или несколько логических секций, сопоставляются с физической секции, который состоит из набора реплик, называемый также [ *реплика*](global-dist-under-the-hood.md). Каждая реплика. Настройка узлов экземпляра ядра СУБД Azure Cosmos DB. Набор реплик делает данные, хранящиеся в физической секции устойчивых, высокой доступности и согласованность. Физическая секция поддерживает максимальный объем хранилища и единицами запросов (ЕЗ). Каждая реплика, составляющего физической секции наследует квота хранилища секции. Все реплики физическая секция вместе поддерживают пропускную способность, выделенную для физической секции. 

На следующем рисунке показано, как логические секции сопоставляются с физическими, которые распределяются глобально:

![Изображение, которое демонстрируется секционирование Azure Cosmos DB](./media/partition-data/logical-partitions.png)

Пропускная способность для контейнера равномерно распределяется между физическими секциями. Макет ключа секции, не равномерно распределить запросы пропускной способности может создать разделы «горячие». Горячие разделы может быть вызвано в ограничения скорости и неэффективное использование подготовленной пропускной способности и более высокими затратами.

В отличие от логических, физические секции являются внутренней реализацией системы. Невозможно контролировать размер, расположение и число физических секций, а вы не можете управлять сопоставление логических разделов и физических секций. Тем не менее, можно управлять количеством логические разделы и распределение данных, рабочей нагрузки и пропускной способности, [клавиши правильной логической секции](partitioning-overview.md#choose-partitionkey).

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [выбору ключа секции](partitioning-overview.md#choose-partitionkey).
* Дополнительные сведения о подготовленной пропускной способности в базе данных Azure Cosmos DB см. в [этой статье](request-units.md).
* Дополнительные сведения о глобальном распределении в базе данных Azure Cosmos DB см. в [этой статье](distribute-data-globally.md).
* Подробнее о [подготовке пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md).
* Подробнее о [подготовке пропускной способности для базы данных Azure Cosmos](how-to-provision-database-throughput.md).
