---
title: Секционирование в базе данных Azure Cosmos DB
description: Общие сведения о секционировании в Azure Cosmos DB
author: aliuy
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 10/30/2018
ms.author: andrl
ms.openlocfilehash: cc4b165b4fa04e22c9c57547df1657a0c6fc4537
ms.sourcegitcommit: da3459aca32dcdbf6a63ae9186d2ad2ca2295893
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2018
ms.locfileid: "51263379"
---
# <a name="partitioning-in-azure-cosmos-db"></a>Секционирование в базе данных Azure Cosmos DB

Секционирование — это метод, используемый в Cosmos DB для масштабирования отдельных контейнеров в базе данных в соответствии с требованиями к производительности приложения. При использовании секционирования элементы в контейнере разделяются на отдельные подмножества, называемые логическими секциями. Логические секции создаются на основе значения свойства ключа секции, связанного с каждым элементом.

Логическая секция — это отдельное подмножество элементов в контейнере. Элементы в логической секции определяются значением ключа секции, которое используется для всех элементов в логической секции.  Например, рассмотрим контейнер, содержащий документы, в каждом из которых есть свойство `UserID`.  Если в контейнере в качестве ключа секции для элементов используется свойство `UserID` и есть 1000 уникальных значений `UserID`, для контейнера будет создано 1000 логических секций.

У каждого элемента в контейнере есть **ключ секции**, определяющий **логическую секцию** элемента, а также **идентификатор элемента** (который является уникальным в пределах логической секции).  **Индекс** элемента уникально идентифицирует его и образуется путем объединения ключа секции и идентификатора элемента.

Выбор ключа секции — это важное решение, которое будет влиять на производительность приложения.  Подробные инструкции см. в разделе [Выбор ключа секции](partitioning-overview.md#choose-partitionkey).

## <a name="logical-partition-management"></a>Управление логическими секциями

Cosmos DB прозрачно и автоматически управляет размещением логических секций в физических (серверная инфраструктура) для эффективного удовлетворения требований к масштабируемости и производительности контейнера. По мере увеличения требований к пропускной способности и хранилищу приложения Cosmos DB перемещает логические секции, чтобы автоматически распределить нагрузку на большее количество серверов. Дополнительные сведения о том, как Cosmos DB управляет секциями, см. в разделе [Логические секции](partition-data.md). Для создания или запуска приложений эти сведения необязательны.

Cosmos DB распределяет логические секции между физическими путем секционирования на основе хэша.  Значение ключа секции элемента хэширует Cosmos DB, а хэшированный результат определяет физическую секцию. Cosmos DB распределяет пространство хэшей ключей секций равномерно по N физическим секциям.

Запросы, осуществляющие доступ к данным в одной секции, более экономичны, чем запросы, осуществляющие доступ к нескольким секциям. Транзакции (в хранимых процедурах или триггерах) допустимы только для элементов в одной логической секции.  

## <a id="choose-partitionkey"></a>Выбор ключа секции

При выборе ключа секции необходимо учесть следующие сведения:

* Для одной логической секции предоставляется объем хранилища с верхним пределом в 10 ГБ.  

* Секционированные контейнеры настраиваются с минимальной пропускной способностью в 400 ЕЗ/с. Запросы к одному и тому же ключу секции не могут превышать пропускную способность, выделенную для секции. Если они превышают выделенную пропускную способность, запросы будут ограничены по скорости. Поэтому важно выбрать ключ секции, который не создает "горячие точки" в приложении.

* Выберите ключ секции, который равномерно распределяет рабочую нагрузку по всем секциям и по времени.  Выбранный ключ секции должен сбалансировать необходимость в эффективных запросах и/или транзакциях с целью распределения элементов по нескольким секциям, чтобы обеспечить масштабируемость.

* Выберите ключ секции с широким диапазоном значений и доступом к шаблонам, равномерно распределенным по логическим секциям. Основная идея заключается в распределении данных и действий в контейнере по набору логических секций, чтобы обеспечить возможность распределения ресурсов для хранилища данных и пропускной способности по логическим секциям.

* Кандидаты для ключей секций могут включать свойства, которые часто встречаются в качестве фильтра в запросах. Запросы можно эффективно перенаправлять путем включения ключа секции в предикат фильтра.

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о [выборе ключа секции](partitioning-overview.md#choose-partitionkey).
* Дополнительные сведения о [секциях](partition-data.md).
* Дополнительные сведения о подготовленной пропускной способности в базе данных Azure Cosmos DB см. в [этой статье](request-units.md).
* Узнайте больше о [глобальном распределении в базе данных Azure Cosmos DB](distribute-data-globally.md).
