---
title: Преимущества Azure Synapse Link для Azure Cosmos DB и как ими воспользоваться
description: Дополнительные сведения о Azure Synapse Link для Azure Cosmos DB. Synapse Link позволяет запускать аналитику почти в реальном времени (HTAP) с помощью Azure Synapse Analytics по операционным данным в Azure Cosmos DB.
author: Rodrigossz
ms.author: rosouz
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 09/22/2020
ms.reviewer: sngun
ms.openlocfilehash: 0e02f0bf1bb9646a644a40279a8bae930de34c0b
ms.sourcegitcommit: f796e1b7b46eb9a9b5c104348a673ad41422ea97
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/30/2020
ms.locfileid: "91568001"
---
# <a name="what-is-azure-synapse-link-for-azure-cosmos-db-preview"></a>Что такое Azure Synapse Link для Azure Cosmos DB (предварительная версия)?

> [!IMPORTANT]
> Решение Azure Synapse Link для Azure Cosmos DB сейчас доступно в предварительной версии. Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Дополнительные сведения см. в статье [Дополнительные условия использования Предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Azure Synapse Link для Azure Cosmos DB — это облачная гибридная транзакционно-аналитическая возможность обработки (HTAP), которая позволяет вам выполнять аналитику операционных данных в Azure Cosmos DB почти в реальном времени. Azure Synapse Link обеспечивает тесную эффективную интеграцию между Azure Cosmos DB и Azure Synapse Analytics.

При использовании [аналитического хранилища Azure Cosmos DB](analytical-store-introduction.md), полностью изолированного хранилища столбцов, Azure Synapse Link, не позволяет реализовать аналитику извлечения, преобразования и загрузки (ETL) в [Azure Synapse Analytics](../synapse-analytics/overview-what-is.md) к вашим операционным данным при заданном масштабе. Бизнес-аналитики, инженеры и специалисты по обработке и анализу данных теперь могут использовать Synapse Spark или Synapse SQL для работы в режиме реального времени с конвейерами, аналитики и машинного обучения. Этого можно добиться, не влияя на производительность транзакционных рабочих нагрузок на Azure Cosmos DB. 

На следующем рисунке показана интеграция Azure Synapse Link с Azure Cosmos DB и Azure Synapse Analytics: 

:::image type="content" source="./media/synapse-link/synapse-analytics-cosmos-db-architecture.png" alt-text="Схема архитектуры для интеграции Azure Synapse Analytics с Azure Cosmos DB" border="false":::

## <a name="benefits"></a><a id="synapse-link-benefits"></a> Преимущества

Чтобы анализировать большие наборы операционных данных и свести к минимуму влияние на производительность критически важных рабочих нагрузок, обычно операционные данные в Azure Cosmos DB извлекаются и обрабатываются конвейерами извлечения и преобразования (ETL). Для конвейеров ETL требуется перемещение многих уровней данных, что значительно усложняет рабочую нагрузку и влияет на производительность транзакций. Также увеличивается задержка для анализа операционных данных от начального момента.

По сравнению с традиционными решениями на основе ETL, Azure Synapse Link для Azure Cosmos DB предлагает следующие преимущества:  

### <a name="reduced-complexity-with-no-etl-jobs-to-manage"></a>Уменьшение сложности без необходимости управления заданиями ETL

Azure Synapse Link позволяет получить прямой доступ к аналитическому хранилищу Azure Cosmos DB с помощью Azure Synapse Analytics без сложного перемещения данных. Любые обновления, вносимые в операционные данные, отображаются в аналитическом хранилище почти в реальном времени без заданий ETL или веб-канала изменений. Вы можете запустить крупномасштабную аналитику для аналитического хранилища из Synapse Analytics без дополнительного преобразования данных.

### <a name="near-real-time-insights-into-your-operational-data"></a>Анализ операционных данных почти в реальном времени

Теперь вы можете получать подробные сведения о операционных данных почти в реальном времени, используя Azure Synapse Link. Системы на основе ETL обычно имеют большую задержку при анализе операционных данных из-за большого количества уровней, на которых необходимо извлекать, преобразовывать и загружать операционные данные. С помощью собственной интеграции аналитического хранилища Azure Cosmos DB с Azure Synapse Analytics можно анализировать операционные данные почти в реальном времени, обеспечивая новые бизнес-сценарии. 

### <a name="no-impact-on-operational-workloads"></a>Без влияния на операционные рабочие нагрузки

С помощью Azure Synapse Link можно выполнять аналитические запросы к аналитическому хранилищу Azure Cosmos DB (отдельному хранилищу столбцов), в то время как транзакционные операции обрабатываются с помощью подготовленных ресурсов для транзакционной рабочей нагрузки (транзакционное хранилище на основе строк).  Аналитическая рабочая нагрузка обрабатывается независимо от трафика транзакционной рабочей нагрузки без задействования каких-либо ресурсов, подготовленных для операционных данных.

### <a name="optimized-for-large-scale-analytics-workloads"></a>Оптимизация для крупномасштабных аналитических рабочих нагрузок

Аналитическое хранилище Azure Cosmos DB оптимизировано для обеспечения масштабируемости, эластичности и производительности для аналитических рабочих нагрузок без какой-либо зависимости от времени выполнения вычислений. Технология хранения самостоятельно оптимизирует аналитические рабочие нагрузки. Благодаря встроенной поддержке Azure Synapse Analytics доступ к этому уровню хранилища обеспечивает простоту и высокую производительность.

### <a name="cost-effective"></a>Рентабельность

С помощью Azure Synapse Link вы можете получить экономичное и полностью управляемое решение для операционной аналитики. Он исключает дополнительные уровни хранилища и вычислений, необходимых в традиционных конвейерах ETL для анализа операционных данных. 

Аналитическое хранилище Azure Cosmos DB соответствует модели ценообразования в зависимости от потребления, основанной на хранилище данных и выполнении запросов и операций чтения и записи. Пропускную способность, как для транзакционных рабочих нагрузок, подготавливать не требуется. Доступ к данным с помощью высокоэластичных подсистем вычислений из Azure Synapse Analytics обеспечивает снижение общей стоимости хранения и вычислений.


### <a name="analytics-for-locally-available-globally-distributed-multi-region-writes"></a>Аналитика для локально доступной, глобальной распределенной записи в нескольких регионах

Это позволяет эффективно выполнять аналитические запросы по отношению к ближайшей региональной копии ваших данных в Azure Cosmos DB. Azure Cosmos DB предоставляет современные возможности для выполнения глобальных распределенных аналитических рабочих нагрузок вместе с транзакционными рабочими нагрузками в режиме "активный — активный".

## <a name="enable-htap-scenarios-for-your-operational-data"></a>Включение сценариев HTAP для операционных данных

Synapse Link объединяет аналитическое хранилище Azure Cosmos DB с поддержкой среды выполнения Azure Synapse Analytics. Такая интеграция позволяет создавать собственные облачные решения HTAP (гибридной транзакционной/аналитической обработки), которые формируют аналитические данные на основе обновлений в режиме реального времени для операционных данных из больших наборов данных. Она позволяет реализовать новые бизнес-сценарии для создания оповещений на основе тенденций, создания панелей мониторинга почти в реальном времени и бизнес-опыта на основе поведения пользователя.

### <a name="azure-cosmos-db-analytical-store"></a>Аналитическое хранилище Azure Cosmos DB

Аналитическое хранилище Azure Cosmos DB — это представление операционных данных в Azure Cosmos DB, ориентированное на столбцы. Это аналитическое хранилище подходит для быстрого и экономичного выполнения запросов к большим наборам операционных данных без копирования данных и влияния на производительность транзакционных рабочих нагрузок.

Аналитическое хранилище автоматически берет на себя операции вставки, обновления и удаления в транзакционных рабочих нагрузках почти в реальном времени в качестве полностью управляемой возможности ("автоматическая синхронизация") в Azure Cosmos DB. Нет необходимости в канале изменений или ETL. 

Если вы используете глобально распределенную учетную запись Azure Cosmos DB, после включения аналитического хранилища для контейнера он будет доступен во всех регионах для этой учетной записи. Дополнительные сведения об аналитическом хранилище см. в статье [Обзор аналитического хранилища Azure Cosmos DB](analytical-store-introduction.md).

### <a name="integration-with-azure-synapse-analytics"></a><a id="synapse-link-integration"></a>Интеграция с Azure Synapse Analytics

С помощью Synapse Link теперь можно подключаться непосредственно к контейнерам Azure Cosmos DB из Azure Synapse Analytics и обращаться к аналитическому хранилищу без отдельных соединителей. Azure синапсе Analytics сейчас поддерживает ссылку синапсе с [синапсе Apache Spark](../synapse-analytics/spark/apache-spark-concepts.md) и [синапсе SQL Server](../synapse-analytics/sql/on-demand-workspace-overview.md).

Данные из аналитического хранилища Azure Cosmos DB можно запрашивать одновременно, при этом взаимодействие выполняется с разным временем выполнения аналитики, поддерживаемой Azure Synapse Analytics. Для анализа операционных данных не требуются дополнительные преобразования данных. Вы можете запрашивать и анализировать данные аналитического хранилища с помощью следующих средств.

* Synapse Apache Spark с полной поддержкой Scala, Python, SparkSQL и C# (Synapse Spark — это основное средство для инжиниринга, обработки и анализа данных);

* бессерверная среда SQL с поддержкой языка T-SQL и знакомых средств бизнес-аналитики (например, Power BI Premium и т. п.).

> [!NOTE]
> Из Azure Synapse Analytics можно получить доступ к аналитическим и транзакционным хранилищам в контейнере Azure Cosmos DB. Тем не менее, если вы хотите выполнять крупномасштабную аналитику или сканируете операционные данные, рекомендуется использовать аналитическое хранилище, чтобы избежать снижения производительности в транзакционных рабочих нагрузках.

> [!NOTE]
> Вы можете запустить аналитику с низкой задержкой в регионе Azure, подключив контейнер Azure Cosmos DB к среде выполнения Synapse в этом регионе.

Такая интеграция позволяет выполнять следующие сценарии HTAP для разных пользователей:

* Инженер бизнес-аналитики, желающий моделировать и публиковать Power BI отчет для доступа к динамическим рабочим данным в Azure Cosmos DB непосредственно через синапсе SQL.

* Аналитик данных, которому нужны аналитические сведения из операционных данных в контейнере Azure Cosmos DB, запрошенные с помощью Synapse SQL, и масштабные данные, чтобы объединить эти результаты с другими источниками данных.

* Аналитик данных, желающий использовать Synapse Spark для поиска признака, чтобы улучшить свою модель и обучить эту модель без выполнения сложного инжиниринга данных. Они также могут записывать результаты моделирования в Azure Cosmos DB для оценки данных в режиме реального времени с помощью Spark Synapse.

* Разработчик данных, желающий сделать данные доступными для потребителей, создавая таблицы SQL или Spark на контейнерах Azure Cosmos DB без ручных процессов ETL.

Дополнительные сведения о поддержке Azure Cosmos DB в среде выполнения Azure Synapse Analytics см. в статье [Поддержка Azure Synapse Analytics для Cosmos DB](../synapse-analytics/synapse-link/concept-synapse-link-cosmos-db-support.md).

## <a name="when-to-use-azure-synapse-link-for-azure-cosmos-db"></a>Когда нужно использовать Azure Synapse Link для Azure Cosmos DB

Synapse Link рекомендуется в следующих случаях:

* Если вы пользуетесь Azure Cosmos DB и хотите реализовать аналитику, бизнес-аналитику и машинное обучение на операционных данных. В таких случаях Synapse Link предоставляет более интегрированную аналитическую среду, не влияя на подготовленную пропускную способность хранилища транзакций. Пример:

  * Если вы используете аналитику или бизнес-аналитику на операционных данных Azure Cosmos DB напрямую с помощью отдельных соединителей, или

  * Если вы используете процессы ETL для извлечения операционных данных в отдельную систему аналитики.
 
В таких случаях Synapse Link предоставляет более интегрированную аналитическую среду, не влияя на подготовленную пропускную способность хранилища транзакций.

Synapse Link не рекомендуется, если вы ищете традиционные требования к хранилищу данных, такие как высокая степень параллелизма, управление рабочей нагрузкой и сохранение статистических выражений в нескольких источниках данных. Дополнительные сведения см. в разделе [Распространенные сценарии, которые могут быть реализованы с помощью Azure Synapse Link для Azure Cosmos DB](synapse-link-use-cases.md).

## <a name="limitations"></a>Ограничения

* Ссылка Azure синапсе поддерживается для API Azure Cosmos DB SQL (Core) и API Azure Cosmos DB для MongoDB.

* Сейчас аналитическое хранилище можно включить только для новых контейнеров. Чтобы использовать аналитическое хранилище для существующих контейнеров, перенесите данные из существующих контейнеров в новые контейнеры с помощью [Azure Cosmos DB средств миграции](cosmosdb-migrationchoices.md). Вы можете включить ссылку синапсе на новых и существующих учетных записях Azure Cosmos DB.

* Доступ к аналитическому хранилищу Azure Cosmos DB с бессерверным Synapse SQL в настоящее время находится на этапе предварительной версии. Чтобы запросить доступ, отправьте сообщение электронной почты [команде Azure Cosmos DB](mailto:cosmosdbsynapselink@microsoft.com).

* В предварительной версии для учетных записей базы данных с включенной связью синапсе резервное копирование и восстановление контейнеров не поддерживается. Если у вас есть рабочие нагрузки, для которых требуются функции резервного копирования и восстановления, мы рекомендуем не включать ссылку синапсе для этих учетных записей базы данных. 

* Доступ к аналитическому хранилищу Azure Cosmos DB с подготовленной Synapse SQL в настоящее время недоступен.

## <a name="pricing"></a>Цены

Модель выставления счетов по Azure Synapse Link включает в себя затраты, связанные с использованием аналитического хранилища Azure Cosmos DB и среды выполнения Synapse. Дополнительные сведения см. в статьях [Цены на аналитическое хранилище Azure Cosmos DB](analytical-store-introduction.md#analytical-store-pricing) и [Цены на Azure Synapse Analytics](https://azure.microsoft.com/pricing/details/synapse-analytics/).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в следующих документах:

* [Общие сведения об аналитическом хранилище Azure Cosmos DB (предварительная версия)](analytical-store-introduction.md)

* [Начало работы с Azure Synapse Link для Azure Cosmos DB](configure-synapse-link.md)
 
* [Что поддерживается в среде выполнения Azure Synapse Analytics](../synapse-analytics/synapse-link/concept-synapse-link-cosmos-db-support.md)

* [Часто задаваемые вопросы об Azure Synapse Link для Azure Cosmos DB](synapse-link-frequently-asked-questions.md)

* [Варианты использования Azure Synapse Link для Azure Cosmos DB](synapse-link-use-cases.md)
