---
title: Обеспечение непрерывности бизнес-процессов & аварийное восстановление с помощью парных регионов Azure
description: Обеспечение устойчивости приложений с помощью пар региональных стандартов Azure
author: jpconnock
manager: angrobe
ms.service: multiple
ms.topic: conceptual
ms.date: 03/03/2020
ms.author: jeconnoc
ms.openlocfilehash: 778943dad9a04632797d5d9165b6f1f9a3eb9850
ms.sourcegitcommit: 7b25c9981b52c385af77feb022825c1be6ff55bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79248259"
---
# <a name="business-continuity-and-disaster-recovery-bcdr-azure-paired-regions"></a>Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure

## <a name="what-are-paired-regions"></a>Что такое пары регионов?

Регион Azure состоит из набора центров обработки данных, развернутых в пределах периметра с заданной задержкой и подключенных через выделенную сеть с низкой задержкой.  Это гарантирует, что службы Azure в рамках региона Azure предлагают максимально возможную производительность и безопасность.  

География Azure определяет область мира, содержащую по крайней мере один регион Azure. География определяют дискретный рыночный, обычно содержащий два или более региона, которые сохраняют местонахождение данных и границы соответствия.  Дополнительные сведения о глобальной инфраструктуре Azure см. [здесь](https://azure.microsoft.com/global-infrastructure/regions/) .

Пара региональных стандартов состоит из двух регионов в пределах одного географического элемента. Azure сериализует обновления платформы (плановое обслуживание) по региональным парам, гарантируя, что каждый раз в каждой паре обновляется только один регион. Если сбой влияет на несколько регионов, по крайней мере один регион каждой пары будет определять приоритет для восстановления.

![AzureGeography](./media/best-practices-availability-paired-regions/GeoRegionDataCenter.png)

Некоторые службы Azure используют другие преимущества парных регионов для обеспечения непрерывности бизнес-процессов и защиты от потери данных.  Azure предоставляет несколько [решений хранилища](./storage/common/storage-redundancy.md#redundancy-in-a-secondary-region) , использующих парные регионы для обеспечения доступности данных. Например, [геоизбыточное хранилище Azure](./storage/common/storage-redundancy.md#geo-redundant-storage) (GRS) автоматически реплицирует данные в дополнительный регион, гарантируя, что данные являются устойчивыми даже в случае, если основной регион не может быть восстановлен. 

Обратите внимание, что не все службы Azure автоматически реплицируют данные, а также не все службы Azure автоматически переходят из неисправного региона в свою пару.  В таких случаях клиент должен настроить восстановление и репликацию.

## <a name="can-i-select-my-regional-pairs"></a>Можно ли выбрать пары региональных стандартов?

Нет. Некоторые службы Azure зависят от национальных пар, таких как [избыточное хранилище](./storage/common/storage-redundancy.md)Azure. Эти службы не позволяют создавать новые национальные пары.  Аналогично, так как Azure управляет плановым обслуживанием и приоритетом восстановления для национальных пар, вы не можете определить собственные пары региональных стандартов, чтобы воспользоваться преимуществами этих служб. Однако вы можете создать собственное решение аварийного восстановления, создав службы в любом количестве регионов и используя службы Azure для их связывания. 

Например, можно использовать службы Azure, такие как [AzCopy](./storage/common/storage-use-azcopy-v10.md) , чтобы запланировать резервное копирование данных в учетную запись хранения в другом регионе.  С помощью [Azure DNS и диспетчера трафика Azure](./networking/disaster-recovery-dns-traffic-manager.md)клиенты могут спроектировать устойчивую архитектуру для своих приложений, которые будут сохраняться в случае потери основного региона.

## <a name="am-i-limited-to-using-services-within-my-regional-pairs"></a>Ограничено ли использование служб в парах "региональные стандарты"?

Нет. Хотя данная служба Azure может полагаться на пару региональных стандартов, вы можете размещать другие службы в любом регионе, удовлетворяющем потребностям вашего бизнеса.  Решение для хранения GRS Azure может связывать данные в Канаде с коллегой в Канаде, используя ресурсы вычислений, расположенные в восточной части США.  

## <a name="must-i-use-azure-regional-pairs"></a>Нужно ли использовать местные пары Azure?

Нет. Клиенты могут использовать службы Azure для проектирования отказоустойчивой службы, не полагаясь на местные пары Azure.  Однако рекомендуется настроить аварийное восстановление бизнес-процессов (BCDR) для разных региональных пар, чтобы получить преимущества от [изоляции](./security/fundamentals/isolation-choices.md) и повысить [доступность](./availability-zones/az-overview.md). Для приложений, поддерживающих несколько активных регионов, рекомендуется использовать оба региона в паре регионов, где это возможно. Это обеспечивает оптимальную доступность приложений и минимальное время восстановления в случае аварии. При возможности Разработайте приложение для обеспечения [максимальной устойчивости](https://docs.microsoft.com/azure/architecture/framework/resiliency/overview) и простоты [аварийного восстановления](https://docs.microsoft.com/azure/architecture/framework/resiliency/backup-and-recovery).

## <a name="azure-regional-pairs"></a>Пары региональных стандартов Azure

| Geography | Региональная пара A | Региональная пара B  |
|:--- |:--- |:--- |
| Азиатско-Тихоокеанский регион |Восточная Азия (Гонконг) | Юго-Восточная Азия (Сингапур) |
| Австралия |Восточная Австралия |Юго-Восточная часть Австралии |
| Австралия |Центральная Австралия |Центральная Австралия 2 |
| Бразилия |Южная Бразилия |Центрально-южная часть США |
| Canada |Центральная Канада |Восточная Канада |
| Китай |Северный Китай |Восточный Китай|
| Китай |Северный Китай 2 |Восточный Китай 2|
| Европа |Северная Европа (Ирландия) |Западная Европа (Нидерланды) |
| Франция |Центральная Франция|Южная Франция|
| Германия |Центральная Германия |Северо-восточная Германия |
| Индия |Центральная Индия |Южная Индия |
| Индия |Западная Индия |Южная Индия |
| Япония |Восточная Япония |Западная Япония |
| Корея |Республика Корея, центральный регион |Республика Корея, южный регион |
| Северная Америка |Восточная часть США |западная часть США |
| Северная Америка |восточная часть США 2 |Центральная часть США |
| Северная Америка |Центрально-северная часть США |Центрально-южная часть США |
| Северная Америка |западная часть США 2 |центрально-западная часть США |
| Норвегия | Восточная Норвегия; | Западная Норвегия |
| ЮАР | Северная часть ЮАР; |Западная Южная Африка |
| Швейцария | Северная Швейцария |Западная Швейцария |
| Соединенное Королевство |западная часть Соединенного Королевства |южная часть Соединенного Королевства |
| ОАЭ | Северная часть ОАЭ; | Центральная часть ОАЭ.
| Министерства обороны США |восточный регион US DoD |центральный регион US DoD |
| US (США) |US Gov (Аризона) |US Gov (Техас) |
| US (США) |US Gov (Айова) |US Gov (Вирджиния) |
| US (США) |US Gov (Вирджиния) |US Gov (Техас) |

> [!Important]
> - Западная Индия объединяется только в одном направлении. Дополнительный регион для региона "Западная Индия" — "Южная Индия", а дополнительный регион для региона "Южная Индия — "Центральная Индия".
> - Южная Бразилия уникален, так как он связан с регионом, находящимся за пределами его географического объекта. Дополнительный регион Южная Бразилия — Юго-Центральная часть США. Дополнительный регион Юго-центрального региона США не Южная Бразилия.


## <a name="an-example-of-paired-regions"></a>Пример пар регионов
На рисунке ниже показано гипотетическое приложение, использующее национальные пары для аварийного восстановления. Зеленые цифры выделяют действия между регионами для трех служб Azure (вычислений, хранилища и базы данных Azure) и их настройки для репликации между регионами. Уникальные преимущества развертывания в парных регионах выделены оранжевыми числами.

![Обзор преимуществ парных регионов](./media/best-practices-availability-paired-regions/PairedRegionsOverview2.png)

Рис. 2. Гипотетическая пара регионов Azure

## <a name="cross-region-activities"></a>Межрегиональные действия
Как показано на рисунке 2.

1. **Azure Compute (IaaS)** — необходимо заранее подготавливать дополнительные ресурсы, чтобы обеспечить доступность ресурсов в другом регионе во время аварии. Дополнительные сведения см. в [техническом руководстве по обеспечению устойчивости в Azure](https://github.com/uglide/azure-content/blob/master/articles/resiliency/resiliency-technical-guidance.md). 

2. Служба **хранилища Azure** . Если вы используете управляемые диски, Узнайте о [резервных копиях в разных регионах](https://docs.microsoft.com/azure/architecture/resiliency/recovery-loss-azure-region#virtual-machines) с Azure Backup и [репликация виртуальных машин](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-tutorial-enable-replication) из одного региона в другой с Azure Site Recovery. Если вы используете учетные записи хранения, геоизбыточное хранилище (GRS) настраивается по умолчанию при создании учетной записи хранения Azure. При использовании GRS данные реплицируются трижды в основном регионе и трижды в дополнительном. Дополнительные сведения см. в статье [Репликация службы хранилища Azure](storage/common/storage-redundancy.md).

3. **База данных SQL Azure** — с помощью Георепликации базы данных SQL Azure можно настроить асинхронную репликацию транзакций в любой регион мира. Однако рекомендуется развертывать эти ресурсы в парном регионе для большинства сценариев аварийного восстановления. Дополнительные сведения см. в статье [Обзор: активная георепликация для базы данных SQL Azure](sql-database/sql-database-geo-replication-overview.md).

4. **Azure Resource Manager** -диспетчер ресурсов по сути обеспечивает логическую изоляцию компонентов между регионами. Это означает, что логические сбои в одном регионе едва ли затронут другой регион.

## <a name="benefits-of-paired-regions"></a>Преимущества пар регионов

5. **Физическая изоляция** . по возможности Azure предпочитает по крайней мере 300 миль между центрами обработки данных в территориальной паре, хотя это непрактично или возможно во всех регионах. Физическое разделение центров обработки данных уменьшает вероятность последствий стихийных бедствий, массовых беспорядков, отключения электроэнергии или физического выхода сети из строя в обоих регионах одновременно. Уровень изоляции зависит от местных условий (размер географической территории, доступность инфраструктуры электропитания/сети, законодательство и т. д.).  

6. **Репликация, предоставляемая платформой** . Некоторые службы, такие как геоизбыточное хранилище, обеспечивают автоматическую репликацию в парный регион.

7. **Порядок восстановления региона** . в случае обширного сбоя для восстановления одного региона необходимо задать приоритеты для каждой пары. Для приложений, развернутых в парных регионах, один из регионов гарантированно восстанавливается в первую очередь. Если приложение развернуто в регионах, которые не являются парными, восстановление может происходить с задержкой. В худшем случае оба выбранных региона будут восстановлены в последнюю очередь.

8. **Последовательные обновления** . запланированные обновления системы Azure выводятся последовательно в парные регионы (не одновременно) для сокращения времени простоя, влияния ошибок и логических сбоев в редких случаях неправильного обновления.

9. **Местонахождение данных** — регион находится в той же географической области, что и ее пара (за исключением Южная Бразилия), чтобы соответствовать требованиям местонахождение данных в отношении налогов и законодательных целей.
